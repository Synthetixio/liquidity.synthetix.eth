"use strict";(globalThis.webpackChunk_snx_v3_liquidity=globalThis.webpackChunk_snx_v3_liquidity||[]).push([[4249],{44249:(e,t,s)=>{s.r(t),s.d(t,{ClaimModal:()=>q,ClaimModalUi:()=>_,default:()=>I});var i=s(11082),r=s(59176),n=s(74008),a=s(84626),o=s(70065),l=s(38035),d=s(56317),c=s(45071),u=s(79929),x=s(25042),h=s(2784),p=s(89536),b=s(13797),g=s(64996),m=s(40109),y=s(97721),C=s(99581),j=s(28145),w=s(76885),f=s(86689),k=s(77528),v=s(75429),D=s(21849),B=s(73635),S=s(88383),O=s(52322);const _=({onClose:e,isOpen:t,debtChange:s,txnStatus:o,execBorrow:l})=>{const{network:d}=(0,w.LN)(),u=(0,k.Yz)(d?.id,d?.preset),{data:h}=(0,B.p)();if(t)return"success"===o?(0,O.jsx)(D.s,{onClose:e,title:"Debt successfully Updated",subline:(0,O.jsxs)(O.Fragment,{children:["Your ",(0,O.jsx)("b",{children:"Debt"})," has been updated, read more about it in the"," ",(0,O.jsx)(i.r,{href:"https://docs.synthetix.io/v/synthetix-v3-user-documentation",target:"_blank",color:"cyan.500",children:"Synthetix V3 Documentation"})]}),alertText:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("b",{children:"Debt"})," successfully Updated"]})}):(0,O.jsxs)("div",{children:[(0,O.jsxs)(r.x,{color:"gray.50",fontSize:"20px",fontWeight:700,children:[(0,O.jsx)(v.R,{cursor:"pointer",onClick:e,mr:2}),"Manage Debt"]}),(0,O.jsx)(n.i,{my:4}),(0,O.jsx)(x.P0,{step:1,title:u?"Claim":"Borrow",subtitle:(0,O.jsxs)(r.x,{as:"div",children:[u?"Claim":"Borrow",(0,O.jsx)(c.$,{prefix:" ",value:s,suffix:u?" USDC":` ${h?.symbol}`})]}),status:{failed:"error"===o,loading:["prompting","pending"].includes(o)}}),(0,O.jsx)(a.z,{isDisabled:["pending","prompting"].includes(o),onClick:()=>{["unsent","error"].includes(o)&&l()},width:"100%",mt:"6","data-testid":"claim-confirm-button",children:(()=>{switch(o){case"error":return"Retry";case"pending":case"prompting":return"Processing...";default:return"Execute Transaction"}})()})]})},q=({onClose:e,isOpen:t,liquidityPosition:s})=>{const{debtChange:i,setDebtChange:r}=(0,h.useContext)(b.n),a=(0,j.useQueryClient)(),c=(0,p.UO)(),{network:x}=(0,w.LN)(),v=(0,k.Yz)(x?.id,x?.preset),{data:D}=(0,g.t)(c.collateralSymbol),B=(0,h.useMemo)((()=>!s||s?.debt.gte(0)?S.GH:(0,u.wei)(s.debt.abs().toBN().sub(1))),[s]),q=(0,h.useMemo)((()=>i.gt(B)&&!v),[i,v,B]),{exec:I,txnState:M,settle:T}=(0,f.h)({accountId:c.accountId,poolId:c.poolId,collateralTypeAddress:D?.tokenAddress,debtChange:i}),$=(0,o.p)({isClosable:!0,duration:9e3}),{data:P}=(0,m.a)(),U=(0,y.o)(P),z=(0,h.useCallback)((async()=>{try{await I(),a.invalidateQueries({queryKey:[`${x?.id}-${x?.preset}`,"LiquidityPosition"],exact:!1}),a.invalidateQueries({queryKey:[`${x?.id}-${x?.preset}`,"TokenBalance"]}),r(S.GH)}catch(e){const t=U(e);throw t&&console.error(new Error(t.name),t),$.closeAll(),$({title:q?"Borrow":"Claim failed",description:t?(0,O.jsx)(C.M,{contractError:t}):"Please try again.",status:"error",variant:"left-accent"}),Error(q?"Borrow":"Claim failed",{cause:e})}}),[I,a,x?.id,x?.preset,r,U,$,q]),{txnStatus:E}=M;return c.poolId&&c.accountId&&D?(0,O.jsx)(_,{execBorrow:z,debtChange:i,txnStatus:E,onClose:()=>{T(),e()},isOpen:t}):(0,O.jsxs)(l.k,{gap:4,flexDirection:"column",children:[(0,O.jsx)(d.O,{maxW:"232px",width:"100%",height:"20px"}),(0,O.jsx)(n.i,{my:4}),(0,O.jsx)(d.O,{width:"100%",height:"20px"}),(0,O.jsx)(d.O,{width:"100%",height:"20px"})]})},I=q}}]);
//# sourceMappingURL=4249.801f2289.js.map