"use strict";(globalThis.webpackChunk_snx_v3_liquidity=globalThis.webpackChunk_snx_v3_liquidity||[]).push([[4249],{44249:(e,t,s)=>{s.r(t),s.d(t,{ClaimModal:()=>S,ClaimModalUi:()=>O,default:()=>_});var i=s(11082),r=s(59176),n=s(74008),a=s(84626),o=s(70065),l=s(38035),c=s(56317),d=s(45071),u=s(79929),x=s(25042),h=s(2784),p=s(89536),b=s(13797),m=s(64996),y=s(40109),g=s(97721),C=s(99581),j=s(28145),w=s(908),f=s(86689),k=s(77528),v=s(75429),D=s(21849),B=s(73635),$=s(42219),q=s(52322);const O=({symbol:e,onClose:t,isOpen:s,debtChange:o,txnStatus:l,execBorrow:c})=>{const{network:u}=(0,w.LN)(),h=(0,k.Yz)(u?.id,u?.preset);if(s)return"success"===l?(0,q.jsx)(D.s,{onClose:t,title:"Debt successfully Updated",subline:(0,q.jsxs)(q.Fragment,{children:["Your ",(0,q.jsx)("b",{children:"Debt"})," has been updated, read more about it in the"," ",(0,q.jsx)(i.r,{href:"https://docs.synthetix.io/v/synthetix-v3-user-documentation",target:"_blank",color:"cyan.500",children:"Synthetix V3 Documentation"})]}),alertText:(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)("b",{children:"Debt"})," successfully Updated"]})}):(0,q.jsxs)("div",{"data-cy":"claim multistep",children:[(0,q.jsxs)(r.x,{color:"gray.50",fontSize:"20px",fontWeight:700,children:[(0,q.jsx)(v.R,{cursor:"pointer",onClick:t,mr:2}),"Manage Debt"]}),(0,q.jsx)(n.i,{my:4}),(0,q.jsx)(x.P0,{step:1,title:h?"Claim":"Borrow",subtitle:(0,q.jsxs)(r.x,{as:"div",children:[h?"Claim":"Borrow",(0,q.jsx)(d.$,{prefix:" ",value:o,suffix:` ${e}`})]}),status:{failed:"error"===l,loading:["prompting","pending"].includes(l)}}),(0,q.jsx)(a.z,{isDisabled:["pending","prompting"].includes(l),onClick:()=>{["unsent","error"].includes(l)&&c()},width:"100%",mt:"6","data-cy":"claim confirm button",children:(()=>{switch(l){case"error":return"Retry";case"pending":case"prompting":return"Processing...";default:return"Execute Transaction"}})()})]})},S=({onClose:e,isOpen:t,liquidityPosition:s})=>{const{debtChange:i,setDebtChange:r}=(0,h.useContext)(b.n),a=(0,j.useQueryClient)(),d=(0,p.UO)(),{network:x}=(0,w.LN)(),v=(0,k.Yz)(x?.id,x?.preset),{data:D}=(0,m.t)(d.collateralSymbol),{data:S}=(0,B.p)(),_=(0,h.useMemo)((()=>!s||s?.debt.gte(0)?$.GH:(0,u.wei)(s.debt.abs().toBN().sub(1))),[s]),I=(0,h.useMemo)((()=>i.gt(_)&&!v),[i,v,_]),{exec:M,txnState:T,settle:P}=(0,f.h)({accountId:d.accountId,poolId:d.poolId,collateralTypeAddress:D?.tokenAddress,debtChange:i}),U=(0,o.p)({isClosable:!0,duration:9e3}),{data:z}=(0,y.a)(),A=(0,g.o)(z),E=(0,h.useCallback)((async()=>{try{await M(),a.invalidateQueries({queryKey:[`${x?.id}-${x?.preset}`,"LiquidityPosition"],exact:!1}),a.invalidateQueries({queryKey:[`${x?.id}-${x?.preset}`,"TokenBalance"]}),a.invalidateQueries({queryKey:[`${x?.id}-${x?.preset}`,"AccountCollateralUnlockDate"]}),r($.GH)}catch(e){const t=A(e);throw t&&console.error(new Error(t.name),t),U.closeAll(),U({title:I?"Borrow":"Claim failed",description:t?(0,q.jsx)(C.M,{contractError:t}):"Please try again.",status:"error",variant:"left-accent"}),Error(I?"Borrow":"Claim failed",{cause:e})}}),[M,a,x?.id,x?.preset,r,A,U,I]),{txnStatus:Q}=T;return d.poolId&&d.accountId&&D&&S?(0,q.jsx)(O,{execBorrow:E,debtChange:i,txnStatus:Q,onClose:()=>{P(),e()},isOpen:t,symbol:v?D.symbol:S.symbol}):(0,q.jsxs)(l.k,{gap:4,flexDirection:"column",children:[(0,q.jsx)(c.O,{maxW:"232px",width:"100%",height:"20px"}),(0,q.jsx)(n.i,{my:4}),(0,q.jsx)(c.O,{width:"100%",height:"20px"}),(0,q.jsx)(c.O,{width:"100%",height:"20px"})]})},_=S}}]);
//# sourceMappingURL=4249.523ea880.js.map