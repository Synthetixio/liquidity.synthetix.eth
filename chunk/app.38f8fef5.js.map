{"version":3,"file":"chunk/app.38f8fef5.js","mappings":"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","sources":["webpack://@snx-v3/liquidity/../../contracts/importers/importCoreProxy.js","webpack://@snx-v3/liquidity/../../contracts/importers/importMulticall3.js","webpack://@snx-v3/liquidity/../components/Amount/Amount.tsx","webpack://@snx-v3/liquidity/../components/Tooltip/Tooltip.tsx","webpack://@snx-v3/liquidity/../components/icons/SUSDCIcon/SUSDCIcon.tsx","webpack://@snx-v3/liquidity/../components/icons/Logo/Logo.tsx","webpack://@snx-v3/liquidity/../components/icons/EthereumIcon/EthereumIcon.tsx","webpack://@snx-v3/liquidity/../components/icons/SNXIcon/SNXIcon.tsx","webpack://@snx-v3/liquidity/../components/icons/OptimismIcon/OptimismIcon.tsx","webpack://@snx-v3/liquidity/../components/icons/DollarCircle/DollarCircle.tsx","webpack://@snx-v3/liquidity/../components/icons/BitcoinIcon/BitcoinIcon.tsx","webpack://@snx-v3/liquidity/../components/icons/ArbitrumIcon/ArbitrumIcon.tsx","webpack://@snx-v3/liquidity/../components/icons/CollateralIcon/CollateralIcon.tsx","webpack://@snx-v3/liquidity/../components/icons/ChevronDown/ChevronDown.tsx","webpack://@snx-v3/liquidity/../components/icons/ChevronUp/ChevronUp.tsx","webpack://@snx-v3/liquidity/../components/icons/FailedIcon/FailedIcon.tsx","webpack://@snx-v3/liquidity/../components/icons/WalletIcon/WalletIcon.tsx","webpack://@snx-v3/liquidity/../components/icons/LogoIcon/LogoIcon.tsx","webpack://@snx-v3/liquidity/../components/icons/BorrowIcon/BorrowIcon.tsx","webpack://@snx-v3/liquidity/../components/icons/BaseIcon/BaseIcon.tsx","webpack://@snx-v3/liquidity/../components/icons/DiscordIcon/DiscordIcon.tsx","webpack://@snx-v3/liquidity/../components/icons/XIcon/XIcon.tsx","webpack://@snx-v3/liquidity/../components/icons/GithubIcon/GithubIcon.tsx","webpack://@snx-v3/liquidity/../components/icons/WarpcastIcon/WarpcastIcon.tsx","webpack://@snx-v3/liquidity/../components/icons/YoutubeIcon/YoutubeIcon.tsx","webpack://@snx-v3/liquidity/../lib/ManagePositionContext/ManagePositionContext.tsx","webpack://@snx-v3/liquidity/../lib/constants/constants.ts","webpack://@snx-v3/liquidity/../lib/fetchPythPrices/fetchPythPrices.ts","webpack://@snx-v3/liquidity/../lib/format/format.ts","webpack://@snx-v3/liquidity/../lib/format/currency.ts","webpack://@snx-v3/liquidity/../lib/isBaseAndromeda/isBaseAndromeda.ts","webpack://@snx-v3/liquidity/../lib/tsHelpers/notNill.ts","webpack://@snx-v3/liquidity/../lib/txnReducer/txnReducer.ts","webpack://@snx-v3/liquidity/../../contracts/importers/importOracleManagerProxy.js","webpack://@snx-v3/liquidity/../lib/useAllCollateralPriceIds/useAllCollateralPriceIds.ts","webpack://@snx-v3/liquidity/../lib/useOracleManagerProxy/useOracleManagerProxy.ts","webpack://@snx-v3/liquidity/../lib/useAllowance/useAllowance.ts","webpack://@snx-v3/liquidity/../lib/useApprove/useApprove.ts","webpack://@snx-v3/liquidity/../lib/useApr/useApr.ts","webpack://@snx-v3/liquidity/../lib/useBlockchain/useBlockchain.tsx","webpack://@snx-v3/liquidity/../lib/useClearDebt/useClearDebt.tsx","webpack://@snx-v3/liquidity/../../contracts/importers/importExtras.js","webpack://@snx-v3/liquidity/../../contracts/importers/importPythERC7412Wrapper.js","webpack://@snx-v3/liquidity/../lib/useCollateralPriceUpdates/useCollateralPriceUpdates.ts","webpack://@snx-v3/liquidity/../lib/useCollateralTypes/useCollateralTypes.ts","webpack://@snx-v3/liquidity/../lib/useCoreProxy/useCoreProxy.ts","webpack://@snx-v3/liquidity/../lib/useEthBalance/useEthBalance.ts","webpack://@snx-v3/liquidity/../lib/useGasOptions/useGasOptions.ts","webpack://@snx-v3/liquidity/../lib/feeSuggestion/math.ts","webpack://@snx-v3/liquidity/../lib/feeSuggestion/utils.ts","webpack://@snx-v3/liquidity/../lib/feeSuggestion/feeSuggestion.ts","webpack://@snx-v3/liquidity/../lib/useGasPrice/useGasPrice.ts","webpack://@snx-v3/liquidity/../lib/useGasSpeed/GasSpeedContext.tsx","webpack://@snx-v3/liquidity/../lib/useGetUSDTokens/useGetUSDTokens.ts","webpack://@snx-v3/liquidity/../lib/useMulticall3/useMulticall3.ts","webpack://@snx-v3/liquidity/../lib/useParams/useParams.ts","webpack://@snx-v3/liquidity/../lib/usePools/usePools.ts","webpack://@snx-v3/liquidity/../lib/usePoolsList/usePoolsList.ts","webpack://@snx-v3/liquidity/../../contracts/importers/importSpotMarketProxy.js","webpack://@snx-v3/liquidity/../lib/useSpotMarketProxy/useSpotMarketProxy.ts","webpack://@snx-v3/liquidity/../lib/useTokenBalance/useTokenBalance.ts","webpack://@snx-v3/liquidity/../lib/assertAddressType/assertAddressType.ts","webpack://@snx-v3/liquidity/../lib/useUSDProxy/useUSDProxy.ts","webpack://@snx-v3/liquidity/../../contracts/importers/importUSDProxy.js","webpack://@snx-v3/liquidity/../../contracts/importers/importAllErrors.js","webpack://@snx-v3/liquidity/../lib/withERC7412/withMemoryCache.ts","webpack://@snx-v3/liquidity/../lib/parser/parseTxError.ts","webpack://@snx-v3/liquidity/../lib/withERC7412/withERC7412.ts","webpack://@snx-v3/liquidity/../lib/zod/zod.ts","webpack://@snx-v3/liquidity/../../theme/src/theme.ts","webpack://@snx-v3/liquidity/../../theme/src/fonts.tsx","webpack://@snx-v3/liquidity/../components/TermsModal/TermsModal.tsx","webpack://@snx-v3/liquidity/../lib/useLocalStorage/useLocalStorage.ts","webpack://@snx-v3/liquidity/./src/utils/constants.ts","webpack://@snx-v3/liquidity/../lib/useAccountProxy/useAccountProxy.ts","webpack://@snx-v3/liquidity/../../contracts/importers/importAccountProxy.js","webpack://@snx-v3/liquidity/../lib/useAccounts/useAccounts.ts","webpack://@snx-v3/liquidity/./src/layouts/Default/NetworkController.tsx","webpack://@snx-v3/liquidity/../lib/tsHelpers/stringToHash.ts","webpack://@snx-v3/liquidity/../lib/useTokenInfo/useTokenInfo.ts","webpack://@snx-v3/liquidity/../lib/useAccountCollateral/useAccountCollateral.ts","webpack://@snx-v3/liquidity/../lib/useCollateralPrices/useCollateralPrices.ts","webpack://@snx-v3/liquidity/./src/components/TokenIcon/TokenIcon.tsx","webpack://@snx-v3/liquidity/../lib/formatters/number.ts","webpack://@snx-v3/liquidity/./src/components/Assets/AssetTable/AssetsRow.tsx","webpack://@snx-v3/liquidity/./src/components/Assets/AssetTable/AssetTableHeader.tsx","webpack://@snx-v3/liquidity/./src/components/Assets/AssetTable/AssetsTable.tsx","webpack://@snx-v3/liquidity/./src/components/SynthSkeleton/SynthSkeleton.tsx","webpack://@snx-v3/liquidity/./src/components/Assets/AssetTable/AssetRowLoading.tsx","webpack://@snx-v3/liquidity/./src/components/Assets/AssetTable/AssetsEmpty.tsx","webpack://@snx-v3/liquidity/./src/utils/assets.ts","webpack://@snx-v3/liquidity/./src/components/Assets/AssetsList.tsx","webpack://@snx-v3/liquidity/../lib/useAccountCollateralUnlockDate/useAccountCollateralUnlockDate.ts","webpack://@snx-v3/liquidity/./src/components/CollateralAlert/CollateralAlert.tsx","webpack://@snx-v3/liquidity/../components/BorderBox/BorderBox.tsx","webpack://@snx-v3/liquidity/../lib/etherscanLink/etherscanLink.ts","webpack://@snx-v3/liquidity/./src/components/Rewards/RewardsModal.tsx","webpack://@snx-v3/liquidity/../lib/formatters/date.ts","webpack://@snx-v3/liquidity/../lib/formatters/string.ts","webpack://@snx-v3/liquidity/./src/components/Rewards/RewardsRow.tsx","webpack://@snx-v3/liquidity/../lib/useClaimRewards/useClaimRewards.ts","webpack://@snx-v3/liquidity/./src/components/Rewards/RewardsLoading.tsx","webpack://@snx-v3/liquidity/./src/components/Rewards/Rewards.tsx","webpack://@snx-v3/liquidity/./src/components/Stats/StatBox.tsx","webpack://@snx-v3/liquidity/../lib/useLiquidityPosition/useLiquidityPosition.ts","webpack://@snx-v3/liquidity/../lib/calculations/calculations.ts","webpack://@snx-v3/liquidity/../lib/tsHelpers/keyBy.ts","webpack://@snx-v3/liquidity/../lib/useLiquidityPositions/useLiquidityPositions.ts","webpack://@snx-v3/liquidity/./src/components/Stats/StatsList.tsx","webpack://@snx-v3/liquidity/./src/utils/positions.ts","webpack://@snx-v3/liquidity/./src/components/Positions/PositionsTable/PositionsRow.tsx","webpack://@snx-v3/liquidity/../lib/useGetBorrow/useGetBorrow.tsx","webpack://@snx-v3/liquidity/./src/components/Positions/PositionsTable/PositionsRowLoading.tsx","webpack://@snx-v3/liquidity/./src/components/Positions/PositionsTable/PositionsTable.tsx","webpack://@snx-v3/liquidity/./src/components/Positions/PositionsTable/PositionTableHeader.tsx","webpack://@snx-v3/liquidity/./src/components/Positions/PositionsTable/PositionNotConnected.tsx","webpack://@snx-v3/liquidity/./src/components/Positions/PositionsTable/PositionEmpty.tsx","webpack://@snx-v3/liquidity/./src/components/Positions/PositionsTable/TableDivider.tsx","webpack://@snx-v3/liquidity/../lib/useStablecoin/useStablecoin.ts","webpack://@snx-v3/liquidity/./src/components/Positions/PositionsList.tsx","webpack://@snx-v3/liquidity/./src/components/Balance/Balance.tsx","webpack://@snx-v3/liquidity/../lib/useWithdraw/useWithdraw.tsx","webpack://@snx-v3/liquidity/../lib/useWithdrawBaseAndromeda/useWithdrawBaseAndromeda.tsx","webpack://@snx-v3/liquidity/./src/components/WithdrawModal/WithdrawModal.tsx","webpack://@snx-v3/liquidity/../lib/useVaultsData/useVaultsData.ts","webpack://@snx-v3/liquidity/./src/components/PoolStats/CollateralTable.tsx","webpack://@snx-v3/liquidity/../../contracts/importers/importRewardDistributor.js","webpack://@snx-v3/liquidity/../lib/useRewards/useRewards.ts","webpack://@snx-v3/liquidity/../lib/usePoolData/usePoolData.tsx","webpack://@snx-v3/liquidity/./src/components/PoolStats/RewardsTable.tsx","webpack://@snx-v3/liquidity/../lib/useAprHistory/useAprHistory.ts","webpack://@snx-v3/liquidity/./src/components/PoolStats/HistoricalTVL.tsx","webpack://@snx-v3/liquidity/../components/NumberInput/NumberInput.tsx","webpack://@snx-v3/liquidity/../lib/validatePosition/validatePosition.ts","webpack://@snx-v3/liquidity/./src/components/Borrow/Borrow.tsx","webpack://@snx-v3/liquidity/../components/PercentBadges/PercentBadges.tsx","webpack://@snx-v3/liquidity/./src/components/Deposit/Deposit.tsx","webpack://@snx-v3/liquidity/../lib/useTransferableSynthetix/useTransferableSynthetix.ts","webpack://@snx-v3/liquidity/./src/components/Manage/ManageActions.tsx","webpack://@snx-v3/liquidity/./src/components/Manage/ManageStats.tsx","webpack://@snx-v3/liquidity/./src/components/Repay/Repay.tsx","webpack://@snx-v3/liquidity/./src/components/Repay/RepayAllDebt.tsx","webpack://@snx-v3/liquidity/../lib/usePoolConfiguration/usePoolConfiguration.ts","webpack://@snx-v3/liquidity/./src/components/Undelegate/Undelegate.tsx","webpack://@snx-v3/liquidity/./src/components/AccountBanner/AccountBanner.tsx","webpack://@snx-v3/liquidity/./src/components/Pools/PoolCards/PoolCard.tsx","webpack://@snx-v3/liquidity/./src/components/Pools/ChainFilter.tsx","webpack://@snx-v3/liquidity/./src/components/Pools/CollateralFilter.tsx","webpack://@snx-v3/liquidity/./src/components/Pools/PoolCards/TorosPoolCard.tsx","webpack://@snx-v3/liquidity/./src/components/Pools/PoolCards/PoolCardsLoading.tsx","webpack://@snx-v3/liquidity/./src/components/Pools/PoolsList.tsx","webpack://@snx-v3/liquidity/./src/components/Pools/CollateralSection.tsx","webpack://@snx-v3/liquidity/./src/components/Pools/PoolHeader.tsx","webpack://@snx-v3/liquidity/../lib/useMarketNamesById/useMarketNamesById.ts","webpack://@snx-v3/liquidity/./src/components/Pools/MarketSection.tsx","webpack://@snx-v3/liquidity/./src/layouts/Default/Header.tsx","webpack://@snx-v3/liquidity/./src/layouts/Default/Footer.tsx","webpack://@snx-v3/liquidity/./src/layouts/Default/DefaultLayout.tsx","webpack://@snx-v3/liquidity/./src/pages/404.tsx","webpack://@snx-v3/liquidity/./src/pages/Dashboard.tsx","webpack://@snx-v3/liquidity/./src/pages/Home.tsx","webpack://@snx-v3/liquidity/../components/HomeLink/HomeLink.tsx","webpack://@snx-v3/liquidity/../components/WithdrawIncrease/WithdrawIncrease.tsx","webpack://@snx-v3/liquidity/./src/pages/Manage.tsx","webpack://@snx-v3/liquidity/./src/pages/Pool.tsx","webpack://@snx-v3/liquidity/./src/pages/Pools.tsx","webpack://@snx-v3/liquidity/../lib/useManagePermissions/useManagePermissions.ts","webpack://@snx-v3/liquidity/./src/components/Address/Address.tsx","webpack://@snx-v3/liquidity/./src/components/Permissions/AccountPermissions.ts","webpack://@snx-v3/liquidity/../lib/useAccountInfo/useAccountPermissions.ts","webpack://@snx-v3/liquidity/./src/components/Permissions/PermissionsInfo.tsx","webpack://@snx-v3/liquidity/./src/components/Permissions/PermissionModal.tsx","webpack://@snx-v3/liquidity/./src/components/Permissions/PermissionRow.tsx","webpack://@snx-v3/liquidity/./src/components/Permissions/TransferOwnershipModal.tsx","webpack://@snx-v3/liquidity/../lib/useTransferAccountId/useTransferAccountId.ts","webpack://@snx-v3/liquidity/./src/components/Permissions/PermissionTableLoading.tsx","webpack://@snx-v3/liquidity/./src/components/Permissions/PermissionTable.tsx","webpack://@snx-v3/liquidity/./src/components/Permissions/DelegationIcon.tsx","webpack://@snx-v3/liquidity/./src/components/Permissions/Permissions.tsx","webpack://@snx-v3/liquidity/./src/pages/Account/Settings.tsx","webpack://@snx-v3/liquidity/./src/Router.tsx","webpack://@snx-v3/liquidity/./src/utils/onboard.ts","webpack://@snx-v3/liquidity/./src/App.tsx","webpack://@snx-v3/liquidity/./src/index.tsx","webpack://@snx-v3/liquidity/../../tools/safe-import/index.js","webpack://@snx-v3/liquidity/../../tools/safe-import/safeLazy.js"],"sourcesContent":["export async function importCoreProxy(chainId, preset) {\n  if (!preset) {\n    throw new Error(`Missing preset`);\n  }\n  const deployment = `${Number(chainId).toFixed(0)}-${preset}`;\n  switch (deployment) {\n    case '1-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/1-main/meta.json'),\n        import('@synthetixio/v3-contracts/1-main/CoreProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.CoreProxy, abi };\n    }\n    case '11155111-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/11155111-main/meta.json'),\n        import('@synthetixio/v3-contracts/11155111-main/CoreProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.CoreProxy, abi };\n    }\n    case '10-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/10-main/meta.json'),\n        import('@synthetixio/v3-contracts/10-main/CoreProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.CoreProxy, abi };\n    }\n    case '8453-andromeda': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/8453-andromeda/meta.json'),\n        import('@synthetixio/v3-contracts/8453-andromeda/CoreProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.CoreProxy, abi };\n    }\n    case '84532-andromeda': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/84532-andromeda/meta.json'),\n        import('@synthetixio/v3-contracts/84532-andromeda/CoreProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.CoreProxy, abi };\n    }\n    case '42161-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-main/meta.json'),\n        import('@synthetixio/v3-contracts/42161-main/CoreProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.CoreProxy, abi };\n    }\n    case '421614-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/421614-main/meta.json'),\n        import('@synthetixio/v3-contracts/421614-main/CoreProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.CoreProxy, abi };\n    }\n    case '42161-arbthetix': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-arbthetix/meta.json'),\n        import('@synthetixio/v3-contracts/42161-arbthetix/CoreProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.CoreProxy, abi };\n    }\n    default: {\n      throw new Error(`Unsupported deployment ${deployment} for CoreProxy`);\n    }\n  }\n}\n","const abi = [\n  'function aggregate(tuple(address target, bytes callData)[] calls) payable returns (uint256 blockNumber, bytes[] returnData)',\n  'function blockAndAggregate(tuple(address target, bytes callData)[] calls) payable returns (uint256 blockNumber, bytes32 blockHash, tuple(bool success, bytes returnData)[] returnData)',\n  'function getBasefee() view returns (uint256 basefee)',\n  'function getBlockHash(uint256 blockNumber) view returns (bytes32 blockHash)',\n  'function getBlockNumber() view returns (uint256 blockNumber)',\n  'function getChainId() view returns (uint256 chainid)',\n  'function getCurrentBlockCoinbase() view returns (address coinbase)',\n  'function getCurrentBlockDifficulty() view returns (uint256 difficulty)',\n  'function getCurrentBlockGasLimit() view returns (uint256 gaslimit)',\n  'function getCurrentBlockTimestamp() view returns (uint256 timestamp)',\n  'function getEthBalance(address addr) view returns (uint256 balance)',\n  'function getLastBlockHash() view returns (bytes32 blockHash)',\n  'function tryAggregate(bool requireSuccess, tuple(address target, bytes callData)[] calls) payable returns (tuple(bool success, bytes returnData)[] returnData)',\n  'function tryBlockAndAggregate(bool requireSuccess, tuple(address target, bytes callData)[] calls) payable returns (uint256 blockNumber, bytes32 blockHash, tuple(bool success, bytes returnData)[] returnData)',\n  'function aggregate3(tuple(address target, bool allowFailure, bytes callData)[] calls) payable returns (tuple(bool success, bytes returnData)[] returnData)',\n  'function aggregate3Value(tuple(address target, bool allowFailure, uint256 value, bytes callData)[] calls) payable returns (tuple(bool success, bytes returnData)[] returnData)',\n];\n\nexport async function importMulticall3(chainId, preset) {\n  const deployment = `${Number(chainId).toFixed(0)}-${preset}`;\n  switch (deployment) {\n    case '1-main': {\n      const { mainnet } = await import('viem/chains');\n      return { address: mainnet.contracts.multicall3.address, abi: abi };\n    }\n    case '11155111-main': {\n      const { sepolia } = await import('viem/chains');\n      return { address: sepolia.contracts.multicall3.address, abi: abi };\n    }\n    case '10-main': {\n      const { optimism } = await import('viem/chains');\n      return { address: optimism.contracts.multicall3.address, abi: abi };\n    }\n    case '8453-andromeda': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/8453-andromeda/meta.json'),\n        import('@synthetixio/v3-contracts/8453-andromeda/TrustedMulticallForwarder.readable.json'),\n      ]);\n      return { address: meta.contracts.TrustedMulticallForwarder, abi };\n    }\n    case '84532-andromeda': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/84532-andromeda/meta.json'),\n        import('@synthetixio/v3-contracts/84532-andromeda/TrustedMulticallForwarder.readable.json'),\n      ]);\n      return { address: meta.contracts.TrustedMulticallForwarder, abi };\n    }\n    case '42161-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-main/meta.json'),\n        import('@synthetixio/v3-contracts/42161-main/TrustedMulticallForwarder.readable.json'),\n      ]);\n      return { address: meta.contracts.TrustedMulticallForwarder, abi };\n    }\n    case '42161-arbthetix': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-arbthetix/meta.json'),\n        import('@synthetixio/v3-contracts/42161-arbthetix/TrustedMulticallForwarder.readable.json'),\n      ]);\n      return { address: meta.contracts.TrustedMulticallForwarder, abi };\n    }\n    case '421614-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/421614-main/meta.json'),\n        import('@synthetixio/v3-contracts/421614-main/TrustedMulticallForwarder.readable.json'),\n      ]);\n      return { address: meta.contracts.TrustedMulticallForwarder, abi };\n    }\n    default: {\n      throw new Error(`Unsupported deployment ${deployment} for Multicall3`);\n    }\n  }\n}\n","import { useMemo } from 'react';\nimport { currency } from '@snx-v3/format';\nimport Wei, { wei } from '@synthetixio/wei';\nimport { constants } from 'ethers';\nimport { Tooltip } from '@snx-v3/Tooltip';\n\nexport function Amount({\n  value,\n  prefix = '',\n  suffix = '',\n  'data-testid': testid,\n  showTooltip,\n}: {\n  prefix?: string;\n  value?: Wei;\n  suffix?: string;\n  'data-testid'?: string;\n  showTooltip?: boolean;\n}) {\n  const { formattedValue, preciseValue, isMaxUint } = useMemo(() => {\n    if (!value) {\n      return { formattedValue: '-', preciseValue: '-' };\n    }\n\n    const formattedValue = currency(value);\n    const cleanNumber = wei(formattedValue.replaceAll(',', ''));\n\n    return {\n      isMaxUint: wei(constants.MaxInt256).lte(value),\n      formattedValue,\n      preciseValue: value.eq(cleanNumber) ? formattedValue : value.toString(),\n    };\n  }, [value]);\n\n  return (\n    <Tooltip\n      label={\n        <>\n          {isMaxUint ? (\n            'You cannot borrow sUSD against this collateral'\n          ) : (\n            <>\n              {prefix}\n              {preciseValue}\n              {suffix}\n            </>\n          )}\n        </>\n      }\n      isDisabled={formattedValue === preciseValue || !showTooltip}\n    >\n      <span data-testid={testid}>\n        {prefix}\n        {isMaxUint ? 'N/A' : formattedValue}\n        {!isMaxUint && suffix}\n      </span>\n    </Tooltip>\n  );\n}\n","import { Tooltip as ChakraTooltip, TooltipProps } from '@chakra-ui/react';\n\nexport const Tooltip = ({ ...props }: TooltipProps) => {\n  return <ChakraTooltip hasArrow bg=\"gray.900\" p={3} borderRadius=\"4px\" {...props} />;\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\nexport const SUSDCIcon = ({ width = '42px', height = '42px' }: IconProps) => {\n  return (\n    <Icon width={width} height={height} viewBox=\"0 0 30 30\" fill=\"none\">\n      <g clipPath=\"url(#clip0_10043_2361)\">\n        <path\n          d=\"M15 30C23.3125 30 30 23.3125 30 15C30 6.68745 23.3125 0 15 0C6.68745 0 0 6.68745 0 15C0 23.3125 6.68745 30 15 30Z\"\n          fill=\"#2775CA\"\n        />\n        <path\n          d=\"M19.125 17.375C19.125 15.1875 17.8125 14.4375 15.1875 14.1251C13.3125 13.875 12.9375 13.3751 12.9375 12.5C12.9375 11.6249 13.5625 11.0625 14.8125 11.0625C15.9375 11.0625 16.5625 11.4375 16.875 12.375C16.9375 12.5625 17.125 12.6875 17.3125 12.6875H18.3124C18.5625 12.6875 18.75 12.5 18.75 12.2501V12.1875C18.4999 10.8125 17.3749 9.75 15.9375 9.62505V8.12505C15.9375 7.875 15.75 7.6875 15.4375 7.62495H14.5C14.25 7.62495 14.0625 7.81245 13.9999 8.12505V9.5625C12.1249 9.81255 10.9375 11.0625 10.9375 12.6251C10.9375 14.6876 12.1875 15.5 14.8125 15.8126C16.5625 16.125 17.125 16.5 17.125 17.5001C17.125 18.5001 16.2499 19.1876 15.0625 19.1876C13.4374 19.1876 12.8749 18.5 12.6874 17.5625C12.625 17.3126 12.4375 17.1875 12.25 17.1875H11.1874C10.9375 17.1875 10.75 17.375 10.75 17.625V17.6876C10.9999 19.25 12 20.375 14.0625 20.6876V22.1876C14.0625 22.4375 14.25 22.625 14.5624 22.6875H15.4999C15.7499 22.6875 15.9375 22.5 16 22.1876V20.6876C17.875 20.375 19.125 19.0625 19.125 17.375Z\"\n          fill=\"white\"\n        />\n        <path\n          d=\"M11.8125 23.9374C6.9375 22.1875 4.43745 16.75 6.25005 11.9374C7.18755 9.31245 9.25005 7.3125 11.8125 6.375C12.0625 6.25005 12.1875 6.06255 12.1875 5.74995V4.875C12.1875 4.62495 12.0625 4.43745 11.8125 4.37505C11.7499 4.37505 11.625 4.37505 11.5624 4.43745C5.625 6.31245 2.37495 12.625 4.24995 18.5625C5.37495 22.0624 8.0625 24.75 11.5624 25.875C11.8125 25.9999 12.0625 25.875 12.1249 25.6249C12.1875 25.5625 12.1875 25.5 12.1875 25.375V24.4999C12.1875 24.3124 12 24.0625 11.8125 23.9374ZM18.4375 4.43745C18.1875 4.3125 17.9375 4.43745 17.875 4.6875C17.8125 4.75005 17.8125 4.81245 17.8125 4.93755V5.8125C17.8125 6.06255 18 6.31245 18.1875 6.43755C23.0625 8.18745 25.5625 13.6249 23.75 18.4375C22.8125 21.0625 20.75 23.0625 18.1875 24C17.9374 24.1249 17.8125 24.3124 17.8125 24.625V25.5C17.8125 25.75 17.9374 25.9375 18.1875 25.9999C18.25 25.9999 18.375 25.9999 18.4375 25.9375C24.375 24.0625 27.6251 17.7499 25.7501 11.8125C24.6251 8.25 21.875 5.56245 18.4375 4.43745Z\"\n          fill=\"white\"\n        />\n      </g>\n      <defs>\n        <clipPath id=\"clip0_10043_2361\">\n          <rect width=\"30\" height=\"30\" fill=\"white\" />\n        </clipPath>\n      </defs>\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\ninterface LogoProps extends IconProps {\n  withText?: boolean;\n}\n\nexport const Logo = ({\n  color = '#00D1FF',\n  width = '126px',\n  height = '22px',\n  withText = true,\n}: LogoProps) => {\n  return (\n    <Icon width={width} height={height} viewBox=\"0 0 126 22\" fill=\"none\" color={color}>\n      <path\n        d=\"M7.00677 4.80523C6.804 4.57155 6.55437 4.45443 6.25731 4.45443H0.182051C0.128089 4.45443 0.0839395 4.43722 0.0506907 4.40281C0.0168969 4.36895 0 4.33065 0 4.28957V0.164856C0 0.12378 0.0168969 0.0860357 0.0506907 0.0516214C0.0839395 0.0172071 0.128089 0 0.182051 0H6.60179C8.22171 0 9.61925 0.667193 10.7939 2.00047L12.3533 3.91823L9.31565 7.65107L7.00677 4.80523ZM18.2263 1.97993C19.4009 0.659977 20.805 0 22.4386 0H28.8381C28.8921 0 28.9324 0.0138767 28.9597 0.0410751C28.9864 0.0688286 29 0.109904 29 0.164856V4.28957C29 4.33065 28.9864 4.36895 28.9597 4.40281C28.9324 4.43722 28.8921 4.45443 28.8381 4.45443H22.7629C22.4658 4.45443 22.2162 4.57155 22.0134 4.80523L17.5379 10.291L22.0336 15.8178C22.2363 16.0382 22.4789 16.1481 22.7629 16.1481H28.8381C28.8921 16.1481 28.9324 16.1653 28.9597 16.1997C28.9864 16.2341 29 16.2791 29 16.3335V20.4582C29 20.4993 28.9864 20.5376 28.9597 20.5714C28.9324 20.6058 28.8921 20.623 28.8381 20.623H22.4386C20.805 20.623 19.4075 19.9564 18.2465 18.6226L14.5204 14.0444L10.7939 18.6226C9.61925 19.9564 8.21517 20.623 6.58162 20.623H0.182051C0.128089 20.623 0.0872099 20.6058 0.0605018 20.5714C0.0332488 20.537 0.0201673 20.4926 0.0201673 20.4371V16.3124C0.0201673 16.2713 0.0332488 16.2336 0.0605018 16.1991C0.0872099 16.1647 0.128089 16.1475 0.182051 16.1475H6.25731C6.54074 16.1475 6.79038 16.031 7.00677 15.7967L11.4011 10.3937L18.2263 1.97993Z\"\n        fill=\"#00D1FF\"\n      />\n      {withText && (\n        <g>\n          <path d=\"M42.9 3.86001V15.72H51.7V17.86H40.4V3.86001H42.9Z\" fill=\"white\" />\n          <path\n            d=\"M53.4645 7.02001H55.7845V17.86H53.4645V7.02001ZM53.4645 3.30001H55.7845V5.62001H53.4645V3.30001Z\"\n            fill=\"white\"\n          />\n          <path\n            d=\"M61.0055 7.02001H68.5055V21.78H66.1855V16.38L64.4455 17.86H61.0055C59.4255 17.86 58.1655 16.54 58.1655 15.02V9.86002C58.1655 8.28002 59.4855 7.02001 61.0055 7.02001ZM61.6255 15.86H65.4855C65.8655 15.86 66.1855 15.56 66.1855 15.16V9.04002H61.6255C60.9855 9.04002 60.4655 9.54002 60.4655 10.18V14.7C60.4655 15.36 60.9855 15.86 61.6255 15.86Z\"\n            fill=\"white\"\n          />\n          <path\n            d=\"M74.5408 15.86H78.3008C78.6808 15.86 79.0008 15.56 79.0008 15.16V7.02001H81.3208V17.86H79.0008V16.4L77.3208 17.86H73.9008C72.3808 17.86 71.0808 16.6 71.0808 15.02V7.02001H73.3808V14.7C73.3808 15.36 73.8808 15.86 74.5408 15.86Z\"\n            fill=\"white\"\n          />\n          <path\n            d=\"M83.9333 7.02001H86.2533V17.86H83.9333V7.02001ZM83.9333 3.30001H86.2533V5.62001H83.9333V3.30001Z\"\n            fill=\"white\"\n          />\n          <path\n            d=\"M96.6542 7.02001V3.14001H98.9742V17.86H96.6542V16.38L94.9142 17.86H91.4742C89.8942 17.86 88.6342 16.54 88.6342 15.02V9.86002C88.6342 8.28002 89.9542 7.02001 91.4742 7.02001H96.6542ZM92.0942 15.86H95.9542C96.3342 15.86 96.6542 15.56 96.6542 15.16V9.04002H92.0942C91.4542 9.04002 90.9342 9.54002 90.9342 10.18V14.7C90.9342 15.36 91.4542 15.86 92.0942 15.86Z\"\n            fill=\"white\"\n          />\n          <path\n            d=\"M101.59 7.02001H103.91V17.86H101.59V7.02001ZM101.59 3.30001H103.91V5.62001H101.59V3.30001Z\"\n            fill=\"white\"\n          />\n          <path\n            d=\"M113.09 15.86V17.86H110.31C108.77 17.86 107.51 16.66 107.51 15.08V9.04002H105.63V7.02001H107.51V4.64002H109.83V7.02001H113.11V9.04002H109.83V14.74C109.83 15.4 110.27 15.86 110.93 15.86H113.09Z\"\n            fill=\"white\"\n          />\n          <path\n            d=\"M116.587 21.78L118.747 17.22L113.947 7.02001H116.467L119.947 14.74L123.267 7.02001H125.747L119.067 21.78H116.587Z\"\n            fill=\"white\"\n          />\n        </g>\n      )}\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\nexport const EthereumIcon = ({\n  width = '24px',\n  height = '24px',\n  fill = `#627EEA`,\n  ...props\n}: IconProps) => {\n  return (\n    <Icon width={width} height={height} viewBox=\"0 0 30 30\" fill=\"none\" {...props}>\n      <path\n        d=\"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15Z\"\n        fill={fill as string}\n      />\n      <path d=\"M15.467 3.75v8.316l7.028 3.14L15.467 3.75Z\" fill=\"#fff\" fillOpacity=\".602\" />\n      <path d=\"m15.467 3.75-7.03 11.456 7.03-3.14V3.75Z\" fill=\"#fff\" />\n      <path d=\"M15.467 20.595v5.65l7.033-9.73-7.033 4.08Z\" fill=\"#fff\" fillOpacity=\".602\" />\n      <path d=\"M15.467 26.245v-5.651l-7.03-4.08 7.03 9.731Z\" fill=\"#fff\" />\n      <path d=\"m15.467 19.287 7.028-4.08-7.028-3.14v7.22Z\" fill=\"#fff\" fillOpacity=\".2\" />\n      <path d=\"m8.438 15.206 7.029 4.081v-7.22l-7.03 3.14Z\" fill=\"#fff\" fillOpacity=\".602\" />\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\ninterface SnxIconProps extends IconProps {\n  color?: string;\n  fill?: string;\n}\n\nexport const SNXIcon = ({\n  width = '25px',\n  height = '24px',\n  color = '#2ED9FF',\n  fill = '#0E052F',\n  ...props\n}: SnxIconProps) => {\n  return (\n    <Icon width={width} height={height} viewBox=\"0 0 30 31\" fill=\"none\" {...props}>\n      <path\n        d=\"M30 15.268c0 8.284-6.716 15-15 15-8.284 0-15-6.716-15-15 0-8.285 6.716-15 15-15 8.284 0 15 6.715 15 15Z\"\n        fill={fill}\n      />\n      <path\n        d=\"M10.107 11.673a.624.624 0 0 0-.487-.224H5.674a.115.115 0 0 1-.086-.033.1.1 0 0 1-.032-.073V8.706a.1.1 0 0 1 .032-.072.115.115 0 0 1 .086-.033h4.17c1.053 0 1.96.426 2.723 1.279l1.013 1.226-1.973 2.387-1.5-1.82Zm7.289-1.806c.763-.844 1.675-1.266 2.736-1.266h4.157c.035 0 .061.008.08.026.017.018.026.044.026.079v2.637c0 .027-.01.051-.027.073s-.044.033-.079.033h-3.946a.624.624 0 0 0-.487.224l-2.908 3.508 2.92 3.534c.133.14.29.211.475.211h3.946c.035 0 .061.011.08.033.017.022.026.05.026.086v2.637c0 .026-.01.05-.027.073-.017.021-.044.033-.079.033h-4.157c-1.061 0-1.969-.427-2.723-1.28l-2.42-2.927-2.422 2.927c-.763.853-1.675 1.28-2.736 1.28H5.674c-.035 0-.062-.012-.08-.034a.132.132 0 0 1-.025-.085V19.03c0-.026.008-.05.026-.072.017-.022.044-.033.079-.033H9.62a.65.65 0 0 0 .487-.225l2.855-3.454 4.434-5.38Z\"\n        fill={color}\n      />\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\nexport const OptimismIcon = ({\n  width = '24px',\n  height = '24px',\n  color = 'white',\n  fill = '#FF0420',\n  ...props\n}: IconProps) => {\n  return (\n    <Icon width={width} height={height} viewBox=\"0 0 34 34\" {...props}>\n      <path\n        d=\"M17 34C26.3888 34 34 26.3888 34 17C34 7.61116 26.3888 0 17 0C7.61116 0 0 7.61116 0 17C0 26.3888 7.61116 34 17 34Z\"\n        fill={fill as string}\n      />\n      <path\n        d=\"M12.3295 21.76C11.3042 21.76 10.4641 21.5131 9.80918 21.0195C9.16298 20.5171 8.83984 19.8031 8.83984 18.8775C8.83984 18.6836 8.8614 18.4456 8.90444 18.1635C9.01651 17.5289 9.1759 16.7664 9.38269 15.8761C9.96858 13.452 11.4808 12.24 13.9193 12.24C14.5828 12.24 15.1773 12.3546 15.7029 12.5838C16.2285 12.8041 16.6421 13.1391 16.9437 13.5886C17.2453 14.0294 17.3961 14.5583 17.3961 15.1753C17.3961 15.3604 17.3745 15.594 17.3314 15.8761C17.2022 16.6606 17.0471 17.4231 16.8662 18.1635C16.5646 19.3711 16.0433 20.2747 15.3022 20.8741C14.5612 21.4647 13.5703 21.76 12.3295 21.76ZM12.5105 19.856C12.993 19.856 13.4023 19.7105 13.7384 19.4196C14.083 19.1288 14.3286 18.6836 14.4751 18.0842C14.6732 17.2556 14.824 16.5328 14.9274 15.9158C14.9619 15.7306 14.9791 15.5411 14.9791 15.3472C14.9791 14.5451 14.5699 14.144 13.7513 14.144C13.2688 14.144 12.8552 14.2894 12.5105 14.5803C12.1744 14.8712 11.9332 15.3164 11.7867 15.9158C11.6316 16.5064 11.4765 17.2291 11.3214 18.0842C11.287 18.2605 11.2697 18.4456 11.2697 18.6395C11.2697 19.4505 11.6833 19.856 12.5105 19.856Z\"\n        fill={color as string}\n      />\n      <path\n        d=\"M17.9895 21.6278C17.8947 21.6278 17.8215 21.597 17.7698 21.5352C17.7267 21.4647 17.7138 21.3854 17.731 21.2972L19.5146 12.7028C19.5318 12.6059 19.5792 12.5265 19.6568 12.4648C19.7344 12.4031 19.8162 12.3722 19.9024 12.3722H23.3404C24.2968 12.3722 25.0636 12.575 25.641 12.9805C26.2269 13.386 26.5199 13.9721 26.5199 14.739C26.5199 14.9594 26.494 15.1886 26.4423 15.4266C26.2269 16.4403 25.7918 17.1895 25.1369 17.6744C24.4907 18.1592 23.6031 18.4016 22.4744 18.4016H20.7295L20.135 21.2972C20.1178 21.3942 20.0704 21.4735 19.9928 21.5352C19.9153 21.597 19.8334 21.6278 19.7473 21.6278H17.9895ZM22.5648 16.5769C22.9267 16.5769 23.2412 16.4755 23.5084 16.2728C23.7841 16.0701 23.965 15.7792 24.0513 15.4001C24.0771 15.2503 24.09 15.1181 24.09 15.0035C24.09 14.7479 24.0168 14.5539 23.8703 14.4217C23.7238 14.2806 23.4739 14.2101 23.1206 14.2101H21.5697L21.0785 16.5769H22.5648Z\"\n        fill={color as string}\n      />\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\ninterface DollarCircleProps extends IconProps {\n  fill?: string;\n}\n\nexport const DollarCircle = ({ width = '15px', height = '15px', ...props }: DollarCircleProps) => {\n  return (\n    <Icon width={width} height={height} viewBox=\"0 0 19 18\" fill=\"none\" {...props}>\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M9.79517 2.75357C6.44891 2.75357 3.73624 5.46625 3.73624 8.8125C3.73624 12.1588 6.44891 14.8714 9.79517 14.8714C13.1414 14.8714 15.8541 12.1588 15.8541 8.8125C15.8541 5.46625 13.1414 2.75357 9.79517 2.75357ZM2.48267 8.8125C2.48267 4.77392 5.75658 1.5 9.79517 1.5C13.8337 1.5 17.1077 4.77392 17.1077 8.8125C17.1077 12.8511 13.8337 16.125 9.79517 16.125C5.75658 16.125 2.48267 12.8511 2.48267 8.8125Z\"\n        fill=\"white\"\n      />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M9.03962 7.48711C9.04452 7.25329 9.11127 7.15806 9.15621 7.11271C9.21551 7.05288 9.33009 6.98862 9.54225 6.95486C9.98435 6.88451 10.5823 6.98693 11.0758 7.11688L11.6819 7.27652L12.0011 6.06428L11.395 5.90465C10.8745 5.76757 10.0611 5.60296 9.34526 5.71686C8.97845 5.77523 8.57742 5.91591 8.26586 6.23026C7.94168 6.55735 7.78576 6.99985 7.78576 7.51481V7.53855L7.78756 7.56221C7.83275 8.15802 8.18724 8.55401 8.55492 8.8144C8.89199 9.05311 9.30983 9.22697 9.64735 9.36742C9.66009 9.37272 9.67272 9.37797 9.68522 9.38318C10.0665 9.54198 10.3494 9.6643 10.5455 9.80792C10.7181 9.93436 10.7353 10.0108 10.7353 10.0783C10.7353 10.3402 10.6583 10.4442 10.5979 10.4988C10.5171 10.5719 10.3654 10.6431 10.1066 10.6754C9.57934 10.741 8.8945 10.6119 8.39035 10.4769L7.7849 10.3148L7.4606 11.5257L8.06605 11.6878C8.59887 11.8305 9.48099 12.0165 10.2615 11.9193C10.6565 11.8701 11.0939 11.7404 11.4387 11.4286C11.8039 11.0983 11.9889 10.6336 11.9889 10.0783C11.9889 9.47293 11.6504 9.06337 11.2862 8.79661C10.9547 8.55379 10.534 8.37864 10.1954 8.23769C10.1859 8.23376 10.1765 8.22986 10.1672 8.22598C9.78653 8.06741 9.49239 7.94221 9.27941 7.79139C9.09878 7.66347 9.051 7.56996 9.03962 7.48711Z\"\n        fill=\"white\"\n      />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M9.79517 11.0063C10.1413 11.0063 10.422 11.2869 10.422 11.633V13.2H9.16838V11.633C9.16838 11.2869 9.449 11.0063 9.79517 11.0063Z\"\n        fill=\"white\"\n      />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M10.422 4.425V5.99196C10.422 6.33813 10.1413 6.61875 9.79517 6.61875C9.449 6.61875 9.16838 6.33813 9.16838 5.99196V4.425H10.422Z\"\n        fill=\"white\"\n      />\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\ninterface BitcoinIconProps extends IconProps {\n  fill?: string;\n}\n\nexport const BitcoinIcon = ({ width = '42px', height = '42px' }: BitcoinIconProps) => {\n  return (\n    <Icon width={width} height={height} viewBox=\"0 0 42 42\" fill=\"none\">\n      <g clipPath=\"url(#a)\">\n        <path\n          fill=\"#F7931A\"\n          d=\"M21 42c11.598 0 21-9.402 21-21S32.598 0 21 0 0 9.402 0 21s9.402 21 21 21z\"\n        />\n        <path\n          fill=\"#fff\"\n          d=\"M30.436 18.401c.412-2.75-1.684-4.23-4.548-5.217l.93-3.727-2.269-.565-.905 3.63c-.596-.15-1.208-.29-1.818-.429l.912-3.652-2.268-.566-.93 3.726c-.493-.113-.978-.223-1.448-.341l.002-.012-3.129-.78-.603 2.422s1.684.386 1.648.41c.919.23 1.084.837 1.057 1.32l-1.058 4.246c.063.016.144.04.236.075l-.24-.06-1.483 5.949c-.113.278-.398.697-1.041.538.024.033-1.649-.41-1.649-.41l-1.126 2.595 2.953.737c.549.137 1.087.282 1.616.417l-.938 3.77 2.266.564.93-3.728c.62.167 1.22.322 1.808.469l-.926 3.712 2.268.564.938-3.762c3.87.733 6.778.438 8.002-3.062.987-2.816-.048-4.442-2.084-5.502 1.483-.34 2.599-1.316 2.897-3.33zM25.25 25.67c-.7 2.818-5.444 1.294-6.982.912l1.247-4.994c1.538.385 6.47 1.145 5.735 4.082zm.703-7.31c-.64 2.564-4.588 1.26-5.867.942l1.128-4.528c1.28.318 5.405.913 4.739 3.587z\"\n        />\n      </g>\n      <defs>\n        <clipPath id=\"a\">\n          <path fill=\"#fff\" d=\"M0 0h42v42H0z\" />\n        </clipPath>\n      </defs>\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\nexport const ArbitrumIcon = ({ width = '24px', height = '24px', ...props }: IconProps) => {\n  return (\n    <Icon width={width} height={height} viewBox=\"0 0 42 42\" {...props}>\n      <circle cx=\"21\" cy=\"21\" r=\"21\" fill=\"#2D374B\" />\n      <path\n        d=\"M25.089 19.4942L27.7327 15.0085L34.8586 26.1072L34.8619 28.2365L34.8386 13.5798C34.8303 13.403 34.7795 13.2308 34.6907 13.0777C34.6018 12.9246 34.4774 12.7952 34.328 12.7003L21.4989 5.32125C21.3456 5.24842 21.1779 5.21102 21.0082 5.21182C20.8386 5.21262 20.6712 5.2516 20.5186 5.32587C20.479 5.34572 20.4407 5.3679 20.4037 5.39231L20.3591 5.42053L7.90602 12.6367L7.85753 12.6585C7.79299 12.6884 7.7314 12.7243 7.67359 12.7657C7.44004 12.9325 7.28088 13.1839 7.23002 13.4664C7.22223 13.5092 7.21692 13.5525 7.21411 13.5959L7.23361 25.5397L13.871 15.2522C14.7066 13.8881 16.5273 13.4487 18.2174 13.4725L20.201 13.5238L8.51275 32.2682L9.89067 33.0614L21.719 13.5426L26.9472 13.5236L15.1494 33.5342L20.0663 36.3639L20.6538 36.7018C20.9073 36.8025 21.1886 36.8081 21.4458 36.7175L34.4553 29.1783L31.9668 30.6196L25.089 19.4942ZM26.0978 34.0217L21.132 26.228L24.1631 21.0845L30.6846 31.3633L26.0978 34.0217Z\"\n        fill=\"#2D374B\"\n      />\n      <path\n        d=\"M21.1323 26.228L26.0981 34.0214L30.6851 31.363L24.1639 21.0845L21.1323 26.228Z\"\n        fill=\"#28A0F0\"\n      />\n      <path\n        d=\"M34.8623 28.2368L34.859 26.1074L27.7331 15.0087L25.0879 19.4939L31.9669 30.6193L34.4554 29.1781C34.5759 29.0804 34.6745 28.9584 34.7446 28.8201C34.8148 28.6818 34.855 28.5302 34.8626 28.3753L34.8623 28.2368Z\"\n        fill=\"#28A0F0\"\n      />\n      <path\n        d=\"M5.00171 30.2455L8.5141 32.2694L20.2024 13.5251L18.2187 13.4738C16.5286 13.4499 14.7079 13.8891 13.8723 15.2534L7.23495 25.541L5.00299 28.9718V30.2466L5.00171 30.2455Z\"\n        fill=\"white\"\n      />\n      <path\n        d=\"M26.9474 13.5248L21.7195 13.5438L9.89111 33.0626L14.0254 35.4431L15.1496 33.5362L26.9474 13.5248Z\"\n        fill=\"white\"\n      />\n      <path\n        d=\"M37.065 13.4979C37.0411 12.9583 36.8863 12.4327 36.614 11.9664C36.3417 11.5 35.96 11.1068 35.5019 10.8208L22.5047 3.34657C22.0407 3.11856 21.5306 3 21.0137 3C20.4967 3 19.9866 3.11856 19.5226 3.34657C19.4141 3.40121 6.88305 10.6689 6.88305 10.6689C6.70895 10.7525 6.54242 10.8511 6.38535 10.9634C5.97846 11.2528 5.64243 11.6306 5.40249 12.0684C5.16255 12.5063 5.02494 12.9928 5 13.4915V28.971L7.23196 25.5402L7.21477 13.5969C7.22521 13.4332 7.27184 13.2738 7.35129 13.1302C7.43074 12.9867 7.54104 12.8625 7.67424 12.7667C7.73325 12.7244 20.4782 5.34712 20.5188 5.32685C20.6714 5.25259 20.8387 5.21361 21.0084 5.21281C21.1781 5.21201 21.3458 5.24941 21.4991 5.32224L34.3282 12.7018C34.4776 12.7967 34.602 12.9261 34.6908 13.0792C34.7797 13.2323 34.8304 13.4045 34.8387 13.5813V28.3768C34.8356 28.5302 34.7998 28.6812 34.7337 28.8196C34.6675 28.9581 34.5726 29.0808 34.4552 29.1796L31.9667 30.6208L30.684 31.3648L26.0969 34.0232L21.4449 36.7192C21.1877 36.81 20.9064 36.8044 20.653 36.7036L15.1493 33.538L14.0251 35.4447L18.9713 38.2924C19.135 38.3852 19.2807 38.4678 19.4002 38.5351C19.5855 38.6377 19.7117 38.7082 19.7561 38.7298C20.1699 38.9111 20.6173 39.0032 21.0691 38.9999C21.4834 39.0005 21.8942 38.9232 22.28 38.7721L35.7915 30.9474C36.1727 30.6509 36.4843 30.2744 36.7042 29.8445C36.9242 29.4145 37.0471 28.9415 37.0645 28.4589L37.065 13.4979Z\"\n        fill=\"#96BEDC\"\n      />\n    </Icon>\n  );\n};\n","import { EthereumIcon } from '../EthereumIcon';\nimport { OptimismIcon } from '../OptimismIcon';\nimport { SNXIcon } from '../SNXIcon';\nimport { DollarCircle } from '../DollarCircle';\nimport { Icon, IconProps } from '@chakra-ui/react';\nimport { BitcoinIcon } from '../BitcoinIcon';\nimport { SUSDCIcon } from '../SUSDCIcon';\nimport { ArbitrumIcon } from '../ArbitrumIcon';\n\ninterface CollateralIconProps extends IconProps {\n  symbol?: string;\n  fill?: string;\n  color?: string;\n}\nexport const CollateralIcon = ({\n  symbol,\n  fill = '#00D1FF',\n  color = '#FFFFFF',\n  ...props\n}: CollateralIconProps) => {\n  switch (symbol) {\n    case 'WETH':\n    case 'ETH':\n      return <EthereumIcon {...props} />;\n    case 'SNX':\n    case 'fSNX':\n    case 'fwSNX':\n      return <SNXIcon fill={fill} color={color} {...props} />;\n    case 'OP':\n      return <OptimismIcon {...props} />;\n    case 'USDx':\n    case 'sUSD':\n    case 'snxUSD':\n      return <DollarCircle {...props} />;\n    case 'WBTC':\n      return <BitcoinIcon {...props} />;\n    case 'sUSDC':\n    case 'USDC':\n    case 'USDh':\n    case 'fUSDC':\n      return <SUSDCIcon {...props} />;\n    case 'ARB':\n    case 'fARB':\n      return <ArbitrumIcon {...props} />;\n    default:\n      return <UnknownIcon {...props} />;\n  }\n};\n\nexport const UnknownIcon = ({ width = '32px', height = '32px', ...props }: IconProps) => {\n  return (\n    <Icon width={width} height={height} viewBox=\"0 0 32 32\" fill=\"none\" {...props}>\n      <circle cx=\"16\" cy=\"16\" r=\"15\" fill=\"white\" stroke=\"white\" />\n      <path\n        d=\"M14.1156 19.2899V19.0472C14.1205 18.2147 14.1955 17.551 14.3408 17.0563C14.4908 16.5615 14.7087 16.1619 14.9944 15.8574C15.28 15.5529 15.6238 15.277 16.0257 15.0296C16.3258 14.8393 16.5946 14.6419 16.8318 14.4373C17.069 14.2328 17.2579 14.0068 17.3983 13.7594C17.5387 13.5073 17.6089 13.2266 17.6089 12.9174C17.6089 12.5891 17.529 12.3013 17.3692 12.0539C17.2095 11.8065 16.994 11.6162 16.7229 11.483C16.4566 11.3498 16.1612 11.2832 15.8368 11.2832C15.5221 11.2832 15.2244 11.3522 14.9435 11.4901C14.6627 11.6233 14.4327 11.8232 14.2536 12.0896C14.0745 12.3512 13.9776 12.6771 13.9631 13.0672H11C11.0242 12.1157 11.2566 11.3308 11.6972 10.7123C12.1378 10.0891 12.7212 9.62525 13.4475 9.32078C14.1737 9.01155 14.975 8.85693 15.8514 8.85693C16.8149 8.85693 17.667 9.01393 18.4078 9.32791C19.1485 9.63714 19.7295 10.0867 20.1508 10.6766C20.572 11.2665 20.7826 11.9778 20.7826 12.8103C20.7826 13.3669 20.6882 13.8617 20.4994 14.2946C20.3154 14.7228 20.0564 15.1034 19.7223 15.4364C19.3882 15.7646 18.9936 16.062 18.5385 16.3284C18.156 16.552 17.8413 16.7851 17.5944 17.0277C17.3523 17.2703 17.1707 17.551 17.0497 17.8698C16.9335 18.1885 16.873 18.581 16.8681 19.0472V19.2899H14.1156ZM15.5536 23.8569C15.0694 23.8569 14.6555 23.6904 14.3117 23.3574C13.9728 23.0196 13.8058 22.6153 13.8106 22.1443C13.8058 21.6781 13.9728 21.2784 14.3117 20.9454C14.6555 20.6124 15.0694 20.4459 15.5536 20.4459C16.0136 20.4459 16.4178 20.6124 16.7664 20.9454C17.115 21.2784 17.2918 21.6781 17.2966 22.1443C17.2918 22.4583 17.207 22.7461 17.0424 23.0077C16.8826 23.2646 16.672 23.4716 16.4106 23.6286C16.1491 23.7808 15.8635 23.8569 15.5536 23.8569Z\"\n        fill=\"#06061B\"\n      />\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\nexport const ChevronDown = ({ width = '20px', height = '20px', ...props }: IconProps) => {\n  return (\n    <Icon width={width} height={height} color=\"cyan.400\" viewBox=\"0 0 20 20\" fill=\"none\" {...props}>\n      <path\n        d=\"M9.99962 10.9766L14.1246 6.85156L15.303 8.0299L9.99962 13.3332L4.69629 8.0299L5.87462 6.85156L9.99962 10.9766Z\"\n        fill=\"currentColor\"\n      />\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\nexport const ChevronUp = ({ width = '20px', height = '20px', ...props }: IconProps) => {\n  return (\n    <Icon width={width} height={height} color=\"cyan.400\" viewBox=\"0 0 25 24\" fill=\"none\" {...props}>\n      <path\n        d=\"M12.3564 10.828L7.40643 15.778L5.99243 14.364L12.3564 8L18.7204 14.364L17.3064 15.778L12.3564 10.828Z\"\n        fill=\"currentColor\"\n      />\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\nexport const FailedIcon = ({ w = '94px', h = '94px' }: IconProps) => {\n  return (\n    <Icon w={w} h={h} viewBox=\"0 0 94 94\" fill=\"none\">\n      <g filter=\"url(#filter0_d_1044_28165)\">\n        <path\n          fillRule=\"evenodd\"\n          clipRule=\"evenodd\"\n          d=\"M47 76.3333C63.2004 76.3333 76.3333 63.2004 76.3333 47C76.3333 30.7996 63.2004 17.6667 47 17.6667C30.7996 17.6667 17.6667 30.7996 17.6667 47C17.6667 63.2004 30.7996 76.3333 47 76.3333ZM47 79C64.6731 79 79 64.6731 79 47C79 29.3269 64.6731 15 47 15C29.3269 15 15 29.3269 15 47C15 64.6731 29.3269 79 47 79Z\"\n          fill=\"#FF4A60\"\n        />\n      </g>\n      <g filter=\"url(#filter1_d_1044_28165)\">\n        <path\n          d=\"M56.3334 39.5466L54.4534 37.6666L47.0001 45.12L39.5467 37.6666L37.6667 39.5466L45.1201 47L37.6667 54.4533L39.5467 56.3333L47.0001 48.88L54.4534 56.3333L56.3334 54.4533L48.8801 47L56.3334 39.5466Z\"\n          fill=\"#FF4A60\"\n        />\n      </g>\n      <defs>\n        <filter\n          id=\"filter0_d_1044_28165\"\n          x=\"0\"\n          y=\"0\"\n          width=\"94\"\n          height=\"94\"\n          filterUnits=\"userSpaceOnUse\"\n          colorInterpolationFilters=\"sRGB\"\n        >\n          <feFlood floodOpacity=\"0\" result=\"BackgroundImageFix\" />\n          <feColorMatrix\n            in=\"SourceAlpha\"\n            type=\"matrix\"\n            values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\"\n            result=\"hardAlpha\"\n          />\n          <feOffset />\n          <feGaussianBlur stdDeviation=\"7.5\" />\n          <feColorMatrix\n            type=\"matrix\"\n            values=\"0 0 0 0 1 0 0 0 0 0.116667 0 0 0 0 0.222667 0 0 0 0.6 0\"\n          />\n          <feBlend mode=\"normal\" in2=\"BackgroundImageFix\" result=\"effect1_dropShadow_1044_28165\" />\n          <feBlend\n            mode=\"normal\"\n            in=\"SourceGraphic\"\n            in2=\"effect1_dropShadow_1044_28165\"\n            result=\"shape\"\n          />\n        </filter>\n        <filter\n          id=\"filter1_d_1044_28165\"\n          x=\"22.6667\"\n          y=\"22.6666\"\n          width=\"48.6667\"\n          height=\"48.6666\"\n          filterUnits=\"userSpaceOnUse\"\n          colorInterpolationFilters=\"sRGB\"\n        >\n          <feFlood floodOpacity=\"0\" result=\"BackgroundImageFix\" />\n          <feColorMatrix\n            in=\"SourceAlpha\"\n            type=\"matrix\"\n            values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\"\n            result=\"hardAlpha\"\n          />\n          <feOffset />\n          <feGaussianBlur stdDeviation=\"7.5\" />\n          <feColorMatrix\n            type=\"matrix\"\n            values=\"0 0 0 0 1 0 0 0 0 0.116667 0 0 0 0 0.222667 0 0 0 0.6 0\"\n          />\n          <feBlend mode=\"normal\" in2=\"BackgroundImageFix\" result=\"effect1_dropShadow_1044_28165\" />\n          <feBlend\n            mode=\"normal\"\n            in=\"SourceGraphic\"\n            in2=\"effect1_dropShadow_1044_28165\"\n            result=\"shape\"\n          />\n        </filter>\n      </defs>\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\nexport const WalletIcon = ({\n  width = '20px',\n  height = '20ox',\n  color = 'whiteAlpha.700',\n  ...props\n}: IconProps) => {\n  return (\n    <Icon width={width} color={color} height={height} viewBox=\"0 0 20 20\" fill=\"none\" {...props}>\n      <path\n        d=\"M6.58154 6.2701C6.23637 6.2701 5.95654 6.54993 5.95654 6.8951C5.95654 7.24028 6.23637 7.5201 6.58154 7.5201H10.3101C10.6553 7.5201 10.9351 7.24028 10.9351 6.8951C10.9351 6.54993 10.6553 6.2701 10.3101 6.2701H6.58154Z\"\n        fill=\"currentColor\"\n      />\n      <path\n        d=\"M13.972 9.10498C13.6268 9.10498 13.347 9.38481 13.347 9.72998C13.347 10.0752 13.6268 10.355 13.972 10.355H14.1873C14.5324 10.355 14.8123 10.0752 14.8123 9.72998C14.8123 9.38481 14.5324 9.10498 14.1873 9.10498H13.972Z\"\n        fill=\"currentColor\"\n      />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M17.2918 11.6311L17.2916 11.6447V12.3416C17.2916 14.6883 15.3892 16.5907 13.0426 16.5907H7.07331C4.72664 16.5907 2.82422 14.6883 2.82422 12.3416V7.38508C2.82422 5.0384 4.72664 3.13599 7.07331 3.13599H13.0426C15.3892 3.13599 17.2916 5.0384 17.2916 7.38508V7.90016L17.2918 7.91382L17.2916 7.92747V11.6174L17.2918 11.6311ZM7.07331 4.38599C5.41699 4.38599 4.07422 5.72876 4.07422 7.38508V12.3416C4.07422 13.9979 5.41699 15.3407 7.07331 15.3407H13.0426C14.6989 15.3407 16.0416 13.9979 16.0416 12.3416V12.2561H13.871C12.4998 12.2552 11.3876 11.1445 11.3867 9.77282C11.3867 8.40047 12.4998 7.28966 13.8706 7.28882H16.0401C15.9893 5.67705 14.6667 4.38599 13.0426 4.38599H7.07331ZM13.8714 11.0061H16.0416V8.53882H13.8712C13.1891 8.53932 12.6369 9.09162 12.6367 9.77223C12.6372 10.4535 13.1895 11.0056 13.8714 11.0061Z\"\n        fill=\"currentColor\"\n      />\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\nexport const LogoIcon = ({ color = 'cyan.400', width = '29', height = '21' }: IconProps) => {\n  return (\n    <Icon width={width} height={height} viewBox=\"0 0 29 21\" fill=\"none\" color={color}>\n      <path\n        d=\"M6.81239 5.45766C6.61525 5.22805 6.37254 5.11297 6.08372 5.11297H0.177C0.124536 5.11297 0.0816109 5.09606 0.0492845 5.06224C0.0164282 5.02898 0 4.99134 0 4.95098V0.89807C0 0.85771 0.0164282 0.820622 0.0492845 0.786807C0.0816109 0.752992 0.124536 0.736084 0.177 0.736084H6.41864C7.99362 0.736084 9.35239 1.39166 10.4944 2.70173L12.0106 4.58611L9.05721 8.25396L6.81239 5.45766ZM17.7207 2.68155C18.8627 1.38457 20.2278 0.736084 21.8161 0.736084H28.0381C28.0906 0.736084 28.1298 0.749719 28.1563 0.776444C28.1822 0.803714 28.1955 0.844074 28.1955 0.89807V4.95098C28.1955 4.99134 28.1822 5.02898 28.1563 5.06224C28.1298 5.09606 28.0906 5.11297 28.0381 5.11297H22.1314C21.8426 5.11297 21.5998 5.22805 21.4027 5.45766L17.0514 10.8479L21.4223 16.2785C21.6195 16.495 21.8553 16.603 22.1314 16.603H28.0381C28.0906 16.603 28.1298 16.6199 28.1563 16.6538C28.1822 16.6876 28.1955 16.7318 28.1955 16.7852V20.8381C28.1955 20.8785 28.1822 20.9161 28.1563 20.9494C28.1298 20.9832 28.0906 21.0001 28.0381 21.0001H21.8161C20.2278 21.0001 18.8691 20.3451 17.7403 19.0345L14.1176 14.5359L10.4944 19.0345C9.35239 20.3451 7.98727 21.0001 6.39903 21.0001H0.177C0.124536 21.0001 0.0847905 20.9832 0.0588234 20.9494C0.0323264 20.9156 0.0196078 20.8719 0.0196078 20.8174V16.7645C0.0196078 16.7241 0.0323264 16.687 0.0588234 16.6532C0.0847905 16.6194 0.124536 16.6025 0.177 16.6025H6.08372C6.35929 16.6025 6.602 16.488 6.81239 16.2578L11.0848 10.9488L17.7207 2.68155Z\"\n        fill=\"currentColor\"\n      />\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\ninterface BorrowIconProps extends IconProps {\n  fill?: string;\n}\n\nexport const BorrowIcon = ({ width = '15px', height = '15px', ...props }: BorrowIconProps) => {\n  return (\n    <Icon width={width} height={height} viewBox=\"0 0 18 18\" fill=\"none\" {...props}>\n      <svg\n        width=\"18\"\n        height=\"18\"\n        viewBox=\"0 0 18 18\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          fillRule=\"evenodd\"\n          clipRule=\"evenodd\"\n          d=\"M5.48247 2.4375C4.94851 2.4375 4.51566 2.87036 4.51566 3.40431V5.43752H3.21022C2.67626 5.43752 2.24341 5.87038 2.24341 6.40434V8.59571C2.24341 9.12967 2.67626 9.56252 3.21022 9.56252H4.75822V11.4382C4.24137 11.4576 3.82831 11.8827 3.82831 12.4043V14.5957C3.82831 15.1296 4.26117 15.5625 4.79512 15.5625H13.8598C14.3938 15.5625 14.8266 15.1296 14.8266 14.5957V12.5618C15.3435 12.5424 15.7565 12.1173 15.7565 11.5957V9.40431C15.7565 8.87036 15.3237 8.4375 14.7897 8.4375H13.2417V6.5625H14.5472C15.0811 6.5625 15.514 6.12964 15.514 5.59569V3.40431C15.514 2.87036 15.0811 2.4375 14.5472 2.4375H5.48247ZM5.64066 5.4375V3.5625H14.389V5.4375H5.64066ZM3.36841 6.56252V8.43752H5.71853L5.72504 8.4375H12.1167V6.56252H3.36841ZM5.88322 11.4375V9.56252H12.2749L12.2814 9.5625H14.6315V11.4375H5.88322ZM4.95331 14.4375V12.5625H13.7016V14.4375H4.95331Z\"\n          fill=\"white\"\n        />\n      </svg>\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\nexport const BaseIcon = ({\n  width = '24px',\n  height = '24px',\n  fill = '#0052FF',\n  ...props\n}: IconProps) => {\n  return (\n    <Icon width={width} height={height} viewBox=\"0 0 24 24\" {...props}>\n      <circle cx=\"12\" cy=\"12\" r=\"12\" fill=\"white\" />\n      <g width=\"24\" height=\"24\" fill=\"white\">\n        <path\n          d=\"M11.9791 24C18.618 24 24 18.6274 24 12C24 5.37257 18.618 0 11.9791 0C5.6804 0 0.513182 4.8359 0 10.9913H15.8889V13.0087H8.6297e-08C0.513182 19.1641 5.6804 24 11.9791 24Z\"\n          fill={fill as string}\n        />\n      </g>\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\ninterface DiscordIcon extends IconProps {\n  fill?: string;\n}\n\nexport const DiscordIcon = ({ width = '15px', height = '15px', ...props }: DiscordIcon) => {\n  return (\n    <Icon width={width} height={height} viewBox=\"0 0 24 24\" fill=\"none\" {...props}>\n      <path\n        d=\"M9.84893 10.3091C9.247 10.3091 8.77179 10.8341 8.77179 11.4746C8.77179 12.1151 9.25756 12.6401 9.84893 12.6401C10.4509 12.6401 10.9261 12.1151 10.9261 11.4746C10.9366 10.8341 10.4509 10.3091 9.84893 10.3091ZM13.7034 10.3091C13.1015 10.3091 12.6263 10.8341 12.6263 11.4746C12.6263 12.1151 13.112 12.6401 13.7034 12.6401C14.3053 12.6401 14.7806 12.1151 14.7806 11.4746C14.7806 10.8341 14.3053 10.3091 13.7034 10.3091Z\"\n        fill=\"#FEFEFF\"\n      />\n      <path\n        d=\"M18.8354 1.49976H4.68468C3.49138 1.49976 2.51984 2.46578 2.51984 3.6628V17.8591C2.51984 19.0561 3.49138 20.0222 4.68468 20.0222H16.66L16.1003 18.0796L17.452 19.3291L18.7298 20.5052L21.0002 22.5002V3.6628C21.0002 2.46578 20.0287 1.49976 18.8354 1.49976ZM14.7591 15.2131C14.7591 15.2131 14.379 14.7615 14.0622 14.3625C15.4456 13.974 15.9736 13.113 15.9736 13.113C15.5406 13.3965 15.1288 13.596 14.7591 13.7325C14.2311 13.953 13.7242 14.1 13.2279 14.184C12.2141 14.373 11.2848 14.3205 10.4928 14.1735C9.89088 14.058 9.37343 13.89 8.94046 13.722C8.69757 13.6275 8.43357 13.512 8.16956 13.365C8.13788 13.344 8.1062 13.3335 8.07452 13.3125C8.0534 13.302 8.04284 13.2915 8.03228 13.281C7.84219 13.176 7.73659 13.1025 7.73659 13.1025C7.73659 13.1025 8.24348 13.9425 9.58463 14.3415C9.26782 14.7405 8.8771 15.2131 8.8771 15.2131C6.54328 15.1396 5.65623 13.617 5.65623 13.617C5.65623 10.2359 7.1769 7.49539 7.1769 7.49539C8.69757 6.36136 10.1443 6.39286 10.1443 6.39286L10.2499 6.51887C8.34908 7.06488 7.47258 7.8944 7.47258 7.8944C7.47258 7.8944 7.70491 7.76839 8.09564 7.58989C9.22558 7.09638 10.1232 6.95988 10.4928 6.92838C10.5562 6.91788 10.609 6.90737 10.6723 6.90737C11.3165 6.82337 12.0452 6.80237 12.8055 6.88637C13.8087 7.00188 14.8859 7.29588 15.9841 7.8944C15.9841 7.8944 15.1499 7.10688 13.3546 6.56087L13.5025 6.39286C13.5025 6.39286 14.9492 6.36136 16.4699 7.49539C16.4699 7.49539 17.9906 10.2359 17.9906 13.617C17.9906 13.617 17.093 15.1396 14.7591 15.2131Z\"\n        fill=\"#FEFEFF\"\n      />\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\nexport const XIcon = ({ ...props }: IconProps) => {\n  return (\n    <Icon viewBox=\"0 0 24 24\" fill=\"none\" {...props}>\n      <g clipPath=\"url(#clip0_14230_11024)\">\n        <path\n          d=\"M10.573 13.5844L4.98887 20.25H6.31212L11.1608 14.4623L15.0334 20.25H19.5L13.6438 11.498L19.5 4.50809H18.1767L13.0564 10.6201L8.9666 4.50809H4.5L10.5733 13.5844H10.573ZM12.3854 11.4209L12.9788 12.2924L17.6999 19.227H15.6673L11.8573 13.6306L11.264 12.7591L6.3115 5.48454H8.34405L12.3854 11.4206V11.4209Z\"\n          fill=\"white\"\n        />\n      </g>\n      <defs>\n        <clipPath id=\"clip0_14230_11024\">\n          <rect width=\"15\" height=\"15.75\" fill=\"white\" transform=\"matrix(-1 0 0 -1 19.5 20.25)\" />\n        </clipPath>\n      </defs>\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\nexport const GithubIcon = ({ ...props }: IconProps) => {\n  return (\n    <Icon viewBox=\"0 0 24 24\" fill=\"none\" {...props}>\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M12.0002 2.25049C6.61603 2.25049 2.25058 6.72675 2.25058 12.2476C2.25058 16.6642 5.04356 20.4121 8.91822 21.7331C9.40578 21.8258 9.58498 21.5163 9.58498 21.2514C9.58498 21.013 9.57529 20.2251 9.57207 19.3907C6.85819 19.995 6.28668 18.2121 6.28668 18.2121C5.84271 17.0566 5.20501 16.7487 5.20501 16.7487C4.32029 16.1279 5.2712 16.1411 5.2712 16.1411C6.24955 16.2123 6.76617 17.1708 6.76617 17.1708C7.63635 18.6988 9.04737 18.2568 9.60274 18.0018C9.68992 17.3562 9.94339 16.9142 10.2211 16.6642C8.05611 16.411 5.77975 15.5535 5.77975 11.7245C5.77975 10.6335 6.16075 9.74127 6.78393 9.04103C6.68222 8.7894 6.34964 7.77297 6.87757 6.39566C6.87757 6.39566 7.69609 6.12749 9.55915 7.42037C10.3373 7.19854 11.1704 7.08763 12.0002 7.08432C12.8284 7.08763 13.6631 7.19854 14.4428 7.42037C16.3043 6.12749 17.1212 6.39566 17.1212 6.39566C17.6523 7.77297 17.3181 8.7894 17.2164 9.04103C17.8412 9.74127 18.219 10.6335 18.219 11.7245C18.219 15.5634 15.9378 16.4093 13.768 16.6576C14.1183 16.9672 14.4299 17.5764 14.4299 18.5084C14.4299 19.846 14.4186 20.922 14.4186 21.2514C14.4186 21.5179 14.5946 21.8292 15.0886 21.7315C18.96 20.4088 21.7498 16.6626 21.7498 12.2476C21.7498 6.72675 17.3843 2.25049 12.0002 2.25049Z\"\n        fill=\"#FEFEFF\"\n      />\n      <path\n        d=\"M5.94295 16.6031C5.92196 16.6527 5.84447 16.6676 5.77505 16.6328C5.70401 16.5997 5.66526 16.5319 5.68787 16.4822C5.70885 16.4309 5.78473 16.4176 5.85577 16.4508C5.9268 16.4855 5.96716 16.5534 5.94295 16.6031Z\"\n        fill=\"#FEFEFF\"\n      />\n      <path\n        d=\"M6.33886 17.055C6.29204 17.0997 6.20163 17.0782 6.14028 17.0086C6.0757 16.9391 6.0644 16.8464 6.11122 16.8017C6.15965 16.757 6.24683 16.7785 6.31141 16.8481C6.37437 16.9176 6.38729 17.0103 6.33886 17.055Z\"\n        fill=\"#FEFEFF\"\n      />\n      <path\n        d=\"M6.72318 17.6313C6.66345 17.6743 6.56497 17.6346 6.50523 17.5452C6.4455 17.4558 6.4455 17.3498 6.50685 17.3068C6.56658 17.2638 6.66345 17.3018 6.7248 17.3912C6.78453 17.4806 6.78453 17.5882 6.72318 17.6313Z\"\n        fill=\"#FEFEFF\"\n      />\n      <path\n        d=\"M7.24861 18.1876C7.19533 18.2488 7.08071 18.2323 6.99837 18.1495C6.91281 18.0684 6.8902 17.9542 6.94348 17.8946C6.99837 17.8333 7.11138 17.8515 7.19533 17.9326C7.27928 18.0121 7.30512 18.128 7.24861 18.1876Z\"\n        fill=\"#FEFEFF\"\n      />\n      <path\n        d=\"M7.97585 18.5102C7.95164 18.588 7.84185 18.6244 7.73207 18.5913C7.62229 18.5565 7.54964 18.4655 7.57224 18.386C7.59484 18.3066 7.70463 18.2702 7.81602 18.3049C7.92742 18.3397 7.99846 18.4307 7.97585 18.5102Z\"\n        fill=\"#FEFEFF\"\n      />\n      <path\n        d=\"M8.77338 18.5695C8.77661 18.6523 8.68297 18.7202 8.56673 18.7218C8.45049 18.7251 8.35524 18.6573 8.35524 18.5762C8.35524 18.4934 8.44726 18.4255 8.5635 18.4239C8.67813 18.4222 8.77338 18.4884 8.77338 18.5695Z\"\n        fill=\"#FEFEFF\"\n      />\n      <path\n        d=\"M9.51542 18.4407C9.52995 18.5218 9.44923 18.6029 9.33299 18.6261C9.21998 18.6476 9.11504 18.598 9.10051 18.5185C9.08598 18.4357 9.16832 18.353 9.28133 18.3314C9.39757 18.3099 9.50089 18.3596 9.51542 18.4407Z\"\n        fill=\"#FEFEFF\"\n      />\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\nexport const WarpcastIcon = ({ ...props }: IconProps) => {\n  return (\n    <Icon viewBox=\"0 0 24 24\" fill=\"none\" {...props}>\n      <g clipPath=\"url(#clip0_14230_11037)\">\n        <path\n          d=\"M6.52381 7.30209C7.07677 9.37496 7.54202 11.0837 7.55756 11.0993C7.57316 11.1148 7.90732 9.92686 8.30024 8.45929L9.32137 4.64551L9.62823 3.5H12.0094C13.3191 3.5 14.3906 3.51182 14.3906 3.52623C14.3906 3.54974 16.36 10.9554 16.4034 11.0949C16.4133 11.1268 16.8207 9.64756 17.3088 7.80784C17.7969 5.96812 18.2549 4.24627 18.3265 3.98145L18.4566 3.5H21.1385C22.6135 3.5 23.8214 3.52245 23.8226 3.5498C23.8239 3.57716 22.7107 7.40183 21.349 12.0491L18.873 20.4985L16.5341 20.4993L14.1951 20.5L14.0945 20.1514C14.0392 19.9597 13.5453 18.2065 12.9969 16.2554C12.4485 14.3044 11.9924 12.7011 11.9833 12.6925C11.9742 12.6839 11.4737 14.4369 10.8711 16.5881L9.77539 20.4994L7.43902 20.4997C5.27152 20.5 5.10012 20.4916 5.06752 20.3838C5.04813 20.3199 3.93934 16.5472 2.60352 12C1.26769 7.45283 0.15877 3.67976 0.139312 3.61548C0.105777 3.50491 0.252535 3.49947 2.8111 3.51587L5.51842 3.5332L6.52381 7.30209Z\"\n          fill=\"white\"\n        />\n      </g>\n      <defs>\n        <clipPath id=\"clip0_14230_11037\">\n          <rect width=\"24\" height=\"24\" fill=\"white\" />\n        </clipPath>\n      </defs>\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\nexport const YoutubeIcon = ({ ...props }: IconProps) => {\n  return (\n    <Icon viewBox=\"0 0 24 24\" fill=\"none\" {...props}>\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M20.3943 4.94354C21.3075 5.18802 22.0253 5.90572 22.2697 6.81901C22.7115 8.47269 22.7133 11.925 22.7133 11.925C22.7133 11.925 22.7133 15.3773 22.2697 17.031C22.0253 17.9443 21.3075 18.662 20.3943 18.9064C18.7406 19.35 12.1066 19.35 12.1066 19.35C12.1066 19.35 5.47269 19.35 3.819 18.9064C2.90572 18.662 2.18802 17.9443 1.94354 17.031C1.5 15.3773 1.5 11.925 1.5 11.925C1.5 11.925 1.5 8.47269 1.94354 6.81901C2.18802 5.90572 2.90572 5.18802 3.819 4.94354C5.47269 4.5 12.1066 4.5 12.1066 4.5C12.1066 4.5 18.7406 4.5 20.3943 4.94354ZM15.4944 11.9254L9.98331 15.107V8.74375L15.4944 11.9254Z\"\n        fill=\"white\"\n      />\n    </Icon>\n  );\n};\n","import Wei, { wei } from '@synthetixio/wei';\nimport React, { createContext, useState, PropsWithChildren, Dispatch, SetStateAction } from 'react';\n\nexport const ManagePositionContext = createContext<{\n  collateralChange: Wei;\n  debtChange: Wei;\n  setDebtChange: Dispatch<SetStateAction<Wei>>;\n  setCollateralChange: Dispatch<SetStateAction<Wei>>;\n}>({\n  collateralChange: wei(0),\n  debtChange: wei(0),\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  setDebtChange: () => {},\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  setCollateralChange: () => {},\n});\n\nexport const ManagePositionProvider: React.FC<PropsWithChildren> = ({ children }) => {\n  const [debtChange, setDebtChange] = useState(wei(0));\n  const [collateralChange, setCollateralChange] = useState(wei(0));\n\n  return (\n    <ManagePositionContext.Provider\n      value={{ debtChange, setDebtChange, collateralChange, setCollateralChange }}\n    >\n      {children}\n    </ManagePositionContext.Provider>\n  );\n};\n","export const GWEI_DECIMALS = 9;\nexport const GAS_LIMIT_MULTIPLIER = 1.5;\n\nexport const DEFAULT_QUERY_REFRESH_INTERVAL = 600_000; // 10min\nexport const DEFAULT_QUERY_STALE_TIME = 300_000; // 5min\n\nexport const INFURA_KEY = process.env.INFURA_KEY || '8678fe160b1f4d45ad3f3f71502fc57b';\nexport const ONBOARD_KEY = 'sec_jykTuCK0ZuqXWf3wNYqizxs2';\n\nexport const getSubgraphUrl = (networkName = 'optimism-mainnet') => {\n  switch (networkName) {\n    case 'mainnet':\n      return 'https://subgraph.satsuma-prod.com/ce5e03f52f3b/synthetix/synthetix-mainnet/api';\n    case 'sepolia':\n      return 'https://subgraph.satsuma-prod.com/ce5e03f52f3b/synthetix/synthetix-sepolia/api';\n    case 'optimism-mainnet':\n      return 'https://subgraph.satsuma-prod.com/ce5e03f52f3b/synthetix/synthetix-optimism-mainnet/api';\n    case 'arbitrum':\n      return `https://subgraph.satsuma-prod.com/ce5e03f52f3b/synthetix/synthetix-arbitrum-mainnet/api`;\n    case 'base-sepolia':\n      return 'https://subgraph.satsuma-prod.com/ce5e03f52f3b/synthetix/synthetix-base-sepolia-andromeda/api';\n    case 'base':\n      return 'https://subgraph.satsuma-prod.com/ce5e03f52f3b/synthetix/synthetix-base-mainnet-andromeda/api';\n    default:\n      return `https://subgraph.satsuma-prod.com/ce5e03f52f3b/synthetix/synthetix-${networkName}/api`;\n  }\n};\n\nexport const SESSION_STORAGE_KEYS = {\n  TERMS_CONDITIONS_ACCEPTED: 'TERMS_CONDITIONS_ACCEPTED',\n};\n\nexport const offchainMainnetEndpoint =\n  process.env.PYTH_MAINNET_ENDPOINT || 'https://synthetixab.rpc.p2p.world/';\n\nexport const offchainTestnetEndpoint =\n  process.env.PYTH_TESTNET_ENDPOINT || 'https://synthetixab.rpc.p2p.world/';\n","import { offchainMainnetEndpoint, offchainTestnetEndpoint } from '@snx-v3/constants';\nimport { EvmPriceServiceConnection } from '@pythnetwork/pyth-evm-js';\nimport { ethers, PopulatedTransaction, BigNumber } from 'ethers';\nimport { Wei } from '@synthetixio/wei';\n\nexport const fetchPriceUpdates = async (\n  requestedPriceUpdates: { priceFeedId: string; stalenessTolerance: Wei }[],\n  isTestnet: boolean\n) => {\n  if (requestedPriceUpdates.length === 0) return [];\n  const priceService = new EvmPriceServiceConnection(\n    isTestnet ? offchainTestnetEndpoint : offchainMainnetEndpoint\n  );\n  const signedPricesData = await priceService.getPriceFeedsUpdateData(\n    requestedPriceUpdates.map(({ priceFeedId }) => priceFeedId)\n  );\n\n  return signedPricesData.map((signedOffchainData, i) => {\n    const updateType = 1; // todo can I fetch this?\n\n    const { priceFeedId, stalenessTolerance } = requestedPriceUpdates[i];\n    return ethers.utils.defaultAbiCoder.encode(\n      ['uint8', 'uint64', 'bytes32[]', 'bytes[]'],\n      [updateType, stalenessTolerance.toBN(), [priceFeedId], [signedOffchainData]]\n    );\n  });\n};\n\nexport const priceUpdatesToPopulatedTx = (\n  from: string,\n  oracleAddresses: { address: string }[],\n  signedOffchainData: string[]\n) => {\n  if (oracleAddresses.length !== signedOffchainData.length) {\n    throw new Error('oracleAddresses and signedOffchainData must be the same length');\n  }\n  return signedOffchainData.map((signedOffchainDatum, i) => {\n    const tx: PopulatedTransaction = {\n      to: oracleAddresses[i].address,\n      from: from,\n      data: new ethers.utils.Interface([\n        'function fulfillOracleQuery(bytes calldata signedOffchainData) payable external',\n      ]).encodeFunctionData('fulfillOracleQuery', [signedOffchainDatum]),\n      // We set the value to 1 wei to avoid FeeRequired error from pyth, it's quite nice that their fee seems to be the lowest denominator on every network.\n      // If this ever changes, things wont break, but become slower.\n      value: BigNumber.from(1),\n    };\n    return tx;\n  });\n};\n","import { BigNumberish, utils } from 'ethers';\nimport { wei, WeiSource } from '@synthetixio/wei';\n\nexport const formatValue = (value: BigNumberish, decimals = 18) =>\n  parseFloat(utils.formatUnits(value, decimals));\n\nexport const parseUnits = (value: WeiSource, decimals = 18) => wei(value, decimals).toBN();\n\nexport const compareAddress = (add1: string | null = '', add2: string | null = '') =>\n  !!add1 && !!add2 && add1.toLowerCase() === add2.toLowerCase();\n\nexport const prettyString = (text: string, startLength = 6, endLength = 4) => {\n  if (text.length <= startLength + endLength) {\n    return text;\n  }\n  return `${text.substring(0, startLength)}...${text.substring(text.length - endLength)}`;\n};\n","import { Wei } from '@synthetixio/wei';\n\nexport function currency(\n  value: Wei,\n  options?: Intl.NumberFormatOptions,\n  minimumDigitsToShowAfterZeros = 2\n) {\n  try {\n    const stringValue = value.toString();\n    const numberValue = value.toNumber();\n\n    const decimals =\n      numberValue < 0\n        ? -numberValue - Math.floor(-numberValue)\n        : numberValue - Math.floor(numberValue);\n    const zeroDecimals = decimals !== 0 ? -Math.floor(Math.log10(decimals) + 1) : 0;\n\n    const maximumFractionDigits = zeroDecimals + minimumDigitsToShowAfterZeros;\n\n    return isNaN(numberValue)\n      ? stringValue\n      : numberValue.toLocaleString('en-US', {\n          minimumFractionDigits: 0,\n          maximumFractionDigits,\n          ...options,\n        });\n  } catch (error) {\n    return value + '';\n  }\n}\n","export const isBaseAndromeda = (id?: number | string, preset?: string) =>\n  (id?.toString() === '8453' || '84532') && preset === 'andromeda';\n\nexport function getRepayerContract(id?: number) {\n  switch (id) {\n    case 8453:\n      return '0xBD8004ea5c73E33d405d35d594221Efc733F7E37';\n    case 84532:\n      return '0xD00a601eafC2C131F46105827AFB02b925Adf62A';\n    default:\n      return '';\n  }\n}\n\nexport const USDC_BASE_MARKET = '1';\n","// This is a type guard function that checks if a value is not null and not undefined.\n// This is useful when filtering an array that might have null or undefined values.\nexport const notNil = <T>(x: T | null | undefined): x is T => x !== null && x !== undefined;\n","export type TransactionStatus = 'unsent' | 'prompting' | 'pending' | 'success' | 'error';\n\ntype TxnState = {\n  error: Error | null;\n  modalOpen: boolean;\n  txnStatus: TransactionStatus;\n  txnHash: string | null;\n};\n\nexport const initialState: TxnState = {\n  error: null,\n  modalOpen: false,\n  txnStatus: 'unsent',\n  txnHash: null,\n};\n\nexport type Actions =\n  | { type: 'prompting' }\n  | { type: 'pending'; payload: { txnHash: string } }\n  | { type: 'success' }\n  | { type: 'error'; payload: { error: Error } }\n  | { type: 'settled' };\n\nexport function reducer(state: TxnState, action: Actions): TxnState {\n  switch (action.type) {\n    case 'prompting':\n      return {\n        ...state,\n        txnStatus: 'prompting',\n        modalOpen: true,\n        error: null,\n      };\n\n    case 'pending':\n      return {\n        ...state,\n        txnStatus: 'pending',\n        txnHash: action.payload.txnHash,\n      };\n\n    case 'success':\n      return {\n        ...state,\n        txnStatus: 'success',\n      };\n\n    case 'error':\n      return {\n        ...state,\n        txnStatus: 'error',\n        error: action.payload.error,\n      };\n\n    case 'settled':\n      return {\n        ...state,\n        modalOpen: false,\n        txnStatus: 'unsent',\n        error: null,\n        txnHash: null,\n      };\n\n    default:\n      return state;\n  }\n}\n","export async function importOracleManagerProxy(chainId, preset) {\n  if (!preset) {\n    throw new Error(`Missing preset`);\n  }\n  const deployment = `${Number(chainId).toFixed(0)}-${preset}`;\n  switch (deployment) {\n    case '1-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/1-main/meta.json'),\n        import('@synthetixio/v3-contracts/1-main/OracleManagerProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.OracleManagerProxy, abi };\n    }\n    case '11155111-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/11155111-main/meta.json'),\n        import('@synthetixio/v3-contracts/11155111-main/OracleManagerProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.OracleManagerProxy, abi };\n    }\n    case '10-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/10-main/meta.json'),\n        import('@synthetixio/v3-contracts/10-main/OracleManagerProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.OracleManagerProxy, abi };\n    }\n    case '8453-andromeda': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/8453-andromeda/meta.json'),\n        import('@synthetixio/v3-contracts/8453-andromeda/OracleManagerProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.OracleManagerProxy, abi };\n    }\n    case '84532-andromeda': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/84532-andromeda/meta.json'),\n        import('@synthetixio/v3-contracts/84532-andromeda/OracleManagerProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.OracleManagerProxy, abi };\n    }\n    case '42161-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-main/meta.json'),\n        import('@synthetixio/v3-contracts/42161-main/OracleManagerProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.OracleManagerProxy, abi };\n    }\n    case '421614-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/421614-main/meta.json'),\n        import('@synthetixio/v3-contracts/421614-main/OracleManagerProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.OracleManagerProxy, abi };\n    }\n    case '42161-arbthetix': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-arbthetix/meta.json'),\n        import('@synthetixio/v3-contracts/42161-arbthetix/OracleManagerProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.OracleManagerProxy, abi };\n    }\n    default: {\n      throw new Error(`Unsupported deployment ${deployment} for OracleManagerProxy`);\n    }\n  }\n}\n","import { deploymentsWithERC7412, Network, useNetwork } from '@snx-v3/useBlockchain';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { useMulticall3 } from '@snx-v3/useMulticall3';\nimport { useOracleManagerProxy } from '@snx-v3/useOracleManagerProxy';\nimport { ZodBigNumber } from '@snx-v3/zod';\nimport { wei } from '@synthetixio/wei';\nimport { useQuery } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\nimport { z } from 'zod';\n\nconst NodeSchema = z.object({\n  nodeType: z.number(),\n  parameters: z.string(),\n  parents: z.array(z.string()),\n});\n\nconst PythParametersSchema = z.object({\n  address: z.string(),\n  priceFeedId: z.string(),\n  stalenessTolerance: ZodBigNumber.transform((x) => wei(x)),\n});\n\nconst EXTERNAL_NODE_TYPE = 2;\n\nconst loadConfigs = async ({ CoreProxy }: { CoreProxy: ethers.Contract }) => {\n  const hideDisabled = false;\n  return await CoreProxy.getCollateralConfigurations(hideDisabled);\n};\n\nexport const useAllCollateralPriceIds = (customNetwork?: Network) => {\n  const { network } = useNetwork();\n  const targetNetwork = customNetwork || network;\n  const { data: Multicall3 } = useMulticall3(customNetwork);\n  const { data: OracleProxy } = useOracleManagerProxy(customNetwork);\n  const { data: CoreProxy } = useCoreProxy(customNetwork);\n\n  return useQuery({\n    enabled: Boolean(Multicall3 && OracleProxy && CoreProxy),\n    staleTime: Infinity,\n    queryKey: [`${targetNetwork?.id}-${targetNetwork?.preset}`, 'AllCollateralPriceIds'],\n    queryFn: async () => {\n      if (!CoreProxy || !Multicall3 || !OracleProxy || !targetNetwork) {\n        throw Error('useAllCollateralPriceIds should not be enabled ');\n      }\n\n      if (!deploymentsWithERC7412.includes(`${targetNetwork?.id}-${targetNetwork?.preset}`))\n        return [];\n\n      const configs = await loadConfigs({ CoreProxy });\n\n      const oracleNodeIds = configs.map((x: { oracleNodeId: string }) => x.oracleNodeId);\n\n      const calls = oracleNodeIds.map((oracleNodeId: string) => ({\n        target: OracleProxy.address,\n        callData: OracleProxy.interface.encodeFunctionData('getNode', [oracleNodeId]),\n      }));\n\n      const { returnData } = await Multicall3.callStatic.aggregate(calls);\n\n      const decoded = returnData\n        .map((bytes: ethers.utils.BytesLike, i: number) => {\n          const nodeResp = OracleProxy.interface.decodeFunctionResult('getNode', bytes)[0];\n\n          const { nodeType, parameters } = NodeSchema.parse({ ...nodeResp });\n\n          if (nodeType !== EXTERNAL_NODE_TYPE) return undefined;\n\n          try {\n            const [address, priceFeedId, stalenessTolerance] = ethers.utils.defaultAbiCoder.decode(\n              ['address', 'bytes32', 'uint256'],\n              parameters\n            );\n            const parametersDecoded = PythParametersSchema.parse({\n              address,\n              priceFeedId,\n              stalenessTolerance,\n            });\n            return {\n              parameters,\n              priceFeedId: parametersDecoded.priceFeedId,\n              address: parametersDecoded.address,\n              stalenessTolerance: parametersDecoded.stalenessTolerance,\n            };\n          } catch (error) {\n            console.error(`Decoding parameters failed, config:`, configs[i]);\n            console.error('parameters: ', parameters);\n            console.error(error);\n            return null;\n          }\n        })\n        .filter(Boolean);\n\n      const seen = new Set();\n      return decoded.filter((item: { priceFeedId: string }) => {\n        if (seen.has(item.priceFeedId)) {\n          return false;\n        }\n        seen.add(item.priceFeedId);\n        return true;\n      });\n    },\n  });\n};\n","import { Contract } from '@ethersproject/contracts';\nimport { useQuery } from '@tanstack/react-query';\nimport {\n  Network,\n  useNetwork,\n  useProvider,\n  useProviderForChain,\n  useSigner,\n} from '@snx-v3/useBlockchain';\nimport { importOracleManagerProxy } from '@snx-v3/contracts';\n\nexport function useOracleManagerProxy(customNetwork?: Network) {\n  const { network } = useNetwork();\n  const providerForChain = useProviderForChain(customNetwork);\n  const provider = useProvider();\n  const signer = useSigner();\n  const signerOrProvider = providerForChain || signer || provider;\n  const withSigner = Boolean(signer);\n\n  const targetNetwork = customNetwork || network;\n\n  return useQuery({\n    queryKey: [\n      `${targetNetwork?.id}-${targetNetwork?.preset}`,\n      'OracleManagerProxy',\n      { withSigner },\n    ],\n    queryFn: async function () {\n      if (providerForChain && customNetwork) {\n        const { address, abi } = await importOracleManagerProxy(\n          customNetwork.id,\n          customNetwork.preset\n        );\n        return new Contract(address, abi, providerForChain);\n      }\n      if (!network || !signerOrProvider) throw new Error('Network or signer not available');\n      const { address, abi } = await importOracleManagerProxy(network?.id, network?.preset);\n      return new Contract(address, abi, signerOrProvider);\n    },\n    enabled: Boolean(signerOrProvider),\n    staleTime: Infinity,\n  });\n}\n","import { useQuery } from '@tanstack/react-query';\nimport { useWallet, useNetwork, useProvider } from '@snx-v3/useBlockchain';\nimport { Contract } from 'ethers';\nimport { ZodBigNumber } from '@snx-v3/zod';\nimport { wei } from '@synthetixio/wei';\n\nconst AllowanceSchema = ZodBigNumber.transform((x) => wei(x));\nconst abi = ['function allowance(address, address) view returns (uint256)'];\n\nexport const useAllowance = ({\n  contractAddress,\n  spender,\n}: {\n  contractAddress?: string;\n  spender?: string;\n}) => {\n  const { activeWallet } = useWallet();\n  const provider = useProvider();\n  const { network } = useNetwork();\n\n  return useQuery({\n    queryKey: [\n      `${network?.id}-${network?.preset}`,\n      'Allowance',\n      { accountAddress: activeWallet?.address },\n      { contractAddress, spender },\n    ],\n    queryFn: async () => {\n      if (!(contractAddress && spender && activeWallet?.address && provider))\n        throw new Error('OMG');\n      const contract = new Contract(contractAddress, abi, provider);\n      const allowance = await contract.allowance(activeWallet.address, spender);\n      return AllowanceSchema.parse(allowance);\n    },\n    enabled: Boolean(activeWallet?.address && contractAddress && spender && provider),\n  });\n};\n","import { useReducer } from 'react';\nimport { useAllowance } from '@snx-v3/useAllowance';\nimport { BigNumberish, ethers } from 'ethers';\nimport { useMutation } from '@tanstack/react-query';\nimport { useProvider, useSigner } from '@snx-v3/useBlockchain';\nimport { initialState, reducer } from '@snx-v3/txnReducer';\nimport { formatGasPriceForTransaction } from '@snx-v3/useGasOptions';\nimport { getGasPrice } from '@snx-v3/useGasPrice';\nimport { useGasSpeed } from '@snx-v3/useGasSpeed';\n\nexport const approveAbi = ['function approve(address spender, uint256 amount) returns (bool)'];\n\nexport const useApprove = (\n  {\n    contractAddress,\n    amount,\n    spender,\n  }: {\n    contractAddress?: string;\n    amount: BigNumberish;\n    spender?: string;\n  },\n  eventHandlers?: {\n    onSuccess?: () => void;\n    onMutate?: () => void;\n    onError?: (e: Error) => void;\n  }\n) => {\n  const [txnState, dispatch] = useReducer(reducer, initialState);\n  const { data: allowance, refetch: refetchAllowance } = useAllowance({ contractAddress, spender });\n\n  const sufficientAllowance = Boolean(allowance?.gte(amount));\n\n  const signer = useSigner();\n  const { gasSpeed } = useGasSpeed();\n  const provider = useProvider();\n\n  const mutation = useMutation({\n    mutationFn: async (infiniteApproval: boolean) => {\n      if (!signer || !contractAddress || !spender || !provider)\n        throw new Error('Signer, contract address or spender is not defined');\n      if (sufficientAllowance) return;\n\n      try {\n        dispatch({ type: 'prompting' });\n\n        const contract = new ethers.Contract(contractAddress, approveAbi, signer);\n        const amountToAppove = infiniteApproval ? ethers.constants.MaxUint256 : amount;\n\n        const gasPricesPromised = getGasPrice({ provider });\n        const gasLimitPromised = contract.estimateGas.approve(spender, amountToAppove);\n\n        const populatedTxnPromised = contract.populateTransaction.approve(spender, amountToAppove, {\n          gasLimit: gasLimitPromised,\n        });\n\n        const [gasPrices, gasLimit, populatedTxn] = await Promise.all([\n          gasPricesPromised,\n          gasLimitPromised,\n          populatedTxnPromised,\n        ]);\n\n        const gasOptionsForTransaction = formatGasPriceForTransaction({\n          gasLimit,\n          gasPrices,\n          gasSpeed,\n        });\n\n        const txn = await signer.sendTransaction({ ...populatedTxn, ...gasOptionsForTransaction });\n        dispatch({ type: 'pending', payload: { txnHash: txn.hash } });\n\n        await txn.wait();\n        dispatch({ type: 'success' });\n        refetchAllowance();\n      } catch (error: any) {\n        dispatch({ type: 'error', payload: { error } });\n        throw error;\n      }\n    },\n    ...eventHandlers,\n  });\n  return {\n    mutation,\n    txnState,\n    isLoading: mutation.isPending,\n    approve: mutation.mutateAsync,\n    refetchAllowance,\n    requireApproval: !sufficientAllowance,\n  };\n};\n","import { Network, useNetwork } from '@snx-v3/useBlockchain';\nimport { useQuery } from '@tanstack/react-query';\n\nexport function useApr(customNetwork?: Network) {\n  const { network } = useNetwork();\n  const chain = customNetwork || network;\n\n  return useQuery({\n    queryKey: ['apr', chain?.id],\n    queryFn: async () => {\n      try {\n        return await fetchApr(chain?.id);\n      } catch (error) {\n        return;\n      }\n    },\n    staleTime: 60000,\n  });\n}\n\nexport async function fetchApr(networkId?: number) {\n  const response = await fetch('https://api.synthetix.io/v3/base/sc-pool-apy');\n\n  const data = await response.json();\n\n  return {\n    // 0 meaning not the right network\n    combinedApr: networkId === 8453 || networkId === 84532 ? data.aprCombined * 100 : 0,\n    cumulativePnl: networkId === 8453 || networkId === 84532 ? data.cumulativePnl : 0,\n  };\n}\n","import { ethers } from 'ethers';\nimport React, { useMemo } from 'react';\nimport {\n  BaseIcon,\n  EthereumIcon,\n  FailedIcon,\n  LogoIcon,\n  OptimismIcon,\n  ArbitrumIcon,\n} from '@snx-v3/icons';\nimport { INFURA_KEY as DEFAULT_INFURA_KEY } from '@snx-v3/constants';\nimport SynthetixIcon from './SynthetixIcon.svg';\nimport SynthetixLogo from './SynthetixLogo.svg';\nimport { useConnectWallet, useSetChain } from '@web3-onboard/react';\nimport { useCallback } from 'react';\nimport { IconProps } from '@chakra-ui/react';\n\nexport type Network = {\n  id: number;\n  preset: string;\n  hexId: string;\n  token: string;\n  name: string;\n  rpcUrl: () => string;\n  label: string;\n  isSupported: boolean;\n  publicRpcUrl: string;\n  isTestnet: boolean;\n};\n\nexport const UNSUPPORTED_NETWORK: Network = {\n  id: 0,\n  preset: 'main',\n  hexId: `0x${Number(0).toString(16)}`,\n  token: 'ETH',\n  name: 'unsupported',\n  rpcUrl: () => '',\n  publicRpcUrl: '',\n  label: 'Unsupported',\n  isSupported: false,\n  isTestnet: false,\n};\n\ninterface NetworkIconProps extends IconProps {\n  networkId?: Network['id'];\n  size?: string;\n}\n\nexport const NetworkIcon = ({ networkId, size = '24px', ...props }: NetworkIconProps) => {\n  switch (networkId) {\n    case 1:\n      return <EthereumIcon w={size} h={size} {...props} />;\n    case 10:\n      return <OptimismIcon w={size} h={size} {...props} />;\n    case 11155111:\n      return <EthereumIcon w={size} h={size} {...props} />;\n    case 84531:\n      return <BaseIcon w={size} h={size} {...props} />;\n    case 84532:\n      return <BaseIcon w={size} h={size} {...props} />;\n    case 13370:\n      return <LogoIcon w=\"29px\" h=\"21px\" {...props} />;\n    case 8453:\n      return <BaseIcon w={size} h={size} {...props} />;\n    case 11155420:\n      return <OptimismIcon w={size} h={size} {...props} />;\n    case 421614:\n      return <ArbitrumIcon w={size} h={size} {...props} />;\n    case 42161:\n      return <ArbitrumIcon w={size} h={size} {...props} />;\n    default:\n      return <FailedIcon w={size} h={size} {...props} />;\n  }\n};\n\nexport const NETWORKS: Network[] = [\n  {\n    id: 8453,\n    preset: 'andromeda',\n    hexId: `0x${Number(8453).toString(16)}`,\n    token: 'ETH',\n    name: 'base',\n    rpcUrl: (INFURA_KEY?: string) =>\n      `https://base-mainnet.infura.io/v3/${INFURA_KEY ?? DEFAULT_INFURA_KEY}`,\n    label: 'Base',\n    isSupported: true,\n    publicRpcUrl: 'https://base.publicnode.com',\n    isTestnet: false,\n  },\n  {\n    id: 1,\n    preset: 'main',\n    hexId: `0x${Number(1).toString(16)}`,\n    token: 'ETH',\n    name: 'mainnet',\n    rpcUrl: (INFURA_KEY?: string) =>\n      `https://mainnet.infura.io/v3/${INFURA_KEY ?? DEFAULT_INFURA_KEY}`,\n    label: 'Ethereum',\n    isSupported: true,\n    publicRpcUrl: 'https://ethereum.publicnode.com',\n    isTestnet: false,\n  },\n  {\n    id: 10,\n    preset: 'main',\n    hexId: `0x${Number(10).toString(16)}`,\n    token: 'ETH',\n    name: 'optimism-mainnet',\n    rpcUrl: (INFURA_KEY?: string) =>\n      `https://optimism-mainnet.infura.io/v3/${INFURA_KEY ?? DEFAULT_INFURA_KEY}`,\n    label: 'Optimism',\n    isSupported: true,\n    publicRpcUrl: 'https://mainnet.optimism.io',\n    isTestnet: false,\n  },\n  {\n    id: 11155111,\n    preset: 'main',\n    hexId: `0x${Number(11155111).toString(16)}`,\n    token: 'ETH',\n    name: 'sepolia',\n    rpcUrl: (INFURA_KEY?: string) =>\n      `https://sepolia.infura.io/v3/${INFURA_KEY ?? DEFAULT_INFURA_KEY}`,\n    label: 'Sepolia Testnet',\n    isSupported: true,\n    publicRpcUrl: 'https://ethereum-sepolia.publicnode.com',\n    isTestnet: true,\n  },\n  {\n    id: 84532,\n    preset: 'andromeda',\n    hexId: `0x${Number(84532).toString(16)}`,\n    token: 'ETH',\n    name: 'base-sepolia',\n    rpcUrl: (INFURA_KEY?: string) =>\n      `https://base-sepolia.infura.io/v3/${INFURA_KEY ?? DEFAULT_INFURA_KEY}`,\n    label: 'Base Sepolia',\n    isSupported: true,\n    publicRpcUrl: 'https://sepolia.base.org',\n    isTestnet: true,\n  },\n  {\n    id: 13370,\n    preset: 'main',\n    hexId: `0x${Number(13370).toString(16)}`,\n    token: 'ETH',\n    name: 'cannon',\n    rpcUrl: () => `http://127.0.0.1:8545`,\n    label: 'Cannon',\n    isSupported: false, // hidden by default but if wallet switched to Cannon it will be visible\n    publicRpcUrl: 'http://127.0.0.1:8545',\n    isTestnet: true,\n  },\n  {\n    id: 11155420,\n    preset: 'main',\n    hexId: `0x${Number(11155420).toString(16)}`,\n    token: 'ETH',\n    name: 'optimism-sepolia',\n    rpcUrl: (INFURA_KEY?: string) =>\n      `https://optimism-sepolia.infura.io/v3/${INFURA_KEY ?? DEFAULT_INFURA_KEY}`,\n    label: 'Optimism Sepolia',\n    isSupported: false,\n    publicRpcUrl: 'https://sepolia.optimism.io/',\n    isTestnet: true,\n  },\n  {\n    id: 421614,\n    preset: 'main',\n    hexId: `0x${Number(421614).toString(16)}`,\n    token: 'ETH',\n    name: 'arbitrum-sepolia',\n    rpcUrl: (INFURA_KEY?: string) =>\n      `https://arbitrum-sepolia.infura.io/v3/${INFURA_KEY ?? DEFAULT_INFURA_KEY}`,\n    label: 'Arbitrum Sepolia',\n    isSupported: true,\n    publicRpcUrl: 'https://sepolia.arbiscan.io/',\n    isTestnet: true,\n  },\n  {\n    id: 42161,\n    preset: 'main',\n    hexId: `0x${Number(42161).toString(16)}`,\n    token: 'ETH',\n    name: 'arbitrum',\n    rpcUrl: (INFURA_KEY?: string) =>\n      `https://arbitrum-mainnet.infura.io/v3/${INFURA_KEY ?? DEFAULT_INFURA_KEY}`,\n    label: 'Arbitrum',\n    isSupported: true,\n    publicRpcUrl: 'https://arbiscan.io/',\n    isTestnet: false,\n  },\n  {\n    id: 42161,\n    preset: 'arbthetix',\n    hexId: `0x${Number(42161).toString(16)}`,\n    token: 'ETH',\n    name: 'arbitrum',\n    rpcUrl: (INFURA_KEY?: string) =>\n      `https://arbitrum-mainnet.infura.io/v3/${INFURA_KEY ?? DEFAULT_INFURA_KEY}`,\n    label: 'Arbthetix (withdraw only)',\n    isSupported: false,\n    publicRpcUrl: 'https://arbiscan.io/',\n    isTestnet: false,\n  },\n];\n\nexport const deploymentsWithERC7412: string[] = [\n  '8453-andromeda',\n  '84532-andromeda',\n  '42161-main',\n  '421614-main',\n  '42161-arbthetix',\n];\n\nexport const DEFAULT_NETWORK =\n  NETWORKS.find(\n    (network) =>\n      `${network.id}-${network.preset}` === window.localStorage.getItem('DEFAULT_NETWORK')\n  ) ?? NETWORKS[1];\n\nexport const appMetadata = {\n  name: 'Synthetix',\n  icon: SynthetixIcon,\n  logo: SynthetixLogo,\n  description: 'Synthetix | The derivatives liquidity protocol.',\n  recommendedInjectedWallets: [\n    { name: 'MetaMask', url: 'https://metamask.io' },\n    { name: 'Brave Wallet', url: 'https://brave.com/wallet' },\n  ],\n  gettingStartedGuide: 'https://synthetix.io',\n  explore: 'https://blog.synthetix.io',\n};\n\nexport function useProviderForChain(network?: Network | null) {\n  return network ? new ethers.providers.JsonRpcProvider(network.rpcUrl()) : undefined;\n}\n\nexport function useDefaultProvider() {\n  const { network } = useNetwork();\n  return useProviderForChain(network);\n}\n\nexport function useWallet() {\n  const [{ wallet }, conn, disconn] = useConnectWallet();\n\n  const connect = useCallback(conn, [conn]);\n  const disconnect = useCallback(disconn, [disconn]);\n\n  if (!wallet) {\n    return {\n      activeWallet: null,\n      walletsInfo: null,\n      connect,\n      disconnect,\n    };\n  }\n\n  const activeWallet = wallet?.accounts[0];\n\n  return {\n    activeWallet: activeWallet,\n    walletsInfo: wallet,\n    connect,\n    disconnect,\n  };\n}\n\nexport function useGetNetwork(chainId: string) {\n  return useMemo(() => {\n    return NETWORKS.find((n) => n.hexId === chainId);\n  }, [chainId]);\n}\n\nexport function useNetwork() {\n  const [{ connectedChain }, setChain] = useSetChain();\n\n  // Hydrate the network info\n  const network = NETWORKS.find((n) => n.hexId === connectedChain?.id);\n\n  const setNetwork = useCallback(\n    async (networkId: number) => {\n      const newNetwork = NETWORKS.find((n) => n.id === networkId);\n      if (!newNetwork) return;\n      return await setChain({ chainId: newNetwork?.hexId });\n    },\n    [setChain]\n  );\n\n  if (!network) {\n    return {\n      network: null,\n      setNetwork,\n    };\n  }\n\n  return {\n    network,\n    setNetwork,\n  };\n}\n\nexport function useIsConnected(): boolean {\n  const [{ wallet }] = useConnectWallet();\n  return Boolean(wallet);\n}\n\nexport function useSigner() {\n  const [{ wallet }] = useConnectWallet();\n\n  if (!wallet) {\n    return null;\n  }\n\n  const provider = new ethers.providers.Web3Provider(wallet.provider, 'any');\n\n  return provider.getSigner();\n}\n\nexport function useProvider() {\n  const [{ wallet }] = useConnectWallet();\n\n  if (!wallet) {\n    return null;\n  }\n\n  const provider = new ethers.providers.Web3Provider(wallet.provider, 'any');\n\n  return provider;\n}\n","import { useReducer } from 'react';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { formatGasPriceForTransaction } from '@snx-v3/useGasOptions';\nimport { useMutation } from '@tanstack/react-query';\nimport { useNetwork, useProvider, useSigner } from '@snx-v3/useBlockchain';\nimport { initialState, reducer } from '@snx-v3/txnReducer';\nimport Wei from '@synthetixio/wei';\nimport { BigNumber, Contract } from 'ethers';\nimport { getGasPrice } from '@snx-v3/useGasPrice';\nimport { useGasSpeed } from '@snx-v3/useGasSpeed';\nimport { notNil } from '@snx-v3/tsHelpers';\nimport { withERC7412 } from '@snx-v3/withERC7412';\nimport { useAllCollateralPriceIds } from '@snx-v3/useAllCollateralPriceIds';\nimport { useSpotMarketProxy } from '../useSpotMarketProxy';\nimport { USDC_BASE_MARKET, getRepayerContract } from '@snx-v3/isBaseAndromeda';\nimport { useCollateralPriceUpdates } from '../useCollateralPriceUpdates';\n\nexport const DEBT_REPAYER_ABI = [\n  {\n    inputs: [\n      { internalType: 'contract ISynthetixCore', name: 'synthetixCore', type: 'address' },\n      { internalType: 'contract ISpotMarket', name: 'spotMarket', type: 'address' },\n      { internalType: 'uint128', name: 'accountId', type: 'uint128' },\n      { internalType: 'uint128', name: 'poolId', type: 'uint128' },\n      { internalType: 'address', name: 'collateralType', type: 'address' },\n      { internalType: 'uint128', name: 'spotMarketId', type: 'uint128' },\n    ],\n    name: 'depositDebtToRepay',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function',\n  },\n];\n\nexport const useClearDebt = ({\n  accountId,\n  poolId,\n  collateralTypeAddress,\n  availableUSDCollateral,\n  debt,\n}: {\n  accountId?: string;\n  poolId?: string;\n  collateralTypeAddress?: string;\n  availableUSDCollateral?: Wei;\n  debt?: Wei;\n}) => {\n  const [txnState, dispatch] = useReducer(reducer, initialState);\n  const { data: CoreProxy } = useCoreProxy();\n  const { data: SpotMarketProxy } = useSpotMarketProxy();\n  const { data: collateralPriceIds } = useAllCollateralPriceIds();\n  const { data: priceUpdateTx } = useCollateralPriceUpdates();\n\n  const signer = useSigner();\n  const { network } = useNetwork();\n  const { gasSpeed } = useGasSpeed();\n  const provider = useProvider();\n\n  const mutation = useMutation({\n    mutationFn: async () => {\n      if (!signer || !network || !provider) throw new Error('No signer or network');\n\n      if (\n        !(\n          CoreProxy &&\n          poolId &&\n          accountId &&\n          collateralTypeAddress &&\n          SpotMarketProxy &&\n          collateralPriceIds\n        )\n      ) {\n        return;\n      }\n\n      const repayer = new Contract(getRepayerContract(network.id), DEBT_REPAYER_ABI, signer);\n\n      if (!availableUSDCollateral) return;\n\n      try {\n        dispatch({ type: 'prompting' });\n\n        const depositDebtToRepay = repayer.populateTransaction.depositDebtToRepay(\n          CoreProxy.address,\n          SpotMarketProxy.address,\n          accountId,\n          poolId,\n          collateralTypeAddress,\n          USDC_BASE_MARKET\n        );\n\n        const burn = CoreProxy.populateTransaction.burnUsd(\n          BigNumber.from(accountId),\n          BigNumber.from(poolId),\n          collateralTypeAddress,\n          debt?.mul(110).div(100).toBN().toString() || '0'\n        );\n\n        const callsPromise = Promise.all([depositDebtToRepay, burn].filter(notNil));\n\n        const [calls, gasPrices] = await Promise.all([callsPromise, getGasPrice({ provider })]);\n\n        if (priceUpdateTx) {\n          calls.unshift(priceUpdateTx as any);\n        }\n\n        const erc7412Tx = await withERC7412(network, calls, 'useRepay');\n\n        const gasOptionsForTransaction = formatGasPriceForTransaction({\n          gasLimit: erc7412Tx.gasLimit,\n          gasPrices,\n          gasSpeed,\n        });\n\n        const txn = await signer.sendTransaction({ ...erc7412Tx, ...gasOptionsForTransaction });\n        dispatch({ type: 'pending', payload: { txnHash: txn.hash } });\n\n        await txn.wait();\n        dispatch({ type: 'success' });\n      } catch (error: any) {\n        dispatch({ type: 'error', payload: { error } });\n        throw error;\n      }\n    },\n  });\n  return {\n    mutation,\n    txnState,\n    settle: () => dispatch({ type: 'settled' }),\n    isLoading: mutation.isPending,\n    exec: mutation.mutateAsync,\n  };\n};\n","export async function importExtras(chainId, preset) {\n  if (!preset) {\n    throw new Error(`Missing preset`);\n  }\n  const deployment = `${Number(chainId).toFixed(0)}-${preset}`;\n  switch (deployment) {\n    case '1-main': {\n      const [extras] = await Promise.all([import('@synthetixio/v3-contracts/1-main/extras.json')]);\n      return extras;\n    }\n    case '11155111-main': {\n      const [extras] = await Promise.all([\n        import('@synthetixio/v3-contracts/11155111-main/extras.json'),\n      ]);\n      return extras;\n    }\n    case '10-main': {\n      const [extras] = await Promise.all([import('@synthetixio/v3-contracts/10-main/extras.json')]);\n      return extras;\n    }\n    case '8453-andromeda': {\n      const [extras] = await Promise.all([\n        import('@synthetixio/v3-contracts/8453-andromeda/extras.json'),\n      ]);\n      return extras;\n    }\n    case '84532-andromeda': {\n      const [extras] = await Promise.all([\n        import('@synthetixio/v3-contracts/84532-andromeda/extras.json'),\n      ]);\n      return extras;\n    }\n    case '42161-main': {\n      const [extras] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-main/extras.json'),\n      ]);\n      return extras;\n    }\n    case '421614-main': {\n      const [extras] = await Promise.all([\n        import('@synthetixio/v3-contracts/421614-main/extras.json'),\n      ]);\n      return extras;\n    }\n    case '42161-arbthetix': {\n      const [extras] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-arbthetix/extras.json'),\n      ]);\n      return extras;\n    }\n    default: {\n      throw new Error(`Unsupported deployment ${deployment} for Extras`);\n    }\n  }\n}\n","export async function importPythERC7412Wrapper(chainId, preset) {\n  if (!preset) {\n    throw new Error(`Missing preset`);\n  }\n  const deployment = `${Number(chainId).toFixed(0)}-${preset}`;\n  switch (deployment) {\n    case '8453-andromeda': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/8453-andromeda/meta.json'),\n        import('@synthetixio/v3-contracts/8453-andromeda/PythERC7412Wrapper.readable.json'),\n      ]);\n      return { address: meta.contracts.PythERC7412Wrapper, abi };\n    }\n    case '84532-andromeda': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/84532-andromeda/meta.json'),\n        import('@synthetixio/v3-contracts/84532-andromeda/PythERC7412Wrapper.readable.json'),\n      ]);\n      return { address: meta.contracts.PythERC7412Wrapper, abi };\n    }\n    case '42161-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-main/meta.json'),\n        import('@synthetixio/v3-contracts/42161-main/PythERC7412Wrapper.readable.json'),\n      ]);\n      return { address: meta.contracts.PythERC7412Wrapper, abi };\n    }\n    case '421614-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/421614-main/meta.json'),\n        import('@synthetixio/v3-contracts/421614-main/PythERC7412Wrapper.readable.json'),\n      ]);\n      return { address: meta.contracts.PythERC7412Wrapper, abi };\n    }\n    case '42161-arbthetix': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-arbthetix/meta.json'),\n        import('@synthetixio/v3-contracts/42161-arbthetix/PythERC7412Wrapper.readable.json'),\n      ]);\n      return { address: meta.contracts.PythERC7412Wrapper, abi };\n    }\n    default: {\n      throw new Error(`Unsupported deployment ${deployment} for PythERC7412Wrapper`);\n    }\n  }\n}\n","import { useQuery } from '@tanstack/react-query';\nimport { BigNumberish, ethers } from 'ethers';\nimport { Network, useDefaultProvider, useNetwork, useWallet } from '@snx-v3/useBlockchain';\nimport { EvmPriceServiceConnection } from '@pythnetwork/pyth-evm-js';\nimport { offchainMainnetEndpoint } from '@snx-v3/constants';\nimport { ERC7412_ABI } from '@snx-v3/withERC7412';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { importMulticall3, importExtras } from '@snx-v3/contracts';\nimport { networksOffline } from '@snx-v3/usePoolsList';\nimport { wei } from '@synthetixio/wei';\nimport { importPythERC7412Wrapper } from '@snx-v3/contracts';\nimport { parseUnits } from '@snx-v3/format';\n\nconst priceService = new EvmPriceServiceConnection(offchainMainnetEndpoint);\n\nasync function getPythFeedIds(network: Network) {\n  const extras = await importExtras(network.id, network.preset);\n  return Object.entries(extras)\n    .filter(\n      ([key, value]) =>\n        key.startsWith('pyth') && key.endsWith('FeedId') && String(value).length === 66\n    )\n    .map(([_key, value]) => value);\n}\n\nasync function getPythFeedIdsFromCollateralList(collateralList: string[]) {\n  const queries = networksOffline.map((network) => importExtras(network.id, network.preset));\n  const extras = await Promise.all(queries);\n\n  // Go over extras and find everything that starts with pyth and ends with FeedId, store in array\n  const priceIds = extras\n    .map((extra) => {\n      return Object.entries(extra).filter(\n        ([key, _value]) => key.startsWith('pyth') && key.endsWith('FeedId')\n      );\n    })\n    .flat();\n\n  const deduped = Array.from(\n    new Set(\n      priceIds.map((x) => ({\n        collateral: x[0].replace('pyth', '').replace('FeedId', '').toUpperCase(),\n        priceId: x[1],\n      }))\n    )\n  );\n\n  // Find the corresponding price feed id for each collateral\n  return collateralList.map((collateral) => {\n    let symbol = collateral;\n    if (collateral === 'WETH') {\n      symbol = 'ETH';\n    }\n\n    const id = deduped.find((x) => x.collateral === symbol);\n\n    return {\n      collateral,\n      priceId: id?.priceId,\n    };\n  });\n}\n\nconst getPriceUpdates = async (\n  priceIds: string[],\n  stalenessTolerance: number,\n  network: Network | null\n) => {\n  // network.id\n\n  const signedOffchainData = await priceService.getPriceFeedsUpdateData(priceIds);\n  const updateType = 1;\n  const data = ethers.utils.defaultAbiCoder.encode(\n    ['uint8', 'uint64', 'bytes32[]', 'bytes[]'],\n    [updateType, stalenessTolerance, priceIds, signedOffchainData]\n  );\n  const erc7412Interface = new ethers.utils.Interface(ERC7412_ABI);\n\n  const { address } = await importPythERC7412Wrapper(network?.id, network?.preset);\n\n  return {\n    // pyth wrapper\n    to: address,\n    data: erc7412Interface.encodeFunctionData('fulfillOracleQuery', [data]),\n    value: priceIds.length * 10,\n  };\n};\n\nexport const useAllCollateralPriceUpdates = (customNetwork?: Network) => {\n  const { network } = useNetwork();\n  const targetNetwork = customNetwork || network;\n  return useQuery({\n    queryKey: [`${targetNetwork?.id}-${targetNetwork?.preset}`, 'all-price-updates'],\n    enabled: isBaseAndromeda(targetNetwork?.id, targetNetwork?.preset),\n    queryFn: async () => {\n      if (!(targetNetwork?.id && targetNetwork?.preset))\n        throw 'useAllCollateralPriceUpdates is missing required data';\n      const stalenessTolerance = 60;\n\n      const pythFeedIds = (await getPythFeedIds(targetNetwork)) as string[];\n      const tx = await getPriceUpdates(pythFeedIds, stalenessTolerance, network);\n\n      return {\n        ...tx,\n        value: tx.value * 10,\n      };\n    },\n    refetchInterval: 60000,\n  });\n};\n\ninterface Collaterals {\n  symbol: string;\n  oracleId: string;\n  id: string;\n}\n\nexport const useOfflinePrices = (collaterals?: Collaterals[]) => {\n  return useQuery({\n    queryKey: ['offline-prices', collaterals?.map((collateral) => collateral.id).join('-')],\n    enabled: Boolean(collaterals),\n    queryFn: async () => {\n      if (!collaterals) {\n        throw 'useOfflinePrices is missing required data';\n      }\n\n      const returnData: { symbol: string; price: BigNumberish }[] = [\n        {\n          symbol: 'sUSDC',\n          price: wei(1).toBN(),\n        },\n        {\n          symbol: 'USDC',\n          price: wei(1).toBN(),\n        },\n      ];\n\n      const filteredCollaterals = collaterals.filter(\n        (collateral) => !collateral.symbol.includes('sUSDC')\n      );\n\n      if (!filteredCollaterals.length) {\n        return returnData;\n      }\n\n      const pythIds = await getPythFeedIdsFromCollateralList(\n        collaterals.map((collateral) => collateral.symbol)\n      );\n\n      const prices = await priceService.getLatestPriceFeeds(\n        pythIds.map((x) => x.priceId) as string[]\n      );\n\n      prices?.forEach((item, index) => {\n        const price = item.getPriceUnchecked();\n\n        returnData.push({\n          symbol: collaterals[index].symbol,\n          price: parseUnits(price.price, 18 + price.expo),\n        });\n      });\n\n      return returnData;\n    },\n    refetchInterval: 60000,\n  });\n};\n\nexport const useCollateralPriceUpdates = () => {\n  const { network } = useNetwork();\n  const provider = useDefaultProvider();\n  const { activeWallet } = useWallet();\n\n  return useQuery({\n    queryKey: [`${network?.id}-${network?.preset}`, 'price-updates', activeWallet?.address],\n    enabled: isBaseAndromeda(network?.id, network?.preset),\n    queryFn: async () => {\n      const stalenessTolerance = 3300;\n      if (!network) {\n        return;\n      }\n\n      try {\n        const { address: multicallAddress, abi: multiCallAbi } = await importMulticall3(\n          network.id,\n          network.preset\n        );\n\n        const multicallInterface = new ethers.utils.Interface(multiCallAbi);\n        const pythInterface = new ethers.utils.Interface([\n          'function getLatestPrice(bytes32 priceId, uint256 stalenessTolerance) external view returns (int256)',\n        ]);\n\n        const pythFeedIds = (await getPythFeedIds(network)) as string[];\n\n        const { address } = await importPythERC7412Wrapper(network?.id, network?.preset);\n\n        const txs = [\n          ...pythFeedIds.map((priceId) => ({\n            target: address,\n            callData: pythInterface.encodeFunctionData('getLatestPrice', [\n              priceId,\n              stalenessTolerance,\n            ]),\n            value: 0,\n            requireSuccess: false,\n          })),\n        ];\n\n        const getPricesTx = multicallInterface.encodeFunctionData('aggregate3Value', [txs]);\n\n        const result = await provider?.call({\n          data: getPricesTx,\n          to: multicallAddress,\n        });\n\n        const decodedMultiCall: { success: boolean }[] = multicallInterface.decodeFunctionResult(\n          'aggregate3Value',\n          result || ''\n        )[0];\n\n        const outdatedPriceIds: string[] = [];\n\n        decodedMultiCall.forEach(({ success }, i) => {\n          if (!success) {\n            outdatedPriceIds.push(pythFeedIds[i]);\n          }\n        });\n\n        if (outdatedPriceIds.length) {\n          return {\n            ...(await getPriceUpdates(outdatedPriceIds, stalenessTolerance, network)),\n            from: activeWallet?.address,\n          };\n        }\n\n        return null;\n      } catch (error) {\n        return null;\n      }\n    },\n    refetchInterval: 60000,\n  });\n};\n","import { constants, utils, Contract } from 'ethers';\nimport { useQuery } from '@tanstack/react-query';\nimport { z } from 'zod';\nimport { ZodBigNumber } from '@snx-v3/zod';\nimport { wei } from '@synthetixio/wei';\nimport { useMulticall3 } from '@snx-v3/useMulticall3';\nimport { Network, useNetwork } from '@snx-v3/useBlockchain';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\n\nconst CollateralConfigurationSchema = z.object({\n  depositingEnabled: z.boolean(),\n  issuanceRatioD18: ZodBigNumber.transform((x) => wei(x)),\n  liquidationRatioD18: ZodBigNumber.transform((x) => wei(x)),\n  liquidationRewardD18: ZodBigNumber.transform((x) => wei(x)),\n  oracleNodeId: z.string(),\n  tokenAddress: z.string().startsWith('0x'), // As of current version in zod this will be a string: https://github.com/colinhacks/zod/issues/1747\n  minDelegationD18: ZodBigNumber.transform((x) => wei(x)),\n});\n\nconst CollateralTypeSchema = CollateralConfigurationSchema.extend({\n  symbol: z.string(),\n  displaySymbol: z.string(),\n  name: z.string(),\n  decimals: z.string(),\n});\n\nexport type CollateralType = z.infer<typeof CollateralTypeSchema>;\n\nconst SymbolSchema = z.string();\n\nconst ERC20Interface = new utils.Interface([\n  'function symbol() view returns (string)',\n  'function name() view returns (string)',\n  'function decimals() view returns (uint8)',\n]);\n\nasync function loadSymbols({\n  Multicall3,\n  tokenConfigs,\n}: {\n  Multicall3: Contract;\n  tokenConfigs: z.infer<typeof CollateralConfigurationSchema>[];\n}) {\n  const calls = tokenConfigs.map((tokenConfig) => ({\n    target: tokenConfig.tokenAddress,\n    callData: ERC20Interface.encodeFunctionData('symbol'),\n  }));\n\n  const multicallResult = await Multicall3.callStatic.aggregate(calls);\n\n  return multicallResult.returnData.map((bytes: string) =>\n    SymbolSchema.parse(ERC20Interface.decodeFunctionResult('symbol', bytes)[0])\n  );\n}\n\nasync function loadName({\n  Multicall3,\n  tokenConfigs,\n}: {\n  Multicall3: Contract;\n  tokenConfigs: z.infer<typeof CollateralConfigurationSchema>[];\n}) {\n  const calls = tokenConfigs.map((tokenConfig) => ({\n    target: tokenConfig.tokenAddress,\n    callData: ERC20Interface.encodeFunctionData('name'),\n  }));\n\n  const multicallResult = await Multicall3.callStatic.aggregate(calls);\n\n  return multicallResult.returnData.map((bytes: string) =>\n    SymbolSchema.parse(ERC20Interface.decodeFunctionResult('name', bytes)[0])\n  );\n}\n\nasync function loadDecimals({\n  Multicall3,\n  tokenConfigs,\n}: {\n  Multicall3: Contract;\n  tokenConfigs: z.infer<typeof CollateralConfigurationSchema>[];\n}) {\n  const calls = tokenConfigs.map((tokenConfig) => ({\n    target: tokenConfig.tokenAddress,\n    callData: ERC20Interface.encodeFunctionData('decimals'),\n  }));\n\n  const multicallResult = await Multicall3.callStatic.aggregate(calls);\n\n  return multicallResult.returnData.map(\n    (bytes: string) => ERC20Interface.decodeFunctionResult('decimals', bytes)[0]\n  );\n}\n\nasync function loadCollateralTypes({\n  CoreProxy,\n  Multicall3,\n}: {\n  CoreProxy: Contract;\n  Multicall3: Contract;\n}): Promise<CollateralType[]> {\n  const hideDisabled = true;\n  const tokenConfigsRaw: CollateralType[] =\n    await CoreProxy.getCollateralConfigurations(hideDisabled);\n\n  const tokenConfigs = tokenConfigsRaw\n    .map((x) => CollateralConfigurationSchema.parse({ ...x }))\n    .filter(({ depositingEnabled }) => depositingEnabled); // sometimes we get back disabled ones, even though we ask for only enabled ones\n\n  const symbols = await loadSymbols({ Multicall3, tokenConfigs });\n\n  const names = await loadName({ Multicall3, tokenConfigs });\n\n  const decimals = await loadDecimals({ Multicall3, tokenConfigs });\n\n  return tokenConfigs.map((config, i) => ({\n    depositingEnabled: config.depositingEnabled,\n    issuanceRatioD18: config.issuanceRatioD18,\n    liquidationRatioD18: config.liquidationRatioD18,\n    liquidationRewardD18: config.liquidationRewardD18,\n    minDelegationD18: config.minDelegationD18,\n    oracleNodeId: config.oracleNodeId,\n    tokenAddress: config.tokenAddress,\n    symbol: symbols[i],\n    displaySymbol: symbols[i] === 'WETH' ? 'ETH' : symbols[i],\n    name: names[i],\n    decimals: decimals[i].toString(),\n  }));\n}\n\nexport function useCollateralTypes(includeDelegationOff = false, customNetwork?: Network) {\n  const { network } = useNetwork();\n  const { data: CoreProxy } = useCoreProxy(customNetwork);\n  const { data: Multicall3 } = useMulticall3(customNetwork);\n\n  const targetNetwork = customNetwork || network;\n\n  return useQuery({\n    queryKey: [\n      `${targetNetwork?.id}-${targetNetwork?.preset}`,\n      'CollateralTypes',\n      { includeDelegationOff },\n    ],\n    queryFn: async () => {\n      if (!CoreProxy || !Multicall3)\n        throw Error('useCollateralTypes should not be enabled when contracts missing');\n\n      const collateralTypes = (await loadCollateralTypes({ CoreProxy, Multicall3 }))\n        .map((collateralType) => {\n          const isBase = isBaseAndromeda(targetNetwork?.id, targetNetwork?.preset);\n          if (isBase && collateralType.symbol === 'sUSDC') {\n            return {\n              ...collateralType,\n              symbol: 'USDC',\n              displaySymbol: 'USDC',\n              name: 'USD Coin',\n            };\n          }\n          return {\n            ...collateralType,\n            symbol: collateralType.symbol,\n            displaySymbol: collateralType.symbol,\n          };\n        })\n        .filter((collateralType) => collateralType.symbol !== 'snxUSD');\n\n      if (includeDelegationOff) {\n        return collateralTypes;\n      }\n\n      // By default we only return collateral types that have minDelegationD18 < MaxUint256\n      // When minDelegationD18 === MaxUint256, delegation is effectively disabled\n      return collateralTypes.filter((collateralType) =>\n        collateralType.minDelegationD18.lt(constants.MaxUint256)\n      ) as CollateralType[];\n    },\n    // one hour in ms\n    staleTime: 60 * 60 * 1000,\n    placeholderData: [],\n    enabled: Boolean(targetNetwork && CoreProxy && Multicall3),\n  });\n}\n\nexport function useCollateralType(collateralSymbol?: string) {\n  const { data: collateralTypes, isFetching: isCollateralTypesFetching } = useCollateralTypes();\n\n  function getCollateralType(collateralSymbol?: string) {\n    if (!collateralTypes || !collateralTypes?.length) {\n      return;\n    }\n\n    if (!collateralSymbol) {\n      return collateralTypes[0];\n    }\n\n    return collateralTypes?.find(\n      (collateral) => `${collateral.symbol}`.toLowerCase() === `${collateralSymbol}`.toLowerCase()\n    );\n  }\n\n  return {\n    isFetching: isCollateralTypesFetching,\n    data: getCollateralType(collateralSymbol),\n  };\n}\n","import { Contract } from '@ethersproject/contracts';\nimport { useQuery } from '@tanstack/react-query';\nimport {\n  Network,\n  useNetwork,\n  useProvider,\n  useProviderForChain,\n  useSigner,\n} from '@snx-v3/useBlockchain';\nimport { importCoreProxy } from '@snx-v3/contracts';\n\nexport function useCoreProxy(customNetwork?: Network | null) {\n  const providerForChain = useProviderForChain(customNetwork);\n  const { network } = useNetwork();\n  const provider = useProvider();\n  const signer = useSigner();\n  const targetNetwork = customNetwork || network;\n\n  const withSigner = Boolean(signer);\n\n  return useQuery({\n    queryKey: [`${targetNetwork?.id}-${targetNetwork?.preset}`, 'CoreProxy', { withSigner }],\n    queryFn: async function () {\n      if (providerForChain && customNetwork) {\n        const { address, abi } = await importCoreProxy(customNetwork.id, customNetwork.preset);\n        return new Contract(address, abi, providerForChain);\n      }\n\n      const signerOrProvider = signer || provider;\n      if (!signerOrProvider || !network) throw new Error('Should be disabled CP');\n\n      const { address, abi } = await importCoreProxy(network?.id, network?.preset);\n      return new Contract(address, abi, signerOrProvider);\n    },\n    enabled: Boolean(signer || provider || providerForChain),\n    staleTime: Infinity,\n  });\n}\n","import { useQuery } from '@tanstack/react-query';\nimport { useWallet, useNetwork, useProvider } from '@snx-v3/useBlockchain';\nimport { ZodBigNumber } from '@snx-v3/zod';\nimport { wei } from '@synthetixio/wei';\n\nconst BalanceSchema = ZodBigNumber.transform((x) => wei(x));\n\nexport function useEthBalance(networkId?: number) {\n  const { activeWallet } = useWallet();\n  const connectedProvider = useProvider();\n  const { network } = useNetwork();\n\n  return useQuery({\n    queryKey: [\n      `${network?.id}-${network?.preset}`,\n      'EthBalance',\n      { accountAddress: activeWallet?.address },\n    ],\n    queryFn: async () => {\n      if (!activeWallet || !connectedProvider) throw Error('useEthBalance should not be enabled');\n      return BalanceSchema.parse(await connectedProvider.getBalance(activeWallet.address));\n    },\n    enabled: Boolean((networkId ?? network?.id) && activeWallet?.address),\n  });\n}\n","import type { GasPrices } from '@snx-v3/useGasPrice';\nimport type { BigNumber } from '@ethersproject/bignumber';\nimport { wei } from '@synthetixio/wei';\nimport { GWEI_DECIMALS, GAS_LIMIT_MULTIPLIER } from '@snx-v3/constants';\n\n// Note it looks like gas limit estimation is coming in higher slightly higher than what gets used according to etherscan\n// Will try without a buffer, if we get user report of out of gas we can increase it again.\nconst GAS_LIMIT_BUFFER = wei(GAS_LIMIT_MULTIPLIER, GWEI_DECIMALS);\n\nfunction addGasLimitBuffer(gasLimit?: BigNumber) {\n  return wei(gasLimit ?? 0, GWEI_DECIMALS)\n    .mul(GAS_LIMIT_BUFFER)\n    .toBN();\n}\n\nexport function formatGasPriceForTransaction({\n  gasPrices,\n  gasSpeed,\n  gasLimit,\n}: {\n  gasPrices: GasPrices;\n  gasSpeed: keyof GasPrices;\n  gasLimit: BigNumber;\n}) {\n  const gasPrice = gasPrices[gasSpeed];\n  if ('baseFeePerGas' in gasPrice) {\n    const { baseFeePerGas: _baseFeePerGas, ...gasPriceToReturn } = gasPrice;\n    return { ...gasPriceToReturn, gasLimit: addGasLimitBuffer(gasLimit) };\n  }\n  return { ...gasPrice, gasLimit: addGasLimitBuffer(gasLimit) };\n}\n","// copied from npm package: moving-averages\n// Only grabbed what we needed and added types\nexport const isNumber = (subject: unknown) =>\n  typeof subject === 'number' &&\n  // is not NaN: `NaN === NaN` => `false`\n  subject === subject;\n\nexport const dma = (data: number[], alpha: number, noHead?: boolean): number[] => {\n  const length = data.length;\n\n  if (alpha > 1) {\n    return Array(length);\n  }\n\n  if (alpha === 1) {\n    return data.slice();\n  }\n\n  const noArrayWeight = !Array.isArray(alpha);\n  const ret = [];\n\n  let datum;\n\n  // period `i`\n  let i = 0;\n\n  // `s` is the value of the DWMA at any time period `i`\n  let s = 0;\n\n  // Handles head\n  for (; i < length; i++) {\n    datum = data[i];\n\n    if (isNumber(datum) && (noArrayWeight || isNumber(datum))) {\n      ret[i] = noHead ? 0 : datum;\n\n      s = datum;\n      i++;\n\n      break;\n    }\n  }\n\n  // Dynamic weights: an array of weights\n  // Ref:\n  // https://en.wikipedia.org/wiki/Moving_average#Exponential_moving_average\n  // with a dynamic alpha\n  if (!noArrayWeight) {\n    for (; i < length; i++) {\n      datum = data[i];\n\n      isNumber(datum) && isNumber(alpha[i])\n        ? (s = ret[i] = alpha[i] * datum + (1 - alpha[i]) * s)\n        : (ret[i] = ret[i - 1]);\n    }\n\n    return ret;\n  }\n\n  const o = 1 - alpha;\n\n  // Fixed alpha\n  for (; i < length; i++) {\n    datum = data[i];\n\n    isNumber(datum) ? (s = ret[i] = alpha * datum + o * s) : (ret[i] = ret[i - 1]);\n  }\n\n  return ret;\n};\n\nexport const ema = (data: number[], size: number) => dma(data, 2 / (size + 1));\n","import { Wei } from '@synthetixio/wei';\n\nexport const rewardsFilterOutliers = (\n  blocksRewards: Wei[][],\n  outlierBlocks: number[],\n  rewardIndex: number\n) =>\n  blocksRewards\n    .filter((_, index) => !outlierBlocks.includes(index))\n    .map((reward) => reward[rewardIndex].toNumber());\n\nexport const getOutlierBlocksToRemove = (blocksRewards: Wei[][], index: number) => {\n  const blocks: number[] = [];\n  blocksRewards\n    .map((reward) => reward[index])\n    .forEach((gweiReward, i) => {\n      if (gweiReward.gt(5)) {\n        blocks.push(i);\n      }\n    });\n  return blocks;\n};\n","/**\n * This module is heavily inspired by https://github.com/rainbow-me/fee-suggestions\n * That library have some hardcoded min and max that doesn't make sense for optimism. See: https://github.com/rainbow-me/fee-suggestions/blob/main/src/index.ts#L165\n *\n * So I changed min max a bit\n *\n * That library is also a bit overkill in how it calculates maxFeePerGas per gas. It's using linear regression and sampling curves.\n * Instead of doing that, this module calculates max by taking  (previous baseFeePerGas * 2) + maxPriorityFeePerGas.\n *\n * The calculation for maxPriorityFeePerGas I kept quite complex since that will affect what the user actually pay..\n * It's calculated based on the Exponential Moving Average (EMA) of the block rewards at the 15th, 30th, and 45th percentiles, after removing the outliers.\n *\n * The other differences is that I also rely on our Wei library.\n *\n */\nimport { ethers } from 'ethers';\nimport { ema } from './math';\nimport { getOutlierBlocksToRemove, rewardsFilterOutliers } from './utils';\nimport { wei, Wei } from '@synthetixio/wei';\nimport { GWEI_DECIMALS } from '@snx-v3/constants';\n\ntype Reward = string[];\ntype GasUsedRatio = number[];\ninterface FeeHistoryResponse {\n  baseFeePerGas: string[];\n  gasUsedRatio: GasUsedRatio;\n  oldestBlock: number;\n  reward: Reward[];\n}\n\nconst defaultForLocalProvider = () => {\n  const baseFeePerGas = wei(1, 9).toBN();\n  const maxFeePerGas = wei(5, 9).toBN();\n  const maxPriorityFeePerGas = wei(1, 9).toBN();\n  return {\n    average: {\n      maxPriorityFeePerGas,\n      maxFeePerGas,\n      baseFeePerGas,\n    },\n    fast: {\n      maxPriorityFeePerGas,\n      maxFeePerGas,\n      baseFeePerGas,\n    },\n    fastest: {\n      maxPriorityFeePerGas,\n      maxFeePerGas,\n      baseFeePerGas,\n    },\n  };\n};\nexport const feeSuggestion = async (\n  provider: ethers.providers.JsonRpcProvider,\n  fromBlock = 'latest'\n) => {\n  // If local or base-goerli, use defaults\n  // Base goerli sometimes doesn't have enough tx we can use to estimate the priority fee, when this happens the tx will get \"tx underprices\"\n  if (provider.network.chainId === 13370 || provider.network.chainId === 84531) {\n    return defaultForLocalProvider();\n  }\n  const feeHistory = await provider\n    .send('eth_feeHistory', [\n      ethers.utils.hexStripZeros(ethers.utils.hexlify(10)),\n      fromBlock,\n      [15, 30, 45],\n    ])\n    .then((feeHistoryResponse: FeeHistoryResponse) => {\n      return {\n        baseFeePerGas: feeHistoryResponse.baseFeePerGas.map((x) => wei(x, GWEI_DECIMALS, true)),\n        reward: feeHistoryResponse.reward.map((x) => x.map((num) => wei(num, GWEI_DECIMALS, true))),\n      };\n    });\n  const blocksRewards = feeHistory.reward;\n  const baseFeePerGas = feeHistory.baseFeePerGas.at(-1);\n\n  if (!blocksRewards.length) throw new Error('Error: block reward was empty');\n  if (!baseFeePerGas) throw new Error('Error: currentBaseFee was empty');\n\n  const outlierBlocks = getOutlierBlocksToRemove(blocksRewards, 0);\n\n  const blocksRewardsPerc15 = rewardsFilterOutliers(blocksRewards, outlierBlocks, 0);\n  const blocksRewardsPerc30 = rewardsFilterOutliers(blocksRewards, outlierBlocks, 1);\n  const blocksRewardsPerc45 = rewardsFilterOutliers(blocksRewards, outlierBlocks, 2);\n\n  const emaPerc15 = ema(blocksRewardsPerc15, blocksRewardsPerc15.length)[\n    blocksRewardsPerc15.length - 1\n  ];\n  const emaPerc30 = ema(blocksRewardsPerc30, blocksRewardsPerc30.length)[\n    blocksRewardsPerc30.length - 1\n  ];\n  const emaPerc45 = ema(blocksRewardsPerc45, blocksRewardsPerc45.length)[\n    blocksRewardsPerc45.length - 1\n  ];\n\n  if (emaPerc15 === undefined || emaPerc30 === undefined || emaPerc45 === undefined) {\n    throw new Error('Error: ema was undefined');\n  }\n\n  const averageMaxPriorityFee = wei(Math.min(emaPerc15, 1), GWEI_DECIMALS);\n  const fastMaxPriorityFee = wei(Math.min(emaPerc30, 2), GWEI_DECIMALS);\n  const fastestMaxPriorityFee = wei(Math.min(emaPerc45, 4), GWEI_DECIMALS);\n\n  const baseFeeToMax = (base: Wei, prio: Wei) => base.mul(wei(2, GWEI_DECIMALS)).add(prio);\n  return {\n    average: {\n      maxPriorityFeePerGas: averageMaxPriorityFee.toBN(),\n      maxFeePerGas: baseFeeToMax(baseFeePerGas, averageMaxPriorityFee).toBN(),\n      baseFeePerGas: baseFeePerGas.toBN(),\n    },\n    fast: {\n      maxPriorityFeePerGas: fastMaxPriorityFee.toBN(),\n      maxFeePerGas: baseFeeToMax(baseFeePerGas, fastMaxPriorityFee).toBN(),\n      baseFeePerGas: baseFeePerGas.toBN(),\n    },\n    fastest: {\n      maxPriorityFeePerGas: fastestMaxPriorityFee.toBN(),\n      maxFeePerGas: baseFeeToMax(baseFeePerGas, fastestMaxPriorityFee).toBN(),\n      baseFeePerGas: baseFeePerGas.toBN(),\n    },\n  };\n};\n","import { useQuery } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\nimport { useNetwork, useProvider } from '@snx-v3/useBlockchain';\nimport { feeSuggestion } from '@snx-v3/feeSuggestion';\n\nconst getGasPriceFromProvider = async (provider: ethers.providers.JsonRpcProvider) => {\n  try {\n    const gasPrice = await provider.getGasPrice();\n    return {\n      fastest: { gasPrice },\n      fast: { gasPrice },\n      average: { gasPrice },\n    };\n  } catch (e) {\n    throw new Error('Could not retrieve gas price from provider');\n  }\n};\n\nexport const getGasPrice = async ({ provider }: { provider: ethers.providers.JsonRpcProvider }) => {\n  try {\n    const block = await provider.getBlock('latest');\n    if (block.baseFeePerGas) {\n      return feeSuggestion(provider);\n    }\n    // When missing baseFeePerGas we get the Gas Price through the provider\n    return getGasPriceFromProvider(provider);\n  } catch (e) {\n    throw new Error(`Could not fetch and compute network fee. ${e}`);\n  }\n};\n\nexport type GasPrices = Awaited<ReturnType<typeof getGasPrice>>;\n\nexport const useGasPrice = () => {\n  const { network } = useNetwork();\n  const provider = useProvider();\n\n  return useQuery({\n    enabled: Boolean(provider),\n    queryKey: [`${network?.id}-${network?.preset}`, 'GasPrice'],\n    queryFn: () => {\n      if (!provider) throw new Error('useGasPrice should not be enabled');\n      return getGasPrice({ provider });\n    },\n  });\n};\n","import React, {\n  createContext,\n  useState,\n  PropsWithChildren,\n  Dispatch,\n  SetStateAction,\n  useContext,\n} from 'react';\n\nexport type GasSpeed = 'average' | 'fast' | 'fastest';\n\nexport const GasSpeedContext = createContext<{\n  gasSpeed: GasSpeed;\n  setGasSpeed: Dispatch<SetStateAction<GasSpeed>>;\n}>({\n  gasSpeed: 'average',\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  setGasSpeed: () => {},\n});\n\nexport const GasSpeedProvider: React.FC<PropsWithChildren> = ({ children }) => {\n  const [gasSpeed, setGasSpeed] = useState<GasSpeed>('average');\n  return (\n    <GasSpeedContext.Provider value={{ gasSpeed, setGasSpeed }}>\n      {children}\n    </GasSpeedContext.Provider>\n  );\n};\n\nexport const useGasSpeed = () => {\n  return useContext(GasSpeedContext);\n};\n","import { useQuery } from '@tanstack/react-query';\nimport { Network, useNetwork } from '@snx-v3/useBlockchain';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { useCollateralTypes } from '@snx-v3/useCollateralTypes';\nimport { useSpotMarketProxy } from '@snx-v3/useSpotMarketProxy';\nimport { USDC_BASE_MARKET, isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\n\nexport function useGetUSDTokens(customNetwork?: Network) {\n  const { network } = useNetwork();\n\n  const targetNetwork = customNetwork || network;\n\n  const isBase = isBaseAndromeda(targetNetwork?.id, targetNetwork?.preset);\n  const { data: collateralTypes } = useCollateralTypes(false, customNetwork);\n  const { data: CoreProxy } = useCoreProxy(customNetwork);\n  const { data: SpotMarket } = useSpotMarketProxy(customNetwork);\n\n  return useQuery({\n    queryKey: [`${targetNetwork?.id}-${targetNetwork?.preset}`, 'GetUSDTokens'],\n    queryFn: async () => {\n      if (!targetNetwork?.id || !CoreProxy) {\n        throw 'useGetUSDTokens queries are not ready';\n      }\n      const USDProxy = await CoreProxy.getUsdToken();\n      const USDC: string = isBase\n        ? (await (SpotMarket as any).getWrapper(USDC_BASE_MARKET)).wrapCollateralType\n        : undefined;\n\n      return {\n        snxUSD: USDProxy,\n        sUSD: collateralTypes?.find((type) =>\n          isBase ? type.symbol.toLowerCase() === 'usdc' : type.symbol.toLowerCase() === 'susdc'\n        )?.tokenAddress,\n        USDC,\n      };\n    },\n    enabled: Boolean(targetNetwork?.id && CoreProxy && collateralTypes?.length),\n  });\n}\n","import { Contract } from '@ethersproject/contracts';\nimport { useQuery } from '@tanstack/react-query';\nimport {\n  Network,\n  useNetwork,\n  useProvider,\n  useProviderForChain,\n  useSigner,\n} from '@snx-v3/useBlockchain';\nimport { importMulticall3 } from '@snx-v3/contracts';\n\nexport function useMulticall3(customNetwork?: Network) {\n  const { network } = useNetwork();\n  const providerForChain = useProviderForChain(customNetwork);\n  const provider = useProvider();\n  const signer = useSigner();\n  const signerOrProvider = signer || provider || providerForChain;\n  const withSigner = Boolean(signer);\n\n  const targetNetwork = customNetwork || network;\n\n  return useQuery({\n    queryKey: [`${targetNetwork?.id}-${targetNetwork?.preset}`, 'Multicall3', { withSigner }],\n    queryFn: async function () {\n      if (providerForChain && customNetwork) {\n        const { address, abi } = await importMulticall3(customNetwork.id, customNetwork.preset);\n        return new Contract(address, abi, providerForChain);\n      }\n\n      if (!network || !signerOrProvider) throw new Error('Network or signer not available');\n      const { address, abi } = await importMulticall3(network.id, network.preset);\n      return new Contract(address, abi, signerOrProvider);\n    },\n    enabled: Boolean(signerOrProvider),\n    staleTime: Infinity,\n  });\n}\n","import { useParams as useParamsRouter, useSearchParams } from 'react-router-dom';\nimport { useMemo } from 'react';\n\nexport function searchParamsToObject(searchParams: URLSearchParams) {\n  return Object.fromEntries(Array.from(searchParams));\n}\n\nexport function sortObject(params: Record<string, string>): Record<string, string> {\n  return Object.fromEntries(Object.entries(params).sort(([a], [b]) => a.localeCompare(b)));\n}\n\nexport function cleanObject(params: Record<string, string | undefined>): Record<string, string> {\n  const cleaned = Object.entries(params).filter(([, value]) => value !== undefined) as [\n    [string, string],\n  ];\n  return Object.fromEntries(cleaned);\n}\n\nexport const useParams = (): Record<string, string | undefined> => {\n  const pathParams = useParamsRouter();\n  const [queryParams] = useSearchParams();\n\n  return useMemo(\n    () => sortObject({ ...cleanObject(pathParams), ...searchParamsToObject(queryParams) }),\n    [pathParams, queryParams]\n  );\n};\n","import { useQuery } from '@tanstack/react-query';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { NETWORKS, Network, useNetwork } from '@snx-v3/useBlockchain';\nimport { ZodBigNumber } from '@snx-v3/zod';\nimport { z } from 'zod';\nimport { ethers } from 'ethers';\nimport { importCoreProxy } from '@snx-v3/contracts';\n\nexport const PoolIdSchema = ZodBigNumber.transform((x) => x.toString());\n\nexport const PoolSchema = z.object({\n  id: PoolIdSchema,\n  name: z.string().default('Unnamed Pool'),\n  isPreferred: z.boolean(),\n});\n\nexport type PoolType = z.infer<typeof PoolSchema>;\n\nexport const PoolsSchema = z.array(PoolSchema);\nexport type PoolsType = z.infer<typeof PoolsSchema>;\n\nexport function usePools(customNetwork?: Network) {\n  const { network } = useNetwork();\n  const targetNetwork = customNetwork || network;\n  const { data: CoreProxy } = useCoreProxy(targetNetwork);\n\n  return useQuery({\n    enabled: Boolean(targetNetwork),\n    queryKey: [`${targetNetwork?.id}-${targetNetwork?.preset}`, CoreProxy?.address, 'Pools'],\n    queryFn: async () => {\n      if (!CoreProxy) {\n        throw 'usePools is missing required data';\n      }\n\n      const [prefferedPoolId, approvedPoolIds] = await Promise.all([\n        CoreProxy.callStatic.getPreferredPool(),\n        CoreProxy.callStatic.getApprovedPools(),\n      ]);\n\n      const incompletePools = [\n        {\n          id: prefferedPoolId,\n          isPreferred: true,\n        },\n      ].concat(\n        approvedPoolIds.map((id: ethers.BigNumber) => ({\n          id: id,\n          isPreferred: false,\n        }))\n      );\n\n      const poolNames = await Promise.all(\n        incompletePools.map(async ({ id }) => await CoreProxy.getPoolName(id))\n      );\n\n      const poolsRaw = incompletePools.map(({ id, isPreferred }, i) => ({\n        id,\n        isPreferred,\n        name: poolNames[i],\n      }));\n\n      return PoolsSchema.parse(poolsRaw);\n    },\n  });\n}\n\nexport function usePool(poolId?: string, customNetwork?: Network) {\n  const { isFetching, error, data } = usePools(customNetwork);\n\n  return {\n    isLoading: isFetching,\n    error,\n    data: data?.find((item) => item.id === poolId),\n  };\n}\n\nexport function usePreferredPool(customNetwork?: Network) {\n  const { isLoading, error, data } = usePools(customNetwork);\n\n  return {\n    isLoading,\n    error,\n    data: data?.find((item) => item.isPreferred),\n  };\n}\n\nconst supportedNetworks = [1, 8453, 42161];\nconst supportedTestNetworks = [1, 11155111, 8453, 84532, 421614, 42161];\n\nexport function useGetAllPools(withTestnets: boolean) {\n  const networks = NETWORKS.filter((n) =>\n    withTestnets ? supportedTestNetworks.includes(n.id) : supportedNetworks.includes(n.id)\n  ).map((n) => ({\n    id: n.id,\n    token: n.token,\n    label: n.label,\n    rpcUrl: n.rpcUrl(),\n    preset: n.preset,\n  }));\n\n  return useQuery({\n    queryKey: ['AllPools'],\n    queryFn: async () => {\n      const allCoreProxies = (await Promise.all(\n        networks.map((network) => importCoreProxy(network.id, network.preset))\n      )) as any[];\n\n      const allCoreProxiesConnected = allCoreProxies.map(\n        (proxies, index) =>\n          new ethers.Contract(\n            proxies.address,\n            proxies.abi,\n            new ethers.providers.JsonRpcProvider(networks[index].rpcUrl)\n          )\n      );\n\n      const prefferedPools = await Promise.all(\n        allCoreProxiesConnected.map((contract) => {\n          return contract.callStatic.getPreferredPool();\n        })\n      );\n      // TODO @dev reimplement when used\n      // const approvedPoolIds: ethers.BigNumber[][] = await Promise.all(\n      //   allCoreProxiesConnected.map((contract) => {\n      //     return contract.callStatic.getApprovedPools();\n      //   })\n      // );\n\n      const incompletePools = prefferedPools.map((prefferedPool, index) => ({\n        id: prefferedPool,\n        isPreferred: true,\n        network: networks[index].label,\n      }));\n\n      const poolNames = await Promise.all(\n        incompletePools.map(\n          async ({ id }, index) => await allCoreProxiesConnected[index].getPoolName(id)\n        )\n      );\n\n      const poolsRaw = incompletePools.map(({ id, isPreferred, network }, i) => ({\n        id,\n        isPreferred,\n        name: poolNames[i] as string,\n        network,\n      }));\n\n      return poolsRaw;\n    },\n  });\n}\n","import { getSubgraphUrl } from '@snx-v3/constants';\nimport { NETWORKS } from '@snx-v3/useBlockchain';\nimport { compactInteger } from 'humanize-plus';\nimport { fetchApr } from '@snx-v3/useApr';\nimport { useQuery } from '@tanstack/react-query';\n\nexport function usePoolsList() {\n  return useQuery({\n    queryKey: ['poolsList'],\n    queryFn: async () => {\n      try {\n        const [pools, aprs, toros] = await Promise.all([\n          fetchPoolsList(),\n          fetchAprs(),\n          fetchTorosPool(),\n        ]);\n\n        const synthetixPools = pools.map((p, i) => ({\n          ...p,\n          apr: aprs[i],\n        }));\n\n        return { synthetixPools, toros };\n      } catch (error) {\n        throw error;\n      }\n    },\n    staleTime: 60000,\n  });\n}\n\nexport function usePool(networkId: number, poolId: string) {\n  const { data, isLoading } = usePoolsList();\n\n  return {\n    data: data?.synthetixPools.find(\n      (p) => p.network.id === networkId && p.poolInfo[0].pool.id === poolId\n    ),\n    isLoading,\n  };\n}\n\n// TODO: Add 1 and 10 to support Mainnet and Optimism\nconst supportedNetworks = [8453, 42161];\n\nasync function fetchTorosPool() {\n  return fetch('https://api-v2.dhedge.org/graphql', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      query: `\n          query GetFund($address: String!) {\n              fund(address: $address) {\n                totalValue\n                apy {\n                  monthly\n                  weekly\n                }\n              }\n            }`,\n      variables: { address: '0xc1e02884af4a283ca25ab63c45360d220d69da52' },\n    }),\n  })\n    .then((response) => response.json())\n    .then(({ data }) => {\n      return {\n        tvl: compactInteger(data.fund.totalValue / 1e18, 1),\n        apy: data.fund.apy.monthly,\n      };\n    });\n}\n\nexport const networksOffline = NETWORKS.filter(\n  (n) => supportedNetworks.includes(n.id) && n.isSupported\n).map((n) => n);\n\nasync function fetchAprs() {\n  return Promise.all(networksOffline.map((network) => fetchApr(network.id)));\n}\n\nasync function fetchPoolsList() {\n  const urls = networksOffline.map((network) => getSubgraphUrl(network.name));\n\n  // Fetch all the pools from the subgraphs\n  const responses = await Promise.all(\n    urls.map((url) =>\n      fetch(url, { method: 'POST', body: JSON.stringify({ query: PoolsListData }) }).then((res) =>\n        res.json()\n      )\n    )\n  );\n\n  return responses.map((response, i) => ({\n    network: networksOffline[i],\n    poolInfo: response.data.vaults as PoolInfo[],\n  }));\n}\n\nconst gql = (data: TemplateStringsArray) => data[0];\n\nconst PoolsListData = gql`\n  query PoolsListData {\n    vaults(where: { pool: \"1\" }) {\n      collateral_type {\n        id\n        oracle_node_id\n        name\n        decimals\n        symbol\n        total_amount_deposited\n      }\n      pool {\n        name\n        id\n        registered_distributors(where: { isActive: true }) {\n          id\n          total_distributed\n          rewards_distributions(orderBy: created_at, orderDirection: desc) {\n            amount\n            duration\n            created_at\n          }\n        }\n        total_weight\n        configurations {\n          id\n          weight\n          max_debt_share_value\n          market {\n            id\n            address\n            usd_deposited\n            usd_withdrawn\n            net_issuance\n            reported_debt\n            updated_at\n            market_snapshots_by_week(first: 2, orderBy: updated_at, orderDirection: desc) {\n              id\n              usd_deposited\n              usd_withdrawn\n              net_issuance\n              reported_debt\n              updated_at\n              updates_in_period\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n\ninterface PoolInfo {\n  collateral_type: {\n    id: string;\n    oracle_node_id: string;\n    name: string;\n    decimals: number;\n    symbol: string;\n    total_amount_deposited: string;\n  };\n  pool: {\n    name: string;\n    id: string;\n    registered_distributors: {\n      id: string;\n      total_distributed: string;\n      rewards_distributions: {\n        amount: string;\n        duration: string;\n        created_at: string;\n      }[];\n    }[];\n    total_weight: string;\n    configurations: {\n      id: string;\n      weight: string;\n      max_debt_share_value: string;\n      market: {\n        id: string;\n        address: string;\n        usd_deposited: string;\n        usd_withdrawn: string;\n        net_issuance: string;\n        reported_debt: string;\n        updated_at: string;\n        market_snapshots_by_week: {\n          id: string;\n          usd_deposited: string;\n          usd_withdrawn: string;\n          net_issuance: string;\n          reported_debt: string;\n          updated_at: string;\n          updates_in_period: string;\n        }[];\n      };\n    }[];\n  };\n}\n","export async function importSpotMarketProxy(chainId, preset) {\n  if (!preset) {\n    throw new Error(`Missing preset`);\n  }\n  const deployment = `${Number(chainId).toFixed(0)}-${preset}`;\n  switch (deployment) {\n    //    case '1-main': {\n    //      const [{default: meta}, {default: abi}] = await Promise.all([\n    //        import('@synthetixio/v3-contracts/1-main/meta.json'),\n    //        import('@synthetixio/v3-contracts/1-main/SpotMarketProxy.readable.json'),\n    //      ]);\n    //      return { address: meta.contracts.SpotMarketProxy, abi };\n    //    }\n    //    case '11155111-main': {\n    //      const [{default: meta}, {default: abi}] = await Promise.all([\n    //        import('@synthetixio/v3-contracts/11155111-main/meta.json'),\n    //        import('@synthetixio/v3-contracts/11155111-main/SpotMarketProxy.readable.json'),\n    //      ]);\n    //      return { address: meta.contracts.SpotMarketProxy, abi };\n    //    }\n    case '10-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/10-main/meta.json'),\n        import('@synthetixio/v3-contracts/10-main/SpotMarketProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.SpotMarketProxy, abi };\n    }\n    case '8453-andromeda': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/8453-andromeda/meta.json'),\n        import('@synthetixio/v3-contracts/8453-andromeda/SpotMarketProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.SpotMarketProxy, abi };\n    }\n    case '84532-andromeda': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/84532-andromeda/meta.json'),\n        import('@synthetixio/v3-contracts/84532-andromeda/SpotMarketProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.SpotMarketProxy, abi };\n    }\n    case '42161-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-main/meta.json'),\n        import('@synthetixio/v3-contracts/42161-main/SpotMarketProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.SpotMarketProxy, abi };\n    }\n    case '421614-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/421614-main/meta.json'),\n        import('@synthetixio/v3-contracts/421614-main/SpotMarketProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.SpotMarketProxy, abi };\n    }\n    case '42161-arbthetix': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-arbthetix/meta.json'),\n        import('@synthetixio/v3-contracts/42161-arbthetix/SpotMarketProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.SpotMarketProxy, abi };\n    }\n    default: {\n      throw new Error(`Unsupported deployment ${deployment} for SpotMarketProxy`);\n    }\n  }\n}\n","import { Contract } from '@ethersproject/contracts';\nimport { useQuery } from '@tanstack/react-query';\nimport {\n  Network,\n  useNetwork,\n  useProvider,\n  useProviderForChain,\n  useSigner,\n} from '@snx-v3/useBlockchain';\nimport { importSpotMarketProxy } from '@snx-v3/contracts';\n\nexport function useSpotMarketProxy(customNetwork?: Network) {\n  const { network } = useNetwork();\n  const provider = useProvider();\n  const signer = useSigner();\n  const providerForChain = useProviderForChain(customNetwork);\n  const signerOrProvider = signer || provider;\n\n  const targetNetwork = customNetwork || network;\n\n  const withSigner = Boolean(signer);\n\n  return useQuery({\n    queryKey: [`${targetNetwork?.id}-${targetNetwork?.preset}`, 'SpotMarketProxy', { withSigner }],\n    queryFn: async function () {\n      if (!signerOrProvider || !targetNetwork) throw new Error('Should be disabled');\n\n      if (providerForChain && customNetwork) {\n        const { address, abi } = await importSpotMarketProxy(\n          targetNetwork.id,\n          targetNetwork.preset\n        );\n        return new Contract(address, abi, providerForChain);\n      }\n\n      const { address, abi } = await importSpotMarketProxy(\n        targetNetwork?.id,\n        targetNetwork?.preset\n      );\n\n      return new Contract(address, abi, signerOrProvider);\n    },\n    enabled: Boolean(signerOrProvider),\n    staleTime: Infinity,\n  });\n}\n","import { assertAddressType } from '@snx-v3/assertAddressType';\nimport { wei } from '@synthetixio/wei';\nimport { useQuery } from '@tanstack/react-query';\nimport { useNetwork, useProvider, useWallet } from '@snx-v3/useBlockchain';\nimport { ethers, providers } from 'ethers';\nimport { ZodBigNumber } from '@snx-v3/zod';\n\nexport const BalanceSchema = ZodBigNumber.transform((x) => wei(x));\n\nexport const abi = [\n  'function balanceOf(address) view returns (uint256)',\n  'function decimals() view returns (uint8)',\n];\n\nexport const useTokenBalance = (address?: string) => {\n  const { activeWallet } = useWallet();\n  const provider = useProvider();\n  const { network } = useNetwork();\n\n  const tokenAddress = assertAddressType(address) ? address : undefined;\n  return useQuery({\n    queryKey: [\n      `${network?.id}-${network?.preset}`,\n      'TokenBalance',\n      { accountAddress: activeWallet?.address },\n      { tokenAddress },\n    ],\n    queryFn: async () => await fetchTokenBalance(address!, activeWallet!.address, provider!),\n    enabled: Boolean(activeWallet?.address && tokenAddress && provider && network?.id),\n    refetchInterval: 15000,\n  });\n};\n\nexport const useTokenBalances = (addresses: string[]) => {\n  const { activeWallet } = useWallet();\n  const provider = useProvider();\n  const { network } = useNetwork();\n\n  return useQuery({\n    queryKey: [\n      `${network?.id}-${network?.preset}`,\n      'TokenBalance',\n      { accountAddress: activeWallet?.address },\n      addresses.toString(),\n    ],\n    queryFn: async () =>\n      await Promise.all(\n        addresses.map((address) => fetchTokenBalance(address, activeWallet!.address, provider!))\n      ),\n    enabled: Boolean(activeWallet?.address && addresses.length && provider && network?.id),\n    refetchInterval: 15000,\n  });\n};\n\nasync function fetchTokenBalance(\n  tokenAddress: string,\n  walletAddress: string,\n  provider: providers.Web3Provider\n) {\n  const contract = new ethers.Contract(tokenAddress, abi, provider);\n  const balance = wei(await contract.balanceOf(walletAddress), await contract.decimals());\n  return balance;\n}\n","export function assertAddressType(tokenAddress?: string): tokenAddress is `0x${string}` {\n  return tokenAddress ? tokenAddress.startsWith('0x') : false;\n}\n","import { Contract } from '@ethersproject/contracts';\nimport { useQuery } from '@tanstack/react-query';\nimport { useNetwork, useProvider, useSigner } from '@snx-v3/useBlockchain';\nimport { importUSDProxy } from '@snx-v3/contracts';\n\nexport function useUSDProxy() {\n  const { network } = useNetwork();\n  const provider = useProvider();\n  const signer = useSigner();\n  const signerOrProvider = signer || provider;\n  const withSigner = Boolean(signer);\n\n  return useQuery({\n    queryKey: [`${network?.id}-${network?.preset}`, 'USDProxy', { withSigner }],\n    queryFn: async function () {\n      if (!signerOrProvider || !network) throw new Error('Should be disabled');\n      const { address, abi } = await importUSDProxy(network.id, network.preset);\n      return new Contract(address, abi, signerOrProvider);\n    },\n    enabled: Boolean(signerOrProvider),\n    staleTime: Infinity,\n  });\n}\n","export async function importUSDProxy(chainId, preset) {\n  if (!preset) {\n    throw new Error(`Missing preset`);\n  }\n  const deployment = `${Number(chainId).toFixed(0)}-${preset}`;\n  switch (deployment) {\n    case '1-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/1-main/meta.json'),\n        import('@synthetixio/v3-contracts/1-main/USDProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.USDProxy, abi };\n    }\n    case '11155111-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/11155111-main/meta.json'),\n        import('@synthetixio/v3-contracts/11155111-main/USDProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.USDProxy, abi };\n    }\n    case '10-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/10-main/meta.json'),\n        import('@synthetixio/v3-contracts/10-main/USDProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.USDProxy, abi };\n    }\n    case '8453-andromeda': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/8453-andromeda/meta.json'),\n        import('@synthetixio/v3-contracts/8453-andromeda/USDProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.USDProxy, abi };\n    }\n    case '84532-andromeda': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/84532-andromeda/meta.json'),\n        import('@synthetixio/v3-contracts/84532-andromeda/USDProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.USDProxy, abi };\n    }\n    case '42161-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-main/meta.json'),\n        import('@synthetixio/v3-contracts/42161-main/USDProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.USDProxy, abi };\n    }\n    case '421614-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/421614-main/meta.json'),\n        import('@synthetixio/v3-contracts/421614-main/USDProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.USDProxy, abi };\n    }\n    case '42161-arbthetix': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-arbthetix/meta.json'),\n        import('@synthetixio/v3-contracts/42161-arbthetix/USDProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.USDProxy, abi };\n    }\n    default: {\n      throw new Error(`Unsupported deployment ${deployment} for USDProxy`);\n    }\n  }\n}\n","export async function importAllErrors(chainId, preset) {\n  if (!preset) {\n    throw new Error(`Missing preset`);\n  }\n  const deployment = `${Number(chainId).toFixed(0)}-${preset}`;\n  switch (deployment) {\n    case '1-main': {\n      const [{ default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/1-main/AllErrors.readable.json'),\n      ]);\n      return { address: undefined, abi };\n    }\n    case '11155111-main': {\n      const [{ default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/11155111-main/AllErrors.readable.json'),\n      ]);\n      return { address: undefined, abi };\n    }\n    case '10-main': {\n      const [{ default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/10-main/AllErrors.readable.json'),\n      ]);\n      return { address: undefined, abi };\n    }\n    case '8453-andromeda': {\n      const [{ default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/8453-andromeda/AllErrors.readable.json'),\n      ]);\n      return { address: undefined, abi };\n    }\n    case '84532-andromeda': {\n      const [{ default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/84532-andromeda/AllErrors.readable.json'),\n      ]);\n      return { address: undefined, abi };\n    }\n    case '42161-main': {\n      const [{ default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-main/AllErrors.readable.json'),\n      ]);\n      return { address: undefined, abi };\n    }\n    case '421614-main': {\n      const [{ default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/421614-main/AllErrors.readable.json'),\n      ]);\n      return { address: undefined, abi };\n    }\n    case '42161-arbthetix': {\n      const [{ default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-arbthetix/AllErrors.readable.json'),\n      ]);\n      return { address: undefined, abi };\n    }\n    default: {\n      throw new Error(`Unsupported deployment ${deployment} for AllErrors`);\n    }\n  }\n}\n","interface CacheItem<T> {\n  timestamp: number;\n  value: T;\n}\n\ninterface Cache<T> {\n  [key: string]: CacheItem<T> | undefined;\n}\n\nconst cache: Cache<unknown> = {};\ntype MaybeString = 'no-cache' | undefined;\n\n/**\n * This function, `withMemoryCache`, takes a function as an argument.\n * The passed function can optionally be given an extra argument to bypass the cache.\n * If the last argument passed to `func` is `true`, the cache will be bypassed.\n * Otherwise, the function will use the cache, if available.\n */\nexport const withMemoryCache = <T extends unknown[], R>(\n  func: (...args: T) => Promise<R>,\n  cacheDuration: number\n) => {\n  return async (...args: [...T, MaybeString]): Promise<R> => {\n    const lastArg = args[args.length - 1];\n    const bypassCache = lastArg === 'no-cache';\n    const funcArgs = (bypassCache ? args.slice(0, -1) : args) as T;\n    const cacheKey = JSON.stringify(funcArgs);\n    const currentTime = Date.now();\n\n    if (!bypassCache) {\n      const cacheItem = cache[cacheKey] as CacheItem<R> | undefined;\n      if (cacheItem && currentTime - cacheItem.timestamp < cacheDuration) {\n        return cacheItem.value;\n      }\n    }\n\n    const result = await func(...funcArgs);\n\n    cache[cacheKey] = {\n      timestamp: currentTime,\n      value: result,\n    };\n\n    return result;\n  };\n};\n","import { Hex } from 'viem';\n\nexport function parseTxError(error: any): Hex | undefined {\n  try {\n    if (error.cause?.data) {\n      return error.cause?.data;\n    }\n    if (error.cause?.cause?.data) {\n      return error.cause?.cause?.data;\n    }\n    if (error.cause?.cause?.cause?.data) {\n      return error.cause?.cause?.cause?.data;\n    }\n    if (error.cause?.cause?.error?.data) {\n      return error.cause?.cause?.error?.data;\n    }\n    if (error.cause?.cause?.cause?.error?.data) {\n      return error.cause?.cause?.cause?.error?.data;\n    }\n    if (error?.error?.error?.data) {\n      return error?.error?.error?.data;\n    }\n  } catch (err) {\n    console.error('exception error parser:', err);\n  }\n}\n","/* eslint-disable no-console */\nimport { BigNumber, ethers, providers } from 'ethers';\nimport { EvmPriceServiceConnection } from '@pythnetwork/pyth-evm-js';\nimport { z } from 'zod';\nimport { ZodBigNumber } from '@snx-v3/zod';\nimport { offchainMainnetEndpoint, offchainTestnetEndpoint } from '@snx-v3/constants';\nimport { deploymentsWithERC7412, Network } from '@snx-v3/useBlockchain';\nimport type { Modify } from '@snx-v3/tsHelpers';\nimport { importCoreProxy, importMulticall3, importAllErrors } from '@snx-v3/contracts';\nimport { withMemoryCache } from './withMemoryCache';\nimport * as viem from 'viem';\nimport { parseTxError } from '../parser';\n\nexport const ERC7412_ABI = [\n  'error OracleDataRequired(address oracleContract, bytes oracleQuery)',\n  'error FeeRequired(uint feeAmount)',\n  'function oracleId() view external returns (bytes32)',\n  'function fulfillOracleQuery(bytes calldata signedOffchainData) payable external',\n];\n\nexport const PYTH_ERRORS = [\n  // Function arguments are invalid (e.g., the arguments lengths mismatch)\n  // Signature: 0xa9cb9e0d\n  'error InvalidArgument()',\n  // Update data is coming from an invalid data source.\n  // Signature: 0xe60dce71\n  'error InvalidUpdateDataSource()',\n  // Update data is invalid (e.g., deserialization error)\n  // Signature: 0xe69ffece\n  'error InvalidUpdateData()',\n  // Insufficient fee is paid to the method.\n  // Signature: 0x025dbdd4\n  'error InsufficientFee()',\n  // There is no fresh update, whereas expected fresh updates.\n  // Signature: 0xde2c57fa\n  'error NoFreshUpdate()',\n  // There is no price feed found within the given range or it does not exists.\n  // Signature: 0x45805f5d\n  'error PriceFeedNotFoundWithinRange()',\n  // Price feed not found or it is not pushed on-chain yet.\n  // Signature: 0x14aebe68\n  'error PriceFeedNotFound()',\n  // Requested price is stale.\n  // Signature: 0x19abf40e\n  'error StalePrice()',\n  // Given message is not a valid Wormhole VAA.\n  // Signature: 0x2acbe915\n  'error InvalidWormholeVaa()',\n  // Governance message is invalid (e.g., deserialization error).\n  // Signature: 0x97363b35\n  'error InvalidGovernanceMessage()',\n  // Governance message is not for this contract.\n  // Signature: 0x63daeb77\n  'error InvalidGovernanceTarget()',\n  // Governance message is coming from an invalid data source.\n  // Signature: 0x360f2d87\n  'error InvalidGovernanceDataSource()',\n  // Governance message is old.\n  // Signature: 0x88d1b847\n  'error OldGovernanceMessage()',\n  // The wormhole address to set in SetWormholeAddress governance is invalid.\n  // Signature: 0x13d3ed82\n  'error InvalidWormholeAddressToSet()',\n];\n\ntype TransactionRequest = ethers.providers.TransactionRequest;\ntype TransactionRequestWithGasLimit = Modify<TransactionRequest, { gasLimit: ethers.BigNumber }>;\n\nconst PRICE_CACHE_LENGTH = 5000;\n\nconst fetchOffchainData = withMemoryCache(\n  async (oracleQuery: string, isTestnet: boolean, logLabel: string) => {\n    const priceService = new EvmPriceServiceConnection(\n      isTestnet ? offchainTestnetEndpoint : offchainMainnetEndpoint\n    );\n\n    const OracleQuerySchema = z.tuple([z.number(), ZodBigNumber, z.array(z.string())]);\n    const decoded = ethers.utils.defaultAbiCoder.decode(\n      ['uint8', 'uint64', 'bytes32[]'],\n      oracleQuery\n    );\n    const [updateType, stalenessTolerance, priceIds] = OracleQuerySchema.parse(decoded);\n    console.log(`[${logLabel}] stale price for priceFeedId: ${priceIds[0]}`);\n    if (updateType !== 1) {\n      throw new Error(`update type ${updateType} not supported`);\n    }\n    const signedOffchainData = await priceService.getPriceFeedsUpdateData(priceIds);\n\n    return ethers.utils.defaultAbiCoder.encode(\n      ['uint8', 'uint64', 'bytes32[]', 'bytes[]'],\n      [updateType, stalenessTolerance, priceIds, signedOffchainData]\n    );\n  },\n  PRICE_CACHE_LENGTH\n);\n\nfunction makeMulticall(\n  calls: TransactionRequest[],\n  senderAddr: string,\n  multicallAddress: string,\n  multiCallAbi: string[]\n): TransactionRequest {\n  const multicallInterface = new ethers.utils.Interface(multiCallAbi);\n\n  const encodedData = multicallInterface.encodeFunctionData('aggregate3Value', [\n    calls.map((call) => ({\n      target: call.to,\n      callData: call.data,\n      value: call.value || ethers.BigNumber.from(0),\n      requireSuccess: true,\n      allowFailure: false,\n    })),\n  ]);\n\n  let totalValue = ethers.BigNumber.from(0);\n  for (const call of calls) {\n    totalValue = totalValue.add(call.value || ethers.BigNumber.from(0));\n  }\n\n  return {\n    from: senderAddr,\n    to: multicallAddress,\n    data: encodedData,\n    value: totalValue,\n  };\n}\n\n// This should be used for networks that doesn't have a multicall setup as a trusted forwarder\n// TODO remove when all networks have a trusted forwarder\nconst makeCoreProxyMulticall = (\n  calls: TransactionRequest[],\n  senderAddr: string,\n  coreProxyAddress: string,\n  coreProxyAbi: string[]\n) => {\n  const CoreProxyInterface = new ethers.utils.Interface(coreProxyAbi);\n  const encodedData = CoreProxyInterface.encodeFunctionData('multicall', [\n    calls.map((call) => call.data),\n  ]);\n\n  let totalValue = ethers.BigNumber.from(0);\n  for (const call of calls) {\n    totalValue = totalValue.add(call.value || ethers.BigNumber.from(0));\n  }\n\n  return {\n    from: senderAddr,\n    to: coreProxyAddress,\n    data: encodedData,\n    value: totalValue,\n  };\n};\n\nconst parseError = async (error: any, provider: providers.JsonRpcProvider, network: Network) => {\n  let errorData = error.data || error.error?.data?.data || error.error?.error?.data;\n  if (!errorData) {\n    try {\n      console.log('Error is missing revert data, trying provider.call, instead of estimate gas..');\n      // Some wallets swallows the revert reason when calling estimate gas,try to get the error by using provider.call\n      // provider.call wont actually revert, instead the error data is just returned\n      const lookedUpError = await provider.call(error.transaction);\n      errorData = lookedUpError;\n    } catch (newError: any) {\n      console.log('provider.call(error.transaction) failed, trying to extract error');\n      console.log('Error data: ', errorData);\n    }\n  }\n\n  if (`${errorData}`.startsWith('0x08c379a0')) {\n    const content = `0x${errorData.substring(10)}`;\n    // reason: string; for standard revert error string\n    const reason = ethers.utils.defaultAbiCoder.decode(['string'], content);\n    console.log(`Reason`, reason);\n    return {\n      name: reason[0],\n      args: [],\n    };\n  }\n\n  try {\n    const AllErrors = await importAllErrors(network.id, network.preset);\n    const AllErrorsInterface = new ethers.utils.Interface([...AllErrors.abi, ...PYTH_ERRORS]);\n    const decodedError = AllErrorsInterface.parseError(errorData);\n    return decodedError;\n    // return ERC7412ErrorSchema.parse(decodedError);\n  } catch (parseError) {\n    console.error(\n      'Error is not a ERC7412 error, re-throwing original error, for better parsing. Parse error reason: ',\n      parseError\n    );\n    // If we cant parse it, throw the original error\n    throw error;\n  }\n};\n\n// simulate w/ wETH contract because it will have eth balance\n// This is useful when we do read/static calls but still need an balance for the price update\n// TODO: this probably need to be network aware, maybe look into a different solution even.\nconst getDefaultFromAddress = (chainName: string) => {\n  switch (chainName) {\n    case 'cannon':\n      return '0x4200000000000000000000000000000000000006'; // TODO, unclear what to put here\n    case 'mainnet':\n      return '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2';\n    case 'sepolia':\n      return '0x7b79995e5f793a07bc00c21412e50ecae098e7f9';\n    case 'arbitrum':\n      return '0x82aF49447D8a07e3bd95BD0d56f35241523fBab1';\n    case 'arbitrum-sepolia':\n      return '0x980B62Da83eFf3D4576C647993b0c1D7faf17c73';\n    case 'optimism-mainnet':\n    case 'base':\n    case 'base-sepolia':\n      return '0x4200000000000000000000000000000000000006';\n\n    default:\n      throw new Error(`Unsupported chain ${chainName}`);\n  }\n};\n\n/**\n * If a tx requires ERC7412 pattern, wrap your tx with this function.\n */\nexport const withERC7412 = async (\n  network: Network,\n  tx: TransactionRequest | TransactionRequest[],\n  logLabel?: string\n): Promise<TransactionRequestWithGasLimit> => {\n  const initialMulticallLength = Array.isArray(tx) ? tx.length : 1;\n  // eslint-disable-next-line prefer-const\n  let multicallCalls = [...[tx].flat()]; // Use let to communicate that we mutate this array\n\n  if (multicallCalls.some((x) => !x.to)) {\n    throw Error(`Make sure all txs have 'to' field set`);\n  }\n  if (multicallCalls.some((x) => !x.from)) {\n    throw Error(`Make sure all txs have 'from' field set`);\n  }\n\n  const from = multicallCalls[0].from as string;\n\n  // Make sure we're always using JSONRpcProvider, the web3 provider coming from the signer might have bugs causing errors to miss revert data\n  const jsonRpcProvider = new ethers.providers.JsonRpcProvider(network?.rpcUrl());\n\n  // If from is set to the default address (wETH) we can assume it's a read rather than a write\n  const isRead = from === getDefaultFromAddress(network.name);\n  const networkHaveERC7412 = deploymentsWithERC7412.includes(`${network.id}-${network.preset}`);\n  const useCoreProxy = !networkHaveERC7412 && !isRead;\n\n  const { address: multicallAddress, abi: multiCallAbi } = useCoreProxy\n    ? await importCoreProxy(network.id, network.preset)\n    : await importMulticall3(network.id, network.preset);\n\n  while (true) {\n    try {\n      if (multicallCalls.length == 1) {\n        const initialCall = multicallCalls[0];\n        // The normal flow would go in here, then if the estimate call fail, we catch the error and handle ERC7412\n        const gasLimit = await jsonRpcProvider.estimateGas(initialCall);\n        console.log(`Estimated gas succeeded, with no price updates`);\n        return { ...initialCall, gasLimit };\n      }\n      // If we're here it means we now added a tx to do .\n      // Some networks doesn't have ERC7412 and a trusted forwarder setup, on write calls we still need to use the coreproxy for those\n      const multicallTxn = useCoreProxy\n        ? makeCoreProxyMulticall(multicallCalls, from, multicallAddress, multiCallAbi)\n        : makeMulticall(multicallCalls, from, multicallAddress, multiCallAbi);\n\n      const gasLimit = await jsonRpcProvider.estimateGas(multicallTxn);\n\n      console.log(\n        `[${logLabel}] Estimated gas succeeded, with ${\n          multicallCalls.length - initialMulticallLength\n        } price updates`\n      );\n\n      return { ...multicallTxn, gasLimit };\n    } catch (error: any) {\n      console.log({ error });\n      const parsedError = await parseError(error, jsonRpcProvider, network);\n\n      if (parsedError.name === 'OracleDataRequired') {\n        const [oracleAddress, oracleQuery] = parsedError.args;\n        const ignoreCache = !isRead;\n        const signedRequiredData = await fetchOffchainData(\n          oracleQuery,\n          network.isTestnet,\n          logLabel || '',\n          ignoreCache ? 'no-cache' : undefined\n        );\n        const newTransactionRequest = {\n          from,\n          to: oracleAddress,\n          data: new ethers.utils.Interface(ERC7412_ABI).encodeFunctionData('fulfillOracleQuery', [\n            signedRequiredData,\n          ]),\n          // If from is set to the default address we can add a value directly, before getting FeeRequired revert.\n          // This will be a static call so no money would be withdrawn either way.\n          value: isRead ? ethers.utils.parseEther('0.1') : BigNumber.from(0),\n        };\n\n        // If we get OracleDataRequired, add an extra transaction request just before the last element\n        multicallCalls.splice(\n          multicallCalls.length - initialMulticallLength,\n          0,\n          newTransactionRequest\n        );\n      } else if (parsedError.name === 'FeeRequired') {\n        const requiredFee = parsedError.args[0];\n\n        const txToUpdate = multicallCalls.find(({ value }) => requiredFee.gt(value || 0)); // The first tx with value less than the required fee, is the one we need to update\n        if (txToUpdate === undefined) {\n          throw Error(\n            `Didn't find any tx with a value less than the required fee ${multicallCalls}`\n          );\n        }\n        txToUpdate.value = requiredFee;\n      } else {\n        const parsedError = parseTxError(error);\n\n        if (parsedError) {\n          const AllErrors = await importAllErrors(network.id, network.preset);\n          try {\n            const errorResult = viem.decodeErrorResult({\n              abi: [...AllErrors.abi, ...PYTH_ERRORS],\n              data: parsedError,\n            });\n            console.log('error: ', errorResult.errorName, errorResult.args);\n          } catch (_error) {}\n        }\n        throw error;\n      }\n    }\n  }\n};\n\n/**\n * This can be used to do reads plus decoding. The return type will be whatever the type of the decode function is. And the arguments passed will have the multicall decoded and price updates removed\n */\nexport async function erc7412Call<T>(\n  network: Network,\n  provider: ethers.providers.Provider,\n  txRequests: TransactionRequest | TransactionRequest[],\n  decode: (x: string[] | string) => T,\n  logLabel?: string\n) {\n  const { address: multicallAddress, abi: multicallAbi } = await importMulticall3(\n    network.id,\n    network.preset\n  );\n\n  const reqs = [txRequests].flat();\n\n  for (const txRequest of reqs) {\n    txRequest.from = getDefaultFromAddress(network.name); // Reads can always use WETH\n  }\n  const newCall = await withERC7412(network, reqs, logLabel);\n\n  const res = await provider.call(newCall);\n\n  if (newCall.to?.toLowerCase() === multicallAddress.toLowerCase()) {\n    // If this was a multicall, decode and remove price updates.\n    const decodedMultiCall: { returnData: string }[] = new ethers.utils.Interface(\n      multicallAbi\n    ).decodeFunctionResult('aggregate3Value', res)[0];\n\n    // Remove the price updates\n    const responseWithoutPriceUpdates = decodedMultiCall.filter(\n      ({ returnData }) => returnData !== '0x' // price updates have 0x as return data\n    );\n\n    return decode(responseWithoutPriceUpdates.map(({ returnData }) => returnData));\n  }\n\n  return decode(res);\n}\n","import { BigNumber } from 'ethers';\nimport { z } from 'zod';\nimport { wei } from '@synthetixio/wei';\n\nexport const ZodBigNumber = z.custom<BigNumber>((val) => BigNumber.isBigNumber(val));\n\nexport const SmallIntSchema = ZodBigNumber.transform((x) => wei(x, 0).toNumber());\nexport const WeiSchema = ZodBigNumber.transform((x) => wei(x));\n","import {\n  ComponentMultiStyleConfig,\n  ComponentStyleConfig,\n  defineStyle,\n  extendTheme,\n} from '@chakra-ui/react';\nimport { mode } from '@chakra-ui/theme-tools';\n\nconst gradients = {\n  'green-cyan': {\n    500: 'linear(to-tr, green.500, cyan.500)',\n    600: 'linear(to-tr, green.600, cyan.600)',\n    700: 'linear(to-tr, green.700, cyan.800)',\n  },\n\n  grey: {\n    900: 'linear(to-tr, grey.900, blackAlpha.900)',\n  },\n  dark: {\n    500: 'linear(to-tr, #171923, #141414)',\n  },\n\n  'pink-purple': {\n    500: 'linear(to-tr, pink.500, purple.500)',\n    600: 'linear(to-tr, pink.600, purple.600)',\n    700: 'linear(to-tr, pink.700, purple.800)',\n  },\n\n  'pink-blue': {\n    500: 'linear(to-tr, pink.500, blue.500)',\n    600: 'linear(to-tr, pink.600, blue.600)',\n    700: 'linear(to-tr, pink.700, blue.800)',\n  },\n  'pink-cyan': {\n    500: 'linear(to-tr, pink.500, cyan.500)',\n    600: 'linear(to-tr, pink.600, cyan.600)',\n    700: 'linear(to-tr, pink.700, cyan.800)',\n  },\n\n  orange: {\n    500: 'linear(to-tr, orange.500, orange.300)',\n    600: 'linear(to-tr, orange.600, orange.400)',\n    700: 'linear(to-tr, orange.700, orange.500)',\n  },\n};\n\n// adapted from https://github.com/chakra-ui/chakra-ui/blob/main/packages/components/theme/src/components/button.ts#L90\nconst variantSolid = defineStyle((props) => {\n  const { colorScheme: c } = props;\n\n  if (c === 'gray') {\n    const bg = mode(`gray.100`, `whiteAlpha.200`)(props);\n\n    return {\n      color: mode(`black`, `whiteAlpha.900`)(props),\n      bg,\n      _hover: {\n        bg: mode(`gray.200`, `whiteAlpha.300`)(props),\n        _disabled: {\n          bg,\n        },\n      },\n      _active: { bg: mode(`gray.300`, `whiteAlpha.400`)(props) },\n    };\n  }\n\n  if (c === 'cyan') {\n    return {\n      bgGradient: gradients['green-cyan'][500],\n      color: 'black',\n      _hover: {\n        bgGradient: gradients['green-cyan'][600],\n        _disabled: {\n          background: gradients['green-cyan'][500],\n        },\n      },\n      _active: {\n        bgGradient: gradients['green-cyan'][700],\n      },\n    };\n  }\n\n  const bg = `${c}.500`;\n  const color = 'white';\n  const hoverBg = `${c}.600`;\n  const activeBg = `${c}.700`;\n  const background = mode(bg, `${c}.600`)(props);\n\n  return {\n    bg: background,\n    color: mode(color, `white`)(props),\n    _hover: {\n      bg: mode(hoverBg, `${c}.500`)(props),\n      _disabled: {\n        bg: background,\n      },\n    },\n    _active: { bg: mode(activeBg, `${c}.400`)(props) },\n  };\n});\n\nconst Button: ComponentStyleConfig = {\n  defaultProps: {\n    colorScheme: 'cyan',\n  },\n  variants: {\n    solid: variantSolid,\n    outline: (props) => {\n      if (props.colorScheme === 'gray') {\n        return {\n          color: 'whiteAlpha.800',\n          borderColor: 'gray.900',\n          _hover: { bg: 'rgba(255, 255, 255, 0.12)' }, // white 0.12 opacity\n          _active: { bg: 'rgba(255, 255, 255, 0.24)' }, //white 0.24 opacity\n        };\n      }\n      return {\n        color: 'cyan.500', // needed for storybook for some reason\n        border: '1px solid', // needed for storybook for some reason\n        borderColor: 'cyan.500', // needed for storybook for some reason\n        _hover: { bg: 'rgb(0, 209, 255, 0.12)' }, // cyan.500 0.12 opacity\n        _active: { bg: 'rgb(0, 209, 255, 0.24)' }, // cyan.500 0.24 opacity\n      };\n    },\n    ghost: {\n      color: 'cyan.500', // needed for storybook for some reason\n      _hover: { bg: 'rgb(0, 209, 255, 0.12)' }, // cyan.500 0.12 opacity\n      _active: { bg: 'rgb(0, 209, 255, 0.24)' }, // cyan.500 0.24 opacity\n    },\n  },\n};\n\nconst Menu: ComponentMultiStyleConfig = {\n  parts: ['button', 'list', 'item'],\n  baseStyle: {\n    button: {\n      color: 'white',\n      span: {\n        display: 'flex',\n        alignItems: 'center',\n        px: 2,\n      },\n      height: '100%',\n    },\n    list: {\n      mt: 2,\n      bgColor: 'navy.900',\n      padding: 0,\n      border: 'none',\n      borderRadius: 'md',\n      py: 0,\n    },\n    item: {\n      bgColor: 'blackAlpha.300',\n      color: 'whiteAlpha.900',\n      p: 3,\n      _hover: {\n        bgColor: 'whiteAlpha.400',\n      },\n      _active: {\n        bgColor: 'navy.900',\n      },\n      _first: {\n        borderTopLeftRadius: 'md',\n        borderTopRightRadius: 'md',\n      },\n      _last: {\n        borderBottomLeftRadius: 'md',\n        borderBottomRightRadius: 'md',\n      },\n      _focus: {\n        bgColor: 'blackAlpha.400',\n      },\n    },\n  },\n};\n\nconst Input: ComponentStyleConfig = {\n  defaultProps: {\n    focusBorderColor: 'cyan.500',\n    errorBorderColor: 'red.500',\n  },\n};\n\nconst Select: ComponentStyleConfig = {\n  defaultProps: {\n    focusBorderColor: 'cyan.500',\n    iconColor: 'cyan.500',\n    errorBorderColor: 'red.500',\n  },\n};\n\nconst NumberInput: ComponentStyleConfig = {\n  defaultProps: {\n    focusBorderColor: 'cyan.500',\n    errorBorderColor: 'red.500',\n  },\n};\n\nconst Textarea: ComponentStyleConfig = {\n  defaultProps: {\n    focusBorderColor: 'cyan.500',\n    colorScheme: 'cyan',\n    errorBorderColor: 'red.500',\n  },\n};\n\nconst Alert: ComponentStyleConfig = {\n  defaultProps: {\n    variant: 'left-accent',\n  },\n  variants: {\n    'left-accent': (props) => {\n      return {\n        container: {\n          bg: `${props.colorScheme}.900`,\n          borderInlineStartColor: `${props.colorScheme}.500`,\n        },\n      };\n    },\n    solid: (props) => {\n      return {\n        icon: { color: 'white' },\n        container: { bg: `${props.colorScheme}.500`, color: 'white' },\n      };\n    },\n  },\n};\n\nconst Skeleton: ComponentStyleConfig = {\n  defaultProps: {\n    startColor: 'gray.900',\n    endColor: 'gray.800',\n  },\n};\n\nconst Checkbox: ComponentStyleConfig = {\n  defaultProps: {\n    colorScheme: 'cyan',\n  },\n  baseStyle: {\n    control: {\n      borderColor: 'cyan.500',\n      _checked: {\n        bg: 'cyan.500',\n        borderColor: 'cyan.500',\n        _hover: {\n          bg: 'cyan.600',\n          borderColor: 'cyan.600',\n        },\n      },\n      _invalid: {\n        borderColor: 'red.500',\n      },\n      _disabled: {\n        _hover: {\n          borderColor: 'transparent',\n        },\n      },\n      _hover: {\n        borderColor: 'cyan.600',\n      },\n    },\n  },\n};\n\nconst Radio: ComponentStyleConfig = {\n  defaultProps: {\n    colorScheme: 'cyan',\n  },\n  baseStyle: {\n    control: {\n      borderColor: 'cyan.500',\n      _checked: {\n        bg: 'cyan.500',\n        borderColor: 'cyan.500',\n        _hover: {\n          bg: 'cyan.600',\n          borderColor: 'cyan.600',\n        },\n      },\n      _invalid: {\n        borderColor: 'red.500',\n      },\n      _disabled: {\n        _hover: {\n          borderColor: 'transparent',\n        },\n      },\n      _hover: {\n        borderColor: 'cyan.600',\n      },\n    },\n  },\n};\n\nconst Badge: ComponentStyleConfig = {\n  defaultProps: {\n    colorScheme: 'cyan',\n  },\n  variants: {\n    subtle: (props) => ({\n      color: `${props.colorScheme}.500`,\n    }),\n    solid: (props) => ({\n      background: `${props.colorScheme}.500`,\n      color: 'black',\n    }),\n    outline: (props) => ({\n      borderColor: `${props.colorScheme}.500`,\n      color: `${props.colorScheme}.500`,\n    }),\n    percent: {\n      color: 'cyan.500',\n      bg: 'whiteAlpha.300',\n      fontFamily: 'heading',\n      py: 1,\n      px: 2,\n      borderRadius: 'base',\n      borderWidth: '1px',\n      borderColor: 'transparent',\n      width: '100%',\n      textAlign: 'center',\n      userSelect: 'none',\n    },\n  },\n};\n\nconst Tag: ComponentStyleConfig = {\n  defaultProps: {\n    colorScheme: 'cyan',\n    variant: 'solid',\n  },\n  variants: {\n    solid: (props) => ({\n      container: {\n        background: `${props.colorScheme}.500`,\n        color: 'black',\n      },\n    }),\n  },\n};\n\nconst Accordion: ComponentStyleConfig = {\n  baseStyle: {\n    container: {\n      borderColor: 'gray.900',\n      borderWidth: '1px',\n      borderRadius: 'base',\n    },\n  },\n};\n\nconst Progress: ComponentStyleConfig = {\n  defaultProps: {\n    colorScheme: 'cyan',\n    variant: 'solid',\n    borderRadius: 'full',\n  },\n  variants: {\n    solid: (props) => ({\n      filledTrack: {\n        background: `${props.colorScheme}.500`,\n        borderRadius: 'full',\n      },\n      track: {\n        borderRadius: 'full',\n      },\n    }),\n  },\n};\n\nconst Tabs: ComponentStyleConfig = {\n  defaultProps: {\n    colorScheme: 'cyan',\n  },\n  variants: {\n    'solid-rounded': (props) => ({\n      tab: {\n        _selected: {\n          background: `${props.colorScheme}.500`,\n          color: 'black',\n        },\n        color: `${props.colorScheme}.500`,\n      },\n    }),\n    'soft-rounded': {\n      tab: {\n        _selected: {\n          background: 'whiteAlpha.300',\n          color: 'cyan.500',\n        },\n        color: 'cyan.500',\n      },\n    },\n  },\n};\n\nconst Tooltip: ComponentStyleConfig = {\n  baseStyle: {\n    textAlign: 'center',\n    bg: 'gray.900',\n    color: 'white.500',\n    '--popper-arrow-bg': 'var(--chakra-colors-gray-900)',\n  },\n};\n\nconst Switch: ComponentStyleConfig = {\n  defaultProps: {\n    colorScheme: 'cyan',\n  },\n  baseStyle: {\n    track: {\n      _checked: {\n        background: 'cyan.500',\n      },\n    },\n  },\n};\n\nconst Spinner: ComponentStyleConfig = {\n  baseStyle: {\n    color: 'cyan.500',\n  },\n};\n\nexport const theme = extendTheme({\n  useSystemColorMode: false,\n  initialColorMode: 'dark',\n  colors: {\n    gray: {\n      50: '#F6F6F6',\n      100: '#F1F1F1',\n      200: '#DDDDDF',\n      300: '#C3C3C9',\n      400: '#AAAAB2',\n      500: '#91919B',\n      600: '#7A7A85',\n      700: '#63636E',\n      800: '#4D4D57',\n      900: '#303037',\n    },\n    red: {\n      50: '#FFEDEF',\n      100: '#FFC4CB',\n      200: '#FF9BA7',\n      300: '#FF7384',\n      400: '#FF4A60',\n      500: '#E4364B',\n      600: '#C53030',\n      700: '#9B2C2C',\n      800: '#822727',\n      900: '#63171B',\n    },\n    orange: {\n      50: '#FFF3EB',\n      100: '#FFD8BE',\n      200: '#FFBE92',\n      300: '#FFA365',\n      400: '#FF9A54',\n      500: '#FC8738',\n      600: '#DC732D',\n      700: '#96420A',\n      800: '#743002',\n      900: '#522100',\n    },\n    yellow: {\n      50: '#FFFBEF',\n      100: '#FFF2CA',\n      200: '#FFF5A8',\n      300: '#FFF889',\n      400: '#FFF458',\n      500: '#FAE527',\n      600: '#EAD516',\n      700: '#B5932B',\n      800: '#776017',\n      900: '#55430D',\n    },\n    green: {\n      50: '#EDFFF9',\n      100: '#C3FFEC',\n      200: '#9AE6B4',\n      300: '#72FFD3',\n      400: '#47FAC2',\n      500: '#34EDB3',\n      600: '#2BD39F',\n      700: '#11946B',\n      800: '#077250',\n      900: '#015037',\n    },\n    blue: {\n      50: '#EDF6FF',\n      100: '#C4E2FF',\n      200: '#9CCFFF',\n      300: '#73BBFF',\n      400: '#479EF0',\n      500: '#3182CE',\n      600: '#1F68AC',\n      700: '#11508A',\n      800: '#073968',\n      900: '#012546',\n    },\n    cyan: {\n      50: '#E5FAFF',\n      100: '#B7F2FF',\n      200: '#8AEAFF',\n      300: '#5CE1FF',\n      400: '#2ED9FF',\n      500: '#00D1FF',\n      600: '#00B0D6',\n      700: '#008EAD',\n      800: '#006D85',\n      900: '#004B5C',\n    },\n    purple: {\n      50: '#F0EEFF',\n      100: '#CFC9FF',\n      200: '#AEA4FF',\n      300: '#8D7EFF',\n      400: '#6B59FF',\n      500: '#5744EA',\n      600: '#402FC8',\n      700: '#2D1EA6',\n      800: '#1D1084',\n      900: '#10104E',\n    },\n    pink: {\n      50: '#FDE8FF',\n      100: '#F9B6FF',\n      200: '#F583FF',\n      300: '#F471FF',\n      400: '#EB46FF',\n      500: '#EE2EFF',\n      600: '#BE02CE',\n      700: '#8D0099',\n      800: '#6E0077',\n      900: '#4E0055',\n    },\n    navy: {\n      50: '#522ED1',\n      100: '#401FB7',\n      200: '#3719A6',\n      300: '#2F1298',\n      400: '#1F0777',\n      500: '#150942',\n      600: '#0E052F',\n      700: '#0B0B22',\n      800: '#0A0A25',\n      900: '#06061B',\n    },\n    error: '#FF4A60', // red.400,\n    success: '#34EDB3', //green.500\n    warning: '#FC8738', // orange.500\n  },\n  shadows: {\n    outline: '0 0 0 3px rgba(0, 209, 255, 1)',\n  },\n  fonts: {\n    heading:\n      'Inter, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"',\n    body: 'Inter, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"',\n    display:\n      '\"GT America Condensed\", Inter, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"',\n    mono: '\"GT America Mono\", SFMono-Regular,Menlo,Monaco,Consolas,\"Liberation Mono\",\"Courier New\",monospace',\n  },\n  components: {\n    Popover: {\n      variants: {\n        responsive: {\n          popper: {\n            maxWidth: 'unset',\n            width: 'unset',\n          },\n        },\n      },\n    },\n    Button,\n    Input,\n    Select,\n    NumberInput,\n    Alert,\n    Textarea,\n    Skeleton,\n    Checkbox,\n    Radio,\n    Badge,\n    Tag,\n    Accordion,\n    Progress,\n    Tabs,\n    Tooltip,\n    Switch,\n    Spinner,\n    Menu,\n  },\n  // To be imported and used with the bgGradient prop\n  // See: https://chakra-ui.com/docs/styled-system/gradient#background-gradient-api\n  gradients,\n  textStyles: {\n    'heading-4xl': {\n      fontSize: { base: '60px', lg: '72px' },\n      fontFamily: 'heading',\n      lineHeight: { base: '57.6px', lg: '72px' },\n      fontWeight: 700,\n    },\n    'heading-3xl': {\n      fontSize: { base: '48px', md: '60px' },\n      fontFamily: 'heading',\n      lineHeight: { base: '57.6px', md: '72px', lg: '60px' },\n      fontWeight: 700,\n    },\n    'heading-2xl': {\n      fontSize: { base: '36px', md: '48px' },\n      fontFamily: 'heading',\n      lineHeight: { base: '120%' },\n      fontWeight: 700,\n    },\n    'heading-xl': {\n      fontSize: { base: '30px', lg: '36px' },\n      fontFamily: 'heading',\n      lineHeight: { base: '36px', lg: '120%' },\n      fontWeight: 700,\n    },\n    'heading-lg': {\n      fontSize: { base: '24px', lg: '30px' },\n      fontFamily: 'heading',\n      lineHeight: { base: '28.8px', lg: '36px' },\n      fontWeight: 700,\n    },\n    'heading-md': {\n      fontSize: { base: '20px', lg: '24px' },\n      fontFamily: 'heading',\n      lineHeight: '24px',\n      fontWeight: 700,\n    },\n    'heading-sm': {\n      fontSize: '16px',\n      fontFamily: 'heading',\n      lineHeight: '19.2px',\n      fontWeight: 700,\n    },\n    'heading-xs': {\n      fontSize: '14px',\n      fontFamily: 'heading',\n      lineHeight: '16.8px',\n      fontWeight: 700,\n    },\n  },\n  sizes: {\n    px: '1px',\n    0.5: '0.125rem',\n    1: '0.25rem',\n    1.5: '0.375rem',\n    2: '0.5rem',\n    2.5: '0.625rem',\n    3: '0.75rem',\n    3.5: '0.875rem',\n    4: '1rem',\n    5: '1.25rem',\n    6: '1.5rem',\n    7: '1.75rem',\n    8: '2rem',\n    9: '2.25rem',\n    10: '2.5rem',\n    12: '3rem',\n    14: '3.5rem',\n    16: '4rem',\n    20: '5rem',\n    24: '6rem',\n    28: '7rem',\n    32: '8rem',\n    36: '9rem',\n    40: '10rem',\n    44: '11rem',\n    48: '12rem',\n    52: '13rem',\n    56: '14rem',\n    60: '15rem',\n    64: '16rem',\n    72: '18rem',\n    80: '20rem',\n    96: '24rem',\n    max: 'max-content',\n    min: 'min-content',\n    full: '100%',\n    '3xs': '14rem',\n    '2xs': '16rem',\n    xs: '20rem',\n    sm: '24rem',\n    md: '28rem',\n    lg: '32rem',\n    xl: '36rem',\n    '2xl': '42rem',\n    '3xl': '48rem',\n    '4xl': '56rem',\n    '5xl': '64rem',\n    '6xl': '72rem',\n    '7xl': '80rem',\n    '8xl': '90rem',\n    container: {\n      sm: '640px',\n      md: '768px',\n      lg: '1024px',\n      xl: '1280px',\n    },\n  },\n  styles: {\n    global: {\n      body: {\n        bg: 'navy.900',\n      },\n    },\n  },\n});\n","import { Global } from '@emotion/react';\n\nexport const Fonts = () => (\n  <Global\n    styles={`\n      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@200..700&display=swap');\n      @font-face {\n        font-family: 'GT America Condensed';\n        font-style: normal;\n        font-display: swap;\n        font-weight: 700;\n        src: local('GT America Condensed'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Bold.woff2') format('woff2'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Bold.woff') format('woff'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Bold.otf') format('opentype');\n      }\n      @font-face {\n        font-family: 'GT America Condensed';\n        font-style: italic;\n        font-display: swap;\n        font-weight: 700;\n        src: local('GT America Condensed'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Bold%20Italic.woff2')\n            format('woff2'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Bold%20Italic.woff')\n            format('woff'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Bold%20Italic.otf')\n            format('opentype');\n      }\n      @font-face {\n        font-family: 'GT America Condensed';\n        font-style: normal;\n        font-display: swap;\n        font-weight: 100;\n        src: local('GT America Condensed'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Thin.woff2') format('woff2'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Thin.woff') format('woff'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Thin.otf') format('opentype');\n      }\n      @font-face {\n        font-family: 'GT America Condensed';\n        font-style: italic;\n        font-display: swap;\n        font-weight: 100;\n        src: local('GT America Condensed'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Thin%20Italic.woff2')\n            format('woff2'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Thin%20Italic.woff')\n            format('woff'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Thin%20Italic.otf')\n            format('opentype');\n      }\n      @font-face {\n        font-family: 'GT America Mono';\n        font-style: normal;\n        font-display: swap;\n        font-weight: 700;\n        src: local('GT America Mono'),\n          url('https://fonts.synthetix.io/GT%20America%20Mono%20Bold.woff2') format('woff2'),\n          url('https://fonts.synthetix.io/GT%20America%20Mono%20Bold.woff') format('woff'),\n          url('https://fonts.synthetix.io/GT%20America%20Mono%20Bold.otf') format('opentype');\n      }\n      @font-face {\n        font-family: 'Lustra Text';\n        font-style: normal;\n        font-display: swap;\n        font-weight: 400;\n        src: local('Lustra Text'),\n          url('https://fonts.synthetix.io/Lustra%20Text%20Thin.otf') format('opentype');\n      }\n    `}\n  />\n);\n","import { useState } from 'react';\nimport {\n  Modal,\n  ModalOverlay,\n  ModalContent,\n  ModalHeader,\n  ModalBody,\n  Text,\n  Button,\n  Box,\n  Link,\n  ListItem,\n  UnorderedList,\n} from '@chakra-ui/react';\nimport { Link as ReactRouterLink } from 'react-router-dom';\nimport { theme } from '@synthetixio/v3-theme';\nimport { SESSION_STORAGE_KEYS } from '@snx-v3/constants';\n\ninterface TermsModalProps {\n  defaultOpen: boolean;\n}\n\nexport const TermsModal = ({ defaultOpen = true }: TermsModalProps) => {\n  const [isOpen, setOpen] = useState(defaultOpen);\n  const [enabled, setEnabled] = useState(false);\n\n  const onSubmit = () => {\n    if (enabled) {\n      sessionStorage.setItem(SESSION_STORAGE_KEYS.TERMS_CONDITIONS_ACCEPTED, JSON.stringify(true));\n      setOpen(false);\n    }\n  };\n\n  return (\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    <Modal isOpen={isOpen} onClose={() => {}}>\n      <ModalOverlay />\n      <ModalContent\n        bgGradient={theme.gradients['dark'][500]}\n        pt=\"10\"\n        pb=\"3\"\n        borderWidth=\"1px\"\n        borderColor=\"gray.900\"\n        data-testid=\"transaction modal\"\n      >\n        <ModalHeader py={0} textAlign=\"center\">\n          Synthetix Terms of Service\n        </ModalHeader>\n        <ModalBody fontSize=\"xs\" color=\"gray.600\">\n          <Text fontSize=\"sm\">\n            By clicking “I Agree” below, you agree to be bound by the terms of this Agreement. As\n            such, you fully understand that:\n          </Text>\n          <Box\n            onScroll={(e) => {\n              const div = e.currentTarget;\n              const scrollTopWithTolerance = div.scrollTop + 10;\n              if (scrollTopWithTolerance >= div.scrollHeight - div.offsetHeight) {\n                setEnabled(true);\n              } else {\n                setEnabled(false);\n              }\n            }}\n            as=\"div\"\n            my={2}\n            py={3}\n            height=\"350px\"\n            overflow=\"auto\"\n            overflowX=\"scroll\"\n            sx={{\n              '::-webkit-scrollbar': {\n                display: 'block',\n              },\n              '::-webkit-scrollbar-track': {\n                backgroundColor: 'transparent',\n              },\n              '::-webkit-scrollbar-track-piece': {\n                backgroundColor: 'transparent',\n              },\n              '::-webkit-scrollbar-corner': {\n                backgroundColor: 'transparent',\n              },\n            }}\n          >\n            <UnorderedList>\n              <Text fontSize=\"14px\">\n                <ListItem>\n                  <Link\n                    href=\"https://synthetix.io/\"\n                    target=\"_blank\"\n                    color=\"cyan.500\"\n                    _focusVisible={{ outline: 'none' }}\n                  >\n                    Synthetix{' '}\n                  </Link>\n                  is a blockchain-based decentralized finance project. You are participating at your\n                  own risk.\n                </ListItem>\n                <ListItem mt={2}>\n                  Synthetix is offered for use “as is” and without any guarantees regarding\n                  security. The protocol is made up of immutable code and can be accessed through a\n                  variety of user interfaces.\n                </ListItem>\n                <ListItem mt={2}>\n                  No central entity operates the Synthetix protocol. Decisions related to the\n                  protocol are governed by a dispersed group of participants who collectively govern\n                  and maintain the protocol.\n                </ListItem>\n                <ListItem mt={2}>\n                  Synthetix DAO does not unilaterally offer, maintain, operate, administer, or\n                  control any trading interfaces. The only user interfaces maintained by Synthetix\n                  DAO are the governance and liquidity interfaces herein.\n                </ListItem>\n                <ListItem mt={2}>\n                  You can participate in the governance process by staking SNX tokens in accordance\n                  with the rules and parameters summarized{' '}\n                  <Link\n                    href=\"https://governance.synthetix.io/\"\n                    target=\"_blank\"\n                    color=\"cyan.500\"\n                    _focusVisible={{ outline: 'none' }}\n                  >\n                    here\n                  </Link>\n                  , and/or joining the{' '}\n                  <Link\n                    color=\"cyan.500\"\n                    target=\"_blank\"\n                    href=\"https://discord.com/invite/synthetix\"\n                    _focusVisible={{ outline: 'none' }}\n                  >\n                    Synthetix Discord\n                  </Link>{' '}\n                  and contributing to the conversation.\n                </ListItem>\n                <ListItem mt={2}>\n                  The rules and parameters associated with the Synthetix protocol and Synthetix DAO\n                  governance are subject to change at any time.\n                </ListItem>\n                <ListItem mt={2}>\n                  Your use of Synthetix is conditioned upon your acceptance to be bound by the\n                  Synthetix Term of Use, which can be found{' '}\n                  <Link\n                    as={ReactRouterLink}\n                    to=\"/terms\"\n                    target=\"_blank\"\n                    color=\"cyan.500\"\n                    _focusVisible={{ outline: 'none' }}\n                  >\n                    here\n                  </Link>\n                  .\n                </ListItem>\n                <ListItem mt={2}>\n                  The laws that apply to your use of Synthetix may vary based upon the jurisdiction\n                  in which you are located. We strongly encourage you to speak with legal counsel in\n                  your jurisdiction if you have any questions regarding your use of Synthetix.\n                </ListItem>\n                <ListItem mt={2}>\n                  By entering into this agreement, you are not agreeing to enter into a partnership.\n                  You understand that Synthetix is a decentralized protocol provided on an “as is”\n                  basis.\n                </ListItem>\n                <ListItem mt={2}>\n                  You hereby release all present and future claims against Synthetix DAO related to\n                  your use of the protocol, the SNX token, SNX DAO governance, and any other facet\n                  of the protocol.\n                </ListItem>\n                <ListItem mt={2}>\n                  You agree to indemnify and hold harmless SNX DAO and its affiliates for any costs\n                  arising out of or relating to your use of the Synthetix protocol.\n                </ListItem>\n                <ListItem mt={2}>\n                  You are not accessing the protocol from Burma (Myanmar), Cuba, Iran, Sudan, Syria,\n                  the Western Balkans, Belarus, Côte d’Ivoire, Democratic Republic of the Congo,\n                  Iraq, Lebanon, Liberia, Libya, North Korea, Russia, certain sanctioned areas of\n                  Ukraine, Somalia, Venezuela, Yemen, or Zimbabwe (collectively, “Prohibited\n                  Jurisdictions”), or any other jurisdiction listed as a Specially Designated\n                  National by the United States Office of Foreign Asset Control (“OFAC”).\n                </ListItem>\n              </Text>\n            </UnorderedList>\n          </Box>\n        </ModalBody>\n        <Button\n          variant=\"outline\"\n          _focusVisible={{ outline: 'none' }}\n          my={4}\n          mx={6}\n          onClick={onSubmit}\n          isDisabled={!enabled}\n        >\n          I agree\n        </Button>\n      </ModalContent>\n    </Modal>\n  );\n};\n","import { useState } from 'react';\n\nexport const set = (key: string, value: any) => {\n  if (typeof window !== 'undefined') {\n    window.localStorage.setItem(key, JSON.stringify(value));\n  }\n};\n\nexport function get<T>(key: string): T | null {\n  if (typeof window !== 'undefined') {\n    const item = window.localStorage.getItem(key);\n    try {\n      if (item != null) {\n        return JSON.parse(item);\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  }\n  return null;\n}\n\nexport function useLocalStorage<T>(key: string, initialValue: T) {\n  const [storedValue, setStoredValue] = useState<T>(() => {\n    const item = get<T>(key);\n    return item != null ? item : initialValue;\n  });\n\n  const setValue = (value: T) => {\n    const valueToStore = value instanceof Function ? value(storedValue) : value;\n    setStoredValue(valueToStore);\n    set(key, valueToStore);\n  };\n\n  return [storedValue, setValue] as const;\n}\n","import Wei from '@synthetixio/wei';\nimport { constants } from 'ethers';\n\nexport const LOCAL_STORAGE_KEYS = {\n  SHOW_TESTNETS: 'SHOW_TESTNETS',\n};\nexport const ZEROWEI = new Wei(0);\nexport const ONEWEI = new Wei(1);\nexport const MAXUINT = new Wei(constants.MaxUint256);\n","import { Contract } from '@ethersproject/contracts';\nimport { useQuery } from '@tanstack/react-query';\nimport { useNetwork, useProvider, useSigner } from '@snx-v3/useBlockchain';\nimport { importAccountProxy } from '@snx-v3/contracts';\n\nexport function useAccountProxy() {\n  const { network } = useNetwork();\n  const provider = useProvider();\n  const signer = useSigner();\n  const signerOrProvider = signer || provider;\n  const withSigner = Boolean(signer);\n\n  return useQuery({\n    queryKey: [`${network?.id}-${network?.preset}`, 'AccountProxy', { withSigner }],\n    queryFn: async function () {\n      if (!signerOrProvider || !network) throw new Error('Should be disabled');\n      const { address, abi } = await importAccountProxy(network.id, network?.preset);\n      return new Contract(address, abi, signerOrProvider);\n    },\n    enabled: Boolean(signerOrProvider),\n    staleTime: Infinity,\n  });\n}\n","export async function importAccountProxy(chainId, preset) {\n  if (!preset) {\n    throw new Error(`Missing preset`);\n  }\n  const deployment = `${Number(chainId).toFixed(0)}-${preset}`;\n  switch (deployment) {\n    case '1-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/1-main/meta.json'),\n        import('@synthetixio/v3-contracts/1-main/AccountProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.AccountProxy, abi };\n    }\n    case '11155111-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/11155111-main/meta.json'),\n        import('@synthetixio/v3-contracts/11155111-main/AccountProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.AccountProxy, abi };\n    }\n    case '10-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/10-main/meta.json'),\n        import('@synthetixio/v3-contracts/10-main/AccountProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.AccountProxy, abi };\n    }\n    case '8453-andromeda': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/8453-andromeda/meta.json'),\n        import('@synthetixio/v3-contracts/8453-andromeda/AccountProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.AccountProxy, abi };\n    }\n    case '84532-andromeda': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/84532-andromeda/meta.json'),\n        import('@synthetixio/v3-contracts/84532-andromeda/AccountProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.AccountProxy, abi };\n    }\n    case '42161-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-main/meta.json'),\n        import('@synthetixio/v3-contracts/42161-main/AccountProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.AccountProxy, abi };\n    }\n    case '421614-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/421614-main/meta.json'),\n        import('@synthetixio/v3-contracts/421614-main/AccountProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.AccountProxy, abi };\n    }\n    case '42161-arbthetix': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-arbthetix/meta.json'),\n        import('@synthetixio/v3-contracts/42161-arbthetix/AccountProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.AccountProxy, abi };\n    }\n    default: {\n      throw new Error(`Unsupported deployment ${deployment} for AccountProxy`);\n    }\n  }\n}\n","import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { useAccountProxy } from '@snx-v3/useAccountProxy';\nimport { useNetwork, useWallet } from '@snx-v3/useBlockchain';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { useGasPrice } from '@snx-v3/useGasPrice';\nimport { wei } from '@synthetixio/wei';\n\nexport function useAccounts() {\n  const { activeWallet } = useWallet();\n  const { data: AccountProxy } = useAccountProxy();\n  const { network } = useNetwork();\n\n  return useQuery({\n    queryKey: [\n      `${network?.id}-${network?.preset}`,\n      'Accounts',\n      { accountAddress: activeWallet?.address },\n    ],\n    queryFn: async function () {\n      if (!AccountProxy || !activeWallet?.address) throw new Error('Should be disabled');\n      const numberOfAccountTokens = await AccountProxy.balanceOf(activeWallet.address);\n\n      if (numberOfAccountTokens.eq(0)) {\n        // No accounts created yet\n        return [];\n      }\n      const accountIndexes = Array.from(Array(numberOfAccountTokens.toNumber()).keys());\n      const accounts = await Promise.all(\n        accountIndexes.map(async (i) => {\n          if (!activeWallet?.address) throw new Error('OMG!');\n          return await AccountProxy.tokenOfOwnerByIndex(activeWallet.address, i);\n        })\n      );\n      return accounts.map((accountId) => accountId.toString());\n    },\n    enabled: Boolean(AccountProxy?.address && activeWallet?.address),\n    placeholderData: [],\n  });\n}\n\nexport function useCreateAccount() {\n  const { data: CoreProxy } = useCoreProxy();\n  const { network } = useNetwork();\n  const client = useQueryClient();\n  const { data: gasPrices } = useGasPrice();\n  return {\n    getTransactionCost: useQuery({\n      enabled: !!gasPrices,\n      queryKey: ['Transaction-Cost-Account'],\n      queryFn: async () => {\n        const gasUnits = await CoreProxy?.estimateGas['createAccount()']();\n        if (gasPrices) {\n          if ('baseFeePerGas' in gasPrices?.average && gasUnits) {\n            const { coins } = await (\n              await fetch('https://coins.llama.fi/prices/current/coingecko:ethereum?searchWidth=4h')\n            ).json();\n            return (\n              wei(gasPrices?.average.baseFeePerGas.mul(gasUnits), 18).toNumber() *\n              coins['coingecko:ethereum'].price\n            ).toFixed(2);\n          }\n        }\n        return '0.00';\n      },\n    }),\n    mutation: useMutation({\n      mutationFn: async function () {\n        try {\n          if (!CoreProxy) throw new Error('CoreProxy undefined');\n          const tx = await CoreProxy['createAccount()']();\n          const res = await tx.wait();\n\n          await client.invalidateQueries({\n            queryKey: [`${network?.id}-${network?.preset}`, 'Accounts'],\n          });\n\n          let newAccountId: string | undefined;\n\n          res.logs.forEach((log: any) => {\n            if (log.topics[0] === CoreProxy.interface.getEventTopic('AccountCreated')) {\n              const accountId = CoreProxy.interface.decodeEventLog(\n                'AccountCreated',\n                log.data,\n                log.topics\n              )?.accountId;\n              newAccountId = accountId?.toString();\n            }\n          });\n\n          return [newAccountId];\n        } catch (error) {\n          console.error(error);\n          throw error;\n        }\n      },\n    }),\n  };\n}\n","import { useEffect, useState } from 'react';\nimport {\n  Badge,\n  Button,\n  Divider,\n  Flex,\n  IconButton,\n  Link,\n  Menu,\n  MenuButton,\n  MenuItem,\n  MenuList,\n  MenuOptionGroup,\n  Switch,\n  Text,\n} from '@chakra-ui/react';\nimport { WalletIcon } from '@snx-v3/icons';\nimport { NetworkIcon, useNetwork, useWallet, NETWORKS } from '@snx-v3/useBlockchain';\nimport { prettyString } from '@snx-v3/format';\nimport { useLocalStorage } from '@snx-v3/useLocalStorage';\nimport { LOCAL_STORAGE_KEYS } from '../../utils/constants';\nimport { CopyIcon, SettingsIcon } from '@chakra-ui/icons';\nimport { useAccounts, useCreateAccount } from '@snx-v3/useAccounts';\nimport { useLocation, useNavigate, useSearchParams } from 'react-router-dom';\nimport { Tooltip } from '@snx-v3/Tooltip';\n\nconst mainnets = NETWORKS.filter(({ isSupported, isTestnet }) => isSupported && !isTestnet);\nconst testnets = NETWORKS.filter(({ isSupported, isTestnet }) => isSupported && isTestnet);\n\nexport function NetworkController() {\n  const [toolTipLabel, setTooltipLabel] = useState('Copy');\n  const { activeWallet, walletsInfo, connect, disconnect } = useWallet();\n  const { network: activeNetwork, setNetwork } = useNetwork();\n  const {\n    data: accounts,\n    isLoading: isAccountsLoading,\n    isFetching: isAccountsFetching,\n  } = useAccounts();\n  const { mutation } = useCreateAccount();\n  const [showTestnets, setShowTestnets] = useLocalStorage(LOCAL_STORAGE_KEYS.SHOW_TESTNETS, false);\n  const [queryParams] = useSearchParams();\n  const navigate = useNavigate();\n  const { pathname } = useLocation();\n\n  useEffect(() => {\n    if (!isAccountsLoading && !isAccountsFetching && !!accounts?.length) {\n      const accountId = queryParams.get('accountId');\n\n      if (accountId && !accounts?.includes(accountId)) {\n        queryParams.set('accountId', accounts[0]);\n        navigate({ pathname, search: accounts[0] ? queryParams.toString() : '' });\n      }\n    }\n  }, [accounts, isAccountsLoading, isAccountsFetching, queryParams, navigate, pathname]);\n\n  useEffect(() => {\n    // Check if wallet preference is stored in local storage\n    if (!walletsInfo) {\n      const defaultWallet = localStorage.getItem('connectedWallets');\n\n      if (defaultWallet) {\n        connect({\n          autoSelect: { disableModals: true, label: JSON.parse(defaultWallet) },\n        });\n      }\n    }\n\n    if (walletsInfo) {\n      // store in local storage\n      localStorage.setItem('connectedWallets', JSON.stringify(walletsInfo.label));\n    }\n  }, [walletsInfo, connect, navigate, pathname]);\n\n  useEffect(() => {\n    const accountId = queryParams.get('accountId');\n\n    if (!accountId && !!accounts?.length) {\n      const lastUsedAccount = localStorage.getItem('accountId');\n      if (lastUsedAccount && accounts.find((account) => String(account) === lastUsedAccount)) {\n        queryParams.set('accountId', lastUsedAccount);\n      } else {\n        queryParams.set('accountId', accounts[0]);\n      }\n      navigate({ pathname, search: queryParams.toString() });\n    }\n  }, [accounts, navigate, pathname, queryParams]);\n\n  useEffect(() => {\n    const accountId = queryParams.get('accountId');\n\n    if (accountId) {\n      localStorage.setItem('accountId', accountId);\n    }\n  }, [queryParams]);\n\n  const onDisconnect = () => {\n    if (walletsInfo) {\n      disconnect(walletsInfo);\n      localStorage.removeItem('connectedWallets');\n    }\n  };\n\n  const notConnected = !activeWallet;\n  const notSupported = activeWallet && !activeNetwork;\n\n  return (\n    <Flex>\n      <Menu>\n        <MenuButton\n          as={Button}\n          variant=\"outline\"\n          colorScheme=\"gray\"\n          sx={{ '> span': { display: 'flex', alignItems: 'center' } }}\n          mr={1}\n          data-cy=\"account-menu-button\"\n          px={3}\n        >\n          <NetworkIcon\n            filter={activeNetwork?.isTestnet ? 'grayscale(1)' : ''}\n            networkId={notConnected ? 8453 : notSupported ? 0 : activeNetwork?.id}\n          />\n        </MenuButton>\n        <MenuList border=\"1px\" borderColor=\"gray.900\">\n          {mainnets.map(({ id, preset, label }) => (\n            <MenuItem key={`${id}-${preset}`} onClick={() => setNetwork(id)}>\n              <NetworkIcon networkId={id} size=\"20px\" />\n              <Text variant=\"nav\" ml={2}>\n                {label}\n              </Text>\n            </MenuItem>\n          ))}\n\n          {showTestnets && <Divider color=\"gray.900\" />}\n\n          <MenuOptionGroup>\n            <Flex py={4} px={3} alignItems=\"center\" justifyContent=\"space-between\">\n              <Text fontSize=\"14px\" fontFamily=\"heading\" lineHeight=\"20px\">\n                Show Testnets\n              </Text>\n              <Switch\n                mr={2}\n                size=\"sm\"\n                color=\"gray.900\"\n                colorScheme=\"gray\"\n                isChecked={showTestnets}\n                onChange={() => setShowTestnets(!showTestnets)}\n              />\n            </Flex>\n          </MenuOptionGroup>\n\n          {(showTestnets ? testnets : []).map(({ id, preset, label }) => (\n            <MenuItem key={`${id}-${preset}`} onClick={() => setNetwork(id)}>\n              <NetworkIcon filter=\"grayscale(1)\" networkId={id} size=\"20px\" />\n              <Text variant=\"nav\" ml={2}>\n                {label}\n              </Text>\n            </MenuItem>\n          ))}\n        </MenuList>\n      </Menu>\n      {activeWallet ? (\n        <Menu placement=\"bottom-end\">\n          <MenuButton\n            as={Button}\n            variant=\"outline\"\n            colorScheme=\"gray\"\n            ml={2}\n            height={10}\n            py=\"6px\"\n            px=\"9.5px\"\n            whiteSpace=\"nowrap\"\n            data-cy=\"header-wallet-address-button\"\n          >\n            <WalletIcon color=\"white\" />\n            <Text\n              as=\"span\"\n              ml={1}\n              color=\"white\"\n              fontWeight={700}\n              fontSize=\"xs\"\n              userSelect=\"none\"\n              data-cy=\"header-wallet-address-display\"\n            >\n              {activeWallet.ens?.name || prettyString(activeWallet.address)}\n            </Text>\n          </MenuButton>\n          <MenuList>\n            <Flex\n              border=\"1px solid\"\n              rounded=\"base\"\n              borderColor=\"gray.900\"\n              w=\"370px\"\n              _hover={{ bg: 'navy.700' }}\n              backgroundColor=\"navy.700\"\n              opacity={1}\n              p=\"4\"\n            >\n              <Flex flexDir=\"column\" w=\"100%\" gap=\"2\">\n                <Flex justifyContent=\"space-between\">\n                  <Text fontSize=\"14px\" color=\"gray.500\">\n                    Connected with {walletsInfo?.label}\n                  </Text>\n                  <Button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      onDisconnect();\n                    }}\n                    size=\"xs\"\n                    variant=\"outline\"\n                    colorScheme=\"gray\"\n                    color=\"white\"\n                  >\n                    Disconnect\n                  </Button>\n                </Flex>\n                <Text fontWeight={700} color=\"white\" fontSize=\"16px\">\n                  {prettyString(activeWallet.address)}{' '}\n                  <Tooltip label={toolTipLabel} closeOnClick={false}>\n                    <CopyIcon\n                      ml=\"2\"\n                      onClick={() => {\n                        navigator.clipboard.writeText(activeWallet.address);\n                        setTooltipLabel('Copied');\n                        setTimeout(() => {\n                          setTooltipLabel('Copy');\n                        }, 10000);\n                      }}\n                    />\n                  </Tooltip>\n                </Text>\n                <Flex\n                  flexDir=\"column\"\n                  p=\"2\"\n                  border=\"1px solid\"\n                  borderColor=\"gray.900\"\n                  rounded=\"base\"\n                  gap=\"2\"\n                >\n                  <Flex w=\"100%\" justifyContent=\"space-between\">\n                    <Text fontWeight={400} fontSize=\"14px\">\n                      Account(s)\n                    </Text>\n                    <Link href=\"/#/account/settings\">\n                      <IconButton\n                        variant=\"outline\"\n                        colorScheme=\"gray\"\n                        size=\"xs\"\n                        icon={<SettingsIcon />}\n                        aria-label=\"account settings\"\n                      />\n                    </Link>\n                  </Flex>\n                  <Flex data-cy=\"header-account-list\" flexDir=\"column\">\n                    {accounts?.map((account) => (\n                      <Text\n                        key={account}\n                        display=\"flex\"\n                        alignItems=\"center\"\n                        color=\"white\"\n                        fontWeight={700}\n                        fontSize=\"16px\"\n                        cursor=\"pointer\"\n                        p=\"3\"\n                        data-cy={`account-${account}`}\n                        _hover={{ bg: 'whiteAlpha.300' }}\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          queryParams.set('accountId', account);\n                          navigate({ pathname, search: queryParams.toString() });\n                        }}\n                      >\n                        #{prettyString(account, 4, 4)}\n                        {queryParams.get('accountId') === account && (\n                          <Badge ml={2} colorScheme=\"cyan\" variant=\"outline\">\n                            Connected\n                          </Badge>\n                        )}\n                      </Text>\n                    ))}\n                  </Flex>\n\n                  <Button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      mutation.mutate();\n                    }}\n                    size=\"xs\"\n                    variant=\"outline\"\n                    colorScheme=\"gray\"\n                    color=\"white\"\n                    leftIcon={\n                      <svg\n                        width=\"8\"\n                        height=\"8\"\n                        viewBox=\"0 0 8 8\"\n                        fill=\"none\"\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                      >\n                        <path\n                          d=\"M3.5 3.5V0.5H4.5V3.5H7.5V4.5H4.5V7.5H3.5V4.5H0.5V3.5H3.5Z\"\n                          fill=\"white\"\n                        />\n                      </svg>\n                    }\n                    w=\"130px\"\n                    data-cy=\"create-new-account-menu-item\"\n                  >\n                    Create Account\n                  </Button>\n                </Flex>\n              </Flex>\n            </Flex>\n          </MenuList>\n        </Menu>\n      ) : (\n        <Button\n          data-cy=\"header-connect-wallet\"\n          onClick={() => connect()}\n          type=\"button\"\n          size=\"sm\"\n          ml={2}\n          py={5}\n        >\n          Connect Wallet\n        </Button>\n      )}\n    </Flex>\n  );\n}\n","export function stringToHash(s: string | undefined) {\n  return (s || '').split('').reduce(function (a, b) {\n    a = (a << 5) - a + b.charCodeAt(0);\n    return a & a;\n  }, 0);\n}\n","import { useNetwork } from '@snx-v3/useBlockchain';\nimport { useMulticall3 } from '@snx-v3/useMulticall3';\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\nimport React from 'react';\n\nexport type TokenInfoType = {\n  tokenAddress: string;\n  symbol?: string;\n  name?: string;\n  decimals?: number;\n};\nexport type TokensInfoType = { [key: string]: TokenInfoType };\n\nexport async function getTokensInfo({\n  Multicall3,\n  addresses,\n}: {\n  Multicall3: ethers.Contract;\n  addresses: string[];\n}): Promise<TokensInfoType> {\n  const Interface = new ethers.utils.Interface([\n    'function symbol() view returns (string)',\n    'function name() view returns (string)',\n    'function decimals() view returns (uint8)',\n  ]);\n\n  const { returnData } = await Multicall3.callStatic.aggregate(\n    addresses.flatMap((target) => [\n      { target, callData: Interface.encodeFunctionData('symbol') },\n      { target, callData: Interface.encodeFunctionData('name') },\n      { target, callData: Interface.encodeFunctionData('decimals') },\n    ])\n  );\n  return returnData.reduce((result: TokensInfoType, value: ethers.BytesLike, i: number) => {\n    const batchId = Math.floor(i / 3);\n    const tokenAddress = addresses[batchId];\n    if (!result[tokenAddress]) {\n      result[tokenAddress] = {\n        tokenAddress,\n        symbol: undefined,\n        name: undefined,\n        decimals: undefined,\n      };\n    }\n    if (i % 3 === 0) {\n      const [symbol] = Interface.decodeFunctionResult('symbol', value);\n      result[tokenAddress].symbol = symbol;\n    }\n    if (i % 3 === 1) {\n      const [name] = Interface.decodeFunctionResult('name', value);\n      result[tokenAddress].name = name;\n    }\n    if (i % 3 === 2) {\n      const [decimals] = Interface.decodeFunctionResult('decimals', value);\n      result[tokenAddress].decimals = decimals;\n    }\n    return result;\n  }, {});\n}\n\nexport const useTokenInfo = (tokenAddress?: string) => {\n  const { network } = useNetwork();\n  const { data: Multicall3 } = useMulticall3(network || undefined);\n  return useQuery({\n    enabled: Boolean(network?.id && network?.preset && Multicall3 && tokenAddress),\n    queryKey: [`${network?.id}-${network?.preset}`, 'Token', { tokenAddress }],\n    queryFn: async () => {\n      if (!(Multicall3 && tokenAddress)) throw new Error('OMFG!');\n      const tokensInfo = await getTokensInfo({ Multicall3, addresses: [tokenAddress] });\n      return tokensInfo[tokenAddress];\n    },\n    staleTime: Infinity,\n    refetchInterval: Infinity,\n  });\n};\n\nexport const useTokensInfo = (addresses: string[]) => {\n  const { network } = useNetwork();\n  const { data: Multicall3 } = useMulticall3(network || undefined);\n  const queryClient = useQueryClient();\n  const tokenAddresses = React.useMemo(\n    () => addresses.map((address) => address.toLowerCase()).sort(),\n    [addresses]\n  );\n  return useQuery({\n    enabled: Boolean(network?.id && network?.preset && Multicall3 && tokenAddresses.length > 0),\n    queryKey: [`${network?.id}-${network?.preset}`, 'Tokens', { tokenAddresses }],\n    queryFn: async () => {\n      if (!(Multicall3 && tokenAddresses.length > 0)) throw new Error('OMFG!');\n      const unknownAddresses = tokenAddresses.filter(\n        (tokenAddress) =>\n          queryClient.getQueryData([\n            `${network?.id}-${network?.preset}`,\n            'Token',\n            { tokenAddress },\n          ]) === undefined\n      );\n\n      const tokensInfo = await getTokensInfo({ Multicall3, addresses: unknownAddresses });\n      for (const [tokenAddress, tokenInfo] of Object.entries(tokensInfo)) {\n        queryClient.setQueryData(\n          [`${network?.id}-${network?.preset}`, 'Token', { tokenAddress }],\n          tokenInfo\n        );\n      }\n      return Object.fromEntries(\n        tokenAddresses.map((tokenAddress) => [\n          tokenAddress,\n          queryClient.getQueryData([\n            `${network?.id}-${network?.preset}`,\n            'Token',\n            { tokenAddress },\n          ]),\n        ])\n      ) as TokensInfoType;\n    },\n    staleTime: Infinity,\n    refetchInterval: Infinity,\n  });\n};\n","import { stringToHash } from '@snx-v3/tsHelpers';\nimport { useDefaultProvider, useNetwork } from '@snx-v3/useBlockchain';\nimport { useCollateralTypes } from '@snx-v3/useCollateralTypes';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { useGetUSDTokens } from '@snx-v3/useGetUSDTokens';\nimport { erc7412Call } from '@snx-v3/withERC7412';\nimport { useTokenInfo } from '@snx-v3/useTokenInfo';\nimport { Wei, wei } from '@synthetixio/wei';\nimport { useQuery } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\nimport { useAllCollateralPriceUpdates } from '../useCollateralPriceUpdates';\n\nexport type AccountCollateralType = {\n  tokenAddress: string;\n  availableCollateral: Wei;\n  totalAssigned: Wei;\n  totalDeposited: Wei;\n  totalLocked: Wei;\n  symbol: string;\n  displaySymbol: string;\n};\n\nexport const loadAccountCollateral = async ({\n  accountId,\n  tokenAddresses,\n  CoreProxy,\n}: {\n  accountId: string;\n  tokenAddresses: string[];\n  CoreProxy: ethers.Contract;\n}) => {\n  const callsP = tokenAddresses.flatMap((tokenAddress) => [\n    CoreProxy.populateTransaction.getAccountAvailableCollateral(accountId, tokenAddress),\n    CoreProxy.populateTransaction.getAccountCollateral(accountId, tokenAddress),\n  ]);\n  const calls = await Promise.all(callsP);\n  const decoder = (multicallEncoded: string | string[]) => {\n    if (!Array.isArray(multicallEncoded)) throw Error('Expected array');\n    return tokenAddresses.map((tokenAddress, i) => {\n      const [availableCollateral] = CoreProxy.interface.decodeFunctionResult(\n        'getAccountAvailableCollateral',\n        multicallEncoded[i * 2]\n      );\n      const { totalAssigned, totalDeposited, totalLocked } =\n        CoreProxy.interface.decodeFunctionResult(\n          'getAccountCollateral',\n          multicallEncoded[i * 2 + 1]\n        );\n      return {\n        tokenAddress,\n        availableCollateral: wei(availableCollateral),\n        totalAssigned: wei(totalAssigned),\n        totalDeposited: wei(totalDeposited),\n        totalLocked: wei(totalLocked),\n        symbol: '',\n        displaySymbol: '',\n        decimals: '',\n      };\n    });\n  };\n  return { decoder, calls };\n};\n\nexport type AccountCollateralWithSymbol = AccountCollateralType & { symbol: string };\n\nexport function useAccountCollateral({\n  accountId,\n  includeDelegationOff,\n}: {\n  accountId?: string;\n  includeDelegationOff?: boolean;\n}) {\n  const { data: CoreProxy } = useCoreProxy();\n  const { network } = useNetwork();\n  const { data: collateralTypes } = useCollateralTypes(includeDelegationOff);\n  const { data: USDTokens } = useGetUSDTokens();\n\n  const provider = useDefaultProvider();\n  const { data: priceUpdateTx } = useAllCollateralPriceUpdates();\n\n  const { data: stablecoinInfo } = useTokenInfo(USDTokens?.snxUSD);\n\n  return useQuery({\n    queryKey: [\n      `${network?.id}-${network?.preset}`,\n      'AccountCollateral',\n      { accountId },\n      { stablecoin: USDTokens?.snxUSD },\n      { priceUpdateTx: stringToHash(priceUpdateTx?.data) },\n    ],\n    enabled: Boolean(\n      network &&\n        provider &&\n        CoreProxy &&\n        accountId &&\n        collateralTypes &&\n        collateralTypes.length > 0 &&\n        stablecoinInfo\n    ),\n    queryFn: async function () {\n      if (\n        !(\n          network &&\n          provider &&\n          CoreProxy &&\n          accountId &&\n          collateralTypes &&\n          collateralTypes.length > 0 &&\n          stablecoinInfo\n        )\n      ) {\n        throw new Error('OMG');\n      }\n\n      const tokenAddresses = collateralTypes\n        .map((c) => c.tokenAddress)\n        .concat([stablecoinInfo.tokenAddress]);\n\n      const { calls, decoder } = await loadAccountCollateral({\n        accountId,\n        tokenAddresses,\n        CoreProxy,\n      });\n      const allCalls = [...calls];\n      if (priceUpdateTx) {\n        allCalls.unshift(priceUpdateTx as any);\n      }\n      const data = await erc7412Call(network, provider, allCalls, decoder, 'useAccountCollateral');\n\n      return data.map((x) => {\n        if (`${stablecoinInfo.tokenAddress}`.toLowerCase() === `${x.tokenAddress}`.toLowerCase()) {\n          return Object.assign(x, {\n            symbol: stablecoinInfo.symbol,\n            displaySymbol: stablecoinInfo.name,\n          });\n        }\n        const collateralType = collateralTypes.find(\n          (c) => `${c.tokenAddress}`.toLowerCase() === `${x.tokenAddress}`.toLowerCase()\n        );\n        return Object.assign(x, {\n          symbol: collateralType?.symbol ?? '',\n          displaySymbol: collateralType?.displaySymbol ?? '',\n          decimals: collateralType?.decimals ?? '18',\n        });\n      });\n    },\n  });\n}\n\nexport function useAccountSpecificCollateral(accountId?: string, collateralAddress?: string) {\n  const { data: CoreProxy } = useCoreProxy();\n  const { network } = useNetwork();\n  const provider = useDefaultProvider();\n  const { data: priceUpdateTx } = useAllCollateralPriceUpdates();\n\n  return useQuery({\n    queryKey: [\n      `${network?.id}-${network?.preset}`,\n      'AccountSpecificCollateral',\n      { accountId },\n      { token: collateralAddress, priceUpdateTx: stringToHash(priceUpdateTx?.data) },\n    ],\n    enabled: Boolean(CoreProxy && accountId && collateralAddress),\n    queryFn: async function () {\n      if (!CoreProxy || !accountId || !collateralAddress || !network || !provider) {\n        throw 'useAccountSpecificCollateral should not be enabled';\n      }\n      const { calls, decoder } = await loadAccountCollateral({\n        accountId,\n        tokenAddresses: [collateralAddress],\n        CoreProxy,\n      });\n      const allCalls = [...calls];\n      if (priceUpdateTx) {\n        allCalls.unshift(priceUpdateTx as any);\n      }\n\n      const data = await erc7412Call(\n        network,\n        provider,\n        calls,\n        decoder,\n        'useAccountSpecificCollateral'\n      );\n\n      return data.at(0);\n    },\n  });\n}\n","import { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { stringToHash } from '@snx-v3/tsHelpers';\nimport {\n  Network,\n  useDefaultProvider,\n  useNetwork,\n  useProviderForChain,\n} from '@snx-v3/useBlockchain';\nimport { useCollateralTypes } from '@snx-v3/useCollateralTypes';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { useGetUSDTokens } from '@snx-v3/useGetUSDTokens';\nimport { erc7412Call } from '@snx-v3/withERC7412';\nimport { ZodBigNumber } from '@snx-v3/zod';\nimport Wei, { wei } from '@synthetixio/wei';\nimport { useQuery } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\nimport { useAllCollateralPriceUpdates } from '../useCollateralPriceUpdates';\n\nconst PriceSchema = ZodBigNumber.transform((x) => wei(x));\n\nexport async function loadPrices({\n  CoreProxy,\n  collateralAddresses,\n}: {\n  CoreProxy: ethers.Contract;\n  collateralAddresses: string[];\n}) {\n  const calls = await Promise.all(\n    collateralAddresses.map((address) => {\n      return CoreProxy.populateTransaction.getCollateralPrice(address);\n    })\n  );\n  if (calls.length === 0) return { calls: [], decoder: () => [] };\n\n  const decoder = (multicallEncoded: string | string[]) => {\n    if (Array.isArray(multicallEncoded)) {\n      return multicallEncoded.map((encoded) => {\n        const pricesEncoded = CoreProxy.interface.decodeFunctionResult(\n          'getCollateralPrice',\n          encoded\n        )[0];\n\n        return PriceSchema.parse(pricesEncoded);\n      });\n    } else {\n      const pricesEncoded = CoreProxy.interface.decodeFunctionResult(\n        'getCollateralPrice',\n        multicallEncoded\n      )[0];\n      return PriceSchema.parse(pricesEncoded);\n    }\n  };\n  return { calls, decoder };\n}\n\nexport const useCollateralPrices = (customNetwork?: Network) => {\n  const { network } = useNetwork();\n  const { data: CoreProxy } = useCoreProxy(customNetwork);\n  const { data: collateralData } = useCollateralTypes(false, customNetwork);\n  const { data: usdTokens } = useGetUSDTokens(customNetwork);\n\n  const targetNetwork = customNetwork || network;\n  const isBase = isBaseAndromeda(targetNetwork?.id, targetNetwork?.preset);\n\n  const collateralAddresses =\n    isBase && usdTokens?.sUSD\n      ? collateralData?.map((x) => x.tokenAddress).concat(usdTokens.sUSD)\n      : collateralData?.map((x) => x.tokenAddress);\n\n  const connectedProvider = useDefaultProvider();\n  const offlineProvider = useProviderForChain(customNetwork);\n  const { data: priceUpdateTx } = useAllCollateralPriceUpdates(customNetwork);\n\n  const provider = customNetwork ? offlineProvider : connectedProvider;\n\n  return useQuery({\n    enabled: Boolean(CoreProxy && collateralAddresses && collateralAddresses?.length > 0),\n    queryKey: [\n      `${targetNetwork?.id}-${targetNetwork?.preset}`,\n      'CollateralPrices',\n      {\n        collateralAddresses: collateralAddresses?.filter(\n          (item, pos) => collateralAddresses.indexOf(item) === pos\n        ),\n        priceUpdateTx: stringToHash(priceUpdateTx?.data),\n      },\n    ],\n    queryFn: async () => {\n      if (\n        !CoreProxy ||\n        !collateralAddresses ||\n        collateralAddresses.length == 0 ||\n        !targetNetwork ||\n        !provider\n      ) {\n        throw 'useCollateralPrices missing required data';\n      }\n\n      const { calls, decoder } = await loadPrices({ CoreProxy, collateralAddresses });\n\n      const allCalls = [...calls];\n      if (priceUpdateTx) {\n        allCalls.unshift(priceUpdateTx as any);\n      }\n\n      const prices = await erc7412Call(\n        targetNetwork,\n        provider,\n        allCalls,\n        decoder,\n        'useCollateralPrices'\n      );\n\n      return collateralAddresses.reduce((acc: Record<string, Wei | undefined>, address, i) => {\n        if (Array.isArray(prices)) {\n          acc[address] = prices[i];\n        } else {\n          acc[address] = prices;\n        }\n        return acc;\n      }, {});\n    },\n  });\n};\n","import { Image, ImageProps } from '@chakra-ui/react';\n\ninterface TokenIconProps extends ImageProps {\n  symbol: string;\n  width?: number;\n  height?: number;\n}\n\nexport const TokenIcon = ({ symbol, width = 30, height = 30, ...props }: TokenIconProps) => {\n  return (\n    <Image\n      src={`https://synthetixio.github.io/synthetix-assets/collateral/${symbol.toUpperCase()}.svg`}\n      fallbackSrc=\"https://synthetixio.github.io/synthetix-assets/collateral/UNKNOWN.svg\"\n      alt={symbol}\n      style={{ width, height }}\n      {...props}\n    />\n  );\n};\n","export function numberWithCommas(value: string, decimals?: number) {\n  const parts = value.split('.');\n  parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n  const joinedParts = parts.join('.');\n  return decimals ? joinedParts.substring(0, joinedParts.indexOf('.') + decimals + 1) : joinedParts;\n}\n\ninterface Options extends Intl.NumberFormatOptions {\n  locales?: string | string[];\n}\nexport const formatNumberToUsd = (val: number | string, options?: Options) => {\n  const optionsWithDefault = { style: 'currency', currency: 'USD', locales: 'en-EN', ...options };\n  return new Intl.NumberFormat(optionsWithDefault.locales, optionsWithDefault).format(Number(val));\n};\n\nexport const formatNumberToCurrencyBasedOnSize = (val: number | string) => {\n  const num = Number(val);\n  if (num < 0.0001) {\n    return formatNumberToUsd(num, { maximumFractionDigits: 8 });\n  }\n  if (num < 1) {\n    return formatNumberToUsd(num, { maximumFractionDigits: 4 });\n  }\n  return formatNumberToUsd(num, { maximumFractionDigits: 2 });\n};\n\nexport const formatNumber = (value: number | string, options?: Options) => {\n  const optionsWithDefault = {\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2,\n    locales: 'en-EN',\n    ...options,\n  };\n  return new Intl.NumberFormat(optionsWithDefault.locales, optionsWithDefault).format(\n    Number(value)\n  );\n};\n\nexport const formatPercent = (value: number | string, options?: Options) => {\n  const optionsWithDefault = {\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 2,\n    locales: 'en-EN',\n    style: 'percent',\n    ...options,\n  };\n  return new Intl.NumberFormat(optionsWithDefault.locales, optionsWithDefault).format(\n    Number(value)\n  );\n};\n","import { Flex, Td, Tr, Text, Button, Fade, useDisclosure } from '@chakra-ui/react';\nimport { TokenIcon } from '../../TokenIcon';\nimport { formatNumberToUsd, formatNumber } from '@snx-v3/formatters';\nimport Wei from '@synthetixio/wei';\nimport { WithdrawModal } from '../../';\nimport { Tooltip } from '@snx-v3/Tooltip';\nimport { NavLink, generatePath } from 'react-router-dom';\nimport { useTimer } from 'react-timer-hook';\n\ninterface AssetsRowProps {\n  token: string;\n  name: string;\n  walletBalance: number;\n  walletBalance$: number;\n  accountBalance: Wei;\n  accountBalance$: number;\n  delegatedBalance: number;\n  delegatedBalance$: number;\n  unlockDate?: Date;\n  final: boolean; // Used for hiding bottom border\n}\n\nexport const AssetsRow = ({\n  token,\n  name,\n  walletBalance,\n  walletBalance$,\n  accountBalance,\n  accountBalance$,\n  delegatedBalance,\n  delegatedBalance$,\n  unlockDate,\n  final,\n}: AssetsRowProps) => {\n  const { isOpen, onOpen, onClose } = useDisclosure();\n\n  const { minutes, hours, isRunning } = useTimer({\n    expiryTimestamp: unlockDate || new Date(0),\n    autoStart: unlockDate && new Date().getTime() < unlockDate?.getTime(),\n  });\n\n  return (\n    <Tr borderBottomWidth={final ? 'none' : '1px'}>\n      <Td border=\"none\">\n        <Fade in>\n          <Flex alignItems=\"center\">\n            <TokenIcon symbol={token} />\n            <Flex flexDirection=\"column\" ml={3}>\n              <Text color=\"white\" fontWeight={700} lineHeight=\"1.25rem\" fontFamily=\"heading\">\n                {token}\n              </Text>\n              <Text color=\"gray.500\" fontFamily=\"heading\" fontSize=\"0.75rem\" lineHeight=\"1rem\">\n                {name}\n              </Text>\n            </Flex>\n          </Flex>\n        </Fade>\n      </Td>\n      <Td border=\"none\">\n        <Fade in>\n          <Flex flexDirection=\"column\" alignItems=\"flex-end\">\n            <Text\n              color=\"white\"\n              fontWeight={700}\n              lineHeight=\"1.25rem\"\n              fontFamily=\"heading\"\n              data-cy=\"asset-list-wallet-balance\"\n            >\n              {formatNumberToUsd(walletBalance$)}\n            </Text>\n            <Text\n              color=\"gray.500\"\n              fontFamily=\"heading\"\n              fontSize=\"0.75rem\"\n              lineHeight=\"1rem\"\n              data-cy=\"asset-wallet-balance\"\n            >\n              {formatNumber(walletBalance)}\n              {` ${token}`}\n            </Text>\n          </Flex>\n        </Fade>\n      </Td>\n      <Td border=\"none\">\n        <Fade in>\n          <Flex flexDirection=\"column\" alignItems=\"flex-end\">\n            <Text\n              color=\"white\"\n              fontWeight={700}\n              lineHeight=\"1.25rem\"\n              fontFamily=\"heading\"\n              data-cy=\"asset-list-account-balance\"\n            >\n              {formatNumberToUsd(accountBalance$)}\n            </Text>\n            <Text color=\"gray.500\" fontFamily=\"heading\" fontSize=\"0.75rem\" lineHeight=\"1rem\">\n              {formatNumber(accountBalance.toNumber())}\n              {` ${token}`}\n            </Text>\n          </Flex>\n        </Fade>\n      </Td>\n      <Td border=\"none\">\n        <Fade in>\n          <Flex flexDirection=\"column\" alignItems=\"flex-end\">\n            <Text\n              color=\"white\"\n              fontWeight={700}\n              lineHeight=\"1.25rem\"\n              fontFamily=\"heading\"\n              data-cy=\"asset-list-delegated-balance\"\n            >\n              {formatNumberToUsd(delegatedBalance$)}\n            </Text>\n            <Text color=\"gray.500\" fontFamily=\"heading\" fontSize=\"0.75rem\" lineHeight=\"1rem\">\n              {formatNumber(delegatedBalance)}\n              {` ${token}`}\n            </Text>\n          </Flex>\n        </Fade>\n      </Td>\n      <Td maxWidth=\"230px\" border=\"none\">\n        <Flex justifyContent=\"space-between\">\n          {/* TODO: Update when multiple pools for LPing available */}\n          <Fade in>\n            <Button\n              as={NavLink}\n              fontSize=\"0.75rem\"\n              lineHeight=\"1rem\"\n              height=\"1.75rem\"\n              w=\"100%\"\n              fontWeight={700}\n              borderWidth=\"1px\"\n              borderColor=\"gray.900\"\n              borderRadius=\"4px\"\n              to={{\n                pathname: generatePath('/positions/:collateralSymbol/:poolId', {\n                  poolId: '1',\n                  collateralSymbol: token.toUpperCase(),\n                }),\n                search: location.search,\n              }}\n              data-cy=\"assets-deposit-button\"\n            >\n              Deposit\n            </Button>\n          </Fade>\n\n          <Fade in>\n            <Tooltip\n              label={\n                isRunning && accountBalance.gt(0) && `Withdrawal available in ${hours}H ${minutes}M`\n              }\n            >\n              <Button\n                isDisabled={isRunning}\n                variant=\"unstyled\"\n                fontSize=\"0.75rem\"\n                lineHeight=\"1rem\"\n                height=\"1.75rem\"\n                w=\"100%\"\n                px={4}\n                fontWeight={700}\n                borderWidth=\"1px\"\n                borderColor=\"gray.900\"\n                borderRadius=\"4px\"\n                _hover={{ bg: 'gray.900' }}\n                onClick={onOpen}\n              >\n                {isRunning && accountBalance.gt(0)\n                  ? `Withdraw in ${hours}H ${minutes}M`\n                  : 'Withdraw'}\n              </Button>\n            </Tooltip>\n          </Fade>\n        </Flex>\n        <WithdrawModal isOpen={isOpen} onClose={onClose} />\n      </Td>\n    </Tr>\n  );\n};\n","import { InfoIcon } from '@chakra-ui/icons';\nimport { Thead, Tr, Th, Flex, Text } from '@chakra-ui/react';\nimport { Tooltip } from '@snx-v3/Tooltip';\n\nexport const AssetTableHeader = () => {\n  return (\n    <Thead>\n      <Tr>\n        <Th\n          py={5}\n          textTransform=\"unset\"\n          color=\"gray.600\"\n          border=\"none\"\n          fontFamily=\"heading\"\n          fontSize=\"12px\"\n          lineHeight=\"16px\"\n        >\n          Asset\n        </Th>\n        <Th border=\"none\" textTransform=\"unset\" py={5}>\n          <Flex justifyContent=\"flex-end\" alignItems=\"center\">\n            <Text color=\"gray.600\" fontFamily=\"heading\" fontSize=\"12px\" lineHeight=\"16px\" mr={1}>\n              Wallet Balance{' '}\n            </Text>\n            <Tooltip\n              label={\n                <>\n                  <Text fontWeight={600} textAlign=\"left\">\n                    Wallet Balance:\n                  </Text>\n                  <Text textAlign=\"left\" mt={1}>\n                    Assets currently in your Wallet that can be deposited in your Synthetix Account.\n                  </Text>\n                  <Text textAlign=\"left\" mt={1}>\n                    Note: Assets on your Account will not show on your Wallet.\n                  </Text>\n                </>\n              }\n            >\n              <InfoIcon w=\"10px\" h=\"10px\" />\n            </Tooltip>\n          </Flex>\n        </Th>\n        <Th border=\"none\" textTransform=\"unset\" py={5}>\n          <Flex justifyContent=\"flex-end\" alignItems=\"center\">\n            <Text color=\"gray.600\" fontFamily=\"heading\" fontSize=\"12px\" lineHeight=\"16px\" mr={1}>\n              Account Available\n            </Text>\n            <Tooltip\n              label={\n                <>\n                  <Text fontWeight={600} textAlign=\"left\">\n                    Account Available:\n                  </Text>\n                  <Text textAlign=\"left\" mt={1}>\n                    Assets deposited in your Synthetix Account. These assets are available to be\n                    delegated to a pool.\n                  </Text>\n                </>\n              }\n            >\n              <InfoIcon w=\"10px\" h=\"10px\" />\n            </Tooltip>\n          </Flex>\n        </Th>\n        <Th border=\"none\" textTransform=\"unset\" py={5}>\n          <Flex justifyContent=\"flex-end\" alignItems=\"center\">\n            <Text color=\"gray.600\" fontFamily=\"heading\" fontSize=\"12px\" lineHeight=\"16px\" mr={1}>\n              Delegated\n            </Text>\n            <Tooltip\n              label={\n                <>\n                  <Text fontWeight={600} textAlign=\"left\">\n                    Account Delegated Assets:\n                  </Text>\n                  <Text textAlign=\"left\" mt={1}>\n                    Assets used as collateral in a Position.\n                  </Text>\n                </>\n              }\n            >\n              <InfoIcon w=\"10px\" h=\"10px\" />\n            </Tooltip>\n          </Flex>\n        </Th>\n        <Th\n          py={5}\n          textTransform=\"unset\"\n          color=\"gray.600\"\n          border=\"none\"\n          fontFamily=\"heading\"\n          fontSize=\"12px\"\n          lineHeight=\"16px\"\n        >\n          {' '}\n        </Th>\n      </Tr>\n    </Thead>\n  );\n};\n","import { InfoIcon } from '@chakra-ui/icons';\nimport {\n  TableContainer,\n  Table,\n  Heading,\n  Flex,\n  Tbody,\n  Td,\n  Tr,\n  Text,\n  Button,\n} from '@chakra-ui/react';\nimport { AssetsRow } from './AssetsRow';\nimport { AssetTableHeader } from './AssetTableHeader';\nimport { useWallet } from '@snx-v3/useBlockchain';\nimport { AssetRowLoading, AssetsEmpty } from '.';\nimport { Asset } from '../../../utils/assets';\nimport { Tooltip } from '@snx-v3/Tooltip';\n\ninterface AssetsTableProps {\n  isLoading: boolean;\n  assets?: Asset[];\n  unlockDate: Date | undefined;\n}\n\nexport const AssetsTable = ({ isLoading, assets, unlockDate }: AssetsTableProps) => {\n  const { activeWallet, connect } = useWallet();\n\n  return (\n    <TableContainer\n      maxW=\"100%\"\n      mt={4}\n      borderColor=\"gray.900\"\n      borderWidth=\"1px\"\n      borderRadius=\"5px\"\n      p={6}\n      sx={{\n        borderCollapse: 'separate !important',\n        borderSpacing: 0,\n      }}\n      bg=\"navy.700\"\n    >\n      <Flex alignItems=\"center\">\n        <Heading fontSize=\"18px\" fontWeight={700} lineHeight=\"28px\" color=\"gray.50\">\n          Assets\n        </Heading>\n        <Tooltip\n          label={\n            <>\n              <Text fontWeight={600} textAlign=\"left\">\n                Assets:\n              </Text>\n              <Text textAlign=\"left\" mt={1}>\n                All assets used on Synthetix Protocol. As a security precaution, all assets can only\n                be withdrawn to your wallet after 24hs since your previous account activity\n              </Text>\n            </>\n          }\n          p=\"3\"\n        >\n          <InfoIcon w=\"10px\" h=\"10px\" ml={2} />\n        </Tooltip>\n      </Flex>\n      {/* Not connected state */}\n      {!activeWallet?.address ? (\n        <Flex w=\"100%\" justifyContent=\"space-between\">\n          <Text color=\"gray.500\" fontWeight={500} fontSize=\"14px\" mt=\"4\" pl=\"3\">\n            Please connect wallet to view assets\n          </Text>\n          <Button\n            data-cy=\"connect-button-asset-table\"\n            size=\"sm\"\n            onClick={() => {\n              connect();\n            }}\n          >\n            Connect Wallet\n          </Button>\n        </Flex>\n      ) : // Empty State\n      assets && assets.length === 0 && !isLoading ? (\n        <AssetsEmpty />\n      ) : (\n        <Table variant=\"simple\">\n          <AssetTableHeader />\n          <Tbody>\n            <Tr border=\"none\" borderTop=\"1px\" borderTopColor=\"gray.900\" width=\"100%\" height=\"0px\">\n              <Td height=\"0px\" border=\"none\" px={0} pt={0} pb={5} />\n              <Td height=\"0px\" border=\"none\" px={0} pt={0} pb={5} />\n              <Td height=\"0px\" border=\"none\" px={0} pt={0} pb={5} />\n              <Td height=\"0px\" border=\"none\" px={0} pt={0} pb={5} />\n              <Td height=\"0px\" border=\"none\" px={0} pt={0} pb={5} />\n            </Tr>\n            {isLoading || !assets ? (\n              <>\n                <AssetRowLoading />\n                <AssetRowLoading final />\n              </>\n            ) : (\n              <>\n                {assets?.map((asset, index) => {\n                  const { collateral, balance, price } = asset;\n\n                  return (\n                    <AssetsRow\n                      key={collateral.tokenAddress\n                        .concat(collateral?.symbol || index.toString())\n                        .concat(index.toString())}\n                      token={collateral.symbol || ''}\n                      name={collateral.displaySymbol || ''}\n                      walletBalance={balance!.toNumber()}\n                      walletBalance$={balance.mul(price).toNumber()}\n                      accountBalance={collateral.availableCollateral}\n                      accountBalance$={collateral.availableCollateral.mul(price).toNumber()}\n                      delegatedBalance={collateral.totalAssigned.toNumber()}\n                      delegatedBalance$={collateral.totalAssigned.mul(price).toNumber()}\n                      unlockDate={unlockDate}\n                      final={index === assets.length - 1}\n                    />\n                  );\n                })}\n              </>\n            )}\n          </Tbody>\n        </Table>\n      )}\n    </TableContainer>\n  );\n};\n","import { Skeleton, SkeletonCircle, SkeletonProps } from '@chakra-ui/react';\n\ninterface SynthSkeletonProps extends SkeletonProps {\n  children: React.ReactNode;\n}\n\nexport const SynthSkeleton = ({ children, ...props }: SynthSkeletonProps) => {\n  return (\n    <Skeleton startColor=\"gray.700\" endColor=\"navy.800\" {...props}>\n      {children}\n    </Skeleton>\n  );\n};\n\nexport const SynthCircle = ({ children, ...props }: SkeletonProps) => {\n  return (\n    <SkeletonCircle startColor=\"gray.700\" endColor=\"navy.800\" {...props}>\n      {children}\n    </SkeletonCircle>\n  );\n};\n","import { Tr, Td, Flex, Button, Text } from '@chakra-ui/react';\nimport { SynthSkeleton as Skeleton, SynthCircle as SkeletonCircle } from '../../SynthSkeleton';\nimport { TokenIcon } from '../../TokenIcon';\n\nexport const AssetRowLoading = ({ final }: { final?: boolean }) => {\n  return (\n    <Tr borderBottomWidth={final ? 'none' : '1px'}>\n      <Td border=\"none\">\n        <Flex alignItems=\"center\">\n          <SkeletonCircle>\n            <TokenIcon symbol=\"SNX\" />\n          </SkeletonCircle>\n          <Flex flexDirection=\"column\" ml={3}>\n            <Skeleton height=\"1rem\" width=\"40%\" mb={1}>\n              <Text color=\"white\" fontWeight={700} lineHeight=\"1.25rem\" fontFamily=\"heading\">\n                SNX\n              </Text>\n            </Skeleton>\n            <Skeleton height=\"0.75rem\" width=\"70%\">\n              <Text color=\"gray.500\" fontFamily=\"heading\" fontSize=\"0.75rem\" lineHeight=\"1rem\">\n                Synthetix Network Token\n              </Text>\n            </Skeleton>\n          </Flex>\n        </Flex>\n      </Td>\n      <Td border=\"none\">\n        <Flex flexDirection=\"column\" alignItems=\"flex-end\">\n          <Skeleton height=\"1rem\" width=\"40%\" mb={1}>\n            <Text color=\"white\" fontWeight={700} lineHeight=\"1.25rem\" fontFamily=\"heading\">\n              $1,500.00\n            </Text>\n          </Skeleton>\n          <Skeleton height=\"0.75rem\" width=\"70%\">\n            <Text color=\"gray.500\" fontFamily=\"heading\" fontSize=\"0.75rem\" lineHeight=\"1rem\">\n              750.00 SNX\n            </Text>\n          </Skeleton>\n        </Flex>\n      </Td>\n      <Td border=\"none\">\n        <Flex flexDirection=\"column\" alignItems=\"flex-end\">\n          <Skeleton height=\"1rem\" width=\"40%\" mb={1}>\n            <Text color=\"white\" fontWeight={700} lineHeight=\"1.25rem\" fontFamily=\"heading\">\n              $2,000.00\n            </Text>\n          </Skeleton>\n          <Skeleton height=\"0.75rem\" width=\"70%\">\n            <Text color=\"gray.500\" fontFamily=\"heading\" fontSize=\"0.75rem\" lineHeight=\"1rem\">\n              1,000.00 SNX\n            </Text>\n          </Skeleton>\n        </Flex>\n      </Td>\n      <Td border=\"none\">\n        <Flex flexDirection=\"column\" alignItems=\"flex-end\">\n          <Skeleton height=\"1rem\" width=\"40%\" mb={1}>\n            <Text color=\"white\" fontWeight={700} lineHeight=\"1.25rem\" fontFamily=\"heading\">\n              $2,000.00\n            </Text>\n          </Skeleton>\n          <Skeleton height=\"0.75rem\" width=\"70%\">\n            <Text color=\"gray.500\" fontFamily=\"heading\" fontSize=\"0.75rem\" lineHeight=\"1rem\">\n              1,000.00 SNX\n            </Text>\n          </Skeleton>\n        </Flex>\n      </Td>\n      <Td border=\"none\">\n        <Flex flexDirection=\"column\">\n          <Skeleton height=\"1rem\">\n            <Button\n              variant=\"unstyled\"\n              fontSize=\"0.75rem\"\n              lineHeight=\"1rem\"\n              height=\"1.75rem\"\n              fontWeight={700}\n              borderWidth=\"1px\"\n              borderColor=\"gray.900\"\n              borderRadius=\"4px\"\n              disabled\n            >\n              Withdraw\n            </Button>\n          </Skeleton>\n        </Flex>\n      </Td>\n    </Tr>\n  );\n};\n","import { Flex, Text } from '@chakra-ui/react';\n\nexport const AssetsEmpty = () => {\n  return (\n    <Flex justifyContent=\"space-between\" alignItems=\"baseline\" w=\"100%\">\n      <Text color=\"gray.500\" fontWeight={500} fontSize=\"14px\" my=\"4\" pl=\"3\">\n        No collateral configured for this chain.\n      </Text>\n    </Flex>\n  );\n};\n","import { AccountCollateralType } from '@snx-v3/useAccountCollateral';\nimport { CollateralType } from '@snx-v3/useCollateralTypes';\nimport Wei, { wei } from '@synthetixio/wei';\nimport { ONEWEI, ZEROWEI } from './constants';\n\nexport interface Asset {\n  collateral: AccountCollateralType;\n  balance: Wei;\n  price: Wei | undefined;\n}\n\nexport function calculateAssets(\n  accountCollaterals?: AccountCollateralType[],\n  associatedUserBalances?:\n    | {\n        balance: Wei;\n        tokenAddress: string;\n      }[]\n    | undefined,\n  collateralPrices?: Record<string, Wei | undefined>,\n  collateralTypes?: CollateralType[],\n  isBase?: boolean,\n  USDCAddress?: string\n): Asset[] | undefined {\n  if (!accountCollaterals && !associatedUserBalances && !collateralPrices) return;\n\n  const filteredAccountCollaterals = accountCollaterals?.filter(\n    (item) => item.displaySymbol !== 'snxUSD'\n  );\n\n  // Empty state\n  if (collateralTypes && !filteredAccountCollaterals) {\n    // Because we are mapping over collateral types we need to convert sUSDC symbol to USDC\n    return collateralTypes.map((collateral) => {\n      if (isBase && collateral.symbol === 'USDC') {\n        return {\n          collateral: {\n            ...collateral,\n            availableCollateral: ZEROWEI,\n            totalDeposited: ZEROWEI,\n            totalAssigned: ZEROWEI,\n            totalLocked: ZEROWEI,\n          },\n          balance: associatedUserBalances\n            ? associatedUserBalances.find(\n                (balance) => balance.tokenAddress === collateral.tokenAddress\n              )?.balance || ZEROWEI\n            : ZEROWEI,\n          price: ONEWEI,\n        };\n      }\n\n      return {\n        collateral: {\n          tokenAddress: collateral.tokenAddress,\n          symbol: collateral.symbol,\n          displaySymbol: collateral.displaySymbol,\n          availableCollateral: ZEROWEI,\n          totalDeposited: ZEROWEI,\n          totalAssigned: ZEROWEI,\n          totalLocked: ZEROWEI,\n        },\n        balance: ZEROWEI,\n        price: ZEROWEI,\n      };\n    });\n  }\n\n  if (associatedUserBalances && collateralPrices) {\n    return filteredAccountCollaterals?.map((collateral) => {\n      let balance =\n        associatedUserBalances.find(\n          (item) => item.tokenAddress.toLowerCase() === collateral.tokenAddress.toLowerCase()\n        )?.balance || wei(0);\n      const price = collateralPrices[collateral.tokenAddress] ?? ONEWEI;\n\n      // ANDROMEDA CASE\n      if (isBase && collateral.symbol === 'USDC') {\n        // We also want to show the USDC balance, not the sUSDC balance\n        balance =\n          associatedUserBalances.find((balance) => balance.tokenAddress === USDCAddress)?.balance ||\n          wei(0);\n      }\n\n      return {\n        collateral,\n        balance,\n        price,\n      };\n    });\n  }\n}\n\nexport function calculateTotalAssets(assets?: Asset[]) {\n  return assets\n    ?.map((asset) => {\n      const assigned = asset.collateral.totalAssigned.mul(asset.price);\n      const deposited = asset.collateral.totalDeposited.mul(asset.price);\n      const wallet = asset.balance.mul(asset.price);\n      // if already assigned to pool, we dont add it\n      return assigned !== deposited ? assigned.add(wallet) : assigned.add(wallet).add(deposited);\n    })\n    .reduce((prev, cur) => prev.add(cur), ZEROWEI)\n    .toNumber()\n    .toFixed(2);\n}\n\nexport function calculateTotalAssetsDelegated(assets?: Asset[]) {\n  return assets\n    ?.map((asset) => asset.collateral.totalAssigned.mul(asset.price))\n    .reduce((prev, cur) => prev.add(cur), ZEROWEI)\n    .toNumber()\n    .toFixed(2);\n}\n\nexport function calculateTotalAssetsAvailable(assets?: Asset[]) {\n  return assets\n    ?.map((asset) => {\n      const assigned = asset.collateral.availableCollateral;\n      const wallet = asset.balance.mul(asset.price);\n      return assigned.add(wallet);\n    })\n    .reduce((prev, cur) => prev.add(cur), ZEROWEI)\n    .toNumber()\n    .toFixed(2);\n}\n","import { useMemo } from 'react';\nimport { useAccountCollateral } from '@snx-v3/useAccountCollateral';\nimport { useCollateralPrices } from '@snx-v3/useCollateralPrices';\nimport { useTokenBalances } from '@snx-v3/useTokenBalance';\nimport { useSearchParams } from 'react-router-dom';\nimport { AssetsTable } from './AssetTable';\nimport { calculateAssets } from '../../utils/assets';\nimport { useCollateralTypes } from '@snx-v3/useCollateralTypes';\nimport { useAccountCollateralUnlockDate } from '@snx-v3/useAccountCollateralUnlockDate';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { useGetUSDTokens } from '@snx-v3/useGetUSDTokens';\n\nexport const AssetsList = () => {\n  const [params] = useSearchParams();\n  const { network } = useNetwork();\n  const accountId = params.get('accountId') || undefined;\n\n  const { data: accountCollaterals, isLoading: isAccountCollateralsLoading } = useAccountCollateral(\n    {\n      accountId,\n    }\n  );\n  const { data: usdTokens } = useGetUSDTokens();\n\n  const collateralAddresses =\n    isBaseAndromeda(network?.id, network?.preset) && usdTokens?.USDC\n      ? accountCollaterals\n        ? accountCollaterals\n            ?.map((collateral) => collateral.tokenAddress)\n            .concat(usdTokens?.USDC) || []\n        : [usdTokens?.USDC]\n      : accountCollaterals?.map((collateral) => collateral.tokenAddress) || [];\n\n  const { data: userTokenBalances, isLoading: tokenBalancesIsLoading } =\n    useTokenBalances(collateralAddresses);\n\n  const associatedUserBalances = userTokenBalances?.map((balance, index) => {\n    return {\n      balance,\n      tokenAddress: collateralAddresses[index],\n    };\n  });\n\n  const { data: collateralPrices, isLoading: isCollateralPricesLoading } = useCollateralPrices();\n\n  const { data: collateralTypes, isLoading: isCollateralTypesLoading } = useCollateralTypes();\n\n  const { data: accountCollateralUnlockDate, isLoading: isAccountCollateralDateLoading } =\n    useAccountCollateralUnlockDate({\n      accountId,\n    });\n\n  const combinedCollateral = useMemo(() => {\n    return accountCollaterals &&\n      accountCollaterals[0] &&\n      isBaseAndromeda(network?.id, network?.preset)\n      ? [\n          accountCollaterals?.reduce((cur, prev, index) => {\n            //ignore the first iteration cause we are starting witht the first index of the\n            // array as a default\n            if (!index) return cur;\n            return {\n              ...cur,\n              availableCollateral: cur.availableCollateral.add(prev.availableCollateral),\n            };\n          }, accountCollaterals[0]),\n        ]\n      : accountCollaterals;\n  }, [accountCollaterals, network?.id, network?.preset]);\n\n  const isBase = isBaseAndromeda(network?.id, network?.preset);\n\n  const assets = useMemo(\n    () =>\n      calculateAssets(\n        combinedCollateral,\n        associatedUserBalances,\n        collateralPrices,\n        collateralTypes,\n        isBase,\n        usdTokens?.USDC\n      ),\n    [\n      combinedCollateral,\n      associatedUserBalances,\n      collateralPrices,\n      collateralTypes,\n      isBase,\n      usdTokens?.USDC,\n    ]\n  );\n\n  const isLoading =\n    isAccountCollateralsLoading ||\n    tokenBalancesIsLoading ||\n    isCollateralPricesLoading ||\n    isCollateralTypesLoading ||\n    isAccountCollateralDateLoading;\n\n  return (\n    <AssetsTable isLoading={isLoading} assets={assets} unlockDate={accountCollateralUnlockDate} />\n  );\n};\n","import { ethers } from 'ethers';\nimport { useQuery } from '@tanstack/react-query';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { useNetwork } from '@snx-v3/useBlockchain';\n\nexport function useAccountCollateralUnlockDate({ accountId }: { accountId?: string }) {\n  const { data: CoreProxy } = useCoreProxy();\n  const { network } = useNetwork();\n\n  return useQuery({\n    queryKey: [`${network?.id}-${network?.preset}`, 'AccountCollateralUnlockDate', { accountId }],\n    enabled: Boolean(CoreProxy && accountId),\n    queryFn: async function () {\n      if (!CoreProxy || !accountId) throw new Error('Core Proxy or account id is not defined');\n\n      const [lastInteraction, accountTimeoutWithdraw] = await Promise.all([\n        CoreProxy.getAccountLastInteraction(accountId),\n        CoreProxy.getConfigUint(ethers.utils.formatBytes32String('accountTimeoutWithdraw')),\n      ]);\n\n      const collateralUnlock = lastInteraction.add(accountTimeoutWithdraw);\n\n      return new Date(collateralUnlock.toNumber() * 1000);\n    },\n  });\n}\n","import { Alert, AlertIcon, AlertProps, Link, Text } from '@chakra-ui/react';\nimport Wei from '@synthetixio/wei';\n\ninterface CollateralAlertProps extends AlertProps {\n  tokenBalance: Wei;\n}\n\nexport const CollateralAlert = ({ tokenBalance, ...props }: CollateralAlertProps) => {\n  return (\n    <Alert borderLeftColor=\"cyan.500\" borderRadius=\"6px\" {...props}>\n      <AlertIcon color=\"cyan.500\" />\n      <Text color=\"white\" fontFamily=\"heading\" fontSize=\"16px\" lineHeight=\"24px\">\n        You have a {tokenBalance.toString(2)} SNX active staking position on V2. You&lsquo;ll need\n        to unstake on V2 before being able to deposit on V3.{' '}\n        <Link textDecor=\"underline\" href=\"https://staking.synthetix.io/\" target=\"_blank\">\n          Go to V2\n        </Link>\n      </Text>\n    </Alert>\n  );\n};\n","import { Flex, FlexProps } from '@chakra-ui/react';\n\nexport const BorderBox = (props: FlexProps) => (\n  <Flex bg=\"navy.700\" borderWidth=\"1px\" borderColor=\"gray.900\" borderRadius=\"base\" {...props} />\n);\n","export function etherscanLink({\n  chain,\n  address,\n  isTx = false,\n}: {\n  chain: string;\n  address: string;\n  isTx?: boolean;\n}): string {\n  switch (chain) {\n    case 'sepolia':\n      return `https://sepolia.etherscan.io/${isTx ? 'tx' : 'address'}/${address}`;\n    case 'arbitrum':\n      return `https://arbiscan.io/${isTx ? 'tx' : 'address'}/${address}`;\n    case 'optimism':\n      return `https://optimistic.etherscan.io/${isTx ? 'tx' : 'address'}/${address}`;\n    case 'base':\n      return `https://basescan.org/${isTx ? 'tx' : 'address'}/${address}`;\n    case 'base-sepolia':\n      return `https://sepolia.basescan.org/${isTx ? 'tx' : 'address'}/${address}`;\n    case 'mainnet':\n    default:\n      return `https://etherscan.io/${isTx ? 'tx' : 'address'}/${address}`;\n  }\n}\n","import { CheckIcon, CloseIcon } from '@chakra-ui/icons';\nimport {\n  ModalContent,\n  ModalBody,\n  ModalHeader,\n  Modal,\n  Text,\n  Flex,\n  ModalOverlay,\n  CircularProgress,\n  Link,\n  Button,\n} from '@chakra-ui/react';\nimport { useEffect, useState } from 'react';\nimport { etherscanLink } from '@snx-v3/etherscanLink';\nimport { useNetwork } from '@snx-v3/useBlockchain';\n\ninterface RewardsModalInterface {\n  collateralSymbol?: string;\n  amount?: number;\n  txnStatus?: string;\n  txnHash: string | null;\n}\n\nexport const RewardsModal = ({\n  collateralSymbol,\n  amount,\n  txnStatus,\n  txnHash,\n}: RewardsModalInterface) => {\n  const [isOpen, setIsOpen] = useState(false);\n\n  const { network } = useNetwork();\n\n  useEffect(() => {\n    if (txnStatus === 'prompting') {\n      setIsOpen(true);\n    }\n    if (txnStatus === 'error') {\n      setIsOpen(false);\n    }\n    if (txnStatus === 'success') {\n      setTimeout(() => {\n        setIsOpen(false);\n      }, 1200);\n    }\n  }, [txnStatus]);\n\n  return (\n    <Modal isOpen={isOpen} onClose={() => setIsOpen(false)}>\n      <ModalOverlay bg=\"#06061B80\" />\n      <ModalContent\n        bg=\"navy.700\"\n        mt=\"10%\"\n        borderWidth=\"1px\"\n        borderColor=\"gray.900\"\n        minWidth=\"384px\"\n      >\n        <ModalBody p={4}>\n          <Flex\n            onClick={() => setIsOpen(false)}\n            justifyContent=\"flex-end\"\n            border=\"none\"\n            boxShadow=\"none\"\n            _focus={{ outline: 'none' }}\n          >\n            <CloseIcon _hover={{ cursor: 'pointer' }} />\n          </Flex>\n          <ModalHeader\n            pl={0}\n            py={1}\n            color=\"whiteAlpha.900\"\n            fontSize=\"20px\"\n            fontWeight={700}\n            lineHeight=\"120%\"\n            textAlign=\"left\"\n          >\n            Transaction Pending\n          </ModalHeader>\n          <Text\n            p={3}\n            pl={0}\n            color=\"gray.600\"\n            fontFamily=\"heading\"\n            fontSize=\"12px\"\n            lineHeight=\"150%\"\n            mb={2}\n          >\n            Follow the Metamask prompts to execute the following transactions.\n          </Text>\n          <Flex\n            px={3}\n            py={3}\n            borderRadius=\"5px\"\n            border=\"1px solid\"\n            borderColor={txnStatus === 'success' ? 'green.500' : 'gray.900'}\n          >\n            <Flex\n              justifyContent=\"center\"\n              alignItems=\"center\"\n              borderRadius=\"100px\"\n              bg={txnStatus === 'success' ? 'green.600' : 'gray.900'}\n              width=\"40px\"\n              height=\"40px\"\n              p={3}\n            >\n              {txnStatus === 'success' ? (\n                <CheckIcon color=\"white\" />\n              ) : (\n                <CircularProgress size=\"25px\" isIndeterminate color=\"gray.700\" />\n              )}\n            </Flex>\n            <Flex\n              flexDirection=\"column\"\n              alignItems=\"space-between\"\n              justifyContent=\"space-between\"\n              ml={2}\n            >\n              <Text fontSize=\"14px\" fontWeight={700} lineHeight=\"20px\" color=\"white\">\n                Claiming {amount ? amount : ''} {collateralSymbol ? collateralSymbol : ''}\n              </Text>\n              <Text fontSize=\"12px\" lineHeight=\"16px\" color=\"gray.500\">\n                Claim your rewards\n              </Text>\n            </Flex>\n          </Flex>\n          {txnStatus === 'success' && (\n            <Button\n              mt={5}\n              variant=\"solid\"\n              justifyContent=\"center\"\n              px={3}\n              py={3}\n              width=\"100%\"\n              textAlign=\"center\"\n            >\n              Done\n            </Button>\n          )}\n          {txnHash && (\n            <Flex\n              justifyContent=\"center\"\n              px={3}\n              py={3}\n              mt={6}\n              mb={1}\n              borderTop=\"1px solid\"\n              borderTopColor=\"gray.900\"\n            >\n              <Link\n                variant=\"outline\"\n                href={etherscanLink({ chain: network?.name || '', address: txnHash, isTx: true })}\n                fontFamily=\"heading\"\n                color=\"cyan.500\"\n                fontWeight={700}\n                lineHeight=\"20px\"\n                fontSize=\"14px\"\n                target=\"_blank\"\n                mt={3}\n              >\n                View Transaction\n              </Link>\n            </Flex>\n          )}\n        </ModalBody>\n      </ModalContent>\n    </Modal>\n  );\n};\n","import { formatDistanceToNow, intlFormat } from 'date-fns';\n\nexport function convertSecondsToDisplayString(seconds: number) {\n  const secondsInHour = 3600;\n  const secondsInDay = 86400;\n  const secondsInWeek = 604800;\n  const secondsInMonth = 2592000;\n\n  if (seconds === 0) {\n    return null;\n  } else if (seconds % secondsInMonth === 0) {\n    const months = seconds / secondsInMonth;\n    return months === 1 ? 'every month' : `every ${months} months`;\n  } else if (seconds % secondsInWeek === 0) {\n    const weeks = seconds / secondsInWeek;\n    return weeks === 1 ? 'every week' : `every ${weeks} weeks`;\n  } else if (seconds % secondsInDay === 0) {\n    const days = seconds / secondsInDay;\n    return days === 1 ? 'every day' : `every ${days} days`;\n  } else if (seconds % secondsInHour === 0) {\n    const hours = seconds / secondsInHour;\n    return hours === 1 ? 'every hour' : `every ${hours.toFixed(1)} hours`;\n  } else {\n    const hours = seconds / secondsInHour;\n    return `every ${hours.toFixed(1)} hours`;\n  }\n}\n\nexport function convertToReadableInterval(total: number, seconds: number) {\n  // If the distribution is immediate, we return immediate, otherwise we return the amount per week\n  const secondInWeek = 604800;\n  if (seconds === 0) {\n    return { amount: total, frequencyString: null };\n  } else {\n    const ratio = seconds / secondInWeek;\n    const amount = total / ratio;\n    return { amount: Math.floor(amount), frequencyString: 'per week' };\n  }\n}\n\nexport const formatTimeToUnlock = (accountCollateralUnlockDate: Date | undefined) => {\n  if (!accountCollateralUnlockDate || accountCollateralUnlockDate.getTime() <= Date.now()) {\n    return undefined;\n  }\n  return formatDistanceToNow(accountCollateralUnlockDate, { addSuffix: true });\n};\n\nexport const unlockDateString = (accountCollateralUnlockDate: Date | undefined) => {\n  if (!accountCollateralUnlockDate || accountCollateralUnlockDate.getTime() <= Date.now()) {\n    return undefined;\n  }\n\n  return intlFormat(accountCollateralUnlockDate, {\n    year: 'numeric',\n    month: 'numeric',\n    day: 'numeric',\n    hour: 'numeric',\n    minute: 'numeric',\n  });\n};\n","export const truncateAddress = (address: string, first = 5, last = 5) => {\n  if (address.length <= first + last) {\n    return address;\n  }\n  return `${address.slice(0, first)}...${address.slice(-last)}`;\n};\n\nexport const parseFloatWithCommas = (numberWithCommas: string) =>\n  parseFloat(numberWithCommas.replaceAll(',', ''));\n","import { Flex, Td, Text, Button, Fade, Tr, Link } from '@chakra-ui/react';\nimport { CollateralIcon } from '@snx-v3/icons';\nimport { useClaimRewards } from '@snx-v3/useClaimRewards';\nimport { useCollateralType } from '@snx-v3/useCollateralTypes';\nimport { useParams } from '@snx-v3/useParams';\nimport { RewardsModal } from './RewardsModal';\nimport { truncateAddress, convertToReadableInterval } from '@snx-v3/formatters';\nimport { Amount } from '@snx-v3/Amount';\nimport { wei } from '@synthetixio/wei';\nimport { etherscanLink } from '@snx-v3/etherscanLink';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { Tooltip } from '@snx-v3/Tooltip';\n\ninterface RewardsRowInterface {\n  symbol: string;\n  frequency: number;\n  claimableAmount: number; // The immediate amount claimable as read from the contracts\n  lifetimeClaimed: number;\n  hasClaimed: boolean;\n  address: string;\n  readOnly: boolean;\n  total: number;\n}\n\nexport const RewardsRow = ({\n  symbol,\n  frequency,\n  claimableAmount,\n  lifetimeClaimed,\n  hasClaimed,\n  address,\n  readOnly,\n  total,\n}: RewardsRowInterface) => {\n  const { accountId, collateralSymbol, poolId } = useParams();\n\n  const { data: collateralData } = useCollateralType(collateralSymbol);\n  const { network } = useNetwork();\n\n  const { exec, txnState } = useClaimRewards(\n    poolId || '',\n    collateralData?.tokenAddress || '',\n    accountId,\n    address,\n    claimableAmount\n  );\n\n  const onClick = () => {\n    exec();\n  };\n\n  const { txnStatus, txnHash } = txnState;\n\n  // We want to pass in the total, as well as the\n  const { amount, frequencyString } = convertToReadableInterval(total, frequency);\n\n  const claimButtonLabel = () => {\n    if (claimableAmount > 0 || !hasClaimed) {\n      return 'Claim';\n    }\n\n    return 'Claimed';\n  };\n\n  const link = etherscanLink({ chain: network?.name || 'mainnet', address });\n\n  return (\n    <>\n      <RewardsModal\n        amount={claimableAmount}\n        collateralSymbol={symbol}\n        txnStatus={txnStatus}\n        txnHash={txnHash}\n      />\n      <Tr>\n        <Td display=\"flex\" alignItems=\"center\" px=\"14px\" border=\"none\" w=\"100%\">\n          <Fade in>\n            <CollateralIcon height=\"30px\" width=\"30px\" symbol={symbol} />\n          </Fade>\n          <Fade in>\n            <Flex flexDirection=\"column\" ml=\"12px\">\n              <Link href={link} target=\"_blank\">\n                <Tooltip label={`Distributed by ${truncateAddress(address)}`}>\n                  <Text\n                    color=\"gray.50\"\n                    fontSize=\"14px\"\n                    fontFamily=\"heading\"\n                    fontWeight={500}\n                    lineHeight=\"20px\"\n                  >\n                    <Amount showTooltip={false} value={wei(amount)} suffix={` ${symbol}`} />\n                  </Text>\n                </Tooltip>\n              </Link>\n              {frequencyString && total > 0 && (\n                <Text color=\"gray.500\" fontSize=\"12px\" fontFamily=\"heading\" lineHeight=\"16px\">\n                  {frequencyString}\n                </Text>\n              )}\n            </Flex>\n          </Fade>\n        </Td>\n        <Td alignItems=\"center\" px=\"14px\" border=\"none\">\n          <Fade in>\n            <Text\n              color=\"gray.50\"\n              fontSize=\"14px\"\n              fontFamily=\"heading\"\n              fontWeight={500}\n              lineHeight=\"20px\"\n            >\n              <Amount value={wei(claimableAmount)} />\n              {` ${symbol}`}\n            </Text>\n            {lifetimeClaimed > 0 && (\n              <Text color=\"gray.500\" fontSize=\"12px\" fontFamily=\"heading\" lineHeight=\"16px\">\n                <Tooltip label=\"Total claimed over lifetime\">Lifetime: &nbsp;</Tooltip>\n                <Amount value={wei(lifetimeClaimed)} />\n                {symbol}\n              </Text>\n            )}\n          </Fade>\n        </Td>\n        {!readOnly && (\n          <Td border=\"none\" px=\"0px\">\n            <Fade in>\n              <Button\n                w=\"100%\"\n                size=\"sm\"\n                variant=\"solid\"\n                isDisabled={claimableAmount === 0}\n                _disabled={{\n                  bg: 'gray.900',\n                  backgroundImage: 'none',\n                  color: 'gray.500',\n                  opacity: 0.5,\n                  cursor: 'not-allowed',\n                }}\n                onClick={onClick}\n              >\n                {claimButtonLabel()}\n              </Button>\n            </Fade>\n          </Td>\n        )}\n      </Tr>\n    </>\n  );\n};\n","import { useReducer } from 'react';\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { BigNumber } from 'ethers';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { initialState, reducer } from '@snx-v3/txnReducer';\nimport { useNetwork } from '@snx-v3/useBlockchain';\n\nexport function useClaimRewards(\n  poolId?: string,\n  collateralAddress?: string,\n  accountId?: string,\n  distributorAddress?: string,\n  amount?: number\n) {\n  const { network } = useNetwork();\n  const { data: CoreProxy } = useCoreProxy();\n  const [txnState, dispatch] = useReducer(reducer, initialState);\n  const client = useQueryClient();\n\n  const mutation = useMutation({\n    mutationFn: async function () {\n      try {\n        if (!amount) return;\n        if (!poolId || !collateralAddress || !accountId || !distributorAddress || !network)\n          throw new Error('Parameters Undefined');\n        if (!CoreProxy) throw new Error('CoreProxy undefined');\n\n        dispatch({ type: 'prompting' });\n\n        const tx = await CoreProxy.claimRewards(\n          BigNumber.from(accountId),\n          BigNumber.from(poolId),\n          collateralAddress,\n          distributorAddress\n        );\n\n        dispatch({ type: 'pending', payload: { txnHash: tx.hash } });\n\n        const res = await tx.wait();\n\n        let claimedAmount: BigNumber | undefined;\n\n        res.logs.forEach((log: any) => {\n          if (log.topics[0] === CoreProxy.interface.getEventTopic('RewardsClaimed')) {\n            const { amount } = CoreProxy.interface.decodeEventLog(\n              'RewardsClaimed',\n              log.data,\n              log.topics\n            );\n            claimedAmount = amount;\n          }\n        });\n\n        dispatch({ type: 'success' });\n        client.invalidateQueries({ queryKey: [`${network?.id}-${network?.preset}`, 'Rewards'] });\n        return claimedAmount;\n      } catch (error) {\n        const err = error as Error;\n        dispatch({ type: 'error', payload: { error: err } });\n\n        return 0;\n      }\n    },\n  });\n\n  return {\n    mutation,\n    txnState,\n    settle: () => dispatch({ type: 'settled' }),\n    isLoading: mutation.isPending,\n    exec: mutation.mutateAsync,\n  };\n}\n","import { Tbody, Tr, Td, SkeletonCircle, Skeleton, Text } from '@chakra-ui/react';\n\nexport const RewardsLoading = () => (\n  <Tbody width=\"100%\">\n    <Tr borderBottom=\"1px solid #2D2D38\">\n      <Td pl=\"16px\" border=\"none\">\n        <SkeletonCircle startColor=\"whiteAlpha.500\" endColor=\"whiteAlpha.200\" h=\"30px\" w=\"30px\" />\n      </Td>\n      <Td pl=\"16px\" border=\"none\">\n        <Skeleton startColor=\"whiteAlpha.500\" endColor=\"whiteAlpha.200\" height=\"30px\">\n          <Text mr={4}>Loading</Text>\n        </Skeleton>\n      </Td>\n      <Td textAlign=\"end\" pr=\"0px\" border=\"none\">\n        <Skeleton startColor=\"whiteAlpha.500\" endColor=\"whiteAlpha.200\" height=\"30px\">\n          <Text>Loading</Text>\n        </Skeleton>\n      </Td>\n    </Tr>\n    <Tr borderBottom=\"1px solid #2D2D38\">\n      <Td pl=\"16px\" border=\"none\">\n        <SkeletonCircle startColor=\"whiteAlpha.200\" endColor=\"whiteAlpha.500\" h=\"30px\" w=\"30px\" />\n      </Td>\n      <Td pl=\"16px\" border=\"none\">\n        <Skeleton startColor=\"whiteAlpha.200\" endColor=\"whiteAlpha.500\" height=\"30px\">\n          <Text mr={4}>Loading</Text>\n        </Skeleton>\n      </Td>\n      <Td textAlign=\"end\" pr=\"0px\" border=\"none\">\n        <Skeleton startColor=\"whiteAlpha.200\" endColor=\"whiteAlpha.500\" height=\"30px\">\n          <Text>Loading</Text>\n        </Skeleton>\n      </Td>\n    </Tr>\n    <Tr borderBottom=\"1px solid #2D2D38\">\n      <Td pl=\"16px\" border=\"none\">\n        <SkeletonCircle startColor=\"whiteAlpha.500\" endColor=\"whiteAlpha.200\" h=\"30px\" w=\"30px\" />\n      </Td>\n      <Td pl=\"16px\" border=\"none\">\n        <Skeleton startColor=\"whiteAlpha.500\" endColor=\"whiteAlpha.200\" height=\"30px\">\n          <Text mr={4}>Loading</Text>\n        </Skeleton>\n      </Td>\n      <Td textAlign=\"end\" pr=\"0px\" border=\"none\">\n        <Skeleton startColor=\"whiteAlpha.500\" endColor=\"whiteAlpha.200\" height=\"30px\">\n          <Text>Loading</Text>\n        </Skeleton>\n      </Td>\n    </Tr>\n  </Tbody>\n);\n","import {\n  Table,\n  TableContainer,\n  Tbody,\n  Text,\n  Th,\n  Thead,\n  Tr,\n  Flex,\n  Fade,\n  FlexProps,\n} from '@chakra-ui/react';\nimport { BorderBox } from '@snx-v3/BorderBox';\nimport { RewardsRow } from './RewardsRow';\nimport { RewardsType } from '@snx-v3/useRewards';\nimport { RewardsLoading } from './RewardsLoading';\nimport { InfoIcon } from '@chakra-ui/icons';\nimport { Tooltip } from '@snx-v3/Tooltip';\n\ninterface RewardsDistributorsInterface extends FlexProps {\n  rewards?: RewardsType;\n  isLoading: boolean;\n  readOnly?: boolean;\n}\n\nexport const Rewards = ({\n  rewards,\n  isLoading,\n  readOnly = false,\n  ...props\n}: RewardsDistributorsInterface) => {\n  const hasRewards = rewards && rewards.length > 0;\n\n  return (\n    <BorderBox bg=\"navy.700\" py={4} px={4} flexDir=\"column\" {...props}>\n      <Text color=\"gray.500\" fontFamily=\"heading\" lineHeight=\"4\" fontSize=\"xs\" mb=\"8px\">\n        REWARDS\n      </Text>\n      {!isLoading && !hasRewards ? (\n        <Fade in>\n          <Flex mt=\"20px\" mb=\"8px\" justifyContent=\"center\">\n            <Text color=\"gray.500\" fontFamily=\"heading\" lineHeight=\"4\" fontSize=\"xs\">\n              No Rewards Available\n            </Text>\n          </Flex>\n        </Fade>\n      ) : (\n        <TableContainer width=\"100%\" mb=\"8px\">\n          <Table>\n            <Thead>\n              <Tr borderBottom=\"1px solid #2D2D38\">\n                <Th\n                  textTransform=\"unset\"\n                  color=\"gray.600\"\n                  border=\"none\"\n                  fontFamily=\"heading\"\n                  fontSize=\"12px\"\n                  lineHeight=\"16px\"\n                  letterSpacing={0.6}\n                  fontWeight={700}\n                  px={4}\n                  py={3}\n                >\n                  Active Rewards\n                  <Tooltip label=\"Total rewards active for the Pool\">\n                    <InfoIcon ml={1} mb=\"1px\" />\n                  </Tooltip>\n                </Th>\n                <Th\n                  textTransform=\"unset\"\n                  color=\"gray.600\"\n                  border=\"none\"\n                  fontFamily=\"heading\"\n                  fontSize=\"12px\"\n                  lineHeight=\"16px\"\n                  letterSpacing={0.6}\n                  fontWeight={700}\n                  px={4}\n                  py={3}\n                >\n                  Earnings\n                </Th>\n                <Th\n                  textTransform=\"unset\"\n                  color=\"transparent\"\n                  border=\"none\"\n                  fontFamily=\"heading\"\n                  fontSize=\"12px\"\n                  lineHeight=\"16px\"\n                  letterSpacing={0.6}\n                  fontWeight={700}\n                  px={4}\n                  py={3}\n                >\n                  Claim\n                </Th>\n              </Tr>\n            </Thead>\n            {isLoading ? (\n              <RewardsLoading />\n            ) : (\n              <Tbody>\n                {rewards?.map((item) => (\n                  <RewardsRow\n                    key={item.address}\n                    symbol={item.symbol}\n                    claimableAmount={item.claimableAmount.toNumber()}\n                    frequency={item.duration}\n                    lifetimeClaimed={item.lifetimeClaimed}\n                    hasClaimed={item.lifetimeClaimed > 0}\n                    address={item.distributorAddress}\n                    readOnly={readOnly}\n                    total={item.total}\n                  />\n                ))}\n              </Tbody>\n            )}\n          </Table>\n        </TableContainer>\n      )}\n    </BorderBox>\n  );\n};\n","import { InfoIcon } from '@chakra-ui/icons';\nimport { Flex, Text, Fade } from '@chakra-ui/react';\nimport { SynthSkeleton as Skeleton } from '../SynthSkeleton';\nimport { ReactNode } from 'react';\nimport { Tooltip } from '@snx-v3/Tooltip';\n\ninterface StatBoxProps {\n  isLoading: boolean;\n  title: string;\n  label?: string | ReactNode;\n  value?: string;\n}\n\nexport const StatBox = ({ isLoading, title, label, value }: StatBoxProps) => {\n  return (\n    <Flex\n      bg=\"navy.700\"\n      border=\"1px solid\"\n      borderColor=\"gray.900\"\n      rounded=\"base\"\n      flexDir=\"column\"\n      alignItems=\"center\"\n      justifyContent=\"space-between\"\n      minWidth=\"200px\"\n      flex={1}\n      height=\"88px\"\n      px={6}\n      py={4}\n    >\n      <Flex alignItems=\"center\" mb={1}>\n        <Text fontSize=\"14px\" color=\"gray.500\" mr={1}>\n          {title}\n        </Text>\n        {label && (\n          <Tooltip label={label} p={3} mt={1}>\n            <InfoIcon w=\"10px\" h=\"10px\" />\n          </Tooltip>\n        )}\n      </Flex>\n      <Flex w=\"100%\" justifyContent=\"center\" height=\"36px\" alignItems=\"center\">\n        <Skeleton\n          isLoaded={!isLoading}\n          height=\"24px\"\n          minWidth={isLoading ? '40%' : 'initial'}\n          startColor=\"gray.700\"\n          endColor=\"navy.800\"\n        >\n          <Fade in>\n            <Text fontSize=\"24px\" lineHeight=\"24px\" fontWeight={800} data-cy={`${title}-stats-box`}>\n              {value || '$0.00'}\n            </Text>\n          </Fade>\n        </Skeleton>\n      </Flex>\n    </Flex>\n  );\n};\n","import { fetchPriceUpdates, priceUpdatesToPopulatedTx } from '@snx-v3/fetchPythPrices';\nimport { stringToHash } from '@snx-v3/tsHelpers';\nimport { AccountCollateralType, loadAccountCollateral } from '@snx-v3/useAccountCollateral';\nimport { useAllCollateralPriceIds } from '@snx-v3/useAllCollateralPriceIds';\nimport { useNetwork, useProviderForChain } from '@snx-v3/useBlockchain';\nimport { loadPrices } from '@snx-v3/useCollateralPrices';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { useUSDProxy } from '@snx-v3/useUSDProxy';\nimport { erc7412Call } from '@snx-v3/withERC7412';\nimport { ZodBigNumber } from '@snx-v3/zod';\nimport Wei, { wei } from '@synthetixio/wei';\nimport { useQuery } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\nimport React from 'react';\nimport { z } from 'zod';\nimport { useAllCollateralPriceUpdates } from '../useCollateralPriceUpdates';\n\nconst PositionCollateralSchema = z.object({\n  value: ZodBigNumber.transform((x) => wei(x)).optional(), // This is currently only removed on base-goreli\n  amount: ZodBigNumber.transform((x) => wei(x)),\n});\n\nconst DebtSchema = ZodBigNumber.transform((x) => wei(x));\n\nexport const loadPosition = async ({\n  CoreProxy,\n  accountId,\n  poolId,\n  tokenAddress,\n}: {\n  CoreProxy: ethers.Contract;\n  accountId: string;\n  poolId: string;\n  tokenAddress: string;\n}) => {\n  const calls = await Promise.all([\n    CoreProxy.populateTransaction.getPositionCollateral(accountId, poolId, tokenAddress),\n    CoreProxy.populateTransaction.getPositionDebt(accountId, poolId, tokenAddress),\n  ]);\n\n  const decoder = (multicallEncoded: string | string[]) => {\n    if (Array.isArray(multicallEncoded) && multicallEncoded.length === 2) {\n      const decodedCollateral = CoreProxy.interface.decodeFunctionResult(\n        'getPositionCollateral',\n        multicallEncoded[0]\n      );\n      const decodedDebt = CoreProxy.interface.decodeFunctionResult(\n        'getPositionDebt',\n        multicallEncoded[1]\n      )[0];\n      return {\n        debt: DebtSchema.parse(decodedDebt),\n        collateral: PositionCollateralSchema.parse({ ...decodedCollateral }),\n      };\n    }\n    throw Error('Expected array with two items');\n  };\n\n  return { calls, decoder };\n};\n\nexport type LiquidityPosition = {\n  collateralAmount: Wei;\n  collateralPrice: Wei;\n  collateralValue: Wei;\n  debt: Wei;\n  accountCollateral: AccountCollateralType;\n  usdCollateral: AccountCollateralType;\n  tokenAddress: string;\n};\n\nexport const useLiquidityPosition = ({\n  tokenAddress,\n  accountId,\n  poolId,\n}: {\n  tokenAddress?: string;\n  accountId?: string;\n  poolId?: string;\n}) => {\n  const { data: collateralPriceUpdates } = useAllCollateralPriceIds();\n  const { data: CoreProxy } = useCoreProxy();\n  const { data: UsdProxy } = useUSDProxy();\n  const { network } = useNetwork();\n  const { data: priceUpdateTx } = useAllCollateralPriceUpdates();\n  const provider = useProviderForChain(network!);\n\n  const priceUpdateTxHash = React.useMemo(\n    () => (priceUpdateTx?.data ? stringToHash(priceUpdateTx?.data) : null),\n    [priceUpdateTx?.data]\n  );\n\n  return useQuery({\n    queryKey: [\n      `${network?.id}-${network?.preset}`,\n      'LiquidityPosition',\n      { accountId },\n      {\n        pool: poolId,\n        token: tokenAddress,\n      },\n      { priceUpdateTxHash },\n    ],\n    enabled: Boolean(\n      CoreProxy &&\n        accountId &&\n        poolId &&\n        tokenAddress &&\n        collateralPriceUpdates &&\n        UsdProxy &&\n        network &&\n        provider\n    ),\n    queryFn: async () => {\n      if (\n        !(\n          CoreProxy &&\n          accountId &&\n          poolId &&\n          tokenAddress &&\n          collateralPriceUpdates &&\n          UsdProxy &&\n          network &&\n          provider\n        )\n      ) {\n        throw Error('useLiquidityPosition should not be enabled');\n      }\n      const { calls: priceCalls, decoder: priceDecoder } = await loadPrices({\n        collateralAddresses: [tokenAddress],\n        CoreProxy,\n      });\n\n      const { calls: positionCalls, decoder: positionDecoder } = await loadPosition({\n        CoreProxy,\n        accountId,\n        poolId,\n        tokenAddress,\n      });\n\n      const { calls: accountCollateralCalls, decoder: accountCollateralDecoder } =\n        await loadAccountCollateral({\n          accountId,\n          tokenAddresses: [tokenAddress, UsdProxy.address],\n          CoreProxy,\n        });\n\n      const collateralPriceCalls = await fetchPriceUpdates(\n        collateralPriceUpdates,\n        network.isTestnet\n      ).then((signedData) => priceUpdatesToPopulatedTx('0x', collateralPriceUpdates, signedData));\n\n      const allCalls = collateralPriceCalls\n        .concat(priceCalls)\n        .concat(positionCalls)\n        .concat(accountCollateralCalls);\n\n      if (priceUpdateTx) {\n        allCalls.unshift(priceUpdateTx as any);\n      }\n\n      return await erc7412Call(\n        network,\n        provider,\n        allCalls,\n        (encoded) => {\n          if (!Array.isArray(encoded)) throw Error('Expected array');\n\n          const startOfPrice = 0;\n          const endOfPrice = priceCalls.length;\n          const startOfPosition = endOfPrice;\n          const endOfPosition = startOfPosition + positionCalls.length;\n\n          const startOfAccountCollateral = endOfPosition;\n          const collateralPrice = priceDecoder(encoded.slice(startOfPrice, endOfPrice));\n          const decodedPosition = positionDecoder(encoded.slice(startOfPosition, endOfPosition));\n          const [accountCollateral, usdCollateral] = accountCollateralDecoder(\n            encoded.slice(startOfAccountCollateral)\n          );\n\n          return {\n            collateralPrice: Array.isArray(collateralPrice) ? collateralPrice[0] : collateralPrice,\n            collateralAmount: decodedPosition.collateral.amount,\n            collateralValue: decodedPosition.collateral.amount.mul(collateralPrice),\n            debt: decodedPosition.debt,\n            tokenAddress,\n            accountCollateral,\n            usdCollateral,\n          };\n        },\n        `useLiquidityPosition`\n      );\n    },\n  });\n};\n","import type { MarketSnapshotByWeekSchema, PoolType } from '@snx-v3/usePoolData';\nimport { z } from 'zod';\nimport { wei, Wei } from '@synthetixio/wei';\n\ntype MarketSnapshotByWeek = z.infer<typeof MarketSnapshotByWeekSchema>;\n\nexport const calculateSevenDaysPnlGrowth = (marketSnapshots?: MarketSnapshotByWeek[]) => {\n  if (!marketSnapshots || marketSnapshots.length === 0) return undefined;\n  const end = marketSnapshots[0].pnl;\n  const start = marketSnapshots[1]?.pnl || wei(0);\n\n  return {\n    value: end.sub(start),\n    percentage: start.eq(0) ? undefined : end.sub(start).div(start.abs()),\n  };\n};\n\nexport const calculatePoolPerformanceLifetime = (poolData?: PoolType) => {\n  return poolData?.configurations.reduce((acc, { market }) => {\n    return acc.add(market.pnl);\n  }, wei(0));\n};\n\nexport const calculatePoolPerformanceSevenDays = (poolData?: PoolType) => {\n  const total = calculatePoolPerformanceLifetime(poolData);\n\n  const totalSevenDaysAgo = poolData?.configurations.reduce((acc, { market }) => {\n    return acc.add(market.market_snapshots_by_week[1]?.pnl || wei(0));\n  }, wei(0));\n\n  if (!total || !totalSevenDaysAgo) {\n    return undefined;\n  }\n\n  return {\n    value: total.sub(totalSevenDaysAgo), // Not that this value does not take into account that other pools might have exposure to markets\n    growthPercentage: totalSevenDaysAgo.eq(0)\n      ? undefined\n      : total.sub(totalSevenDaysAgo).div(totalSevenDaysAgo.abs()),\n  };\n};\n\nexport const calculateCRatio = (debt: Wei, collateralValue: Wei) =>\n  debt.eq(0) || collateralValue.eq(0) ? wei(0) : collateralValue.div(debt);\n","export function keyBy<T extends Record<K, PropertyKey>, K extends keyof T>(key: K, array: T[]) {\n  return array.reduce(\n    (acc, item) => {\n      const keyValue = item[key];\n      acc[keyValue] = item;\n      return acc;\n    },\n    {} as Record<T[K], T>\n  );\n}\n","import { CollateralType, useCollateralTypes } from '@snx-v3/useCollateralTypes';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { loadPosition } from '@snx-v3/useLiquidityPosition';\nimport { usePools } from '@snx-v3/usePools';\nimport Wei, { wei } from '@synthetixio/wei';\nimport { useQuery } from '@tanstack/react-query';\nimport { useNetwork, useProviderForChain } from '@snx-v3/useBlockchain';\nimport { loadPrices } from '@snx-v3/useCollateralPrices';\nimport { calculateCRatio } from '@snx-v3/calculations';\nimport { erc7412Call } from '@snx-v3/withERC7412';\nimport { keyBy, stringToHash } from '@snx-v3/tsHelpers';\nimport { useAllCollateralPriceIds } from '@snx-v3/useAllCollateralPriceIds';\nimport { fetchPriceUpdates, priceUpdatesToPopulatedTx } from '@snx-v3/fetchPythPrices';\nimport { useAllCollateralPriceUpdates } from '../useCollateralPriceUpdates';\n\nexport type LiquidityPositionType = {\n  id: `${string}-${string}`;\n  accountId: string;\n  poolId: string;\n  isPreferred: boolean;\n  poolName: string;\n  collateralAmount: Wei;\n  collateralPrice: Wei;\n  collateralValue: Wei;\n  collateralType: CollateralType;\n  cRatio: Wei;\n  debt: Wei;\n};\n\nexport type LiquidityPositionsById = {\n  [poolIdDashSymbol: `${string}-${string}`]: LiquidityPositionType;\n};\n\nfunction toPairs<T>(array: T[]): [T, T][] {\n  return Array.from(\n    { length: array.length / 2 },\n    (_, i) => [array[i * 2], array[i * 2 + 1]] as [T, T]\n  );\n}\n\nexport const useLiquidityPositions = ({ accountId }: { accountId?: string }) => {\n  const { data: CoreProxy } = useCoreProxy();\n\n  const { data: pools } = usePools();\n  const { data: collateralTypes } = useCollateralTypes();\n  const { data: collateralPriceUpdates } = useAllCollateralPriceIds();\n  const { data: priceUpdateTx, isLoading: collateralPriceUpdatesIsLoading } =\n    useAllCollateralPriceUpdates();\n\n  const { network } = useNetwork();\n  const provider = useProviderForChain(network!);\n\n  const query = useQuery({\n    queryKey: [\n      `${network?.id}-${network?.preset}`,\n      'LiquidityPositions',\n      { accountId },\n      {\n        pools: pools ? pools.map((pool) => pool.id).sort() : [],\n        tokens: collateralTypes ? collateralTypes.map((x) => x.tokenAddress).sort() : [],\n        collateralPriceUpdatesLength: collateralPriceUpdates?.length,\n        priceUpdateTx: stringToHash(priceUpdateTx?.data),\n      },\n    ],\n    queryFn: async () => {\n      if (\n        !pools ||\n        !collateralTypes ||\n        !CoreProxy ||\n        !accountId ||\n        !collateralPriceUpdates ||\n        !network ||\n        !provider\n      ) {\n        throw Error('Query should not be enabled');\n      }\n\n      const positionCallsAndDataNested = await Promise.all(\n        pools.map(async ({ id: poolId, name: poolName, isPreferred }) =>\n          Promise.all(\n            collateralTypes.map(async (collateralType) => {\n              const { calls, decoder } = await loadPosition({\n                CoreProxy,\n                accountId,\n                poolId,\n                tokenAddress: collateralType.tokenAddress,\n              });\n              return { calls, decoder, poolName, collateralType, poolId, isPreferred };\n            })\n          )\n        )\n      );\n\n      const positionCallsAndData = positionCallsAndDataNested.flat();\n\n      const { calls: priceCalls, decoder: priceDecoder } = await loadPrices({\n        collateralAddresses: collateralTypes.map((x) => x.tokenAddress),\n        CoreProxy,\n      });\n\n      const positionCalls = positionCallsAndData.map((x) => x.calls).flat();\n\n      const collateralPriceCalls = await fetchPriceUpdates(\n        collateralPriceUpdates,\n        network.isTestnet\n      ).then((signedData) => priceUpdatesToPopulatedTx('0x', collateralPriceUpdates, signedData));\n\n      const allCalls = collateralPriceCalls.concat(priceCalls.concat(positionCalls));\n      const singlePositionDecoder = positionCallsAndData.at(0)?.decoder;\n\n      if (priceUpdateTx) {\n        allCalls.unshift(priceUpdateTx as any);\n      }\n\n      return await erc7412Call(\n        network,\n        provider!,\n        allCalls,\n        (encoded) => {\n          if (!Array.isArray(encoded)) throw Error('Expected array');\n          if (!singlePositionDecoder) return {};\n          const prices = priceDecoder(encoded.slice(0, priceCalls.length));\n          const pricesByAddress = keyBy(\n            'address',\n            Array.isArray(prices)\n              ? prices.map((price, i) => ({\n                  price,\n                  address: collateralTypes[i].tokenAddress,\n                }))\n              : [{ price: prices, address: collateralTypes[0].tokenAddress }]\n          );\n\n          const pairedPositionsEncoded = toPairs(encoded.slice(priceCalls.length));\n          const positionData = pairedPositionsEncoded.map((x) => singlePositionDecoder(x));\n          const positions = positionData.map(({ debt, collateral }, index) => {\n            const { poolName, collateralType, poolId, isPreferred } = positionCallsAndData[index];\n            // Value will be removed from the collateral call in next release, so to prepare for that calculate it manually\n            const collateralAmount = collateral.amount;\n            const collateralPrice = pricesByAddress?.[collateralType.tokenAddress].price;\n            const collateralValue = collateralPrice\n              ? collateralAmount.mul(collateralPrice)\n              : wei(0);\n            const cRatio = calculateCRatio(debt, collateralValue);\n\n            return {\n              id: `${poolId}-${collateralType.symbol}` as const,\n              accountId,\n              poolId,\n              poolName,\n              collateralPrice,\n              collateralAmount,\n              collateralValue,\n              collateralType,\n              cRatio,\n              debt,\n              isPreferred,\n            };\n          });\n          return keyBy('id', positions);\n        },\n        'useLiquidityPositions'\n      );\n    },\n    enabled: Boolean(CoreProxy && collateralTypes?.length && accountId && pools?.length),\n  });\n\n  return {\n    ...query,\n    isLoading: query.isLoading || collateralPriceUpdatesIsLoading,\n  };\n};\n","import { useMemo } from 'react';\nimport { Flex, Text } from '@chakra-ui/react';\nimport { formatNumberToUsd } from '@snx-v3/formatters';\nimport { StatBox } from './StatBox';\nimport { useSearchParams } from 'react-router-dom';\nimport { useAccountCollateral } from '@snx-v3/useAccountCollateral';\nimport { useCollateralPrices } from '@snx-v3/useCollateralPrices';\nimport { useLiquidityPositions } from '@snx-v3/useLiquidityPositions';\nimport { useTokenBalances } from '@snx-v3/useTokenBalance';\nimport {\n  calculateAssets,\n  calculateTotalAssetsAvailable,\n  calculateTotalAssetsDelegated,\n} from '../../utils/assets';\nimport { calculateDebt } from '../../utils/positions';\nimport { useApr } from '@snx-v3/useApr';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { useCollateralTypes } from '@snx-v3/useCollateralTypes';\nimport { useGetUSDTokens } from '@snx-v3/useGetUSDTokens';\n\nexport const StatsList = () => {\n  const [params] = useSearchParams();\n  const { network } = useNetwork();\n\n  const { data: usdTokens } = useGetUSDTokens();\n  const { data: apr, isLoading: aprIsLoading } = useApr();\n\n  const { data: positions, isLoading: isLiquidityPositionLoading } = useLiquidityPositions({\n    accountId: params.get('accountId') || undefined,\n  });\n\n  const { data: collateralTypes, isLoading: isCollateralTypesLoading } = useCollateralTypes();\n\n  const { data: accountCollaterals, isLoading: isAccountCollateralsLoading } = useAccountCollateral(\n    {\n      accountId: params.get('accountId') || undefined,\n    }\n  );\n\n  const collateralAddresses =\n    isBaseAndromeda(network?.id, network?.preset) && usdTokens?.USDC\n      ? accountCollaterals?.map((collateral) => collateral.tokenAddress).concat(usdTokens.USDC) ||\n        []\n      : accountCollaterals?.map((collateral) => collateral.tokenAddress) || [];\n\n  const { data: userTokenBalances, isLoading: tokenBalancesIsLoading } =\n    useTokenBalances(collateralAddresses);\n\n  const associatedUserBalances = userTokenBalances?.map((balance, index) => {\n    return {\n      balance,\n      tokenAddress: collateralAddresses[index],\n    };\n  });\n\n  const { data: collateralPrices, isLoading: isCollateralPricesLoading } = useCollateralPrices();\n\n  const isBase = isBaseAndromeda(network?.id, network?.preset);\n\n  const assets = useMemo(\n    () =>\n      calculateAssets(\n        accountCollaterals,\n        associatedUserBalances,\n        collateralPrices,\n        collateralTypes,\n        isBase,\n        usdTokens?.USDC\n      ),\n    [\n      accountCollaterals,\n      associatedUserBalances,\n      collateralPrices,\n      collateralTypes,\n      isBase,\n      usdTokens?.USDC,\n    ]\n  );\n\n  const debt = calculateDebt(positions);\n  const totalAssets = calculateTotalAssetsAvailable(assets);\n  const totalDelegated = calculateTotalAssetsDelegated(assets);\n\n  const isLoading =\n    isAccountCollateralsLoading ||\n    tokenBalancesIsLoading ||\n    isCollateralPricesLoading ||\n    isLiquidityPositionLoading ||\n    aprIsLoading ||\n    isCollateralTypesLoading;\n\n  return (\n    <Flex flexWrap=\"wrap\" w=\"100%\" gap=\"4\" mt={6}>\n      <StatBox\n        title=\"Total Assets\"\n        isLoading={isLoading}\n        value={totalAssets && formatNumberToUsd(totalAssets)}\n        label={\n          <>\n            <Text fontWeight={600} textAlign=\"left\">\n              Total Assets:\n            </Text>\n            <Text textAlign=\"left\">All assets in your Wallet and in your Synthetix Account.</Text>\n          </>\n        }\n      />\n      <StatBox\n        title=\"Total Delegated\"\n        isLoading={isLoading}\n        value={totalDelegated && formatNumberToUsd(totalDelegated)}\n        label={\n          <>\n            <Text fontWeight={600} textAlign=\"left\">\n              Total Delegated:\n            </Text>\n            <Text textAlign=\"left\" mt={1}>\n              All assets in your Account that have been Delegated to a Pool.\n            </Text>\n          </>\n        }\n      />\n      <StatBox\n        title=\"Total Debt\"\n        isLoading={isLoading}\n        value={debt && formatNumberToUsd(debt?.toNumber().toFixed(2))}\n        label={\n          <>\n            <Text fontWeight={600} textAlign=\"left\">\n              Total Debt:\n            </Text>\n            <Text mt={1} textAlign=\"left\">\n              Aggregated Debt of all your Open Positions.\n            </Text>\n          </>\n        }\n      />\n      <StatBox\n        title=\"APR\"\n        isLoading={isLoading}\n        value={!!apr?.combinedApr ? apr.combinedApr.toFixed(2) + '%' : '-'}\n        label={\n          <>\n            <Text fontWeight={600} textAlign=\"left\">\n              APY Annual Percentage Yield:\n            </Text>\n            <Text mt={1} textAlign=\"left\">\n              Aggregated APY from all your Positions.\n            </Text>\n            <Text mt={1} textAlign=\"left\">\n              Sum(past 24 hourly pnls) * 365\n            </Text>\n          </>\n        }\n      />\n    </Flex>\n  );\n};\n","import { LiquidityPositionType } from '@snx-v3/useLiquidityPositions';\nimport Wei from '@synthetixio/wei';\n\ntype DebtPositions = Record<`${string}-${string}`, LiquidityPositionType>;\n\nexport function calculateDebt(positions?: DebtPositions) {\n  return (\n    positions && Object.values(positions).reduce((prev, cur) => prev.add(cur.debt), new Wei(0))\n  );\n}\n\nexport function calculatePositions(positionsByKey?: DebtPositions, isBase = false) {\n  const positionsIds = !!positionsByKey\n    ? (Object.keys(positionsByKey) as `${string}-${string}`[])\n    : [];\n\n  if (!positionsByKey) return [];\n\n  return positionsIds.map((id) => {\n    const position = positionsByKey[id];\n\n    if (isBase && position.collateralType.symbol === 'sUSDC') {\n      position.collateralType.symbol = 'USDC';\n      position.collateralType.displaySymbol = 'USDC';\n      position.collateralType.name = 'USD Coin';\n    }\n\n    return position;\n  });\n}\n","import { Badge, Button, Fade, Flex, Td, Text, Tr } from '@chakra-ui/react';\nimport { TokenIcon } from '../../TokenIcon';\nimport { LiquidityPositionType } from '@snx-v3/useLiquidityPositions';\nimport { useLiquidityPosition } from '@snx-v3/useLiquidityPosition';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport { useGetBorrow } from '@snx-v3/useGetBorrow';\nimport { utils } from 'ethers';\n\ninterface PositionRow extends LiquidityPositionType {\n  final: boolean;\n  isBase: boolean;\n  apr?: number;\n  stablecoinSymbol?: string;\n}\n[];\n\nexport function PositionRow({\n  accountId,\n  poolId,\n  collateralType,\n  debt,\n  final,\n  cRatio,\n  isBase,\n  apr,\n  stablecoinSymbol,\n}: PositionRow) {\n  const [queryParams] = useSearchParams();\n  const navigate = useNavigate();\n\n  const { data: liquidityPosition } = useLiquidityPosition({\n    tokenAddress: collateralType.tokenAddress,\n    accountId,\n    poolId,\n  });\n\n  const { data: borrow } = useGetBorrow({\n    accountId,\n    poolId,\n    collateralTypeAddress: collateralType.tokenAddress,\n  });\n\n  const parsedCRatio = collateralType.issuanceRatioD18.gt(cRatio) ? 'MANAGE' : 'HEALTHY';\n\n  return (\n    <Tr borderBottomWidth={final ? 'none' : '1px'}>\n      <Td border=\"none\">\n        <Fade in>\n          <Flex alignItems=\"center\">\n            <TokenIcon symbol={collateralType.symbol} />\n            <Flex flexDirection=\"column\" ml={3}>\n              <Text color=\"white\" fontWeight={700} lineHeight=\"1.25rem\" fontFamily=\"heading\">\n                {collateralType.symbol}\n              </Text>\n              <Text color=\"gray.500\" fontFamily=\"heading\" fontSize=\"0.75rem\" lineHeight=\"1rem\">\n                {collateralType.displaySymbol}\n              </Text>\n            </Flex>\n          </Flex>\n        </Fade>\n      </Td>\n      <Td border=\"none\">\n        <Fade in>\n          <Flex flexDirection=\"column\" alignItems=\"flex-end\">\n            <Text color=\"white\" lineHeight=\"1.25rem\" fontFamily=\"heading\">\n              {liquidityPosition?.collateralAmount\n                .toNumber()\n                .toLocaleString('en-US', { maximumFractionDigits: 2 })}\n            </Text>\n            <Text color=\"gray.500\" fontFamily=\"heading\" fontSize=\"0.75rem\" lineHeight=\"1rem\">\n              {collateralType.symbol.toString()}\n            </Text>\n          </Flex>\n        </Fade>\n      </Td>\n      <Td border=\"none\">\n        <Fade in>\n          <Flex flexDirection=\"column\" alignItems=\"flex-end\">\n            <Text color=\"white\" lineHeight=\"1.25rem\" fontFamily=\"heading\">\n              {!!apr ? apr.toFixed(2).concat('%') : '-'}\n            </Text>\n          </Flex>\n        </Fade>\n      </Td>\n      {!isBase && (\n        <>\n          <Td border=\"none\">\n            <Fade in>\n              <Flex flexDirection=\"column\" alignItems=\"flex-end\">\n                <Text color=\"white\" lineHeight=\"1.25rem\" fontFamily=\"heading\">\n                  ${liquidityPosition?.debt.toNumber().toLocaleString()}\n                </Text>\n                <Text color=\"gray.500\" fontFamily=\"heading\" fontSize=\"0.75rem\" lineHeight=\"1rem\">\n                  {liquidityPosition?.debt.toNumber().toLocaleString()}\n                </Text>\n              </Flex>\n            </Fade>\n          </Td>\n          <Td border=\"none\">\n            <Fade in>\n              <Flex flexDirection=\"column\" alignItems=\"flex-end\">\n                <Text color=\"white\" lineHeight=\"1.25rem\" fontFamily=\"heading\">\n                  {parseFloat(\n                    utils.formatEther(borrow?.position?.net_issuance.toString() || '0')\n                  ).toFixed(2)}\n                </Text>\n                <Text color=\"gray.500\" fontFamily=\"heading\" fontSize=\"0.75rem\" lineHeight=\"1rem\">\n                  {parseFloat(\n                    utils.formatEther(borrow?.position?.net_issuance.toString() || '0')\n                  ).toFixed(2)}{' '}\n                  {stablecoinSymbol}\n                </Text>\n              </Flex>\n            </Fade>\n          </Td>\n        </>\n      )}\n      <Td border=\"none\">\n        <Fade in>\n          <Flex flexDirection=\"column\" alignItems=\"flex-end\">\n            <Text color=\"white\" lineHeight=\"1.25rem\" fontFamily=\"heading\">\n              ${debt.toNumber().toLocaleString('en-US', { maximumFractionDigits: 2 })}\n            </Text>\n            <Text\n              color=\"cyan.500\"\n              fontFamily=\"heading\"\n              fontSize=\"0.75rem\"\n              lineHeight=\"1rem\"\n              cursor=\"pointer\"\n              onClick={() => {\n                queryParams.set('manageAction', debt.gt(0) ? 'deposit' : 'repay');\n                navigate({\n                  pathname: `/positions/${collateralType.symbol}/${poolId}`,\n                  search: queryParams.toString(),\n                });\n              }}\n            >\n              {debt.gt(0) ? 'Repay Debt' : 'Claim Credit'}\n            </Text>\n          </Flex>\n        </Fade>\n      </Td>\n      {!isBase && (\n        <Td border=\"none\">\n          <Fade in>\n            <Flex flexDirection=\"column\" alignItems=\"flex-end\">\n              <Text color=\"white\" fontWeight={700} lineHeight=\"1.25rem\" fontFamily=\"heading\">\n                {(cRatio.toNumber() * 100).toFixed(2) + '%'}\n              </Text>\n              <Badge\n                colorScheme={parsedCRatio === 'MANAGE' ? 'red' : 'green'}\n                border=\"1px solid\"\n                bg={parsedCRatio === 'MANAGE' ? 'red.900' : 'green.900'}\n              >\n                {parsedCRatio}\n              </Badge>\n            </Flex>\n          </Fade>\n        </Td>\n      )}\n      <Td border=\"none\">\n        <Flex justifyContent=\"flex-end\">\n          <Button\n            fontSize=\"0.75rem\"\n            lineHeight=\"1rem\"\n            height=\"1.75rem\"\n            fontWeight={700}\n            borderWidth=\"1px\"\n            borderColor=\"gray.900\"\n            borderRadius=\"4px\"\n            w=\"100px\"\n            onClick={() => {\n              navigate({\n                pathname: `/positions/${collateralType.symbol}/${poolId}`,\n              });\n            }}\n            data-cy=\"manage-position-row-button\"\n          >\n            Manage\n          </Button>\n        </Flex>\n      </Td>\n    </Tr>\n  );\n}\n","import { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { useQuery } from '@tanstack/react-query';\n\nexport const useGetBorrow = ({\n  accountId,\n  poolId,\n  collateralTypeAddress,\n}: {\n  accountId?: string;\n  poolId?: string;\n  collateralTypeAddress?: string;\n}) => {\n  const { network } = useNetwork();\n  return useQuery({\n    enabled: !isBaseAndromeda(network?.id, network?.preset),\n    queryKey: ['useGetBorrow', accountId, poolId, collateralTypeAddress],\n    queryFn: async () => {\n      const response = await fetch(\n        'https://subgraph.satsuma-prod.com/ce5e03f52f3b/synthetix/synthetix-sepolia/api',\n        {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            query: `\n                      query getPosition($id: ID!){\n                        position(id: $id) {\n                          net_issuance\n                        }\n                      }\n                    `,\n            variables: { id: `${accountId}-${poolId}-${collateralTypeAddress?.toLowerCase()}` },\n          }),\n        }\n      );\n\n      const { data } = await response.json();\n      return data;\n    },\n  });\n};\n","import { Badge, Button, Flex, Td, Text, Tr } from '@chakra-ui/react';\nimport { SynthSkeleton as Skeleton, SynthCircle as SkeletonCircle } from '../../';\nimport { TokenIcon } from '../../';\n\nexport function PositionsRowLoading({ isBase }: { isBase: boolean }) {\n  const rows = Array.from({ length: 2 }, (_, i) => i);\n  return (\n    <>\n      {rows.map((row) => {\n        return (\n          <Tr borderBottomWidth={row === 1 ? 'none' : '1px'} key={row}>\n            <Td border=\"none\">\n              <Flex alignItems=\"center\">\n                <SkeletonCircle>\n                  <TokenIcon symbol=\"SNX\" />\n                </SkeletonCircle>\n                <Flex flexDirection=\"column\" ml={3}>\n                  <Skeleton height=\"1rem\" mb={1} width=\"70%\">\n                    <Text color=\"white\" fontWeight={700} lineHeight=\"1.25rem\" fontFamily=\"heading\">\n                      sUSDC\n                    </Text>\n                  </Skeleton>\n                  <Skeleton height=\"0.75rem\">\n                    <Text\n                      color=\"gray.500\"\n                      fontFamily=\"heading\"\n                      fontSize=\"0.75rem\"\n                      lineHeight=\"1rem\"\n                    >\n                      Synthetic USDC\n                    </Text>\n                  </Skeleton>\n                </Flex>\n              </Flex>\n            </Td>\n            {!isBase && (\n              <>\n                <Td border=\"none\">\n                  <Flex flexDirection=\"column\" alignItems=\"flex-end\">\n                    <Skeleton height=\"1rem\" mb={1}>\n                      <Text\n                        color=\"white\"\n                        fontWeight={700}\n                        lineHeight=\"1.25rem\"\n                        fontFamily=\"heading\"\n                      >\n                        $100,000,00\n                      </Text>\n                    </Skeleton>\n                    <Skeleton height=\"0.75rem\">\n                      <Text\n                        color=\"gray.500\"\n                        fontFamily=\"heading\"\n                        fontSize=\"0.75rem\"\n                        lineHeight=\"1rem\"\n                      >\n                        100,000 SNX\n                      </Text>\n                    </Skeleton>\n                  </Flex>\n                </Td>\n                <Td border=\"none\">\n                  <Flex flexDirection=\"column\" alignItems=\"flex-end\">\n                    <Skeleton height=\"1rem\" width=\"80%\">\n                      <Text\n                        color=\"white\"\n                        fontWeight={700}\n                        lineHeight=\"1.25rem\"\n                        fontFamily=\"heading\"\n                      >\n                        15%\n                      </Text>\n                    </Skeleton>\n                  </Flex>\n                </Td>\n                <Td border=\"none\">\n                  <Flex flexDirection=\"column\" alignItems=\"flex-end\">\n                    <Skeleton height=\"1rem\" mb={1}>\n                      <Text\n                        color=\"white\"\n                        fontWeight={700}\n                        lineHeight=\"1.25rem\"\n                        fontFamily=\"heading\"\n                      >\n                        $5,000\n                      </Text>\n                    </Skeleton>\n                    <Skeleton height=\"0.75rem\">\n                      <Text\n                        color=\"gray.500\"\n                        fontFamily=\"heading\"\n                        fontSize=\"0.75rem\"\n                        lineHeight=\"1rem\"\n                      >\n                        22%\n                      </Text>\n                    </Skeleton>\n                  </Flex>\n                </Td>\n              </>\n            )}\n            <Td border=\"none\">\n              <Flex flexDirection=\"column\" alignItems=\"flex-end\">\n                <Skeleton height=\"1rem\" mb={1}>\n                  <Text color=\"white\" fontWeight={700} lineHeight=\"1.25rem\" fontFamily=\"heading\">\n                    $100,000\n                  </Text>\n                </Skeleton>\n                <Skeleton height=\"0.75rem\">\n                  <Text color=\"gray.500\" fontFamily=\"heading\" fontSize=\"0.75rem\" lineHeight=\"1rem\">\n                    200 SNX\n                  </Text>\n                </Skeleton>\n              </Flex>\n            </Td>\n            <Td border=\"none\">\n              <Flex flexDirection=\"column\" alignItems=\"flex-end\">\n                <Skeleton height=\"1rem\" mb={1} width=\"70%\">\n                  <Text color=\"white\" fontWeight={700} lineHeight=\"1.25rem\" fontFamily=\"heading\">\n                    $20,000\n                  </Text>\n                </Skeleton>\n                <Skeleton height=\"0.75rem\">\n                  <Text color=\"cyan.500\" fontFamily=\"heading\" fontSize=\"0.75rem\" lineHeight=\"1rem\">\n                    Claim Credit\n                  </Text>\n                </Skeleton>\n              </Flex>\n            </Td>\n            <Td border=\"none\">\n              <Flex flexDirection=\"column\" alignItems=\"flex-end\">\n                <Skeleton height=\"1rem\" mb={1}>\n                  <Text color=\"white\" fontWeight={700} lineHeight=\"1.25rem\" fontFamily=\"heading\">\n                    5000%\n                  </Text>\n                </Skeleton>\n                <Skeleton height=\"0.75rem\">\n                  <Badge colorScheme=\"green\" border=\"1px solid\" bg=\"green.900\">\n                    HEALTHY\n                  </Badge>\n                </Skeleton>\n              </Flex>\n            </Td>\n            <Td border=\"none\">\n              <Flex flexDirection=\"column\">\n                <Skeleton height=\"1.75rem\">\n                  <Button\n                    fontSize=\"0.75rem\"\n                    lineHeight=\"1rem\"\n                    height=\"1.75rem\"\n                    fontWeight={700}\n                    borderWidth=\"1px\"\n                    borderColor=\"gray.900\"\n                    borderRadius=\"4px\"\n                    disabled\n                  >\n                    Manage\n                  </Button>\n                </Skeleton>\n              </Flex>\n            </Td>\n          </Tr>\n        );\n      })}\n    </>\n  );\n}\n","import { Button, Fade, Flex, Heading, Table, TableContainer, Tbody } from '@chakra-ui/react';\nimport { Link, generatePath } from 'react-router-dom';\nimport { useNetwork, useWallet } from '@snx-v3/useBlockchain';\nimport { LiquidityPositionType } from '@snx-v3/useLiquidityPositions';\nimport {\n  PositionsNotConnected,\n  PositionRow,\n  PositionTableHeader,\n  PositionsRowLoading,\n  PositionsEmpty,\n  TableDivider,\n} from './';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\n\ninterface PositionsTableInterface {\n  isLoading: boolean;\n  positions?: LiquidityPositionType[];\n  apr?: number;\n  stablecoinInfo?: {\n    symbol?: string;\n    name?: string;\n    address?: string;\n  };\n}\n\nexport const PositionsTable = ({\n  isLoading,\n  positions,\n  apr,\n  stablecoinInfo,\n}: PositionsTableInterface) => {\n  const { activeWallet } = useWallet();\n  const { network } = useNetwork();\n  const isBase = isBaseAndromeda(network?.id, network?.preset);\n\n  return (\n    <TableContainer\n      maxW=\"100%\"\n      mt={4}\n      borderColor=\"gray.900\"\n      borderWidth=\"1px\"\n      borderRadius=\"5px\"\n      p={6}\n      sx={{\n        borderCollapse: 'separate !important',\n        borderSpacing: 0,\n      }}\n      bg=\"navy.700\"\n    >\n      {!activeWallet?.address ? (\n        <PositionsNotConnected />\n      ) : positions?.length === 0 && !isLoading ? (\n        <PositionsEmpty />\n      ) : (\n        <>\n          <Flex alignItems=\"center\" justifyContent=\"space-between\">\n            <Heading fontSize=\"18px\" fontWeight={700} lineHeight=\"28px\" color=\"gray.50\">\n              Spartan Council Pool\n            </Heading>\n            <Fade in>\n              <Button\n                as={Link}\n                mt={{ base: 2, md: 0 }}\n                size=\"sm\"\n                to={{\n                  pathname: generatePath('/pools/:poolId', { poolId: '1' }),\n                  search: location.search,\n                }}\n                variant=\"outline\"\n                colorScheme=\"gray\"\n                color=\"white\"\n              >\n                Pool Info\n              </Button>\n            </Fade>\n          </Flex>\n          <Table variant=\"simple\">\n            <PositionTableHeader isBase={isBase} />\n            <Tbody>\n              <TableDivider />\n              {isLoading ? (\n                <PositionsRowLoading isBase={isBase} />\n              ) : (\n                <>\n                  {positions?.map((position, index) => (\n                    <PositionRow\n                      key={position.poolName.concat(index.toString())}\n                      {...position}\n                      final={index === positions.length - 1}\n                      isBase={isBase}\n                      apr={apr}\n                      stablecoinSymbol={stablecoinInfo?.symbol}\n                    />\n                  ))}\n                </>\n              )}\n            </Tbody>\n          </Table>\n        </>\n      )}\n    </TableContainer>\n  );\n};\n","import { InfoIcon } from '@chakra-ui/icons';\nimport { Thead, Tr, Th, Flex, Text } from '@chakra-ui/react';\nimport { Tooltip } from '@snx-v3/Tooltip';\n\nexport function PositionTableHeader({ isBase }: { isBase: boolean }) {\n  return (\n    <Thead>\n      <Tr>\n        <Th\n          py={5}\n          textTransform=\"unset\"\n          color=\"gray.600\"\n          border=\"none\"\n          fontFamily=\"heading\"\n          fontSize=\"12px\"\n          lineHeight=\"16px\"\n        >\n          Collateral\n        </Th>\n        <Th border=\"none\" textTransform=\"unset\" py={5}>\n          <Flex justifyContent=\"flex-end\" alignItems=\"center\">\n            <Text color=\"gray.600\" fontFamily=\"heading\" fontSize=\"12px\" lineHeight=\"16px\" mr={1}>\n              Delegated\n            </Text>\n            <Tooltip\n              label={\n                <Flex flexDirection=\"column\" alignItems=\"start\">\n                  <Text fontWeight=\"bold\">Delegated Assets:</Text>\n                  <Text>Assets used as collateral in this Position.</Text>\n                </Flex>\n              }\n            >\n              <InfoIcon w=\"10px\" h=\"10px\" />\n            </Tooltip>\n          </Flex>\n        </Th>\n        <Th border=\"none\" textTransform=\"unset\" py={5}>\n          <Flex justifyContent=\"flex-end\" alignItems=\"center\">\n            <Text color=\"gray.600\" fontFamily=\"heading\" fontSize=\"12px\" lineHeight=\"16px\" mr={1}>\n              APR\n            </Text>\n            <Tooltip\n              label={\n                <Flex flexDirection=\"column\" alignItems=\"start\">\n                  <Text fontWeight=\"bold\" fontSize=\"14px\">\n                    Annual Percentage Yield (APY):\n                  </Text>\n                  <Text textAlign=\"left\" fontSize=\"14px\">\n                    Reflects the Pool PNL. It is calculated as an estimate derived from past week\n                    historical PNL, extrapolated as a year average.\n                  </Text>\n                  <Text fontWeight=\"bold\" mt={2} fontSize=\"14px\">\n                    Calculation\n                  </Text>\n                  <Text fontSize=\"14px\">Last 7 days Pool PNL * 52</Text>\n                </Flex>\n              }\n            >\n              <InfoIcon w=\"10px\" h=\"10px\" />\n            </Tooltip>\n          </Flex>\n        </Th>\n        {!isBase && (\n          <>\n            <Th border=\"none\" textTransform=\"unset\" py={5}>\n              <Flex justifyContent=\"flex-end\" alignItems=\"center\">\n                <Text\n                  color=\"gray.600\"\n                  fontFamily=\"heading\"\n                  fontSize=\"12px\"\n                  lineHeight=\"16px\"\n                  mr={1}\n                >\n                  Pool PNL\n                </Text>\n                <Tooltip\n                  label={\n                    <Flex flexDirection=\"column\" alignItems=\"start\">\n                      <Text fontWeight=\"bold\" fontSize=\"14px\">\n                        PNL Profit and Loss Lifetime:\n                      </Text>\n                      <Text textAlign=\"left\" fontSize=\"14px\">\n                        Reflects how the Pool PNL is impacted by trading activities (Fees paid,\n                        profits and losses taken by traders).\n                      </Text>\n                      <Text fontWeight=\"bold\" mt={2} fontSize=\"14px\">\n                        Positive PNL:\n                      </Text>\n                      <Text fontSize=\"14px\" textAlign=\"left\">\n                        Means the traders have paid fees to the Pool. All this fees are collected to\n                        reward Liquidity Providers as Claim Credit.\n                      </Text>\n                    </Flex>\n                  }\n                >\n                  <Flex width=\"12px\" height=\"12px\" justifyContent=\"center\" alignItems=\"center\">\n                    <InfoIcon w=\"10px\" h=\"10px\" />\n                  </Flex>\n                </Tooltip>\n              </Flex>\n            </Th>\n            <Th border=\"none\" textTransform=\"unset\" py={5}>\n              <Flex justifyContent=\"flex-end\" alignItems=\"center\">\n                <Text\n                  color=\"gray.600\"\n                  fontFamily=\"heading\"\n                  fontSize=\"12px\"\n                  lineHeight=\"16px\"\n                  mr={1}\n                >\n                  Borrowed\n                </Text>\n                <Tooltip\n                  label={\n                    <Flex flexDirection=\"column\" alignItems=\"start\">\n                      <Text fontWeight=\"bold\" fontSize=\"14px\">\n                        Borrowed:\n                      </Text>\n                      <Text textAlign=\"left\" fontSize=\"14px\">\n                        After Delegating assets in a Position, you can then borrow assets based on\n                        your Position C-Ratio.\n                      </Text>\n                      <Text mt={2} fontSize=\"14px\" textAlign=\"left\">\n                        Borrowed assets are required to be Repaid in order to close your Position\n                        and unlock your Collateral.\n                      </Text>\n                    </Flex>\n                  }\n                >\n                  <InfoIcon w=\"10px\" h=\"10px\" />\n                </Tooltip>\n              </Flex>\n            </Th>\n          </>\n        )}\n        <Th border=\"none\" textTransform=\"unset\" py={5}>\n          <Flex justifyContent=\"flex-end\" alignItems=\"center\">\n            <Text color=\"gray.600\" fontFamily=\"heading\" fontSize=\"12px\" lineHeight=\"16px\" mr={1}>\n              Debt\n            </Text>\n            <Tooltip\n              label={\n                <Flex flexDirection=\"column\" alignItems=\"start\">\n                  <Text fontWeight=\"bold\" fontSize=\"14px\">\n                    Debt.\n                  </Text>\n                  <Text textAlign=\"left\" fontSize=\"14px\">\n                    Represents Pool PNL - Borrowed.\n                  </Text>\n                  <Text fontWeight=\"bold\" mt={2} fontSize=\"14px\">\n                    Claim Credit:\n                  </Text>\n                  <Text fontSize=\"14px\" textAlign=\"left\">\n                    When your position is performing well, it pays back the borrowed assets (if any)\n                    and turns into Credit available to Claim.\n                  </Text>\n\n                  <Text fontWeight=\"bold\" mt={2} fontSize=\"14px\">\n                    Repay debt:\n                  </Text>\n                  <Text fontSize=\"14px\" textAlign=\"left\">\n                    You have debt if the Pool PNL has not yet paid back your borrowed assets, or if\n                    the Pool PNL is Negative.\n                  </Text>\n                </Flex>\n              }\n            >\n              <InfoIcon w=\"10px\" h=\"10px\" />\n            </Tooltip>\n          </Flex>\n        </Th>\n        {!isBase && (\n          <Th border=\"none\" textTransform=\"unset\" py={5}>\n            <Flex justifyContent=\"flex-end\" alignItems=\"center\">\n              <Text color=\"gray.600\" fontFamily=\"heading\" fontSize=\"12px\" lineHeight=\"16px\" mr={1}>\n                C-Ratio\n              </Text>\n              <Tooltip\n                label={\n                  <Flex flexDirection=\"column\" alignItems=\"start\">\n                    <Text fontWeight=\"bold\" fontSize=\"14px\">\n                      C-ratio:\n                    </Text>\n                    <Text textAlign=\"left\" fontSize=\"14px\">\n                      Manage your Position by Adding or Removing collateral to this position.\n                      BorrowIs a dynamic number that represents a ratio between the collateral\n                      Delegated for your position and the Borrowed assets for this position - the\n                      Pool PNL.\n                    </Text>\n                  </Flex>\n                }\n              >\n                <InfoIcon w=\"10px\" h=\"10px\" />\n              </Tooltip>\n            </Flex>\n          </Th>\n        )}\n        <Th\n          py={5}\n          textTransform=\"unset\"\n          color=\"gray.600\"\n          border=\"none\"\n          fontFamily=\"heading\"\n          fontSize=\"12px\"\n          lineHeight=\"16px\"\n        >\n          {' '}\n        </Th>\n      </Tr>\n    </Thead>\n  );\n}\n","import { Flex, Button, Text } from '@chakra-ui/react';\nimport { useWallet } from '@snx-v3/useBlockchain';\n\nexport const PositionsNotConnected = () => {\n  const { connect } = useWallet();\n  return (\n    <Flex w=\"100%\" justifyContent=\"space-between\" alignItems=\"center\">\n      <Text color=\"gray.500\" fontWeight={500} fontSize=\"14px\" lineHeight=\"14px\" my=\"4\" pl=\"3\">\n        Please connect wallet to view active positions\n      </Text>\n      <Button\n        size=\"sm\"\n        data-cy=\"connect-button-position-table\"\n        onClick={() => {\n          connect();\n        }}\n      >\n        Connect Wallet\n      </Button>\n    </Flex>\n  );\n};\n","import { Flex, Button, Text } from '@chakra-ui/react';\nimport { Link } from 'react-router-dom';\n\nexport const PositionsEmpty = () => {\n  return (\n    <Flex justifyContent=\"space-between\" alignItems=\"baseline\" w=\"100%\">\n      <Text color=\"gray.500\" fontWeight={500} fontSize=\"14px\" my=\"4\" pl=\"3\">\n        You can open a new position by browsing the different Pools and choosing a vault for\n        collateral type\n      </Text>\n      <Link to=\"/pools\">\n        <Button size=\"sm\" data-cy=\"position-empty-button\">\n          Explore all Pools\n        </Button>\n      </Link>\n    </Flex>\n  );\n};\n","import { Tr, Td } from '@chakra-ui/react';\n\nexport const TableDivider = () => {\n  return (\n    <Tr border=\"none\" borderTop=\"1px\" borderTopColor=\"gray.900\" width=\"100%\" height=\"0px\">\n      <Td height=\"0px\" border=\"none\" px={0} pt={0} pb={4} />\n      <Td height=\"0px\" border=\"none\" px={0} pt={0} pb={4} />\n      <Td height=\"0px\" border=\"none\" px={0} pt={0} pb={4} />\n      <Td height=\"0px\" border=\"none\" px={0} pt={0} pb={4} />\n      <Td height=\"0px\" border=\"none\" px={0} pt={0} pb={4} />\n      <Td height=\"0px\" border=\"none\" px={0} pt={0} pb={4} />\n      <Td height=\"0px\" border=\"none\" px={0} pt={0} pb={4} />\n      <Td height=\"0px\" border=\"none\" px={0} pt={0} pb={4} />\n    </Tr>\n  );\n};\n","import { useQuery } from '@tanstack/react-query';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { useGetUSDTokens } from '@snx-v3/useGetUSDTokens';\nimport { useTokenInfo } from '@snx-v3/useTokenInfo';\n\nexport function useStablecoin() {\n  const { network } = useNetwork();\n\n  const { data: USDTokens } = useGetUSDTokens();\n  const { data: stablecoinInfo } = useTokenInfo(USDTokens?.snxUSD);\n\n  return useQuery({\n    queryKey: [`${network?.id}-${network?.preset}`, 'stablecoin', USDTokens?.snxUSD],\n    queryFn: async function () {\n      if (!stablecoinInfo) {\n        throw new Error('useStablecoin requires more information');\n      }\n\n      const { name, symbol } = stablecoinInfo;\n\n      return {\n        symbol,\n        name,\n        address: USDTokens?.snxUSD,\n      };\n    },\n    enabled: Boolean(USDTokens?.snxUSD && stablecoinInfo),\n  });\n}\n","import { Heading, Flex } from '@chakra-ui/react';\nimport { PositionsTable } from './PositionsTable';\nimport { useLiquidityPositions } from '@snx-v3/useLiquidityPositions';\nimport { calculatePositions } from '../../utils/positions';\nimport { useParams } from '@snx-v3/useParams';\nimport { useApr } from '@snx-v3/useApr';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { useStablecoin } from '@snx-v3/useStablecoin';\n\nexport const PositionsList = () => {\n  const { accountId } = useParams();\n  const { network } = useNetwork();\n\n  const { data: positionsByKey, isLoading: isLiquidityPositionsLoading } = useLiquidityPositions({\n    accountId,\n  });\n  const { data: apr } = useApr();\n  const { data: stablecoinInfo, isLoading: isStablecoinLoading } = useStablecoin();\n\n  const isBase = isBaseAndromeda(network?.id, network?.preset);\n  const positions = calculatePositions(positionsByKey, isBase);\n  const parsedPositions = positions.filter((position) => position.collateralAmount.gt(0));\n\n  const isLoading = isLiquidityPositionsLoading || isStablecoinLoading;\n\n  return (\n    <Flex flexDir=\"column\">\n      <Heading fontSize=\"1.25rem\" fontFamily=\"heading\" lineHeight=\"1.75rem\" mt={4}>\n        Positions\n      </Heading>\n      <PositionsTable\n        isLoading={isLoading}\n        positions={parsedPositions}\n        apr={apr?.combinedApr}\n        stablecoinInfo={stablecoinInfo}\n      />\n    </Flex>\n  );\n};\n","import { Flex, Text } from '@chakra-ui/react';\nimport { TokenIcon } from '../TokenIcon';\nimport Wei from '@synthetixio/wei';\n\ninterface BalanceProps {\n  isBase: boolean;\n  balance?: Wei;\n}\n\nexport const Balance = ({ isBase, balance }: BalanceProps) => {\n  return (\n    <>\n      {balance && (\n        <Flex\n          border=\"1px solid\"\n          borderColor=\"gray.900\"\n          px={4}\n          py={2}\n          rounded=\"base\"\n          h=\"40px\"\n          alignItems=\"center\"\n          mr=\"2\"\n        >\n          <TokenIcon symbol={isBase ? 'USDC' : 'sUSD'} width={24} height={24} />\n          <Text\n            data-cy=\"header-balance\"\n            fontSize=\"14px\"\n            lineHeight=\"20px\"\n            fontWeight={600}\n            ml=\"2\"\n            fontFamily=\"heading\"\n          >\n            {balance?.toNumber().toFixed(2)}\n          </Text>\n        </Flex>\n      )}\n    </>\n  );\n};\n","import { useReducer } from 'react';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { useMutation } from '@tanstack/react-query';\nimport { useNetwork, useProvider, useSigner } from '@snx-v3/useBlockchain';\nimport { initialState, reducer } from '@snx-v3/txnReducer';\nimport { BigNumber } from 'ethers';\nimport { formatGasPriceForTransaction } from '@snx-v3/useGasOptions';\nimport { getGasPrice } from '@snx-v3/useGasPrice';\nimport { useGasSpeed } from '@snx-v3/useGasSpeed';\nimport { useAllCollateralPriceIds } from '@snx-v3/useAllCollateralPriceIds';\nimport { fetchPriceUpdates, priceUpdatesToPopulatedTx } from '@snx-v3/fetchPythPrices';\nimport { withERC7412 } from '@snx-v3/withERC7412';\nimport Wei from '@synthetixio/wei';\n\nexport const useWithdraw = ({\n  accountId,\n  collateralTypeAddress,\n  amount,\n}: {\n  accountId?: string;\n  collateralTypeAddress?: string;\n  amount: Wei;\n}) => {\n  const [txnState, dispatch] = useReducer(reducer, initialState);\n  const { data: CoreProxy } = useCoreProxy();\n  const { data: collateralPriceIds } = useAllCollateralPriceIds();\n  const { network } = useNetwork();\n\n  const { gasSpeed } = useGasSpeed();\n  const signer = useSigner();\n  const provider = useProvider();\n\n  const mutation = useMutation({\n    mutationFn: async () => {\n      if (!signer || !network || !provider) throw new Error('No signer or network');\n\n      if (!(CoreProxy && collateralTypeAddress && amount && collateralPriceIds)) return;\n      if (amount?.eq(0)) return;\n      const walletAddress = await signer.getAddress();\n\n      try {\n        dispatch({ type: 'prompting' });\n\n        const gasPricesPromised = getGasPrice({ provider });\n\n        const populatedTxnPromised = CoreProxy.populateTransaction.withdraw(\n          BigNumber.from(accountId),\n          collateralTypeAddress,\n          amount.toBN()\n        );\n\n        const collateralPriceCallsPromise = fetchPriceUpdates(\n          collateralPriceIds,\n          network.isTestnet\n        ).then((signedData) =>\n          priceUpdatesToPopulatedTx(walletAddress, collateralPriceIds, signedData)\n        );\n        const [gasPrices, populatedTxn, collateralPriceCalls] = await Promise.all([\n          gasPricesPromised,\n          populatedTxnPromised,\n          collateralPriceCallsPromise,\n        ]);\n        const allCalls = collateralPriceCalls.concat(populatedTxn);\n\n        const erc7412Tx = await withERC7412(network, allCalls, 'useWithdraw');\n\n        const gasOptionsForTransaction = formatGasPriceForTransaction({\n          gasLimit: erc7412Tx.gasLimit,\n          gasPrices,\n          gasSpeed,\n        });\n\n        const txn = await signer.sendTransaction({ ...erc7412Tx, ...gasOptionsForTransaction });\n        dispatch({ type: 'pending', payload: { txnHash: txn.hash } });\n\n        await txn.wait();\n        dispatch({ type: 'success' });\n      } catch (error: any) {\n        dispatch({ type: 'error', payload: { error } });\n        throw error;\n      }\n    },\n  });\n  return {\n    mutation,\n    txnState,\n    settle: () => dispatch({ type: 'settled' }),\n    isLoading: mutation.isPending,\n    exec: mutation.mutateAsync,\n  };\n};\n","import { useReducer } from 'react';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { useMutation } from '@tanstack/react-query';\nimport { useNetwork, useProvider, useSigner } from '@snx-v3/useBlockchain';\nimport { initialState, reducer } from '@snx-v3/txnReducer';\nimport { BigNumber, constants, utils } from 'ethers';\nimport { formatGasPriceForTransaction } from '@snx-v3/useGasOptions';\nimport { getGasPrice } from '@snx-v3/useGasPrice';\nimport { useGasSpeed } from '@snx-v3/useGasSpeed';\nimport { withERC7412 } from '@snx-v3/withERC7412';\nimport { useSpotMarketProxy } from '../useSpotMarketProxy';\nimport { USDC_BASE_MARKET } from '@snx-v3/isBaseAndromeda';\nimport { notNil } from '@snx-v3/tsHelpers';\nimport { useUSDProxy } from '@snx-v3/useUSDProxy';\nimport { Wei } from '@synthetixio/wei';\nimport { useCollateralPriceUpdates } from '@snx-v3/useCollateralPriceUpdates';\nimport { useGetUSDTokens } from '@snx-v3/useGetUSDTokens';\nimport { ZEROWEI } from '../../ui/src/utils/constants';\n\nexport const useWithdrawBaseAndromeda = ({\n  accountId,\n  sUSDCCollateral,\n  snxUSDCollateral,\n  amountToWithdraw,\n}: {\n  sUSDCCollateral: Wei;\n  snxUSDCollateral: Wei;\n  amountToWithdraw: Wei;\n  accountId?: string;\n}) => {\n  const [txnState, dispatch] = useReducer(reducer, initialState);\n  const { data: CoreProxy } = useCoreProxy();\n  const { data: SpotProxy } = useSpotMarketProxy();\n  const { data: UsdProxy } = useUSDProxy();\n  const { data: priceUpdateTx } = useCollateralPriceUpdates();\n  const { network } = useNetwork();\n  const { data: usdTokens } = useGetUSDTokens();\n\n  const { gasSpeed } = useGasSpeed();\n  const signer = useSigner();\n  const provider = useProvider();\n\n  const mutation = useMutation({\n    mutationFn: async () => {\n      if (!signer || !network || !provider) throw new Error('No signer or network');\n      if (!(CoreProxy && SpotProxy && accountId && usdTokens?.sUSD && usdTokens.snxUSD)) return;\n\n      const total = snxUSDCollateral.add(sUSDCCollateral);\n\n      if (total.lt(amountToWithdraw)) {\n        return;\n      }\n\n      const sUSDCAmount = amountToWithdraw.gt(sUSDCCollateral) ? sUSDCCollateral : amountToWithdraw;\n      const snxUSDAmount = amountToWithdraw.sub(sUSDCAmount).gt(0)\n        ? amountToWithdraw.sub(sUSDCAmount)\n        : ZEROWEI;\n\n      try {\n        dispatch({ type: 'prompting' });\n\n        const gasPricesPromised = getGasPrice({ provider });\n\n        const withdraw_sUSDC = sUSDCAmount.gt(0)\n          ? CoreProxy.populateTransaction.withdraw(\n              BigNumber.from(accountId),\n              usdTokens?.sUSD,\n              sUSDCAmount.toBN()\n            )\n          : undefined;\n\n        const withdraw_snxUSD = snxUSDAmount.gt(0)\n          ? CoreProxy.populateTransaction.withdraw(\n              BigNumber.from(accountId),\n              usdTokens?.snxUSD,\n              snxUSDAmount.toBN()\n            )\n          : undefined;\n\n        const snxUSDApproval = snxUSDAmount.gt(0)\n          ? UsdProxy?.populateTransaction.approve(SpotProxy.address, snxUSDAmount.toBN())\n          : undefined;\n\n        const buy_sUSDC = snxUSDAmount.gt(0)\n          ? SpotProxy.populateTransaction.buy(\n              USDC_BASE_MARKET,\n              snxUSDAmount.toBN(),\n              0,\n              constants.AddressZero\n            )\n          : undefined;\n\n        const unwrapTxnPromised = SpotProxy.populateTransaction.unwrap(\n          USDC_BASE_MARKET,\n          amountToWithdraw.toBN(),\n          //2% slippage\n          Number(\n            utils.formatUnits(amountToWithdraw.toBN().mul(98).div(100).toString(), 12).toString()\n          ).toFixed()\n        );\n\n        const [\n          gasPrices,\n          withdraw_sUSDC_Txn,\n          withdraw_snxUSD_Txn,\n          snxUSDCApproval_Txn,\n          buy_sUSDC_Txn,\n          unwrapTxn,\n        ] = await Promise.all([\n          gasPricesPromised,\n          withdraw_sUSDC,\n          withdraw_snxUSD,\n          snxUSDApproval,\n          buy_sUSDC,\n          unwrapTxnPromised,\n        ]);\n\n        const allCalls = [\n          withdraw_sUSDC_Txn,\n          withdraw_snxUSD_Txn,\n          snxUSDCApproval_Txn,\n          buy_sUSDC_Txn,\n          unwrapTxn,\n        ].filter(notNil);\n\n        if (priceUpdateTx) {\n          allCalls.unshift(priceUpdateTx as any);\n        }\n\n        const erc7412Tx = await withERC7412(network, allCalls, 'useWithdrawBase');\n\n        const gasOptionsForTransaction = formatGasPriceForTransaction({\n          gasLimit: erc7412Tx.gasLimit,\n          gasPrices,\n          gasSpeed,\n        });\n\n        const txn = await signer.sendTransaction({ ...erc7412Tx, ...gasOptionsForTransaction });\n        dispatch({ type: 'pending', payload: { txnHash: txn.hash } });\n\n        await txn.wait();\n        dispatch({ type: 'success' });\n      } catch (error: any) {\n        dispatch({ type: 'error', payload: { error } });\n        throw error;\n      }\n    },\n  });\n  return {\n    mutation,\n    txnState,\n    settle: () => dispatch({ type: 'settled' }),\n    isLoading: mutation.isPending,\n    exec: mutation.mutateAsync,\n  };\n};\n","import {\n  Button,\n  Divider,\n  Flex,\n  Input,\n  MenuButton,\n  Modal,\n  ModalBody,\n  ModalContent,\n  ModalOverlay,\n  Menu,\n  MenuList,\n  MenuItem,\n  Text,\n} from '@chakra-ui/react';\nimport Wei from '@synthetixio/wei';\nimport { useCallback, useState } from 'react';\nimport { useWithdraw } from '@snx-v3/useWithdraw';\nimport { useWithdrawBaseAndromeda } from '@snx-v3/useWithdrawBaseAndromeda';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { ONEWEI, ZEROWEI } from '../../utils/constants';\nimport { useParams } from '@snx-v3/useParams';\nimport { useCollateralTypes } from '@snx-v3/useCollateralTypes';\nimport { useCollateralPrices } from '@snx-v3/useCollateralPrices';\nimport { useAccountCollateral } from '@snx-v3/useAccountCollateral';\nimport { useQueryClient } from '@tanstack/react-query';\nimport { CloseIcon, InfoIcon } from '@chakra-ui/icons';\nimport { Tooltip } from '@snx-v3/Tooltip';\nimport { TokenIcon } from '../';\nimport { ChevronDown, ChevronUp } from '@snx-v3/icons';\nimport { useGetUSDTokens } from '@snx-v3/useGetUSDTokens';\n\nexport function WithdrawModal({ isOpen, onClose }: { isOpen: boolean; onClose: () => void }) {\n  const { accountId } = useParams();\n  const [amount, setAmount] = useState<Wei>(ZEROWEI);\n  const { data: collateralTypes } = useCollateralTypes();\n  const { data: usdTokens } = useGetUSDTokens();\n\n  const [selectedCollateralType, setSelectedCollateralType] = useState<string>(\n    collateralTypes && collateralTypes[0] ? collateralTypes[0].tokenAddress : ''\n  );\n\n  const queryClient = useQueryClient();\n  const { network } = useNetwork();\n  const isBase = isBaseAndromeda(network?.id, network?.preset);\n\n  const { data: accountCollaterals } = useAccountCollateral({\n    accountId,\n  });\n\n  const { data: collateralPrices } = useCollateralPrices();\n\n  const activeCollateral = isBase\n    ? accountCollaterals?.reduce((cur, prev, index) => {\n        //ignore the first iteration cause we are starting witht the first index of the\n        // array as a default\n        if (!index) return cur;\n        return {\n          ...cur,\n          availableCollateral: cur.availableCollateral.add(prev.availableCollateral),\n        };\n      }, accountCollaterals[0])\n    : accountCollaterals?.find((collateral) => collateral.tokenAddress === selectedCollateralType);\n\n  const { mutation: withdrawMain, isLoading } = useWithdraw({\n    amount,\n    accountId,\n    collateralTypeAddress: selectedCollateralType,\n  });\n\n  const { mutation: withdrawAndromeda, isLoading: isLoadingAndromeda } = useWithdrawBaseAndromeda({\n    accountId,\n    sUSDCCollateral:\n      accountCollaterals && accountCollaterals[0]\n        ? accountCollaterals[0].availableCollateral\n        : ZEROWEI,\n    snxUSDCollateral:\n      accountCollaterals && accountCollaterals[1]\n        ? accountCollaterals[1].availableCollateral\n        : ZEROWEI,\n    amountToWithdraw: amount,\n  });\n\n  const withdraw = useCallback(async () => {\n    if (!isBaseAndromeda(network?.id, network?.preset)) {\n      await withdrawMain.mutateAsync();\n    } else {\n      await withdrawAndromeda.mutateAsync();\n    }\n    queryClient.clear();\n  }, [network?.id, network?.preset, queryClient, withdrawAndromeda, withdrawMain]);\n\n  // Replace out sUSDC with USDC for Andromeda\n  const collateralTypesHydated = collateralTypes?.map((type) => {\n    if (isBase && type.symbol === 'sUSDC') {\n      return {\n        ...type,\n        symbol: 'USDC',\n        displaySymbol: 'USDC',\n        name: 'USD Coin',\n      };\n    }\n\n    return type;\n  });\n\n  const collateralTypeDisplayName =\n    collateralTypesHydated?.find((item) => item.tokenAddress === selectedCollateralType)?.symbol ||\n    'sUSD';\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCentered\n      onClose={() => {\n        setAmount(ZEROWEI);\n        onClose();\n      }}\n    >\n      <ModalOverlay />\n      <ModalContent pb={10} bg=\"transparent\">\n        <Flex\n          flexDirection=\"column\"\n          p={6}\n          bg=\"navy.700\"\n          border=\"1px solid\"\n          rounded=\"base\"\n          borderColor=\"gray.900\"\n        >\n          <Flex justifyContent=\"space-between\" alignItems=\"center\">\n            <Text\n              width=\"50%\"\n              color=\"gray.50\"\n              fontFamily=\"heading\"\n              fontSize=\"20px\"\n              fontWeight={700}\n              lineHeight=\"28px\"\n            >\n              Withdraw Assets\n            </Text>\n            <Button variant=\"unstyled\" onClick={() => onClose()}>\n              <CloseIcon />\n            </Button>\n          </Flex>\n          <ModalBody p={0}>\n            <Flex flexDir=\"column\">\n              <Divider my=\"18px\" />\n              <Text\n                fontWeight={700}\n                fontSize=\"14px\"\n                lineHeight=\"20px\"\n                fontFamily=\"heading\"\n                color=\"gray.50\"\n              >\n                Withdraw Assets\n                <Tooltip label=\"You can Withdraw your assets from your Synthetix Account to your Wallet Balance.\">\n                  <InfoIcon ml={1} w=\"10px\" h=\"10px\" mb={0.25} />\n                </Tooltip>\n              </Text>\n              <Flex\n                mt={3}\n                border=\"1px solid\"\n                borderColor=\"gray.900\"\n                rounded=\"base\"\n                justifyContent=\"space-between\"\n                bg=\"navy.900\"\n                flexDirection=\"column\"\n                p=\"12px\"\n              >\n                <Flex width=\"100%\" mb={1}>\n                  <Menu>\n                    {({ isOpen }) => (\n                      <>\n                        <MenuButton\n                          borderWidth=\"1px\"\n                          borderColor=\"gray.900\"\n                          as={Button}\n                          variant=\"unstyled\"\n                          textAlign=\"start\"\n                        >\n                          <Flex alignItems=\"center\" px=\"10px\">\n                            {collateralTypeDisplayName && (\n                              <TokenIcon\n                                height={16}\n                                width={16}\n                                symbol={collateralTypeDisplayName}\n                              />\n                            )}\n                            <Text\n                              mx={1}\n                              color=\"whiteAlpha.900\"\n                              fontSize=\"16px\"\n                              fontWeight={700}\n                              lineHeight=\"24px\"\n                            >\n                              {collateralTypeDisplayName}\n                            </Text>\n                            {isOpen ? (\n                              <ChevronUp mr={1} color=\"white\" />\n                            ) : (\n                              <ChevronDown mr={1} color=\"white\" />\n                            )}\n                          </Flex>\n                        </MenuButton>\n                        <MenuList>\n                          {collateralTypesHydated?.map((type) => (\n                            <MenuItem\n                              onClick={() => setSelectedCollateralType(type.tokenAddress)}\n                              key={type.tokenAddress}\n                            >\n                              <TokenIcon mr={1} height={16} width={16} symbol={type.symbol} />\n                              {type.symbol}\n                            </MenuItem>\n                          ))}\n                          {!isBase && (\n                            <MenuItem\n                              onClick={() => setSelectedCollateralType(usdTokens?.snxUSD || '')}\n                            >\n                              <TokenIcon mr={1} height={16} width={16} symbol=\"sUSD\" />\n                              sUSD\n                            </MenuItem>\n                          )}\n                        </MenuList>\n                      </>\n                    )}\n                  </Menu>\n                  <Flex>\n                    <Input\n                      id=\"input-deposit\"\n                      variant=\"unstyled\"\n                      placeholder=\"0.00\"\n                      textAlign=\"end\"\n                      fontSize=\"24px\"\n                      color=\"white\"\n                      type=\"number\"\n                      overflow=\"scroll\"\n                      fontWeight={700}\n                      data-cy=\"manage-input\"\n                      onChange={(e) => {\n                        setAmount(new Wei(e.target.value ? e.target.value : 0, 18));\n                      }}\n                    />\n                  </Flex>\n                </Flex>\n                <Flex justifyContent=\"space-between\" mt=\"5px\">\n                  <Text\n                    fontSize=\"12px\"\n                    display=\"flex\"\n                    color=\"gray.500\"\n                    data-cy=\"manage-input-balance-max-button\"\n                  >\n                    Account Available :&nbsp;\n                    <Text\n                      data-cy=\"withdraw-modal-max-button\"\n                      cursor=\"pointer\"\n                      onClick={() => {\n                        if (activeCollateral) {\n                          setAmount(activeCollateral.availableCollateral);\n                          const node = document.getElementById('input-deposit') as HTMLInputElement;\n                          node.value = activeCollateral.availableCollateral.toNumber().toFixed(2);\n                        }\n                      }}\n                    >\n                      {activeCollateral?.availableCollateral.toNumber().toFixed(2)}\n                    </Text>\n                  </Text>\n                  <Flex flexDir=\"column\" alignItems=\"end\" justifyContent=\"end\">\n                    <Text fontSize=\"12px\" color=\"gray.500\">\n                      $\n                      {amount.eq(0)\n                        ? '00.00'\n                        : amount\n                            .mul(\n                              collateralPrices && collateralPrices[selectedCollateralType]\n                                ? collateralPrices[selectedCollateralType]\n                                : ONEWEI\n                            )\n                            .toNumber()\n                            .toLocaleString('en-US', { maximumFractionDigits: 2 })}\n                    </Text>\n                  </Flex>\n                </Flex>\n              </Flex>\n              <Button\n                isDisabled={amount.eq(0)}\n                mt={6}\n                mb=\"2\"\n                onClick={withdraw}\n                isLoading={isLoadingAndromeda || isLoading}\n              >\n                {amount.eq(0) ? 'Enter Amount' : 'Withdraw'}\n              </Button>\n            </Flex>\n          </ModalBody>\n        </Flex>\n      </ModalContent>\n    </Modal>\n  );\n}\n","import { useCollateralTypes } from '@snx-v3/useCollateralTypes';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { wei } from '@synthetixio/wei';\nimport { useQuery } from '@tanstack/react-query';\nimport { z } from 'zod';\nimport { ZodBigNumber } from '@snx-v3/zod';\nimport { Network, useNetwork, useProviderForChain } from '@snx-v3/useBlockchain';\nimport { erc7412Call } from '@snx-v3/withERC7412';\nimport { useAllCollateralPriceIds } from '@snx-v3/useAllCollateralPriceIds';\nimport { fetchPriceUpdates, priceUpdatesToPopulatedTx } from '@snx-v3/fetchPythPrices';\nimport { useAllCollateralPriceUpdates } from '../useCollateralPriceUpdates';\nimport { stringToHash } from '@snx-v3/tsHelpers';\n\nconst VaultCollateralSchema = z\n  .object({ value: ZodBigNumber, amount: ZodBigNumber })\n  .transform(({ value, amount }) => ({ value: wei(value), amount: wei(amount) }));\nconst VaultDebtSchema = ZodBigNumber.transform((x) => wei(x));\n\nexport const useVaultsData = (poolId?: number, customNetwork?: Network) => {\n  const { network } = useNetwork();\n  const targetNetwork = customNetwork || network;\n\n  const { data: collateralTypes } = useCollateralTypes(false, customNetwork);\n  const { data: CoreProxy } = useCoreProxy(customNetwork);\n  const { data: collateralPriceUpdates } = useAllCollateralPriceIds(customNetwork);\n\n  const provider = useProviderForChain(targetNetwork);\n\n  const { data: priceUpdateTx } = useAllCollateralPriceUpdates(customNetwork);\n\n  return useQuery({\n    queryKey: [\n      `${targetNetwork?.id}-${targetNetwork?.preset}`,\n      'VaultCollaterals',\n      {\n        pool: poolId,\n        tokens: collateralTypes ? collateralTypes?.map((x) => x.tokenAddress).sort() : [],\n        priceUpdateTx: stringToHash(priceUpdateTx?.data),\n      },\n    ],\n    queryFn: async () => {\n      if (\n        !CoreProxy ||\n        !collateralTypes ||\n        !poolId ||\n        !collateralPriceUpdates ||\n        !targetNetwork ||\n        !provider\n      ) {\n        throw Error('useVaultsData should not be enabled when missing data');\n      }\n\n      const collateralCallsP = Promise.all(\n        collateralTypes.map((collateralType) =>\n          CoreProxy.populateTransaction.getVaultCollateral(poolId, collateralType.tokenAddress)\n        )\n      );\n\n      const debtCallsP = Promise.all(\n        collateralTypes.map((collateralType) =>\n          CoreProxy.populateTransaction.getVaultDebt(poolId, collateralType.tokenAddress)\n        )\n      );\n\n      const collateralPriceUpdateCallsP = fetchPriceUpdates(\n        collateralPriceUpdates,\n        targetNetwork.isTestnet\n      ).then((signedData) => priceUpdatesToPopulatedTx('0x', collateralPriceUpdates, signedData));\n\n      const calls = await Promise.all([collateralPriceUpdateCallsP, collateralCallsP, debtCallsP]);\n\n      if (priceUpdateTx) {\n        calls.unshift(priceUpdateTx as any);\n      }\n\n      return await erc7412Call(\n        targetNetwork,\n        provider,\n        calls.flat(),\n        (multicallResult) => {\n          if (!Array.isArray(multicallResult)) throw Error('Expected array');\n\n          const collateralResult = multicallResult.slice(0, collateralTypes.length);\n          const debtResult = multicallResult.slice(collateralTypes.length);\n\n          return collateralResult.map((bytes: string, i: number) => {\n            const debtBytes =\n              debtResult[i] || '0x0000000000000000000000000000000000000000000000000000000000000000';\n\n            const decodedDebt = CoreProxy.interface.decodeFunctionResult('getVaultDebt', debtBytes);\n\n            const decodedCollateral = CoreProxy.interface.decodeFunctionResult(\n              'getVaultCollateral',\n              bytes\n            );\n            const collateral = VaultCollateralSchema.parse({ ...decodedCollateral });\n            const debt = VaultDebtSchema.parse(decodedDebt[0]);\n            return {\n              debt,\n              collateral,\n              collateralType: collateralTypes[i],\n            };\n          });\n        },\n        'useVaultsData'\n      );\n    },\n    enabled: Boolean(collateralTypes?.length && CoreProxy && poolId && collateralPriceUpdates),\n  });\n};\n\nexport type VaultsDataType = ReturnType<typeof useVaultsData>['data'];\n","import { Button, Fade, Flex, Td, Text, Th, Tr } from '@chakra-ui/react';\nimport { useCollateralTypes } from '@snx-v3/useCollateralTypes';\nimport { useLiquidityPositions } from '@snx-v3/useLiquidityPositions';\nimport { ZEROWEI } from '../../utils/constants';\nimport { TokenIcon } from '../TokenIcon';\nimport { useWallet } from '@snx-v3/useBlockchain';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport { Tooltip } from '@snx-v3/Tooltip';\nimport { InfoIcon } from '@chakra-ui/icons';\nimport { useMemo } from 'react';\nimport { CustomTable } from '../CustomTable';\nimport { useVaultsData } from '@snx-v3/useVaultsData';\nimport { useApr } from '@snx-v3/useApr';\nimport { compactInteger } from 'humanize-plus';\n\nconst TableHeader = [\n  <Th\n    key=\"asset-header\"\n    py={5}\n    textTransform=\"unset\"\n    color=\"gray.600\"\n    border=\"none\"\n    fontFamily=\"heading\"\n    fontSize=\"12px\"\n    lineHeight=\"16px\"\n  >\n    Asset\n  </Th>,\n  <Th key=\"tvl-header\" border=\"none\" textTransform=\"unset\" py={5}>\n    <Text color=\"gray.600\" fontFamily=\"heading\" fontSize=\"12px\" lineHeight=\"16px\" mr={1}>\n      TVL\n    </Text>\n  </Th>,\n  <Th key=\"pnl-header\" border=\"none\" textTransform=\"unset\" py={5}>\n    <Text color=\"gray.600\" fontFamily=\"heading\" fontSize=\"12px\" lineHeight=\"16px\" mr={1}>\n      PnL\n    </Text>\n  </Th>,\n  <Th key=\"debt-header\" border=\"none\" textTransform=\"unset\" py={5}>\n    <Flex alignItems=\"center\">\n      <Text color=\"gray.600\" fontFamily=\"heading\" fontSize=\"12px\" lineHeight=\"16px\" mr={1}>\n        Debt\n      </Text>\n      <Tooltip\n        label={\n          <Flex flexDirection=\"column\" alignItems=\"start\">\n            <Text fontWeight=\"bold\" fontSize=\"14px\">\n              Debt.\n            </Text>\n            <Text textAlign=\"left\" fontSize=\"14px\">\n              Represents Pool PNL - Borrowed.\n            </Text>\n            <Text fontWeight=\"bold\" mt={2} fontSize=\"14px\">\n              Claim Credit:\n            </Text>\n            <Text fontSize=\"14px\" textAlign=\"left\">\n              When your position is performing well, it pays back the borrowed assets (if any) and\n              turns into Credit available to Claim.\n            </Text>\n\n            <Text fontWeight=\"bold\" mt={2} fontSize=\"14px\">\n              Repay debt:\n            </Text>\n            <Text fontSize=\"14px\" textAlign=\"left\">\n              You have debt if the Pool PNL has not yet paid back your borrowed assets, or if the\n              Pool PNL is Negative.\n            </Text>\n          </Flex>\n        }\n      >\n        <InfoIcon w=\"10px\" h=\"10px\" />\n      </Tooltip>\n    </Flex>\n  </Th>,\n  <Th key=\"cratio-header\" border=\"none\" textTransform=\"unset\" py={5}>\n    <Flex alignItems=\"center\">\n      <Text color=\"gray.600\" fontFamily=\"heading\" fontSize=\"12px\" lineHeight=\"16px\" mr={1}>\n        C-Ratio\n      </Text>\n      <Tooltip\n        label={\n          <Flex flexDirection=\"column\" alignItems=\"start\">\n            <Text fontWeight=\"bold\" fontSize=\"14px\">\n              C-ratio:\n            </Text>\n            <Text textAlign=\"left\" fontSize=\"14px\">\n              Manage your Position by Adding or Removing collateral to this position. BorrowIs a\n              dynamic number that represents a ratio between the collateral Delegated for your\n              position and the Borrowed assets for this position - the Pool PNL.\n            </Text>\n          </Flex>\n        }\n      >\n        <InfoIcon w=\"10px\" h=\"10px\" />\n      </Tooltip>\n    </Flex>\n  </Th>,\n  <Th\n    key=\"button-placeholder-header\"\n    py={5}\n    textTransform=\"unset\"\n    color=\"gray.600\"\n    border=\"none\"\n    fontFamily=\"heading\"\n    fontSize=\"12px\"\n    lineHeight=\"16px\"\n  >\n    {' '}\n  </Th>,\n];\n\nexport function CollateralTable({ accountId, poolId }: { accountId?: string; poolId: string }) {\n  const navigate = useNavigate();\n  const [queryParams] = useSearchParams();\n  const { connect, activeWallet } = useWallet();\n  const { data: collateralTypes, isLoading: isCollateralTypesLoading } = useCollateralTypes();\n  const { data: vaultsData, isLoading: vaultsDataIsLoading } = useVaultsData(Number(poolId));\n  const { data: apr, isLoading: aprIsLoading } = useApr();\n  const { data: liquidityPositions, isLoading: isLiquidityPositionsLoading } =\n    useLiquidityPositions({ accountId });\n\n  const isLoading =\n    isCollateralTypesLoading && isLiquidityPositionsLoading && vaultsDataIsLoading && aprIsLoading;\n\n  const positionsAndCollaterals = useMemo(\n    () =>\n      collateralTypes?.map((collateral) => {\n        const liquidityPostion =\n          liquidityPositions && liquidityPositions[`${poolId}-${collateral.symbol}`];\n        return {\n          accountId: accountId || '',\n          tokenAddress: collateral.tokenAddress,\n          symbol: collateral.symbol,\n          displaySymbol: collateral.displaySymbol,\n          cRatio: liquidityPostion?.cRatio || ZEROWEI,\n          collateralAmount: liquidityPostion?.collateralAmount || ZEROWEI,\n          collateralPrice: liquidityPostion?.collateralPrice || ZEROWEI,\n          collateralType: collateral,\n          collateralValue: liquidityPostion?.collateralValue || ZEROWEI,\n          debt: liquidityPostion?.debt || ZEROWEI,\n          id: '',\n          isPreferred: true,\n          poolId,\n          poolName: '',\n        };\n      }),\n    [collateralTypes, liquidityPositions, accountId, poolId]\n  );\n\n  return (\n    <CustomTable\n      loadingState={{ isLoading: isLoading, headerLength: TableHeader.length, numberOfRows: 1 }}\n      headerColumns={TableHeader}\n      rows={\n        !positionsAndCollaterals\n          ? []\n          : positionsAndCollaterals.map((pc, index) => (\n              <Tr\n                key={pc.tokenAddress.concat('collateral-table')}\n                borderBottomWidth={index === positionsAndCollaterals.length - 1 ? 'none' : '1px'}\n              >\n                <Td border=\"none\">\n                  <Fade in>\n                    <Flex alignItems=\"center\">\n                      <TokenIcon symbol={pc.symbol} />\n                      <Flex flexDirection=\"column\" ml={3}>\n                        <Text\n                          color=\"white\"\n                          fontWeight={700}\n                          lineHeight=\"1.25rem\"\n                          fontFamily=\"heading\"\n                        >\n                          {pc.symbol}\n                        </Text>\n                        <Text\n                          color=\"gray.500\"\n                          fontFamily=\"heading\"\n                          fontSize=\"0.75rem\"\n                          lineHeight=\"1rem\"\n                        >\n                          {pc.displaySymbol}\n                        </Text>\n                      </Flex>\n                    </Flex>\n                  </Fade>\n                </Td>\n                <Td border=\"none\">\n                  <Fade in>\n                    <Text color=\"white\" fontWeight={700} lineHeight=\"1.25rem\" fontFamily=\"heading\">\n                      {vaultsData\n                        ? compactInteger(vaultsData[index].collateral.amount.toNumber())\n                        : '-'}\n                    </Text>\n                  </Fade>\n                </Td>\n                <Td border=\"none\">\n                  <Fade in>\n                    <Text color=\"white\" fontWeight={700} lineHeight=\"1.25rem\" fontFamily=\"heading\">\n                      {apr?.cumulativePnl ? '$' + compactInteger(apr.cumulativePnl, 1) : '-'}\n                    </Text>\n                  </Fade>\n                </Td>\n                <Td border=\"none\">\n                  <Fade in>\n                    <Text color=\"white\" fontWeight={700} lineHeight=\"1.25rem\" fontFamily=\"heading\">\n                      {pc.collateralAmount.eq(0)\n                        ? '-'\n                        : '$' +\n                          pc.debt.toNumber().toLocaleString('en-US', { maximumFractionDigits: 2 })}\n                    </Text>\n                  </Fade>\n                </Td>\n                <Td border=\"none\">\n                  <Fade in>\n                    <Text color=\"white\" fontWeight={700} lineHeight=\"1.25rem\" fontFamily=\"heading\">\n                      {pc.collateralAmount.eq(0)\n                        ? '-'\n                        : pc.cRatio\n                            .abs()\n                            .toNumber()\n                            .toLocaleString('en-US', { maximumFractionDigits: 2 }) + '%'}\n                    </Text>\n                  </Fade>\n                </Td>\n                <Td border=\"none\">\n                  <Fade in>\n                    <Button\n                      size=\"sm\"\n                      onClick={() => {\n                        if (activeWallet?.address) {\n                          queryParams.set('manageAction', 'deposit');\n                          navigate({\n                            pathname: `/positions/${pc.symbol}/${poolId}`,\n                            search: queryParams.toString(),\n                          });\n                        } else {\n                          connect();\n                        }\n                      }}\n                    >\n                      {activeWallet?.address ? 'Deposit' : 'Connect'}\n                    </Button>\n                  </Fade>\n                </Td>\n              </Tr>\n            ))\n      }\n    />\n  );\n}\n","const abi = [\n  'constructor(address rewardManager_, uint128 poolId_, address collateralType_, address payoutToken_, uint8 payoutTokenDecimals_, string name_)',\n  'function SYSTEM_PRECISION() view returns (uint256)',\n  'function collateralType() view returns (address)',\n  'function distributeRewards(uint128 poolId_, address collateralType_, uint256 amount_, uint64 start_, uint32 duration_)',\n  'function name() view returns (string)',\n  'function onPositionUpdated(uint128, uint128, address, uint256)',\n  'function payout(uint128, uint128 poolId_, address collateralType_, address payoutTarget_, uint256 payoutAmount_) returns (bool)',\n  'function payoutToken() view returns (address)',\n  'function poolId() view returns (uint128)',\n  'function precision() view returns (uint256)',\n  'function rewardManager() view returns (address)',\n  'function rewardsAmount() view returns (uint256)',\n  'function setShouldFailPayout(bool shouldFailPayout_)',\n  'function shouldFailPayout() view returns (bool)',\n  'function supportsInterface(bytes4 interfaceId) view returns (bool)',\n  'function token() view returns (address)',\n  'error FailedTransfer(address from, address to, uint256 value)',\n  'error InvalidParameter(string parameter, string reason)',\n  'error NotEnoughBalance(uint256 amountRequested, uint256 currentBalance)',\n  'error NotEnoughRewardsLeft(uint256 amountRequested, uint256 amountLeft)',\n  'error Unauthorized(address addr)',\n];\n\nexport async function importRewardDistributor(chainId, preset) {\n  if (!preset) {\n    throw new Error(`Missing preset`);\n  }\n  const deployment = `${Number(chainId).toFixed(0)}-${preset}`;\n  switch (deployment) {\n    case '1-main': {\n      return { address: null, abi };\n    }\n    case '11155111-main': {\n      return { address: null, abi };\n    }\n    case '10-main': {\n      return { address: null, abi };\n    }\n    case '8453-andromeda': {\n      return { address: null, abi };\n    }\n    case '84532-andromeda': {\n      return { address: null, abi };\n    }\n    case '42161-main': {\n      return { address: null, abi };\n    }\n    case '421614-main': {\n      return { address: null, abi };\n    }\n    case '42161-arbthetix': {\n      return { address: null, abi };\n    }\n    default: {\n      throw new Error(`Unsupported deployment ${deployment} for RewardsDistributor`);\n    }\n  }\n}\n","import { useMulticall3 } from '@snx-v3/useMulticall3';\nimport { useQuery } from '@tanstack/react-query';\nimport { utils, BigNumber } from 'ethers';\nimport { Wei, wei } from '@synthetixio/wei';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { z } from 'zod';\nimport { getSubgraphUrl } from '@snx-v3/constants';\nimport { Network, useNetwork } from '@snx-v3/useBlockchain';\nimport { importRewardDistributor } from '@snx-v3/contracts';\n\nconst RewardsResponseSchema = z.array(\n  z.object({\n    address: z.string(),\n    name: z.string(),\n    symbol: z.string(),\n    claimableAmount: z.instanceof(Wei),\n    distributorAddress: z.string(),\n    duration: z.number(),\n    lifetimeClaimed: z.number(),\n    total: z.number(),\n    decimals: z.number(),\n  })\n);\n\ntype RewardsResponseArray = typeof RewardsResponseSchema._type;\n\nexport type RewardsType = z.infer<typeof RewardsResponseSchema>;\n\nexport type RewardsInterface = {\n  id: string;\n  total_distributed: string;\n  rewards_distributions: {\n    amount: string;\n    duration: string;\n    created_at: string;\n  }[];\n}[];\n\nconst erc20Abi = [\n  'function name() view returns (string)',\n  'function symbol() view returns (string)',\n  'function balanceOf(address) view returns (uint256)',\n  'function deposit() payable',\n  'function decimals() view returns (uint8)',\n];\n\nconst RewardsDataDocument = `\n  query RewardsData($accountId: String!, $distributor: String!) {\n    rewardsClaimeds(where: { distributor: $distributor, account: $accountId }) {\n      id\n      amount\n    }\n  }\n`;\n\nexport function useRewards(\n  distributors?: RewardsInterface,\n  poolId?: string,\n  collateralAddress?: string,\n  accountId: string = '69',\n  customNetwork?: Network\n) {\n  const { network } = useNetwork();\n\n  const targetNetwork = customNetwork || network;\n\n  const { data: Multicall3 } = useMulticall3(customNetwork);\n  const { data: CoreProxy } = useCoreProxy(customNetwork);\n\n  return useQuery({\n    enabled: Boolean(\n      CoreProxy && Multicall3 && distributors && poolId && collateralAddress && accountId\n    ),\n    queryKey: [\n      `${targetNetwork?.id}-${targetNetwork?.preset}`,\n      'Rewards',\n      { accountId },\n      { collateralAddress },\n      { distributors: distributors?.map(({ id }) => id).sort() },\n    ],\n    queryFn: async () => {\n      if (\n        !Multicall3 ||\n        !CoreProxy ||\n        !poolId ||\n        !collateralAddress ||\n        !accountId ||\n        !distributors\n      ) {\n        throw 'useRewards is missing required data';\n      }\n\n      if (distributors.length === 0) return [];\n\n      try {\n        const { abi } = await importRewardDistributor(targetNetwork?.id, targetNetwork?.preset);\n\n        const ifaceRD = new utils.Interface(abi);\n        const ifaceERC20 = new utils.Interface(erc20Abi);\n\n        const [{ returnData: distributorReturnData }, ...historicalData] = await Promise.all([\n          Multicall3.callStatic.aggregate(\n            distributors.flatMap(({ id: address }) => [\n              {\n                target: address,\n                callData: ifaceRD.encodeFunctionData('name', []),\n              },\n              {\n                target: address,\n                callData: ifaceRD.encodeFunctionData('token', []),\n              },\n              {\n                target: address,\n                callData: ifaceRD.encodeFunctionData('collateralType', []),\n              },\n            ])\n          ),\n          ...distributors.map(({ id: address }) =>\n            fetch(getSubgraphUrl(network?.name), {\n              method: 'POST',\n              body: JSON.stringify({\n                query: RewardsDataDocument,\n                variables: { accountId, distributor: address },\n              }),\n            }).then((res) => res.json())\n          ),\n        ]);\n\n        const distributorResult = distributors.map(({ id: address, rewards_distributions }, i) => {\n          const [distributorName] = ifaceRD.decodeFunctionResult(\n            'name',\n            distributorReturnData[i * 3]\n          );\n          const [distributorPayoutToken] = ifaceRD.decodeFunctionResult(\n            'payoutToken',\n            distributorReturnData[i * 3 + 1]\n          );\n          const [distributorCollateralType] = ifaceRD.decodeFunctionResult(\n            'collateralType',\n            distributorReturnData[i * 3 + 2]\n          );\n\n          if (!rewards_distributions.length) {\n            return {\n              address,\n              name: distributorName,\n              token: distributorPayoutToken,\n              distributorCollateralType,\n              duration: 0,\n              total: 0,\n              lifetimeClaimed: 0,\n            };\n          }\n\n          const duration = parseInt(rewards_distributions[0].duration);\n\n          const lifetimeClaimed: number = historicalData[i].data.rewardsClaimeds\n            .reduce((acc: Wei, item: { amount: string; id: string }) => {\n              return acc.add(wei(item.amount, 18, true));\n            }, wei(0))\n            .toNumber();\n\n          // See if it is still active (i.e rewards are still being emitted)\n          const { duration: distribution_duration, created_at } = rewards_distributions[0];\n\n          const expiry = parseInt(distribution_duration) + parseInt(created_at);\n\n          // const total =\n          const hasExpired = new Date().getTime() / 1000 > expiry;\n\n          return {\n            address,\n            name: distributorName,\n            token: distributorPayoutToken,\n            distributorCollateralType,\n            duration,\n            total: hasExpired ? '0' : rewards_distributions[0].amount, // Take the latest amount\n            lifetimeClaimed,\n          };\n        });\n\n        const filteredDistributors = collateralAddress\n          ? distributorResult.filter(\n              ({ distributorCollateralType }) =>\n                `${distributorCollateralType}`.toLowerCase() ===\n                `${collateralAddress}`.toLowerCase()\n            )\n          : distributorResult;\n\n        const { returnData: ercReturnData } = await Multicall3.callStatic.aggregate(\n          filteredDistributors.flatMap(({ token }) => [\n            {\n              target: token,\n              callData: ifaceERC20.encodeFunctionData('name', []),\n            },\n            {\n              target: token,\n              callData: ifaceERC20.encodeFunctionData('symbol', []),\n            },\n            {\n              target: token,\n              callData: ifaceERC20.encodeFunctionData('decimals', []),\n            },\n          ])\n        );\n\n        const result = filteredDistributors.map((item, i) => {\n          const [name] = ifaceERC20.decodeFunctionResult('name', ercReturnData[i * 3]);\n          const [symbol] = ifaceERC20.decodeFunctionResult('symbol', ercReturnData[i * 3 + 1]);\n          const [decimals] = ifaceERC20.decodeFunctionResult('decimals', ercReturnData[i * 3 + 2]);\n\n          const total = wei(item.total, 18, true).toNumber();\n\n          return {\n            ...item,\n            name,\n            symbol,\n            decimals,\n            total,\n          };\n        });\n\n        // TODO: Refactor this to use a view function\n        const balances: RewardsResponseArray = [];\n\n        for (const item of result) {\n          try {\n            const response = await CoreProxy.callStatic.claimRewards(\n              BigNumber.from(accountId),\n              BigNumber.from(poolId),\n              collateralAddress,\n              item.address\n            );\n\n            balances.push({\n              ...item,\n              claimableAmount: wei(response),\n              distributorAddress: item.address,\n            });\n          } catch (error) {\n            balances.push({\n              ...item,\n              claimableAmount: wei(0),\n              distributorAddress: item.address,\n            });\n          }\n        }\n\n        const sortedBalances = [...balances].sort(\n          (a, b) => b.claimableAmount.toNumber() - a.claimableAmount.toNumber()\n        );\n\n        return RewardsResponseSchema.parse(sortedBalances);\n      } catch (error) {\n        console.error(error);\n        return [];\n      }\n    },\n  });\n}\n","import { useQuery } from '@tanstack/react-query';\nimport { getSubgraphUrl } from '@snx-v3/constants';\nimport { z } from 'zod';\nimport Wei, { wei } from '@synthetixio/wei';\nimport { useNetwork } from '@snx-v3/useBlockchain';\n\nconst GraphBigIntSchema = z.string().transform((src) => wei(src, 18, true));\nconst GraphBigDecimalSchema = z.string().transform((src) => wei(src, 18, true));\n\nconst calculateMarketPnl = (netIssuance: Wei, reportedDebt: Wei) =>\n  reportedDebt.add(netIssuance).mul(-1);\n\nexport const MarketSnapshotByWeekSchema = z\n  .object({\n    id: z.string(),\n    usd_deposited: GraphBigDecimalSchema,\n    usd_withdrawn: GraphBigDecimalSchema,\n    net_issuance: GraphBigDecimalSchema, // withdrawn - deposited\n    reported_debt: GraphBigDecimalSchema,\n    updated_at: z.string(),\n    updates_in_period: z.string(),\n  })\n  .transform((market) => ({\n    ...market,\n    pnl: calculateMarketPnl(market.net_issuance, market.reported_debt),\n  }));\n\nconst MarketSchema = z\n  .object({\n    id: z.string(),\n    address: z.string(),\n    usd_deposited: GraphBigDecimalSchema,\n    usd_withdrawn: GraphBigDecimalSchema,\n    net_issuance: GraphBigDecimalSchema, // withdrawn - deposited\n    reported_debt: GraphBigDecimalSchema,\n    updated_at: z.string(),\n    market_snapshots_by_week: z.array(MarketSnapshotByWeekSchema),\n  })\n  .transform((market) => ({\n    ...market,\n    pnl: calculateMarketPnl(market.net_issuance, market.reported_debt),\n  }));\n\nconst MarketConfigurationSchema = z.object({\n  id: z.string(), //PoolId-MarketId\n  market: MarketSchema,\n  weight: GraphBigIntSchema,\n  max_debt_share_value: GraphBigDecimalSchema,\n});\n\nconst RewardDistributorSchema = z.object({\n  id: z.string(),\n  total_distributed: z.string(),\n  rewards_distributions: z\n    .array(\n      z.object({\n        amount: z.string(),\n        duration: z.string(),\n        created_at: z.string(),\n      })\n    )\n    .default([]),\n});\n\nexport const PoolSchema = z.object({\n  id: z.string(),\n  name: z.union([z.string(), z.null()]).transform((name) => (name ? name : 'Unnamed Pool')),\n  total_weight: z.union([z.null(), GraphBigIntSchema]),\n  configurations: z.array(MarketConfigurationSchema),\n  registered_distributors: z.array(RewardDistributorSchema).default([]),\n});\n\nexport type PoolType = z.infer<typeof PoolSchema>;\n\nexport const PoolDataResultSchema = z.object({\n  data: z.object({\n    pool: z.union([PoolSchema, z.null()]),\n  }),\n});\n\nconst gql = (data: TemplateStringsArray) => data[0];\n\nconst PoolsDataDocument = gql`\n  query pool($id: String) {\n    pool(id: $id) {\n      id\n      name\n      registered_distributors(where: { isActive: true }) {\n        id\n        total_distributed\n        rewards_distributions(orderBy: created_at, orderDirection: desc) {\n          amount\n          duration\n          created_at\n        }\n      }\n      total_weight\n      configurations {\n        id\n        weight\n        max_debt_share_value\n        market {\n          id\n          address\n          usd_deposited\n          usd_withdrawn\n          net_issuance\n          reported_debt\n          updated_at\n          market_snapshots_by_week(first: 2, orderBy: updated_at, orderDirection: desc) {\n            id\n            usd_deposited\n            usd_withdrawn\n            net_issuance\n            reported_debt\n            updated_at\n            updates_in_period\n          }\n        }\n      }\n    }\n  }\n`;\n\nconst getPoolData = async (chainName: string, id: string) => {\n  const url = getSubgraphUrl(chainName);\n\n  const res = await fetch(url, {\n    method: 'POST',\n    body: JSON.stringify({ query: PoolsDataDocument, variables: { id } }),\n  });\n\n  const json = await res.json();\n\n  if (json.errors) {\n    const { message } = json.errors[0];\n    throw new Error(message);\n  }\n\n  return PoolDataResultSchema.parse(json);\n};\n\nexport const usePoolData = (poolId?: string, networkName?: string) => {\n  const { network } = useNetwork();\n\n  return useQuery({\n    queryKey: [`${network?.id}-${network?.preset}`, 'PoolData', { pool: poolId }],\n    queryFn: async () => {\n      const name = networkName || network?.name;\n      if (!poolId || !name) throw Error('No poolId or networkId');\n      const poolData = await getPoolData(name, poolId);\n\n      if (!poolData.data.pool) {\n        throw Error(`Pool ${poolId} not found`);\n      }\n\n      return poolData.data.pool;\n    },\n    enabled: Boolean(poolId && parseInt(poolId) > 0),\n  });\n};\n","import { Fade, Flex, Spinner, Td, Text, Th, Tr } from '@chakra-ui/react';\nimport { CollateralType, useCollateralTypes } from '@snx-v3/useCollateralTypes';\nimport { CustomTable } from '../CustomTable';\nimport { RewardsInterface, useRewards } from '@snx-v3/useRewards';\nimport { usePoolData } from '@snx-v3/usePoolData';\nimport { TokenIcon } from '../TokenIcon';\nimport { prettyString } from '@snx-v3/format';\nimport { convertSecondsToDisplayString } from '@snx-v3/formatters';\n\nconst TableHeader = [\n  <Th\n    key=\"asset-header\"\n    py={5}\n    textTransform=\"unset\"\n    color=\"gray.600\"\n    border=\"none\"\n    fontFamily=\"heading\"\n    fontSize=\"12px\"\n    lineHeight=\"16px\"\n  >\n    Estimated Rate\n  </Th>,\n  <Th key=\"tvl-header\" border=\"none\" textTransform=\"unset\" py={5}>\n    <Text color=\"gray.600\" fontFamily=\"heading\" fontSize=\"12px\" lineHeight=\"16px\" mr={1}>\n      Distributor\n    </Text>\n  </Th>,\n  <Th key=\"pnl-header\" border=\"none\" textTransform=\"unset\" py={5}>\n    <Text color=\"gray.600\" fontFamily=\"heading\" fontSize=\"12px\" lineHeight=\"16px\" mr={1}>\n      Total Distributed\n    </Text>\n  </Th>,\n  <Th\n    key=\"button-placeholder-header\"\n    py={5}\n    textTransform=\"unset\"\n    color=\"gray.600\"\n    border=\"none\"\n    fontFamily=\"heading\"\n    fontSize=\"12px\"\n    lineHeight=\"16px\"\n  >\n    <Text color=\"gray.600\" fontFamily=\"heading\" fontSize=\"12px\" lineHeight=\"16px\" mr={1}>\n      Status\n    </Text>\n  </Th>,\n];\n\nfunction RewardsTableUi({\n  collateralTypes,\n  isLoading,\n  accountId,\n  poolId,\n  registered_distributors,\n}: {\n  collateralTypes?: CollateralType[];\n  isLoading: boolean;\n  accountId?: string;\n  poolId: string;\n  registered_distributors?: RewardsInterface;\n}) {\n  if (!registered_distributors && !isLoading) return null;\n\n  return (\n    <CustomTable\n      loadingState={{ isLoading: isLoading, headerLength: TableHeader.length, numberOfRows: 1 }}\n      headerColumns={TableHeader}\n      rows={\n        !collateralTypes\n          ? []\n          : collateralTypes.map((types) => (\n              <RewardsRow\n                key={types.tokenAddress.concat('rewards')}\n                collateralType={types}\n                accountId={accountId}\n                poolId={poolId}\n                isLoading={isLoading}\n                registered_distributors={registered_distributors}\n              />\n            ))\n      }\n    />\n  );\n}\n\nfunction RewardsRow({\n  collateralType,\n  accountId,\n  poolId,\n  registered_distributors,\n}: {\n  collateralType?: CollateralType;\n  isLoading: boolean;\n  accountId?: string;\n  poolId: string;\n  registered_distributors?: RewardsInterface;\n}) {\n  const { isLoading: isRewardsLoading, data: rewardsData } = useRewards(\n    registered_distributors,\n    poolId,\n    collateralType?.tokenAddress,\n    accountId\n  );\n\n  return isRewardsLoading && !rewardsData ? (\n    <Spinner />\n  ) : (\n    rewardsData?.map((data, index) => (\n      <Tr\n        key={data.distributorAddress.concat('rewards-table')}\n        borderBottomWidth={index === rewardsData.length - 1 ? 'none' : '1px'}\n      >\n        <Td border=\"none\">\n          <Fade in>\n            <Flex alignItems=\"center\">\n              <TokenIcon symbol={data.symbol} />\n              <Flex flexDirection=\"column\" ml={3}>\n                <Text color=\"white\" lineHeight=\"1.25rem\" fontFamily=\"heading\">\n                  {/* Comment out until for now */}\n                  {/* {data.rate} */}\n                </Text>\n                <Text>{convertSecondsToDisplayString(data.duration)}</Text>\n              </Flex>\n            </Flex>\n          </Fade>\n        </Td>\n        <Td border=\"none\">\n          <Fade in>\n            <Text color=\"white\" lineHeight=\"1.25rem\" fontFamily=\"heading\" ml={3}>\n              {prettyString(data.distributorAddress, 6, 6)}\n            </Text>\n          </Fade>\n        </Td>\n        <Td border=\"none\">\n          <Fade in>\n            <Text color=\"white\" lineHeight=\"1.25rem\" fontFamily=\"heading\" ml={3}>\n              {data.total.toLocaleString('en-US', { maximumFractionDigits: 2 })} {data.symbol}\n            </Text>\n          </Fade>\n        </Td>\n        <Td border=\"none\">\n          <Fade in>\n            <Text color=\"white\" lineHeight=\"1.25rem\" fontFamily=\"heading\" ml={3}>\n              {data.duration}\n            </Text>\n          </Fade>\n        </Td>\n      </Tr>\n    ))\n  );\n}\n\nexport function RewardsTable({ accountId, poolId }: { accountId?: string; poolId: string }) {\n  const { data: collateralTypes, isLoading: collateralTypesAreLoading } = useCollateralTypes();\n  const { data: poolData, isLoading: poolDataIsLoading } = usePoolData(poolId);\n\n  return (\n    <RewardsTableUi\n      collateralTypes={collateralTypes}\n      accountId={accountId}\n      poolId={poolId}\n      registered_distributors={poolData?.registered_distributors}\n      isLoading={poolDataIsLoading && collateralTypesAreLoading}\n    />\n  );\n}\n","import { Network, useNetwork } from '@snx-v3/useBlockchain';\nimport { useQuery } from '@tanstack/react-query';\n\ninterface PoolData {\n  apr7d: number;\n  apr7dPnl: number;\n  apr7dRewards: number;\n  apr24h: number;\n  apr24hPnl: number;\n  apr24hRewards: number;\n  apr28d: number;\n  apr28dPnl: number;\n  apr28dRewards: number;\n  aprCombined: number;\n  aprPnl: number;\n  aprRewards: number;\n  apy7d: number;\n  apy7dPnl: number;\n  apy7dRewards: number;\n  apy24h: number;\n  apy24hPnl: number;\n  apy24hRewards: number;\n  apy28d: number;\n  apy28dPnl: number;\n  apy28dRewards: number;\n  collateralType: string;\n  collateralValue: number;\n  cumulativeIssuance: number;\n  cumulativePnl: number;\n  debtAmount: number;\n  hourlyIssuance: number;\n  hourlyPnl: number;\n  hourlyPnlPct: number;\n  hourlyRewardsPct: number;\n  poolId: number;\n  rewardsUSD: number;\n  timestamp: string;\n}\n\nconst sevenDays = new Date();\nsevenDays.setDate(sevenDays.getDate() - 7);\nconst sevenWeeks = new Date();\nsevenWeeks.setDate(sevenWeeks.getDate() - 7 * 7);\nconst sevenMonth = new Date();\nsevenMonth.setDate(sevenMonth.getDate() - 7 * 4 * 7);\nconst oneYear = new Date();\noneYear.setDate(oneYear.getDate() - 365);\n\nexport function useAprHistory(customNetwork?: Network) {\n  const { network } = useNetwork();\n  const chain = customNetwork || network;\n\n  return useQuery({\n    queryKey: ['apr-history', chain?.id],\n    queryFn: async () => {\n      if (!chain?.id) return {};\n      try {\n        const response = await fetch('https://api.synthetix.io/v3/base/sc-pool-apy-history');\n\n        const data: PoolData[] = await response.json();\n\n        const sevenDaysAPR = data\n          .filter((d) => new Date(d.timestamp).getTime() >= sevenDays.getTime())\n          .map((d) => ({\n            timestamp: d.timestamp,\n            value: d.apr24h * 100,\n            pnl: d.apr24hPnl * 100,\n            rewards: d.apr24hRewards * 100,\n            combined: d.aprCombined * 100,\n            pnlCombined: d.aprPnl * 100,\n            rewardsCombined: d.aprRewards * 100,\n          }))\n          .reverse();\n\n        const sevenWeeksAPR = data\n          .filter((d) => new Date(d.timestamp).getTime() >= sevenWeeks.getTime())\n          .filter((_, index) => index % 7 === 0)\n          .map((d) => ({\n            timestamp: d.timestamp,\n            value: d.apr7d * 100,\n            pnl: d.apr7dPnl * 100,\n            rewards: d.apr7dRewards * 100,\n            combined: d.aprCombined * 100,\n            pnlCombined: d.aprPnl * 100,\n            rewardsCombined: d.aprRewards * 100,\n          }))\n\n          .reverse();\n        const sevenMonthAPR = data\n          .filter((d) => new Date(d.timestamp).getTime() >= sevenMonth.getTime())\n          .filter((_, index) => index % 30 === 0)\n          .map((d) => ({\n            timestamp: d.timestamp,\n            value: d.apr28d * 100,\n            pnl: d.apr28dPnl * 100,\n            rewards: d.apr28dRewards * 100,\n            combined: d.aprCombined * 100,\n            pnlCombined: d.aprPnl * 100,\n            rewardsCombined: d.aprRewards * 100,\n          }))\n          .reverse();\n        const oneYearAPR = data\n          .filter((d) => new Date(d.timestamp).getTime() >= oneYear.getTime())\n          .map((d) => ({\n            timestamp: d.timestamp,\n            value: d.apr28d * 100,\n            pnl: d.apr28dPnl * 100,\n            rewards: d.apr28dRewards * 100,\n            combined: d.aprCombined * 100,\n            pnlCombined: d.aprPnl * 100,\n            rewardsCombined: d.aprRewards * 100,\n          }))\n          .reverse();\n\n        const sevenDaysTVL = data\n          .filter((d) => new Date(d.timestamp).getTime() >= sevenDays.getTime())\n          .map((d) => ({\n            timestamp: d.timestamp,\n            value: d.collateralValue,\n          }))\n          .reverse();\n        const sevenWeeksTVL = data\n          .filter((d) => new Date(d.timestamp).getTime() >= sevenWeeks.getTime())\n          .map((d) => ({\n            timestamp: d.timestamp,\n            value: d.collateralValue,\n          }))\n          .filter((_, index) => index % 7 === 0)\n          .reverse();\n        const sevenMonthTVL = data\n          .filter((d) => new Date(d.timestamp).getTime() >= sevenMonth.getTime())\n          .filter((_, index) => index % 30 === 0)\n          .map((d) => ({\n            timestamp: d.timestamp,\n            value: d.collateralValue,\n          }))\n          .reverse();\n        const oneYearTVL = data\n          .filter((d) => new Date(d.timestamp).getTime() >= oneYear.getTime())\n          .map((d) => ({\n            timestamp: d.timestamp,\n            value: d.collateralValue,\n          }))\n          .reverse();\n        return {\n          sevenDaysTVL,\n          sevenWeeksTVL,\n          sevenMonthTVL,\n          oneYearTVL,\n          allTVL: data\n            .map((d) => ({\n              timestamp: d.timestamp,\n              value: d.collateralValue,\n            }))\n            .reverse(),\n          allAPR: data\n            .map((d) => ({\n              timestamp: d.timestamp,\n              value: d.apr24h * 100,\n              pnl: d.apr24hPnl * 100,\n              rewards: d.apr24hRewards * 100,\n              combined: d.aprCombined * 100,\n              pnlCombined: d.aprPnl * 100,\n              rewardsCombined: d.aprRewards * 100,\n            }))\n            .reverse(),\n          sevenDaysAPR,\n          sevenWeeksAPR,\n          sevenMonthAPR,\n          oneYearAPR,\n        };\n      } catch (error) {\n        return;\n      }\n    },\n  });\n}\n","import { Divider, Flex, Tab, TabList, Tabs, Text } from '@chakra-ui/react';\nimport { formatNumberToUsd } from '@snx-v3/formatters';\nimport { useAprHistory } from '@snx-v3/useAprHistory';\nimport { useState } from 'react';\nimport { Legend, Area, AreaChart, Tooltip, XAxis } from 'recharts';\nimport { TokenIcon } from '../TokenIcon';\n\ntype ActiveTabs = 'sevenDaysTVL' | 'sevenWeeksTVL' | 'sevenMonthTVL' | 'oneYearTVL' | 'allTVL';\n\nexport function HistoricalTVL() {\n  const [activeTab, setActiveTab] = useState<ActiveTabs>('sevenDaysTVL');\n  const { data } = useAprHistory();\n  const totalTVL = data?.allTVL && data.allTVL[data.allTVL?.length - 1].value;\n\n  return (\n    <Flex\n      border=\"1px solid\"\n      borderColor=\"gray.900\"\n      rounded=\"base\"\n      w=\"100%\"\n      p=\"6\"\n      bg=\"navy.700\"\n      flexDir=\"column\"\n    >\n      <Flex justifyContent=\"space-between\" alignItems=\"center\" w=\"100%\">\n        <Text fontWeight={700} fontSize=\"20px\" color=\"white\">\n          TVL\n        </Text>\n        <Tabs\n          variant=\"soft-rounded\"\n          colorScheme=\"gray\"\n          onChange={(e) => {\n            setActiveTab(() => {\n              switch (e) {\n                case 0:\n                  return 'sevenDaysTVL';\n                case 1:\n                  return 'sevenWeeksTVL';\n                case 2:\n                  return 'sevenMonthTVL';\n                case 3:\n                  return 'oneYearTVL';\n                default:\n                  return 'allTVL';\n              }\n            });\n          }}\n        >\n          <TabList>\n            <Tab _selected={{ color: 'white', background: `gray.900` }} color=\"gray.500\">\n              1D\n            </Tab>\n            <Tab _selected={{ color: 'white', background: `gray.900` }} color=\"gray.500\">\n              1W\n            </Tab>\n            <Tab _selected={{ color: 'white', background: `gray.900` }} color=\"gray.500\">\n              1M\n            </Tab>\n            <Tab _selected={{ color: 'white', background: `gray.900` }} color=\"gray.500\">\n              1Y\n            </Tab>\n            <Tab _selected={{ color: 'white', background: `gray.900` }} color=\"gray.500\">\n              ALL\n            </Tab>\n          </TabList>\n        </Tabs>\n      </Flex>\n      {data && data[activeTab]?.length && (\n        <AreaChart width={445} height={300} data={data[activeTab]}>\n          <XAxis\n            axisLine={false}\n            tickLine={false}\n            dataKey={(key) => {\n              const now = new Date(key.timestamp);\n              return `${now.getDate()}/${now.getMonth() + 1}`;\n            }}\n            color=\"#9999AC\"\n            fontSize=\"12px\"\n          />\n          <Tooltip content={<CustomizedToolTip activeTab={activeTab} totalTVL={totalTVL} />} />\n          <Legend\n            verticalAlign=\"top\"\n            align=\"left\"\n            iconType=\"circle\"\n            content={<CustomizedLegend />}\n          />\n          <Area type=\"basis\" dataKey=\"value\" fillOpacity={1} fill=\"#319795\" />\n        </AreaChart>\n      )}\n    </Flex>\n  );\n}\n\nconst CustomizedLegend = () => {\n  return (\n    <Flex alignItems=\"center\" gap=\"2\">\n      <svg width=\"8\" height=\"8\" viewBox=\"0 0 8 8\" fill=\"#319795\" xmlns=\"http://www.w3.org/2000/svg\">\n        <circle cx=\"4\" cy=\"4\" r=\"4\" fill=\"#319795\" />\n      </svg>\n      <Text fontSize=\"12px\" color=\"gray.500\">\n        Total Value Locked\n      </Text>\n    </Flex>\n  );\n};\n\nconst CustomizedToolTip = (props: any) => {\n  const currentTVLLabel = () => {\n    switch (props.activeTab) {\n      case 'sevenDaysTVL':\n        return 'Daily';\n      case 'sevenWeeksTVL':\n        return 'Weekly';\n      case 'sevenMonthTVL':\n        return 'Monhtly';\n      case 'oneYearTVL':\n        return 'Yearly';\n      default:\n        return 'Total';\n    }\n  };\n\n  if (!props.active) return;\n  return (\n    <Flex\n      flexDir=\"column\"\n      border=\"1px solid\"\n      borderColor=\"gray.900\"\n      rounded=\"base\"\n      bg=\"navy.900\"\n      w=\"250px\"\n      h=\"auto\"\n      p=\"2\"\n      gap=\"1\"\n    >\n      <Text color=\"gray.500\" fontSize=\"12px\" fontWeight={700}>\n        {new Date(props.payload[0].payload.timestamp).toLocaleString().split(',')[0]}\n      </Text>\n      <Flex justifyContent=\"space-between\">\n        <Text color=\"gray.500\" fontSize=\"12px\" fontWeight={700}>\n          Total TVL\n        </Text>\n        <Text color=\"gray.500\" fontSize=\"12px\" fontWeight={700}>\n          {props.totalTVL && formatNumberToUsd(props.totalTVL, { maximumFractionDigits: 2 })}\n        </Text>\n      </Flex>\n      <Flex justifyContent=\"space-between\">\n        <Flex gap=\"1\" alignItems=\"center\">\n          <TokenIcon symbol=\"usdc\" width={12} height={12} />\n          <Text color=\"gray.500\" fontSize=\"12px\">\n            USDC\n          </Text>\n        </Flex>\n        <Text color=\"gray.500\" fontSize=\"12px\">\n          {props.totalTVL && formatNumberToUsd(props.totalTVL, { maximumFractionDigits: 2 })}\n        </Text>\n      </Flex>\n      <Divider />\n      <Flex justifyContent=\"space-between\">\n        <Text color=\"gray.500\" fontSize=\"12px\" fontWeight={700}>\n          {currentTVLLabel()} TVL\n        </Text>\n        <Text color=\"gray.500\" fontSize=\"12px\" fontWeight={700}>\n          {formatNumberToUsd(props.payload[0].payload.value, { maximumFractionDigits: 2 })}\n        </Text>\n      </Flex>\n      <Flex justifyContent=\"space-between\">\n        <Flex gap=\"1\" alignItems=\"center\">\n          <TokenIcon symbol=\"usdc\" width={12} height={12} />\n          <Text color=\"gray.500\" fontSize=\"12px\">\n            USDC\n          </Text>\n        </Flex>\n        <Text color=\"gray.500\" fontSize=\"12px\">\n          {formatNumberToUsd(props.payload[0].payload.value, { maximumFractionDigits: 2 })}\n        </Text>\n      </Flex>\n    </Flex>\n  );\n};\n","import { Input, InputProps } from '@chakra-ui/react';\nimport { ChangeEvent, useCallback, useEffect, useRef, useState } from 'react';\nimport { Wei, wei } from '@synthetixio/wei';\n\nexport interface NumberInputProps extends InputProps {\n  'data-testid'?: string;\n  'data-max'?: string;\n}\n\nexport const NUMBER_REGEX = /^([0-9]*[.])?[0-9]{0,18}$/;\n\nfunction cleanupNumber(value: Wei) {\n  // Cleanup trailing precision zeroes\n  const float = parseFloat(value.toString());\n  if (float === value.toNumber()) {\n    return `${float}`;\n  }\n  return value.toString();\n}\n\nexport function NumberInput({\n  value,\n  onChange,\n  min,\n  max,\n  InputProps,\n  dataTestId,\n}: {\n  onChange?: (value: Wei) => void;\n  value: Wei;\n  min?: Wei;\n  max?: Wei;\n  InputProps?: NumberInputProps;\n  dataTestId?: string;\n}) {\n  const [inputValue, setInputValue] = useState(value.gt(0) ? value.toString() : '');\n\n  const onInputChange = useCallback(\n    (e: ChangeEvent<HTMLInputElement>) => {\n      setInputValue(e.target.value);\n      if (!onChange) {\n        // Could be a read-only input\n        return;\n      }\n      if (!NUMBER_REGEX.test(`${e.target.value}`)) {\n        return;\n      }\n      let nextValue = value;\n      try {\n        nextValue = wei(e.target.value || 0);\n      } catch (_err) {\n        // whatever\n      }\n      if (!value.eq(nextValue)) {\n        onChange(nextValue);\n      }\n    },\n    [onChange, value]\n  );\n\n  const ref = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    if (!NUMBER_REGEX.test(`${inputValue}`)) {\n      ref.current.setCustomValidity('Invalid number');\n      return;\n    }\n    if (value && value.eq(0)) {\n      ref.current.setCustomValidity('Value required');\n      return;\n    }\n    if (min && min.gte(0) && value && value.lt(min)) {\n      ref.current.setCustomValidity(`Value smaller than minimum of ${cleanupNumber(min)}`);\n      return;\n    }\n    if (max && max.gte(0) && value && value.gt(max)) {\n      ref.current.setCustomValidity(`Value greater than maximum of ${cleanupNumber(max)}`);\n      return;\n    }\n    ref.current.setCustomValidity('');\n  }, [inputValue, min, max, value]);\n\n  useEffect(() => {\n    if (value.eq(0)) {\n      return setInputValue('');\n    }\n    return setInputValue(cleanupNumber(value));\n  }, [value]);\n\n  return (\n    <Input\n      ref={ref}\n      flex=\"1\"\n      type=\"text\"\n      border=\"none\"\n      borderWidth=\"0px\"\n      textAlign=\"end\"\n      p={0}\n      outline=\"none\"\n      fontFamily=\"heading\"\n      fontSize=\"xl\"\n      fontWeight=\"black\"\n      lineHeight=\"2xl\"\n      color=\"white\"\n      height=\"unset\"\n      autoFocus={true}\n      placeholder=\"Enter Amount\"\n      _focus={{ boxShadow: 'none !important' }}\n      _placeholder={{ color: 'whiteAlpha.700' }}\n      value={inputValue}\n      onChange={onInputChange}\n      data-cy={dataTestId}\n      {...InputProps}\n    />\n  );\n}\n","import { calculateCRatio } from '@snx-v3/calculations';\nimport { Wei, wei } from '@synthetixio/wei';\n\nexport const validatePosition = ({\n  issuanceRatioD18,\n  collateralAmount,\n  collateralPrice,\n  debt,\n  collateralChange,\n  debtChange,\n}: {\n  issuanceRatioD18?: Wei;\n  collateralAmount?: Wei;\n  collateralPrice?: Wei;\n  debt?: Wei;\n  collateralChange: Wei;\n  debtChange: Wei;\n}) => {\n  const targetCRatio = issuanceRatioD18 ? issuanceRatioD18 : wei(1);\n  const newDebt = wei(debt || 0).add(debtChange);\n  const newCollateralAmount = wei(collateralAmount || 0).add(collateralChange);\n  const newCollateralValue = newCollateralAmount.mul(collateralPrice || 0);\n\n  const newCRatio = calculateCRatio(newDebt, newCollateralValue);\n  const maybeMaxDebt = wei(newCollateralAmount)\n    .mul(collateralPrice || 0)\n    .div(targetCRatio)\n    .sub(debt || 0);\n\n  const maxDebt = maybeMaxDebt.gte(0) ? maybeMaxDebt : wei(0);\n\n  const isValid =\n    (newCRatio.gte(targetCRatio) || newCRatio.lte(0)) &&\n    (newDebt.lte(0) || newCollateralAmount.gt(0));\n\n  return {\n    isValid,\n    hasChanges: !collateralChange.eq(0) || !debtChange.eq(0),\n    newCRatio,\n    newDebt,\n    newCollateralAmount,\n    maxDebt,\n  };\n};\n","import { Button, Flex, Text } from '@chakra-ui/react';\nimport { Amount } from '@snx-v3/Amount';\nimport { BorderBox } from '@snx-v3/BorderBox';\nimport { DollarCircle } from '@snx-v3/icons';\nimport { NumberInput } from '@snx-v3/NumberInput';\nimport { ManagePositionContext } from '@snx-v3/ManagePositionContext';\nimport { FC, useContext } from 'react';\nimport { validatePosition } from '@snx-v3/validatePosition';\nimport { useCollateralType } from '@snx-v3/useCollateralTypes';\nimport { useParams } from '@snx-v3/useParams';\nimport { LiquidityPosition } from '@snx-v3/useLiquidityPosition';\nimport Wei from '@synthetixio/wei';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { SUSDCIcon } from '@snx-v3/icons/SUSDCIcon';\nimport { useStablecoin } from '@snx-v3/useStablecoin';\n\nconst BorrowUi: FC<{\n  debtChange: Wei;\n  maxDebt: Wei;\n  setDebtChange: (val: Wei) => void;\n}> = ({ debtChange, setDebtChange, maxDebt }) => {\n  const { network } = useNetwork();\n  const { data: stablecoin } = useStablecoin();\n\n  const isBase = isBaseAndromeda(network?.id, network?.preset);\n  return (\n    <Flex flexDirection=\"column\">\n      <Text fontSize=\"md\" fontWeight=\"700\" mb=\"0.5\">\n        {isBase ? 'Claim USDC' : `Borrow ${stablecoin?.symbol}`}\n      </Text>\n      <Text fontSize=\"sm\" color=\"gray.400\" mb=\"4\">\n        {isBase\n          ? 'Claim USDC fees you have earned from providing liquidity. These will be available in 24h for withdrawal.'\n          : `Take an interest-free loan of ${stablecoin?.symbol} against your collateral. This\n              increases your debt and decreases your C-Ratio.`}\n      </Text>\n      <BorderBox display=\"flex\" py={2} px={3} mb=\"4\">\n        <Text display=\"flex\" gap={2} alignItems=\"center\" fontWeight=\"600\" mx=\"2\">\n          {isBase ? <SUSDCIcon /> : <DollarCircle />}\n          {isBase ? 'USDC' : stablecoin?.symbol}\n        </Text>\n        <Flex flexDirection=\"column\" justifyContent=\"flex-end\" flexGrow={1}>\n          <NumberInput\n            InputProps={{\n              isRequired: true,\n              'data-testid': 'borrow amount input',\n              'data-max': maxDebt.toString(),\n            }}\n            value={debtChange}\n            onChange={(val) => setDebtChange(val)}\n            max={maxDebt}\n          />\n          <Flex flexDirection=\"column\" alignItems=\"flex-end\" fontSize=\"xs\" color=\"whiteAlpha.700\">\n            <Flex\n              gap=\"1\"\n              cursor=\"pointer\"\n              onClick={() => {\n                if (!maxDebt) {\n                  return;\n                }\n                setDebtChange(maxDebt);\n              }}\n            >\n              <Text>Max:</Text>\n              <Amount value={maxDebt} /> {isBase ? 'USDC' : stablecoin?.symbol}\n            </Flex>\n          </Flex>\n        </Flex>\n      </BorderBox>\n      <Button data-testid=\"borrow submit\" type=\"submit\">\n        {isBase ? 'Claim USDC' : `Borrow ${stablecoin?.symbol}`}\n      </Button>\n    </Flex>\n  );\n};\n\nexport const Borrow = ({ liquidityPosition }: { liquidityPosition?: LiquidityPosition }) => {\n  const params = useParams();\n  const { debtChange, collateralChange, setDebtChange } = useContext(ManagePositionContext);\n\n  const { data: collateralType } = useCollateralType(params.collateralSymbol);\n\n  const { maxDebt } = validatePosition({\n    issuanceRatioD18: collateralType?.issuanceRatioD18,\n    collateralAmount: liquidityPosition?.collateralAmount,\n    collateralPrice: liquidityPosition?.collateralPrice,\n    debt: liquidityPosition?.debt,\n    collateralChange: collateralChange,\n    debtChange: debtChange,\n  });\n\n  return <BorrowUi setDebtChange={setDebtChange} debtChange={debtChange} maxDebt={maxDebt} />;\n};\n","import { FC } from 'react';\nimport { Flex, Badge } from '@chakra-ui/react';\nexport const PercentBadges: FC<{\n  disabled: boolean;\n  onBadgePress: (num: number) => void;\n  activeBadge: number;\n}> = ({ onBadgePress, activeBadge, disabled }) => {\n  return (\n    <Flex w=\"100%\" justifyContent=\"space-between\" mt={2} mb={1}>\n      <Badge\n        variant=\"percent\"\n        sx={{\n          bg: activeBadge >= 0.25 ? 'cyan.500' : 'whiteAlpha.300',\n          color: activeBadge >= 0.25 ? 'black' : 'cyan.500',\n          cursor: disabled ? 'not-allowed' : 'pointer',\n        }}\n        mr={1}\n        onClick={disabled ? undefined : () => onBadgePress(0.25)}\n      >\n        25%\n      </Badge>\n      <Badge\n        variant=\"percent\"\n        sx={{\n          bg: activeBadge >= 0.5 ? 'cyan.500' : 'whiteAlpha.300',\n          color: activeBadge >= 0.5 ? 'black' : 'cyan.500',\n          cursor: disabled ? 'not-allowed' : 'pointer',\n        }}\n        mx={1}\n        onClick={disabled ? undefined : () => onBadgePress(0.5)}\n        data-cy=\"manage-percent-50\"\n      >\n        50%\n      </Badge>\n      <Badge\n        variant=\"percent\"\n        sx={{\n          bg: activeBadge >= 0.75 ? 'cyan.500' : 'whiteAlpha.300',\n          color: activeBadge >= 0.75 ? 'black' : 'cyan.500',\n          cursor: disabled ? 'not-allowed' : 'pointer',\n        }}\n        mx={1}\n        onClick={disabled ? undefined : () => onBadgePress(0.75)}\n      >\n        75%\n      </Badge>\n      <Badge\n        variant=\"percent\"\n        sx={{\n          bg: activeBadge === 1 ? 'cyan.500' : 'whiteAlpha.300',\n          color: activeBadge === 1 ? 'black' : 'cyan.500',\n          cursor: disabled ? 'not-allowed' : 'pointer',\n        }}\n        ml={1}\n        onClick={disabled ? undefined : () => onBadgePress(1)}\n      >\n        100%\n      </Badge>\n    </Flex>\n  );\n};\n","import { Button, Flex, Text } from '@chakra-ui/react';\nimport { Amount } from '@snx-v3/Amount';\nimport { BorderBox } from '@snx-v3/BorderBox';\nimport { CollateralIcon } from '@snx-v3/icons';\nimport { ManagePositionContext } from '@snx-v3/ManagePositionContext';\nimport { NumberInput } from '@snx-v3/NumberInput';\nimport { PercentBadges } from '@snx-v3/PercentBadges';\nimport { useCollateralType } from '@snx-v3/useCollateralTypes';\nimport { useEthBalance } from '@snx-v3/useEthBalance';\nimport Wei, { wei } from '@synthetixio/wei';\nimport { FC, useContext, useMemo, useState } from 'react';\nimport { useParams } from '@snx-v3/useParams';\nimport { AccountCollateralType } from '@snx-v3/useAccountCollateral';\nimport { useTransferableSynthetix } from '@snx-v3/useTransferableSynthetix';\nimport { CollateralAlert } from '../';\nimport { useTokenBalance } from '@snx-v3/useTokenBalance';\nimport { LiquidityPosition } from '@snx-v3/useLiquidityPosition';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { useGetUSDTokens } from '@snx-v3/useGetUSDTokens';\n\nexport const DepositUi: FC<{\n  accountCollateral: AccountCollateralType;\n  collateralChange: Wei;\n  ethBalance?: Wei;\n  snxBalance?: {\n    transferable: Wei;\n    collateral?: Wei;\n  };\n  tokenBalance?: Wei;\n  displaySymbol: string;\n  symbol: string;\n  setCollateralChange: (val: Wei) => void;\n}> = ({\n  accountCollateral,\n  collateralChange,\n  setCollateralChange,\n  displaySymbol,\n  symbol,\n  tokenBalance,\n  ethBalance,\n  snxBalance,\n}) => {\n  const [activeBadge, setActiveBadge] = useState(0);\n\n  const combinedTokenBalance = useMemo(() => {\n    if (symbol === 'SNX') {\n      return snxBalance?.transferable;\n    }\n    if (symbol !== 'WETH') {\n      return tokenBalance;\n    }\n    if (!tokenBalance || !ethBalance) {\n      return undefined;\n    }\n    return tokenBalance.add(ethBalance);\n  }, [symbol, tokenBalance, ethBalance, snxBalance?.transferable]);\n\n  const maxAmount = useMemo(() => {\n    return combinedTokenBalance?.add(accountCollateral.availableCollateral.toString());\n  }, [accountCollateral.availableCollateral, combinedTokenBalance]);\n\n  return (\n    <Flex flexDirection=\"column\">\n      <Text fontSize=\"md\" fontWeight=\"700\" mb=\"0.5\">\n        Add {displaySymbol}\n      </Text>\n      <Text fontSize=\"sm\" color=\"gray.400\" mb=\"4\">\n        Provide additional collateral to this position.\n      </Text>\n      <BorderBox display=\"flex\" flexDirection=\"column\" py={2} px={3} mb=\"4\">\n        <Flex>\n          <Text display=\"flex\" gap={2} alignItems=\"center\" fontWeight=\"600\" mx=\"2\">\n            <CollateralIcon symbol={symbol} />\n            {displaySymbol}\n          </Text>\n          <Flex flexDirection=\"column\" justifyContent=\"flex-end\" flexGrow={1}>\n            <Flex flexDirection=\"column\" justifyContent=\"flex-end\" flexGrow={1}>\n              <NumberInput\n                InputProps={{\n                  'data-testid': 'deposit amount input',\n                  'data-max': maxAmount?.toString(),\n                }}\n                value={collateralChange}\n                onChange={(value) => {\n                  setActiveBadge(0);\n                  setCollateralChange(value);\n                }}\n                max={maxAmount}\n                dataTestId=\"deposit-number-input\"\n              />\n              <Flex\n                flexDirection=\"column\"\n                alignItems=\"flex-end\"\n                fontSize=\"xs\"\n                color=\"whiteAlpha.700\"\n              >\n                {accountCollateral.availableCollateral.gt(0) ? (\n                  <Flex\n                    gap=\"1\"\n                    cursor=\"pointer\"\n                    onClick={() => setCollateralChange(accountCollateral.availableCollateral)}\n                  >\n                    <Text>Available {symbol} Collateral:</Text>\n                    <Amount value={accountCollateral?.availableCollateral} />\n                  </Flex>\n                ) : null}\n                <Flex\n                  gap=\"1\"\n                  cursor=\"pointer\"\n                  onClick={() => {\n                    const amount = symbol === 'SNX' ? snxBalance?.transferable : tokenBalance;\n                    if (!amount) {\n                      return;\n                    }\n\n                    setCollateralChange(amount);\n                  }}\n                >\n                  <Text>{symbol} Balance:</Text>\n                  <Amount value={symbol === 'SNX' ? snxBalance?.transferable : tokenBalance} />\n                </Flex>\n                {symbol === 'WETH' ? (\n                  <Flex\n                    gap=\"1\"\n                    cursor=\"pointer\"\n                    onClick={() => {\n                      if (!ethBalance) {\n                        return;\n                      }\n                      setCollateralChange(ethBalance);\n                    }}\n                  >\n                    <Text>ETH Balance:</Text>\n                    <Amount value={ethBalance} />\n                  </Flex>\n                ) : null}\n              </Flex>\n            </Flex>\n          </Flex>\n        </Flex>\n        <PercentBadges\n          disabled={maxAmount ? maxAmount.eq(0) : false}\n          onBadgePress={(badgeNum) => {\n            if (!maxAmount) {\n              return;\n            }\n            if (activeBadge === badgeNum) {\n              setCollateralChange(wei(0));\n              setActiveBadge(0);\n              return;\n            }\n            setActiveBadge(badgeNum);\n            setCollateralChange(maxAmount.mul(badgeNum));\n          }}\n          activeBadge={activeBadge}\n        />\n      </BorderBox>\n      {snxBalance?.collateral && snxBalance?.collateral.gt(0) && symbol === 'SNX' && (\n        <CollateralAlert tokenBalance={snxBalance.collateral} />\n      )}\n      <Button\n        disabled={combinedTokenBalance === undefined}\n        data-testid=\"deposit submit\"\n        data-cy=\"deposit-submit-button\"\n        type=\"submit\"\n      >\n        Add {displaySymbol}\n      </Button>\n    </Flex>\n  );\n};\n\nexport const Deposit = ({ liquidityPosition }: { liquidityPosition?: LiquidityPosition }) => {\n  const { collateralChange, setCollateralChange } = useContext(ManagePositionContext);\n  const { network } = useNetwork();\n  const { collateralSymbol } = useParams();\n  const { data: usdTokens } = useGetUSDTokens();\n  const { data: collateralType } = useCollateralType(collateralSymbol);\n  const { data: transferrableSnx } = useTransferableSynthetix();\n\n  const { data: tokenBalance } = useTokenBalance(\n    isBaseAndromeda(network?.id, network?.preset) ? usdTokens?.USDC : collateralType?.tokenAddress\n  );\n\n  const { data: ethBalance } = useEthBalance();\n\n  if (!collateralType || !liquidityPosition?.accountCollateral) return null;\n\n  return (\n    <DepositUi\n      accountCollateral={liquidityPosition.accountCollateral}\n      displaySymbol={collateralType?.displaySymbol || ''}\n      tokenBalance={tokenBalance}\n      snxBalance={transferrableSnx}\n      ethBalance={ethBalance}\n      symbol={collateralType?.symbol || ''}\n      setCollateralChange={setCollateralChange}\n      collateralChange={collateralChange}\n    />\n  );\n};\n","import { useQuery } from '@tanstack/react-query';\nimport { useNetwork, useProvider, useWallet } from '@snx-v3/useBlockchain';\nimport { Wei, wei } from '@synthetixio/wei';\nimport { ethers } from 'ethers';\nimport { useCollateralType } from '@snx-v3/useCollateralTypes';\n\nexport function useTransferableSynthetix() {\n  const { network } = useNetwork();\n  const { activeWallet } = useWallet();\n  const provider = useProvider();\n  const { data: snxCollateral } = useCollateralType('SNX');\n\n  const accountAddress = activeWallet?.address;\n  const snxAddress = snxCollateral?.tokenAddress;\n\n  return useQuery({\n    enabled: Boolean(provider && accountAddress && snxAddress),\n    queryKey: [\n      `${network?.id}-${network?.preset}`,\n      'TransferableSynthetix',\n      { address: activeWallet?.address },\n    ],\n    queryFn: async function (): Promise<{ transferable: Wei; collateral?: Wei }> {\n      if (!(provider && accountAddress && snxAddress)) {\n        throw 'useTransferableSynthetix should not be enabled';\n      }\n      const contract = new ethers.Contract(\n        snxAddress,\n        [\n          'function balanceOf(address owner) view returns (uint256)',\n          'function transferableSynthetix(address account) view returns (uint256 transferable)',\n          'function collateral(address account) view returns (uint256 collateral)',\n        ],\n        provider\n      );\n      try {\n        // Cannon case\n        if (network?.name === 'cannon') {\n          const balanceOf = await contract.balanceOf(accountAddress);\n          return {\n            transferable: wei(balanceOf),\n          };\n        }\n\n        // Normal case for SNX case\n        const [transferableSynthetix, collateral] = await Promise.all([\n          contract.transferableSynthetix(accountAddress),\n          contract.collateral(accountAddress),\n        ]);\n\n        return {\n          transferable: wei(transferableSynthetix),\n          collateral: wei(collateral),\n        };\n      } catch (e) {\n        console.error(e);\n        throw e;\n      }\n    },\n  });\n}\n","import { ArrowDownIcon, ArrowUpIcon } from '@chakra-ui/icons';\nimport { Box, Button, Flex } from '@chakra-ui/react';\nimport { BorderBox } from '@snx-v3/BorderBox';\nimport { BorrowIcon, DollarCircle } from '@snx-v3/icons';\nimport { ManagePositionContext } from '@snx-v3/ManagePositionContext';\nimport { useCollateralType } from '@snx-v3/useCollateralTypes';\nimport { LiquidityPosition } from '@snx-v3/useLiquidityPosition';\nimport { useParams } from '@snx-v3/useParams';\nimport { validatePosition } from '@snx-v3/validatePosition';\nimport { wei } from '@synthetixio/wei';\nimport {\n  FC,\n  FormEvent,\n  lazy,\n  PropsWithChildren,\n  Suspense,\n  useCallback,\n  useContext,\n  useEffect,\n  useState,\n} from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { Borrow } from '../';\nimport { Repay } from '../';\nimport { Undelegate } from '../';\nimport { Deposit } from '../';\nimport { z } from 'zod';\nimport { safeImport } from '@synthetixio/safe-import';\nimport { calculateCRatio } from '@snx-v3/calculations';\nimport { Network, useNetwork } from '@snx-v3/useBlockchain';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { useStablecoin } from '@snx-v3/useStablecoin';\n\nconst RepayModal = lazy(() => safeImport(() => import('@snx-v3/RepayModal')));\nconst BorrowModal = lazy(() => safeImport(() => import('@snx-v3/BorrowModal')));\nconst DepositModal = lazy(() => safeImport(() => import('@snx-v3/DepositModal')));\nconst UndelegateModal = lazy(() => safeImport(() => import('@snx-v3/UndelegateModal')));\n\nconst validActions = ['borrow', 'deposit', 'repay', 'undelegate'] as const;\nconst ManageActionSchema = z.enum(validActions);\ntype ManageAction = z.infer<typeof ManageActionSchema>;\n\nconst ActionButton: FC<\n  PropsWithChildren<{\n    onClick?: (action: ManageAction) => void;\n    action: ManageAction;\n    activeAction?: string;\n    disabled?: boolean;\n  }>\n> = ({ children, action, activeAction, onClick, disabled }) => (\n  <BorderBox\n    as={Button}\n    fontWeight=\"700\"\n    fontSize=\"md\"\n    color=\"gray.50\"\n    bg=\"navy.900\"\n    _hover={{\n      bg: 'unset',\n    }}\n    _active={{\n      bg: 'unset',\n    }}\n    cursor={disabled ? 'not-allowed' : 'pointer'}\n    data-testid=\"manage action\"\n    data-action={action}\n    data-active={action === activeAction ? 'true' : undefined}\n    onClick={() => !disabled && onClick?.(action)}\n    py={2}\n    width=\"50%\"\n    textAlign=\"center\"\n    opacity={disabled ? '50%' : '100%'}\n    data-cy={`manage-action-${action}`}\n  >\n    {children}\n  </BorderBox>\n);\n\nconst ManageActionUi: FC<{\n  setActiveAction: (action: ManageAction) => void;\n  manageAction?: ManageAction;\n  onSubmit: (e: FormEvent) => void;\n  liquidityPosition?: LiquidityPosition;\n  network: Network | null;\n}> = ({ setActiveAction, manageAction, onSubmit, liquidityPosition, network }) => {\n  const debt = Number(liquidityPosition?.debt?.toString());\n  const isBase = isBaseAndromeda(network?.id, network?.preset);\n  const { data: stablecoin } = useStablecoin();\n\n  return (\n    <Box as=\"form\" onSubmit={onSubmit}>\n      <Flex mt={2} gap={2}>\n        <ActionButton onClick={setActiveAction} action=\"deposit\" activeAction={manageAction}>\n          <ArrowDownIcon w=\"15px\" h=\"15px\" mr={1} /> Add Collateral\n        </ActionButton>\n        <ActionButton\n          disabled={debt < 0}\n          onClick={setActiveAction}\n          action=\"repay\"\n          activeAction={manageAction}\n        >\n          <DollarCircle mr={1} /> Repay {isBase ? '' : stablecoin?.symbol}\n        </ActionButton>\n      </Flex>\n      <Flex mt={2} gap={2}>\n        <ActionButton onClick={setActiveAction} action=\"undelegate\" activeAction={manageAction}>\n          <ArrowUpIcon w=\"15px\" h=\"15px\" mr={1} /> Remove Collateral\n        </ActionButton>\n        <ActionButton\n          disabled={debt > 0}\n          onClick={setActiveAction}\n          action=\"borrow\"\n          activeAction={manageAction}\n        >\n          <BorrowIcon mr={1} /> {isBase ? 'Claim' : `Borrow ${stablecoin?.symbol}`}\n        </ActionButton>\n      </Flex>\n      <Flex direction=\"column\" mt={6}>\n        {manageAction === 'borrow' ? <Borrow liquidityPosition={liquidityPosition} /> : null}\n        {manageAction === 'deposit' ? <Deposit liquidityPosition={liquidityPosition} /> : null}\n        {manageAction === 'repay' ? <Repay liquidityPosition={liquidityPosition} /> : null}\n        {manageAction === 'undelegate' ? (\n          <Undelegate liquidityPosition={liquidityPosition} />\n        ) : null}\n      </Flex>\n    </Box>\n  );\n};\n\nexport const ManageAction = ({ liquidityPosition }: { liquidityPosition?: LiquidityPosition }) => {\n  const params = useParams();\n  const { network } = useNetwork();\n\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const [txnModalOpen, setTxnModalOpen] = useState<ManageAction | null>(null);\n  const { debtChange, collateralChange, setCollateralChange, setDebtChange } =\n    useContext(ManagePositionContext);\n\n  const { data: collateralType } = useCollateralType(params.collateralSymbol);\n  const isBase = isBaseAndromeda(network?.id, network?.preset);\n\n  const { isValid } = validatePosition({\n    issuanceRatioD18: collateralType?.issuanceRatioD18,\n    collateralAmount: liquidityPosition?.collateralAmount,\n    collateralPrice: liquidityPosition?.collateralPrice,\n    debt: liquidityPosition?.debt,\n    collateralChange,\n    debtChange,\n  });\n\n  const parsedActionParam = ManageActionSchema.safeParse(params.manageAction);\n  const parsedAction = parsedActionParam.success ? parsedActionParam.data : null;\n\n  const isFormValid = isBase ? true : isValid;\n\n  const onSubmit = useCallback(\n    (e: FormEvent) => {\n      e.preventDefault();\n      const form = e.target as HTMLFormElement;\n      if (!form.reportValidity() || !isFormValid) {\n        return;\n      }\n      setTxnModalOpen(parsedAction);\n    },\n    [isFormValid, parsedAction]\n  );\n\n  useEffect(() => {\n    // This is just for initial state, if we have a manage action selected return\n    const queryParams = new URLSearchParams(location.search);\n    if (queryParams.get('manageAction')) return;\n    if (!liquidityPosition) return;\n    if (!collateralType) return;\n\n    const cRatio = calculateCRatio(liquidityPosition.debt, liquidityPosition.collateralValue);\n    const canBorrow =\n      !isBase && (liquidityPosition.debt.eq(0) || cRatio.gt(collateralType.issuanceRatioD18));\n\n    if (canBorrow) {\n      queryParams.set('manageAction', 'borrow');\n      navigate({ pathname: location.pathname, search: queryParams.toString() }, { replace: true });\n      return;\n    }\n\n    const cRatioIsCloseToLiqRatio = cRatio.mul(0.9).lt(collateralType.liquidationRatioD18);\n\n    if (cRatioIsCloseToLiqRatio) {\n      queryParams.set('manageAction', isBase ? 'deposit' : 'repay');\n      navigate({ pathname: location.pathname, search: queryParams.toString() }, { replace: true });\n      return;\n    }\n\n    queryParams.set('manageAction', 'deposit');\n    navigate({ pathname: location.pathname, search: queryParams.toString() }, { replace: true });\n  }, [collateralType, isBase, liquidityPosition, location.pathname, location.search, navigate]);\n\n  return (\n    <>\n      <ManageActionUi\n        liquidityPosition={liquidityPosition}\n        onSubmit={onSubmit}\n        network={network}\n        setActiveAction={(action) => {\n          setCollateralChange(wei(0));\n          setDebtChange(wei(0));\n          const queryParams = new URLSearchParams(location.search);\n          queryParams.set('manageAction', action);\n          navigate(\n            { pathname: location.pathname, search: queryParams.toString() },\n            { replace: true }\n          );\n        }}\n        manageAction={parsedAction || undefined}\n      />\n      <Suspense fallback={null}>\n        {txnModalOpen === 'repay' ? (\n          <RepayModal\n            availableCollateral={liquidityPosition?.usdCollateral.availableCollateral}\n            onClose={() => {\n              setCollateralChange(wei(0));\n              setDebtChange(wei(0));\n              setTxnModalOpen(null);\n            }}\n            isOpen={txnModalOpen === 'repay'}\n          />\n        ) : null}\n        {txnModalOpen === 'borrow' ? (\n          <BorrowModal\n            onClose={() => {\n              setCollateralChange(wei(0));\n              setDebtChange(wei(0));\n              setTxnModalOpen(null);\n            }}\n            isOpen={txnModalOpen === 'borrow'}\n          />\n        ) : null}\n        {txnModalOpen === 'deposit' ? (\n          <DepositModal\n            availableCollateral={liquidityPosition?.accountCollateral.availableCollateral}\n            currentCollateral={liquidityPosition?.collateralAmount ?? wei(0)}\n            collateralChange={collateralChange}\n            onClose={() => {\n              setCollateralChange(wei(0));\n              setDebtChange(wei(0));\n              setTxnModalOpen(null);\n            }}\n            isOpen={txnModalOpen === 'deposit'}\n          />\n        ) : null}\n        {txnModalOpen === 'undelegate' ? (\n          <UndelegateModal\n            liquidityPosition={liquidityPosition}\n            onClose={() => {\n              setCollateralChange(wei(0));\n              setDebtChange(wei(0));\n              setTxnModalOpen(null);\n            }}\n            isOpen={txnModalOpen === 'undelegate'}\n          />\n        ) : null}\n      </Suspense>\n    </>\n  );\n};\n","import { FC, useContext } from 'react';\nimport { Flex, Skeleton, Text } from '@chakra-ui/react';\nimport { BorderBox } from '@snx-v3/BorderBox';\nimport { currency } from '@snx-v3/format';\nimport { LiquidityPosition } from '@snx-v3/useLiquidityPosition';\nimport { CollateralType, useCollateralType } from '@snx-v3/useCollateralTypes';\nimport { useParams } from '@snx-v3/useParams';\nimport { validatePosition } from '@snx-v3/validatePosition';\nimport { ManagePositionContext } from '@snx-v3/ManagePositionContext';\nimport Wei, { wei } from '@synthetixio/wei';\nimport { ArrowForwardIcon, InfoIcon } from '@chakra-ui/icons';\nimport { calculateCRatio } from '@snx-v3/calculations';\nimport { constants } from 'ethers';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { useApr } from '@snx-v3/useApr';\nimport { Tooltip } from '@snx-v3/Tooltip';\n\nconst ChangeStat: FC<{\n  value: Wei;\n  newValue: Wei;\n  hasChanges: boolean;\n  dataTestId?: string;\n  formatFn: (val: Wei) => string;\n  withColor?: boolean;\n}> = ({ formatFn, value, newValue, hasChanges, dataTestId, withColor }) => {\n  return (\n    <Flex\n      gap={4}\n      color=\"gray.50\"\n      fontSize=\"2xl\"\n      fontWeight=\"800\"\n      alignItems=\"center\"\n      lineHeight=\"32px\"\n    >\n      <Text\n        data-cy={dataTestId}\n        color={withColor && value.gt(0) ? 'green.700' : value.lt(0) ? 'red.700' : 'gray.50'}\n      >\n        {formatFn(value)}\n      </Text>\n      {hasChanges && !value.eq(newValue) ? (\n        <>\n          <ArrowForwardIcon />\n          <Text\n            color={\n              withColor && newValue.gt(0) ? 'green.700' : newValue.lt(0) ? 'red.700' : 'gray.50'\n            }\n          >\n            {formatFn(newValue)}\n          </Text>\n        </>\n      ) : null}\n    </Flex>\n  );\n};\n\nexport const ManageStatsUi: FC<{\n  liquidityPosition?: LiquidityPosition;\n  collateralType?: CollateralType;\n  newCratio: Wei;\n  newCollateralAmount: Wei;\n  newDebt: Wei;\n  cRatio: Wei;\n  collateralValue: Wei;\n  hasChanges: boolean;\n  aprData?: number;\n}> = ({\n  liquidityPosition,\n  collateralType,\n  collateralValue,\n  cRatio,\n  newCollateralAmount,\n  newCratio,\n  newDebt,\n  hasChanges,\n  aprData,\n}) => {\n  const { network } = useNetwork();\n\n  return (\n    <Flex direction=\"column\">\n      {isBaseAndromeda(network?.id, network?.preset) && (\n        <BorderBox\n          py={4}\n          px={6}\n          flexDirection=\"row\"\n          bg=\"navy.700\"\n          justifyContent=\"space-between\"\n          mb={4}\n        >\n          <Flex flexDirection=\"column\" justifyContent=\"space-between\" width=\"100%\">\n            <Flex alignItems=\"center\" mb=\"4px\">\n              <Text color=\"gray.500\" fontSize=\"xs\" fontFamily=\"heading\" lineHeight=\"16px\">\n                APR\n              </Text>\n              <Tooltip\n                label=\"APR is a combination of past week pool performance and rewards.\"\n                textAlign=\"start\"\n                py={2}\n                px={3}\n              >\n                <Flex\n                  height=\"12px\"\n                  width=\"12px\"\n                  ml=\"4px\"\n                  alignItems=\"center\"\n                  justifyContent=\"center\"\n                >\n                  <InfoIcon color=\"white\" height=\"9px\" width=\"9px\" />\n                </Flex>\n              </Tooltip>\n            </Flex>\n            <Flex width=\"100%\">\n              {aprData ? (\n                <Flex\n                  gap={1}\n                  color=\"gray.50\"\n                  fontSize=\"2xl\"\n                  fontWeight=\"800\"\n                  alignItems=\"center\"\n                  lineHeight=\"32px\"\n                >\n                  <Text>{!!aprData ? aprData.toFixed(2) : '-'}%</Text>\n                </Flex>\n              ) : (\n                <Skeleton width=\"100%\">Lorem ipsum (this wont be displaye debt) </Skeleton>\n              )}\n            </Flex>\n          </Flex>\n        </BorderBox>\n      )}\n      <BorderBox py={4} px={6} flexDirection=\"column\" bg=\"navy.700\" mb={4}>\n        <Flex alignItems=\"center\" mb=\"4px\">\n          <Text color=\"gray.500\" fontSize=\"xs\" fontFamily=\"heading\" lineHeight=\"16px\">\n            COLLATERAL\n          </Text>\n          <Tooltip\n            label=\"Your total amount of collateral locked in this pool.\"\n            textAlign=\"start\"\n            py={2}\n            px={3}\n          >\n            <Flex height=\"12px\" width=\"12px\" ml=\"4px\" alignItems=\"center\" justifyContent=\"center\">\n              <InfoIcon color=\"white\" height=\"9px\" width=\"9px\" />\n            </Flex>\n          </Tooltip>\n        </Flex>\n        {liquidityPosition && collateralType ? (\n          <>\n            <Flex justifyContent=\"space-between\" alignItems=\"center\">\n              <ChangeStat\n                value={liquidityPosition.collateralAmount}\n                newValue={newCollateralAmount}\n                formatFn={(val: Wei) => `${currency(val)} ${collateralType.displaySymbol}`}\n                hasChanges={hasChanges}\n                dataTestId=\"manage stats collateral\"\n              />\n              <Text\n                fontWeight=\"400\"\n                color=\"gray.500\"\n                fontSize=\"md\"\n                fontFamily=\"heading\"\n                lineHeight=\"24px\"\n                data-cy=\"manage-stats-collateral-value\"\n              >\n                {currency(liquidityPosition.collateralValue, {\n                  currency: 'USD',\n                  style: 'currency',\n                })}\n              </Text>\n            </Flex>\n            <Text fontWeight=\"400\" color=\"gray.500\" fontSize=\"xs\">\n              Current Value:{' '}\n              {currency(collateralValue, {\n                currency: 'USD',\n                style: 'currency',\n              })}\n            </Text>\n          </>\n        ) : (\n          <Skeleton width=\"100%\">Lorem ipsum (this wont be displayed) </Skeleton>\n        )}\n      </BorderBox>\n      <BorderBox\n        py={4}\n        px={6}\n        flexDirection=\"row\"\n        bg=\"navy.700\"\n        justifyContent=\"space-between\"\n        mb={4}\n      >\n        <Flex flexDirection=\"column\" justifyContent=\"space-between\" width=\"100%\">\n          <Flex alignItems=\"center\" mb=\"4px\">\n            <Text color=\"gray.500\" fontSize=\"xs\" fontFamily=\"heading\" lineHeight=\"16px\">\n              PnL\n            </Text>\n            <Tooltip label=\"Your minted debt balance.\" textAlign=\"start\" py={2} px={3}>\n              <Flex height=\"12px\" width=\"12px\" ml=\"4px\" alignItems=\"center\" justifyContent=\"center\">\n                <InfoIcon color=\"white\" height=\"9px\" width=\"9px\" />\n              </Flex>\n            </Tooltip>\n          </Flex>\n          <Flex width=\"100%\">\n            {liquidityPosition && collateralType ? (\n              <ChangeStat\n                value={liquidityPosition.debt.mul(-1)}\n                newValue={newDebt.mul(-1)}\n                formatFn={(val: Wei) =>\n                  currency(val, {\n                    currency: 'USD',\n                    style: 'currency',\n                    maximumFractionDigits: 8,\n                  })\n                }\n                withColor\n                hasChanges={hasChanges}\n                dataTestId=\"manage-stats-debt-value\"\n              />\n            ) : (\n              <Skeleton width=\"100%\">Lorem ipsum (this wont be displaye debt) </Skeleton>\n            )}\n          </Flex>\n        </Flex>\n      </BorderBox>\n      {!isBaseAndromeda(network?.id, network?.preset) && (\n        <BorderBox py={4} px={6} flexDirection=\"column\" bg=\"navy.700\" my={0} mb={4}>\n          <Text color=\"gray.500\" fontSize=\"xs\" fontFamily=\"heading\" lineHeight=\"16px\" mb=\"4px\">\n            C-RATIO\n          </Text>\n          <Flex justifyContent=\"space-between\" alignItems=\"center\">\n            {collateralType ? (\n              <>\n                <ChangeStat\n                  // TODO, need a function to burn to target so dust debt not left over\n                  value={cRatio.lt(0.01) || cRatio.gt(50000) ? wei(0) : cRatio}\n                  newValue={newCratio}\n                  formatFn={(val: Wei) =>\n                    currency(val, {\n                      style: 'percent',\n                      minimumFractionDigits: 2,\n                      maximumFractionDigits: 2,\n                    })\n                  }\n                  hasChanges={hasChanges}\n                />\n                <Text\n                  fontWeight=\"400\"\n                  color=\"gray.500\"\n                  fontSize=\"md\"\n                  fontFamily=\"heading\"\n                  lineHeight=\"24px\"\n                >\n                  {collateralType.issuanceRatioD18.eq(constants.MaxUint256)\n                    ? 'N/A'\n                    : `Minimum ${currency(collateralType.issuanceRatioD18, {\n                        style: 'percent',\n                        minimumFractionDigits: 2,\n                        maximumFractionDigits: 2,\n                      })}`}\n                </Text>\n              </>\n            ) : (\n              <Skeleton width=\"100%\">Lorem ipsum (this wont be displayed) </Skeleton>\n            )}\n          </Flex>\n        </BorderBox>\n      )}\n    </Flex>\n  );\n};\n\nexport const ManageStats = ({ liquidityPosition }: { liquidityPosition?: LiquidityPosition }) => {\n  const { collateralSymbol } = useParams();\n  const { debtChange, collateralChange } = useContext(ManagePositionContext);\n\n  const { data: collateralType } = useCollateralType(collateralSymbol);\n\n  const { data: aprData } = useApr();\n\n  const collateralValue = liquidityPosition?.collateralValue || wei(0);\n\n  const cRatio = calculateCRatio(liquidityPosition?.debt || wei(0), collateralValue);\n\n  const { newCRatio, newCollateralAmount, newDebt, hasChanges } = validatePosition({\n    issuanceRatioD18: collateralType?.issuanceRatioD18,\n    collateralAmount: liquidityPosition?.collateralAmount,\n    collateralPrice: liquidityPosition?.collateralPrice,\n    debt: liquidityPosition?.debt,\n    collateralChange: collateralChange,\n    debtChange: debtChange,\n  });\n\n  return (\n    <ManageStatsUi\n      hasChanges={hasChanges}\n      newCratio={newCRatio}\n      newDebt={newDebt}\n      newCollateralAmount={newCollateralAmount}\n      liquidityPosition={liquidityPosition}\n      collateralType={collateralType}\n      cRatio={cRatio}\n      collateralValue={collateralValue}\n      aprData={aprData?.combinedApr}\n    />\n  );\n};\n","import { Button, Flex, Text } from '@chakra-ui/react';\nimport { Amount } from '@snx-v3/Amount';\nimport { BorderBox } from '@snx-v3/BorderBox';\nimport { DollarCircle } from '@snx-v3/icons';\nimport { ManagePositionContext } from '@snx-v3/ManagePositionContext';\nimport { NumberInput } from '@snx-v3/NumberInput';\nimport { useUSDProxy } from '@snx-v3/useUSDProxy';\nimport { LiquidityPosition } from '@snx-v3/useLiquidityPosition';\nimport { useTokenBalance } from '@snx-v3/useTokenBalance';\nimport Wei, { wei } from '@synthetixio/wei';\nimport { FC, useContext } from 'react';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { RepayAllDebt } from './';\nimport { Tooltip } from '@snx-v3/Tooltip';\nimport { useStablecoin } from '@snx-v3/useStablecoin';\n\nexport const RepayUi: FC<{\n  debtChange: Wei;\n  max?: Wei;\n  snxUSDBalance?: Wei;\n  availableUSDCollateral?: Wei;\n  currentDebt?: Wei;\n  setDebtChange: (val: Wei) => void;\n}> = ({ debtChange, setDebtChange, max, currentDebt, snxUSDBalance, availableUSDCollateral }) => {\n  const totalUsdBalance =\n    snxUSDBalance && availableUSDCollateral ? snxUSDBalance.add(availableUSDCollateral) : undefined;\n  const { network } = useNetwork();\n  const isBase = isBaseAndromeda(network?.id, network?.preset);\n  const { data: stablecoin } = useStablecoin();\n\n  return (\n    <Flex flexDirection=\"column\">\n      <Text fontSize=\"md\" fontWeight=\"700\" mb=\"0.5\">\n        Repay {isBase ? 'USDC' : stablecoin?.symbol}\n      </Text>\n      <Text fontSize=\"sm\" color=\"gray.400\" mb=\"4\">\n        Pay down your position’s debt with {isBase ? 'USDC' : stablecoin?.symbol}. This decreases\n        your debt and increases your C-Ratio.\n      </Text>\n      <BorderBox display=\"flex\" py={2} px={3} mb=\"4\">\n        <Text display=\"flex\" gap={2} alignItems=\"center\" fontWeight=\"600\" mx=\"2\">\n          <DollarCircle />\n          {isBase ? 'USDC' : stablecoin?.symbol}\n        </Text>\n        <Flex flexDirection=\"column\" justifyContent=\"flex-end\" flexGrow={1}>\n          {/* TODO Figure out why repay is causing issues */}\n          <NumberInput\n            InputProps={{\n              isRequired: true,\n              'data-testid': 'repay amount input',\n              'data-max': max?.toString(),\n            }}\n            value={debtChange.abs()}\n            onChange={(val) => setDebtChange(val.mul(-1))}\n            max={max}\n          />\n          <Flex flexDirection=\"row\" justifyContent=\"right\" fontSize=\"xs\" color=\"whiteAlpha.700\">\n            <Flex\n              gap=\"1\"\n              mr=\"3\"\n              cursor=\"pointer\"\n              onClick={() => {\n                if (!currentDebt) {\n                  return;\n                }\n                setDebtChange(currentDebt.neg());\n              }}\n            >\n              <Text>Debt:</Text>\n              <Text display=\"inline\">\n                $<Amount value={currentDebt} data-testid=\"current debt\" />\n              </Text>\n            </Flex>\n            <Flex\n              gap=\"1\"\n              cursor=\"pointer\"\n              onClick={() => {\n                if (!totalUsdBalance) {\n                  return;\n                }\n                setDebtChange(totalUsdBalance.neg());\n              }}\n            >\n              <Tooltip\n                label={\n                  <Flex direction=\"column\" alignItems=\"flex-start\">\n                    <Flex justifyContent=\"space-between\" width=\"full\" gap={1}>\n                      Wallet Balance: <Amount value={snxUSDBalance} suffix=\" sUSD\" />\n                    </Flex>\n                    <Flex justifyContent=\"space-between\" width=\"full\" gap={1}>\n                      Collateral Balance: <Amount value={availableUSDCollateral} suffix=\" sUSD\" />\n                    </Flex>\n                  </Flex>\n                }\n              >\n                <Flex gap={1}>\n                  <Text>Balance:</Text>\n                  <Text display=\"inline\">\n                    <Amount\n                      value={totalUsdBalance}\n                      data-testid={`available ${stablecoin?.symbol} balance`}\n                      suffix={` ${stablecoin?.symbol}`}\n                    />\n                  </Text>\n                </Flex>\n              </Tooltip>\n            </Flex>\n          </Flex>\n        </Flex>\n      </BorderBox>\n      <Button\n        data-testid=\"repay submit\"\n        type=\"submit\"\n        isDisabled={!(max && snxUSDBalance && currentDebt && availableUSDCollateral)}\n      >\n        Repay {isBase ? 'USDC' : stablecoin?.symbol}\n      </Button>\n    </Flex>\n  );\n};\n\nexport const Repay = ({ liquidityPosition }: { liquidityPosition?: LiquidityPosition }) => {\n  const { debtChange, setDebtChange } = useContext(ManagePositionContext);\n  const { network } = useNetwork();\n\n  const { data: USDProxy } = useUSDProxy();\n  const availableUSDCollateral = liquidityPosition?.usdCollateral.availableCollateral;\n  const { data: balance } = useTokenBalance(USDProxy?.address);\n\n  const debtExists = liquidityPosition?.debt.gt(0);\n  const flooredBalance = balance?.gt(0.01) ? balance : wei(0);\n\n  if (liquidityPosition?.debt.gt(0.01) && isBaseAndromeda(network?.id, network?.preset)) {\n    return <RepayAllDebt liquidityPosition={liquidityPosition} />;\n  }\n\n  return (\n    <RepayUi\n      setDebtChange={setDebtChange}\n      debtChange={debtChange}\n      snxUSDBalance={flooredBalance}\n      availableUSDCollateral={availableUSDCollateral}\n      currentDebt={debtExists ? liquidityPosition?.debt : wei(0)}\n      max={Wei.max(\n        liquidityPosition?.debt || wei(0),\n        availableUSDCollateral?.add(balance || wei(0)) || wei(0)\n      )}\n    />\n  );\n};\n","import { Button, Flex, Text } from '@chakra-ui/react';\nimport { Amount } from '@snx-v3/Amount';\nimport { LiquidityPosition } from '@snx-v3/useLiquidityPosition';\nimport { wei } from '@synthetixio/wei';\nimport { getRepayerContract, isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { useParams, useSearchParams } from 'react-router-dom';\nimport { useCallback, useMemo } from 'react';\nimport { useQueryClient } from '@tanstack/react-query';\nimport { useApprove } from '@snx-v3/useApprove';\nimport { parseUnits } from '@snx-v3/format';\nimport { useTokenBalance } from '@snx-v3/useTokenBalance';\nimport { useClearDebt } from '@snx-v3/useClearDebt';\nimport { useGetUSDTokens } from '@snx-v3/useGetUSDTokens';\n\nexport const RepayAllDebt = ({ liquidityPosition }: { liquidityPosition: LiquidityPosition }) => {\n  const { network } = useNetwork();\n  const isBase = isBaseAndromeda(network?.id, network?.preset);\n  const params = useParams();\n  const [searchParams] = useSearchParams();\n\n  const queryClient = useQueryClient();\n\n  const debtExists = liquidityPosition.debt.gt(0.01);\n  const currentDebt = debtExists ? liquidityPosition.debt : wei(0);\n  const { data: usdTokens } = useGetUSDTokens();\n\n  const { data: tokenBalance } = useTokenBalance(\n    isBase ? usdTokens?.USDC : liquidityPosition.tokenAddress\n  );\n\n  const sufficientBalance = useMemo(\n    () => Number(tokenBalance?.toString()) >= currentDebt.toNumber(),\n    [currentDebt, tokenBalance]\n  );\n\n  const {\n    exec: execRepay,\n    settle: settleRepay,\n    isLoading,\n  } = useClearDebt({\n    accountId: searchParams.get('accountId') || '',\n    poolId: params.poolId,\n    collateralTypeAddress: liquidityPosition?.tokenAddress,\n    availableUSDCollateral: liquidityPosition.accountCollateral.availableCollateral,\n    debt: currentDebt,\n  });\n\n  const {\n    approve,\n    requireApproval,\n    isLoading: approvalLoading,\n  } = useApprove({\n    contractAddress: usdTokens?.USDC,\n    //slippage for approval\n    amount: parseUnits(currentDebt.toString(), 6).mul(110).div(100),\n    spender: getRepayerContract(network?.id),\n  });\n\n  const submit = useCallback(async () => {\n    try {\n      if (requireApproval) {\n        await approve(false);\n      }\n      await execRepay();\n\n      await Promise.all([\n        queryClient.invalidateQueries({\n          queryKey: [`${network?.id}-${network?.preset}`, 'TokenBalance'],\n        }),\n        queryClient.invalidateQueries({\n          queryKey: [`${network?.id}-${network?.preset}`, 'Allowance'],\n        }),\n        queryClient.invalidateQueries({\n          queryKey: [`${network?.id}-${network?.preset}`, 'LiquidityPosition'],\n        }),\n        queryClient.invalidateQueries({\n          queryKey: [`${network?.id}-${network?.preset}`, 'AccountCollateralUnlockDate'],\n        }),\n      ]);\n\n      settleRepay();\n    } catch (error) {}\n  }, [approve, execRepay, network?.id, network?.preset, queryClient, requireApproval, settleRepay]);\n\n  return (\n    <Flex flexDirection=\"column\">\n      <Text fontSize=\"md\" fontWeight=\"700\" mb=\"0.5\">\n        Repay {isBase ? 'USDC' : 'snxUSD'}\n      </Text>\n      <Text fontSize=\"sm\" color=\"gray.400\" mb=\"4\">\n        Your account currently has a positive debt. This amount must be paid to initiate collateral\n        withdrawal.\n      </Text>\n      <Button\n        isDisabled={!sufficientBalance}\n        isLoading={isLoading || approvalLoading}\n        onClick={submit}\n        data-testid=\"repay\"\n      >\n        Repay USDC $<Amount value={currentDebt} data-testid=\"current debt\" />\n        {sufficientBalance ? '' : '(Insufficient Balance)'}\n      </Button>\n    </Flex>\n  );\n};\n","import { useQuery } from '@tanstack/react-query';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { useDefaultProvider, useNetwork } from '@snx-v3/useBlockchain';\nimport { z } from 'zod';\nimport { SmallIntSchema, WeiSchema } from '@snx-v3/zod';\nimport { ethers } from 'ethers';\nimport { erc7412Call } from '@snx-v3/withERC7412';\nimport { fetchPriceUpdates, priceUpdatesToPopulatedTx } from '@snx-v3/fetchPythPrices';\nimport { useAllCollateralPriceIds } from '@snx-v3/useAllCollateralPriceIds';\nimport { useAllCollateralPriceUpdates } from '../useCollateralPriceUpdates';\n\nexport const MarketConfigurationSchema = z.object({\n  id: SmallIntSchema,\n  weight: WeiSchema,\n  maxDebtShareValue: WeiSchema,\n  isLocked: z.boolean(),\n});\n\nexport const PoolConfigurationSchema = z.object({\n  id: z.number(),\n  markets: MarketConfigurationSchema.array(),\n  isAnyMarketLocked: z.boolean(),\n});\n\nconst isLockedSchema = z.boolean();\n\nexport const usePoolConfiguration = (poolId?: string) => {\n  const { network } = useNetwork();\n  const { data: CoreProxy } = useCoreProxy();\n  const { data: collateralPriceUpdates } = useAllCollateralPriceIds();\n  const provider = useDefaultProvider();\n  const { data: priceUpdateTx } = useAllCollateralPriceUpdates();\n\n  return useQuery({\n    enabled: Boolean(CoreProxy && poolId && collateralPriceUpdates),\n    queryKey: [`${network?.id}-${network?.preset}`, 'PoolConfiguration', { poolId }],\n    queryFn: async () => {\n      if (!CoreProxy || !poolId || !collateralPriceUpdates || !network || !provider) {\n        throw Error('usePoolConfiguration should not be enabled');\n      }\n      const marketsData: {\n        marketId: ethers.BigNumber;\n        maxDebtShareValueD18: ethers.BigNumber;\n        weightD18: ethers.BigNumber;\n      }[] = await CoreProxy.getPoolConfiguration(ethers.BigNumber.from(poolId));\n      const markets = marketsData.map(({ marketId, maxDebtShareValueD18, weightD18 }) => ({\n        id: marketId,\n        weight: maxDebtShareValueD18,\n        maxDebtShareValue: weightD18,\n      }));\n\n      const collateralPriceCalls = await fetchPriceUpdates(\n        collateralPriceUpdates,\n        network.isTestnet\n      ).then((signedData) => priceUpdatesToPopulatedTx('0x', collateralPriceUpdates, signedData));\n\n      const calls = await Promise.all(\n        markets.map((m) => CoreProxy.populateTransaction.isMarketCapacityLocked(m.id))\n      );\n\n      const allCalls = collateralPriceCalls.concat(calls);\n      if (priceUpdateTx) {\n        allCalls.unshift(priceUpdateTx as any);\n      }\n      const decoded = await erc7412Call(\n        network,\n        provider,\n        allCalls,\n        (encoded) => {\n          if (!Array.isArray(encoded)) throw Error('Expected array');\n          return encoded.map((x) =>\n            isLockedSchema.parse(\n              CoreProxy.interface.decodeFunctionResult('isMarketCapacityLocked', x)[0]\n            )\n          );\n        },\n        'isMarketCapacityLocked'\n      );\n\n      return PoolConfigurationSchema.parse({\n        id: parseInt(poolId),\n        markets: markets.map((market, i) => ({\n          ...market,\n          isLocked: decoded[i],\n        })),\n        isAnyMarketLocked: decoded.some(Boolean),\n      });\n    },\n  });\n};\n","import {\n  Alert,\n  AlertDescription,\n  AlertIcon,\n  AlertTitle,\n  Button,\n  Collapse,\n  Flex,\n  Text,\n} from '@chakra-ui/react';\nimport { Amount } from '@snx-v3/Amount';\nimport { BorderBox } from '@snx-v3/BorderBox';\nimport { CollateralIcon } from '@snx-v3/icons';\nimport { ManagePositionContext } from '@snx-v3/ManagePositionContext';\nimport { NumberInput } from '@snx-v3/NumberInput';\nimport { useCollateralType } from '@snx-v3/useCollateralTypes';\nimport { LiquidityPosition } from '@snx-v3/useLiquidityPosition';\nimport { validatePosition } from '@snx-v3/validatePosition';\nimport { usePoolConfiguration } from '@snx-v3/usePoolConfiguration';\nimport Wei, { wei } from '@synthetixio/wei';\nimport React, { FC, useContext } from 'react';\nimport { useParams } from '@snx-v3/useParams';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { useNetwork } from '@snx-v3/useBlockchain';\n\nexport const UndelegateUi: FC<{\n  collateralChange: Wei;\n  currentCollateral?: Wei;\n  minDelegation?: Wei;\n  currentDebt?: Wei;\n  max?: Wei;\n  displaySymbol: string;\n  symbol: string;\n  setCollateralChange: (val: Wei) => void;\n  isAnyMarketLocked?: boolean;\n  isLoadingRequiredData: boolean;\n}> = ({\n  collateralChange,\n  setCollateralChange,\n  max,\n  displaySymbol,\n  symbol,\n  currentCollateral,\n  minDelegation,\n  isLoadingRequiredData,\n  isAnyMarketLocked,\n}) => {\n  const onMaxClick = React.useCallback(() => {\n    if (!max) {\n      return;\n    }\n    setCollateralChange(max.mul(-1));\n  }, [max, setCollateralChange]);\n\n  const leftoverCollateral = currentCollateral?.add(collateralChange) || wei(0);\n\n  const isValidLeftover =\n    leftoverCollateral.gt(minDelegation || wei(0)) || leftoverCollateral.eq(0);\n\n  const isDisabled = isAnyMarketLocked === true;\n\n  return (\n    <Flex flexDirection=\"column\">\n      <Text fontSize=\"md\" fontWeight=\"700\" mb=\"0.5\">\n        Remove {displaySymbol}\n      </Text>\n      <Text fontSize=\"sm\" color=\"gray.400\" mb=\"4\">\n        Removing collateral from this position will transfer it to the account’s Available\n        Collateral balance for withdrawal. Collateral may only be removed if the resulting C-Ratio\n        is above the Issuance C-Ratio.\n      </Text>\n\n      <BorderBox flexDirection=\"column\" py={2} px={3} mb=\"4\">\n        <Flex flexDirection=\"row\" justifyContent=\"space-between\" width=\"100%\">\n          <Text display=\"flex\" gap={2} alignItems=\"center\" fontWeight=\"600\" mx=\"2\">\n            <CollateralIcon symbol={symbol} />\n            {displaySymbol}\n          </Text>\n          <Flex flexDirection=\"column\" justifyContent=\"flex-end\" flexGrow={1}>\n            <NumberInput\n              InputProps={{\n                isDisabled,\n                isRequired: true,\n                'data-testid': 'undelegate amount input',\n                'data-max': max?.toString(),\n              }}\n              value={collateralChange.abs()}\n              onChange={(val) => setCollateralChange(val.mul(-1))}\n              max={max}\n            />\n            <Flex flexDirection=\"column\" alignItems=\"flex-end\" fontSize=\"xs\" color=\"whiteAlpha.700\">\n              <Flex\n                gap=\"1\"\n                cursor={isDisabled ? 'not-allowed' : 'pointer'}\n                onClick={isDisabled ? undefined : onMaxClick}\n              >\n                <Text display=\"flex\" alignItems=\"center\" gap={1}>\n                  Max:\n                </Text>\n                <Amount\n                  value={max}\n                  data-testid=\"available to undelegate\"\n                  suffix={` ${displaySymbol}`}\n                />\n              </Flex>\n            </Flex>\n          </Flex>\n        </Flex>\n        <Collapse in={isDisabled} animateOpacity>\n          <Alert mt={2} status=\"warning\">\n            <AlertIcon />\n            <Flex direction=\"column\">\n              <AlertTitle>Credit capacity reached</AlertTitle>\n              <AlertDescription>\n                One of the markets has reached its credit capacity and is currently in a locked\n                state. You cannot remove collateral from the pool at this time.\n              </AlertDescription>\n            </Flex>\n          </Alert>\n        </Collapse>\n\n        <Collapse in={!isValidLeftover} animateOpacity>\n          <Alert mt={2} status=\"info\">\n            <AlertIcon />\n            <Flex direction=\"column\">\n              <AlertTitle>\n                The minimal delegated amount is{' '}\n                <Amount value={minDelegation} suffix={` ${symbol}`} />\n              </AlertTitle>\n              <AlertDescription>\n                You can close your position by removing all the collateral.\n              </AlertDescription>\n            </Flex>\n          </Alert>\n        </Collapse>\n      </BorderBox>\n      <Button\n        data-testid=\"undelegate submit\"\n        type=\"submit\"\n        isDisabled={isLoadingRequiredData || isAnyMarketLocked === true}\n      >\n        Remove {displaySymbol}\n      </Button>\n    </Flex>\n  );\n};\n\nexport const Undelegate = ({ liquidityPosition }: { liquidityPosition?: LiquidityPosition }) => {\n  const { collateralChange, debtChange, setCollateralChange } = useContext(ManagePositionContext);\n  const params = useParams();\n  const { data: collateralType } = useCollateralType(params.collateralSymbol);\n\n  const poolConfiguration = usePoolConfiguration(params.poolId);\n  const { network } = useNetwork();\n\n  if (!collateralType) return null;\n  const collateralPrice = liquidityPosition?.collateralPrice;\n  const { newDebt } = validatePosition({\n    issuanceRatioD18: collateralType.issuanceRatioD18,\n    collateralAmount: liquidityPosition?.collateralAmount,\n    collateralPrice,\n    debt: liquidityPosition?.debt,\n    collateralChange: collateralChange,\n    debtChange: debtChange,\n  });\n  // To get the max withdrawable collateral we look at the new debt and the issuance ratio.\n  // This gives us the amount in dollar. We then divide by the collateral price.\n  // To avoid the transaction failing due to small price deviations, we also apply a 2% buffer by multiplying with 0.98\n\n  function maxUndelegate() {\n    if (!liquidityPosition || !collateralType) return undefined;\n    const { collateralAmount, collateralValue } = liquidityPosition;\n\n    if (isBaseAndromeda(network?.id, network?.preset)) {\n      return collateralAmount;\n    }\n\n    // if debt is negative it's actually credit, which means we can undelegate all collateral\n    if (newDebt.lte(0)) return collateralAmount;\n\n    const minCollateralRequired = newDebt.mul(collateralType.issuanceRatioD18);\n\n    if (collateralValue < minCollateralRequired)\n      // If you're below issuance ratio, you can't withdraw anything\n      return wei(0);\n\n    const maxWithdrawable = collateralValue.sub(minCollateralRequired).mul(0.98);\n    return Wei.min(collateralAmount, maxWithdrawable);\n  }\n  const max = maxUndelegate();\n\n  return (\n    <UndelegateUi\n      displaySymbol={collateralType.displaySymbol}\n      symbol={collateralType.symbol}\n      minDelegation={collateralType.minDelegationD18}\n      setCollateralChange={setCollateralChange}\n      collateralChange={collateralChange}\n      currentCollateral={liquidityPosition?.collateralAmount}\n      currentDebt={liquidityPosition?.debt}\n      max={max}\n      isLoadingRequiredData={poolConfiguration.isLoading || !max}\n      isAnyMarketLocked={poolConfiguration.data?.isAnyMarketLocked}\n    />\n  );\n};\n","import { Button, Flex, FlexProps, Heading } from '@chakra-ui/react';\nimport { useAccounts, useCreateAccount } from '@snx-v3/useAccounts';\nimport { FC } from 'react';\n\nexport const AccountBanner: FC<FlexProps> = (props) => {\n  const {\n    data: accounts,\n    isLoading: isAccountsLoading,\n    isFetching: isAccountsFetching,\n  } = useAccounts();\n  const {\n    mutation: { mutate: createAccount, isPending: isCreateAccountLoading },\n  } = useCreateAccount();\n\n  if (!isAccountsFetching && !isAccountsLoading && accounts && accounts.length === 0) {\n    return (\n      <Flex\n        mt={4}\n        flexGrow=\"1\"\n        h=\"fit-content\"\n        border=\"1px solid\"\n        borderColor=\"gray.900\"\n        rounded=\"base\"\n        width=\"100%\"\n        px=\"6\"\n        py=\"8\"\n        bg=\"navy.700\"\n        alignItems=\"center\"\n        justifyContent=\"space-between\"\n        {...props}\n      >\n        <Heading fontSize=\"18px\">Create an account to deposit liquidity</Heading>\n        <Button onClick={() => createAccount()} isLoading={isCreateAccountLoading}>\n          Create Account\n        </Button>\n      </Flex>\n    );\n  }\n\n  return null;\n};\n","import { Flex, Button, Text, Divider, Heading, Fade, Tag } from '@chakra-ui/react';\n\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport { ZEROWEI } from '../../../utils/constants';\nimport { Network, NetworkIcon, useNetwork, useWallet } from '@snx-v3/useBlockchain';\nimport { compactInteger } from 'humanize-plus';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { CollateralIcon } from '@snx-v3/icons';\nimport { useMemo } from 'react';\nimport { wei } from '@synthetixio/wei';\n\nexport interface PoolCardProps {\n  pool: {\n    name: string;\n    id: string;\n  };\n  network: Network;\n  collaterals: string[];\n  collateralTypes: {\n    oracle_node_id: string;\n    name: string;\n    decimals: number;\n    symbol: string;\n    total_amount_deposited: string;\n  }[];\n  apr: {\n    combinedApr: number;\n    cumulativePnl: number;\n  };\n}\n\nexport const PoolCard = ({ pool, network, collaterals, apr, collateralTypes }: PoolCardProps) => {\n  const navigate = useNavigate();\n  const [queryParams] = useSearchParams();\n\n  const { network: currentNetwork, setNetwork } = useNetwork();\n  const { connect } = useWallet();\n\n  const vaultTVL = collateralTypes.reduce((acc, type) => {\n    const amount = wei(type.total_amount_deposited, type.decimals, true);\n    return acc.add(amount);\n  }, ZEROWEI);\n\n  const sanitizedCollateralTypes = collateralTypes.map((collateralType) => {\n    if (\n      isBaseAndromeda(network.id, network.preset) &&\n      collateralType.symbol.toUpperCase() === 'SUSDC'\n    ) {\n      return {\n        ...collateralType,\n        symbol: 'USDC',\n        displaySymbol: 'USDC',\n        name: 'USD Coin',\n      };\n    }\n    return collateralType;\n  });\n\n  const isCollateralFiltered = useMemo(\n    () =>\n      collateralTypes?.some((collateralType) =>\n        collaterals.length\n          ? !!collaterals.find((collateral) => {\n              if (\n                isBaseAndromeda(network.id, network.preset) &&\n                collateralType.symbol.toUpperCase() === 'SUSDC'\n              ) {\n                return collateral.toUpperCase() === 'USDC';\n              }\n              return collateral.toUpperCase() === collateralType.symbol.toUpperCase();\n            })\n          : true\n      ),\n    [collateralTypes, collaterals, network.id, network.preset]\n  );\n\n  if (!isCollateralFiltered) {\n    return null;\n  }\n\n  return (\n    <Fade in>\n      <Flex\n        flexDir=\"column\"\n        w=\"100%\"\n        border=\"1px solid\"\n        borderColor=\"gray.900\"\n        rounded=\"base\"\n        bg=\"navy.700\"\n        p=\"6\"\n        _hover={{ cursor: 'pointer', bg: 'whiteAlpha.50' }}\n        onClick={() => navigate(`/pools/${network.id}/${pool.id}`)}\n      >\n        <Flex flexWrap=\"wrap\" justifyContent=\"space-between\" alignItems=\"center\" gap={4}>\n          <Flex>\n            <Flex flexDir=\"column\" gap={1}>\n              <Heading fontSize=\"20px\" fontWeight={700} color=\"white\">\n                {pool?.name}\n              </Heading>\n              <Flex alignItems=\"center\" fontSize=\"12px\" color=\"gray.500\" gap={1} fontWeight=\"bold\">\n                <NetworkIcon size=\"14px\" networkId={network.id} mr={1} />\n                {network.label} Network\n              </Flex>\n            </Flex>\n            {[1, 42161].includes(network.id) && (\n              <Tag\n                ml={2}\n                mt=\"2px\"\n                size=\"sm\"\n                bg=\"purple.500\"\n                mr=\"auto\"\n                color=\"white\"\n                height=\"fit-content\"\n              >\n                Borrow Interest-Free\n              </Tag>\n            )}\n          </Flex>\n          <Flex flexWrap=\"wrap\">\n            <Flex alignItems=\"center\" mr={6} gap={2}>\n              <Text fontSize=\"20px\" fontWeight=\"bold\" color=\"gray.500\">\n                TVL\n              </Text>\n              <Text\n                fontWeight=\"bold\"\n                fontSize=\"20px\"\n                color=\"white\"\n                display=\"flex\"\n                alignItems=\"center\"\n                lineHeight=\"36px\"\n              >\n                {(vaultTVL?.toNumber() && `$${compactInteger(vaultTVL.toNumber(), 1)}`) || '-'}\n              </Text>\n            </Flex>\n            <Flex alignItems=\"center\" gap={2}>\n              <Text fontSize=\"20px\" fontWeight=\"bold\" color=\"gray.500\">\n                APR\n              </Text>\n              <Text fontWeight=\"bold\" fontSize=\"20px\" color=\"white\" lineHeight=\"36px\">\n                {apr.combinedApr > 0 ? apr.combinedApr.toFixed(2)?.concat('%') : '-'}\n              </Text>\n            </Flex>\n          </Flex>\n        </Flex>\n        <Divider mt=\"18px\" mb=\"10px\" />\n        <Flex flexWrap=\"wrap\" gap={6}>\n          {sanitizedCollateralTypes?.map((type) => (\n            <Flex alignItems=\"center\" key={type.oracle_node_id} gap={4} mt={3}>\n              <Flex alignItems=\"center\">\n                <CollateralIcon width=\"26px\" height=\"26px\" symbol={type.symbol} />\n                <Flex flexDirection=\"column\" ml={3} mr=\"auto\">\n                  <Text\n                    fontSize=\"14px\"\n                    color=\"white\"\n                    fontWeight={700}\n                    lineHeight=\"1.25rem\"\n                    fontFamily=\"heading\"\n                  >\n                    {type.symbol}\n                  </Text>\n                  <Text fontSize=\"12px\" color=\"gray.500\" fontFamily=\"heading\" lineHeight=\"1rem\">\n                    {type.symbol}\n                  </Text>\n                </Flex>\n              </Flex>\n              <Button\n                onClick={async (e) => {\n                  try {\n                    e.stopPropagation();\n\n                    if (!currentNetwork) {\n                      connect();\n                      return;\n                    }\n\n                    if (currentNetwork.id !== network.id) {\n                      if (!(await setNetwork(network.id))) {\n                        return;\n                      }\n                    }\n\n                    queryParams.set('manageAction', 'deposit');\n                    navigate({\n                      pathname: `/positions/${type.symbol}/${pool.id}`,\n                      search: queryParams.toString(),\n                    });\n                  } catch (error) {}\n                }}\n                size=\"sm\"\n                variant=\"outline\"\n                colorScheme=\"gray\"\n                height=\"32px\"\n                py=\"10px\"\n                px=\"12px\"\n                whiteSpace=\"nowrap\"\n                borderRadius=\"4px\"\n                color=\"white\"\n                fontFamily=\"heading\"\n                fontWeight={700}\n                fontSize=\"14px\"\n                lineHeight=\"20px\"\n              >\n                Deposit\n              </Button>\n            </Flex>\n          ))}\n        </Flex>\n      </Flex>\n    </Fade>\n  );\n};\n","import { Dispatch } from 'react';\nimport { Flex, Button } from '@chakra-ui/react';\nimport { PoolsFilterAction } from './PoolsList';\nimport { NETWORKS, NetworkIcon } from '@snx-v3/useBlockchain';\n\ninterface ChainFilterProps {\n  activeChains: number[];\n  dispatch: Dispatch<PoolsFilterAction>;\n}\n\nconst mainnets = NETWORKS.filter(({ isSupported, isTestnet }) => isSupported && !isTestnet).filter(\n  ({ id }) => id !== 10\n);\n\nexport const ChainFilter = ({ activeChains, dispatch }: ChainFilterProps) => {\n  const isAllActive = activeChains.length === 0;\n\n  return (\n    <Flex justifyContent=\"center\">\n      <Flex\n        variant=\"unstyled\"\n        bg={isAllActive ? 'whiteAlpha.300' : 'transparent'}\n        onClick={() => dispatch({ type: 'RESET_CHAIN' })}\n        color=\"gray.50\"\n        as={Button}\n        px=\"16px\"\n        py=\"6px\"\n        fontWeight={600}\n        borderRadius=\"9999px\"\n        mr={1.5}\n      >\n        All\n      </Flex>\n      {mainnets.map((chain) => {\n        const isActive = activeChains.includes(chain.id);\n\n        const toggle = () => {\n          if (isActive) {\n            dispatch({ type: 'REMOVE_CHAIN', payload: { chain: chain.id } });\n          } else {\n            dispatch({ type: 'ADD_CHAIN', payload: { chain: chain.id } });\n          }\n        };\n\n        return (\n          <Flex\n            key={chain.id}\n            onClick={toggle}\n            variant=\"unstyled\"\n            bg={isActive ? 'whiteAlpha.300' : 'transparent'}\n            justifyContent=\"center\"\n            display=\"flex\"\n            mr={1.5}\n            as={Button}\n            px=\"16px\"\n            py=\"6px\"\n            fontWeight={600}\n            borderRadius=\"9999px\"\n          >\n            <NetworkIcon size=\"18px\" networkId={chain.id} />\n          </Flex>\n        );\n      })}\n    </Flex>\n  );\n};\n","import { Dispatch } from 'react';\nimport { Flex, Button } from '@chakra-ui/react';\nimport { TokenIcon } from '../TokenIcon';\nimport { PoolsFilterAction } from './PoolsList';\n\nconst supportedCollateralTypes = ['WETH', 'SNX', 'USDC', 'ARB'];\n\ninterface CollateralFilterProps {\n  activeCollateral: string[];\n  dispatch: Dispatch<PoolsFilterAction>;\n}\n\nexport const CollateralFilter = ({ activeCollateral, dispatch }: CollateralFilterProps) => {\n  const isAllActive = activeCollateral.length === 0;\n\n  return (\n    <Flex justifyContent=\"center\">\n      <Flex\n        variant=\"unstyled\"\n        bg={isAllActive ? 'whiteAlpha.300' : 'transparent'}\n        onClick={() => dispatch({ type: 'RESET_COLLATERAL' })}\n        color=\"gray.50\"\n        as={Button}\n        px=\"16px\"\n        py=\"6px\"\n        fontWeight={600}\n        borderRadius=\"9999px\"\n        mr={1.5}\n      >\n        All\n      </Flex>\n      {supportedCollateralTypes.map((collateral) => {\n        const isActive = activeCollateral.includes(collateral);\n\n        const toggle = () => {\n          if (isActive) {\n            dispatch({ type: 'REMOVE_COLLATERAL', payload: { collateral } });\n          } else {\n            dispatch({ type: 'ADD_COLLATERAL', payload: { collateral } });\n          }\n        };\n\n        return (\n          <Flex\n            key={collateral}\n            onClick={toggle}\n            variant=\"unstyled\"\n            bg={isActive ? 'whiteAlpha.300' : 'transparent'}\n            justifyContent=\"center\"\n            display=\"flex\"\n            mr={1.5}\n            as={Button}\n            px=\"16px\"\n            py=\"6px\"\n            fontWeight={600}\n            borderRadius=\"9999px\"\n          >\n            <TokenIcon width={18} height={18} symbol={collateral} />\n          </Flex>\n        );\n      })}\n    </Flex>\n  );\n};\n","import { Flex, Heading, Tag, Text, Divider, Button, Box, Link, Fade } from '@chakra-ui/react';\nimport { NetworkIcon } from '@snx-v3/useBlockchain';\nimport { CollateralIcon } from '@snx-v3/icons';\n\ninterface TorosPoolCardProps {\n  tvl: string;\n  apy: number;\n}\n\nexport function TorosPoolCard({ tvl, apy }: TorosPoolCardProps) {\n  return (\n    <Fade in>\n      <Box\n        bgGradient=\"linear(to-tr, green.700, cyan.800)\"\n        p=\"1px\"\n        rounded=\"base\"\n        position=\"relative\"\n      >\n        {/* For overlay to not show gradient */}\n        <Box\n          position=\"absolute\"\n          rounded=\"base\"\n          bg=\"navy.700\"\n          width=\"calc(100% - 2px)\"\n          height=\"calc(100% - 2px)\"\n        />\n        <Flex\n          position=\"relative\"\n          onClick={() => {\n            window.open('https://toros.finance/synthetix-usdc-andromeda-yield', '_blank');\n          }}\n          flexDir=\"column\"\n          rounded=\"base\"\n          bg=\"navy.700\"\n          _hover={{ cursor: 'pointer', bg: 'whiteAlpha.50', textDecoration: 'none' }}\n          p=\"6\"\n        >\n          <Flex w=\"100%\" gap=\"2\" alignItems=\"start\" mb=\"4\">\n            <Flex flexDirection=\"column\" justifyContent=\"space-between\">\n              <Heading fontSize=\"20px\" fontWeight={700} color=\"white\">\n                USDC Andromeda Yield\n              </Heading>\n              <Flex alignItems=\"center\" gap=\"1\">\n                <NetworkIcon networkId={8453} w=\"14px\" height=\"14px\" />\n                <Text color=\"gray.500\" fontSize=\"12px\">\n                  Base Network\n                </Text>\n              </Flex>\n            </Flex>\n            <Tag\n              mt=\"2px\"\n              size=\"sm\"\n              bgGradient=\"linear(to-tr, green.700, cyan.800)\"\n              mr=\"auto\"\n              color=\"white\"\n            >\n              Auto Compound\n            </Tag>\n\n            <Text fontSize=\"20px\" fontWeight={700} color=\"gray.500\">\n              TVL\n            </Text>\n            <Text fontSize=\"20px\" fontWeight={700} color=\"white\" mr=\"4\">\n              ${tvl}\n            </Text>\n            <Text fontSize=\"20px\" fontWeight={700} color=\"gray.500\">\n              APY\n            </Text>\n            <Text fontSize=\"20px\" fontWeight={700} color=\"white\">\n              Up to {apy}%\n            </Text>\n          </Flex>\n          <Divider />\n          <Flex alignItems=\"center\" mt=\"4\" gap=\"4\">\n            <Flex alignItems=\"center\">\n              <CollateralIcon width=\"26px\" height=\"26px\" symbol=\"USDC\" />\n              <Flex flexDirection=\"column\" ml={3} mr=\"auto\">\n                <Text\n                  fontSize=\"14px\"\n                  color=\"white\"\n                  fontWeight={700}\n                  lineHeight=\"1.25rem\"\n                  fontFamily=\"heading\"\n                >\n                  USDC\n                </Text>\n                <Text fontSize=\"12px\" color=\"gray.500\" fontFamily=\"heading\" lineHeight=\"1rem\">\n                  USDC\n                </Text>\n              </Flex>\n            </Flex>\n            <Link\n              href=\"https://toros.finance/synthetix-usdc-andromeda-yield\"\n              rel=\"noopener\"\n              target=\"_blank\"\n              _hover={{ textDecoration: 'none' }}\n              mr=\"auto\"\n            >\n              <Button\n                size=\"sm\"\n                variant=\"outline\"\n                colorScheme=\"gray\"\n                height=\"32px\"\n                py=\"10px\"\n                px=\"12px\"\n                whiteSpace=\"nowrap\"\n                borderRadius=\"4px\"\n                color=\"white\"\n                fontFamily=\"heading\"\n                fontWeight={700}\n                fontSize=\"14px\"\n                lineHeight=\"20px\"\n              >\n                Deposit on Toros\n                <LinkOffIcon />\n              </Button>\n            </Link>\n            <Text fontSize=\"16px\" color=\"gray.500\">\n              by\n            </Text>\n            <TorosIcon />\n          </Flex>\n        </Flex>\n      </Box>\n    </Fade>\n  );\n}\n\nconst TorosIcon = () => (\n  <svg width=\"48\" height=\"16\" viewBox=\"0 0 48 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path\n      d=\"M6.15767 6.11048H3.91623L3.90559 14.6212H1.6864L1.69703 6.10854H0V3.86863H1.69703L1.6864 0.5H3.91043L3.92106 3.87545H6.15767V6.11048ZM12.4188 15C11.4701 15.0094 10.5385 14.7448 9.73449 14.2375C8.91459 13.7182 8.24043 12.996 7.77629 12.1399C7.31214 11.2837 7.07348 10.3221 7.08306 9.34667C7.07078 7.85556 7.63097 6.41733 8.64665 5.33236C9.12781 4.81663 9.70555 4.40191 10.3466 4.1121C11.1059 3.7745 11.9352 3.62747 12.7633 3.68361C13.5914 3.73976 14.3937 3.99741 15.1012 4.43445C15.9083 4.9424 16.5739 5.64888 17.0351 6.48737C17.5182 7.36105 17.7662 8.34671 17.7545 9.34667C17.7605 10.0978 17.6192 10.8428 17.3387 11.5389C17.0704 12.2054 16.6816 12.816 16.1919 13.3395C15.7112 13.8545 15.1346 14.2691 14.4949 14.5598C13.8423 14.8549 13.1342 15.0051 12.4188 15ZM12.4188 12.765C12.9843 12.7723 13.5388 12.6074 14.0095 12.2917C14.4798 11.9753 14.8633 11.5445 15.1244 11.0393C15.3956 10.5123 15.5362 9.92717 15.5344 9.33366C15.5325 8.74016 15.3882 8.15591 15.1137 7.6307C14.8482 7.12516 14.4613 6.69461 13.9882 6.3783C13.5179 6.07272 12.9699 5.91068 12.4102 5.91172C11.8505 5.91276 11.3031 6.07682 10.8339 6.38414C10.3601 6.70025 9.97435 7.13302 9.71322 7.64141C9.43906 8.16714 9.2979 8.75286 9.30225 9.34667C9.29424 9.95098 9.44147 10.5471 9.72966 11.0772C9.99945 11.5774 10.3903 12.0008 10.8658 12.3082C11.3285 12.6091 11.8681 12.7678 12.4188 12.765ZM25.8839 6.28578C25.5854 6.09903 25.2643 5.95174 24.9285 5.84754C24.6982 5.77914 24.4589 5.7463 24.2187 5.75015C23.7013 5.73917 23.1936 5.89324 22.7683 6.19034C22.3465 6.49492 22.0128 6.907 21.8013 7.38431C21.5656 7.907 21.447 8.47559 21.4542 9.04963V14.6212H19.2243V3.87545H21.4435V5.32652C21.7956 4.80626 22.258 4.37119 22.7973 4.05269C23.3367 3.73847 23.9505 3.57695 24.5736 3.58523C24.8154 3.58523 25.0455 3.59594 25.2621 3.61737C25.4743 3.63781 25.6837 3.68091 25.8868 3.74592L25.8839 6.28578ZM42.3146 14.8276C41.7533 14.7921 41.1998 14.6764 40.6708 14.4838C40.1612 14.3038 39.6862 14.0366 39.2667 13.694C38.8786 13.3784 38.5698 12.975 38.3655 12.5166L40.255 11.6995C40.3722 11.9232 40.5373 12.1178 40.7385 12.2693C40.9849 12.4644 41.2608 12.6186 41.5555 12.726C41.8693 12.8447 42.2019 12.9048 42.537 12.9033C42.8541 12.9062 43.1695 12.8575 43.4711 12.7591C43.7416 12.6733 43.9858 12.5194 44.1809 12.3121C44.3635 12.1181 44.4631 11.8597 44.4584 11.5924C44.4656 11.4535 44.441 11.3149 44.3863 11.1872C44.3316 11.0595 44.2484 10.9462 44.1432 10.8562C43.9117 10.6695 43.6448 10.5323 43.3589 10.453C43.0457 10.3556 42.7324 10.2699 42.42 10.1842C41.7596 10.0394 41.1171 9.82121 40.5045 9.53365C39.968 9.29172 39.4947 8.92767 39.1217 8.47018C38.78 8.03648 38.6095 7.50442 38.6102 6.874C38.5962 6.23276 38.79 5.60439 39.1623 5.08402C39.5363 4.571 40.0393 4.16761 40.6195 3.91537C41.2278 3.64167 41.8872 3.5022 42.5535 3.50635C43.3683 3.49738 44.1735 3.6854 44.9013 4.05464C45.577 4.38978 46.1427 4.91383 46.5306 5.56414L44.7707 6.61592C44.6543 6.38766 44.4892 6.18814 44.2872 6.0316C44.0683 5.85655 43.8236 5.71691 43.562 5.6177C43.292 5.51402 43.0074 5.45419 42.7188 5.44046C42.3787 5.42316 42.0382 5.465 41.7122 5.56414C41.4281 5.64502 41.1715 5.80303 40.9705 6.02089C40.7807 6.2408 40.6815 6.5254 40.693 6.81654C40.693 7.13078 40.8032 7.36548 41.0237 7.52065C41.2801 7.69075 41.5632 7.81588 41.8611 7.89072C42.1996 7.98422 42.5464 8.0881 42.9016 8.20236C43.5161 8.3951 44.1127 8.64145 44.6847 8.93861C45.2014 9.19829 45.6591 9.56306 46.0288 10.0099C46.3754 10.4476 46.5502 10.9983 46.52 11.5574C46.5302 12.2013 46.3168 12.8285 45.9166 13.3308C45.5042 13.8478 44.9654 14.2478 44.353 14.4916C43.7078 14.7584 43.0106 14.8733 42.3146 14.8276ZM37.4498 9.30381C37.5184 12.2508 35.0643 15.0497 32.0705 14.9951C28.9965 15.0536 26.5143 12.0803 26.7126 9.06522C26.7465 7.93782 27.1101 6.84559 27.7579 5.92545C27.7859 5.8787 27.8062 5.87675 27.8468 5.91571C28.3517 6.4168 28.941 6.8234 29.5874 7.1165C29.6357 7.13695 29.6396 7.15156 29.6096 7.19246C29.1276 7.87096 28.8958 8.69755 28.954 9.52975C28.9791 11.6966 31.3714 13.4963 33.3827 12.4358C35.22 11.5204 35.7711 8.9094 34.5934 7.25673C34.4802 7.14279 34.5025 7.11357 34.6465 7.07072C35.073 6.86811 35.4733 6.61401 35.8388 6.31402C36.0044 6.18281 36.162 6.04167 36.3107 5.89136C36.3484 5.85143 36.3668 5.86117 36.3939 5.90013C37.0941 6.89383 37.4637 8.08539 37.4498 9.30381Z\"\n      fill=\"#9999AC\"\n    />\n    <path\n      d=\"M27.8304 0.499995H28.8631C28.9598 0.499995 28.9463 0.488308 28.9482 0.588617C28.8911 3.07686 31.7804 4.98663 33.8517 3.34468C34.2734 3.01612 34.6147 2.59455 34.8494 2.11239C35.0841 1.63022 35.2059 1.10028 35.2055 0.563296C35.2055 0.515577 35.2151 0.498047 35.2673 0.498047H37.3889C37.4363 0.498047 37.4469 0.512655 37.4469 0.558427C37.4875 4.55131 33.2473 7.57616 29.6328 5.58264C27.8381 4.60974 26.7019 2.61817 26.7077 0.567192C26.7077 0.515577 26.7193 0.499995 26.7725 0.499995H27.8304Z\"\n      fill=\"#9999AC\"\n    />\n  </svg>\n);\n\nconst LinkOffIcon = () => (\n  <svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <g clipPath=\"url(#clip0_13614_19286)\">\n      <path\n        d=\"M9.07955 4.47121L4.65447 4.47121L4.65447 3.30472L11.071 3.30472L11.071 9.72124L9.90451 9.72124L9.90451 5.29617L4.11719 11.325L3.29224 10.5L9.07955 4.47121Z\"\n        fill=\"white\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0_13614_19286\">\n        <rect width=\"14\" height=\"14\" fill=\"white\" />\n      </clipPath>\n    </defs>\n  </svg>\n);\n","import { Flex, Skeleton, Heading, Divider, SkeletonCircle, Text } from '@chakra-ui/react';\nimport { NetworkIcon } from '@snx-v3/useBlockchain';\n\nexport const PoolCardsLoading = () => {\n  return (\n    <>\n      {[1, 2, 3, 4].map((i) => (\n        <Flex\n          flexDir=\"column\"\n          w=\"100%\"\n          border=\"1px solid\"\n          borderColor=\"gray.900\"\n          rounded=\"base\"\n          bg=\"navy.700\"\n          p=\"6\"\n          key={i}\n        >\n          <Flex flexWrap=\"wrap\" justifyContent=\"space-between\" alignItems=\"center\" gap={4}>\n            <Flex flexDir=\"column\" gap={1}>\n              <Skeleton startColor=\"whiteAlpha.500\" endColor=\"whiteAlpha.200\" borderRadius={4}>\n                <Heading fontSize=\"20px\" fontWeight={700} color=\"white\">\n                  {/* Used for loading sizing */}\n                  USDC Andromeda Yield\n                </Heading>\n              </Skeleton>\n              <Flex alignItems=\"center\" fontSize=\"12px\" color=\"gray.500\" gap={1} fontWeight=\"bold\">\n                <Skeleton borderRadius={4} startColor=\"whiteAlpha.500\" endColor=\"whiteAlpha.200\">\n                  <NetworkIcon size=\"14px\" networkId={1} mr={1} />\n                  Ethirum Network\n                </Skeleton>\n              </Flex>\n            </Flex>\n            <Flex flexWrap=\"wrap\">\n              <Skeleton\n                borderRadius={4}\n                startColor=\"whiteAlpha.500\"\n                endColor=\"whiteAlpha.200\"\n                as={Flex}\n              >\n                <Flex alignItems=\"center\" mr={6} gap={2}>\n                  <Text fontSize=\"20px\" fontWeight=\"bold\" color=\"gray.500\">\n                    TVL\n                  </Text>\n                  <Text\n                    fontWeight=\"bold\"\n                    fontSize=\"20px\"\n                    color=\"white\"\n                    display=\"flex\"\n                    alignItems=\"center\"\n                    lineHeight=\"36px\"\n                  >\n                    100M\n                  </Text>\n                </Flex>\n                <Flex alignItems=\"center\" gap={2}>\n                  <Text fontSize=\"20px\" fontWeight=\"bold\" color=\"gray.500\">\n                    APR\n                  </Text>\n                  <Text fontWeight=\"bold\" fontSize=\"20px\" color=\"white\" lineHeight=\"36px\">\n                    42%\n                  </Text>\n                </Flex>\n              </Skeleton>\n            </Flex>\n          </Flex>\n          <Divider mt=\"18px\" mb=\"10px\" />\n          <Flex justifyContent=\"space-between\">\n            {[1, 2, 3, 4, 5].map((i) => (\n              <Flex key={i} alignItems=\"center\">\n                <SkeletonCircle startColor=\"whiteAlpha.500\" endColor=\"whiteAlpha.200\" mr={3} />\n                <Skeleton\n                  height=\"25px\"\n                  width=\"80px\"\n                  startColor=\"whiteAlpha.500\"\n                  endColor=\"whiteAlpha.200\"\n                  borderRadius={4}\n                />\n              </Flex>\n            ))}\n          </Flex>\n        </Flex>\n      ))}\n    </>\n  );\n};\n","import { useReducer } from 'react';\nimport { Flex, Heading } from '@chakra-ui/react';\nimport { ChainFilter, CollateralFilter, PoolCard } from './';\nimport { TorosPoolCard } from './PoolCards/TorosPoolCard';\nimport { usePoolsList } from '@snx-v3/usePoolsList';\nimport { PoolCardsLoading } from './PoolCards/PoolCardsLoading';\n\nexport const PoolsList = () => {\n  const [state, dispatch] = useReducer(poolsReducer, { collateral: [], chain: [] });\n  const { data, isLoading } = usePoolsList();\n\n  const { collateral, chain } = state;\n\n  const showToros =\n    (chain.length === 0 || chain.includes(8453)) &&\n    (collateral.length === 0 || collateral.includes('USDC'));\n\n  return (\n    <Flex mt={6} flexDirection=\"column\">\n      <Heading fontWeight={700} fontSize={24}>\n        Pools\n      </Heading>\n      <Flex flexWrap=\"wrap\" gap={4} justifyContent=\"space-between\" my={6}>\n        <ChainFilter activeChains={state.chain} dispatch={dispatch} />\n        <CollateralFilter activeCollateral={state.collateral} dispatch={dispatch} />\n      </Flex>\n      <Flex direction=\"column\" gap={4}>\n        {isLoading && <PoolCardsLoading />}\n        {!isLoading && showToros && (\n          <TorosPoolCard tvl={data?.toros.tvl || ''} apy={data?.toros.apy} />\n        )}\n        {!isLoading &&\n          data?.synthetixPools.map(({ network, poolInfo, apr }) => {\n            const collateralTypes = poolInfo.map((info) => info.collateral_type);\n            const pool = poolInfo[0].pool;\n\n            if (chain.length > 0 && !chain.includes(network.id)) return null;\n\n            return (\n              <PoolCard\n                key={network.hexId}\n                collateralTypes={collateralTypes}\n                apr={apr}\n                network={network}\n                pool={pool}\n                collaterals={collateral}\n              />\n            );\n          })}\n      </Flex>\n    </Flex>\n  );\n};\n\ninterface PoolsFilterState {\n  collateral: string[];\n  chain: number[];\n}\n\nexport interface PoolsFilterAction {\n  type:\n    | 'ADD_COLLATERAL'\n    | 'REMOVE_COLLATERAL'\n    | 'ADD_CHAIN'\n    | 'REMOVE_CHAIN'\n    | 'RESET_COLLATERAL'\n    | 'RESET_CHAIN';\n  payload?: {\n    collateral?: string;\n    chain?: number;\n  };\n}\n\nfunction poolsReducer(state: PoolsFilterState, action: PoolsFilterAction): PoolsFilterState {\n  switch (action.type) {\n    case 'ADD_COLLATERAL':\n      if (action.payload?.collateral) {\n        return {\n          ...state,\n          collateral: [...state.collateral, action.payload.collateral],\n        };\n      }\n\n    case 'REMOVE_COLLATERAL':\n      return {\n        ...state,\n        collateral: state.collateral.filter((item) => item !== action.payload?.collateral),\n      };\n\n    case 'ADD_CHAIN':\n      if (action.payload?.chain) {\n        // Only one chain active at once\n        return {\n          ...state,\n          chain: [action.payload.chain],\n        };\n      }\n\n    case 'REMOVE_CHAIN':\n      return {\n        ...state,\n        chain: state.chain.filter((item) => item !== action.payload?.chain),\n      };\n\n    case 'RESET_COLLATERAL':\n      return {\n        collateral: [],\n        chain: state.chain,\n      };\n\n    case 'RESET_CHAIN':\n      return {\n        collateral: state.collateral,\n        chain: [],\n      };\n\n    default:\n      return state;\n  }\n}\n","import { Box, Button, Divider, Flex, Skeleton, Text } from '@chakra-ui/react';\nimport { useVaultsData, VaultsDataType } from '@snx-v3/useVaultsData';\nimport React, { FC } from 'react';\nimport { wei } from '@synthetixio/wei';\nimport { formatNumber, formatNumberToUsd, formatPercent } from '@snx-v3/formatters';\nimport { useParams } from '@snx-v3/useParams';\nimport { BorderBox } from '@snx-v3/BorderBox';\nimport { CollateralIcon } from '@snx-v3/icons';\nimport { useApr } from '@snx-v3/useApr';\nimport { Tooltip } from '@snx-v3/Tooltip';\nimport { NETWORKS, Network, useNetwork, useWallet } from '@snx-v3/useBlockchain';\nimport { useOfflinePrices } from '@snx-v3/useCollateralPriceUpdates';\nimport { usePool } from '@snx-v3/usePoolsList';\nimport { formatEther } from 'ethers/lib/utils';\nimport { BigNumberish } from 'ethers';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\n\nexport const calculateVaultTotals = (vaultsData: VaultsDataType) => {\n  const zeroValues = { collateral: { value: wei(0), amount: wei(0) }, debt: wei(0) };\n  if (!vaultsData) return zeroValues;\n  return vaultsData.reduce((acc, { collateral, debt }) => {\n    acc.collateral = {\n      value: acc.collateral.value.add(collateral.value),\n      amount: acc.collateral.amount.add(collateral.amount),\n    };\n    acc.debt = acc.debt.add(debt);\n    return acc;\n  }, zeroValues);\n};\n\nexport const CollateralSectionUi: FC<{\n  vaultsData: VaultsDataType;\n  collateralPrices?: { symbol: string; price: BigNumberish }[];\n  apr?: number;\n  isAprLoading?: boolean;\n  network: Network | undefined;\n  poolId: string | undefined;\n}> = ({ vaultsData, collateralPrices, apr, isAprLoading, network, poolId }) => {\n  const { network: currentNetwork, setNetwork } = useNetwork();\n  const { connect } = useWallet();\n  const navigate = useNavigate();\n  const [queryParams] = useSearchParams();\n\n  const { collateral: totalCollateral, debt: totalDebt } = calculateVaultTotals(vaultsData);\n\n  return (\n    <BorderBox padding={4} bg=\"navy.700\" flexDirection=\"column\" data-testid=\"pool collateral types\">\n      <Text fontWeight={700} fontSize=\"xl\">\n        Pool Collateralization\n      </Text>\n      <BorderBox padding={4} mt={4} flexDirection=\"column\">\n        <Flex\n          justifyContent=\"space-between\"\n          flexDirection={{ base: 'row', md: 'column', lg: 'row' }}\n        >\n          <Text\n            display=\"flex\"\n            alignItems=\"center\"\n            fontWeight={700}\n            fontSize=\"md\"\n            gap={1}\n            color=\"white\"\n          >\n            Total TVL\n          </Text>\n          {!vaultsData ? (\n            <Skeleton w={16} h={6} />\n          ) : (\n            <Text fontWeight={700} fontSize=\"xl\" color=\"white\" data-testid=\"pool tvl\">\n              {formatNumberToUsd(totalCollateral.value.toNumber())}\n            </Text>\n          )}\n        </Flex>\n        <Flex\n          justifyContent=\"space-between\"\n          flexDirection={{ base: 'row', md: 'column', lg: 'row' }}\n        >\n          <Text\n            display=\"flex\"\n            alignItems=\"center\"\n            fontWeight={700}\n            fontSize=\"md\"\n            gap={1}\n            color=\"white\"\n          >\n            Total Debt\n          </Text>\n          {!vaultsData ? (\n            <Skeleton mt={1} w={16} h={6} />\n          ) : (\n            <Text fontWeight={700} fontSize=\"xl\" color=\"white\" data-testid=\"pool total debt\">\n              {formatNumberToUsd(totalDebt.toNumber())}\n            </Text>\n          )}\n        </Flex>\n        <Flex\n          justifyContent=\"space-between\"\n          flexDirection={{ base: 'row', md: 'column', lg: 'row' }}\n        >\n          <Text\n            display=\"flex\"\n            alignItems=\"center\"\n            fontWeight={700}\n            fontSize=\"md\"\n            gap={1}\n            color=\"white\"\n          >\n            APR\n          </Text>\n          {isAprLoading ? (\n            <Skeleton mt={1} w={16} h={6} />\n          ) : (\n            <Tooltip label=\"APR is a combination of past week pool performance and rewards.\">\n              <Text fontWeight={700} fontSize=\"xl\" color=\"white\">\n                {`${!!apr ? apr.toFixed(2) : '-'}%`}\n              </Text>\n            </Tooltip>\n          )}\n        </Flex>\n      </BorderBox>\n      <Flex py={3} flexDirection=\"column\" justifyContent=\"space-between\">\n        {!vaultsData || !collateralPrices ? (\n          <Box>\n            <Skeleton mt={4} w=\"full\" height={24} />\n            <Skeleton mt={2} w=\"full\" height={24} />\n          </Box>\n        ) : (\n          <>\n            {vaultsData.map((vaultCollateral) => {\n              const price = collateralPrices?.find(\n                (item) => item.symbol === vaultCollateral.collateralType.symbol\n              )?.price;\n\n              return (\n                <React.Fragment key={vaultCollateral.collateralType.tokenAddress}>\n                  <Divider my={4} />\n                  <Box\n                    display=\"flex\"\n                    px={4}\n                    flexDirection=\"column\"\n                    borderColor=\"gray.900\"\n                    _last={{ borderBottom: 'none' }}\n                    data-testid=\"pool collateral\"\n                    data-collateral={vaultCollateral.collateralType.symbol}\n                  >\n                    <Flex color=\"white\" display=\"flex\" gap={2} alignItems=\"center\">\n                      <CollateralIcon\n                        width=\"30px\"\n                        height=\"30px\"\n                        fill=\"#0B0B22\"\n                        color=\"#00D1FF\"\n                        symbol={vaultCollateral.collateralType.symbol}\n                      />\n                      <Text fontWeight={700} fontSize=\"xl\">\n                        {vaultCollateral.collateralType.displaySymbol}\n                      </Text>\n\n                      <Text\n                        fontSize=\"sm\"\n                        color=\"gray.400\"\n                        fontWeight=\"400\"\n                        data-testid=\"collateral price\"\n                      >\n                        {price ? formatNumberToUsd(formatEther(price.toString())) : '-'}\n                      </Text>\n\n                      <Button\n                        onClick={async (e) => {\n                          try {\n                            e.stopPropagation();\n\n                            if (!currentNetwork) {\n                              connect();\n                              return;\n                            }\n\n                            if (network && currentNetwork.id !== network.id) {\n                              if (!(await setNetwork(network.id))) {\n                                return;\n                              }\n                            }\n\n                            queryParams.set('manageAction', 'deposit');\n                            navigate({\n                              pathname: `/positions/${vaultCollateral.collateralType.symbol}/${poolId}`,\n                              search: queryParams.toString(),\n                            });\n                          } catch (error) {}\n                        }}\n                        size=\"sm\"\n                        variant=\"outline\"\n                        colorScheme=\"gray\"\n                        height=\"32px\"\n                        py=\"10px\"\n                        px=\"12px\"\n                        whiteSpace=\"nowrap\"\n                        borderRadius=\"4px\"\n                        color=\"white\"\n                        fontFamily=\"heading\"\n                        fontWeight={700}\n                        fontSize=\"14px\"\n                        lineHeight=\"20px\"\n                      >\n                        Deposit\n                      </Button>\n                    </Flex>\n                    <Flex gap={2} justifyContent=\"space-between\">\n                      <Flex gap={1} flexBasis=\"50%\" flexDirection=\"column\">\n                        <Text\n                          mt={2}\n                          fontSize=\"sm\"\n                          color=\"gray.500\"\n                          textTransform=\"uppercase\"\n                          whiteSpace=\"nowrap\"\n                        >\n                          TVL\n                        </Text>\n                        <Text\n                          fontSize=\"md\"\n                          fontWeight={700}\n                          color=\"white\"\n                          data-testid=\"collateral value\"\n                        >\n                          {formatNumberToUsd(vaultCollateral.collateral.value.toNumber())}\n                        </Text>\n                        <Text\n                          fontSize=\"sm\"\n                          color=\"gray.500\"\n                          fontWeight=\"400\"\n                          data-testid=\"collateral amount\"\n                        >\n                          {formatNumber(vaultCollateral.collateral.amount.toNumber())}{' '}\n                          {vaultCollateral.collateralType.displaySymbol}\n                        </Text>\n                      </Flex>\n                      <Flex gap={1} flexBasis=\"50%\" flexDirection=\"column\">\n                        <Text\n                          mt={2}\n                          fontSize=\"sm\"\n                          color=\"gray.500\"\n                          textTransform=\"uppercase\"\n                          whiteSpace=\"nowrap\"\n                        >\n                          Debt\n                        </Text>\n                        <Text\n                          fontSize=\"md\"\n                          fontWeight={700}\n                          color=\"white\"\n                          data-testid=\"collateral debt\"\n                        >\n                          {formatNumberToUsd(vaultCollateral.debt.toNumber())}\n                        </Text>\n                        <Text\n                          fontSize=\"sm\"\n                          color=\"gray.500\"\n                          fontWeight=\"400\"\n                          data-testid=\"collateral cratio\"\n                        >\n                          VAULT C-RATIO:{' '}\n                          {vaultCollateral.debt.eq(0)\n                            ? '-'\n                            : formatPercent(\n                                vaultCollateral.collateral.value\n                                  .div(vaultCollateral.debt)\n                                  .toNumber(),\n                                { maximumFractionDigits: 0 }\n                              )}\n                        </Text>\n                      </Flex>\n                    </Flex>\n                  </Box>\n                </React.Fragment>\n              );\n            })}\n          </>\n        )}\n      </Flex>\n    </BorderBox>\n  );\n};\n\nexport const CollateralSection = () => {\n  const { poolId, networkId } = useParams();\n\n  const network = NETWORKS.find((n) => n.id === Number(networkId));\n\n  const { data: poolData } = usePool(Number(networkId), String(poolId));\n  const { data: vaultsData } = useVaultsData(Number(poolId), network);\n  const { data: aprData, isLoading: isAprLoading } = useApr(network);\n\n  const collaterals = poolData?.poolInfo.map(({ collateral_type }) => ({\n    symbol: collateral_type.symbol,\n    oracleId: collateral_type.oracle_node_id,\n    id: collateral_type.id,\n  }));\n\n  const { data: collateralPrices } = useOfflinePrices(collaterals);\n\n  return (\n    <CollateralSectionUi\n      vaultsData={vaultsData}\n      collateralPrices={collateralPrices}\n      apr={aprData?.combinedApr}\n      isAprLoading={isAprLoading}\n      network={network}\n      poolId={poolId}\n    />\n  );\n};\n","import { Flex, Heading, Skeleton } from '@chakra-ui/react';\n\nexport const PoolHeader = ({ name }: { name?: string }) => {\n  return (\n    <Flex gap={2} alignItems=\"flex-end\">\n      <Skeleton isLoaded={!!name}>\n        <Heading fontWeight={700} fontSize=\"3xl\">\n          {name ? name : 'Unknown Pool'}\n        </Heading>\n      </Skeleton>\n    </Flex>\n  );\n};\n","import { useQuery } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\nimport { useMulticall3 } from '@snx-v3/useMulticall3';\nimport { z } from 'zod';\nimport { Network, useNetwork } from '@snx-v3/useBlockchain';\n\nconst MarketNamesSchema = z.array(z.string());\n\nconst marketAbi = ['function name(uint128 marketId) external view returns (string memory)'];\nconst marketInterface = new ethers.utils.Interface(marketAbi);\n\nexport const useMarketNamesById = (\n  marketIdsAndAddresses?: { marketId: string; address: string }[],\n  customNetwork?: Network\n) => {\n  const { network } = useNetwork();\n  const { data: MultiCall3 } = useMulticall3(customNetwork);\n\n  const targetNetwork = customNetwork || network;\n\n  return useQuery({\n    queryKey: [\n      `${targetNetwork?.id}-${targetNetwork?.preset}`,\n      'MarketNamesById',\n      {\n        markets: marketIdsAndAddresses\n          ? marketIdsAndAddresses.map((market) => market.marketId).sort()\n          : [],\n      },\n    ],\n    queryFn: async () => {\n      if (!marketIdsAndAddresses || !MultiCall3) {\n        throw Error('Query should not be enable when contract or marketIdsAndAddresses missing');\n      }\n      const calls = marketIdsAndAddresses.map((x) => ({\n        target: x.address,\n        callData: marketInterface.encodeFunctionData('name', [x.marketId]),\n      }));\n      const result = await MultiCall3.callStatic.aggregate(calls);\n      const decoded = result.returnData.map(\n        (bytes: ethers.utils.BytesLike) => marketInterface.decodeFunctionResult('name', bytes)[0]\n      );\n      return MarketNamesSchema.parse(decoded);\n    },\n    select: (marketNames) =>\n      marketNames.reduce((acc: Record<string, string | undefined>, marketName, index) => {\n        const marketId = marketIdsAndAddresses?.[index].marketId;\n        if (!marketId) return acc;\n        acc[marketId] = marketName;\n        return acc;\n      }, {}),\n    enabled: Boolean(MultiCall3 && marketIdsAndAddresses && marketIdsAndAddresses.length > 0),\n  });\n};\n","import { FC } from 'react';\nimport {\n  Flex,\n  Table,\n  TableCellProps,\n  TableContainer,\n  Text,\n  Th,\n  Td,\n  Thead,\n  Tr,\n  Tbody,\n  Skeleton,\n} from '@chakra-ui/react';\nimport { formatPercent } from '@snx-v3/formatters';\nimport { useParams } from '@snx-v3/useParams';\nimport { useMarketNamesById } from '@snx-v3/useMarketNamesById';\nimport { BorderBox } from '@snx-v3/BorderBox';\nimport { NETWORKS } from '@snx-v3/useBlockchain';\nimport { usePool } from '@snx-v3/usePoolsList';\nimport { wei } from '@synthetixio/wei';\n\nconst StyledTh: FC<TableCellProps> = (props) => (\n  <Th\n    textTransform=\"none\"\n    sx={{\n      paddingBottom: 1,\n      paddingTop: 4,\n      borderColor: 'gray.900',\n      borderTop: 'none',\n      paddingLeft: 2,\n      paddingRight: 2,\n    }}\n    {...props}\n  />\n);\n\nconst StyledTd: FC<TableCellProps & { isLastItem?: boolean }> = ({ isLastItem, ...props }) => (\n  <Td\n    sx={{\n      borderBottom: isLastItem ? 'none' : '1px',\n      borderBottomColor: 'gray.900',\n      paddingLeft: 2,\n      paddingRight: 2,\n    }}\n    {...props}\n  />\n);\n\nconst LoadingRow = () => (\n  <Tr>\n    <StyledTd>\n      <Skeleton w=\"full\" height={8} />\n    </StyledTd>\n    <StyledTd>\n      <Skeleton w=\"full\" height={8} />\n    </StyledTd>\n    <StyledTd>\n      <Skeleton w=\"full\" height={8} />\n    </StyledTd>\n    <StyledTd>\n      <Skeleton w=\"full\" height={8} />\n    </StyledTd>\n  </Tr>\n);\n\nexport function MarketSectionUi({\n  marketNamesById,\n  isLoading,\n  configurations,\n  total_weight,\n}: {\n  marketNamesById?: Record<string, string | undefined>;\n  isLoading: boolean;\n  total_weight?: number;\n  configurations?: any[];\n}) {\n  if (!isLoading && !total_weight) {\n    return (\n      <BorderBox padding={4}>\n        <Text>No markets found for this pool</Text>\n      </BorderBox>\n    );\n  }\n  return (\n    <BorderBox bg=\"navy.700\" padding={4} flexDirection=\"column\" data-testid=\"pool markets\">\n      <Text fontSize=\"xl\" fontWeight={700}>\n        Markets\n      </Text>\n      <Flex>\n        <TableContainer w=\"100%\">\n          <Table variant=\"simple\">\n            <Thead>\n              <Tr>\n                <StyledTh>Market</StyledTh>\n                <StyledTh>Pool Allocation</StyledTh>\n              </Tr>\n            </Thead>\n            <Tbody>\n              {isLoading ? (\n                <LoadingRow />\n              ) : (\n                <>\n                  {configurations?.length === 0 ? (\n                    <Tr w=\"full\">\n                      <Td colSpan={4} border=\"none\">\n                        <Text textAlign=\"center\" mt={4}>\n                          No markets configured for the pool\n                        </Text>\n                      </Td>\n                    </Tr>\n                  ) : (\n                    configurations?.map(({ id, market, weight }, i) => {\n                      const isLastItem = i + 1 === configurations.length;\n\n                      return (\n                        <Tr key={id} data-testid=\"pool market\" data-market={id}>\n                          <StyledTd isLastItem={isLastItem}>\n                            <Text fontSize=\"sm\" display=\"block\" data-testid=\"market name\">\n                              {marketNamesById?.[market.id] ? marketNamesById[market.id] : '-'}\n                            </Text>\n                            <Text fontSize=\"xs\" color=\"gray.500\" data-testid=\"market id\">\n                              ID: {market.id}\n                            </Text>\n                          </StyledTd>\n                          <StyledTd\n                            isLastItem={isLastItem}\n                            fontSize=\"sm\"\n                            data-testid=\"pool allocation\"\n                          >\n                            {total_weight ? (\n                              <>\n                                <Text display=\"block\">\n                                  {formatPercent(wei(weight).div(total_weight).toNumber())}\n                                </Text>\n                              </>\n                            ) : (\n                              '-'\n                            )}\n                          </StyledTd>\n                        </Tr>\n                      );\n                    })\n                  )}\n                </>\n              )}\n            </Tbody>\n          </Table>\n        </TableContainer>\n      </Flex>\n    </BorderBox>\n  );\n}\n\nexport const MarketSection = () => {\n  const { poolId, networkId } = useParams();\n\n  const network = NETWORKS.find((n) => n.id === Number(networkId));\n  const { data, isLoading } = usePool(Number(networkId), String(poolId));\n\n  const poolData = data?.poolInfo[0].pool;\n\n  const marketIdsAndAddresses = poolData?.configurations.map(({ market }) => ({\n    marketId: market.id,\n    address: market.address,\n  }));\n\n  const { data: marketNamesById } = useMarketNamesById(marketIdsAndAddresses, network);\n\n  return (\n    <MarketSectionUi\n      total_weight={poolData?.total_weight ? Number(poolData.total_weight) : 0}\n      marketNamesById={marketNamesById}\n      isLoading={isLoading}\n      configurations={poolData?.configurations || []}\n    />\n  );\n};\n","import { Box, Container, Flex, Link, useDisclosure } from '@chakra-ui/react';\nimport { NavLink as RouterLink, useLocation } from 'react-router-dom';\nimport { NetworkController } from './NetworkController';\nimport { useEffect } from 'react';\nimport { Logo, LogoIcon } from '@snx-v3/icons';\nimport { useTokenBalance } from '@snx-v3/useTokenBalance';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { Balance } from '../../components';\nimport { useGetUSDTokens } from '@snx-v3/useGetUSDTokens';\n\nexport default function Header() {\n  const { onClose } = useDisclosure();\n  const location = useLocation();\n  const { network } = useNetwork();\n\n  const isBase = isBaseAndromeda(network?.id, network?.preset);\n  const { data: usdTokens } = useGetUSDTokens();\n  const { data: balance } = useTokenBalance(isBase ? usdTokens?.USDC : usdTokens?.sUSD);\n\n  useEffect(() => {\n    onClose();\n  }, [location, onClose]);\n\n  return (\n    <>\n      <Flex\n        bg=\"navy.700\"\n        mb=\"4\"\n        py=\"3\"\n        borderBottomWidth=\"1px\"\n        borderBottomColor=\"gray.900\"\n        px=\"10\"\n      >\n        <Container maxW=\"1236px\" as={Flex} justifyContent=\"space-between\" alignItems=\"center\">\n          <Flex\n            display={{ base: 'none', md: 'inline-block' }}\n            flexDirection=\"row\"\n            justifyContent=\"space-between\"\n          >\n            <Link\n              to={{\n                pathname: '/',\n                search: location.search,\n              }}\n              as={RouterLink}\n              py={4}\n            >\n              <Logo />\n            </Link>\n            <Link\n              ml={6}\n              as={RouterLink}\n              to={{\n                pathname: '/dashboard',\n                search: location.search,\n              }}\n              fontWeight={700}\n              fontSize=\"14px\"\n              display=\"inline\"\n              px={3}\n              py={2.5}\n              textDecoration=\"none\"\n              color=\"gray.500\"\n              _hover={{ textDecoration: 'none' }}\n              _activeLink={{ color: 'white' }}\n            >\n              Dashboard\n            </Link>\n            <Link\n              ml={2.5}\n              as={RouterLink}\n              to={{\n                pathname: '/pools',\n                search: location.search,\n              }}\n              fontWeight={700}\n              fontSize=\"14px\"\n              display=\"inline\"\n              textDecoration=\"none\"\n              px={3}\n              py={2.5}\n              color=\"gray.500\"\n              _hover={{ textDecoration: 'none' }}\n              _activeLink={{ color: 'white' }}\n            >\n              Pools\n            </Link>\n          </Flex>\n          <Box display={{ md: 'none' }}>\n            <Link to=\"/\" as={RouterLink} py={4} pr={2}>\n              <LogoIcon />\n            </Link>\n          </Box>\n          <Flex gap={3} flexWrap=\"wrap-reverse\" justifyContent=\"center\" alignItems=\"center\">\n            <Balance isBase={isBase} balance={balance} />\n            <NetworkController />\n          </Flex>\n        </Container>\n      </Flex>\n    </>\n  );\n}\n","import { Container, Flex, Link } from '@chakra-ui/react';\nimport { DiscordIcon, GithubIcon, Logo, WarpcastIcon, XIcon, YoutubeIcon } from '@snx-v3/icons';\n\nexport const Footer = () => {\n  return (\n    <Flex borderTop=\"1px solid\" borderTopColor=\"gray.900\" bg=\"navy.700\">\n      <Container\n        maxW=\"1236px\"\n        as={Flex}\n        height=\"72px\"\n        alignItems=\"center\"\n        justifyContent=\"space-between\"\n      >\n        <Logo withText={false} />\n        <Flex alignItems=\"center\">\n          <Link href=\"https://discord.com/invite/synthetix\" target=\"_blank\">\n            <DiscordIcon w=\"24px\" h=\"24px\" mr={2} />\n          </Link>\n          <Link href=\"https://x.com/synthetix_io\" target=\"_blank\">\n            <XIcon w=\"24px\" h=\"24px\" mr={2} />\n          </Link>\n          <Link href=\"https://github.com/Synthetixio/\" target=\"_blank\">\n            <GithubIcon w=\"24px\" h=\"24px\" mr={2} />\n          </Link>\n          <Link href=\"https://warpcast.com/~/channel/synthetix\" target=\"_blank\">\n            <WarpcastIcon w=\"24px\" h=\"24px\" mr={2} />\n          </Link>\n          <Link href=\"https://www.youtube.com/@synthetix.v3\" target=\"_blank\">\n            <YoutubeIcon w=\"24px\" h=\"24px\" />\n          </Link>\n        </Flex>\n      </Container>\n    </Flex>\n  );\n};\n","import { FC } from 'react';\nimport { Box, Container, Flex } from '@chakra-ui/react';\nimport { Outlet } from 'react-router-dom';\nimport Header from './Header';\nimport { Footer } from './Footer';\n\nexport const DefaultLayout: FC = () => (\n  <Box\n    as=\"main\"\n    minHeight=\"100vh\"\n    color=\"rgba(255,255,255,0.85)\"\n    display=\"flex\"\n    flexDirection=\"column\"\n    bg=\"navy.900\"\n  >\n    <Flex flex=\"1\" flexDirection=\"column\">\n      <Header />\n      <Container display=\"flex\" flexDir=\"column\" maxW=\"1236px\" flex=\"1\">\n        <Outlet />\n      </Container>\n      <Footer />\n    </Flex>\n  </Box>\n);\n","import { Flex, Heading, Link } from '@chakra-ui/react';\nimport Head from 'react-helmet';\nimport { useTranslation } from 'react-i18next';\nimport { Link as NavLink } from 'react-router-dom';\n\nexport const NotFoundPage = () => {\n  const { t } = useTranslation();\n\n  return (\n    <>\n      <Head>\n        <title>{t('not-found.page-title')}</title>\n      </Head>\n      <Flex\n        height=\"100%\"\n        direction=\"column\"\n        position=\"relative\"\n        alignItems=\"center\"\n        justifyContent=\"center\"\n        flex=\"1\"\n      >\n        <Heading fontSize=\"5xl\">Not found</Heading>\n\n        <NavLink to=\"/\">\n          <Link color=\"cyan.500\">Return to Home</Link>\n        </NavLink>\n      </Flex>\n    </>\n  );\n};\n","import { Flex, Heading } from '@chakra-ui/react';\nimport { Helmet } from 'react-helmet';\nimport { AssetsList, PositionsList, StatsList, AccountBanner } from '../components';\nimport { useWallet } from '@snx-v3/useBlockchain';\n\nexport function Dashboard() {\n  const { activeWallet } = useWallet();\n  return (\n    <>\n      <Helmet>\n        <title>Synthetix Liquidity V3</title>\n        <meta name=\"description\" content=\"Synthetix V3 - Dashboard\" />\n      </Helmet>\n      <Flex flexDir=\"column\" mb={16}>\n        {activeWallet && <AccountBanner />}\n        <Heading\n          mt={{\n            base: 2,\n            sm: 10,\n          }}\n          color=\"gray.50\"\n          fontSize=\"1.5rem\"\n          data-cy=\"liquidity-dashboard\"\n        >\n          Dashboard\n        </Heading>\n        <StatsList />\n        <AssetsList />\n        <PositionsList />\n      </Flex>\n    </>\n  );\n}\n","import { Flex, Heading, Text } from '@chakra-ui/react';\nimport { Helmet } from 'react-helmet';\nimport { PoolsList } from '../components/Pools';\n\nexport function Home() {\n  return (\n    <>\n      <Helmet>\n        <title>Synthetix Liquidity V3</title>\n        <meta name=\"description\" content=\"Synthetix V3 - Dashboard\" />\n      </Helmet>\n      <Flex flexDir=\"column\" mb={16}>\n        <Heading\n          mt={10}\n          color=\"gray.50\"\n          maxWidth=\"20rem\"\n          fontSize=\"3rem\"\n          data-cy=\"liquidity-home\"\n          lineHeight=\"120%\"\n        >\n          The Liquidity Layer of DeFi\n        </Heading>\n        <Text color=\"gray.500\" fontSize=\"1rem\" lineHeight={6} fontFamily=\"heading\" mt=\"1rem\">\n          Provide liquidity for the next generation of permissionless protocols\n        </Text>\n        <PoolsList />\n      </Flex>\n    </>\n  );\n}\n","import { Link as ReactRouterLink, useLocation } from 'react-router-dom';\nimport { Link, LinkProps } from '@chakra-ui/react';\nimport { ArrowBackIcon } from '@chakra-ui/icons';\n\nexport const HomeLink = ({ ...props }: LinkProps) => {\n  const location = useLocation();\n\n  return (\n    <Link\n      width=\"fit-content\"\n      display=\"flex\"\n      alignItems=\"center\"\n      color=\"cyan.500\"\n      as={ReactRouterLink}\n      to={{\n        pathname: '/',\n        search: location.search,\n      }}\n      fontSize=\"sm\"\n      fontWeight={700}\n      mb={2}\n      {...props}\n    >\n      <ArrowBackIcon mr={1} /> Home\n    </Link>\n  );\n};\n","import { Alert, Text } from '@chakra-ui/react';\n\nexport function WithdrawIncrease() {\n  return (\n    <Alert colorScheme=\"orange\" mb=\"4\">\n      <Text fontWeight=\"bold\">\n        This action will increase the timeout for withdrawing collateral\n      </Text>\n    </Alert>\n  );\n}\n","import React, { FC } from 'react';\nimport { Box, Divider, Flex, Heading, Link, Text } from '@chakra-ui/react';\nimport { BorderBox } from '@snx-v3/BorderBox';\nimport { useParams } from '@snx-v3/useParams';\nimport { CollateralType, useCollateralType } from '@snx-v3/useCollateralTypes';\nimport { CollateralIcon } from '@snx-v3/icons';\nimport { AccountBanner, ManageAction } from '../components';\nimport { ManagePositionProvider } from '@snx-v3/ManagePositionContext';\nimport { ManageStats } from '../components';\nimport { HomeLink } from '@snx-v3/HomeLink';\nimport { Rewards } from '../components';\nimport { usePoolData } from '@snx-v3/usePoolData';\nimport { useRewards, RewardsType } from '@snx-v3/useRewards';\nimport { WithdrawIncrease } from '@snx-v3/WithdrawIncrease';\nimport { LiquidityPosition, useLiquidityPosition } from '@snx-v3/useLiquidityPosition';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { Network, useNetwork, useWallet } from '@snx-v3/useBlockchain';\n\nfunction useNormalisedCollateralSymbol(collateralSymbol?: string) {\n  const { network } = useNetwork();\n\n  return React.useMemo(() => {\n    if (collateralSymbol !== 'USDC') {\n      return collateralSymbol;\n    }\n    if (!network?.id && network?.preset) {\n      return undefined;\n    }\n    return isBaseAndromeda(network?.id, network?.preset) && collateralSymbol === 'USDC'\n      ? 'sUSDC'\n      : collateralSymbol;\n  }, [network?.id, network?.preset, collateralSymbol]);\n}\n\nfunction useCollateralDisplayName(collateralSymbol?: string) {\n  const { network } = useNetwork();\n\n  return React.useMemo(() => {\n    if (!network?.id && network?.preset) {\n      return undefined;\n    }\n    return isBaseAndromeda(network?.id, network?.preset) && collateralSymbol === 'sUSDC'\n      ? 'USDC'\n      : collateralSymbol;\n  }, [network?.id, network?.preset, collateralSymbol]);\n}\n\nexport const ManageUi: FC<{\n  collateralType?: CollateralType;\n  isLoading: boolean;\n  rewards?: RewardsType;\n  liquidityPosition?: LiquidityPosition;\n  network?: Network | null;\n  collateralSymbol?: string;\n}> = ({ isLoading, rewards, liquidityPosition, network, collateralSymbol }) => {\n  const collateralDisplayName = useCollateralDisplayName(collateralSymbol);\n  const { activeWallet } = useWallet();\n\n  return (\n    <Box mb={12} mt={8}>\n      <Box mb=\"4\">\n        <HomeLink />\n      </Box>\n      {activeWallet && <AccountBanner mb={8} />}\n      <Flex alignItems=\"center\" mb=\"8px\">\n        <Flex\n          bg=\"linear-gradient(180deg, #08021E 0%, #1F0777 100%)\"\n          height=\"34px\"\n          width=\"34px\"\n          justifyContent=\"center\"\n          alignItems=\"center\"\n          borderRadius=\"100%\"\n          display=\"flex\"\n        >\n          <CollateralIcon\n            symbol={collateralSymbol}\n            width=\"28px\"\n            height=\"28px\"\n            fill=\"#0B0B22\"\n            color=\"#00D1FF\"\n          />\n        </Flex>\n        <Heading\n          ml={4}\n          fontWeight={700}\n          fontSize=\"3xl\"\n          color=\"gray.50\"\n          display=\"flex\"\n          alignItems=\"center\"\n          data-cy=\"manage-position-title\"\n        >\n          {collateralDisplayName} Liquidity Position\n        </Heading>\n      </Flex>\n      <Text color=\"gray.500\" fontFamily=\"heading\" fontSize=\"14px\" lineHeight=\"20px\" width=\"80%\">\n        {isBaseAndromeda(network?.id, network?.preset)\n          ? 'Deposit to '\n          : 'Deposit your collateral to borrow snxUSD and '}\n        contribute to the network collateral. If you&apos;ve never staked on Synthetix V3 before,\n        please read through this{' '}\n        <Link\n          fontWeight=\"600\"\n          color=\"cyan.500\"\n          href={\n            isBaseAndromeda(network?.id, network?.preset)\n              ? 'https://docs.synthetix.io/v/v3/for-liquidity-providers/base-lp-guide'\n              : 'https://docs.synthetix.io/v/v3/for-liquidity-providers/delegating-collateral'\n          }\n          target=\"_blank\"\n        >\n          quick introduction\n        </Link>{' '}\n        first.\n      </Text>\n      <Divider mt=\"31px\" mb=\"24px\" color=\"gray.900\" />\n      <Flex gap={4}>\n        <BorderBox p={6} flexDirection=\"column\" bg=\"navy.700\" height=\"fit-content\">\n          <WithdrawIncrease />\n          <Text fontWeight=\"700\" fontSize=\"xl\" color=\"gray.50\" mb=\"1\" fontFamily=\"heading\">\n            Manage Position\n          </Text>\n          <Text as=\"span\" fontWeight=\"700\" display=\"inline\" color=\"white\">\n            Manage your position so your debt never equals your collateral else your position might\n            get liquidated.\n          </Text>\n          <ManageAction liquidityPosition={liquidityPosition} />\n        </BorderBox>\n        <Box minW=\"450px\">\n          <ManageStats liquidityPosition={liquidityPosition} />\n          <Rewards isLoading={isLoading} rewards={rewards} />\n        </Box>\n      </Flex>\n    </Box>\n  );\n};\n\nexport const Manage = () => {\n  const { accountId, collateralSymbol: collateralSymbolRaw, poolId } = useParams();\n  const collateralSymbol = useNormalisedCollateralSymbol(collateralSymbolRaw);\n\n  const { network } = useNetwork();\n\n  const { isFetching: isCollateralLoading, data: collateralType } =\n    useCollateralType(collateralSymbolRaw);\n\n  const { isLoading: isPoolGraphDataLoading, data: poolData } = usePoolData(poolId);\n\n  const { isFetching: isRewardsLoading, data: rewardsData } = useRewards(\n    poolData?.registered_distributors,\n    poolId,\n    collateralType?.tokenAddress,\n    accountId\n  );\n\n  const { data: liquidityPosition } = useLiquidityPosition({\n    tokenAddress: collateralType?.tokenAddress,\n    accountId,\n    poolId,\n  });\n\n  const isLoading = isRewardsLoading || isCollateralLoading || isPoolGraphDataLoading;\n\n  return (\n    <ManagePositionProvider>\n      <ManageUi\n        isLoading={isLoading}\n        rewards={rewardsData}\n        liquidityPosition={liquidityPosition}\n        network={network}\n        collateralSymbol={collateralSymbol}\n      />\n    </ManagePositionProvider>\n  );\n};\n","import { Box, Divider, Flex } from '@chakra-ui/react';\nimport { Helmet } from 'react-helmet';\nimport { PoolHeader, MarketSection, CollateralSection, Rewards } from '../components';\nimport { useParams } from '@snx-v3/useParams';\nimport { HomeLink } from '@snx-v3/HomeLink';\nimport { useRewards } from '@snx-v3/useRewards';\nimport { usePool } from '@snx-v3/usePoolsList';\nimport { NETWORKS } from '@snx-v3/useBlockchain';\n\nexport const Pool = () => {\n  const { accountId, poolId, networkId } = useParams();\n\n  const { data: pool, isLoading: isPoolLoading } = usePool(Number(networkId), String(poolId));\n\n  const { poolInfo } = pool || {};\n\n  const registeredDistributors = poolInfo\n    ?.map((info) => info.pool.registered_distributors)\n    .flat()\n    ?.filter((item, pos, self) => self.findIndex((d) => d.id === item.id) === pos);\n\n  const collateralTypes = poolInfo?.map((info) => info.collateral_type);\n\n  const network = NETWORKS.find((n) => n.id === Number(networkId));\n\n  const { isLoading: isRewardsLoading, data: rewardsData } = useRewards(\n    registeredDistributors,\n    poolId,\n    // TODO: Update this to support other collateral types\n    collateralTypes?.[0]?.id,\n    accountId || '69',\n    network\n  );\n\n  const title = poolInfo ? `Pool #${poolInfo[0].pool.id} / ${poolInfo[0].pool.name}` : 'Pool';\n  const isLoading = isRewardsLoading || isPoolLoading;\n\n  return (\n    <>\n      <Helmet>\n        <title>{title}</title>\n        <meta name=\"description\" content={title} />\n      </Helmet>\n      <>\n        <HomeLink mt={4} />\n        <PoolHeader name={poolInfo && poolInfo[0].pool.name} />\n        <Divider my={8} bg=\"gray.900\" />\n        <Flex gap={4} flexDirection={{ base: 'column', lg: 'row' }} mb={8}>\n          <Box w={['100%', '100%', '55%']}>\n            <CollateralSection />\n          </Box>\n          <Box flexGrow={1}>\n            <MarketSection />\n            <Rewards mt={4} isLoading={isLoading} rewards={rewardsData} readOnly={true} />\n          </Box>\n        </Flex>\n      </>\n    </>\n  );\n};\n","import { Box } from '@chakra-ui/react';\nimport { PoolsList } from '../components/Pools';\n\nexport function Pools() {\n  return (\n    <Box mb={20} w=\"100%\">\n      <PoolsList />\n    </Box>\n  );\n}\n","import { utils } from 'ethers';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { useMutation } from '@tanstack/react-query';\nimport { useMulticall3 } from '@snx-v3/useMulticall3';\n\ntype Permissions = Array<string>;\nconst getPermissionDiff = (\n  existing: Permissions,\n  selected: Permissions\n): {\n  grants: Permissions;\n  revokes: Permissions;\n} => {\n  let grants: Permissions = [],\n    revokes: Permissions = [];\n  existing.concat(selected).forEach((permission) => {\n    if (!existing.includes(permission)) {\n      grants = [...grants, permission];\n    }\n    if (!selected.includes(permission)) {\n      revokes = [...revokes, permission];\n    }\n  });\n  return { grants, revokes };\n};\n\nexport const useManagePermissions = ({\n  accountId,\n  target,\n  existing = [],\n  selected = [],\n}: {\n  accountId: string;\n  target: string;\n  existing: Permissions;\n  selected: Permissions;\n}) => {\n  const { data: CoreProxy } = useCoreProxy();\n  const { data: multicall } = useMulticall3();\n\n  return useMutation({\n    mutationFn: async () => {\n      if (!CoreProxy || !multicall) {\n        return;\n      }\n\n      const { grants, revokes } = getPermissionDiff(existing, selected);\n\n      try {\n        const grantCalls = grants.map((permission) => ({\n          target: CoreProxy.address,\n          callData: CoreProxy.interface.encodeFunctionData('grantPermission', [\n            accountId,\n            utils.formatBytes32String(permission),\n            target,\n          ]),\n          allowFailure: false,\n          requireSuccess: true,\n        }));\n\n        const revokeCalls = revokes.map((permission) => ({\n          target: CoreProxy.address,\n          callData: CoreProxy.interface.encodeFunctionData('revokePermission', [\n            accountId,\n            utils.formatBytes32String(permission),\n            target,\n          ]),\n          allowFailure: false,\n          requireSuccess: true,\n        }));\n\n        const tx = await multicall.aggregate3([...grantCalls, ...revokeCalls]);\n        await tx.wait();\n      } catch (error: any) {\n        throw error;\n      }\n    },\n  });\n};\n","import { CopyIcon, ExternalLinkIcon } from '@chakra-ui/icons';\nimport { Flex, Tooltip } from '@chakra-ui/react';\nimport { etherscanLink } from '@snx-v3/etherscanLink';\nimport { prettyString } from '@snx-v3/format';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { FC, useMemo } from 'react';\n\ninterface AddressProps {\n  address: string;\n}\n\nexport const Address: FC<AddressProps> = ({ address }) => {\n  const { network } = useNetwork();\n  const link = useMemo(\n    () =>\n      etherscanLink({\n        chain: network?.name || '',\n        address,\n      }),\n    [address, network?.name]\n  );\n  return (\n    <Flex alignItems=\"center\" gap={2}>\n      <Tooltip label={address}>{prettyString(address)}</Tooltip>\n      <CopyIcon\n        onClick={() => {\n          navigator.clipboard.writeText(address);\n        }}\n        cursor=\"pointer\"\n        _hover={{\n          color: 'cyan',\n        }}\n      />\n      <a target=\"_blank\" href={link} rel=\"noreferrer\">\n        <ExternalLinkIcon\n          _hover={{\n            color: 'cyan',\n          }}\n        />\n      </a>\n    </Flex>\n  );\n};\n","export const permissionsList = ['ADMIN', 'BURN', 'DELEGATE', 'MINT', 'REWARDS', 'WITHDRAW'];\n","import { useAccountProxy } from '@snx-v3/useAccountProxy';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { useQuery } from '@tanstack/react-query';\nimport { utils } from 'ethers';\n\nexport function useAccountPermissions(accountId: string | undefined) {\n  const { data: CoreProxy } = useCoreProxy();\n  const { network } = useNetwork();\n\n  return useQuery({\n    queryKey: [`${network?.id}-${network?.preset}`, 'account-permissions', accountId],\n    queryFn: async function () {\n      if (!CoreProxy || !accountId) throw new Error('Should be disabled');\n      const permissions = await CoreProxy.getAccountPermissions(accountId);\n\n      return permissions.reduce(\n        (\n          acc: { [key: string]: string[] },\n          { user, permissions }: { user: string; permissions: string[] }\n        ) => ({\n          ...acc,\n          [user.toLowerCase()]: permissions.map((r: string) => utils.parseBytes32String(r)),\n        }),\n        {}\n      );\n    },\n    enabled: Boolean(CoreProxy?.address),\n  });\n}\n\nexport function useAccountOwner(accountId: string | undefined) {\n  const { data: AccountProxy } = useAccountProxy();\n  const { network } = useNetwork();\n\n  return useQuery({\n    queryKey: [`${network?.id}-${network?.preset}`, 'account-owner', accountId],\n    queryFn: async function () {\n      if (!AccountProxy || !accountId) throw new Error('Should be disabled');\n      return (await AccountProxy.ownerOf(accountId)) as string;\n    },\n    enabled: Boolean(AccountProxy?.address),\n  });\n}\n","/* eslint-disable react/no-unescaped-entities */\nimport { Text, Tooltip } from '@chakra-ui/react';\nimport { InfoIcon } from '@chakra-ui/icons';\n\nexport default function PermissionsInfo() {\n  return (\n    <Tooltip\n      label={\n        <>\n          <Text fontWeight={600} textAlign=\"left\">\n            ADMIN: Full control over the account, except for transferring ownership <br />\n            WITHDRAW: Ability to withdraw collateral from the account\n            <br />\n            REWARDS: Ability to claim rewards on behalf of the account\n            <br />\n            MINT: Ability to mint snxUSD using the account's collateral\n            <br />\n            DELEGATE: Ability to delegate the account's collateral to pools\n          </Text>\n        </>\n      }\n    >\n      <InfoIcon ml={1.5} w=\"10px\" h=\"10px\" />\n    </Tooltip>\n  );\n}\n","import {\n  Badge,\n  Button,\n  Divider,\n  Flex,\n  Input,\n  Modal,\n  ModalBody,\n  ModalCloseButton,\n  ModalContent,\n  ModalFooter,\n  ModalHeader,\n  ModalOverlay,\n  Spinner,\n  Text,\n} from '@chakra-ui/react';\nimport { useEffect, useMemo, useState } from 'react';\nimport { permissionsList } from './AccountPermissions';\nimport { utils } from 'ethers';\nimport { useManagePermissions } from '@snx-v3/useManagePermissions';\nimport { useAccountOwner, useAccountPermissions } from '@snx-v3/useAccountPermissions';\nimport PermissionsInfo from './PermissionsInfo';\n\nexport function PermissionModal({\n  accountId,\n  isOpen,\n  onClose,\n  refetch,\n  existingPermissions,\n  target,\n}: {\n  accountId: string;\n  target?: string;\n  existingPermissions?: string[];\n  isOpen: boolean;\n  onClose: () => void;\n  refetch: () => void;\n}) {\n  const [address, setAddress] = useState(target || '');\n  const [selectedPermissions, setSelectedPermissions] = useState<string[]>([\n    ...(existingPermissions || []),\n  ]);\n  const { mutateAsync: submit, isPending } = useManagePermissions({\n    target: address,\n    accountId,\n    existing: existingPermissions || [],\n    selected: selectedPermissions,\n  });\n\n  const { data: permissionData } = useAccountPermissions(accountId);\n  const { data: accountOwner } = useAccountOwner(accountId);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setSelectedPermissions([...(existingPermissions || [])]);\n    }\n  }, [existingPermissions, isOpen]);\n\n  const isAddressValid = useMemo(() => {\n    return (\n      utils.isAddress(address) &&\n      accountOwner?.toLowerCase() !== address.toLowerCase() &&\n      (!!target || (permissionData && !permissionData[address.toLowerCase()]))\n    );\n  }, [accountOwner, address, permissionData, target]);\n\n  const isFormValid = useMemo(() => {\n    return selectedPermissions.length > 0 && isAddressValid;\n  }, [isAddressValid, selectedPermissions.length]);\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose}>\n      <ModalOverlay />\n      <ModalContent py={2} border=\"1px solid\" rounded=\"base\" borderColor=\"gray.900\" bg=\"navy.700\">\n        <ModalHeader>{target ? 'Edit' : 'New'} Permission</ModalHeader>\n        <ModalCloseButton />\n        <ModalBody>\n          <Divider />\n          <Flex pt={6} flexDir=\"column\" gap=\"5\">\n            {!target && (\n              <>\n                <Text fontWeight={600} fontSize=\"14px\" color=\"white\">\n                  Address\n                </Text>\n                <Input\n                  bg=\"navy.900\"\n                  onChange={(e) => {\n                    setAddress(e.target.value.trim());\n                  }}\n                  value={address}\n                  isInvalid={!isAddressValid && !!address}\n                />\n              </>\n            )}\n            <Text fontWeight={600} color=\"white\" fontSize=\"14px\">\n              Select Permissions <PermissionsInfo />\n            </Text>\n            <Flex justifyContent=\"space-evenly\">\n              {permissionsList.map((permission) => {\n                const isActive = selectedPermissions.includes(permission);\n                return (\n                  <Badge\n                    onClick={() =>\n                      setSelectedPermissions((state) => {\n                        if (state.includes(permission)) {\n                          return state.filter((s) => s !== permission);\n                        }\n                        return [...state, permission];\n                      })\n                    }\n                    variant=\"outline\"\n                    key={permission}\n                    color={isActive ? 'cyan' : 'gray'}\n                    textTransform=\"capitalize\"\n                    cursor=\"pointer\"\n                    bg=\"gray.900\"\n                    colorScheme={isActive ? 'cyan' : 'gray'}\n                  >\n                    {permission}\n                  </Badge>\n                );\n              })}\n            </Flex>\n          </Flex>\n        </ModalBody>\n        <ModalFooter justifyContent=\"center\">\n          {isPending ? (\n            <Spinner color=\"cyan\" />\n          ) : (\n            <Button\n              w=\"100%\"\n              onClick={() => {\n                submit().then(() => {\n                  setAddress('');\n                  setSelectedPermissions([]);\n                  refetch();\n                  onClose();\n                });\n              }}\n              isDisabled={!isFormValid}\n            >\n              {target ? 'Update ' : 'Add new '} permissions\n            </Button>\n          )}\n        </ModalFooter>\n      </ModalContent>\n    </Modal>\n  );\n}\n","import { DeleteIcon, EditIcon } from '@chakra-ui/icons';\nimport { Badge, Td, Tr, Text, Flex, IconButton, useDisclosure } from '@chakra-ui/react';\nimport { FC, useEffect } from 'react';\nimport { useManagePermissions } from '@snx-v3/useManagePermissions';\nimport { Address } from '../Address';\nimport { PermissionModal } from './PermissionModal';\nimport { permissionsList } from './AccountPermissions';\n\ninterface Props {\n  address: string;\n  currentPermissions: Array<string>;\n  accountId: string;\n  refetch: () => void;\n  isOwner: boolean;\n}\n\nexport const PermissionRow: FC<Props> = ({\n  address,\n  currentPermissions,\n  accountId,\n  refetch,\n  isOwner,\n}) => {\n  const {\n    isOpen: isPermissionOpen,\n    onClose: onPermissionClose,\n    onOpen: onPermissionOpen,\n  } = useDisclosure();\n\n  const {\n    mutate: removePermissions,\n    isPending,\n    isSuccess,\n  } = useManagePermissions({\n    accountId,\n    target: address,\n    selected: [],\n    existing: currentPermissions,\n  });\n\n  useEffect(() => {\n    if (isSuccess) {\n      refetch();\n      onPermissionClose();\n    }\n  }, [isSuccess, onPermissionClose, refetch]);\n\n  return (\n    <Tr>\n      <Td width={240} borderBottomColor=\"gray.900\" py=\"4\">\n        <Text fontWeight={400} color=\"white\" fontSize=\"16px\">\n          <Address address={address} />\n        </Text>\n      </Td>\n      <Td borderBottomColor=\"gray.900\">\n        <Flex py={2} flexWrap=\"wrap\" gap={3}>\n          {permissionsList.map((permission) => {\n            const isActive = currentPermissions.includes(permission);\n            return (\n              <Badge\n                color={isActive ? 'cyan' : 'gray'}\n                colorScheme={isActive ? 'cyan' : 'gray'}\n                variant=\"outline\"\n                bg={isActive ? 'cyan.900' : 'gray.900'}\n                size=\"sm\"\n                textTransform=\"capitalize\"\n                key={permission.concat('permission-row')}\n              >\n                {permission}\n              </Badge>\n            );\n          })}\n        </Flex>\n      </Td>\n\n      <Td borderBottomColor=\"gray.900\" textAlign=\"end\">\n        {isOwner && (\n          <>\n            <PermissionModal\n              isOpen={isPermissionOpen}\n              onClose={onPermissionClose}\n              accountId={accountId}\n              refetch={refetch}\n              existingPermissions={currentPermissions}\n              target={address}\n            />\n            <IconButton\n              onClick={onPermissionOpen}\n              size=\"sm\"\n              aria-label=\"edit\"\n              variant=\"outline\"\n              colorScheme=\"gray\"\n              icon={<EditIcon />}\n              mr=\"2\"\n            />\n            <IconButton\n              variant=\"outline\"\n              isLoading={isPending}\n              colorScheme=\"gray\"\n              onClick={() => {\n                removePermissions();\n              }}\n              size=\"sm\"\n              aria-label=\"delete\"\n              icon={<DeleteIcon />}\n            />\n          </>\n        )}\n      </Td>\n    </Tr>\n  );\n};\n","import {\n  Alert,\n  AlertDescription,\n  AlertIcon,\n  Button,\n  Divider,\n  Flex,\n  Input,\n  Modal,\n  ModalBody,\n  ModalCloseButton,\n  ModalContent,\n  ModalFooter,\n  ModalHeader,\n  ModalOverlay,\n  Spinner,\n  Text,\n} from '@chakra-ui/react';\nimport { prettyString } from '@snx-v3/format';\nimport { useTransferAccountId } from '@snx-v3/useTransferAccountId';\nimport { utils } from 'ethers';\nimport { useMemo, useState } from 'react';\n\nexport function TransferOwnershipModal({\n  isOpen,\n  onClose,\n  accountId,\n  refetch,\n  owner,\n}: {\n  isOpen: boolean;\n  onClose: () => void;\n  accountId: string;\n  owner: string;\n  refetch: () => void;\n}) {\n  const [to, setTo] = useState('');\n  const { isPending, mutateAsync: submit } = useTransferAccountId(to, accountId);\n\n  const isTargetValid = useMemo(\n    () => !!utils.isAddress(to) && to.toLowerCase() !== owner.toLowerCase(),\n    [owner, to]\n  );\n  return (\n    <Modal isOpen={isOpen} onClose={onClose}>\n      <ModalOverlay />\n      <ModalContent pb={1} border=\"1px solid\" rounded=\"base\" borderColor=\"gray.900\" bg=\"navy.700\">\n        <ModalHeader>Transfer Ownership</ModalHeader>\n        <ModalCloseButton />\n        <ModalBody>\n          <Divider />\n          <Text fontSize=\"18px\" fontWeight={700} mt=\"4\">\n            Account #{prettyString(accountId, 4, 4)}\n          </Text>\n          <Text fontSize=\"14px\" color=\"white\" mt=\"2\">\n            Will be transfered from:\n          </Text>\n          <Input mt=\"2\" bg=\"navy.900\" disabled value={owner} />\n          <Text fontSize=\"14px\" color=\"white\" mt=\"2\">\n            Will be transfered to:\n          </Text>\n          <Input\n            mt=\"2\"\n            bg=\"navy.900\"\n            onChange={(e) => {\n              setTo(e.target.value.trim());\n            }}\n            value={to}\n          />\n        </ModalBody>\n        <ModalFooter display=\"flex\" flexDirection=\"column\" gap={4} justifyContent=\"center\">\n          <Alert status=\"warning\">\n            <AlertIcon />\n            <Flex direction=\"column\">\n              <AlertDescription>This action cannot be undone</AlertDescription>\n            </Flex>\n          </Alert>\n\n          {isPending ? (\n            <Spinner color=\"cyan\" />\n          ) : (\n            <Button\n              w=\"100%\"\n              onClick={() =>\n                submit().then(() => {\n                  setTo('');\n                  refetch();\n                  onClose();\n                })\n              }\n              isDisabled={!isTargetValid}\n            >\n              Confirm\n            </Button>\n          )}\n        </ModalFooter>\n      </ModalContent>\n    </Modal>\n  );\n}\n","import { useAccountProxy } from '@snx-v3/useAccountProxy';\nimport { useWallet } from '@snx-v3/useBlockchain';\nimport { useMutation } from '@tanstack/react-query';\n\nexport function useTransferAccountId(to: string, accountId: string) {\n  const { data: AccountProxy } = useAccountProxy();\n  const { activeWallet } = useWallet();\n\n  return useMutation({\n    mutationFn: async () => {\n      if (!AccountProxy) throw new Error('CoreProxy or Multicall not defined');\n      if (!activeWallet?.address) throw new Error('Wallet is not connected');\n      const tx = await AccountProxy.transferFrom(activeWallet.address, to, accountId);\n      const response = await tx.wait();\n      return response;\n    },\n  });\n}\n","import { Skeleton, Td, Text, Tr } from '@chakra-ui/react';\nimport { prettyString } from '@snx-v3/format';\nimport { ethers } from 'ethers';\n\nexport function PermissionTableLoading() {\n  const rows = Array.from({ length: 2 }, (_, i) => i);\n  return (\n    <>\n      {rows.map((row) => {\n        return (\n          <Tr borderBottomWidth={row === 1 ? 'none' : '1px'} key={row}>\n            <Td borderBottomColor=\"gray.900\" py=\"4\" width=\"200px\">\n              <Skeleton>\n                <Text fontWeight={400} color=\"white\" fontSize=\"16px\">\n                  {prettyString(ethers.constants.AddressZero)}{' '}\n                </Text>\n              </Skeleton>\n            </Td>\n            <Td borderBottomColor=\"gray.900\" py=\"4\">\n              <Skeleton>-</Skeleton>\n            </Td>\n            <Td borderBottomColor=\"gray.900\" py=\"4\">\n              <Skeleton>-</Skeleton>\n            </Td>\n          </Tr>\n        );\n      })}\n    </>\n  );\n}\n","/* eslint-disable react/no-unescaped-entities */\nimport {\n  Badge,\n  Button,\n  Flex,\n  Heading,\n  Skeleton,\n  Table,\n  TableContainer,\n  Tbody,\n  Td,\n  Text,\n  Th,\n  Thead,\n  Tr,\n  useDisclosure,\n} from '@chakra-ui/react';\nimport { PermissionRow } from './PermissionRow';\nimport { useAccountOwner, useAccountPermissions } from '@snx-v3/useAccountPermissions';\nimport { prettyString } from '@snx-v3/format';\nimport { useWallet } from '@snx-v3/useBlockchain';\nimport { PermissionModal } from './PermissionModal';\nimport { TransferOwnershipModal } from './TransferOwnershipModal';\nimport { PermissionTableLoading } from './PermissionTableLoading';\nimport { useMemo } from 'react';\nimport { Address } from '../Address';\nimport PermissionsInfo from './PermissionsInfo';\n\nexport default function PermissionTable({\n  accountId,\n  refetchAccounts,\n}: {\n  accountId: string;\n  refetchAccounts: () => void;\n}) {\n  const {\n    isOpen: isPermissionOpen,\n    onClose: onPermissionClose,\n    onOpen: onPermissionOpen,\n  } = useDisclosure();\n  const {\n    isOpen: isTransferOpen,\n    onClose: onTransferClose,\n    onOpen: onTransferOpen,\n  } = useDisclosure();\n\n  const { activeWallet } = useWallet();\n  const { data: permissions, isLoading, refetch } = useAccountPermissions(accountId);\n  const {\n    data: accountOwner,\n    isLoading: loadingOwner,\n    refetch: refetchAccountOwner,\n  } = useAccountOwner(accountId);\n\n  const isOwner = useMemo(\n    () => !!(accountOwner && accountOwner?.toLowerCase() === activeWallet?.address.toLowerCase()),\n    [accountOwner, activeWallet?.address]\n  );\n  return (\n    <>\n      <TableContainer\n        flexGrow=\"2\"\n        borderColor=\"gray.900\"\n        borderWidth=\"1px\"\n        borderRadius=\"5px\"\n        p={6}\n        sx={{\n          borderCollapse: 'separate',\n          borderSpacing: 0,\n        }}\n        bg=\"navy.700\"\n      >\n        <Flex mb=\"2\" w=\"100%\" justifyContent=\"space-between\">\n          <Heading size=\"md\" mb=\"1\">\n            Account #{prettyString(accountId, 4, 4)}\n          </Heading>\n          {isOwner && (\n            <Button\n              size=\"xs\"\n              onClick={() => {\n                onPermissionOpen();\n              }}\n            >\n              + New Permission\n            </Button>\n          )}\n        </Flex>\n        <Table variant=\"simple\">\n          <Thead>\n            <Tr>\n              <Th\n                py={5}\n                textTransform=\"unset\"\n                color=\"gray.600\"\n                fontFamily=\"heading\"\n                fontSize=\"12px\"\n                lineHeight=\"16px\"\n                borderBottomColor=\"gray.900\"\n              >\n                Address\n              </Th>\n              <Th\n                py={5}\n                textTransform=\"unset\"\n                color=\"gray.600\"\n                fontFamily=\"heading\"\n                fontSize=\"12px\"\n                lineHeight=\"16px\"\n                borderBottomColor=\"gray.900\"\n              >\n                Permissions\n                <PermissionsInfo />\n              </Th>\n              <Th\n                py={5}\n                textTransform=\"unset\"\n                color=\"gray.600\"\n                fontFamily=\"heading\"\n                fontSize=\"12px\"\n                lineHeight=\"16px\"\n                borderBottomColor=\"gray.900\"\n              ></Th>\n            </Tr>\n          </Thead>\n\n          <Tbody>\n            <Tr>\n              <Td width={240} py={5} borderBottomColor=\"gray.900\">\n                <Skeleton isLoaded={!loadingOwner}>\n                  {accountOwner && (\n                    <Text fontWeight={400} color=\"white\" fontSize=\"16px\">\n                      <Address address={accountOwner} />\n                    </Text>\n                  )}\n                </Skeleton>\n              </Td>\n              <Td py={5} borderBottomColor=\"gray.900\">\n                <Badge\n                  color=\"cyan\"\n                  variant=\"outline\"\n                  bg=\"cyan.900\"\n                  size=\"sm\"\n                  textTransform=\"capitalize\"\n                >\n                  OWNER\n                </Badge>\n              </Td>\n              <Td py={5} borderBottomColor=\"gray.900\" textAlign=\"end\">\n                {isOwner && (\n                  <Button\n                    size=\"xs\"\n                    variant=\"outline\"\n                    colorScheme=\"gray\"\n                    color=\"white\"\n                    onClick={() => {\n                      onTransferOpen();\n                    }}\n                  >\n                    Transfer Ownership\n                  </Button>\n                )}\n              </Td>\n            </Tr>\n\n            {isLoading && <PermissionTableLoading />}\n\n            {!isLoading &&\n              permissions &&\n              Object.keys(permissions)\n                .filter((target) => permissions[target]?.length > 0)\n                .map((target) => (\n                  <PermissionRow\n                    key={target}\n                    address={target}\n                    currentPermissions={permissions[target]}\n                    accountId={accountId}\n                    refetch={refetch}\n                    isOwner={isOwner}\n                  />\n                ))}\n          </Tbody>\n        </Table>\n      </TableContainer>\n\n      <PermissionModal\n        isOpen={isPermissionOpen}\n        onClose={onPermissionClose}\n        accountId={accountId}\n        refetch={refetch}\n      />\n      {accountOwner && (\n        <TransferOwnershipModal\n          isOpen={isTransferOpen}\n          onClose={onTransferClose}\n          accountId={accountId}\n          owner={accountOwner}\n          refetch={() => {\n            refetch();\n            refetchAccountOwner();\n            refetchAccounts();\n          }}\n        />\n      )}\n    </>\n  );\n}\n","export const DelegationIcon = () => {\n  return (\n    <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M29.3662 7.14593C29.8933 6.89158 30.5156 6.97433 30.9627 7.35822L42.9627 17.6613C43.3047 17.9549 43.5024 18.3898 43.5024 18.8485C43.5024 19.3072 43.3047 19.7421 42.9627 20.0358L30.9627 30.3388C30.5156 30.7227 29.8933 30.8054 29.3662 30.5511C28.8391 30.2967 28.5024 29.7512 28.5024 29.1515V25.5455H18.0024C17.174 25.5455 16.5024 24.8536 16.5024 24C16.5024 23.1465 17.174 22.4546 18.0024 22.4546H30.0024C30.8309 22.4546 31.5024 23.1465 31.5024 24V25.8519L39.6594 18.8485L31.5024 11.8451V13.697C31.5024 14.5505 30.8309 15.2424 30.0024 15.2424H18.0024C17.174 15.2424 16.5024 14.5505 16.5024 13.697C16.5024 12.8435 17.174 12.1515 18.0024 12.1515H28.5024V8.54547C28.5024 7.94581 28.8391 7.40028 29.3662 7.14593Z\"\n        fill=\"white\"\n      />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M18.6362 40.8541C18.1092 41.1084 17.4868 41.0257 17.0397 40.6418L5.03972 30.3387C4.69774 30.0451 4.5 29.6102 4.5 29.1515C4.5 28.6928 4.69774 28.2579 5.03972 27.9642L17.0397 17.6612C17.4869 17.2773 18.1092 17.1946 18.6362 17.4489C19.1633 17.7033 19.5 18.2488 19.5 18.8485L19.5 22.4545L30 22.4545C30.8284 22.4545 31.5 23.1464 31.5 24C31.5 24.8535 30.8284 25.5454 30 25.5454L18 25.5454C17.1716 25.5454 16.5 24.8535 16.5 24L16.5 22.1481L8.34308 29.1515L16.5 36.1549L16.5 34.303C16.5 33.4495 17.1716 32.7576 18 32.7576L30 32.7576C30.8284 32.7576 31.5 33.4495 31.5 34.303C31.5 35.1565 30.8284 35.8485 30 35.8485L19.5 35.8485L19.5 39.4545C19.5 40.0542 19.1633 40.5997 18.6362 40.8541Z\"\n        fill=\"white\"\n      />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M9.3584 13.6973C9.3584 12.8438 10.03 12.1519 10.8584 12.1519H12.5727C13.4011 12.1519 14.0727 12.8438 14.0727 13.6973C14.0727 14.5508 13.4011 15.2428 12.5727 15.2428H10.8584C10.03 15.2428 9.3584 14.5508 9.3584 13.6973Z\"\n        fill=\"white\"\n      />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M38.644 34.3027C38.644 35.1562 37.9725 35.8481 37.144 35.8481L35.4298 35.8481C34.6013 35.8481 33.9298 35.1562 33.9298 34.3027C33.9298 33.4492 34.6013 32.7572 35.4298 32.7572L37.144 32.7572C37.9725 32.7572 38.644 33.4492 38.644 34.3027Z\"\n        fill=\"white\"\n      />\n    </svg>\n  );\n};\n","import { Button, Flex, Heading, Link, Text } from '@chakra-ui/react';\nimport { useAccounts } from '@snx-v3/useAccounts';\nimport PermissionTable from './PermissionTable';\nimport { DelegationIcon } from './DelegationIcon';\n\nexport default function Permissions() {\n  const { data: accounts, refetch: refetchAccounts } = useAccounts();\n\n  return (\n    <Flex flexDir=\"column\" gap=\"7\">\n      <Flex flexDir=\"column\" gap={7}>\n        {accounts?.map((account) => (\n          <PermissionTable key={account} accountId={account} refetchAccounts={refetchAccounts} />\n        ))}\n      </Flex>\n      <Flex\n        flexGrow=\"1\"\n        h=\"fit-content\"\n        border=\"1px solid\"\n        borderColor=\"gray.900\"\n        rounded=\"base\"\n        flexDir=\"column\"\n        width=\"100%\"\n        p=\"6\"\n        bg=\"navy.700\"\n      >\n        <DelegationIcon />\n        <Heading fontSize=\"14px\" mt=\"6\">\n          Delegate Permissions\n        </Heading>\n        <Text color=\"gray.500\" fontSize=\"12px\" mb=\"6\">\n          Delegation enables a wallet to execute functions on behalf of another wallet/account:\n          delegate, borrow, withdraw, claim, but not transfer. Manage addresses and their powers\n          below.\n        </Text>\n        <Link\n          href=\"https://docs.synthetix.io/v/synthetix-v3-user-documentation/protocol-design/vaults#account-permissions\"\n          rel=\"noopener\"\n          target=\"_blank\"\n        >\n          <Button variant=\"outline\" color=\"white\" colorScheme=\"gray\" size=\"xs\">\n            Learn More\n          </Button>\n        </Link>\n      </Flex>\n    </Flex>\n  );\n}\n","import { Helmet } from 'react-helmet';\nimport { Flex, Heading } from '@chakra-ui/react';\nimport Permissions from '../../components/Permissions/Permissions';\nimport { useIsConnected } from '@snx-v3/useBlockchain';\nimport { useNavigate } from 'react-router-dom';\nimport { useEffect } from 'react';\nimport { useAccounts } from '@snx-v3/useAccounts';\n\nexport function Settings() {\n  const navigate = useNavigate();\n  const isConnected = useIsConnected();\n  const {\n    data: accounts,\n    isLoading: isAccountsLoading,\n    isFetching: isAccountsFetching,\n  } = useAccounts();\n\n  useEffect(() => {\n    if (!isConnected) {\n      navigate('/');\n    }\n  }, [isConnected, navigate]);\n\n  useEffect(() => {\n    if (!isAccountsLoading && !isAccountsFetching && !accounts?.length) {\n      navigate('/');\n    }\n  }, [accounts?.length, isAccountsFetching, isAccountsLoading, isConnected, navigate]);\n\n  return (\n    <>\n      <Helmet>\n        <title>Account Settings</title>\n        <meta name=\"description\" content=\"Account Settings\" />\n      </Helmet>\n      <Flex flexDir=\"column\" mb={16}>\n        <Heading\n          mt={{\n            base: 2,\n            sm: 8,\n          }}\n          mb={6}\n          color=\"gray.50\"\n          fontSize=\"1.5rem\"\n          data-cy=\"liquidity-dashboard\"\n        >\n          Account Settings\n        </Heading>\n        <Permissions />\n      </Flex>\n    </>\n  );\n}\n","import { Suspense } from 'react';\nimport { Route, Routes } from 'react-router-dom';\nimport { Spinner } from '@chakra-ui/react';\nimport { DefaultLayout } from './layouts/Default';\nimport { Home, Manage, NotFoundPage, Dashboard, Pool, Pools } from './pages';\nimport { Settings } from './pages/Account/Settings';\n\nexport const Router = () => {\n  return (\n    <Suspense fallback={<Spinner />}>\n      <Routes>\n        <Route element={<DefaultLayout />}>\n          <Route path=\"/account/settings\" element={<Settings />} />\n          <Route path=\"/positions/:collateralSymbol/:poolId\" element={<Manage />} />\n          <Route path=\"/pools\" element={<Pools />} />\n          <Route path=\"/pools/:networkId/:poolId\" element={<Pool />} />\n          <Route path=\"/dashboard\" element={<Dashboard />} />\n          <Route path=\"/\" element={<Home />} />\n          <Route path=\"*\" element={<NotFoundPage />} />\n        </Route>\n      </Routes>\n    </Suspense>\n  );\n};\n","import { NETWORKS, appMetadata } from '@snx-v3/useBlockchain';\nimport injectedModule, { ProviderLabel } from '@web3-onboard/injected-wallets';\nimport trezorModule from '@web3-onboard/trezor';\nimport ledgerModule from '@web3-onboard/ledger';\nimport walletConnectModule from '@web3-onboard/walletconnect';\n// import gnosisModule from '@web3-onboard/gnosis';\nimport coinbaseModule from '@web3-onboard/coinbase';\nimport { init } from '@web3-onboard/react';\nimport type { ChainWithDecimalId } from '@web3-onboard/common';\n\n// Filter networks to only supported ones\nexport const chains: ChainWithDecimalId[] = Object.values(\n  NETWORKS.reduce((result, network) => {\n    if (!network.isSupported) {\n      return result;\n    }\n    if (network.id in result) {\n      // We cannot have duplicate chains, but we can have multiple deployments per chain\n      return result;\n    }\n    return Object.assign(result, {\n      [network.id]: {\n        id: network.id,\n        token: network.token,\n        label: network.label,\n        rpcUrl: network.rpcUrl(),\n      },\n    });\n  }, {})\n);\n\nexport const onboard = init({\n  wallets: [\n    coinbaseModule(),\n    injectedModule({ displayUnavailable: [ProviderLabel.MetaMask, ProviderLabel.Trust] }),\n    trezorModule({\n      appUrl: 'https://liquidity.synthetix.eth.limo',\n      email: 'info@synthetix.io',\n    }),\n    ledgerModule({\n      projectId: 'd6eac005846a1c3be1f8eea3a294eed9',\n      walletConnectVersion: 2,\n    }),\n    walletConnectModule({\n      version: 2,\n      projectId: 'd6eac005846a1c3be1f8eea3a294eed9',\n      dappUrl: 'liquidity.synthetix.eth.limo',\n    }),\n    // gnosisModule(),\n  ],\n  chains,\n  appMetadata: {\n    ...appMetadata,\n    name: 'Synthetix Liquidity',\n  },\n  accountCenter: {\n    desktop: {\n      enabled: false,\n    },\n    mobile: {\n      enabled: false,\n    },\n  },\n  notify: {\n    enabled: false,\n  },\n});\n","import { useEffect } from 'react';\nimport { HashRouter } from 'react-router-dom';\nimport { ChakraProvider, useColorMode } from '@chakra-ui/react';\nimport { Fonts, theme } from '@synthetixio/v3-theme';\nimport { DEFAULT_QUERY_STALE_TIME } from '@snx-v3/constants';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { ReactQueryDevtools } from '@tanstack/react-query-devtools';\nimport { GasSpeedProvider } from '@snx-v3/useGasSpeed';\nimport { TermsModal } from '@snx-v3/TermsModal';\nimport { SESSION_STORAGE_KEYS } from '@snx-v3/constants';\nimport { Router } from './Router';\nimport { Web3OnboardProvider } from '@web3-onboard/react';\nimport { onboard } from './utils/onboard';\n\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      refetchInterval: false, //  if queries needs refetching we should be explicit about it, given erc7412\n      staleTime: DEFAULT_QUERY_STALE_TIME,\n      refetchOnWindowFocus: false,\n      throwOnError: (e) => {\n        console.error(e);\n        return false;\n      },\n    },\n    mutations: {\n      throwOnError: (e) => {\n        console.error(e);\n        return false;\n      },\n    },\n  },\n});\n\nfunction ColorMode() {\n  const { colorMode, toggleColorMode } = useColorMode();\n\n  useEffect(() => {\n    if (colorMode === 'light') {\n      toggleColorMode();\n    }\n  }, [colorMode, toggleColorMode]);\n  return null;\n}\n\nexport const App = () => {\n  const TERMS_CONDITIONS_ACCEPTED =\n    sessionStorage.getItem(SESSION_STORAGE_KEYS.TERMS_CONDITIONS_ACCEPTED) === 'true';\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      <Web3OnboardProvider web3Onboard={onboard}>\n        <ChakraProvider theme={theme}>\n          <ColorMode />\n          <Fonts />\n          <GasSpeedProvider>\n            <HashRouter>\n              <TermsModal defaultOpen={!TERMS_CONDITIONS_ACCEPTED} />\n              <Router />\n            </HashRouter>\n          </GasSpeedProvider>\n          <ReactQueryDevtools />\n        </ChakraProvider>\n      </Web3OnboardProvider>\n    </QueryClientProvider>\n  );\n};\n","import ReactDOM from 'react-dom/client';\nimport { App } from './App';\n\nconst container = document.querySelector('#app');\n\nexport async function bootstrap() {\n  if (!container) {\n    throw new Error('Container #app does not exist');\n  }\n\n  if (process.env.NODE_ENV === 'development') {\n    const { Wei, wei } = await import('@synthetixio/wei');\n    const { ethers } = await import('ethers');\n    // @ts-ignore\n    window.devtoolsFormatters = window.devtoolsFormatters ?? [];\n    // @ts-ignore\n    window.devtoolsFormatters.push({\n      header: function (obj: any) {\n        if (obj instanceof ethers.BigNumber) {\n          return [\n            'div',\n            { style: 'color: #f33' },\n            ['span', {}, 'ethers.BigNumber('],\n            ['span', { style: 'color: #3f3' }, wei(obj).toString()],\n            ['span', {}, ')'],\n          ];\n        }\n        if (obj instanceof Wei) {\n          return [\n            'div',\n            { style: 'color: #f33' },\n            ['span', {}, 'Wei('],\n            ['span', { style: 'color: #3f3' }, obj.toString()],\n            ['span', {}, ')'],\n          ];\n        }\n        return null;\n      },\n      hasBody: function () {\n        return false;\n      },\n    });\n  }\n\n  const root = ReactDOM.createRoot(container);\n  root.render(<App />);\n}\n","const { safeLazy } = require('./safeLazy');\nconst { safeImport } = require('./safeImport');\nmodule.exports = {\n  safeLazy,\n  safeImport,\n};\n","const { lazy } = require('react');\nconst { safeImport } = require('./safeImport');\n\nfunction safeLazy(importer) {\n  return lazy(() => safeImport(importer));\n}\n\nmodule.exports = {\n  safeLazy,\n};\n"],"names":["async","importCoreProxy","chainId","preset","Error","deployment","Number","toFixed","default","meta","abi","Promise","all","address","contracts","CoreProxy","importMulticall3","mainnet","multicall3","sepolia","optimism","TrustedMulticallForwarder","Amount","value","prefix","suffix","testid","showTooltip","formattedValue","preciseValue","isMaxUint","useMemo","currency","cleanNumber","wei","replaceAll","constants","lte","eq","toString","_jsx","Tooltip","label","_Fragment","children","_jsxs","isDisabled","props","ChakraTooltip","hasArrow","bg","p","borderRadius","SUSDCIcon","width","height","Icon","viewBox","fill","clipPath","d","id","Logo","color","withText","EthereumIcon","fillOpacity","SNXIcon","OptimismIcon","DollarCircle","fillRule","clipRule","BitcoinIcon","ArbitrumIcon","cx","cy","r","CollateralIcon","symbol","UnknownIcon","stroke","ChevronDown","ChevronUp","FailedIcon","w","h","filter","x","y","filterUnits","colorInterpolationFilters","floodOpacity","result","in","type","values","stdDeviation","mode","in2","WalletIcon","LogoIcon","BorrowIcon","xmlns","BaseIcon","DiscordIcon","XIcon","transform","GithubIcon","WarpcastIcon","YoutubeIcon","ManagePositionContext","createContext","collateralChange","debtChange","setDebtChange","setCollateralChange","ManagePositionProvider","useState","Provider","GWEI_DECIMALS","GAS_LIMIT_MULTIPLIER","DEFAULT_QUERY_STALE_TIME","INFURA_KEY","getSubgraphUrl","networkName","SESSION_STORAGE_KEYS","TERMS_CONDITIONS_ACCEPTED","offchainMainnetEndpoint","offchainTestnetEndpoint","fetchPriceUpdates","requestedPriceUpdates","isTestnet","length","priceService","EvmPriceServiceConnection","getPriceFeedsUpdateData","map","priceFeedId","signedOffchainData","i","stalenessTolerance","ethers","encode","toBN","priceUpdatesToPopulatedTx","from","oracleAddresses","signedOffchainDatum","to","data","encodeFunctionData","BigNumber","parseUnits","decimals","prettyString","text","startLength","endLength","substring","options","minimumDigitsToShowAfterZeros","stringValue","numberValue","toNumber","Math","floor","maximumFractionDigits","log10","isNaN","toLocaleString","minimumFractionDigits","error","isBaseAndromeda","getRepayerContract","USDC_BASE_MARKET","notNil","initialState","modalOpen","txnStatus","txnHash","reducer","state","action","payload","importOracleManagerProxy","OracleManagerProxy","NodeSchema","z","object","nodeType","number","parameters","string","parents","array","PythParametersSchema","ZodBigNumber","useAllCollateralPriceIds","customNetwork","network","useNetwork","targetNetwork","Multicall3","useMulticall3","OracleProxy","providerForChain","useProviderForChain","provider","useProvider","signer","useSigner","signerOrProvider","withSigner","Boolean","useQuery","queryKey","queryFn","Contract","enabled","staleTime","Infinity","useOracleManagerProxy","useCoreProxy","deploymentsWithERC7412","includes","configs","getCollateralConfigurations","loadConfigs","calls","oracleNodeId","target","callData","interface","returnData","callStatic","aggregate","decoded","bytes","nodeResp","decodeFunctionResult","parse","decode","parametersDecoded","console","seen","Set","item","has","add","AllowanceSchema","approveAbi","useApprove","contractAddress","amount","spender","eventHandlers","txnState","dispatch","useReducer","allowance","refetch","refetchAllowance","useAllowance","activeWallet","useWallet","accountAddress","contract","sufficientAllowance","gte","gasSpeed","useGasSpeed","mutation","useMutation","mutationFn","amountToAppove","infiniteApproval","gasPricesPromised","getGasPrice","gasLimitPromised","estimateGas","approve","populatedTxnPromised","populateTransaction","gasLimit","gasPrices","populatedTxn","gasOptionsForTransaction","formatGasPriceForTransaction","txn","sendTransaction","hash","wait","isLoading","isPending","mutateAsync","requireApproval","useApr","chain","fetchApr","networkId","response","fetch","json","combinedApr","aprCombined","cumulativePnl","NetworkIcon","size","NETWORKS","hexId","token","name","rpcUrl","DEFAULT_INFURA_KEY","isSupported","publicRpcUrl","appMetadata","find","window","localStorage","getItem","icon","logo","description","recommendedInjectedWallets","url","gettingStartedGuide","explore","undefined","useDefaultProvider","wallet","conn","disconn","useConnectWallet","connect","useCallback","disconnect","walletsInfo","accounts","connectedChain","setChain","useSetChain","n","setNetwork","newNetwork","useIsConnected","getSigner","DEBT_REPAYER_ABI","inputs","internalType","outputs","stateMutability","useClearDebt","accountId","poolId","collateralTypeAddress","availableUSDCollateral","debt","SpotMarketProxy","useSpotMarketProxy","collateralPriceIds","priceUpdateTx","useCollateralPriceUpdates","repayer","depositDebtToRepay","burn","burnUsd","mul","div","callsPromise","unshift","erc7412Tx","withERC7412","settle","exec","importExtras","extras","importPythERC7412Wrapper","PythERC7412Wrapper","getPythFeedIds","Object","entries","key","startsWith","endsWith","String","_key","getPriceUpdates","priceIds","erc7412Interface","ERC7412_ABI","useAllCollateralPriceUpdates","pythFeedIds","tx","refetchInterval","useOfflinePrices","collaterals","collateral","join","price","pythIds","collateralList","queries","networksOffline","extra","_value","flat","deduped","Array","replace","toUpperCase","priceId","getPythFeedIdsFromCollateralList","prices","getLatestPriceFeeds","forEach","index","getPriceUnchecked","push","expo","multicallAddress","multiCallAbi","multicallInterface","pythInterface","txs","requireSuccess","getPricesTx","call","decodedMultiCall","outdatedPriceIds","success","CollateralConfigurationSchema","depositingEnabled","boolean","issuanceRatioD18","liquidationRatioD18","liquidationRewardD18","tokenAddress","minDelegationD18","SymbolSchema","extend","displaySymbol","ERC20Interface","utils","loadCollateralTypes","tokenConfigs","symbols","tokenConfig","loadSymbols","names","loadName","loadDecimals","config","useCollateralTypes","includeDelegationOff","collateralTypes","collateralType","lt","placeholderData","useCollateralType","collateralSymbol","isFetching","isCollateralTypesFetching","toLowerCase","getCollateralType","BalanceSchema","useEthBalance","connectedProvider","getBalance","GAS_LIMIT_BUFFER","addGasLimitBuffer","gasPrice","baseFeePerGas","_baseFeePerGas","gasPriceToReturn","isNumber","subject","ema","dma","alpha","noHead","slice","noArrayWeight","isArray","ret","datum","s","o","rewardsFilterOutliers","blocksRewards","outlierBlocks","rewardIndex","_","reward","feeSuggestion","fromBlock","defaultForLocalProvider","maxFeePerGas","maxPriorityFeePerGas","average","fast","fastest","feeHistory","send","then","feeHistoryResponse","num","at","getOutlierBlocksToRemove","blocks","gweiReward","gt","blocksRewardsPerc15","blocksRewardsPerc30","blocksRewardsPerc45","emaPerc15","emaPerc30","emaPerc45","averageMaxPriorityFee","min","fastMaxPriorityFee","fastestMaxPriorityFee","baseFeeToMax","base","prio","getBlock","e","getGasPriceFromProvider","useGasPrice","GasSpeedContext","setGasSpeed","GasSpeedProvider","useContext","useGetUSDTokens","isBase","SpotMarket","USDProxy","getUsdToken","USDC","getWrapper","wrapCollateralType","snxUSD","sUSD","cleanObject","params","cleaned","fromEntries","useParams","pathParams","useParamsRouter","queryParams","useSearchParams","sortObject","searchParams","sort","a","b","localeCompare","PoolIdSchema","PoolSchema","isPreferred","PoolsSchema","usePools","prefferedPoolId","approvedPoolIds","getPreferredPool","getApprovedPools","incompletePools","concat","poolNames","getPoolName","poolsRaw","usePool","usePoolsList","pools","aprs","toros","fetchPoolsList","fetchAprs","fetchTorosPool","synthetixPools","apr","poolInfo","pool","supportedNetworks","method","headers","body","JSON","stringify","query","variables","tvl","compactInteger","fund","totalValue","apy","monthly","urls","PoolsListData","res","vaults","importSpotMarketProxy","useTokenBalance","assertAddressType","fetchTokenBalance","useTokenBalances","addresses","walletAddress","balanceOf","useUSDProxy","importUSDProxy","importAllErrors","cache","parseTxError","cause","err","PYTH_ERRORS","fetchOffchainData","func","oracleQuery","logLabel","OracleQuerySchema","tuple","updateType","log","cacheDuration","args","bypassCache","funcArgs","cacheKey","currentTime","Date","now","cacheItem","timestamp","withMemoryCache","makeMulticall","senderAddr","encodedData","allowFailure","makeCoreProxyMulticall","coreProxyAddress","coreProxyAbi","parseError","errorData","transaction","newError","content","reason","AllErrors","AllErrorsInterface","getDefaultFromAddress","chainName","initialMulticallLength","multicallCalls","some","jsonRpcProvider","isRead","initialCall","multicallTxn","parsedError","oracleAddress","ignoreCache","signedRequiredData","newTransactionRequest","splice","errorResult","viem","errorName","_error","requiredFee","txToUpdate","erc7412Call","txRequests","multicallAbi","reqs","txRequest","newCall","custom","val","isBigNumber","SmallIntSchema","WeiSchema","gradients","grey","dark","orange","Button","defaultProps","colorScheme","variants","solid","defineStyle","c","_hover","_disabled","_active","bgGradient","background","hoverBg","activeBg","outline","borderColor","border","ghost","theme","extendTheme","useSystemColorMode","initialColorMode","colors","gray","red","yellow","green","blue","cyan","purple","pink","navy","warning","shadows","fonts","heading","display","mono","components","Popover","responsive","popper","maxWidth","Input","focusBorderColor","errorBorderColor","Select","iconColor","NumberInput","Alert","variant","container","borderInlineStartColor","Textarea","Skeleton","startColor","endColor","Checkbox","baseStyle","control","_checked","_invalid","Radio","Badge","subtle","percent","fontFamily","py","px","borderWidth","textAlign","userSelect","Tag","Accordion","Progress","filledTrack","track","Tabs","tab","_selected","Switch","Spinner","Menu","parts","button","span","alignItems","list","mt","bgColor","padding","_first","borderTopLeftRadius","borderTopRightRadius","_last","borderBottomLeftRadius","borderBottomRightRadius","_focus","textStyles","fontSize","lg","lineHeight","fontWeight","md","sizes","max","full","xs","sm","xl","styles","global","Fonts","Global","TermsModal","defaultOpen","isOpen","setOpen","setEnabled","Modal","onClose","ModalOverlay","ModalContent","pt","pb","ModalHeader","ModalBody","Text","Box","onScroll","currentTarget","scrollTop","scrollHeight","offsetHeight","as","my","overflow","overflowX","sx","backgroundColor","UnorderedList","ListItem","Link","href","_focusVisible","ReactRouterLink","mx","onClick","onSubmit","sessionStorage","setItem","set","useLocalStorage","initialValue","storedValue","setStoredValue","get","valueToStore","Function","LOCAL_STORAGE_KEYS","SHOW_TESTNETS","ZEROWEI","Wei","ONEWEI","useAccountProxy","AccountProxy","importAccountProxy","useAccounts","numberOfAccountTokens","accountIndexes","keys","tokenOfOwnerByIndex","useCreateAccount","client","useQueryClient","getTransactionCost","gasUnits","coins","newAccountId","invalidateQueries","logs","topics","getEventTopic","decodeEventLog","mainnets","testnets","NetworkController","toolTipLabel","setTooltipLabel","activeNetwork","isAccountsLoading","isAccountsFetching","showTestnets","setShowTestnets","navigate","useNavigate","pathname","useLocation","useEffect","search","defaultWallet","autoSelect","disableModals","lastUsedAccount","account","notConnected","notSupported","Flex","MenuButton","mr","MenuList","MenuItem","ml","Divider","MenuOptionGroup","justifyContent","isChecked","onChange","placement","whiteSpace","ens","rounded","opacity","flexDir","gap","stopPropagation","removeItem","closeOnClick","CopyIcon","navigator","clipboard","writeText","setTimeout","IconButton","SettingsIcon","cursor","mutate","leftIcon","stringToHash","split","reduce","charCodeAt","getTokensInfo","Interface","flatMap","batchId","useTokenInfo","loadAccountCollateral","tokenAddresses","callsP","getAccountAvailableCollateral","getAccountCollateral","decoder","multicallEncoded","availableCollateral","totalAssigned","totalDeposited","totalLocked","useAccountCollateral","USDTokens","stablecoinInfo","stablecoin","allCalls","assign","PriceSchema","loadPrices","collateralAddresses","getCollateralPrice","encoded","pricesEncoded","useCollateralPrices","collateralData","usdTokens","offlineProvider","pos","indexOf","acc","TokenIcon","Image","src","fallbackSrc","alt","style","formatNumberToUsd","optionsWithDefault","locales","Intl","NumberFormat","format","formatNumber","formatPercent","AssetsRow","walletBalance","walletBalance$","accountBalance","accountBalance$","delegatedBalance","delegatedBalance$","unlockDate","final","onOpen","useDisclosure","minutes","hours","isRunning","useTimer","expiryTimestamp","autoStart","getTime","Tr","borderBottomWidth","Td","Fade","flexDirection","NavLink","generatePath","location","WithdrawModal","AssetTableHeader","Thead","Th","textTransform","InfoIcon","AssetsTable","assets","TableContainer","maxW","borderCollapse","borderSpacing","Heading","AssetsEmpty","Table","Tbody","borderTop","borderTopColor","AssetRowLoading","asset","balance","pl","SynthSkeleton","SynthCircle","SkeletonCircle","mb","disabled","calculateAssets","accountCollaterals","associatedUserBalances","collateralPrices","USDCAddress","filteredAccountCollaterals","AssetsList","isAccountCollateralsLoading","userTokenBalances","tokenBalancesIsLoading","isCollateralPricesLoading","isCollateralTypesLoading","accountCollateralUnlockDate","isAccountCollateralDateLoading","lastInteraction","accountTimeoutWithdraw","getAccountLastInteraction","getConfigUint","collateralUnlock","useAccountCollateralUnlockDate","combinedCollateral","cur","prev","CollateralAlert","tokenBalance","borderLeftColor","AlertIcon","textDecor","BorderBox","etherscanLink","isTx","RewardsModal","setIsOpen","minWidth","boxShadow","CloseIcon","CheckIcon","CircularProgress","isIndeterminate","truncateAddress","first","last","RewardsRow","frequency","claimableAmount","lifetimeClaimed","hasClaimed","readOnly","total","collateralAddress","distributorAddress","claimRewards","claimedAmount","useClaimRewards","frequencyString","seconds","convertToReadableInterval","link","backgroundImage","RewardsLoading","borderBottom","pr","Rewards","rewards","hasRewards","letterSpacing","duration","StatBox","title","flex","isLoaded","PositionCollateralSchema","optional","DebtSchema","loadPosition","getPositionCollateral","getPositionDebt","decodedCollateral","decodedDebt","useLiquidityPosition","collateralPriceUpdates","UsdProxy","priceUpdateTxHash","React","priceCalls","priceDecoder","positionCalls","positionDecoder","accountCollateralCalls","accountCollateralDecoder","signedData","endOfPrice","startOfPosition","endOfPosition","startOfAccountCollateral","collateralPrice","decodedPosition","accountCollateral","usdCollateral","collateralAmount","collateralValue","calculateCRatio","keyBy","useLiquidityPositions","collateralPriceUpdatesIsLoading","tokens","collateralPriceUpdatesLength","positionCallsAndData","poolName","singlePositionDecoder","pricesByAddress","cRatio","StatsList","aprIsLoading","positions","isLiquidityPositionLoading","calculateDebt","totalAssets","assigned","calculateTotalAssetsAvailable","totalDelegated","calculateTotalAssetsDelegated","flexWrap","PositionRow","stablecoinSymbol","liquidityPosition","borrow","useGetBorrow","parsedCRatio","parseFloat","position","net_issuance","PositionsRowLoading","rows","row","PositionsTable","PositionTableHeader","TableDivider","PositionsEmpty","PositionsNotConnected","useStablecoin","PositionsList","positionsByKey","isLiquidityPositionsLoading","isStablecoinLoading","positionsIds","calculatePositions","parsedPositions","Balance","useWithdraw","getAddress","withdraw","collateralPriceCallsPromise","collateralPriceCalls","useWithdrawBaseAndromeda","sUSDCCollateral","snxUSDCollateral","amountToWithdraw","SpotProxy","sUSDCAmount","snxUSDAmount","sub","withdraw_sUSDC","withdraw_snxUSD","snxUSDApproval","buy_sUSDC","buy","unwrapTxnPromised","unwrap","withdraw_sUSDC_Txn","withdraw_snxUSD_Txn","snxUSDCApproval_Txn","buy_sUSDC_Txn","unwrapTxn","setAmount","selectedCollateralType","setSelectedCollateralType","queryClient","activeCollateral","withdrawMain","withdrawAndromeda","isLoadingAndromeda","clear","collateralTypesHydated","collateralTypeDisplayName","isCentered","placeholder","document","getElementById","VaultCollateralSchema","VaultDebtSchema","importRewardDistributor","RewardsResponseSchema","instanceof","erc20Abi","useRewards","distributors","ifaceRD","ifaceERC20","distributorReturnData","historicalData","distributor","distributorResult","rewards_distributions","distributorName","distributorPayoutToken","distributorCollateralType","parseInt","rewardsClaimeds","distribution_duration","created_at","expiry","filteredDistributors","ercReturnData","balances","sortedBalances","GraphBigIntSchema","GraphBigDecimalSchema","calculateMarketPnl","netIssuance","reportedDebt","MarketSnapshotByWeekSchema","usd_deposited","usd_withdrawn","reported_debt","updated_at","updates_in_period","market","pnl","MarketSchema","market_snapshots_by_week","MarketConfigurationSchema","weight","max_debt_share_value","RewardDistributorSchema","total_distributed","union","null","total_weight","configurations","registered_distributors","PoolDataResultSchema","PoolsDataDocument","usePoolData","poolData","errors","message","getPoolData","sevenDays","setDate","getDate","sevenWeeks","sevenMonth","oneYear","NUMBER_REGEX","cleanupNumber","float","InputProps","dataTestId","inputValue","setInputValue","onInputChange","test","nextValue","_err","ref","useRef","current","setCustomValidity","autoFocus","_placeholder","validatePosition","targetCRatio","newDebt","newCollateralAmount","newCollateralValue","newCRatio","maybeMaxDebt","maxDebt","isValid","hasChanges","BorrowUi","flexGrow","isRequired","Borrow","PercentBadges","onBadgePress","activeBadge","DepositUi","ethBalance","snxBalance","setActiveBadge","combinedTokenBalance","transferable","maxAmount","badgeNum","Deposit","transferrableSnx","snxCollateral","snxAddress","transferableSynthetix","useTransferableSynthetix","RepayModal","lazy","safeImport","BorrowModal","DepositModal","UndelegateModal","ManageActionSchema","enum","ActionButton","activeAction","ManageActionUi","setActiveAction","manageAction","ArrowDownIcon","ArrowUpIcon","direction","Repay","Undelegate","ManageAction","txnModalOpen","setTxnModalOpen","parsedActionParam","safeParse","parsedAction","isFormValid","preventDefault","reportValidity","URLSearchParams","Suspense","fallback","currentCollateral","ChangeStat","formatFn","newValue","withColor","ArrowForwardIcon","ManageStatsUi","newCratio","aprData","ManageStats","RepayUi","currentDebt","snxUSDBalance","totalUsdBalance","abs","neg","debtExists","flooredBalance","RepayAllDebt","sufficientBalance","execRepay","settleRepay","approvalLoading","submit","maxDebtShareValue","isLocked","PoolConfigurationSchema","markets","isAnyMarketLocked","isLockedSchema","UndelegateUi","minDelegation","isLoadingRequiredData","onMaxClick","leftoverCollateral","isValidLeftover","Collapse","animateOpacity","status","AlertTitle","AlertDescription","poolConfiguration","getPoolConfiguration","marketId","maxDebtShareValueD18","weightD18","m","isMarketCapacityLocked","usePoolConfiguration","minCollateralRequired","maxWithdrawable","maxUndelegate","AccountBanner","createAccount","isCreateAccountLoading","PoolCard","currentNetwork","vaultTVL","total_amount_deposited","sanitizedCollateralTypes","oracle_node_id","ChainFilter","activeChains","isAllActive","isActive","toggle","supportedCollateralTypes","CollateralFilter","TorosPoolCard","open","textDecoration","rel","LinkOffIcon","TorosIcon","PoolCardsLoading","PoolsList","poolsReducer","showToros","info","collateral_type","CollateralSectionUi","vaultsData","isAprLoading","totalCollateral","totalDebt","zeroValues","calculateVaultTotals","vaultCollateral","formatEther","flexBasis","CollateralSection","useVaultsData","collateralCallsP","getVaultCollateral","debtCallsP","getVaultDebt","collateralPriceUpdateCallsP","multicallResult","collateralResult","debtResult","debtBytes","oracleId","PoolHeader","MarketNamesSchema","marketInterface","StyledTh","paddingBottom","paddingTop","paddingLeft","paddingRight","StyledTd","isLastItem","borderBottomColor","LoadingRow","MarketSectionUi","marketNamesById","colSpan","MarketSection","marketIdsAndAddresses","useMarketNamesById","MultiCall3","select","marketNames","marketName","Header","Container","RouterLink","_activeLink","Footer","DefaultLayout","minHeight","Outlet","NotFoundPage","t","useTranslation","Head","Dashboard","Helmet","Home","HomeLink","ArrowBackIcon","WithdrawIncrease","ManageUi","collateralDisplayName","useCollateralDisplayName","minW","Manage","collateralSymbolRaw","useNormalisedCollateralSymbol","isCollateralLoading","isPoolGraphDataLoading","isRewardsLoading","rewardsData","Pool","isPoolLoading","registeredDistributors","self","findIndex","Pools","useManagePermissions","existing","selected","multicall","grants","revokes","getPermissionDiff","permission","grantCalls","revokeCalls","aggregate3","Address","ExternalLinkIcon","permissionsList","useAccountPermissions","getAccountPermissions","user","permissions","useAccountOwner","ownerOf","PermissionsInfo","PermissionModal","existingPermissions","setAddress","selectedPermissions","setSelectedPermissions","permissionData","accountOwner","isAddressValid","ModalCloseButton","trim","isInvalid","ModalFooter","PermissionRow","currentPermissions","isOwner","isPermissionOpen","onPermissionClose","onPermissionOpen","removePermissions","isSuccess","EditIcon","DeleteIcon","TransferOwnershipModal","owner","setTo","transferFrom","useTransferAccountId","isTargetValid","PermissionTableLoading","PermissionTable","refetchAccounts","isTransferOpen","onTransferClose","onTransferOpen","loadingOwner","refetchAccountOwner","DelegationIcon","Permissions","Settings","isConnected","Router","Routes","Route","element","path","chains","onboard","init","wallets","coinbaseModule","injectedModule","displayUnavailable","ProviderLabel","MetaMask","Trust","trezorModule","appUrl","email","ledgerModule","projectId","walletConnectVersion","walletConnectModule","version","dappUrl","accountCenter","desktop","mobile","notify","QueryClient","defaultOptions","refetchOnWindowFocus","throwOnError","mutations","ColorMode","colorMode","toggleColorMode","useColorMode","App","QueryClientProvider","Web3OnboardProvider","web3Onboard","ChakraProvider","HashRouter","ReactQueryDevtools","querySelector","bootstrap","ReactDOM","render","safeLazy","module","exports","importer"],"sourceRoot":""}