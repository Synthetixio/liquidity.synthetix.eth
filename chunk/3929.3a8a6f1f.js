"use strict";(globalThis.webpackChunk_snx_v3_liquidity=globalThis.webpackChunk_snx_v3_liquidity||[]).push([[3929],{63929:(e,t,s)=>{s.r(t),s.d(t,{BorrowModal:()=>_,BorrowModalUi:()=>O,default:()=>I});var r=s(11082),n=s(59176),o=s(74008),i=s(84626),a=s(70065),l=s(38035),c=s(56317),d=s(45071),u=s(25042),x=s(2784),h=s(89536),p=s(13797),b=s(64996),g=s(40109),y=s(97721),j=s(99581),w=s(28145),C=s(76885),m=s(86689),f=s(77528),k=s(75429),v=s(21849),D=s(73635),B=s(88383),S=s(52322);const O=({onClose:e,isOpen:t,debtChange:s,txnStatus:a,execBorrow:l})=>{const{network:c}=(0,C.LN)(),x=(0,f.Yz)(c?.id,c?.preset),{data:h}=(0,D.p)();if(t)return"success"===a?(0,S.jsx)(v.s,{onClose:e,title:"Debt successfully Updated",subline:(0,S.jsxs)(S.Fragment,{children:["Your ",(0,S.jsx)("b",{children:"Debt"})," has been updated, read more about it in the"," ",(0,S.jsx)(r.r,{href:"https://docs.synthetix.io/v/synthetix-v3-user-documentation",target:"_blank",color:"cyan.500",children:"Synthetix V3 Documentation"})]}),alertText:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("b",{children:"Debt"})," successfully Updated"]})}):(0,S.jsxs)("div",{children:[(0,S.jsxs)(n.x,{color:"gray.50",fontSize:"20px",fontWeight:700,children:[(0,S.jsx)(k.R,{cursor:"pointer",onClick:e,mr:2}),"Manage Debt"]}),(0,S.jsx)(o.i,{my:4}),(0,S.jsx)(u.P0,{step:1,title:"Borrow",subtitle:(0,S.jsxs)(n.x,{as:"div",children:[x?"Claim":"Borrow"," ",(0,S.jsx)(d.$,{value:s,suffix:x?" USDC":` ${h?.symbol}`})]}),status:{failed:"error"===a,loading:["prompting","pending"].includes(a)}}),(0,S.jsx)(i.z,{isDisabled:"pending"===a,onClick:()=>{["unsent","error"].includes(a)&&l()},width:"100%",mt:"6","data-testid":"borrow confirm button",children:(()=>{switch(a){case"error":return"Retry";case"pending":case"prompting":return"Processing...";default:return"Execute Transaction"}})()})]})},_=({onClose:e,isOpen:t})=>{const{debtChange:s,setDebtChange:r}=(0,x.useContext)(p.n),n=(0,w.useQueryClient)(),i=(0,h.UO)(),{data:d}=(0,b.t)(i.collateralSymbol),{exec:u,txnState:f,settle:k}=(0,m.h)({accountId:i.accountId,poolId:i.poolId,collateralTypeAddress:d?.tokenAddress,debtChange:s}),v=(0,a.p)({isClosable:!0,duration:9e3}),{data:D}=(0,g.a)(),{network:_}=(0,C.LN)(),I=(0,y.o)(D),T=(0,x.useCallback)((async()=>{try{await u(),n.invalidateQueries({queryKey:[`${_?.id}-${_?.preset}`,"LiquidityPosition"],exact:!1}),r(B.GH)}catch(e){const t=I(e);throw t&&console.error(new Error(t.name),t),v.closeAll(),v({title:"Borrow failed",description:t?(0,S.jsx)(j.M,{contractError:t}):"Please try again.",status:"error",variant:"left-accent"}),Error("Borrow failed",{cause:e})}}),[u,n,_?.id,_?.preset,r,I,v]),{txnStatus:U}=f;return i.poolId&&i.accountId&&d?(0,S.jsx)(O,{execBorrow:T,debtChange:s,txnStatus:U,onClose:()=>{k(),e()},isOpen:t}):(0,S.jsxs)(l.k,{gap:4,flexDirection:"column",children:[(0,S.jsx)(c.O,{maxW:"232px",width:"100%",height:"20px"}),(0,S.jsx)(o.i,{my:4}),(0,S.jsx)(c.O,{width:"100%",height:"20px"}),(0,S.jsx)(c.O,{width:"100%",height:"20px"})]})},I=_}}]);
//# sourceMappingURL=3929.3a8a6f1f.js.map