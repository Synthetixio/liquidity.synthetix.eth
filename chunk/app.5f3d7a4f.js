(globalThis.webpackChunk_snx_v3_liquidity=globalThis.webpackChunk_snx_v3_liquidity||[]).push([[2143],{8788:(e,t,r)=>{"use strict";async function a(e,t="main"){switch(`${e}-${t}`){case"1-main":return r.e(5451).then(r.bind(r,5451));case"10-main":return r.e(8557).then(r.bind(r,38557));case"11155111-main":return r.e(5490).then(r.bind(r,65490));case"13370-main":return r.e(9073).then(r.bind(r,9073));case"42161-arbthetix":return r.e(2268).then(r.bind(r,12268));case"421614-arbthetix":return r.e(9141).then(r.bind(r,99141));case"8453-andromeda":return r.e(1966).then(r.bind(r,21966));case"84532-andromeda":return r.e(3102).then(r.bind(r,43102));default:throw new Error(`Unsupported chain ${e} for CoreProxy`)}}r.d(t,{k:()=>a})},45580:(e,t,r)=>{"use strict";async function a(e,t="main"){switch(`${e}-${t}`){case"1-main":return r.e(2435).then(r.bind(r,92435));case"10-main":return r.e(1241).then(r.bind(r,51241));case"11155111-main":return r.e(7992).then(r.bind(r,77992));case"13370-main":return r.e(7188).then(r.bind(r,37188));case"42161-arbthetix":return r.e(5818).then(r.bind(r,15818));case"421614-arbthetix":return r.e(9534).then(r.bind(r,49534));case"8453-andromeda":return r.e(8291).then(r.bind(r,78291));case"84532-andromeda":return r.e(2941).then(r.bind(r,72941));default:throw new Error(`Unsupported chain ${e} for Multicall3`)}}r.d(t,{C:()=>a})},45071:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var a=r(92841),n=r(2784),i=r(96596),o=r(79929),l=r(90711),s=r(52322);function c({value:e,prefix:t="",suffix:r="","data-testid":c,showTooltip:d}){const{formattedValue:h,preciseValue:u,isMaxUint:x}=(0,n.useMemo)((()=>{if(!e)return{formattedValue:"-",preciseValue:"-"};const t=(0,i.Aq)(e),r=(0,o.wei)(t.replaceAll(",",""));return{isMaxUint:(0,o.wei)(l.PS).lte(e),formattedValue:t,preciseValue:e.eq(r)?t:e.toString()}}),[e]);return(0,s.jsx)(a.u,{label:(0,s.jsx)(s.Fragment,{children:x?"You cannot borrow sUSD against this collateral":(0,s.jsxs)(s.Fragment,{children:[t,u,r]})}),isDisabled:h===u||!d,children:(0,s.jsxs)("span",{"data-testid":c,children:[t,x?"N/A":h,!x&&r]})})}},99581:(e,t,r)=>{"use strict";r.d(t,{M:()=>d});var a=r(2784),n=r(84626),i=r(87651),o=r(59176),l=r(64919),s=r(52322);const c="true"===window?.localStorage?.CONTRACT_ERROR_OPEN;function d({contractError:e}){const[t,r]=a.useState(c);return(0,s.jsxs)(s.Fragment,{children:[t?null:(0,s.jsx)(n.z,{variant:"link",onClick:()=>r(!0),color:"inherit",fontWeight:"normal",fontStyle:"italic",children:"details..."}),(0,s.jsxs)(i.U,{in:t,animateOpacity:!0,children:[(0,s.jsx)(o.x,{fontStyle:"italic",fontSize:"0.8em",children:e.name}),(0,s.jsx)(o.x,{whiteSpace:"pre",fontSize:"0.8em",fontStyle:"italic",pl:"0.5em",children:Object.entries(e.args).map((([e,t])=>`${e}: ${t instanceof Date?(0,l.Z)(t,"yyyy-MM-dd HH:mm:ss"):t}`)).join("\n")})]})]})}},1249:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DepositModal:()=>he,DepositModalUi:()=>de,default:()=>ue});var a=r(66901),n=r(26468),i=r(19433),o=r(54326),l=r(2338),s=r(97217),c=r(59176),d=r(84626),h=r(70065),u=r(2784),x=r(19299),p=r(45071),m=r(49494),f=r(73557),g=r(16060),y=r(85649),b=r(47973),j=r(25042),w=r(79929),C=r(40109),v=r(28145),S=r(76885),k=r(17716),A=r(10528),T=r(99),D=r(35834),I=r(95772),F=r(860),L=r(37330),z=r(51686),M=r(95522);var $=r(89536),E=r(9875),N=r(97386);const B="SET_REQUIRE_APPROVAL",P="SET_WRAP_AMOUNT",H="SET_INFINITE_APPROVAL",O="RETRY",R="RUN",U="RESET",W="idle",q="wrap",_="approve",V="deposit",Z="failed",G="success",Q={[_]:_,[q]:q,[V]:V},Y="wrapEth",K="approveWETH",X="executeDeposit",J={wrapAmount:(0,w.wei)(0),error:null,requireApproval:!1,infiniteApproval:!1},ee=(0,E.C)({id:"DepositMachine",initial:W,predictableActionArguments:!0,context:J,on:{[R]:{target:V,actions:(0,N.f0)({wrapAmount:e=>J.wrapAmount,error:e=>J.error,requireApproval:e=>J.requireApproval,infiniteApproval:e=>J.infiniteApproval})},[B]:{actions:(0,N.f0)({requireApproval:(e,t)=>t.requireApproval})},[P]:{actions:(0,N.f0)({wrapAmount:(e,t)=>t.wrapAmount})},[H]:{actions:(0,N.f0)({infiniteApproval:(e,t)=>t.infiniteApproval})}},states:{[W]:{on:{[R]:[{target:q,cond:e=>e.wrapAmount.gt(0)},{target:_,cond:e=>e.requireApproval},{target:V}]}},[q]:{invoke:{src:Y,onError:{target:Z,actions:(0,N.f0)({error:(e,t)=>({error:t.data,step:Q.wrap})})},onDone:[{target:_,cond:e=>e.requireApproval},{target:V}]}},[_]:{invoke:{src:K,onDone:{target:V},onError:{target:Z,actions:(0,N.f0)({error:(e,t)=>({error:t.data,step:Q.approve})})}}},[V]:{invoke:{src:X,onDone:{target:G},onError:{target:Z,actions:(0,N.f0)({error:(e,t)=>({error:t.data,step:Q.deposit})})}}},[Z]:{on:{[O]:[{target:_,cond:e=>e.error?.step===Q.approve,actions:(0,N.f0)({error:e=>null})},{target:q,cond:e=>e.error?.step===Q.wrap,actions:(0,N.f0)({error:e=>null})},{target:V,cond:e=>e.error?.step===Q.deposit,actions:(0,N.f0)({error:e=>null})}]}},[G]:{}}});var te=r(97737),re=r(97721),ae=r(99581),ne=r(18914),ie=r(77528),oe=r(50986),le=r(81666),se=r(96596);var ce=r(52322);const de=({collateralChange:e,isOpen:t,onClose:r,collateralType:h,setInfiniteApproval:u,onSubmit:x,state:m,availableCollateral:f,poolName:g})=>{const y=m.context.wrapAmount,b=m.context.infiniteApproval,C=m.context.requireApproval,v=m.context.error,S=m.matches(_)||m.matches(V)||m.matches(q),k="WETH"===h?.symbol,A={wrap:k?1:0,approve:k?2:1,deposit:k?3:2};return(0,ce.jsxs)(a.u_,{size:"lg",isOpen:t,onClose:r,closeOnOverlayClick:!1,children:[(0,ce.jsx)(n.Z,{}),(0,ce.jsxs)(i.h,{bg:"black",color:"white","data-testid":"deposit modal",children:[(0,ce.jsx)(o.x,{children:"Complete this action"}),(0,ce.jsx)(l.o,{}),(0,ce.jsxs)(s.f,{children:[(0,ce.jsx)(c.x,{mb:"2",children:"Please execute the following transactions:"}),k?(0,ce.jsx)(j.P0,{step:A.wrap,title:"Wrap",subtitle:y.eq(0)?(0,ce.jsxs)(c.x,{as:"div",children:[(0,ce.jsx)(p.$,{value:e,suffix:` ${h?.symbol}`})," from balance will be used."]}):(0,ce.jsxs)(c.x,{as:"div",children:["You must wrap additional ",(0,ce.jsx)(p.$,{value:y,suffix:" ETH"})," before depositing."]}),status:{failed:v?.step===q,disabled:"WETH"!==h?.symbol,success:y.eq(0)||m.matches(G),loading:m.matches(q)&&!v}}):null,(0,ce.jsx)(j.P0,{step:A.approve,title:`Approve ${h?.symbol} transfer`,status:{failed:v?.step===_,success:!C||m.matches(G),loading:m.matches(_)&&!v},checkboxLabel:`Approve unlimited ${h?.symbol} transfers to Synthetix.`,checkboxProps:{isChecked:b,onChange:e=>u(e.target.checked)}}),(0,ce.jsx)(j.P0,{step:A.deposit,title:`Delegate ${h?.symbol}`,subtitle:(0,ce.jsx)(ce.Fragment,{children:m.matches(G)?(0,ce.jsxs)(c.x,{children:[(0,ce.jsx)(p.$,{value:e,suffix:` ${h?.symbol}`})," ","delegated to ",g,"."]}):(0,ce.jsx)(ce.Fragment,{children:f&&f.gt((0,w.wei)(0))?(0,ce.jsx)(ce.Fragment,{children:f.gte(e)?(0,ce.jsxs)(c.x,{children:["This will delegate"," ",(0,ce.jsx)(p.$,{value:e,suffix:` ${h?.symbol}`})," ","to ",g,"."]}):(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)(c.x,{children:["This will delegate"," ",(0,ce.jsx)(p.$,{value:f,suffix:` ${h?.symbol}`})," ","to ",g,"."]}),(0,ce.jsxs)(c.x,{children:["An additional"," ",(0,ce.jsx)(p.$,{value:e.sub(f),suffix:` ${h?.symbol}`})," ","will be deposited and delegated from your wallet."]})]})}):(0,ce.jsxs)(c.x,{children:["This will deposit and delegate"," ",(0,ce.jsx)(p.$,{value:e,suffix:` ${h?.symbol}`})," to"," ",g,"."]})})}),status:{failed:v?.step===V,disabled:m.matches(G)&&C,success:m.matches(G),loading:m.matches(V)&&!v}}),(0,ce.jsx)(d.z,{isDisabled:S,onClick:x,width:"100%",my:"4","data-testid":"deposit confirm button",children:(()=>{switch(!0){case Boolean(v):return"Retry";case S:return"Processing...";case m.matches(G):return"Done";default:return"Start"}})()})]})]})]})},he=({onClose:e,isOpen:t,collateralChange:r,currentCollateral:a,availableCollateral:n})=>{const i=(0,f.s0)(),o=(0,$.UO)(),l=(0,v.useQueryClient)(),{network:s}=(0,S.LN)(),{data:c}=(0,C.a)(),{data:d}=(0,le.b)(),{data:p}=(0,x.t)(o.collateralSymbol),j=(0,ie.Yz)(s?.id,s?.preset)?(0,ie.sm)(s?.id):p?.tokenAddress,E=r.sub(n),{approve:N,requireApproval:W}=(0,y.y)({contractAddress:j,amount:E.gt(0)?(0,ie.Yz)(s?.id,s?.preset)?m.vz(E.toString(),6):E.toBN():0,spender:(0,ie.Yz)(s?.id,s?.preset)?d?.address:c?.address}),q=(0,h.p)({isClosable:!0,duration:9e3}),_=(0,u.useMemo)((()=>`${Math.floor(1e10*Math.random())}`),[]),{exec:Z,wethBalance:Q}=(0,b.a)(),J="WETH"===p?.symbol&&r.gt(Q||0)?r.sub(Q||0):(0,w.wei)(0),{data:he}=(0,ne.AI)(o.poolId),{exec:ue}=(({accountId:e,newAccountId:t,poolId:r,collateralTypeAddress:a,collateralChange:n,currentCollateral:i,availableCollateral:o})=>{const[l,s]=(0,u.useReducer)(k.I,k.E),{data:c}=(0,C.a)(),{data:d}=(0,z.L)(),{gasSpeed:h}=(0,I.jU)(),{network:x}=(0,S.LN)(),p=(0,S.mx)(),m=(0,S.yL)(),f=(0,v.useMutation)({mutationFn:async()=>{if(x&&m&&p&&c&&r&&a&&o&&d&&!n.eq(0))try{s({type:"prompting"});const l=await p.getAddress(),u=e??t,f=e?void 0:c.populateTransaction["createAccount(uint128)"](A.O$.from(u)),g=o.gte(n)?void 0:c.populateTransaction.deposit(A.O$.from(u),a,n.sub(o).toBN()),y=c.populateTransaction.delegateCollateral(A.O$.from(u),A.O$.from(r),a,i.add(n).toBN(),(0,w.wei)(1).toBN()),b=Promise.all([f,g,y].filter(L._)),j=(0,M.$)(d,x?.isTestnet).then((e=>(0,M.x)(l,d,e))),[C,v,S]=await Promise.all([b,(0,D.o)({provider:m}),j]),k=S.concat(C),I=await(0,F.dI)(x,k,"useDeposit",c.interface),z=(0,T.F)({gasLimit:I.gasLimit,gasPrices:v,gasSpeed:h}),$=await p.sendTransaction({...I,...z});s({type:"pending",payload:{txnHash:$.hash}}),await $.wait(),s({type:"success"})}catch(e){throw s({type:"error",payload:{error:e}}),e}}});return{mutation:f,txnState:l,settle:()=>s({type:"settled"}),isLoading:f.isPending,exec:f.mutateAsync}})({accountId:o.accountId,newAccountId:_,poolId:o.poolId,collateralTypeAddress:j,collateralChange:r,currentCollateral:a,availableCollateral:n||(0,w.wei)(0)}),{exec:xe}=(({accountId:e,newAccountId:t,poolId:r,collateralTypeAddress:a,collateralChange:n,currentCollateral:i,availableCollateral:o})=>{const[l,s]=(0,u.useReducer)(k.I,k.E),{data:c}=(0,C.a)(),{data:d}=(0,le.b)(),{data:h}=(0,z.L)(),{gasSpeed:x}=(0,I.jU)(),{network:p}=(0,S.LN)(),m=(0,S.mx)(),f=(0,S.yL)(),g=(0,v.useMutation)({mutationFn:async()=>{if(p&&f&&m&&c&&d&&r&&a&&o&&h&&!n.eq(0))try{s({type:"prompting"});const a=await m.getAddress(),l=e??t,u=e?void 0:c.populateTransaction["createAccount(uint128)"](A.O$.from(l)),g=n.sub(o),b=g.gt(0)?(0,se.vz)(g.toString(),6):A.O$.from(0),j=g.gt(0)?(0,se.vz)(g.toString(),18):A.O$.from(0),C=(0,ie.Hb)(p.id),v=b.gt(0)?d.populateTransaction.wrap(ie.Ds,b,j):void 0,S=new oe.CH(C,y.P,m),k=j.gt(0)?S.populateTransaction.approve(c.address,j):void 0,I=j.gt(0)?c.populateTransaction.deposit(A.O$.from(l),C,j):void 0,z=c.populateTransaction.delegateCollateral(A.O$.from(l),A.O$.from(r),C,i.toBN().add((0,se.vz)(n.toString(),18)).toString(),(0,w.wei)(1).toBN()),$=Promise.all([v,k,u,I,z].filter(L._)),E=(0,M.$)(h,p?.isTestnet).then((e=>(0,M.x)(a,h,e))),[N,B,P]=await Promise.all([$,(0,D.o)({provider:f}),E]),H=P.concat(N),O=await(0,F.dI)(p,H,"useDepositBaseAndromeda",c.interface),R=(0,T.F)({gasLimit:O.gasLimit,gasPrices:B,gasSpeed:x}),U=await m.sendTransaction({...O,...R});s({type:"pending",payload:{txnHash:U.hash}}),await U.wait(),s({type:"success"})}catch(e){throw s({type:"error",payload:{error:e}}),e}}});return{mutation:g,txnState:l,settle:()=>s({type:"settled"}),isLoading:g.isPending,exec:g.mutateAsync}})({accountId:o.accountId,newAccountId:_,poolId:o.poolId,collateralTypeAddress:j,collateralChange:r,currentCollateral:a,availableCollateral:n||(0,w.wei)(0)}),pe=(0,re.o)(c),[me,fe]=(0,te.e)(ee,{services:{[Y]:async()=>{try{await Z(me.context.wrapAmount)}catch(e){const t=pe(e);throw t&&console.error(new Error(t.name),t),q.closeAll(),q({title:"Wrapping ETH failed",description:t?(0,ce.jsx)(ae.M,{contractError:t}):"Please try again.",status:"error"}),Error("Wrapping failed",{cause:e})}},[K]:async()=>{try{q({title:"Approve collateral for transfer",description:o.accountId?"The next transaction will delegate this collateral.":"The next transaction will create your account and and delegate this collateral",status:"info"}),await N(Boolean(me.context.infiniteApproval))}catch(e){const t=pe(e);throw t&&console.error(new Error(t.name),t),q.closeAll(),q({title:"Approval failed",description:t?(0,ce.jsx)(ae.M,{contractError:t}):"Please try again.",status:"error"}),Error("Approve failed",{cause:e})}},[X]:async()=>{try{q.closeAll(),q({title:Boolean(o.accountId)?"Delegating your collateral":"Creating your account and depositing collateral",description:""}),(0,ie.Yz)(s?.id,s?.preset)?await xe():await ue(),await Promise.all([l.invalidateQueries({queryKey:[`${s?.id}-${s?.preset}`,"EthBalance"]}),l.invalidateQueries({queryKey:[`${s?.id}-${s?.preset}`,"LiquidityPosition"]}),"SNX"===p?.symbol?l.invalidateQueries({queryKey:[`${s?.id}-${s?.preset}`,"TransferableSynthetix"]}):Promise.resolve(),l.invalidateQueries({queryKey:[`${s?.id}-${s?.preset}`,"Allowance"]}),l.invalidateQueries({queryKey:[`${s?.id}-${s?.preset}`,"LiquidityPositions"]}),o.accountId?Promise.resolve():l.invalidateQueries({queryKey:[`${s?.id}-${s?.preset}`,"Accounts"]})]),q.closeAll(),q({title:"Success",description:"Your delegated collateral amount has been updated.",status:"success",duration:5e3})}catch(e){const t=pe(e);throw t&&console.error(new Error(t.name),t),q({title:"Could not complete delegating collateral",description:t?(0,ce.jsx)(ae.M,{contractError:t}):"Please try again.",status:"error"}),Error("Delegate collateral failed",{cause:e})}}}}),ge=J.toString(),ye=me.matches(G)||me.matches(V);(0,u.useEffect)((()=>{ye||fe(P,{wrapAmount:(0,w.wei)(ge)})}),[ge,fe,ye]),(0,u.useEffect)((()=>{fe(B,{requireApproval:W})}),[W,fe]);const be=(0,f.TH)(),je=(0,u.useCallback)((()=>{me.matches(G)&&o.poolId&&p?.symbol&&(fe(U),e(),i({pathname:(0,g.Gn)("/positions/:collateralType/:poolId",{collateralType:p.symbol,poolId:o.poolId}),search:be.search})),fe(U),e()}),[be.search,fe,e,me,o.poolId,p?.symbol,i]),we=(0,u.useCallback)((async()=>{me.matches(G)?je():me.context.error?fe(O):fe(R)}),[je,fe,me]);return(0,ce.jsx)(de,{collateralChange:r,isOpen:t,onClose:e,collateralType:p,state:me,setInfiniteApproval:e=>{fe(H,{infiniteApproval:e})},onSubmit:we,poolName:he?.name||"",availableCollateral:n||(0,w.wei)(0)})},ue=he},25042:(e,t,r)=>{"use strict";r.d(t,{nQ:()=>s,Tw:()=>c,P0:()=>f});var a=r(38035),n=r(81540),i=r(28535),o=r(21112),l=r(52322);const s=(0,o.I)({viewBox:"0 0 14 14",path:(0,l.jsx)("g",{fill:"currentColor",children:(0,l.jsx)("polygon",{points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"})})}),c=(0,o.I)({d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"});function d({status:e,children:t}){switch(!0){case e.failed:return(0,l.jsx)(c,{color:"white"});case e.success:return(0,l.jsx)(s,{color:"white"});case e.loading:return(0,l.jsx)(n.$,{color:"white",width:6,height:6});case e.disabled:default:return(0,l.jsx)(i.xu,{__css:{display:"inline",fontWeight:"medium",textAlign:"center",fontSize:"md"},children:t})}}function h(e){switch(!0){case e.failed:return"red.700";case e.disabled:case e.loading:return"gray.700";case e.success:return"green.700";default:return"gray.700"}}function u({status:e,children:t}){return(0,l.jsx)(a.k,{width:10,height:10,minWidth:10,minHeight:10,justifyContent:"center",alignItems:"center",bg:h(e),rounded:"full",transitionProperty:"background",transitionDuration:"normal",children:(0,l.jsx)(d,{status:e,children:t})})}var x=r(78876),p=r(59176);function m({children:e,...t}){return(0,l.jsx)(a.k,{mt:"0.5",children:(0,l.jsx)(x.X,{size:"sm",...t,children:(0,l.jsx)(i.xu,{fontSize:"xs",opacity:"0.66",children:e})})})}function f({step:e,title:t,subtitle:r,checkboxLabel:n,checkboxProps:i,status:o,children:s}){return(0,l.jsxs)(a.k,{position:"relative",alignItems:"center",gap:4,rounded:"lg",mt:"4",p:"4",border:"2px solid",transitionProperty:"border-color",transitionDuration:"normal",borderColor:h(o),children:[(0,l.jsx)(u,{status:o,children:e}),(0,l.jsxs)(a.k,{direction:"column",children:[(0,l.jsx)(p.x,{children:t}),r?(0,l.jsx)(p.x,{as:"div",fontSize:"xs",opacity:"0.66",children:r}):null,n?(0,l.jsx)(m,{...i,children:n}):null,s]})]})}},50899:(e,t,r)=>{"use strict";r.d(t,{$:()=>o});var a=r(47443),n=r(59176),i=r(52322);function o(){return(0,i.jsx)(a.b,{colorScheme:"orange",mb:"4",children:(0,i.jsx)(n.x,{fontWeight:"bold",children:"This action will increase the timeout for withdrawing collateral"})})}},992:(e,t,r)=>{"use strict";r.d(t,{ZM:()=>l,iI:()=>h,vk:()=>c,zW:()=>o});var a=r(79929),n=r(9875),i=r(97386);const o={SET_AMOUNT:"SET_AMOUNT",SET_COLLATERAL_SYMBOL:"SET_COLLATERAL_SYMBOL",RETRY:"RETRY",RUN:"RUN",SUCCESS:"SUCCESS",FAILURE:"FAILURE",RESET:"RESET"},l={idle:"idle",withdraw:"withdraw",unwrap:"unwrap",failed:"failed",success:"success"},s={[l.withdraw]:l.withdraw,[l.unwrap]:l.unwrap},c={withdraw:"withdraw",unwrap:"unwrap"},d={amount:(0,a.wei)(0),error:null,collateralSymbol:void 0},h=(0,n.C)({id:"WithdrawMachine",initial:l.idle,predictableActionArguments:!0,context:d,on:{[o.RESET]:{target:l.idle,actions:(0,i.f0)({amount:e=>d.amount,error:e=>d.error,collateralSymbol:e=>d.collateralSymbol})},[o.SET_AMOUNT]:{actions:(0,i.f0)({amount:(e,t)=>t.amount})},[o.SET_COLLATERAL_SYMBOL]:{actions:(0,i.f0)({collateralSymbol:(e,t)=>t.symbol})}},states:{[l.idle]:{on:{[o.RUN]:[{target:l.withdraw,cond:e=>e.amount.gt(0)},{target:l.unwrap,cond:e=>e.amount.gt(0)&&"WETH"===e.collateralSymbol}]}},[l.withdraw]:{invoke:{src:c.withdraw,onError:{target:l.failed,actions:(0,i.f0)({error:(e,t)=>({error:t.data,step:s.withdraw})})},onDone:[{target:l.unwrap,cond:e=>"WETH"===e.collateralSymbol},{target:l.success}]}},[l.unwrap]:{invoke:{src:c.unwrap,onDone:{target:l.success},onError:{target:l.failed,actions:(0,i.f0)({error:(e,t)=>({error:t.data,step:s.unwrap})})}}},[l.failed]:{on:{[o.RETRY]:[{target:l.withdraw,cond:e=>e.error?.step===s.withdraw,actions:(0,i.f0)({error:e=>null})},{target:l.unwrap,cond:e=>e.error?.step===s.unwrap,actions:(0,i.f0)({error:e=>null})}]}},[l.success]:{}}})},4447:(e,t,r)=>{"use strict";r.r(t),r.d(t,{WithdrawModal:()=>N,WithdrawModalUi:()=>E,default:()=>B});var a=r(66901),n=r(26468),i=r(19433),o=r(54326),l=r(2338),s=r(97217),c=r(59176),d=r(84626),h=r(70065),u=r(2784),x=r(45071),p=r(47973),m=r(25042),f=r(89536),g=r(992),y=r(97737),b=r(40109),j=r(28145),w=r(76885),C=r(17716),v=r(10528),S=r(99),k=r(35834),A=r(95772),T=r(51686),D=r(95522),I=r(860);const F=({accountId:e,collateralTypeAddress:t,accountCollateral:r})=>{const[a,n]=(0,u.useReducer)(C.I,C.E),{data:i}=(0,b.a)(),{data:o}=(0,T.L)(),{network:l}=(0,w.LN)(),{gasSpeed:s}=(0,A.jU)(),c=(0,w.mx)(),d=(0,w.yL)(),h=(0,j.useMutation)({mutationFn:async()=>{if(!c||!l||!d)throw new Error("No signer or network");if(!(i&&t&&r?.availableCollateral&&o))return;if(r?.availableCollateral.eq(0))return;const a=await c.getAddress();try{n({type:"prompting"});const h=(0,k.o)({provider:d}),u=i.populateTransaction.withdraw(v.O$.from(e),t,r?.availableCollateral.toBN()),x=(0,D.$)(o,l.isTestnet).then((e=>(0,D.x)(a,o,e))),[p,m,f]=await Promise.all([h,u,x]),g=f.concat(m),y=await(0,I.dI)(l,g,"useWithdraw",i.interface),b=(0,S.F)({gasLimit:y.gasLimit,gasPrices:p,gasSpeed:s}),j=await c.sendTransaction({...y,...b});n({type:"pending",payload:{txnHash:j.hash}}),await j.wait(),n({type:"success"})}catch(e){throw n({type:"error",payload:{error:e}}),e}}});return{mutation:h,txnState:a,settle:()=>n({type:"settled"}),isLoading:h.isPending,exec:h.mutateAsync}};var L=r(97721),z=r(99581),M=r(50899),$=r(52322);const E=({amount:e,isOpen:t,onClose:r,accountCollateral:h,onSubmit:u,state:p,error:f})=>{const y=p.matches(g.ZM.withdraw)||p.matches(g.ZM.unwrap);return(0,$.jsxs)(a.u_,{size:"lg",isOpen:t,onClose:r,closeOnOverlayClick:!1,children:[(0,$.jsx)(n.Z,{}),(0,$.jsxs)(i.h,{bg:"black",color:"white","data-testid":"withdraw modal",children:[(0,$.jsx)(M.$,{}),(0,$.jsx)(o.x,{children:"Complete this action"}),(0,$.jsx)(l.o,{}),(0,$.jsxs)(s.f,{children:[(0,$.jsx)(c.x,{mb:"2",children:"Please execute the following transactions:"}),(0,$.jsx)(m.P0,{step:1,title:"Withdraw",subtitle:(0,$.jsxs)(c.x,{as:"div",children:[(0,$.jsx)(x.$,{value:e,suffix:` ${h?.symbol}`})," will be withdrawn"]}),status:{failed:Boolean(f?.step===g.ZM.withdraw),disabled:e.eq(0),success:p.matches(g.ZM.unwrap)||p.matches(g.ZM.success),loading:p.matches(g.ZM.withdraw)&&!f}}),"WETH"===h?.symbol?(0,$.jsx)(m.P0,{step:2,title:`Unwrap ${h?.symbol}`,subtitle:"This will unwrap your WETH to ETH",status:{failed:Boolean(f?.step===g.ZM.unwrap),disabled:"WETH"!==h?.symbol,success:p.matches(g.ZM.success),loading:p.matches(g.ZM.unwrap)}}):null,(0,$.jsx)(d.z,{isDisabled:y,onClick:u,width:"100%",my:"4","data-testid":"withdraw confirm button",children:(()=>{switch(!0){case Boolean(f):return"Retry";case y:return"Processing...";case p.matches(g.ZM.success):return"Done";default:return"Start"}})()})]})]})]})};function N({accountCollateral:e,onClose:t,isOpen:r}){const a=(0,f.UO)(),n=(0,h.p)({isClosable:!0,duration:9e3}),{network:i}=(0,w.LN)(),{exec:o}=(0,p.E)(),{exec:l}=F({accountId:a.accountId,collateralTypeAddress:e?.tokenAddress,accountCollateral:e}),s=(0,j.useQueryClient)(),{data:c}=(0,b.a)(),d=(0,L.o)(c),[x,m]=(0,y.e)(g.iI,{context:{amount:e?.availableCollateral},services:{[g.vk.withdraw]:async()=>{try{await l(),await s.invalidateQueries({queryKey:[`${i?.id}-${i?.preset}`,"AccountSpecificCollateral"]})}catch(e){const t=d(e);throw t&&console.error(new Error(t.name),t),n.closeAll(),n({title:"Withdraw failed",description:t?(0,$.jsx)(z.M,{contractError:t}):"Please try again.",status:"error"}),Error("Withdraw failed",{cause:e})}},[g.vk.unwrap]:async()=>{try{n({title:"Unwrap",description:"Unwrapping WETH to ETH.",status:"info"}),await o(x.context.amount)}catch(e){throw n.closeAll(),n({title:"Unwrap failed",description:"Please try again.",status:"error"}),Error("Unwrap failed",{cause:e})}}}}),C=(0,u.useCallback)((async()=>{if(x.matches(g.ZM.success))return m(g.zW.RESET),void t();x.context.error?m(g.zW.RETRY):m(g.zW.RUN)}),[t,m,x]);return(0,$.jsx)(E,{amount:x.context.amount,isOpen:r,onClose:t,accountCollateral:e,state:x,error:x.context.error,onSubmit:C})}const B=N},63883:(e,t,r)=>{"use strict";r.d(t,{o:()=>i});var a=r(62929),n=r(52322);const i=({width:e="42px",height:t="42px"})=>(0,n.jsxs)(a.J,{width:e,height:t,viewBox:"0 0 30 30",fill:"none",children:[(0,n.jsxs)("g",{clipPath:"url(#clip0_10043_2361)",children:[(0,n.jsx)("path",{d:"M15 30C23.3125 30 30 23.3125 30 15C30 6.68745 23.3125 0 15 0C6.68745 0 0 6.68745 0 15C0 23.3125 6.68745 30 15 30Z",fill:"#2775CA"}),(0,n.jsx)("path",{d:"M19.125 17.375C19.125 15.1875 17.8125 14.4375 15.1875 14.1251C13.3125 13.875 12.9375 13.3751 12.9375 12.5C12.9375 11.6249 13.5625 11.0625 14.8125 11.0625C15.9375 11.0625 16.5625 11.4375 16.875 12.375C16.9375 12.5625 17.125 12.6875 17.3125 12.6875H18.3124C18.5625 12.6875 18.75 12.5 18.75 12.2501V12.1875C18.4999 10.8125 17.3749 9.75 15.9375 9.62505V8.12505C15.9375 7.875 15.75 7.6875 15.4375 7.62495H14.5C14.25 7.62495 14.0625 7.81245 13.9999 8.12505V9.5625C12.1249 9.81255 10.9375 11.0625 10.9375 12.6251C10.9375 14.6876 12.1875 15.5 14.8125 15.8126C16.5625 16.125 17.125 16.5 17.125 17.5001C17.125 18.5001 16.2499 19.1876 15.0625 19.1876C13.4374 19.1876 12.8749 18.5 12.6874 17.5625C12.625 17.3126 12.4375 17.1875 12.25 17.1875H11.1874C10.9375 17.1875 10.75 17.375 10.75 17.625V17.6876C10.9999 19.25 12 20.375 14.0625 20.6876V22.1876C14.0625 22.4375 14.25 22.625 14.5624 22.6875H15.4999C15.7499 22.6875 15.9375 22.5 16 22.1876V20.6876C17.875 20.375 19.125 19.0625 19.125 17.375Z",fill:"white"}),(0,n.jsx)("path",{d:"M11.8125 23.9374C6.9375 22.1875 4.43745 16.75 6.25005 11.9374C7.18755 9.31245 9.25005 7.3125 11.8125 6.375C12.0625 6.25005 12.1875 6.06255 12.1875 5.74995V4.875C12.1875 4.62495 12.0625 4.43745 11.8125 4.37505C11.7499 4.37505 11.625 4.37505 11.5624 4.43745C5.625 6.31245 2.37495 12.625 4.24995 18.5625C5.37495 22.0624 8.0625 24.75 11.5624 25.875C11.8125 25.9999 12.0625 25.875 12.1249 25.6249C12.1875 25.5625 12.1875 25.5 12.1875 25.375V24.4999C12.1875 24.3124 12 24.0625 11.8125 23.9374ZM18.4375 4.43745C18.1875 4.3125 17.9375 4.43745 17.875 4.6875C17.8125 4.75005 17.8125 4.81245 17.8125 4.93755V5.8125C17.8125 6.06255 18 6.31245 18.1875 6.43755C23.0625 8.18745 25.5625 13.6249 23.75 18.4375C22.8125 21.0625 20.75 23.0625 18.1875 24C17.9374 24.1249 17.8125 24.3124 17.8125 24.625V25.5C17.8125 25.75 17.9374 25.9375 18.1875 25.9999C18.25 25.9999 18.375 25.9999 18.4375 25.9375C24.375 24.0625 27.6251 17.7499 25.7501 11.8125C24.6251 8.25 21.875 5.56245 18.4375 4.43745Z",fill:"white"})]}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_10043_2361",children:(0,n.jsx)("rect",{width:"30",height:"30",fill:"white"})})})]})},23210:(e,t,r)=>{"use strict";r.d(t,{Ri:()=>u,su:()=>C,TK:()=>j,FZ:()=>w,_M:()=>m,Kh:()=>f,l6:()=>x,RF:()=>c,xi:()=>o,Bg:()=>g,TR:()=>i,K7:()=>b,PF:()=>s,o:()=>y});var a=r(62929),n=r(52322);const i=({color:e="#00D1FF",width:t="219",height:r="18"})=>(0,n.jsxs)(a.J,{width:t,height:r,viewBox:"0 0 219 18",fill:"none",color:e,children:[(0,n.jsxs)("g",{clipPath:"url(#clip0_3615_54299)",children:[(0,n.jsx)("path",{d:"M21.1343 8.56217C20.2004 7.58594 19.078 7.09805 17.7667 7.09805H4.76824C4.52682 7.09805 4.3197 7.00835 4.14648 6.82851C3.97325 6.64912 3.88684 6.43031 3.88684 6.1721V5.04457C3.88684 4.79813 3.97325 4.58476 4.14648 4.40492C4.3197 4.22553 4.52682 4.13538 4.76824 4.13538H21.5278C21.5697 4.13538 21.6036 4.12134 21.6299 4.09325C21.6561 4.06562 21.6693 4.03436 21.6693 4.00084V0.634543C21.6693 0.589695 21.6561 0.556173 21.6299 0.533523C21.6036 0.511325 21.5693 0.5 21.5278 0.5H4.76824C3.44636 0.5 2.32101 0.988342 1.39261 1.96457C0.464202 2.9408 0 4.11862 0 5.49893V5.71773C0 7.10937 0.464202 8.29308 1.39261 9.26931C2.32101 10.2455 3.44636 10.7334 4.76824 10.7334H17.7667C17.9976 10.7334 18.1996 10.8204 18.3724 10.9944C18.5456 11.1683 18.632 11.3844 18.632 11.6426V12.7701C18.632 13.0284 18.5456 13.2444 18.3724 13.4184C18.1992 13.5924 17.9971 13.6793 17.7667 13.6793H0.991512C0.96017 13.6793 0.930945 13.6934 0.905109 13.7215C0.87885 13.7495 0.86572 13.7862 0.86572 13.8311V17.1974C0.86572 17.2309 0.87885 17.2622 0.905109 17.2898C0.931369 17.3179 0.96017 17.3319 0.991512 17.3319H17.7667C19.078 17.3319 20.2004 16.8413 21.1343 15.8592C22.0678 14.8775 22.535 13.6965 22.535 12.3162V12.097C22.5346 10.7167 22.0678 9.5384 21.1343 8.56217Z",fill:"currentColor"}),(0,n.jsx)("path",{d:"M49.354 0.5H45.7187C45.6874 0.5 45.6582 0.511325 45.6323 0.533523C45.6061 0.556173 45.5929 0.589695 45.5929 0.634543V4.90957C45.5929 5.27968 45.4142 5.56054 45.058 5.75126L37.8036 8.9658L30.5492 5.75126C30.1925 5.56054 30.0142 5.28013 30.0142 4.90957V0.634543C30.0142 0.589695 30.0036 0.556173 29.9829 0.533523C29.9613 0.511325 29.9299 0.5 29.888 0.5H26.2527C26.2214 0.5 26.1922 0.511325 26.1663 0.533523C26.1401 0.556173 26.127 0.589695 26.127 0.634543V5.53246C26.127 6.26225 26.3159 6.92953 26.6937 7.5352C27.0715 8.14132 27.5852 8.5898 28.2358 8.88154L35.8523 12.2981V17.1797C35.8523 17.2246 35.8655 17.2613 35.8917 17.2893C35.918 17.3174 35.9519 17.3315 35.9938 17.3315H39.629C39.6604 17.3315 39.6892 17.3174 39.7154 17.2893C39.7417 17.2613 39.7548 17.225 39.7548 17.1797V12.2986L47.3714 8.89875C48.0215 8.59569 48.5361 8.14404 48.9135 7.54381C49.2913 6.94357 49.4798 6.27901 49.4798 5.54922V0.634543C49.4798 0.589695 49.4667 0.556173 49.4404 0.533523C49.4141 0.511325 49.3853 0.5 49.354 0.5Z",fill:"currentColor"}),(0,n.jsx)("path",{d:"M76.356 0.5H72.7208C72.6788 0.5 72.6471 0.514043 72.6263 0.54213C72.6051 0.570216 72.595 0.601021 72.595 0.634543V13.6956H71.0685C70.7852 13.6956 70.5437 13.5611 70.3447 13.2916L63.2948 2.26718C62.5392 1.13421 61.4952 0.544848 60.1632 0.5H54.0892C54.0472 0.5 54.0129 0.514043 53.9867 0.54213C53.9604 0.570216 53.9473 0.601021 53.9473 0.634543V17.1965C53.9473 17.23 53.9604 17.2613 53.9867 17.2889C54.0129 17.317 54.0468 17.331 54.0892 17.331H57.7244C57.7558 17.331 57.7846 17.317 57.8108 17.2889C57.8371 17.2613 57.8502 17.23 57.8502 17.1965V4.13538H59.3766C59.66 4.13538 59.901 4.27581 60.1005 4.55623L67.1503 15.5806C67.9059 16.714 68.9495 17.2975 70.282 17.331H76.3564C76.3984 17.331 76.4297 17.317 76.4509 17.2889C76.4716 17.2613 76.4822 17.23 76.4822 17.1965V0.634543C76.4822 0.601021 76.4716 0.570216 76.4509 0.54213C76.4293 0.514043 76.3979 0.5 76.356 0.5Z",fill:"currentColor"}),(0,n.jsx)("path",{d:"M102.63 0.5H80.3631C80.3212 0.5 80.2894 0.514043 80.2686 0.54213C80.2475 0.570216 80.2373 0.601021 80.2373 0.634543V4.00084C80.2373 4.03436 80.2475 4.06562 80.2686 4.09325C80.2894 4.12134 80.3212 4.13538 80.3631 4.13538H89.5531V17.1965C89.5531 17.23 89.5633 17.2613 89.5845 17.2889C89.6052 17.317 89.637 17.331 89.6789 17.331H93.3142C93.3561 17.331 93.3875 17.317 93.4086 17.2889C93.4294 17.2613 93.44 17.23 93.44 17.1965V4.13538H102.63C102.672 4.13538 102.706 4.12134 102.732 4.09325C102.758 4.06517 102.771 4.03436 102.771 4.00084V0.634543C102.771 0.601021 102.758 0.570216 102.732 0.54213C102.707 0.514043 102.672 0.5 102.63 0.5Z",fill:"currentColor"}),(0,n.jsx)("path",{d:"M129.631 0.5H125.996C125.965 0.5 125.936 0.514043 125.91 0.54213C125.883 0.570216 125.87 0.601021 125.87 0.634543V7.0976H111.141V0.634543C111.141 0.601021 111.128 0.570216 111.101 0.54213C111.075 0.514496 111.041 0.5 110.999 0.5H107.364C107.333 0.5 107.304 0.514043 107.278 0.54213C107.251 0.570216 107.238 0.601021 107.238 0.634543V17.1965C107.238 17.23 107.251 17.2613 107.278 17.2889C107.304 17.317 107.333 17.331 107.364 17.331H110.999C111.041 17.331 111.075 17.317 111.101 17.2889C111.128 17.2608 111.141 17.23 111.141 17.1965V10.7334H125.87V17.1965C125.87 17.23 125.883 17.2613 125.91 17.2889C125.936 17.317 125.965 17.331 125.996 17.331H129.631C129.673 17.331 129.707 17.317 129.733 17.2889C129.76 17.2608 129.773 17.23 129.773 17.1965V0.634543C129.773 0.601021 129.759 0.570216 129.733 0.54213C129.707 0.514043 129.673 0.5 129.631 0.5Z",fill:"currentColor"}),(0,n.jsx)("path",{d:"M156.537 0.5H138.896C137.584 0.5 136.462 0.987889 135.529 1.96412C134.595 2.94035 134.128 4.11862 134.128 5.49893V12.3153C134.128 13.707 134.595 14.8907 135.529 15.8669C136.462 16.8431 137.584 17.3315 138.896 17.3315H156.537C156.568 17.3315 156.597 17.3174 156.623 17.2893C156.649 17.2613 156.663 17.2305 156.663 17.1969V13.8306C156.663 13.7858 156.649 13.7523 156.623 13.7296C156.597 13.7074 156.568 13.6961 156.537 13.6961H138.896C138.655 13.6961 138.45 13.6064 138.282 13.427C138.114 13.2476 138.03 13.0343 138.03 12.7874V10.7334H156.525C156.567 10.7334 156.599 10.7194 156.62 10.6913C156.64 10.6632 156.651 10.6324 156.651 10.5989V7.23259C156.651 7.18774 156.64 7.15422 156.62 7.13157C156.599 7.10937 156.567 7.09805 156.525 7.09805H138.03V5.04457C138.03 4.79768 138.114 4.58476 138.282 4.40492C138.45 4.22553 138.655 4.13538 138.896 4.13538H156.537C156.568 4.13538 156.597 4.12134 156.623 4.09325C156.649 4.06562 156.663 4.03436 156.663 4.00084V0.634543C156.663 0.601021 156.649 0.570216 156.623 0.54213C156.597 0.514496 156.568 0.5 156.537 0.5Z",fill:"currentColor"}),(0,n.jsx)("path",{d:"M183.41 0.5H161.142C161.1 0.5 161.069 0.514043 161.048 0.54213C161.027 0.570216 161.017 0.601021 161.017 0.634543V4.00084C161.017 4.03436 161.027 4.06562 161.048 4.09325C161.069 4.12134 161.1 4.13538 161.142 4.13538H170.332V17.1965C170.332 17.23 170.343 17.2613 170.364 17.2889C170.385 17.317 170.416 17.331 170.458 17.331H174.093C174.135 17.331 174.167 17.317 174.188 17.2889C174.209 17.2613 174.219 17.23 174.219 17.1965V4.13538H183.409C183.451 4.13538 183.485 4.12134 183.511 4.09325C183.538 4.06517 183.551 4.03436 183.551 4.00084V0.634543C183.551 0.601021 183.538 0.570216 183.511 0.54213C183.486 0.514043 183.451 0.5 183.41 0.5Z",fill:"currentColor"}),(0,n.jsx)("path",{d:"M191.874 0.533523C191.853 0.511325 191.821 0.5 191.78 0.5H188.144C188.102 0.5 188.071 0.511325 188.05 0.533523C188.029 0.556173 188.019 0.589695 188.019 0.634543V17.1965C188.019 17.23 188.029 17.2613 188.05 17.2889C188.071 17.317 188.102 17.331 188.144 17.331H191.78C191.821 17.331 191.853 17.317 191.874 17.2889C191.895 17.2608 191.905 17.23 191.905 17.1965V0.634543C191.905 0.590148 191.895 0.556173 191.874 0.533523Z",fill:"currentColor"}),(0,n.jsx)("path",{d:"M201.91 4.58965C201.753 4.39894 201.559 4.30335 201.328 4.30335H196.607C196.565 4.30335 196.531 4.28931 196.505 4.26122C196.479 4.23359 196.466 4.20233 196.466 4.16881V0.802512C196.466 0.768989 196.479 0.738185 196.505 0.710098C196.531 0.682465 196.565 0.667969 196.607 0.667969H201.596C202.855 0.667969 203.94 1.21248 204.853 2.30061L206.065 3.86575L203.705 6.91222L201.91 4.58965ZM210.628 2.28385C211.541 1.20659 212.632 0.667969 213.901 0.667969H218.874C218.916 0.667969 218.947 0.679294 218.969 0.701491C218.989 0.724142 219 0.757664 219 0.802512V4.16881C219 4.20233 218.989 4.23359 218.969 4.26122C218.947 4.28931 218.916 4.30335 218.874 4.30335H214.153C213.922 4.30335 213.728 4.39894 213.571 4.58965L210.093 9.06673L213.587 13.5773C213.744 13.7572 213.933 13.8469 214.153 13.8469H218.874C218.916 13.8469 218.947 13.8609 218.969 13.889C218.989 13.9171 219 13.9538 219 13.9982V17.3645C219 17.398 218.989 17.4292 218.969 17.4569C218.947 17.485 218.916 17.499 218.874 17.499H213.902C212.632 17.499 211.546 16.9549 210.644 15.8664L207.749 12.13L204.853 15.8664C203.94 16.9549 202.849 17.499 201.58 17.499H196.607C196.565 17.499 196.534 17.485 196.513 17.4569C196.492 17.4288 196.481 17.3925 196.481 17.3472V13.9809C196.481 13.9474 196.492 13.9166 196.513 13.8885C196.534 13.8604 196.565 13.8464 196.607 13.8464H201.328C201.548 13.8464 201.742 13.7513 201.91 13.5601L205.325 9.15053L210.628 2.28385Z",fill:"currentColor"})]}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_3615_54299",children:(0,n.jsx)("rect",{width:"219",height:"17",fill:"white",transform:"translate(0 0.5)"})})})]}),o=({width:e="24px",height:t="24px",fill:r="#627EEA"})=>(0,n.jsxs)(a.J,{width:e,height:t,viewBox:"0 0 30 30",fill:"none",children:[(0,n.jsx)("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15Z",fill:r}),(0,n.jsx)("path",{d:"M15.467 3.75v8.316l7.028 3.14L15.467 3.75Z",fill:"#fff",fillOpacity:".602"}),(0,n.jsx)("path",{d:"m15.467 3.75-7.03 11.456 7.03-3.14V3.75Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M15.467 20.595v5.65l7.033-9.73-7.033 4.08Z",fill:"#fff",fillOpacity:".602"}),(0,n.jsx)("path",{d:"M15.467 26.245v-5.651l-7.03-4.08 7.03 9.731Z",fill:"#fff"}),(0,n.jsx)("path",{d:"m15.467 19.287 7.028-4.08-7.028-3.14v7.22Z",fill:"#fff",fillOpacity:".2"}),(0,n.jsx)("path",{d:"m8.438 15.206 7.029 4.081v-7.22l-7.03 3.14Z",fill:"#fff",fillOpacity:".602"})]}),l=({width:e="25px",height:t="24px",color:r="#2ED9FF",fill:i="#0E052F",...o})=>(0,n.jsxs)(a.J,{width:e,height:t,viewBox:"0 0 30 31",fill:"none",...o,children:[(0,n.jsx)("path",{d:"M30 15.268c0 8.284-6.716 15-15 15-8.284 0-15-6.716-15-15 0-8.285 6.716-15 15-15 8.284 0 15 6.715 15 15Z",fill:i}),(0,n.jsx)("path",{d:"M10.107 11.673a.624.624 0 0 0-.487-.224H5.674a.115.115 0 0 1-.086-.033.1.1 0 0 1-.032-.073V8.706a.1.1 0 0 1 .032-.072.115.115 0 0 1 .086-.033h4.17c1.053 0 1.96.426 2.723 1.279l1.013 1.226-1.973 2.387-1.5-1.82Zm7.289-1.806c.763-.844 1.675-1.266 2.736-1.266h4.157c.035 0 .061.008.08.026.017.018.026.044.026.079v2.637c0 .027-.01.051-.027.073s-.044.033-.079.033h-3.946a.624.624 0 0 0-.487.224l-2.908 3.508 2.92 3.534c.133.14.29.211.475.211h3.946c.035 0 .061.011.08.033.017.022.026.05.026.086v2.637c0 .026-.01.05-.027.073-.017.021-.044.033-.079.033h-4.157c-1.061 0-1.969-.427-2.723-1.28l-2.42-2.927-2.422 2.927c-.763.853-1.675 1.28-2.736 1.28H5.674c-.035 0-.062-.012-.08-.034a.132.132 0 0 1-.025-.085V19.03c0-.026.008-.05.026-.072.017-.022.044-.033.079-.033H9.62a.65.65 0 0 0 .487-.225l2.855-3.454 4.434-5.38Z",fill:r})]}),s=({width:e="24px",height:t="24px",color:r="white",fill:i="#FF0420",...o})=>(0,n.jsxs)(a.J,{width:e,height:t,viewBox:"0 0 34 34",...o,children:[(0,n.jsx)("path",{d:"M17 34C26.3888 34 34 26.3888 34 17C34 7.61116 26.3888 0 17 0C7.61116 0 0 7.61116 0 17C0 26.3888 7.61116 34 17 34Z",fill:i}),(0,n.jsx)("path",{d:"M12.3295 21.76C11.3042 21.76 10.4641 21.5131 9.80918 21.0195C9.16298 20.5171 8.83984 19.8031 8.83984 18.8775C8.83984 18.6836 8.8614 18.4456 8.90444 18.1635C9.01651 17.5289 9.1759 16.7664 9.38269 15.8761C9.96858 13.452 11.4808 12.24 13.9193 12.24C14.5828 12.24 15.1773 12.3546 15.7029 12.5838C16.2285 12.8041 16.6421 13.1391 16.9437 13.5886C17.2453 14.0294 17.3961 14.5583 17.3961 15.1753C17.3961 15.3604 17.3745 15.594 17.3314 15.8761C17.2022 16.6606 17.0471 17.4231 16.8662 18.1635C16.5646 19.3711 16.0433 20.2747 15.3022 20.8741C14.5612 21.4647 13.5703 21.76 12.3295 21.76ZM12.5105 19.856C12.993 19.856 13.4023 19.7105 13.7384 19.4196C14.083 19.1288 14.3286 18.6836 14.4751 18.0842C14.6732 17.2556 14.824 16.5328 14.9274 15.9158C14.9619 15.7306 14.9791 15.5411 14.9791 15.3472C14.9791 14.5451 14.5699 14.144 13.7513 14.144C13.2688 14.144 12.8552 14.2894 12.5105 14.5803C12.1744 14.8712 11.9332 15.3164 11.7867 15.9158C11.6316 16.5064 11.4765 17.2291 11.3214 18.0842C11.287 18.2605 11.2697 18.4456 11.2697 18.6395C11.2697 19.4505 11.6833 19.856 12.5105 19.856Z",fill:r}),(0,n.jsx)("path",{d:"M17.9895 21.6278C17.8947 21.6278 17.8215 21.597 17.7698 21.5352C17.7267 21.4647 17.7138 21.3854 17.731 21.2972L19.5146 12.7028C19.5318 12.6059 19.5792 12.5265 19.6568 12.4648C19.7344 12.4031 19.8162 12.3722 19.9024 12.3722H23.3404C24.2968 12.3722 25.0636 12.575 25.641 12.9805C26.2269 13.386 26.5199 13.9721 26.5199 14.739C26.5199 14.9594 26.494 15.1886 26.4423 15.4266C26.2269 16.4403 25.7918 17.1895 25.1369 17.6744C24.4907 18.1592 23.6031 18.4016 22.4744 18.4016H20.7295L20.135 21.2972C20.1178 21.3942 20.0704 21.4735 19.9928 21.5352C19.9153 21.597 19.8334 21.6278 19.7473 21.6278H17.9895ZM22.5648 16.5769C22.9267 16.5769 23.2412 16.4755 23.5084 16.2728C23.7841 16.0701 23.965 15.7792 24.0513 15.4001C24.0771 15.2503 24.09 15.1181 24.09 15.0035C24.09 14.7479 24.0168 14.5539 23.8703 14.4217C23.7238 14.2806 23.4739 14.2101 23.1206 14.2101H21.5697L21.0785 16.5769H22.5648Z",fill:r})]}),c=({width:e="15px",height:t="15px",...r})=>(0,n.jsxs)(a.J,{width:e,height:t,viewBox:"0 0 19 18",fill:"none",...r,children:[(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.79517 2.75357C6.44891 2.75357 3.73624 5.46625 3.73624 8.8125C3.73624 12.1588 6.44891 14.8714 9.79517 14.8714C13.1414 14.8714 15.8541 12.1588 15.8541 8.8125C15.8541 5.46625 13.1414 2.75357 9.79517 2.75357ZM2.48267 8.8125C2.48267 4.77392 5.75658 1.5 9.79517 1.5C13.8337 1.5 17.1077 4.77392 17.1077 8.8125C17.1077 12.8511 13.8337 16.125 9.79517 16.125C5.75658 16.125 2.48267 12.8511 2.48267 8.8125Z",fill:"white"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.03962 7.48711C9.04452 7.25329 9.11127 7.15806 9.15621 7.11271C9.21551 7.05288 9.33009 6.98862 9.54225 6.95486C9.98435 6.88451 10.5823 6.98693 11.0758 7.11688L11.6819 7.27652L12.0011 6.06428L11.395 5.90465C10.8745 5.76757 10.0611 5.60296 9.34526 5.71686C8.97845 5.77523 8.57742 5.91591 8.26586 6.23026C7.94168 6.55735 7.78576 6.99985 7.78576 7.51481V7.53855L7.78756 7.56221C7.83275 8.15802 8.18724 8.55401 8.55492 8.8144C8.89199 9.05311 9.30983 9.22697 9.64735 9.36742C9.66009 9.37272 9.67272 9.37797 9.68522 9.38318C10.0665 9.54198 10.3494 9.6643 10.5455 9.80792C10.7181 9.93436 10.7353 10.0108 10.7353 10.0783C10.7353 10.3402 10.6583 10.4442 10.5979 10.4988C10.5171 10.5719 10.3654 10.6431 10.1066 10.6754C9.57934 10.741 8.8945 10.6119 8.39035 10.4769L7.7849 10.3148L7.4606 11.5257L8.06605 11.6878C8.59887 11.8305 9.48099 12.0165 10.2615 11.9193C10.6565 11.8701 11.0939 11.7404 11.4387 11.4286C11.8039 11.0983 11.9889 10.6336 11.9889 10.0783C11.9889 9.47293 11.6504 9.06337 11.2862 8.79661C10.9547 8.55379 10.534 8.37864 10.1954 8.23769C10.1859 8.23376 10.1765 8.22986 10.1672 8.22598C9.78653 8.06741 9.49239 7.94221 9.27941 7.79139C9.09878 7.66347 9.051 7.56996 9.03962 7.48711Z",fill:"white"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.79517 11.0063C10.1413 11.0063 10.422 11.2869 10.422 11.633V13.2H9.16838V11.633C9.16838 11.2869 9.449 11.0063 9.79517 11.0063Z",fill:"white"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.422 4.425V5.99196C10.422 6.33813 10.1413 6.61875 9.79517 6.61875C9.449 6.61875 9.16838 6.33813 9.16838 5.99196V4.425H10.422Z",fill:"white"})]}),d=({width:e="42px",height:t="42px"})=>(0,n.jsxs)(a.J,{width:e,height:t,viewBox:"0 0 42 42",fill:"none",children:[(0,n.jsxs)("g",{clipPath:"url(#a)",children:[(0,n.jsx)("path",{fill:"#F7931A",d:"M21 42c11.598 0 21-9.402 21-21S32.598 0 21 0 0 9.402 0 21s9.402 21 21 21z"}),(0,n.jsx)("path",{fill:"#fff",d:"M30.436 18.401c.412-2.75-1.684-4.23-4.548-5.217l.93-3.727-2.269-.565-.905 3.63c-.596-.15-1.208-.29-1.818-.429l.912-3.652-2.268-.566-.93 3.726c-.493-.113-.978-.223-1.448-.341l.002-.012-3.129-.78-.603 2.422s1.684.386 1.648.41c.919.23 1.084.837 1.057 1.32l-1.058 4.246c.063.016.144.04.236.075l-.24-.06-1.483 5.949c-.113.278-.398.697-1.041.538.024.033-1.649-.41-1.649-.41l-1.126 2.595 2.953.737c.549.137 1.087.282 1.616.417l-.938 3.77 2.266.564.93-3.728c.62.167 1.22.322 1.808.469l-.926 3.712 2.268.564.938-3.762c3.87.733 6.778.438 8.002-3.062.987-2.816-.048-4.442-2.084-5.502 1.483-.34 2.599-1.316 2.897-3.33zM25.25 25.67c-.7 2.818-5.444 1.294-6.982.912l1.247-4.994c1.538.385 6.47 1.145 5.735 4.082zm.703-7.31c-.64 2.564-4.588 1.26-5.867.942l1.128-4.528c1.28.318 5.405.913 4.739 3.587z"})]}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"a",children:(0,n.jsx)("path",{fill:"#fff",d:"M0 0h42v42H0z"})})})]});var h=r(63883);const u=({width:e="24px",height:t="24px",...r})=>(0,n.jsxs)(a.J,{width:e,height:t,viewBox:"0 0 42 42",...r,children:[(0,n.jsx)("circle",{cx:"21",cy:"21",r:"21",fill:"#2D374B"}),(0,n.jsx)("path",{d:"M25.089 19.4942L27.7327 15.0085L34.8586 26.1072L34.8619 28.2365L34.8386 13.5798C34.8303 13.403 34.7795 13.2308 34.6907 13.0777C34.6018 12.9246 34.4774 12.7952 34.328 12.7003L21.4989 5.32125C21.3456 5.24842 21.1779 5.21102 21.0082 5.21182C20.8386 5.21262 20.6712 5.2516 20.5186 5.32587C20.479 5.34572 20.4407 5.3679 20.4037 5.39231L20.3591 5.42053L7.90602 12.6367L7.85753 12.6585C7.79299 12.6884 7.7314 12.7243 7.67359 12.7657C7.44004 12.9325 7.28088 13.1839 7.23002 13.4664C7.22223 13.5092 7.21692 13.5525 7.21411 13.5959L7.23361 25.5397L13.871 15.2522C14.7066 13.8881 16.5273 13.4487 18.2174 13.4725L20.201 13.5238L8.51275 32.2682L9.89067 33.0614L21.719 13.5426L26.9472 13.5236L15.1494 33.5342L20.0663 36.3639L20.6538 36.7018C20.9073 36.8025 21.1886 36.8081 21.4458 36.7175L34.4553 29.1783L31.9668 30.6196L25.089 19.4942ZM26.0978 34.0217L21.132 26.228L24.1631 21.0845L30.6846 31.3633L26.0978 34.0217Z",fill:"#2D374B"}),(0,n.jsx)("path",{d:"M21.1323 26.228L26.0981 34.0214L30.6851 31.363L24.1639 21.0845L21.1323 26.228Z",fill:"#28A0F0"}),(0,n.jsx)("path",{d:"M34.8623 28.2368L34.859 26.1074L27.7331 15.0087L25.0879 19.4939L31.9669 30.6193L34.4554 29.1781C34.5759 29.0804 34.6745 28.9584 34.7446 28.8201C34.8148 28.6818 34.855 28.5302 34.8626 28.3753L34.8623 28.2368Z",fill:"#28A0F0"}),(0,n.jsx)("path",{d:"M5.00171 30.2455L8.5141 32.2694L20.2024 13.5251L18.2187 13.4738C16.5286 13.4499 14.7079 13.8891 13.8723 15.2534L7.23495 25.541L5.00299 28.9718V30.2466L5.00171 30.2455Z",fill:"white"}),(0,n.jsx)("path",{d:"M26.9474 13.5248L21.7195 13.5438L9.89111 33.0626L14.0254 35.4431L15.1496 33.5362L26.9474 13.5248Z",fill:"white"}),(0,n.jsx)("path",{d:"M37.065 13.4979C37.0411 12.9583 36.8863 12.4327 36.614 11.9664C36.3417 11.5 35.96 11.1068 35.5019 10.8208L22.5047 3.34657C22.0407 3.11856 21.5306 3 21.0137 3C20.4967 3 19.9866 3.11856 19.5226 3.34657C19.4141 3.40121 6.88305 10.6689 6.88305 10.6689C6.70895 10.7525 6.54242 10.8511 6.38535 10.9634C5.97846 11.2528 5.64243 11.6306 5.40249 12.0684C5.16255 12.5063 5.02494 12.9928 5 13.4915V28.971L7.23196 25.5402L7.21477 13.5969C7.22521 13.4332 7.27184 13.2738 7.35129 13.1302C7.43074 12.9867 7.54104 12.8625 7.67424 12.7667C7.73325 12.7244 20.4782 5.34712 20.5188 5.32685C20.6714 5.25259 20.8387 5.21361 21.0084 5.21281C21.1781 5.21201 21.3458 5.24941 21.4991 5.32224L34.3282 12.7018C34.4776 12.7967 34.602 12.9261 34.6908 13.0792C34.7797 13.2323 34.8304 13.4045 34.8387 13.5813V28.3768C34.8356 28.5302 34.7998 28.6812 34.7337 28.8196C34.6675 28.9581 34.5726 29.0808 34.4552 29.1796L31.9667 30.6208L30.684 31.3648L26.0969 34.0232L21.4449 36.7192C21.1877 36.81 20.9064 36.8044 20.653 36.7036L15.1493 33.538L14.0251 35.4447L18.9713 38.2924C19.135 38.3852 19.2807 38.4678 19.4002 38.5351C19.5855 38.6377 19.7117 38.7082 19.7561 38.7298C20.1699 38.9111 20.6173 39.0032 21.0691 38.9999C21.4834 39.0005 21.8942 38.9232 22.28 38.7721L35.7915 30.9474C36.1727 30.6509 36.4843 30.2744 36.7042 29.8445C36.9242 29.4145 37.0471 28.9415 37.0645 28.4589L37.065 13.4979Z",fill:"#96BEDC"})]}),x=({symbol:e,fill:t="#00D1FF",color:r="#FFFFFF",...a})=>{switch(e){case"WETH":case"ETH":return(0,n.jsx)(o,{...a});case"SNX":case"fSNX":case"fwSNX":return(0,n.jsx)(l,{fill:t,color:r,...a});case"OP":return(0,n.jsx)(s,{...a});case"sUSD":case"sUSD":case"snxUSD":return(0,n.jsx)(c,{...a});case"WBTC":return(0,n.jsx)(d,{...a});case"sUSDC":case"USDC":case"USDh":case"fUSDC":return(0,n.jsx)(h.o,{...a});case"ARB":return(0,n.jsx)(u,{...a});default:return(0,n.jsx)(p,{...a})}},p=({width:e="32px",height:t="32px",...r})=>(0,n.jsxs)(a.J,{width:e,height:t,viewBox:"0 0 32 32",fill:"none",...r,children:[(0,n.jsx)("circle",{cx:"16",cy:"16",r:"15",fill:"white",stroke:"white"}),(0,n.jsx)("path",{d:"M14.1156 19.2899V19.0472C14.1205 18.2147 14.1955 17.551 14.3408 17.0563C14.4908 16.5615 14.7087 16.1619 14.9944 15.8574C15.28 15.5529 15.6238 15.277 16.0257 15.0296C16.3258 14.8393 16.5946 14.6419 16.8318 14.4373C17.069 14.2328 17.2579 14.0068 17.3983 13.7594C17.5387 13.5073 17.6089 13.2266 17.6089 12.9174C17.6089 12.5891 17.529 12.3013 17.3692 12.0539C17.2095 11.8065 16.994 11.6162 16.7229 11.483C16.4566 11.3498 16.1612 11.2832 15.8368 11.2832C15.5221 11.2832 15.2244 11.3522 14.9435 11.4901C14.6627 11.6233 14.4327 11.8232 14.2536 12.0896C14.0745 12.3512 13.9776 12.6771 13.9631 13.0672H11C11.0242 12.1157 11.2566 11.3308 11.6972 10.7123C12.1378 10.0891 12.7212 9.62525 13.4475 9.32078C14.1737 9.01155 14.975 8.85693 15.8514 8.85693C16.8149 8.85693 17.667 9.01393 18.4078 9.32791C19.1485 9.63714 19.7295 10.0867 20.1508 10.6766C20.572 11.2665 20.7826 11.9778 20.7826 12.8103C20.7826 13.3669 20.6882 13.8617 20.4994 14.2946C20.3154 14.7228 20.0564 15.1034 19.7223 15.4364C19.3882 15.7646 18.9936 16.062 18.5385 16.3284C18.156 16.552 17.8413 16.7851 17.5944 17.0277C17.3523 17.2703 17.1707 17.551 17.0497 17.8698C16.9335 18.1885 16.873 18.581 16.8681 19.0472V19.2899H14.1156ZM15.5536 23.8569C15.0694 23.8569 14.6555 23.6904 14.3117 23.3574C13.9728 23.0196 13.8058 22.6153 13.8106 22.1443C13.8058 21.6781 13.9728 21.2784 14.3117 20.9454C14.6555 20.6124 15.0694 20.4459 15.5536 20.4459C16.0136 20.4459 16.4178 20.6124 16.7664 20.9454C17.115 21.2784 17.2918 21.6781 17.2966 22.1443C17.2918 22.4583 17.207 22.7461 17.0424 23.0077C16.8826 23.2646 16.672 23.4716 16.4106 23.6286C16.1491 23.7808 15.8635 23.8569 15.5536 23.8569Z",fill:"#06061B"})]}),m=({width:e="20px",height:t="20px",...r})=>(0,n.jsx)(a.J,{width:e,height:t,color:"cyan.400",viewBox:"0 0 20 20",fill:"none",...r,children:(0,n.jsx)("path",{d:"M9.99962 10.9766L14.1246 6.85156L15.303 8.0299L9.99962 13.3332L4.69629 8.0299L5.87462 6.85156L9.99962 10.9766Z",fill:"currentColor"})}),f=({width:e="20px",height:t="20px",...r})=>(0,n.jsx)(a.J,{width:e,height:t,color:"cyan.400",viewBox:"0 0 25 24",fill:"none",...r,children:(0,n.jsx)("path",{d:"M12.3564 10.828L7.40643 15.778L5.99243 14.364L12.3564 8L18.7204 14.364L17.3064 15.778L12.3564 10.828Z",fill:"currentColor"})}),g=({w:e="94px",h:t="94px"})=>(0,n.jsxs)(a.J,{w:e,h:t,viewBox:"0 0 94 94",fill:"none",children:[(0,n.jsx)("g",{filter:"url(#filter0_d_1044_28165)",children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M47 76.3333C63.2004 76.3333 76.3333 63.2004 76.3333 47C76.3333 30.7996 63.2004 17.6667 47 17.6667C30.7996 17.6667 17.6667 30.7996 17.6667 47C17.6667 63.2004 30.7996 76.3333 47 76.3333ZM47 79C64.6731 79 79 64.6731 79 47C79 29.3269 64.6731 15 47 15C29.3269 15 15 29.3269 15 47C15 64.6731 29.3269 79 47 79Z",fill:"#FF4A60"})}),(0,n.jsx)("g",{filter:"url(#filter1_d_1044_28165)",children:(0,n.jsx)("path",{d:"M56.3334 39.5466L54.4534 37.6666L47.0001 45.12L39.5467 37.6666L37.6667 39.5466L45.1201 47L37.6667 54.4533L39.5467 56.3333L47.0001 48.88L54.4534 56.3333L56.3334 54.4533L48.8801 47L56.3334 39.5466Z",fill:"#FF4A60"})}),(0,n.jsxs)("defs",{children:[(0,n.jsxs)("filter",{id:"filter0_d_1044_28165",x:"0",y:"0",width:"94",height:"94",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feOffset",{}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"7.5"}),(0,n.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 0.116667 0 0 0 0 0.222667 0 0 0 0.6 0"}),(0,n.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_1044_28165"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_1044_28165",result:"shape"})]}),(0,n.jsxs)("filter",{id:"filter1_d_1044_28165",x:"22.6667",y:"22.6666",width:"48.6667",height:"48.6666",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feOffset",{}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"7.5"}),(0,n.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 0.116667 0 0 0 0 0.222667 0 0 0 0.6 0"}),(0,n.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_1044_28165"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_1044_28165",result:"shape"})]})]})]}),y=({width:e="20px",height:t="20ox",color:r="whiteAlpha.700",...i})=>(0,n.jsxs)(a.J,{width:e,color:r,height:t,viewBox:"0 0 20 20",fill:"none",...i,children:[(0,n.jsx)("path",{d:"M6.58154 6.2701C6.23637 6.2701 5.95654 6.54993 5.95654 6.8951C5.95654 7.24028 6.23637 7.5201 6.58154 7.5201H10.3101C10.6553 7.5201 10.9351 7.24028 10.9351 6.8951C10.9351 6.54993 10.6553 6.2701 10.3101 6.2701H6.58154Z",fill:"currentColor"}),(0,n.jsx)("path",{d:"M13.972 9.10498C13.6268 9.10498 13.347 9.38481 13.347 9.72998C13.347 10.0752 13.6268 10.355 13.972 10.355H14.1873C14.5324 10.355 14.8123 10.0752 14.8123 9.72998C14.8123 9.38481 14.5324 9.10498 14.1873 9.10498H13.972Z",fill:"currentColor"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.2918 11.6311L17.2916 11.6447V12.3416C17.2916 14.6883 15.3892 16.5907 13.0426 16.5907H7.07331C4.72664 16.5907 2.82422 14.6883 2.82422 12.3416V7.38508C2.82422 5.0384 4.72664 3.13599 7.07331 3.13599H13.0426C15.3892 3.13599 17.2916 5.0384 17.2916 7.38508V7.90016L17.2918 7.91382L17.2916 7.92747V11.6174L17.2918 11.6311ZM7.07331 4.38599C5.41699 4.38599 4.07422 5.72876 4.07422 7.38508V12.3416C4.07422 13.9979 5.41699 15.3407 7.07331 15.3407H13.0426C14.6989 15.3407 16.0416 13.9979 16.0416 12.3416V12.2561H13.871C12.4998 12.2552 11.3876 11.1445 11.3867 9.77282C11.3867 8.40047 12.4998 7.28966 13.8706 7.28882H16.0401C15.9893 5.67705 14.6667 4.38599 13.0426 4.38599H7.07331ZM13.8714 11.0061H16.0416V8.53882H13.8712C13.1891 8.53932 12.6369 9.09162 12.6367 9.77223C12.6372 10.4535 13.1895 11.0056 13.8714 11.0061Z",fill:"currentColor"})]}),b=({color:e="cyan.400",width:t="29",height:r="21"})=>(0,n.jsx)(a.J,{width:t,height:r,viewBox:"0 0 29 21",fill:"none",color:e,children:(0,n.jsx)("path",{d:"M6.81239 5.45766C6.61525 5.22805 6.37254 5.11297 6.08372 5.11297H0.177C0.124536 5.11297 0.0816109 5.09606 0.0492845 5.06224C0.0164282 5.02898 0 4.99134 0 4.95098V0.89807C0 0.85771 0.0164282 0.820622 0.0492845 0.786807C0.0816109 0.752992 0.124536 0.736084 0.177 0.736084H6.41864C7.99362 0.736084 9.35239 1.39166 10.4944 2.70173L12.0106 4.58611L9.05721 8.25396L6.81239 5.45766ZM17.7207 2.68155C18.8627 1.38457 20.2278 0.736084 21.8161 0.736084H28.0381C28.0906 0.736084 28.1298 0.749719 28.1563 0.776444C28.1822 0.803714 28.1955 0.844074 28.1955 0.89807V4.95098C28.1955 4.99134 28.1822 5.02898 28.1563 5.06224C28.1298 5.09606 28.0906 5.11297 28.0381 5.11297H22.1314C21.8426 5.11297 21.5998 5.22805 21.4027 5.45766L17.0514 10.8479L21.4223 16.2785C21.6195 16.495 21.8553 16.603 22.1314 16.603H28.0381C28.0906 16.603 28.1298 16.6199 28.1563 16.6538C28.1822 16.6876 28.1955 16.7318 28.1955 16.7852V20.8381C28.1955 20.8785 28.1822 20.9161 28.1563 20.9494C28.1298 20.9832 28.0906 21.0001 28.0381 21.0001H21.8161C20.2278 21.0001 18.8691 20.3451 17.7403 19.0345L14.1176 14.5359L10.4944 19.0345C9.35239 20.3451 7.98727 21.0001 6.39903 21.0001H0.177C0.124536 21.0001 0.0847905 20.9832 0.0588234 20.9494C0.0323264 20.9156 0.0196078 20.8719 0.0196078 20.8174V16.7645C0.0196078 16.7241 0.0323264 16.687 0.0588234 16.6532C0.0847905 16.6194 0.124536 16.6025 0.177 16.6025H6.08372C6.35929 16.6025 6.602 16.488 6.81239 16.2578L11.0848 10.9488L17.7207 2.68155Z",fill:"currentColor"})}),j=({width:e="15px",height:t="15px",...r})=>(0,n.jsx)(a.J,{width:e,height:t,viewBox:"0 0 18 18",fill:"none",...r,children:(0,n.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.48247 2.4375C4.94851 2.4375 4.51566 2.87036 4.51566 3.40431V5.43752H3.21022C2.67626 5.43752 2.24341 5.87038 2.24341 6.40434V8.59571C2.24341 9.12967 2.67626 9.56252 3.21022 9.56252H4.75822V11.4382C4.24137 11.4576 3.82831 11.8827 3.82831 12.4043V14.5957C3.82831 15.1296 4.26117 15.5625 4.79512 15.5625H13.8598C14.3938 15.5625 14.8266 15.1296 14.8266 14.5957V12.5618C15.3435 12.5424 15.7565 12.1173 15.7565 11.5957V9.40431C15.7565 8.87036 15.3237 8.4375 14.7897 8.4375H13.2417V6.5625H14.5472C15.0811 6.5625 15.514 6.12964 15.514 5.59569V3.40431C15.514 2.87036 15.0811 2.4375 14.5472 2.4375H5.48247ZM5.64066 5.4375V3.5625H14.389V5.4375H5.64066ZM3.36841 6.56252V8.43752H5.71853L5.72504 8.4375H12.1167V6.56252H3.36841ZM5.88322 11.4375V9.56252H12.2749L12.2814 9.5625H14.6315V11.4375H5.88322ZM4.95331 14.4375V12.5625H13.7016V14.4375H4.95331Z",fill:"white"})})}),w=({width:e="119px",height:t="33px",...r})=>(0,n.jsxs)(a.J,{width:e,height:t,fill:"none",viewBox:"0 0 119 33",...r,children:[(0,n.jsx)("path",{d:"M116.41.7H3.436C2.117.7 1.049 1.757 1.049 3.06v26.88c0 1.303 1.068 2.36 2.387 2.36H116.41c1.319 0 2.388-1.056 2.388-2.36V3.06c0-1.303-1.069-2.36-2.388-2.36Z",fill:"#000"}),(0,n.jsx)("path",{d:"M116.41.9c1.206 0 2.185.968 2.185 2.16v26.88c0 1.192-.979 2.16-2.185 2.16H3.436c-1.206 0-2.185-.968-2.185-2.16V3.06C1.25 1.868 2.23.9 3.436.9H116.41Zm0-.4H3.436C2.007.5.846 1.648.846 3.06v26.88c0 1.412 1.161 2.56 2.59 2.56H116.41c1.429 0 2.59-1.148 2.59-2.56V3.06c0-1.412-1.161-2.56-2.59-2.56Z",fill:"#fff"}),(0,n.jsx)("path",{d:"m15.55 7.268-8.092 4.616v9.232l8.092 4.616 8.093-4.616v-9.232L15.55 7.268Zm4.662 11.892-4.662 2.66-4.661-2.66v-5.32l4.661-2.66 4.662 2.66v5.32Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M32.877 20.96c-.036-.212-.214-.544-.708-.544-.368 0-.611.232-.611.488 0 .212.138.38.425.436l.546.104c.708.136 1.089.592 1.089 1.136 0 .592-.502 1.192-1.409 1.192-1.035 0-1.493-.66-1.553-1.208l.704-.184c.032.38.303.724.854.724.408 0 .63-.2.63-.472 0-.224-.17-.396-.473-.456l-.546-.108c-.623-.124-1.024-.524-1.024-1.104 0-.684.623-1.208 1.36-1.208.947 0 1.311.564 1.396 1l-.684.208.004-.004Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M34.641 23.692v-3.856h2.444v.708h-1.683v.88h1.525v.668h-1.525v.892h1.683v.708h-2.444Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M37.987 21.768c0-1.228.943-2.012 1.987-2.012s1.635.652 1.789 1.28l-.716.224c-.093-.368-.397-.776-1.073-.776-.582 0-1.197.412-1.197 1.288 0 .82.582 1.272 1.21 1.272.667 0 .99-.428 1.096-.788l.708.212c-.15.592-.708 1.312-1.805 1.312-1.096 0-1.998-.776-1.998-2.008v-.004Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M42.739 22.328v-2.492h.76v2.436c0 .504.288.772.737.772s.744-.268.744-.772v-2.436h.761v2.492c0 .948-.667 1.452-1.501 1.452-.834 0-1.497-.504-1.497-1.452h-.004Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M48.136 22.208h-.396v1.484h-.765v-3.856h1.526c.76 0 1.242.516 1.242 1.184 0 .54-.32.948-.83 1.092l.838 1.576h-.846l-.765-1.484-.004.004Zm.219-.648c.384 0 .61-.216.61-.532 0-.316-.226-.54-.61-.54h-.615v1.072h.615Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M50.798 23.692v-3.856h2.444v.708H51.56v.88h1.526v.668h-1.526v.892h1.683v.708h-2.444Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M54.388 23.692v-3.856h1.396c1.113 0 1.926.712 1.926 1.932s-.821 1.924-1.93 1.924h-1.392Zm1.364-.696c.64 0 1.173-.392 1.173-1.228s-.53-1.236-1.165-1.236h-.611v2.464h.607-.004Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M64.864 19.836h.777l-1.08 3.856h-.782l-.89-2.748-.89 2.748h-.793l-1.085-3.856h.806l.716 2.656.866-2.656h.785l.87 2.664.704-2.664h-.004Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M66.538 23.692v-3.856h.77v3.856h-.77Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M70.225 20.548v3.144h-.765v-3.144h-1.234v-.712h3.229v.712h-1.234.004Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M74.834 23.692v-1.6h-1.7v1.6h-.76v-3.856h.76v1.552h1.7v-1.552h.764v3.856h-.764Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M78.391 21.768c0-1.228.943-2.012 1.987-2.012s1.635.652 1.788 1.28l-.716.224c-.093-.368-.396-.776-1.072-.776-.583 0-1.198.412-1.198 1.288 0 .82.583 1.272 1.21 1.272.668 0 .991-.428 1.097-.788l.708.212c-.15.592-.708 1.312-1.805 1.312s-1.999-.776-1.999-2.008v-.004Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M85.67 23.692v-1.6h-1.699v1.6h-.76v-3.856h.76v1.552h1.7v-1.552h.764v3.856h-.764Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M90.036 22.812H88.45l-.324.88h-.805l1.497-3.856h.882l1.485 3.856h-.825l-.324-.88Zm-1.331-.684h1.08l-.538-1.456-.538 1.456h-.004Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M92.072 23.692v-3.856h.769v3.856h-.77Z",fill:"#fff"}),(0,n.jsx)("path",{d:"m96.648 23.692-1.773-2.736v2.736h-.76v-3.856h.947l1.622 2.552v-2.552h.76v3.856h-.796Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M98.723 23.692v-3.856h.76v3.14h1.741v.716h-2.501Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M102.192 23.692v-3.856h.769v3.856h-.769Z",fill:"#fff"}),(0,n.jsx)("path",{d:"m106.768 23.692-1.772-2.736v2.736h-.761v-3.856h.947l1.622 2.552v-2.552h.761v3.856h-.797Z",fill:"#fff"}),(0,n.jsx)("path",{d:"m110.086 22.092-.486.528v1.072h-.761v-3.856h.761v1.748l1.562-1.748h.995l-1.545 1.68 1.557 2.176h-.95l-1.133-1.6Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M30.842 12.352c0-2.024 1.55-3.316 3.274-3.316 1.723 0 2.69 1.076 2.945 2.104l-1.177.368c-.154-.608-.651-1.28-1.768-1.28-.96 0-1.975.68-1.975 2.124 0 1.352.959 2.096 1.995 2.096 1.096 0 1.63-.708 1.805-1.3l1.169.348c-.247.976-1.17 2.16-2.974 2.16-1.805 0-3.29-1.28-3.29-3.308l-.004.004Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M40.514 12.299a1.778 1.778 0 0 0-.365-.036c-.615 0-1.149.296-1.149 1.244v2.016h-1.206v-4.408h1.17v.656c.27-.584.886-.688 1.27-.688.101 0 .19.008.28.016v1.2Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M45.478 13.32c0 1.351-1.008 2.34-2.339 2.34s-2.339-.985-2.339-2.34c0-1.357 1.008-2.34 2.339-2.34s2.339.975 2.339 2.34Zm-1.206 0c0-.833-.542-1.257-1.133-1.257-.59 0-1.133.42-1.133 1.256 0 .836.542 1.256 1.133 1.256.59 0 1.133-.42 1.133-1.256Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M46.902 14.071c.029.348.292.672.818.672.4 0 .59-.208.59-.44 0-.196-.137-.36-.481-.432l-.59-.136c-.863-.188-1.251-.7-1.251-1.316 0-.788.708-1.444 1.667-1.444 1.27 0 1.695.796 1.748 1.272l-1.008.224c-.036-.26-.226-.592-.732-.592-.316 0-.57.188-.57.44 0 .216.161.348.408.396l.635.136c.878.18 1.323.708 1.323 1.352 0 .716-.562 1.452-1.731 1.452-1.344 0-1.805-.86-1.858-1.36l1.032-.224Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M50.9 14.071c.029.348.292.672.818.672.4 0 .59-.208.59-.44 0-.196-.137-.36-.481-.432l-.59-.136c-.863-.188-1.251-.7-1.251-1.316 0-.788.708-1.444 1.667-1.444 1.27 0 1.695.796 1.748 1.272l-1.008.224c-.036-.26-.226-.592-.732-.592-.316 0-.57.188-.57.44 0 .216.161.348.408.396l.636.136c.878.18 1.323.708 1.323 1.352 0 .716-.563 1.452-1.732 1.452-1.34 0-1.805-.86-1.858-1.36l1.032-.224Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M54.007 13.392v-1.056h2.63v1.056h-2.63Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M57.216 12.352c0-2.024 1.55-3.316 3.274-3.316 1.723 0 2.69 1.076 2.945 2.104l-1.177.368c-.154-.608-.652-1.28-1.768-1.28-.96 0-1.975.68-1.975 2.124 0 1.352.96 2.096 1.995 2.096 1.096 0 1.63-.708 1.805-1.3l1.169.348c-.247.976-1.17 2.16-2.974 2.16-1.805 0-3.29-1.28-3.29-3.308l-.004.004Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M65.366 15.524H64.16V9.036h1.206v2.448c.292-.34.781-.484 1.206-.484 1.133 0 1.66.78 1.66 1.748v2.776h-1.207v-2.572c0-.492-.242-.88-.825-.88-.506 0-.805.376-.834.86v2.592Z",fill:"#fff"}),(0,n.jsx)("path",{d:"m70.33 12.987 1.097-.16c.255-.036.336-.16.336-.312 0-.312-.247-.572-.752-.572-.506 0-.818.332-.854.716l-1.069-.224c.073-.692.717-1.452 1.915-1.452 1.412 0 1.938.788 1.938 1.676v2.168c0 .232.028.548.052.7H71.89a2.866 2.866 0 0 1-.045-.528c-.226.348-.651.656-1.315.656-.95 0-1.533-.636-1.533-1.328 0-.788.59-1.228 1.33-1.336l.005-.004Zm1.433.752v-.196l-1.007.152c-.308.044-.555.216-.555.556 0 .26.19.512.579.512.506 0 .98-.24.98-1.02l.003-.004Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M74.576 8.931a.74.74 0 0 1 .745.744c0 .412-.328.724-.745.724a.736.736 0 0 1-.745-.724c0-.392.336-.744.745-.744Zm-.599 6.597v-4.409h1.206v4.409h-1.206Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M77.493 15.523h-1.206v-4.408h1.17v.548c.271-.456.805-.664 1.287-.664 1.104 0 1.614.78 1.614 1.748v2.776h-1.206V12.95c0-.492-.246-.88-.825-.88-.526 0-.834.404-.834.912v2.54Z",fill:"#fff"})]}),C=({width:e="24px",height:t="24px",fill:r="#0052FF",...i})=>(0,n.jsx)(a.J,{width:e,height:t,viewBox:"0 0 111 111",...i,children:(0,n.jsx)("path",{d:"M54.921 110.034C85.359 110.034 110.034 85.402 110.034 55.017C110.034 24.6319 85.359 0 54.921 0C26.0432 0 2.35281 22.1714 0 50.3923H72.8467V59.6416H3.9565e-07C2.35281 87.8625 26.0432 110.034 54.921 110.034Z",fill:r})})},13797:(e,t,r)=>{"use strict";r.d(t,{n:()=>o,T:()=>l});var a=r(79929),n=r(2784),i=r(52322);const o=(0,n.createContext)({collateralChange:(0,a.wei)(0),debtChange:(0,a.wei)(0),setDebtChange:()=>{},setCollateralChange:()=>{}}),l=({children:e})=>{const[t,r]=(0,n.useState)((0,a.wei)(0)),[l,s]=(0,n.useState)((0,a.wei)(0));return(0,i.jsx)(o.Provider,{value:{debtChange:t,setDebtChange:r,collateralChange:l,setCollateralChange:s},children:e})}},42219:(e,t,r)=>{"use strict";r.d(t,{yq:()=>i,os:()=>n,br:()=>a,lm:()=>o,sO:()=>s,Q4:()=>l,kw:()=>c,DM:()=>d});const a=9,n=1.5,i=3e5,o="8678fe160b1f4d45ad3f3f71502fc57b",l=(e="optimism-mainnet")=>{switch(e){case"arbitrum":return"https://subgraph.satsuma-prod.com/ce5e03f52f3b/synthetix/synthetix-arbitrum-mainnet/version/v1/api";case"base-sepolia":return"https://subgraph.satsuma-prod.com/ce5e03f52f3b/synthetix/synthetix-base-sepolia-andromeda/version/v1/api";case"base":return"https://subgraph.satsuma-prod.com/ce5e03f52f3b/synthetix/synthetix-base-mainnet-andromeda/version/v1/api";default:return`https://api.thegraph.com/subgraphs/name/snx-v3/${e}`}},s={TERMS_CONDITIONS_ACCEPTED:"TERMS_CONDITIONS_ACCEPTED"},c="https://synthetixab.rpc.p2p.world/",d="https://synthetixab.rpc.p2p.world/"},95522:(e,t,r)=>{"use strict";r.d(t,{$:()=>s,x:()=>c});var a=r(42219),n=r(17123),i=r(99780),o=r(99268),l=r(10528);const s=async(e,t)=>{if(0===e.length)return[];const r=new n.O(t?a.DM:a.kw);return(await r.getPriceFeedsUpdateData(e.map((({priceFeedId:e})=>e)))).map(((t,r)=>{const{priceFeedId:a,stalenessTolerance:n}=e[r];return i.$.encode(["uint8","uint64","bytes32[]","bytes[]"],[1,n.toBN(),[a],[t]])}))},c=(e,t,r)=>{if(t.length!==r.length)throw new Error("oracleAddresses and signedOffchainData must be the same length");return r.map(((r,a)=>({to:t[a].address,from:e,data:new o.vU(["function fulfillOracleQuery(bytes calldata signedOffchainData) payable external"]).encodeFunctionData("fulfillOracleQuery",[r]),value:l.O$.from(1)})))}},96596:(e,t,r)=>{"use strict";r.d(t,{Aq:()=>o,vz:()=>n,i_:()=>i});var a=r(79929);const n=(e,t=18)=>(0,a.wei)(e,t).toBN(),i=(e,t=6,r=4)=>e.length<=t+r?e:`${e.substring(0,t)}...${e.substring(e.length-r)}`;function o(e,t,r=2){try{const a=e.toString(),n=e.toNumber(),i=n<0?-n-Math.floor(-n):n-Math.floor(n),o=(0!==i?-Math.floor(Math.log10(i)+1):0)+r;return isNaN(n)?a:n.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:o,...t})}catch(t){return e+""}}},77528:(e,t,r)=>{"use strict";r.d(t,{Ax:()=>l,Do:()=>n,Ds:()=>u,Hb:()=>o,Yz:()=>a,sm:()=>i});const a=(e,t)=>(e?.toString(),"andromeda"===t);function n(e){switch(e){case 8453:return"0xBD8004ea5c73E33d405d35d594221Efc733F7E37";case 84532:return"0xD00a601eafC2C131F46105827AFB02b925Adf62A";default:return""}}function i(e){switch(e){case 8453:default:return s;case 84532:return d}}function o(e){switch(e){case 8453:default:return c;case 84532:return h}}function l(e){switch(e){case 8453:return"0x3FC194FA6C26BE94Fc404E69b51793c199c3BF52";case 84532:return"0xF9e9e905d3745F5E0B803a179E17328CFe03B56d";default:return c}}const s="0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913",c="0xC74eA762cF06c9151cE074E6a569a5945b6302E7",d="0xc43708f8987Df3f3681801e5e640667D86Ce3C30",h="0x8069c44244e72443722cfb22DcE5492cba239d39",u="1"},37330:(e,t,r)=>{"use strict";r.d(t,{_:()=>a});const a=e=>null!=e},17716:(e,t,r)=>{"use strict";r.d(t,{E:()=>a,I:()=>n});const a={error:null,modalOpen:!1,txnStatus:"unsent",txnHash:null};function n(e,t){switch(t.type){case"prompting":return{...e,txnStatus:"prompting",modalOpen:!0,error:null};case"pending":return{...e,txnStatus:"pending",txnHash:t.payload.txnHash};case"success":return{...e,txnStatus:"success"};case"error":return{...e,txnStatus:"error",error:t.payload.error};case"settled":return{...e,modalOpen:!1,txnStatus:"unsent",error:null,txnHash:null};default:return e}}},51686:(e,t,r)=>{"use strict";r.d(t,{L:()=>f});r(5875),r(50509),r(38728),r(64810),r(43419),r(32825),r(16093),r(77829),r(60253),r(49225),r(79941),r(57265),r(25888),r(15840),r(37610),r(13351);var a=r(28145),n=r(5717),i=r(99780),o=r(50986),l=r(76885);function s(){const{network:e}=(0,l.LN)(),t=(0,l.yL)(),n=(0,l.mx)(),i=n||t,s=Boolean(n);return(0,a.useQuery)({queryKey:[`${e?.id}-${e?.preset}`,"OracleManagerProxy",{withSigner:s}],queryFn:async function(){if(!e||!i)throw new Error("Network or signer not available");const{address:t,abi:a}=await async function(e,t="main"){switch(`${e}-${t}`){case"1-main":return r.e(2181).then(r.bind(r,22181));case"10-main":return r.e(3085).then(r.bind(r,73085));case"11155111-main":return r.e(3228).then(r.bind(r,13228));case"13370-main":return r.e(490).then(r.bind(r,50490));case"42161-arbthetix":return r.e(5666).then(r.bind(r,35666));case"421614-arbthetix":return r.e(8450).then(r.bind(r,38450));case"8453-andromeda":return r.e(7406).then(r.bind(r,37406));case"84532-andromeda":return r.e(2074).then(r.bind(r,52074));default:throw new Error(`Unsupported chain ${e} for OracleManagerProxy`)}}(e?.id,e?.preset);return new o.CH(t,a,i)},enabled:Boolean(i),staleTime:1/0})}var c=r(30195),d=r(37330),h=r(40109),u=r(55588),x=r(79929);const p=c.z.object({nodeType:c.z.number(),parameters:c.z.string(),parents:c.z.array(c.z.string())}),m=c.z.object({address:c.z.string(),priceFeedId:c.z.string(),stalenessTolerance:u.rK.transform((e=>(0,x.wei)(e)))});const f=()=>{const{data:e}=(0,n.b)(),{data:t}=s(),{data:r}=(0,h.a)(),{network:o}=(0,l.LN)();return(0,a.useQuery)({enabled:Boolean(e&&t&&r),staleTime:1/0,queryKey:[`${o?.id}-${o?.preset}`,"AllCollateralPriceIds"],queryFn:async()=>{if(!(r&&e&&t&&o))throw Error("useAllCollateralPriceIds should not be enabled ");if(!l.nf.includes(`${o.id}-${o.preset}`))return[];const a=await(async({CoreProxy:e})=>await e.getCollateralConfigurations(!1))({CoreProxy:r}),n=a.map((e=>e.oracleNodeId)).map((e=>({target:t.address,callData:t.interface.encodeFunctionData("getNode",[e])}))),{returnData:s}=await e.callStatic.aggregate(n);return function(e,t){const r=new Set;return e.filter((e=>{const a=e[t];return!r.has(a)&&(r.add(a),!0)}))}(s.map(((e,r)=>{const n=t.interface.decodeFunctionResult("getNode",e)[0],{nodeType:o,parameters:l}=p.parse({...n});if(2===o)try{const[e,t,r]=i.$.decode(["address","bytes32","uint256"],l),a=m.parse({address:e,priceFeedId:t,stalenessTolerance:r});return{parameters:l,priceFeedId:a.priceFeedId,address:a.address,stalenessTolerance:a.stalenessTolerance}}catch(e){return console.error("Decoding parameters failed, config:",a[r]),console.error("parameters: ",l),console.error(e),null}})).filter(d._),"priceFeedId")}})}},51380:(e,t,r)=>{"use strict";r.d(t,{y:()=>d});var a=r(28145),n=r(76885),i=r(50986),o=r(55588),l=r(79929);const s=o.rK.transform((e=>(0,l.wei)(e))),c=["function allowance(address, address) view returns (uint256)"],d=({contractAddress:e,spender:t})=>{const{activeWallet:r}=(0,n.Os)(),o=(0,n.yL)(),{network:l}=(0,n.LN)();return(0,a.useQuery)({queryKey:[`${l?.id}-${l?.preset}`,"Allowance",{accountAddress:r?.address},{contractAddress:e,spender:t}],queryFn:async()=>{if(!(e&&t&&r?.address&&o))throw new Error("OMG");const a=new i.CH(e,c,o),n=await a.allowance(r.address,t);return s.parse(n)},enabled:Boolean(r?.address&&e&&t&&o)})}},85649:(e,t,r)=>{"use strict";r.d(t,{P:()=>x,y:()=>p});var a=r(2784),n=r(51380),i=r(50986),o=r(90711),l=r(28145),s=r(76885),c=r(17716),d=r(99),h=r(35834),u=r(95772);const x=["function approve(address spender, uint256 amount) returns (bool)"],p=({contractAddress:e,amount:t,spender:r},p)=>{const[m,f]=(0,a.useReducer)(c.I,c.E),{data:g,refetch:y}=(0,n.y)({contractAddress:e,spender:r}),b=Boolean(g?.gte(t)),j=(0,s.mx)(),{gasSpeed:w}=(0,u.jU)(),C=(0,s.yL)(),v=(0,l.useMutation)({mutationFn:async a=>{if(!(j&&e&&r&&C))throw new Error("Signer, contract address or spender is not defined");if(!b)try{f({type:"prompting"});const n=new i.CH(e,x,j),l=a?o.Bz:t,s=(0,h.o)({provider:C}),c=n.estimateGas.approve(r,l),u=n.populateTransaction.approve(r,l,{gasLimit:c}),[p,m,g]=await Promise.all([s,c,u]),b=(0,d.F)({gasLimit:m,gasPrices:p,gasSpeed:w}),v=await j.sendTransaction({...g,...b});f({type:"pending",payload:{txnHash:v.hash}}),await v.wait(),f({type:"success"}),y()}catch(e){throw f({type:"error",payload:{error:e}}),e}},...p});return{mutation:v,txnState:m,isLoading:v.isPending,approve:v.mutateAsync,refetchAllowance:y,requireApproval:!b}}},76885:(e,t,r)=>{"use strict";r.d(t,{g5:()=>h,dF:()=>d,EY:()=>x,nf:()=>u,M9:()=>m,T9:()=>y,LN:()=>g,yL:()=>j,eK:()=>p,mx:()=>b,Os:()=>f});var a=r(67871),n=r(2784),i=r(23210),o=r(42219);const l=r.p+"SynthetixLogo.6f86ffcf.svg";var s=r(46954),c=r(52322);Number(0).toString(16);const d=({networkId:e,...t})=>{switch(e){case 1:case 11155111:return(0,c.jsx)(i.xi,{w:"24px",h:"24px",...t});case 10:case 11155420:return(0,c.jsx)(i.PF,{w:"24px",h:"24px",...t});case 84531:case 84532:case 8453:return(0,c.jsx)(i.su,{w:"24px",h:"24px",...t});case 13370:return(0,c.jsx)(i.K7,{w:"29px",h:"21px",...t});case 421614:case 42161:return(0,c.jsx)(i.Ri,{w:"24px",h:"24px",...t});default:return(0,c.jsx)(i.Bg,{w:"24px",h:"24px",...t})}},h=[{id:8453,preset:"andromeda",hexId:`0x${Number(8453).toString(16)}`,token:"ETH",name:"base",rpcUrl:e=>`https://base-mainnet.infura.io/v3/${e??o.lm}`,label:"Base",isSupported:!1,publicRpcUrl:"https://base.publicnode.com",isTestnet:!1},{id:1,preset:"main",hexId:`0x${Number(1).toString(16)}`,token:"ETH",name:"mainnet",rpcUrl:e=>`https://mainnet.infura.io/v3/${e??o.lm}`,label:"Ethereum",isSupported:!0,publicRpcUrl:"https://ethereum.publicnode.com",isTestnet:!1},{id:10,preset:"main",hexId:`0x${Number(10).toString(16)}`,token:"ETH",name:"optimism-mainnet",rpcUrl:e=>`https://optimism-mainnet.infura.io/v3/${e??o.lm}`,label:"Optimism",isSupported:!0,publicRpcUrl:"https://mainnet.optimism.io",isTestnet:!1},{id:11155111,preset:"main",hexId:`0x${Number(11155111).toString(16)}`,token:"ETH",name:"sepolia",rpcUrl:e=>`https://sepolia.infura.io/v3/${e??o.lm}`,label:"Sepolia Testnet",isSupported:!0,publicRpcUrl:"https://ethereum-sepolia.publicnode.com",isTestnet:!0},{id:84532,preset:"andromeda",hexId:`0x${Number(84532).toString(16)}`,token:"ETH",name:"base-sepolia",rpcUrl:e=>`https://base-sepolia.infura.io/v3/${e??o.lm}`,label:"Base Sepolia",isSupported:!1,publicRpcUrl:"https://sepolia.base.org",isTestnet:!0},{id:13370,preset:"main",hexId:`0x${Number(13370).toString(16)}`,token:"ETH",name:"cannon",rpcUrl:()=>"http://127.0.0.1:8545",label:"Cannon",isSupported:!1,publicRpcUrl:"http://127.0.0.1:8545",isTestnet:!0},{id:11155420,preset:"main",hexId:`0x${Number(11155420).toString(16)}`,token:"ETH",name:"optimism-sepolia",rpcUrl:e=>`https://optimism-sepolia.infura.io/v3/${e??o.lm}`,label:"Optimism Sepolia",isSupported:!1,publicRpcUrl:"https://sepolia.optimism.io/",isTestnet:!0},{id:421614,preset:"arbthetix",hexId:`0x${Number(421614).toString(16)}`,token:"ETH",name:"arbitrum-sepolia",rpcUrl:e=>`https://arbitrum-sepolia.infura.io/v3/${e??o.lm}`,label:"Arbitrum Sepolia",isSupported:!0,publicRpcUrl:"https://sepolia.arbiscan.io/",isTestnet:!0},{id:42161,preset:"arbthetix",hexId:`0x${Number(42161).toString(16)}`,token:"ETH",name:"arbitrum",rpcUrl:e=>`https://arbitrum-mainnet.infura.io/v3/${e??o.lm}`,label:"Arbitrum",isSupported:!0,publicRpcUrl:"https://arbiscan.io/",isTestnet:!1}],u=["8453-andromeda","84531-andromeda","84532-andromeda","42161-arbthetix"],x=(h.find((e=>`${e.id}-${e.preset}`===window.localStorage.getItem("DEFAULT_NETWORK")))??h[1],{name:"Synthetix",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzQwIiBoZWlnaHQ9IjI0MCIKICAgIHZpZXdCb3g9IjAgMCAzNDAgMjQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxwYXRoIGZpbGw9IiMwMEQxRkYiIGQ9Ik04Mi4xNDggNTUuOTJjLTIuMzc3LTIuNzItNS4zMDQtNC4wODMtOC43ODYtNC4wODNIMi4xMzRjLS42MzIgMC0xLjE1LS4yLTEuNTQtLjYtLjM5Ni0uMzk1LS41OTQtLjg0LS41OTQtMS4zMTl2LTQ4QzAgMS40NC4xOTggMS4wMDEuNTk0LjYwMS45ODQuMiAxLjUwMiAwIDIuMTM0IDBINzcuNGMxOC45OTIgMCAzNS4zNzcgNy43NjQgNDkuMTQ5IDIzLjI4bDE4LjI4MyAyMi4zMTctMzUuNjE0IDQzLjQ0LTI3LjA3LTMzLjExOFptMTMxLjU0LTMyLjg4QzIyNy40NTkgNy42OCAyNDMuOTIxIDAgMjYzLjA3MyAwaDc1LjAyOWMuNjMzIDAgMS4xMDYuMTYxIDEuNDI1LjQ3OC4zMTMuMzIzLjQ3My44MDEuNDczIDEuNDR2NDhjMCAuNDc4LS4xNi45MjQtLjQ3MyAxLjMxOC0uMzE5LjQtLjc5Mi42LTEuNDI1LjZoLTcxLjIyN2MtMy40ODMgMC02LjQxIDEuMzY0LTguNzg3IDQuMDgzbC01Mi40NzEgNjMuODM5IDUyLjcwOCA2NC4zMTZjMi4zNzcgMi41NjUgNS4yMjEgMy44NDQgOC41NSAzLjg0NGg3MS4yMjdjLjYzMyAwIDEuMTA2LjIgMS40MjUuNi4zMTMuNDAxLjQ3My45MjQuNDczIDEuNTU3djQ4YzAgLjQ3OC0uMTYuOTI0LS40NzMgMS4zMTgtLjMxOS40LS43OTIuNjAxLTEuNDI1LjYwMWgtNzUuMDI5Yy0xOS4xNTIgMC0zNS41MzctNy43NTgtNDkuMTQ5LTIzLjI4bC00My42ODQtNTMuMjc4LTQzLjY5MSA1My4yNzhjLTEzLjc3MiAxNS41MjItMzAuMjMzIDIzLjI4LTQ5LjM4NSAyMy4yOEgyLjEzNGMtLjYzMiAwLTEuMTEyLS4yMDEtMS40MjUtLjYwMS0uMzItLjQwMS0uNDczLS45MTctLjQ3My0xLjU2M3YtNDhjMC0uNDc4LjE1NC0uOTE4LjQ3My0xLjMxOC4zMTMtLjQwMS43OTMtLjYwMSAxLjQyNS0uNjAxaDcxLjIyOGMzLjMyMyAwIDYuMjUtMS4zNTYgOC43ODYtNC4wODJsNTEuNTItNjIuODc2IDgwLjAyLTk3LjkxMloiLz4KPC9zdmc+Cg==",logo:l,description:"Synthetix | The derivatives liquidity protocol.",recommendedInjectedWallets:[{name:"MetaMask",url:"https://metamask.io"},{name:"Brave Wallet",url:"https://brave.com/wallet"}],gettingStartedGuide:"https://synthetix.io",explore:"https://blog.synthetix.io"});function p(e){return e?new a.r6(e.rpcUrl()):void 0}function m(){const{network:e}=g();return p(e)}function f(){const[{wallet:e},t,r]=(0,s.Or)(),a=(0,n.useCallback)(t,[t]),i=(0,n.useCallback)(r,[r]);if(!e)return{activeWallet:null,walletsInfo:null,connect:a,disconnect:i};const o=e?.accounts[0];return{activeWallet:o,walletsInfo:e,connect:a,disconnect:i}}function g(){const[{connectedChain:e},t]=(0,s.Um)(),r=h.find((t=>t.hexId===e?.id)),a=(0,n.useCallback)((async e=>{const r=h.find((t=>t.id===e));r&&await t({chainId:r?.hexId})}),[t]);return r?{network:r,setNetwork:a}:{network:null,setNetwork:a}}function y(){const[{wallet:e}]=(0,s.Or)();return Boolean(e)}function b(){const[{wallet:e}]=(0,s.Or)();if(!e)return null;return new a.Qg(e.provider,"any").getSigner()}function j(){const[{wallet:e}]=(0,s.Or)();if(!e)return null;return new a.Qg(e.provider,"any")}},51544:(e,t,r)=>{"use strict";r.d(t,{v:()=>b,O:()=>j});var a=r(2784),n=r(40109),i=r(99),o=r(28145),l=r(76885),s=r(17716),c=r(50986),d=r(10528),h=r(35834),u=r(95772),x=r(37330),p=r(860),m=r(51686),f=r(95522),g=r(81666),y=r(77528);const b=[{inputs:[{internalType:"contract ISynthetixCore",name:"synthetixCore",type:"address"},{internalType:"contract ISpotMarket",name:"spotMarket",type:"address"},{internalType:"uint128",name:"accountId",type:"uint128"},{internalType:"uint128",name:"poolId",type:"uint128"},{internalType:"address",name:"collateralType",type:"address"},{internalType:"uint128",name:"spotMarketId",type:"uint128"}],name:"depositDebtToRepay",outputs:[],stateMutability:"nonpayable",type:"function"}],j=({accountId:e,poolId:t,collateralTypeAddress:r,availableUSDCollateral:j,debt:w})=>{const[C,v]=(0,a.useReducer)(s.I,s.E),{data:S}=(0,n.a)(),{data:k}=(0,g.b)(),{data:A}=(0,m.L)(),T=(0,l.mx)(),{network:D}=(0,l.LN)(),{gasSpeed:I}=(0,u.jU)(),F=(0,l.yL)(),L=(0,o.useMutation)({mutationFn:async()=>{if(!T||!D||!F)throw new Error("No signer or network");if(!(S&&t&&e&&r&&k&&A))return;const a=new c.CH((0,y.Do)(D.id),b,T);if(j)try{v({type:"prompting"});const n=a.populateTransaction.depositDebtToRepay(S.address,k.address,e,t,r,y.Ds),o=S.populateTransaction.burnUsd(d.O$.from(e),d.O$.from(t),r,w?.mul(110).div(100).toBN().toString()||"0"),l=Promise.all([n,o].filter(x._)),s=await T.getAddress(),c=(0,f.$)(A,D.isTestnet).then((e=>(0,f.x)(s,A,e))),[u,m,g]=await Promise.all([l,(0,h.o)({provider:F}),c]),b=g.concat(u),j=await(0,p.dI)(D,b,"useRepay",S.interface),C=(0,i.F)({gasLimit:j.gasLimit,gasPrices:m,gasSpeed:I}),L=await T.sendTransaction({...j,...C});v({type:"pending",payload:{txnHash:L.hash}}),await L.wait(),v({type:"success"})}catch(e){throw v({type:"error",payload:{error:e}}),e}}});return{mutation:L,txnState:C,settle:()=>v({type:"settled"}),isLoading:L.isPending,exec:L.mutateAsync}}},19299:(e,t,r)=>{"use strict";r.d(t,{t:()=>b,T:()=>y});var a=r(99268),n=r(90711),i=r(28145),o=r(30195),l=r(2784),s=r(55588),c=r(79929),d=r(5717),h=r(76885),u=r(40109),x=r(77528);const p=o.z.object({depositingEnabled:o.z.boolean(),issuanceRatioD18:s.rK.transform((e=>(0,c.wei)(e))),liquidationRatioD18:s.rK.transform((e=>(0,c.wei)(e))),liquidationRewardD18:s.rK.transform((e=>(0,c.wei)(e))),oracleNodeId:o.z.string(),tokenAddress:o.z.string().startsWith("0x"),minDelegationD18:s.rK.transform((e=>(0,c.wei)(e)))}),m=(p.extend({symbol:o.z.string(),displaySymbol:o.z.string()}),o.z.string()),f=new a.vU(["function symbol() view returns (string)"]);async function g({CoreProxy:e,Multicall3:t}){const r=(await e.getCollateralConfigurations(!0)).map((e=>p.parse({...e}))).filter((({depositingEnabled:e})=>e)),a=await async function({Multicall3:e,tokenConfigs:t}){const r=t.map((e=>({target:e.tokenAddress,callData:f.encodeFunctionData("symbol")})));return(await e.callStatic.aggregate(r)).returnData.map((e=>m.parse(f.decodeFunctionResult("symbol",e)[0])))}({Multicall3:t,tokenConfigs:r});return r.map(((e,t)=>({depositingEnabled:e.depositingEnabled,issuanceRatioD18:e.issuanceRatioD18,liquidationRatioD18:e.liquidationRatioD18,liquidationRewardD18:e.liquidationRewardD18,minDelegationD18:e.minDelegationD18,oracleNodeId:e.oracleNodeId,tokenAddress:e.tokenAddress,symbol:a[t],displaySymbol:"WETH"===a[t]?"ETH":a[t]})))}function y(e=!1){const{network:t}=(0,h.LN)(),{data:r}=(0,u.a)(),{data:a}=(0,d.b)();return(0,i.useQuery)({queryKey:[`${t?.id}-${t?.preset}`,"CollateralTypes",{includeDelegationOff:e}],queryFn:async()=>{if(!r||!a)throw Error("Query should not be enabled when contracts missing");const i=(await g({CoreProxy:r,Multicall3:a})).map((e=>({...e,symbol:"sUSDC"===e.symbol&&(0,x.Yz)(t?.id,t?.preset)?"USDC":e.symbol,displaySymbol:"sUSDC"===e.displaySymbol&&(0,x.Yz)(t?.id,t?.preset)?"USDC":e.symbol})));return e?i:i.filter((e=>e.minDelegationD18.lt(n.Bz)))},staleTime:36e5,placeholderData:[],enabled:Boolean(r&&a)})}function b(e){const{data:t,isLoading:r,error:a}=y();return{isLoading:r,error:a,data:(0,l.useMemo)((()=>{if(t&&t?.length)return e?t.find((t=>`${t.symbol}`.toLowerCase()===`${e}`.toLowerCase())):t[0]}),[e,t])}}},97721:(e,t,r)=>{"use strict";r.d(t,{o:()=>c});r(5875),r(50509),r(38728),r(64810),r(43419),r(32825),r(16093),r(77829),r(60253),r(49225),r(79941),r(57265),r(25888),r(15840),r(37610),r(13351);var a=r(79155),n=r(50986),i=r(10528),o=r(49494),l=r(2784),s=r(860);function c(e){return(0,l.useCallback)((t=>{if(e)try{const r=t?.error?.data?.data||t?.error?.error?.data;if(!r)return void console.error({error:t});const l=e.interface.format(a.pc.full),c=new n.CH(e.address,Array.from(new Set(l.concat(s.IN).concat(["error CannotSelfApprove(address addr)","error InvalidTransferRecipient(address addr)","error InvalidOwner(address addr)","error TokenDoesNotExist(uint256 id)","error TokenAlreadyMinted(uint256 id)"]))),e.signer||e.provider).interface.parseError(r),d=Object.fromEntries(Object.entries(c.args).filter((([e])=>`${parseInt(e)}`!==e)).map((([e,t])=>{if(t instanceof i.O$){const r=parseFloat(o.dF(t.toString()));return r>.001?[e,r]:t.toNumber()>new Date(2e3,1,1).getTime()/1e3&&t.toNumber()<new Date(2100,1,1).getTime()/1e3?[e,new Date(1e3*t.toNumber())]:[e,parseFloat(t.toString())]}return[e,t]})));return{data:r,name:c.name,signature:c.signature,args:d}}catch(e){return void console.error(e)}}),[e])}},40109:(e,t,r)=>{"use strict";r.d(t,{a:()=>l});var a=r(50986),n=r(28145),i=r(76885),o=r(8788);function l(){const{network:e}=(0,i.LN)(),t=(0,i.yL)(),r=(0,i.mx)(),l=r||t,s=Boolean(r);return(0,n.useQuery)({queryKey:[`${e?.id}-${e?.preset}`,"CoreProxy",{withSigner:s}],queryFn:async function(){if(!l||!e)throw new Error("Should be disabled");const{address:t,abi:r}=await(0,o.k)(e?.id,e?.preset);return new a.CH(t,r,l)},enabled:Boolean(l),staleTime:1/0})}},95042:(e,t,r)=>{"use strict";r.d(t,{G:()=>s});var a=r(28145),n=r(76885),i=r(55588),o=r(79929);const l=i.rK.transform((e=>(0,o.wei)(e)));function s(e){const{activeWallet:t}=(0,n.Os)(),r=(0,n.yL)(),{network:i}=(0,n.LN)();return(0,a.useQuery)({queryKey:[`${i?.id}-${i?.preset}`,"EthBalance",{accountAddress:t?.address}],queryFn:async()=>{if(!t||!r)throw Error("useEthBalance should not be enabled");return l.parse(await r.getBalance(t.address))},enabled:Boolean((e??i?.id)&&t?.address)})}},99:(e,t,r)=>{"use strict";r.d(t,{F:()=>l});var a=r(79929),n=r(42219);const i=(0,a.wei)(n.os,n.br);function o(e){return(0,a.wei)(e??0,n.br).mul(i).toBN()}function l({gasPrices:e,gasSpeed:t,gasLimit:r}){const a=e[t];if("baseFeePerGas"in a){const{baseFeePerGas:e,...t}=a;return{...t,gasLimit:o(r)}}return{...a,gasLimit:o(r)}}},35834:(e,t,r)=>{"use strict";r.d(t,{o:()=>d});r(76885),r(40903);var a=r(67640);const n=e=>"number"==typeof e&&e==e,i=(e,t)=>((e,t,r)=>{const a=e.length;if(t>1)return Array(a);if(1===t)return e.slice();const i=!Array.isArray(t),o=[];let l,s=0,c=0;for(;s<a;s++)if(l=e[s],n(l)&&(i||n(l))){o[s]=r?0:l,c=l,s++;break}if(!i){for(;s<a;s++)l=e[s],n(l)&&n(t[s])?c=o[s]=t[s]*l+(1-t[s])*c:o[s]=o[s-1];return o}const d=1-t;for(;s<a;s++)l=e[s],n(l)?c=o[s]=t*l+d*c:o[s]=o[s-1];return o})(e,2/(t+1)),o=(e,t,r)=>e.filter(((e,r)=>!t.includes(r))).map((e=>e[r].toNumber()));var l=r(79929),s=r(42219);const c=async(e,t="latest")=>{if(13370===e.network.chainId||84531===e.network.chainId)return(()=>{const e=(0,l.wei)(1,9).toBN(),t=(0,l.wei)(5,9).toBN(),r=(0,l.wei)(1,9).toBN();return{average:{maxPriorityFeePerGas:r,maxFeePerGas:t,baseFeePerGas:e},fast:{maxPriorityFeePerGas:r,maxFeePerGas:t,baseFeePerGas:e},fastest:{maxPriorityFeePerGas:r,maxFeePerGas:t,baseFeePerGas:e}}})();const r=await e.send("eth_feeHistory",[a.hexStripZeros(a.hexlify(10)),t,[15,30,45]]).then((e=>({baseFeePerGas:e.baseFeePerGas.map((e=>(0,l.wei)(e,s.br,!0))),reward:e.reward.map((e=>e.map((e=>(0,l.wei)(e,s.br,!0)))))}))),n=r.reward,c=r.baseFeePerGas.at(-1);if(!n.length)throw new Error("Error: block reward was empty");if(!c)throw new Error("Error: currentBaseFee was empty");const d=((e,t)=>{const r=[];return e.map((e=>e[t])).forEach(((e,t)=>{e.gt(5)&&r.push(t)})),r})(n,0),h=o(n,d,0),u=o(n,d,1),x=o(n,d,2),p=i(h,h.length)[h.length-1],m=i(u,u.length)[u.length-1],f=i(x,x.length)[x.length-1];if(void 0===p||void 0===m||void 0===f)throw new Error("Error: ema was undefined");const g=(0,l.wei)(Math.min(p,1),s.br),y=(0,l.wei)(Math.min(m,2),s.br),b=(0,l.wei)(Math.min(f,4),s.br),j=(e,t)=>e.mul((0,l.wei)(2,s.br)).add(t);return{average:{maxPriorityFeePerGas:g.toBN(),maxFeePerGas:j(c,g).toBN(),baseFeePerGas:c.toBN()},fast:{maxPriorityFeePerGas:y.toBN(),maxFeePerGas:j(c,y).toBN(),baseFeePerGas:c.toBN()},fastest:{maxPriorityFeePerGas:b.toBN(),maxFeePerGas:j(c,b).toBN(),baseFeePerGas:c.toBN()}}},d=async({provider:e})=>{try{return(await e.getBlock("latest")).baseFeePerGas?c(e):(async e=>{try{const t=await e.getGasPrice();return{fastest:{gasPrice:t},fast:{gasPrice:t},average:{gasPrice:t}}}catch(e){throw new Error("Could not retrieve gas price from provider")}})(e)}catch(e){throw new Error(`Could not fetch and compute network fee. ${e}`)}}},95772:(e,t,r)=>{"use strict";r.d(t,{G2:()=>o,jU:()=>l});var a=r(2784),n=r(52322);const i=(0,a.createContext)({gasSpeed:"average",setGasSpeed:()=>{}}),o=({children:e})=>{const[t,r]=(0,a.useState)("average");return(0,n.jsx)(i.Provider,{value:{gasSpeed:t,setGasSpeed:r},children:e})},l=()=>(0,a.useContext)(i)},5717:(e,t,r)=>{"use strict";r.d(t,{b:()=>l});var a=r(50986),n=r(28145),i=r(76885),o=r(45580);function l(){const{network:e}=(0,i.LN)(),t=(0,i.yL)(),r=(0,i.mx)(),l=r||t,s=Boolean(r);return(0,n.useQuery)({queryKey:[`${e?.id}-${e?.preset}`,"Multicall3",{withSigner:s}],queryFn:async function(){if(!e||!l)throw new Error("Network or signer not available");const{address:t,abi:r}=await(0,o.C)(e.id,e.preset);return new a.CH(t,r,l)},enabled:Boolean(l),staleTime:1/0})}},89536:(e,t,r)=>{"use strict";r.d(t,{UO:()=>l});var a=r(73557),n=r(39857),i=r(2784);function o(e){const t=Object.entries(e).filter((([,e])=>void 0!==e));return Object.fromEntries(t)}const l=()=>{const e=(0,a.UO)(),[t]=(0,n.lr)();return(0,i.useMemo)((()=>{return r={...o(e),...(a=t,Object.fromEntries(Array.from(a)))},Object.fromEntries(Object.entries(r).sort((([e],[t])=>e.localeCompare(t))));var r,a}),[e,t])}},18914:(e,t,r)=>{"use strict";r.d(t,{AI:()=>u,Oh:()=>h});var a=r(28145),n=r(40109),i=r(76885),o=r(55588),l=r(30195);const s=o.rK.transform((e=>e.toString())),c=l.z.object({id:s,name:l.z.string().default("Unnamed Pool"),isPreferred:l.z.boolean()}),d=l.z.array(c);function h(){const{network:e}=(0,i.LN)(),{data:t}=(0,n.a)();return(0,a.useQuery)({enabled:Boolean(t),queryKey:[`${e?.id}-${e?.preset}`,"Pools"],queryFn:async()=>{if(!t)throw"usePools is missing required data";const[e,r]=await Promise.all([t.callStatic.getPreferredPool(),t.callStatic.getApprovedPools()]),a=[{id:e,isPreferred:!0}].concat(r.map((e=>({id:e,isPreferred:!1})))),n=await Promise.all(a.map((async({id:e})=>await t.getPoolName(e)))),i=a.map((({id:e,isPreferred:t},r)=>({id:e,isPreferred:t,name:n[r]})));return d.parse(i)}})}function u(e){const{isLoading:t,error:r,data:a}=h();return{isLoading:t,error:r,data:a?.find((t=>t.id===e))}}},81666:(e,t,r)=>{"use strict";r.d(t,{b:()=>o});var a=r(50986),n=r(28145),i=r(76885);function o(){const{network:e}=(0,i.LN)(),t=(0,i.yL)(),o=(0,i.mx)(),l=o||t,s=Boolean(o);return(0,n.useQuery)({queryKey:[`${e?.id}-${e?.preset}`,"SpotMarketProxy",{withSigner:s}],queryFn:async function(){if(!l||!e)throw new Error("Should be disabled");const{address:t,abi:n}=await async function(e,t="main"){switch(`${e}-${t}`){case"10-main":return r.e(4145).then(r.bind(r,94145));case"13370-main":return r.e(8252).then(r.bind(r,98252));case"42161-arbthetix":return r.e(5330).then(r.bind(r,65330));case"421614-arbthetix":return r.e(3260).then(r.bind(r,73260));case"8453-andromeda":return r.e(500).then(r.bind(r,70500));case"84532-andromeda":return r.e(6989).then(r.bind(r,6989));default:throw new Error(`Unsupported chain ${e} for SpotMarketProxy`)}}(e?.id,e?.preset);return new a.CH(t,n,l)},enabled:Boolean(l),staleTime:1/0})}},55576:(e,t,r)=>{"use strict";function a(e){return!!e&&e.startsWith("0x")}r.d(t,{mM:()=>u,sR:()=>x});var n=r(79929),i=r(28145),o=r(76885),l=r(50986),s=r(55588),c=r(77528);const d=s.rK.transform((e=>(0,n.wei)(e))),h=["function balanceOf(address) view returns (uint256)","function decimals() view returns (uint8)"],u=e=>{const{activeWallet:t}=(0,o.Os)(),r=(0,o.yL)(),{network:s}=(0,o.LN)(),u=a(e)?e:void 0;return(0,i.useQuery)({queryKey:[`${s?.id}-${s?.preset}`,"TokenBalance",{accountAddress:t?.address},{tokenAddress:u}],queryFn:async()=>{if(t?.address&&u&&r){const e=new l.CH(u,h,r);return(0,c.Yz)(s?.id,s?.preset)?(0,n.wei)(await e.balanceOf(t?.address),await e.decimals()):d.parse(await e.balanceOf(t?.address))}},enabled:Boolean(t?.address&&u&&r),refetchInterval:5e3})},x=(e,t)=>{const{activeWallet:r}=(0,o.Os)(),n=(0,o.eK)(t),s=a(e)?e:void 0;return(0,i.useQuery)({queryKey:[`${t?.id}-${t?.preset}`,"TokenBalanceForChain",{accountAddress:r?.address},{tokenAddress:s}],queryFn:async()=>{if(r?.address&&s&&n){const e=new l.CH(s,h,n);return d.parse(await e.balanceOf(r?.address))}},enabled:Boolean(r?.address&&s&&n),refetchInterval:5e3})}},63478:(e,t,r)=>{"use strict";r.d(t,{a:()=>l,f:()=>s});var a=r(50986),n=r(28145),i=r(76885);async function o(e,t="main"){switch(`${e}-${t}`){case"1-main":return r.e(2905).then(r.bind(r,22905));case"10-main":return r.e(2034).then(r.bind(r,12034));case"11155111-main":return r.e(699).then(r.bind(r,10699));case"13370-main":return r.e(4112).then(r.bind(r,74112));case"42161-arbthetix":return r.e(5580).then(r.bind(r,55580));case"421614-arbthetix":return r.e(9458).then(r.bind(r,39458));case"8453-andromeda":return r.e(4852).then(r.bind(r,64852));case"84532-andromeda":return r.e(4155).then(r.bind(r,84155));default:throw new Error(`Unsupported chain ${e} for USDProxy`)}}function l(){const{network:e}=(0,i.LN)(),t=(0,i.yL)(),r=(0,i.mx)(),l=r||t,s=Boolean(r);return(0,n.useQuery)({queryKey:[`${e?.id}-${e?.preset}`,"USDProxy",{withSigner:s}],queryFn:async function(){if(!l||!e)throw new Error("Should be disabled");const{address:t,abi:r}=await o(e.id,e.preset);return new a.CH(t,r,l)},enabled:Boolean(l),staleTime:1/0})}function s(e){const t=(0,i.eK)(e);return(0,n.useQuery)({queryKey:[`${e?.id}-${e?.preset}`,"USDProxyForChain",{withSigner:!1}],queryFn:async function(){if(e&&t){const{address:r,abi:n}=await o(e.id,e.preset);return new a.CH(r,n,t)}},enabled:Boolean(e&&t),staleTime:1/0})}},47973:(e,t,r)=>{"use strict";r.d(t,{E:()=>u,a:()=>h});var a=r(76885),n=r(19299),i=r(95042),o=r(55576),l=r(50986),s=r(28145),c=r(2784);const d=["function deposit() payable","function withdraw(uint256 wad)"],h=()=>{const e=(0,a.mx)(),{data:t}=(0,n.t)("WETH"),{data:r,refetch:h}=(0,i.G)(),{data:u,refetch:x}=(0,o.mM)(t?.tokenAddress),{mutateAsync:p,isPending:m}=(0,s.useMutation)({mutationFn:async r=>{if(!t||!e)return;const a=new l.CH(t?.tokenAddress,d,e),n=await a.deposit({value:r.toBN()});await n.wait()}});return{exec:(0,c.useCallback)((async e=>{r&&(r.lt(e)||(await p(e),h(),x()))}),[r,p,h,x]),isLoading:m,wethBalance:u,ethBalance:r}},u=()=>{const e=(0,a.mx)(),{data:t}=(0,n.t)("WETH"),{data:r,refetch:h}=(0,i.G)(),{data:u,refetch:x}=(0,o.mM)(t?.tokenAddress),{mutateAsync:p,isPending:m}=(0,s.useMutation)({mutationFn:async r=>{if(!t||!e)return;const a=new l.CH(t?.tokenAddress,d,e),n=await a.withdraw(r.toBN());await n.wait()}});return{exec:(0,c.useCallback)((async e=>{u&&(u.lt(e)||(await p(e),await Promise.all([h(),x()])))}),[p,h,x,u]),isLoading:m,wethBalance:u,ethBalance:r}}},860:(e,t,r)=>{"use strict";r.d(t,{IN:()=>y,Iy:()=>I,dI:()=>D});var a=r(99780),n=r(99268),i=r(10528),o=r(67871),l=r(49494),s=r(17123),c=r(30195),d=r(55588),h=r(42219),u=r(76885),x=r(8788),p=r(45580);const m={};var f=r(99106);function g(e){try{if(e.cause?.data)return e.cause?.data;if(e.cause?.cause?.data)return e.cause?.cause?.data;if(e.cause?.cause?.cause?.data)return e.cause?.cause?.cause?.data;if(e.cause?.cause?.error?.data)return e.cause?.cause?.error?.data;if(e.cause?.cause?.cause?.error?.data)return e.cause?.cause?.cause?.error?.data;if(e?.error?.error?.data)return e?.error?.error?.data}catch(e){console.error("exception error parser:",e)}}const y=["error OracleDataRequired(address oracleContract, bytes oracleQuery)","error FeeRequired(uint feeAmount)","function oracleId() view external returns (bytes32)","function fulfillOracleQuery(bytes calldata signedOffchainData) payable external"],b=(j=async(e,t,r)=>{const n=new s.O(t?h.DM:h.kw),i=c.z.tuple([c.z.number(),d.rK,c.z.array(c.z.string())]),o=a.$.decode(["uint8","uint64","bytes32[]"],e),[l,u,x]=i.parse(o);if(console.log(`[${r}] stale price for priceFeedId: ${x[0]}`),1!==l)throw new Error(`update type ${l} not supported`);const p=await n.getPriceFeedsUpdateData(x);return a.$.encode(["uint8","uint64","bytes32[]","bytes[]"],[l,u,x,p])},w=5e3,async(...e)=>{const t="no-cache"===e[e.length-1],r=t?e.slice(0,-1):e,a=JSON.stringify(r),n=Date.now();if(!t){const e=m[a];if(e&&n-e.timestamp<w)return e.value}const i=await j(...r);return m[a]={timestamp:n,value:i},i});var j,w;function C(e,t,r,a){const o=new n.vU(a).encodeFunctionData("aggregate3Value",[e.map((e=>({target:e.to,callData:e.data,value:e.value||i.O$.from(0),requireSuccess:!0,allowFailure:!1})))]);let l=i.O$.from(0);for(const t of e)l=l.add(t.value||i.O$.from(0));return{from:t,to:r,data:o,value:l}}const v=(e,t,r,a)=>{const o=new n.vU(a).encodeFunctionData("multicall",[e.map((e=>e.data))]);let l=i.O$.from(0);for(const t of e)l=l.add(t.value||i.O$.from(0));return{from:t,to:r,data:o,value:l}},S=c.z.union([c.z.object({name:c.z.literal("OracleDataRequired"),args:c.z.tuple([c.z.string(),c.z.string()])}),c.z.object({name:c.z.literal("FeeRequired"),args:c.z.tuple([d.rK])})]),k=new n.vU(y),A=async(e,t)=>{let r=e.data||e.error?.data?.data||e.error?.error?.data;if(!r)try{console.log("Error is missing revert data, trying provider.call, instead of estimate gas..");r=await t.call(e.transaction)}catch(t){console.log("provider.call(error.transaction) failed, trying to extract error"),r=e.data||e.error?.data?.data||e.error?.error?.data,console.log("Error data: ",r)}try{const e=k.parseError(r);return S.parse(e)}catch(t){throw console.error("Error is not a ERC7412 error, re-throwing original error, for better parsing. Parse error reason: ",t),e}},T=e=>{switch(e){case"cannon":case"optimism-mainnet":case"optimism-goerli":case"base-goerli":case"base":case"base-sepolia":return"0x4200000000000000000000000000000000000006";case"mainnet":return"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2";case"goerli":return"0xb4fbf271143f4fbf7b91a5ded31805e42b2208d6";case"sepolia":return"0x7b79995e5f793a07bc00c21412e50ecae098e7f9";case"arbitrum":return"0x82af49447d8a07e3bd95bd0d56f35241523fbab1";default:throw new Error(`Unsupported chain ${e}`)}},D=async(e,t,r,a)=>{const s=Array.isArray(t)?t.length:1;let c=[t].flat();if(c.some((e=>!e.to)))throw Error("Make sure all txs have 'to' field set");if(c.some((e=>!e.from)))throw Error("Make sure all txs have 'from' field set");const d=c[0].from,h=new o.r6(e?.rpcUrl()),m=d===T(e.name),j=!u.nf.includes(`${e.id}-${e.preset}`)&&!m,{address:w,abi:S}=j?await(0,x.k)(e.id,e.preset):await(0,p.C)(e.id,e.preset);for(;;)try{if(1==c.length){const e=c[0],t=await h.estimateGas(e);return console.log("Estimated gas succeeded, with no price updates"),{...e,gasLimit:t}}const e=j?v(c,d,w,S):C(c,d,w,S),t=await h.estimateGas(e);return console.log(`[${r}] Estimated gas succeeded, with ${c.length-s} price updates`),{...e,gasLimit:t}}catch(t){const o=await A(t,h);if("OracleDataRequired"===o.name){const[t,a]=o.args,h=!m,u=await b(a,e.isTestnet,r||"",h?"no-cache":void 0),x={from:d,to:t,data:new n.vU(y).encodeFunctionData("fulfillOracleQuery",[u]),value:m?l.fi("0.1"):i.O$.from(0)};c.splice(c.length-s,0,x)}else{if("FeeRequired"!==o.name){const e=g(t);if(e&&a)try{const t=f.p({abi:a,data:e});console.log("error: ",t.errorName,t.args)}catch(e){}throw t}{const e=o.args[0],t=c.find((({value:t})=>e.gt(t||0)));if(void 0===t)throw Error(`Didn't find any tx with a value less than the required fee ${c}`);t.value=e}}}};async function I(e,t,r,a,i){const{address:o,abi:l}=await(0,p.C)(e.id,e.preset),s=[r].flat();for(const t of s)t.from=T(e.name);const c=await D(e,s,i),d=await t.call(c);if(c.to===o){return a(new n.vU(l).decodeFunctionResult("aggregate3Value",d)[0].filter((({returnData:e})=>"0x"!==e)).map((({returnData:e})=>e)))}return a(d)}},55588:(e,t,r)=>{"use strict";r.d(t,{Rx:()=>l,LW:()=>s,rK:()=>o});var a=r(10528),n=r(30195),i=r(79929);const o=n.z.custom((e=>a.O$.isBigNumber(e))),l=o.transform((e=>(0,i.wei)(e,0).toNumber())),s=o.transform((e=>(0,i.wei)(e)))},63656:(e,t,r)=>{"use strict";r.r(t),r.d(t,{bootstrap:()=>Yn});var a=r(17029),n=r(2784),i=r(39857),o=r(50019),l=r(17150),s=r(84586),c=r(74465),d=r(39279);const h={"green-cyan":{500:"linear(to-tr, green.500, cyan.500)",600:"linear(to-tr, green.600, cyan.600)",700:"linear(to-tr, green.700, cyan.800)"},grey:{900:"linear(to-tr, grey.900, blackAlpha.900)"},dark:{500:"linear(to-tr, #171923, #141414)"},"pink-purple":{500:"linear(to-tr, pink.500, purple.500)",600:"linear(to-tr, pink.600, purple.600)",700:"linear(to-tr, pink.700, purple.800)"},"pink-blue":{500:"linear(to-tr, pink.500, blue.500)",600:"linear(to-tr, pink.600, blue.600)",700:"linear(to-tr, pink.700, blue.800)"},"pink-cyan":{500:"linear(to-tr, pink.500, cyan.500)",600:"linear(to-tr, pink.600, cyan.600)",700:"linear(to-tr, pink.700, cyan.800)"},orange:{500:"linear(to-tr, orange.500, orange.300)",600:"linear(to-tr, orange.600, orange.400)",700:"linear(to-tr, orange.700, orange.500)"}},u={defaultProps:{colorScheme:"cyan"},variants:{solid:(0,s.k0)((e=>{const{colorScheme:t}=e;if("gray"===t){const t=(0,d.x)("gray.100","whiteAlpha.200")(e);return{color:(0,d.x)("black","whiteAlpha.900")(e),bg:t,_hover:{bg:(0,d.x)("gray.200","whiteAlpha.300")(e),_disabled:{bg:t}},_active:{bg:(0,d.x)("gray.300","whiteAlpha.400")(e)}}}if("cyan"===t)return{bgGradient:h["green-cyan"][500],color:"black",_hover:{bgGradient:h["green-cyan"][600],_disabled:{background:h["green-cyan"][500]}},_active:{bgGradient:h["green-cyan"][700]}};const r=`${t}.500`,a=`${t}.600`,n=`${t}.700`,i=(0,d.x)(r,`${t}.600`)(e);return{bg:i,color:(0,d.x)("white","white")(e),_hover:{bg:(0,d.x)(a,`${t}.500`)(e),_disabled:{bg:i}},_active:{bg:(0,d.x)(n,`${t}.400`)(e)}}})),outline:e=>"gray"===e.colorScheme?{color:"whiteAlpha.800",borderColor:"gray.900",_hover:{bg:"rgba(255, 255, 255, 0.12)"},_active:{bg:"rgba(255, 255, 255, 0.24)"}}:{color:"cyan.500",border:"1px solid",borderColor:"cyan.500",_hover:{bg:"rgb(0, 209, 255, 0.12)"},_active:{bg:"rgb(0, 209, 255, 0.24)"}},ghost:{color:"cyan.500",_hover:{bg:"rgb(0, 209, 255, 0.12)"},_active:{bg:"rgb(0, 209, 255, 0.24)"}}}},x=(0,c.B1)({useSystemColorMode:!1,initialColorMode:"dark",colors:{gray:{50:"#F6F6F6",100:"#F1F1F1",200:"#DDDDDF",300:"#C3C3C9",400:"#AAAAB2",500:"#91919B",600:"#7A7A85",700:"#63636E",800:"#4D4D57",900:"#303037"},red:{50:"#FFEDEF",100:"#FFC4CB",200:"#FF9BA7",300:"#FF7384",400:"#FF4A60",500:"#E4364B",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFF3EB",100:"#FFD8BE",200:"#FFBE92",300:"#FFA365",400:"#FF9A54",500:"#FC8738",600:"#DC732D",700:"#96420A",800:"#743002",900:"#522100"},yellow:{50:"#FFFBEF",100:"#FFF2CA",200:"#FFF5A8",300:"#FFF889",400:"#FFF458",500:"#FAE527",600:"#EAD516",700:"#B5932B",800:"#776017",900:"#55430D"},green:{50:"#EDFFF9",100:"#C3FFEC",200:"#9AE6B4",300:"#72FFD3",400:"#47FAC2",500:"#34EDB3",600:"#2BD39F",700:"#11946B",800:"#077250",900:"#015037"},blue:{50:"#EDF6FF",100:"#C4E2FF",200:"#9CCFFF",300:"#73BBFF",400:"#479EF0",500:"#3182CE",600:"#1F68AC",700:"#11508A",800:"#073968",900:"#012546"},cyan:{50:"#E5FAFF",100:"#B7F2FF",200:"#8AEAFF",300:"#5CE1FF",400:"#2ED9FF",500:"#00D1FF",600:"#00B0D6",700:"#008EAD",800:"#006D85",900:"#004B5C"},purple:{50:"#F0EEFF",100:"#CFC9FF",200:"#AEA4FF",300:"#8D7EFF",400:"#6B59FF",500:"#5744EA",600:"#402FC8",700:"#2D1EA6",800:"#1D1084",900:"#10104E"},pink:{50:"#FDE8FF",100:"#F9B6FF",200:"#F583FF",300:"#F471FF",400:"#EB46FF",500:"#EE2EFF",600:"#BE02CE",700:"#8D0099",800:"#6E0077",900:"#4E0055"},navy:{50:"#522ED1",100:"#401FB7",200:"#3719A6",300:"#2F1298",400:"#1F0777",500:"#150942",600:"#0E052F",700:"#0B0B22",800:"#0A0A25",900:"#06061B"},error:"#FF4A60",success:"#34EDB3",warning:"#FC8738"},shadows:{outline:"0 0 0 3px rgba(0, 209, 255, 1)"},fonts:{heading:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',display:'"GT America Condensed", Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'"GT America Mono", SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},components:{Popover:{variants:{responsive:{popper:{maxWidth:"unset",width:"unset"}}}},Button:u,Input:{defaultProps:{focusBorderColor:"cyan.500",errorBorderColor:"red.500"}},Select:{defaultProps:{focusBorderColor:"cyan.500",iconColor:"cyan.500",errorBorderColor:"red.500"}},NumberInput:{defaultProps:{focusBorderColor:"cyan.500",errorBorderColor:"red.500"}},Alert:{defaultProps:{variant:"left-accent"},variants:{"left-accent":e=>({container:{bg:`${e.colorScheme}.900`,borderInlineStartColor:`${e.colorScheme}.500`}}),solid:e=>({icon:{color:"white"},container:{bg:`${e.colorScheme}.500`,color:"white"}})}},Textarea:{defaultProps:{focusBorderColor:"cyan.500",colorScheme:"cyan",errorBorderColor:"red.500"}},Skeleton:{defaultProps:{startColor:"gray.900",endColor:"gray.800"}},Checkbox:{defaultProps:{colorScheme:"cyan"},baseStyle:{control:{borderColor:"cyan.500",_checked:{bg:"cyan.500",borderColor:"cyan.500",_hover:{bg:"cyan.600",borderColor:"cyan.600"}},_invalid:{borderColor:"red.500"},_disabled:{_hover:{borderColor:"transparent"}},_hover:{borderColor:"cyan.600"}}}},Radio:{defaultProps:{colorScheme:"cyan"},baseStyle:{control:{borderColor:"cyan.500",_checked:{bg:"cyan.500",borderColor:"cyan.500",_hover:{bg:"cyan.600",borderColor:"cyan.600"}},_invalid:{borderColor:"red.500"},_disabled:{_hover:{borderColor:"transparent"}},_hover:{borderColor:"cyan.600"}}}},Badge:{defaultProps:{colorScheme:"cyan"},variants:{subtle:e=>({color:`${e.colorScheme}.500`}),solid:e=>({background:`${e.colorScheme}.500`,color:"black"}),outline:e=>({borderColor:`${e.colorScheme}.500`,color:`${e.colorScheme}.500`}),percent:{color:"cyan.500",bg:"whiteAlpha.300",fontFamily:"heading",py:1,px:2,borderRadius:"base",borderWidth:"1px",borderColor:"transparent",width:"100%",textAlign:"center",userSelect:"none"}}},Tag:{defaultProps:{colorScheme:"cyan",variant:"solid"},variants:{solid:e=>({container:{background:`${e.colorScheme}.500`,color:"black"}})}},Accordion:{baseStyle:{container:{borderColor:"gray.900",borderWidth:"1px",borderRadius:"base"}}},Progress:{defaultProps:{colorScheme:"cyan",variant:"solid",borderRadius:"full"},variants:{solid:e=>({filledTrack:{background:`${e.colorScheme}.500`,borderRadius:"full"},track:{borderRadius:"full"}})}},Tabs:{defaultProps:{colorScheme:"cyan"},variants:{"solid-rounded":e=>({tab:{_selected:{background:`${e.colorScheme}.500`,color:"black"},color:`${e.colorScheme}.500`}}),"soft-rounded":{tab:{_selected:{background:"whiteAlpha.300",color:"cyan.500"},color:"cyan.500"}}}},Tooltip:{baseStyle:{textAlign:"center",bg:"gray.900",color:"white.500","--popper-arrow-bg":"var(--chakra-colors-gray-900)"}},Switch:{defaultProps:{colorScheme:"cyan"},baseStyle:{track:{_checked:{background:"cyan.500"}}}},Spinner:{baseStyle:{color:"cyan.500"}},Menu:{parts:["button","list","item"],baseStyle:{button:{color:"white",span:{display:"flex",alignItems:"center",px:2},height:"100%"},list:{mt:2,bgColor:"navy.900",padding:0,border:"none",borderRadius:"md",py:0},item:{bgColor:"blackAlpha.300",color:"whiteAlpha.900",p:3,_hover:{bgColor:"whiteAlpha.400"},_active:{bgColor:"navy.900"},_first:{borderTopLeftRadius:"md",borderTopRightRadius:"md"},_last:{borderBottomLeftRadius:"md",borderBottomRightRadius:"md"},_focus:{bgColor:"blackAlpha.400"}}}}},gradients:h,textStyles:{"heading-4xl":{fontSize:{base:"60px",lg:"72px"},fontFamily:"heading",lineHeight:{base:"57.6px",lg:"72px"},fontWeight:700},"heading-3xl":{fontSize:{base:"48px",md:"60px"},fontFamily:"heading",lineHeight:{base:"57.6px",md:"72px",lg:"60px"},fontWeight:700},"heading-2xl":{fontSize:{base:"36px",md:"48px"},fontFamily:"heading",lineHeight:{base:"120%"},fontWeight:700},"heading-xl":{fontSize:{base:"30px",lg:"36px"},fontFamily:"heading",lineHeight:{base:"36px",lg:"120%"},fontWeight:700},"heading-lg":{fontSize:{base:"24px",lg:"30px"},fontFamily:"heading",lineHeight:{base:"28.8px",lg:"36px"},fontWeight:700},"heading-md":{fontSize:{base:"20px",lg:"24px"},fontFamily:"heading",lineHeight:"24px",fontWeight:700},"heading-sm":{fontSize:"16px",fontFamily:"heading",lineHeight:"19.2px",fontWeight:700},"heading-xs":{fontSize:"14px",fontFamily:"heading",lineHeight:"16.8px",fontWeight:700}},sizes:{px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem",max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",container:{sm:"640px",md:"768px",lg:"1024px",xl:"1280px"}},styles:{global:{body:{bg:"navy.900"}}}});var p=r(28165),m=r(52322);const f=()=>(0,m.jsx)(p.xB,{styles:"\n      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@200..700&display=swap');\n      @font-face {\n        font-family: 'GT America Condensed';\n        font-style: normal;\n        font-display: swap;\n        font-weight: 700;\n        src: local('GT America Condensed'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Bold.woff2') format('woff2'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Bold.woff') format('woff'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Bold.otf') format('opentype');\n      }\n      @font-face {\n        font-family: 'GT America Condensed';\n        font-style: italic;\n        font-display: swap;\n        font-weight: 700;\n        src: local('GT America Condensed'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Bold%20Italic.woff2')\n            format('woff2'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Bold%20Italic.woff')\n            format('woff'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Bold%20Italic.otf')\n            format('opentype');\n      }\n      @font-face {\n        font-family: 'GT America Condensed';\n        font-style: normal;\n        font-display: swap;\n        font-weight: 100;\n        src: local('GT America Condensed'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Thin.woff2') format('woff2'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Thin.woff') format('woff'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Thin.otf') format('opentype');\n      }\n      @font-face {\n        font-family: 'GT America Condensed';\n        font-style: italic;\n        font-display: swap;\n        font-weight: 100;\n        src: local('GT America Condensed'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Thin%20Italic.woff2')\n            format('woff2'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Thin%20Italic.woff')\n            format('woff'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Thin%20Italic.otf')\n            format('opentype');\n      }\n      @font-face {\n        font-family: 'GT America Mono';\n        font-style: normal;\n        font-display: swap;\n        font-weight: 700;\n        src: local('GT America Mono'),\n          url('https://fonts.synthetix.io/GT%20America%20Mono%20Bold.woff2') format('woff2'),\n          url('https://fonts.synthetix.io/GT%20America%20Mono%20Bold.woff') format('woff'),\n          url('https://fonts.synthetix.io/GT%20America%20Mono%20Bold.otf') format('opentype');\n      }\n      @font-face {\n        font-family: 'Lustra Text';\n        font-style: normal;\n        font-display: swap;\n        font-weight: 400;\n        src: local('Lustra Text'),\n          url('https://fonts.synthetix.io/Lustra%20Text%20Thin.otf') format('opentype');\n      }\n    "});var g=r(42219),y=r(28145),b=r(32684),j=r(95772),w=r(66901),C=r(26468),v=r(19433),S=r(54326),k=r(97217),A=r(59176),T=r(28535),D=r(97010),I=r(11082),F=r(84626);const L=({defaultOpen:e=!0})=>{const[t,r]=(0,n.useState)(e),[a,o]=(0,n.useState)(!1);return(0,m.jsxs)(w.u_,{isOpen:t,onClose:()=>{},children:[(0,m.jsx)(C.Z,{}),(0,m.jsxs)(v.h,{bgGradient:x.gradients.dark[500],pt:"10",pb:"3",borderWidth:"1px",borderColor:"gray.900","data-testid":"transaction modal",children:[(0,m.jsx)(S.x,{py:0,textAlign:"center",children:"Synthetix Terms of Service"}),(0,m.jsxs)(k.f,{fontSize:"xs",color:"gray.600",children:[(0,m.jsx)(A.x,{fontSize:"sm",children:"By clicking I Agree below, you agree to be bound by the terms of this Agreement. As such, you fully understand that:"}),(0,m.jsx)(T.xu,{onScroll:e=>{const t=e.currentTarget;t.scrollTop+10>=t.scrollHeight-t.offsetHeight?o(!0):o(!1)},as:"div",my:2,py:3,height:"350px",overflow:"auto",overflowX:"scroll",sx:{"::-webkit-scrollbar":{display:"block"},"::-webkit-scrollbar-track":{backgroundColor:"transparent"},"::-webkit-scrollbar-track-piece":{backgroundColor:"transparent"},"::-webkit-scrollbar-corner":{backgroundColor:"transparent"}},children:(0,m.jsx)(D.QI,{children:(0,m.jsxs)(A.x,{fontSize:"14px",children:[(0,m.jsxs)(D.HC,{children:[(0,m.jsxs)(I.r,{href:"https://synthetix.io/",target:"_blank",color:"cyan.500",_focusVisible:{outline:"none"},children:["Synthetix"," "]}),"is a blockchain-based decentralized finance project. You are participating at your own risk."]}),(0,m.jsx)(D.HC,{mt:2,children:"Synthetix is offered for use as is and without any guarantees regarding security. The protocol is made up of immutable code and can be accessed through a variety of user interfaces."}),(0,m.jsx)(D.HC,{mt:2,children:"No central entity operates the Synthetix protocol. Decisions related to the protocol are governed by a dispersed group of participants who collectively govern and maintain the protocol."}),(0,m.jsx)(D.HC,{mt:2,children:"Synthetix DAO does not unilaterally offer, maintain, operate, administer, or control any trading interfaces. The only user interfaces maintained by Synthetix DAO are the governance and liquidity interfaces herein."}),(0,m.jsxs)(D.HC,{mt:2,children:["You can participate in the governance process by staking SNX tokens in accordance with the rules and parameters summarized"," ",(0,m.jsx)(I.r,{href:"https://governance.synthetix.io/",target:"_blank",color:"cyan.500",_focusVisible:{outline:"none"},children:"here"}),", and/or joining the"," ",(0,m.jsx)(I.r,{color:"cyan.500",target:"_blank",href:"https://discord.com/invite/AEdUHzt",_focusVisible:{outline:"none"},children:"Synthetix Discord"})," ","and contributing to the conversation."]}),(0,m.jsx)(D.HC,{mt:2,children:"The rules and parameters associated with the Synthetix protocol and Synthetix DAO governance are subject to change at any time."}),(0,m.jsxs)(D.HC,{mt:2,children:["Your use of Synthetix is conditioned upon your acceptance to be bound by the Synthetix Term of Use, which can be found"," ",(0,m.jsx)(I.r,{as:i.rU,to:"/terms",target:"_blank",color:"cyan.500",_focusVisible:{outline:"none"},children:"here"}),"."]}),(0,m.jsx)(D.HC,{mt:2,children:"The laws that apply to your use of Synthetix may vary based upon the jurisdiction in which you are located. We strongly encourage you to speak with legal counsel in your jurisdiction if you have any questions regarding your use of Synthetix."}),(0,m.jsx)(D.HC,{mt:2,children:"By entering into this agreement, you are not agreeing to enter into a partnership. You understand that Synthetix is a decentralized protocol provided on an as is basis."}),(0,m.jsx)(D.HC,{mt:2,children:"You hereby release all present and future claims against Synthetix DAO related to your use of the protocol, the SNX token, SNX DAO governance, and any other facet of the protocol."}),(0,m.jsx)(D.HC,{mt:2,children:"You agree to indemnify and hold harmless SNX DAO and its affiliates for any costs arising out of or relating to your use of the Synthetix protocol."}),(0,m.jsx)(D.HC,{mt:2,children:"You are not accessing the protocol from Burma (Myanmar), Cuba, Iran, Sudan, Syria, the Western Balkans, Belarus, Cte dIvoire, Democratic Republic of the Congo, Iraq, Lebanon, Liberia, Libya, North Korea, Russia, certain sanctioned areas of Ukraine, Somalia, Venezuela, Yemen, or Zimbabwe (collectively, Prohibited Jurisdictions), or any other jurisdiction listed as a Specially Designated National by the United States Office of Foreign Asset Control (OFAC)."})]})})})]}),(0,m.jsx)(F.z,{variant:"outline",_focusVisible:{outline:"none"},my:4,mx:6,onClick:()=>{a&&(sessionStorage.setItem(g.sO.TERMS_CONDITIONS_ACCEPTED,JSON.stringify(!0)),r(!1))},isDisabled:!a,children:"I agree"})]})]})};var z=r(73557),M=r(81540),$=r(38035),E=r(17190),N=r(27234),B=r(10625),P=r(67046),H=r(99058),O=r(17383),R=r(39415),U=r(41098),W=r(23210),q=r(76885),_=r(96596),V=r(43712),Z=r(52275),G=r(51678),Q=r(81727),Y=r(70517),K=r(46954);const X=[1,11155111,8453,84532],J=q.g5.filter((e=>X.includes(e.id))).map((e=>({id:e.id,token:e.token,label:e.label,rpcUrl:e.rpcUrl()}))),ee=(0,K.S1)({wallets:[(0,V.ZP)({displayUnavailable:[V.lN.MetaMask,V.lN.Trust]}),(0,Z.Z)({appUrl:"https://liquidity.synthetix.eth.limo",email:"info@synthetix.io"}),(0,G.Z)({projectId:"d6eac005846a1c3be1f8eea3a294eed9",walletConnectVersion:2}),(0,Q.Z)({version:2,projectId:"d6eac005846a1c3be1f8eea3a294eed9",dappUrl:"liquidity.synthetix.eth.limo"}),(0,Y.Z)()],chains:[...J],appMetadata:{...q.EY,name:"Synthetix Governance"},accountCenter:{desktop:{enabled:!1},mobile:{enabled:!1}},notify:{enabled:!1}}),te=(e,t)=>{"undefined"!=typeof window&&window.localStorage.setItem(e,JSON.stringify(t))};function re(e,t){const[r,a]=(0,n.useState)((()=>{const r=function(e){if("undefined"!=typeof window){const t=window.localStorage.getItem(e);try{if(null!=t)return JSON.parse(t)}catch(e){console.error(e)}}return null}(e);return null!=r?r:t}));return[r,t=>{const n=t instanceof Function?t(r):t;a(n),te(e,n)}]}const ae={SHOW_TESTNETS:"SHOW_TESTNETS"};function ne(){const{activeWallet:e,walletsInfo:t,connect:r,disconnect:a}=(0,q.Os)(),{network:i,setNetwork:o}=(0,q.LN)(),[l,s]=re(ae.SHOW_TESTNETS,!1);(0,n.useEffect)((()=>{if(!t){const e=localStorage.getItem("connectedWallets");e&&r({autoSelect:{disableModals:!0,label:JSON.parse(e)}})}t&&localStorage.setItem("connectedWallets",JSON.stringify(t.label))}),[t,r]);return(0,m.jsxs)($.k,{children:[(0,m.jsx)(B.v,{children:({isOpen:e})=>(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(P.j,{as:F.z,variant:"outline",colorScheme:"gray",sx:{"> span":{display:"flex",alignItems:"center"}},mr:1,children:[(0,m.jsx)(q.dF,{networkId:i?.id||666}),(0,m.jsx)(A.x,{variant:"nav",fontSize:"sm",fontWeight:700,ml:1.5,mr:2,display:{base:"none",md:"initial"},children:i?.label||"Not Connected"}),(0,m.jsx)($.k,{display:{base:"none",md:"initial"},children:e?(0,m.jsx)(W.Kh,{color:"cyan"}):(0,m.jsx)(W._M,{color:"cyan.500"})})]}),(0,m.jsxs)(H.q,{children:[J.map((({id:e,label:t})=>84532!==e&&11155111!==e||l?(0,m.jsxs)(O.s,{onClick:()=>o(e),children:[(0,m.jsx)(q.dF,{networkId:e}),(0,m.jsx)(A.x,{variant:"nav",ml:2,children:t})]},`${e}`):null)),(0,m.jsx)(R._,{children:(0,m.jsxs)($.k,{py:4,px:3,alignItems:"center",justifyContent:"space-between",children:[(0,m.jsx)(A.x,{fontSize:"14px",fontFamily:"heading",lineHeight:"20px",children:"Show Testnets"}),(0,m.jsx)(U.r,{mr:2,size:"sm",color:"gray.900",colorScheme:"gray",isChecked:l,onChange:()=>s(!l)})]})})]})]})}),e?(0,m.jsxs)(B.v,{children:[(0,m.jsxs)(P.j,{as:F.z,variant:"outline",colorScheme:"gray",ml:2,height:10,py:"6px",px:"9.5px",whiteSpace:"nowrap",children:[(0,m.jsx)(W.o,{}),(0,m.jsx)(A.x,{as:"span",ml:1,color:"whiteAlpha.800",fontWeight:700,fontSize:"xs",userSelect:"none",children:e.ens?.name||(0,_.i_)(e.address)})]}),(0,m.jsxs)(H.q,{children:[(0,m.jsx)(O.s,{onClick:()=>{try{navigator.clipboard.writeText(e?.address)}catch(e){}},children:(0,m.jsx)(A.x,{variant:"nav",ml:2,children:"Copy address"})}),(0,m.jsx)(O.s,{onClick:()=>{t&&(a(t),localStorage.removeItem("connectedWallets"))},children:(0,m.jsx)(A.x,{variant:"nav",ml:2,children:"Disconnect"})})]})]}):(0,m.jsx)(F.z,{onClick:()=>r(),type:"button",size:"sm",ml:2,py:5,"data-testid":"connect-wallet-button",children:"Connect Wallet"})]})}var ie=r(26284),oe=r(56317),le=r(78071),se=r(16060),ce=r(50986);function de(){const{network:e}=(0,q.LN)(),t=(0,q.yL)(),a=(0,q.mx)(),n=a||t,i=Boolean(a);return(0,y.useQuery)({queryKey:[`${e?.id}-${e?.preset}`,"AccountProxy",{withSigner:i}],queryFn:async function(){if(!n||!e)throw new Error("Should be disabled");const{address:t,abi:a}=await async function(e,t="main"){switch(`${e}-${t}`){case"1-main":return r.e(8799).then(r.bind(r,68799));case"10-main":return r.e(1952).then(r.bind(r,41952));case"11155111-main":return r.e(3722).then(r.bind(r,3722));case"13370-main":return r.e(8371).then(r.bind(r,88371));case"42161-arbthetix":return r.e(3465).then(r.bind(r,73465));case"421614-arbthetix":return r.e(9978).then(r.bind(r,79978));case"8453-andromeda":return r.e(4511).then(r.bind(r,14511));case"84532-andromeda":return r.e(3060).then(r.bind(r,53060));default:throw new Error(`Unsupported chain ${e} for AccountProxy`)}}(e.id,e?.preset);return new ce.CH(t,a,n)},enabled:Boolean(n),staleTime:1/0})}var he=r(40109);function ue(){const{activeWallet:e}=(0,q.Os)(),{data:t}=de(),{network:r}=(0,q.LN)();return(0,y.useQuery)({queryKey:[`${r?.id}-${r?.preset}`,"Accounts",{accountAddress:e?.address}],queryFn:async function(){if(!t||!e?.address)throw new Error("Should be disabled");const r=await t.balanceOf(e.address);if(r.eq(0))return[];const a=Array.from(Array(r.toNumber()).keys());return(await Promise.all(a.map((async r=>{if(!e?.address)throw new Error("OMG!");return await t.tokenOfOwnerByIndex(e.address,r)})))).map((e=>e.toString()))},enabled:Boolean(t?.address&&e?.address),placeholderData:[]})}var xe=r(89536),pe=r(25042);function me({accountId:e}){const t=(0,xe.UO)();return(0,m.jsx)(i.rU,{to:{pathname:(0,se.Gn)("/"),search:e?(0,i.fW)({accountId:e}).toString():""},children:(0,m.jsx)(O.s,{_hover:{bg:"whiteAlpha.200"},_focus:{bg:"whiteAlpha.200"},_active:{bg:"whiteAlpha.200"},children:(0,m.jsxs)($.k,{width:"100%",alignItems:"center",children:[t.accountId===e&&(0,m.jsx)(pe.nQ,{marginRight:1}),e]})})})}function fe({accountId:e,isLoading:t,createAccount:r,accounts:a}){const{onCopy:n}=(0,ie.V)(e||"");return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(B.v,{children:[t?(0,m.jsx)(oe.O,{startColor:"whiteAlpha.500",endColor:"whiteAlpha.200",children:(0,m.jsx)(A.x,{children:"Loading..."})}):(0,m.jsx)(le.p,{in:!t,children:(0,m.jsx)(P.j,{size:"sm",borderRadius:"4px",height:"40px",as:F.z,variant:"outline",w:"100%",maxW:"180px","data-testid":"current account id","data-account-id":e,onClick:e?n:r,children:(e?`Account #${(0,_.i_)(e,3,3)}`:"Create Account")+" "})}),!!a?.length&&(0,m.jsxs)(H.q,{fontSize:"xs",bg:"black",py:0,border:"1px solid rgba(255,255,255,0.33)",children:[a?.map((e=>(0,m.jsx)(me,{accountId:e},e))),(0,m.jsx)(O.s,{_hover:{bg:"whiteAlpha.200"},_focus:{bg:"whiteAlpha.200"},_active:{bg:"whiteAlpha.200"},onClick:r,children:(0,m.jsx)(A.x,{fontWeight:"semibold",px:"2",children:"Create new account"})})]})]})})}function ge(){const e=(0,xe.UO)(),{data:t,isLoading:r,isFetching:a}=ue(),{mutate:i,isPending:o,data:l}=function(){const{data:e}=(0,he.a)(),{network:t}=(0,q.LN)(),r=(0,y.useQueryClient)();return(0,y.useMutation)({mutationFn:async function(){try{if(!e)throw new Error("CoreProxy undefined");const a=await e["createAccount()"](),n=await a.wait();let i;return await r.invalidateQueries({queryKey:[`${t?.id}-${t?.preset}`,"Accounts"]}),n.logs.forEach((t=>{if(t.topics[0]===e.interface.getEventTopic("AccountCreated")){const r=e.interface.decodeEventLog("AccountCreated",t.data,t.topics)?.accountId;i=r?.toString()}})),[i]}catch(e){throw console.error(e),e}}})}(),s=(0,z.s0)(),c=(0,z.TH)();!function(){const e=ue(),[{wallet:t}]=(0,K.Or)(),r=(0,z.s0)(),a=(0,z.TH)(),i=(0,n.useMemo)((()=>new URLSearchParams(a.search)),[a.search]);(0,n.useEffect)((()=>{const n=i.get("accountId")||void 0;if(e.isFetched&&e.data&&e.data.length>0)return void(n&&e.data.includes(n)||(i.set("accountId",e.data[0]),r({pathname:a.pathname,search:i.toString()},{replace:!0})));const o=t?.accounts;(o&&o.length<1||e.isFetched&&(!e.data||e.data.length<1))&&n&&r({pathname:a.pathname,search:i.toString()},{replace:!0})}),[e.data,e.isFetched,r,a.pathname,i,t?.accounts])}();const d=r||a||o||!t;return(0,n.useEffect)((()=>{const r=l?l[0]:t?.includes(e?.accountId||"")?e.accountId:t?.[0],a=new URLSearchParams(c.search);r&&a.set("accountId",r),s({pathname:c.pathname,search:a.toString()},{replace:!0})}),[l]),(0,m.jsx)(fe,{isLoading:d,createAccount:i,accountId:e.accountId,accounts:t})}function ye(){const{onClose:e}=(0,N.q)(),t=(0,z.TH)();return(0,n.useEffect)((()=>{e()}),[t,e]),(0,m.jsx)(m.Fragment,{children:(0,m.jsx)($.k,{mb:"8",py:"4",bg:"navy.900",borderBottomWidth:"1px",borderBottomColor:"gray.900",children:(0,m.jsxs)(E.W,{maxW:"1024px",as:$.k,justifyContent:"space-between",alignItems:"center",children:[(0,m.jsx)(T.xu,{display:{base:"none",md:"inline-block"},children:(0,m.jsx)(I.r,{to:{pathname:"/"},as:i.rU,py:4,pr:2,children:(0,m.jsx)(W.TR,{})})}),(0,m.jsx)(T.xu,{display:{md:"none"},children:(0,m.jsx)(I.r,{to:"/",as:i.rU,py:4,pr:2,children:(0,m.jsx)(W.K7,{})})}),(0,m.jsxs)($.k,{justifyContent:"center",alignItems:"center",children:[(0,m.jsx)(T.xu,{display:{base:"none",md:"inline-block"},mr:3,children:(0,m.jsx)(ge,{})}),(0,m.jsx)(ne,{})]})]})})})}const be=()=>(0,m.jsx)(T.xu,{as:"main",minHeight:"100vh",color:"rgba(255,255,255,0.85)",display:"flex",flexDirection:"column",bg:"navy.900",children:(0,m.jsxs)($.k,{flex:"1",flexDirection:"column",children:[(0,m.jsx)(ye,{}),(0,m.jsx)(E.W,{display:"flex",flexDir:"column",maxW:"1024px",flex:"1",children:(0,m.jsx)(z.j3,{})})]})});var je=r(18671),we=r(19299),Ce=r(18914),ve=(r(40903),r(55588)),Se=r(79929),ke=r.n(Se),Ae=r(30195),Te=r(860),De=r(99780),Ie=r(99268),Fe=r(17123),Le=r(77528);const ze=["0xef0d8b6fda2ceba41da15d4095d1da392a0d2f8ed0c6c7bc0f4cfac8c280b56d","0xff61491a931112ddf1bd8147cd1b641375f79f5825126d665480874634fd0ace","0xeff7446475e218517566ea99e72a4abec2e1bd8498b43b7d8331e29dcb059389","0x93da3352f9f1d105fdfe4971cfa80e9dd777bfc5d0f683ebb6e1294b92137bb7","0x2f95862b045670cd22bee3114c39763a4a08beeb663b145d283c31d7d1101c4f","0x72b021217ca3fe68922a19aaf990109cb9d84e9ad004b4d2025ad6f529314419","0xdcef50dd0a4cd2dcc17e45df1676dcb336a11a61c69df7a0299b0150c672d25c","0x3fa4252848f9f0a1480be62745a4629d9eb1322aebab8a791e344b3b9c1adcf5","0x39d020f60982ed892abbcd4a06a276a9f9b7bfbce003204c110b6e488f502da3","0x5c6c0d2386e3352356c3ab84434fafb5ea067ac2678a38a338c4a69ddc4bdb0c","0x5de33a9112c2b700b8d30b8a3402c103578ccfa2765696471cc672bd5cf6ac52","0x385f64d993f7b77d8182ed5003d97c60aa3361f3cecfe711544d2d59165e9bdf","0x193c739db502aadcef37c2589738b1e37bdb257d58cf1ab3c7ebc8e6df4e3ec0"],Me=new Fe.O(g.kw),$e=()=>{const{network:e}=(0,q.LN)();return(0,y.useQuery)({queryKey:[`${e?.id}-${e?.preset}`,"price-updates",ze.join(",")],enabled:(0,Le.Yz)(e?.id,e?.preset),queryFn:async()=>{const t=await Me.getPriceFeedsUpdateData(ze),r=De.$.encode(["uint8","uint64","bytes32[]","bytes[]"],[1,60,ze,t]),a=new Ie.vU(Te.IN);return{to:(0,Le.Ax)(e?.id),data:a.encodeFunctionData("fulfillOracleQuery",[r]),value:10*ze.length}}})},Ee=ve.rK.transform((e=>(0,Se.wei)(e)));async function Ne({CoreProxy:e,collateralAddresses:t}){const r=await Promise.all(t.map((t=>e.populateTransaction.getCollateralPrice(t))));if(0===r.length)return{calls:[],decoder:()=>[]};return{calls:r,decoder:t=>{if(Array.isArray(t))return t.map((t=>{const r=e.interface.decodeFunctionResult("getCollateralPrice",t)[0];return Ee.parse(r)}));throw Error("Expected array got: "+typeof t)}}}const Be=async({accountId:e,tokenAddresses:t,CoreProxy:r})=>{const a=t.flatMap((t=>[r.populateTransaction.getAccountAvailableCollateral(e,t),r.populateTransaction.getAccountCollateral(e,t)]));return{decoder:e=>{if(!Array.isArray(e))throw Error("Expected array");return t.map(((t,a)=>{const[n]=r.interface.decodeFunctionResult("getAccountAvailableCollateral",e[2*a]),{totalAssigned:i,totalDeposited:o,totalLocked:l}=r.interface.decodeFunctionResult("getAccountCollateral",e[2*a+1]);return{tokenAddress:t,availableCollateral:(0,Se.wei)(n),totalAssigned:(0,Se.wei)(i),totalDeposited:(0,Se.wei)(o),totalLocked:(0,Se.wei)(l)}}))},calls:await Promise.all(a)}};function Pe({accountId:e,includeDelegationOff:t}){const{data:r}=(0,he.a)(),{network:a}=(0,q.LN)(),n=(0,we.T)(t),i=n.data?.map((e=>e.tokenAddress))??[],o=(0,q.M9)(),{data:l}=$e();return(0,y.useQuery)({queryKey:[`${a?.id}-${a?.preset}`,"AccountCollateral",{accountId:e},{tokens:i,priceUpdateTx:l?.data}],enabled:Boolean(r&&e&&i.length>0),queryFn:async function(){if(!r||!e||i.length<1||!a||!o)throw"useAccountCollateral should be disabled";const{calls:t,decoder:s}=await Be({accountId:e,tokenAddresses:i,CoreProxy:r}),c=[...t];l&&c.unshift(l);return(await(0,Te.Iy)(a,o,t,s,"useAccountCollateral")).map((e=>({...e,symbol:n.data?.find((t=>t.tokenAddress===e.tokenAddress))?.symbol??""})))}})}var He=r(51686),Oe=r(95522),Re=r(63478);const Ue=Ae.z.object({value:ve.rK.transform((e=>(0,Se.wei)(e))).optional(),amount:ve.rK.transform((e=>(0,Se.wei)(e)))}),We=ve.rK.transform((e=>(0,Se.wei)(e))),qe=async({CoreProxy:e,accountId:t,poolId:r,tokenAddress:a})=>({calls:await Promise.all([e.populateTransaction.getPositionCollateral(t,r,a),e.populateTransaction.getPositionDebt(t,r,a)]),decoder:t=>{if(Array.isArray(t)&&2===t.length){const r=e.interface.decodeFunctionResult("getPositionCollateral",t[0]),a=e.interface.decodeFunctionResult("getPositionDebt",t[1])[0];return{debt:We.parse(a),collateral:Ue.parse({...r})}}throw Error("Expected array with two items")}}),_e=e=>{const t=(e=>e?.configurations.reduce(((e,{market:t})=>e.add(t.pnl)),(0,Se.wei)(0)))(e),r=e?.configurations.reduce(((e,{market:t})=>e.add(t.market_snapshots_by_week[1]?.pnl||(0,Se.wei)(0))),(0,Se.wei)(0));if(t&&r)return{value:t.sub(r),growthPercentage:r.eq(0)?void 0:t.sub(r).div(r.abs())}},Ve=(e,t)=>e.eq(0)||t.eq(0)?(0,Se.wei)(0):t.div(e);function Ze(e,t){return t.reduce(((t,r)=>(t[r[e]]=r,t)),{})}const Ge=({accountId:e})=>{const{data:t}=(0,he.a)(),{data:r}=(0,Ce.Oh)(),{data:a}=(0,we.T)(),{data:n}=(0,He.L)(),{data:i}=$e(),{network:o}=(0,q.LN)(),l=(0,q.eK)(o);return(0,y.useQuery)({queryKey:[`${o?.id}-${o?.preset}`,"LiquidityPositions",{accountId:e},{pools:r?r.map((e=>e.id)).sort():[],tokens:a?a.map((e=>e.tokenAddress)).sort():[],collateralPriceUpdatesLength:n?.length,priceUpdateTx:i?.data||""}],queryFn:async()=>{if(!(r&&a&&t&&e&&n&&o&&l))throw Error("Query should not be enabled");const s=(await Promise.all(r.map((async({id:r,name:n})=>Promise.all(a.map((async a=>{const{calls:i,decoder:o}=await qe({CoreProxy:t,accountId:e,poolId:r,tokenAddress:a.tokenAddress});return{calls:i,decoder:o,poolName:n,collateralType:a,poolId:r}}))))))).flat(),{calls:c,decoder:d}=await Ne({collateralAddresses:a.map((e=>e.tokenAddress)),CoreProxy:t}),h=s.map((e=>e.calls)).flat(),u=(await(0,Oe.$)(n,o.isTestnet).then((e=>(0,Oe.x)("0x",n,e)))).concat(c.concat(h)),x=s.at(0)?.decoder;return i&&u.unshift(i),await(0,Te.Iy)(o,l,u,(t=>{if(!Array.isArray(t))throw Error("Expected array");if(!x)return{};const r=Ze("address",d(t.slice(0,c.length)).map(((e,t)=>({price:e,address:a[t].tokenAddress})))),n=t.filter((e=>"0x0000000000000000000000000000000000000000000000000000000000000000"!==e)),i=n.length%2==0?n:n.slice(c.length);var o;return Ze("id",(o=i,Array.from({length:o.length/2},((e,t)=>[o[2*t],o[2*t+1]]))).map((e=>x(e))).map((({debt:t,collateral:a},n)=>{const{poolName:i,collateralType:o,poolId:l}=s[n],c=a.amount,d=r?.[o.tokenAddress].price,h=d?c.mul(d):(0,Se.wei)(0),u=Ve(t,h);return{id:`${l}-${o.symbol}`,accountId:e,poolId:l,poolName:i,collateralPrice:d,collateralAmount:c,collateralValue:h,collateralType:o,cRatio:u,debt:t}})))}),"useLiquidityPositions")},enabled:Boolean(n&&t&&a?.length&&e&&r?.length)})};const Qe=(e,t)=>{const r={style:"currency",currency:"USD",locales:"en-EN",...t};return new Intl.NumberFormat(r.locales,r).format(Number(e))},Ye=(e,t)=>{const r={minimumFractionDigits:2,maximumFractionDigits:2,locales:"en-EN",...t};return new Intl.NumberFormat(r.locales,r).format(Number(e))},Ke=(e,t)=>{const r={minimumFractionDigits:0,maximumFractionDigits:2,locales:"en-EN",style:"percent",...t};return new Intl.NumberFormat(r.locales,r).format(Number(e))},Xe=e=>(0,m.jsx)($.k,{bg:"navy.700",borderWidth:"1px",borderColor:"gray.900",borderRadius:"base",...e}),Je=({totalDebt:e,totalCollateral:t,isLoading:r})=>(0,m.jsxs)($.k,{justifyContent:"space-between",gap:4,flexDirection:{base:"column",md:"row"},children:[(0,m.jsxs)(Xe,{p:4,width:"33%",flexDir:"column",children:[(0,m.jsx)(A.x,{fontSize:"xs",fontFamily:"heading",textTransform:"uppercase",color:"gray.500",textAlign:"center",fontWeight:"400",children:"Total Collateral"}),(0,m.jsx)($.k,{justifyContent:"center",children:r?(0,m.jsx)(oe.O,{width:"fit-content",mt:"0.25rem",startColor:"whiteAlpha.500",endColor:"whiteAlpha.200",children:(0,m.jsx)(A.x,{fontFamily:"heading",fontWeight:"800",textAlign:"center",fontSize:"xl",children:"100,000"})}):(0,m.jsx)(le.p,{in:!0,children:(0,m.jsx)(A.x,{fontFamily:"heading",fontWeight:"800",textAlign:"center",fontSize:"2xl",children:t?Qe(t):""})})})]}),(0,m.jsxs)(Xe,{p:4,flexDir:"column",width:"33%",children:[(0,m.jsx)(A.x,{fontSize:"xs",fontFamily:"heading",textTransform:"uppercase",color:"gray.500",textAlign:"center",fontWeight:"400",children:"Total debt"}),(0,m.jsx)($.k,{justifyContent:"center",children:r?(0,m.jsx)(oe.O,{width:"fit-content",mt:"0.25rem",startColor:"whiteAlpha.500",endColor:"whiteAlpha.200",children:(0,m.jsx)(A.x,{fontFamily:"heading",fontWeight:"800",textAlign:"center",fontSize:"xl",children:"100,000"})}):(0,m.jsx)(le.p,{in:!0,children:(0,m.jsx)(A.x,{fontFamily:"heading",fontWeight:"800",textAlign:"center",fontSize:"2xl",children:e?Qe(e):""})})})]}),(0,m.jsxs)(Xe,{p:4,flexDir:"column",width:"33%",children:[(0,m.jsx)(A.x,{fontSize:"xs",fontFamily:"heading",textTransform:"uppercase",color:"gray.500",textAlign:"center",fontWeight:"400",children:"Total Lifetime Earnings"}),(0,m.jsx)($.k,{justifyContent:"center",children:r?(0,m.jsx)(oe.O,{width:"fit-content",mt:"0.25rem",startColor:"whiteAlpha.500",endColor:"whiteAlpha.200",children:(0,m.jsx)(A.x,{fontFamily:"heading",fontWeight:"800",textAlign:"center",fontSize:"xl",children:"100,000"})}):(0,m.jsx)(le.p,{in:!0,children:(0,m.jsx)(A.x,{fontFamily:"heading",fontWeight:"800",textAlign:"center",fontSize:"2xl",children:""})})})]})]});var et=r(74409),tt=r(70189),rt=r(78534),at=r(80774),nt=r(5832),it=r(66983);const ot=({pool:e,collateralTypes:t,liquidityPositionsById:r,apr:a})=>{const{network:n}=(0,q.LN)();return(0,m.jsxs)(Xe,{p:4,mt:8,flexDir:"column",children:[(0,m.jsxs)($.k,{justifyContent:"space-between",flexWrap:{base:"wrap",md:"nowrap"},alignItems:"center",children:[(0,m.jsx)($.k,{alignItems:"baseline",justifyContent:"flex-start",flexDirection:{base:"column",md:"row"},children:(0,m.jsx)(le.p,{in:!0,children:(0,m.jsx)(et.X,{fontSize:"2xl",children:e.name})})}),e.id&&(0,m.jsx)(le.p,{in:!0,children:(0,m.jsx)(F.z,{as:i.rU,mt:{base:2,md:0},size:"sm",to:{pathname:(0,se.Gn)("/pools/:poolId",{poolId:e.id}),search:location.search},variant:"outline",children:"Pool Info"})})]}),(0,m.jsx)(T.xu,{overflowX:"auto",children:(0,m.jsxs)(tt.i,{mt:8,size:"sm",variant:"unstyled",mb:"9",children:[(0,m.jsx)(rt.h,{sx:{tr:{borderBottomColor:"gray.900",borderBottomWidth:"1px"}},children:(0,m.jsxs)(at.Tr,{children:[(0,m.jsx)(nt.Th,{color:"gray.500",fontSize:"xs",lineHeight:"4",pb:"3",textTransform:"initial",children:"Collateral"}),(0,m.jsx)(nt.Th,{color:"gray.500",fontSize:"xs",lineHeight:"4",pb:"3",textTransform:"initial",children:"Debt"}),(0,Le.Yz)(n?.id,n?.preset)?(0,m.jsx)(nt.Th,{color:"gray.500",fontSize:"xs",lineHeight:"4",pb:"3",textTransform:"initial",children:"APR"}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(nt.Th,{color:"gray.500",fontSize:"xs",lineHeight:"4",pb:"3",textTransform:"initial",children:"C-Ratio"}),(0,m.jsx)(nt.Th,{color:"gray.500",fontSize:"xs",lineHeight:"4",pb:"3",textTransform:"initial",children:"Issuance Ratio"}),(0,m.jsx)(nt.Th,{color:"gray.500",fontSize:"xs",lineHeight:"4",pb:"3",textTransform:"initial",children:"Liquidation Ratio"})]}),(0,m.jsx)(nt.Th,{color:"gray.500",fontSize:"xs",lineHeight:"4",pb:"2",textTransform:"initial"})]})}),(0,m.jsx)(it.p,{sx:{tr:{borderBottomColor:"gray.900",borderBottomWidth:"1px"}},children:(0,m.jsx)(m.Fragment,{children:t&&t.map((t=>(0,m.jsx)(ut,{collateralType:t,poolId:e.id,liquidityPosition:r?.[`${e.id}-${t.symbol}`],apr:a},t.tokenAddress)))})})]})})]})},lt=({pools:e,collateralTypes:t,liquidityPositionsById:r,isLoading:a,apr:n})=>(0,m.jsx)(m.Fragment,{children:a?(0,m.jsx)(xt,{}):(0,m.jsx)(m.Fragment,{children:e?.map((e=>(0,m.jsx)(ot,{pool:e,collateralTypes:t,liquidityPositionsById:r,apr:n},e.id)))})});var st=r(45071),ct=r(79443),dt=r(92841);function ht({collateralType:e,liquidityPosition:t,poolId:r,isConnected:a,openConnectModal:n,apr:o}){const{network:l}=(0,q.LN)(),s=(0,z.TH)(),c=Ve(t?.debt||(0,Se.wei)(0),t?.collateralValue||(0,Se.wei)(0)),d=t&&t.collateralAmount.gt(0);return(0,m.jsxs)(at.Tr,{children:[(0,m.jsx)(ct.Td,{children:(0,m.jsxs)($.k,{flexDir:"row",py:4,children:[(0,m.jsx)(W.l6,{width:"40px",height:"40px",symbol:e.symbol}),(0,m.jsxs)($.k,{flexDirection:"column",justifyContent:"center",ml:2,children:[(0,m.jsx)(A.x,{fontSize:"sm",lineHeight:"20px",fontWeight:"500","data-testid":"collateral-value",children:t?.collateralValue.gt(0)?(0,m.jsx)(st.$,{value:t.collateralValue,prefix:"$"}):"-"}),(0,m.jsxs)(A.x,{fontSize:"xs",color:"gray.500","data-testid":"collateral-amount",whiteSpace:"nowrap",children:[t?.collateralAmount.gt(0)&&(0,m.jsx)(st.$,{value:t.collateralAmount})," ",e.symbol]})]})]})}),(0,m.jsx)(ct.Td,{"data-testid":"debt",children:t?.debt.gt(0)?(0,m.jsx)(st.$,{value:t.debt,prefix:"$"}):"-"}),(0,Le.Yz)(l?.id,l?.preset)?(0,m.jsx)(ct.Td,{children:(0,m.jsx)(dt.u,{label:"APR is a combination of past week pool performance and rewards.",children:(0,m.jsxs)(A.x,{children:[o?o.toFixed(2):"-","%"]})})}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(ct.Td,{"data-testid":"c-ratio",children:c.gt(0)?(0,m.jsx)(st.$,{value:c.mul(100),suffix:"%"}):"-"}),(0,m.jsx)(ct.Td,{children:(0,m.jsx)(st.$,{"data-testid":"issuance-ratio",value:e.issuanceRatioD18.mul(100),suffix:"%"})}),(0,m.jsx)(ct.Td,{children:(0,m.jsx)(st.$,{value:e.liquidationRatioD18.mul(100),"data-testid":"liquidation-ratio",suffix:"%"})})]}),(0,m.jsxs)(ct.Td,{textAlign:"end",children:[a&&d?(0,m.jsx)(F.z,{as:i.rU,to:{pathname:(0,se.Gn)("/positions/:collateralSymbol/:poolId",{poolId:r,collateralSymbol:e.symbol}),search:s.search},children:"Manage"}):null,a&&!d?(0,m.jsx)(F.z,{as:i.rU,to:{pathname:(0,se.Gn)("/deposit/:collateralSymbol/:poolId",{poolId:r,collateralSymbol:e.symbol}),search:s.search},children:"Deposit"}):null,!a&&n?(0,m.jsx)(F.z,{onClick:n,children:"Connect"}):null]})]})}const ut=({collateralType:e,poolId:t,liquidityPosition:r,apr:a})=>{const n=(0,q.T9)(),[i,o]=(0,K.Or)();return(0,m.jsx)(ht,{collateralType:e,liquidityPosition:r,poolId:t,isConnected:n,openConnectModal:()=>o(),apr:a})},xt=()=>(0,m.jsxs)(Xe,{p:4,mt:8,flexDir:"column",children:[(0,m.jsx)($.k,{justifyContent:"space-between",flexWrap:{base:"wrap",md:"nowrap"},alignItems:"center",children:(0,m.jsx)($.k,{alignItems:"baseline",justifyContent:"flex-start",flexDirection:{base:"column",md:"row"},children:(0,m.jsx)(le.p,{in:!0,children:(0,m.jsx)(et.X,{fontSize:"2xl",children:"Loading Pools..."})})})}),(0,m.jsx)(T.xu,{overflowX:"auto",children:(0,m.jsxs)(tt.i,{mt:8,size:"sm",variant:"unstyled",mb:"9",children:[(0,m.jsx)(rt.h,{sx:{tr:{borderBottomColor:"gray.900",borderBottomWidth:"1px"}},children:(0,m.jsxs)(at.Tr,{children:[(0,m.jsx)(nt.Th,{color:"gray.500",fontSize:"xs",lineHeight:"4",pb:"3",textTransform:"initial",children:"Collateral"}),(0,m.jsx)(nt.Th,{color:"gray.500",fontSize:"xs",lineHeight:"4",pb:"3",textTransform:"initial",children:"Debt"}),(0,m.jsx)(nt.Th,{color:"gray.500",fontSize:"xs",lineHeight:"4",pb:"3",textTransform:"initial",children:"C-Ratio"}),(0,m.jsx)(nt.Th,{color:"gray.500",fontSize:"xs",lineHeight:"4",pb:"3",textTransform:"initial",children:"Issuance Ratio"}),(0,m.jsx)(nt.Th,{color:"gray.500",fontSize:"xs",lineHeight:"4",pb:"3",textTransform:"initial",children:"Liquidation Ratio"}),(0,m.jsx)(nt.Th,{color:"gray.500",fontSize:"xs",lineHeight:"4",pb:"2",textTransform:"initial"})]})}),(0,m.jsx)(it.p,{sx:{tr:{borderBottomColor:"gray.900",borderBottomWidth:"1px"}},children:Array.from({length:2}).map(((e,t)=>(0,m.jsx)(mt,{startColor:t%2?"whiteAlpha.200":"whiteAlpha.500",endColor:t%2?"whiteAlpha.500":"whiteAlpha.200"},t)))})]})})]});var pt=r(76364);const mt=({startColor:e,endColor:t})=>(0,m.jsxs)(at.Tr,{children:[(0,m.jsx)(ct.Td,{children:(0,m.jsx)($.k,{flexDir:"row",py:4,children:(0,m.jsx)(pt.s,{startColor:e,endColor:t,height:"40px",width:"40px",children:(0,m.jsx)(W.l6,{width:"40px",height:"40px",symbol:"SNX"})})})}),(0,m.jsx)(ct.Td,{children:(0,m.jsx)(oe.O,{height:"28px",startColor:e,endColor:t,children:(0,m.jsx)(st.$,{value:(0,Se.wei)(10**5),prefix:"$"})})}),(0,m.jsx)(ct.Td,{children:(0,m.jsx)(oe.O,{height:"28px",startColor:e,endColor:t,children:(0,m.jsx)(st.$,{value:(0,Se.wei)(10**5),suffix:"%"})})}),(0,m.jsx)(ct.Td,{children:(0,m.jsx)(oe.O,{height:"28px",startColor:e,endColor:t,children:(0,m.jsx)(st.$,{value:(0,Se.wei)(10**5),suffix:"%"})})}),(0,m.jsx)(ct.Td,{children:(0,m.jsx)(oe.O,{height:"28px",startColor:e,endColor:t,children:(0,m.jsx)(st.$,{value:(0,Se.wei)(10**5),suffix:"%"})})}),(0,m.jsx)(ct.Td,{textAlign:"end",children:(0,m.jsx)(oe.O,{height:"28px",startColor:e,endColor:t,children:(0,m.jsx)(F.z,{as:i.rU,disabled:!0,children:"Loading"})})})]});var ft=r(47443),gt=r(52929),yt=r(80877),bt=r(74444),jt=r(7987);function wt({accountId:e}){const{data:t}=(0,he.a)(),{network:r}=(0,q.LN)();return(0,y.useQuery)({queryKey:[`${r?.id}-${r?.preset}`,"AccountCollateralUnlockDate",{accountId:e}],enabled:Boolean(t&&e),queryFn:async function(){if(!t||!e)throw new Error("Core Proxy or account id is not defined");const[r,a]=await Promise.all([t.getAccountLastInteraction(e),t.getConfigUint(jt.s("accountTimeoutWithdraw"))]),n=r.add(a);return new Date(1e3*n.toNumber())}})}var Ct=r(40541),vt=r(61295);const St=e=>{if(e&&!(e.getTime()<=Date.now()))return(0,Ct.Z)(e,{addSuffix:!0})},kt=e=>{if(e&&!(e.getTime()<=Date.now()))return(0,vt.Z)(e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"})};var At=r(70065),Tt=r(4447),Dt=r(47973),It=r(17716),Ft=r(10528),Lt=r(51906),zt=r(49494),Mt=r(99),$t=r(35834),Et=r(81666),Nt=r(37330);const Bt=({accountId:e,usdcCollateral:t,snxUSDCollateral:r})=>{const[a,i]=(0,n.useReducer)(It.I,It.E),{data:o}=(0,he.a)(),{data:l}=(0,Et.b)(),{data:s}=(0,Re.a)(),{data:c}=(0,He.L)(),{network:d}=(0,q.LN)(),{gasSpeed:h}=(0,j.jU)(),u=(0,q.mx)(),x=(0,q.yL)(),p=(0,n.useMemo)((()=>r.availableCollateral.add(t.availableCollateral)),[r.availableCollateral,t.availableCollateral]),m=(0,y.useMutation)({mutationFn:async()=>{if(!u||!d||!x)throw new Error("No signer or network");if(!(o&&l&&p.gt(0)&&c&&e))return;const a=await u.getAddress();try{i({type:"prompting"});const n=(0,$t.o)({provider:x}),m=t?.availableCollateral.gt(0)?o.populateTransaction.withdraw(Ft.O$.from(e),t.tokenAddress,t?.availableCollateral.toBN()):void 0,f=r?.availableCollateral.gt(0)?o.populateTransaction.withdraw(Ft.O$.from(e),r.tokenAddress,r?.availableCollateral.toBN()):void 0,g=r.availableCollateral.gt(0)?s?.populateTransaction.approve(l.address,r.availableCollateral.toBN()):void 0,y=r.availableCollateral.gt(0)?l.populateTransaction.buy(Le.Ds,r.availableCollateral.toBN(),0,Lt.d):void 0,b=l.populateTransaction.unwrap(Le.Ds,p.toBN(),Number(zt.bM(p.toBN().mul(98).div(100).toString(),12).toString()).toFixed()),j=(0,Oe.$)(c,d.isTestnet).then((e=>(0,Oe.x)(a,c,e))),[w,C,v,S,k,A,T]=await Promise.all([n,m,f,g,y,b,j]),D=T.concat([C,v,S,k,A].filter(Nt._)),I=await(0,Te.dI)(d,D,"useWithdraw",o.interface),F=(0,Mt.F)({gasLimit:I.gasLimit,gasPrices:w,gasSpeed:h}),L=await u.sendTransaction({...I,...F});i({type:"pending",payload:{txnHash:L.hash}}),await L.wait(),i({type:"success"})}catch(e){throw i({type:"error",payload:{error:e}}),e}}});return{mutation:m,txnState:a,settle:()=>i({type:"settled"}),isLoading:m.isPending,exec:m.mutateAsync}};var Pt=r(97721),Ht=r(97737),Ot=r(992),Rt=r(99581);function Ut({accountCollaterals:e,accountCollateralUnlockDate:t}){const[r,a]=(0,n.useState)(!1),i=(0,n.useMemo)((()=>e.find((e=>"USDC"===e.symbol))),[e]),o=(0,n.useMemo)((()=>e.find((e=>"snxUSD"===e.symbol))),[e]),l=(0,n.useMemo)((()=>!t||t.getTime()>Date.now()||o?.availableCollateral.add(i?.availableCollateral).eq(0)),[t,o?.availableCollateral,i?.availableCollateral]);return(0,m.jsxs)(at.Tr,{"data-testid":"available collateral row",children:[(0,m.jsx)(ct.Td,{children:(0,m.jsxs)($.k,{flexDir:"row",py:4,children:[(0,m.jsx)(le.p,{in:!0,children:(0,m.jsx)(W.l6,{width:"32px",height:"32px",symbol:"USDC"})}),(0,m.jsx)($.k,{flexDirection:"column",justifyContent:"center",ml:2,children:(0,m.jsx)(le.p,{in:!0,children:(0,m.jsxs)(A.x,{fontSize:"lg",color:"gray.500","data-testid":"available-collateral",children:[(0,m.jsx)(st.$,{value:i?.availableCollateral.add(o?.availableCollateral)})," ","USDC"]})})})]})}),(0,m.jsxs)(ct.Td,{textAlign:"end",children:[(0,m.jsx)(le.p,{in:!0,children:(0,m.jsx)(F.z,{isDisabled:l,"data-testid":"withdraw-button",onClick:()=>a(!0),children:"Withdraw"})}),(0,m.jsx)(n.Suspense,{fallback:null,children:r&&i&&o?(0,m.jsx)(Wt,{usdcCollateral:i,snxUSDCollateral:o,onClose:()=>a(!1),isOpen:r}):null})]})]})}function Wt({usdcCollateral:e,snxUSDCollateral:t,onClose:r,isOpen:a}){const[o]=(0,i.lr)(),l=(0,At.p)({isClosable:!0,duration:9e3}),{network:s}=(0,q.LN)(),{exec:c}=(0,Dt.E)(),{exec:d}=Bt({usdcCollateral:e,snxUSDCollateral:t,accountId:o.get("accountId")||""}),h=(0,y.useQueryClient)(),{data:u}=(0,he.a)(),x=(0,Pt.o)(u),p=(0,n.useMemo)((()=>t.availableCollateral.add(e.availableCollateral)),[t.availableCollateral,e.availableCollateral]),[f,g]=(0,Ht.e)(Ot.iI,{context:{amount:p},services:{[Ot.vk.withdraw]:async()=>{try{await d(),await h.invalidateQueries({queryKey:[`${s?.id}-${s?.preset}`,"AccountSpecificCollateral"],exact:!1}),await h.invalidateQueries({queryKey:[`${s?.id}-${s?.preset}`,"AccountCollateral"],exact:!1}),await h.invalidateQueries({queryKey:[`${s?.id}-${s?.preset}`,"LiquidityPosition"],exact:!1})}catch(e){const t=x(e);throw t&&console.error(new Error(t.name),t),l.closeAll(),l({title:"Withdraw failed",description:t?(0,m.jsx)(Rt.M,{contractError:t}):"Please try again.",status:"error"}),Error("Withdraw failed",{cause:e})}},[Ot.vk.unwrap]:async()=>{try{l({title:"Unwrap",description:"Unwrapping WETH to ETH.",status:"info"}),await c(f.context.amount)}catch(e){throw l.closeAll(),l({title:"Unwrap failed",description:"Please try again.",status:"error"}),Error("Unwrap failed",{cause:e})}}}}),b=(0,n.useCallback)((async()=>{if(f.matches(Ot.ZM.success))return g(Ot.zW.RESET),void r();f.context.error?g(Ot.zW.RETRY):g(Ot.zW.RUN)}),[r,g,f]);return(0,m.jsx)(Tt.WithdrawModalUi,{amount:f.context.amount,isOpen:a,onClose:r,accountCollateral:e,state:f,error:f.context.error,onSubmit:b})}function qt({accountCollaterals:e,timeToUnlock:t,unlockDateString:r,unlockDate:a,isLoading:n,network:i}){return(0,m.jsxs)(Xe,{p:4,mt:8,flexDir:"column",children:[(0,m.jsx)(et.X,{fontSize:"2xl",mb:"2",children:n?"Loading Collateral...":"Collateral Withdrawal"}),!n&&(0,m.jsx)(le.p,{in:!0,children:(0,m.jsxs)($.k,{alignItems:"center",mb:"0",children:[(0,m.jsx)(A.x,{color:"gray.500",children:"As a security precaution, collateral cannot be withdrawn until at least 1 day has elapsed since previous account activity."}),(0,m.jsxs)(ft.b,{ml:"auto",status:""===t?"loading":t?"error":"success",width:"540px",title:r,children:[(0,m.jsx)(gt.z,{}),(0,m.jsxs)(T.xu,{width:"100%",children:[(0,m.jsx)(yt.C,{children:"Withdrawals available"}),t&&(0,m.jsx)(bt.X,{"data-testid":"time-to-unlock",display:"block",children:t})]})]})]})}),(0,m.jsx)(le.p,{in:!0,children:(0,m.jsx)(T.xu,{overflowX:"auto",children:(0,m.jsxs)(tt.i,{mt:8,size:"sm",variant:"unstyled",mb:"9",children:[(0,m.jsx)(rt.h,{sx:{tr:{borderBottomColor:"gray.900",borderBottomWidth:"1px"}},children:(0,m.jsx)(at.Tr,{})}),(0,m.jsx)(it.p,{sx:{tr:{borderBottomColor:"gray.900",borderBottomWidth:"1px"}},children:n?(0,m.jsxs)(at.Tr,{"data-testid":"available collateral row",alignItems:"center",children:[(0,m.jsx)(ct.Td,{children:(0,m.jsx)($.k,{flexDir:"row",py:4,children:(0,m.jsx)(pt.s,{isLoaded:!n,height:"28px",children:(0,m.jsx)(W.l6,{width:"32px",height:"32px",symbol:"SNX"})})})}),(0,m.jsx)(ct.Td,{textAlign:"end",children:(0,m.jsx)($.k,{height:"100%",justifyContent:"flex-end",children:(0,m.jsx)(oe.O,{isLoaded:!n,height:"28px",width:"200px",alignSelf:"end",children:(0,m.jsx)(F.z,{children:"Withdraw"})})})})]}):(0,Le.Yz)(i?.id,i?.preset)?(0,m.jsx)(Ut,{accountCollateralUnlockDate:a,accountCollaterals:e}):(0,m.jsx)(m.Fragment,{children:e?.map((e=>(0,m.jsx)(Qt,{accountCollateralUnlockDate:a,accountCollateral:e},e.tokenAddress)))})})]})})})]})}function _t(){const{accountId:e}=(0,xe.UO)(),{network:t}=(0,q.LN)(),{data:r,isLoading:a}=Pe({accountId:e,includeDelegationOff:!0}),{data:i,isLoading:o}=wt({accountId:e}),[l,s]=(0,n.useState)(St(i));(0,n.useEffect)((()=>{const e=setInterval((()=>s(St(i))),1e3);return()=>clearInterval(e)}),[i]);const c=a||o;return(0,m.jsx)(qt,{accountCollaterals:r||[],timeToUnlock:l,unlockDateString:kt?.toString()||"",unlockDate:i,isLoading:c,AvailableCollateralRow:Qt,network:t})}var Vt=r(95509);const Zt=(0,n.lazy)((()=>(0,Vt.safeImport)((()=>Promise.resolve().then(r.bind(r,4447))))));function Gt({accountCollateral:e,isDisabled:t}){const[r,a]=(0,n.useState)(!1);return(0,m.jsxs)(at.Tr,{"data-testid":"available collateral row",children:[(0,m.jsx)(ct.Td,{children:(0,m.jsxs)($.k,{flexDir:"row",py:4,children:[(0,m.jsx)(le.p,{in:!0,children:(0,m.jsx)(W.l6,{width:"32px",height:"32px",symbol:e.symbol})}),(0,m.jsx)($.k,{flexDirection:"column",justifyContent:"center",ml:2,children:(0,m.jsx)(le.p,{in:!0,children:(0,m.jsxs)(A.x,{fontSize:"lg",color:"gray.500","data-testid":"available-collateral",children:[(0,m.jsx)(st.$,{value:e.availableCollateral})," ",e.symbol]})})})]})}),(0,m.jsxs)(ct.Td,{textAlign:"end",children:[(0,m.jsx)(le.p,{in:!0,children:(0,m.jsx)(F.z,{"data-testid":"withdraw-button",isDisabled:t,onClick:()=>a(!0),children:"Withdraw"})}),(0,m.jsx)(n.Suspense,{fallback:null,children:r?(0,m.jsx)(Zt,{accountCollateral:e,onClose:()=>a(!1),isOpen:r}):null})]})]})}function Qt({accountCollateral:e,accountCollateralUnlockDate:t}){return(0,m.jsx)(Gt,{accountCollateral:e,isDisabled:!t||t.getTime()>Date.now()||e.availableCollateral.eq(0)})}function Yt(){const{network:e}=(0,q.LN)();return(0,y.useQuery)({queryKey:["apr",e?.id],queryFn:async()=>{try{const e=await fetch("https://api.synthetix.io/v3/base/sc-pool-apy");return{combinedApr:100*(await e.json()).aprCombined}}catch(e){return}},enabled:(0,Le.Yz)(e?.id,e?.preset),staleTime:6e4})}function Kt(){const{accountId:e}=(0,xe.UO)(),{data:t=[],isLoading:r}=(0,we.T)(),{data:a,isLoading:n}=(0,Ce.Oh)(),{data:i,isLoading:o}=Yt(),{data:l,isLoading:s}=Ge({accountId:e}),c=r||n||s||o,{totalCollateral:d,totalDebt:h}=Object.values(l||[]).reduce(((e,t)=>(e.totalCollateral=e.totalCollateral+t.collateralValue.toNumber(),e.totalDebt=e.totalDebt+t.debt.toNumber(),e)),{totalCollateral:0,totalDebt:0})||{};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(je.q,{children:[(0,m.jsx)("title",{children:"Synthetix V3"}),(0,m.jsx)("meta",{name:"description",content:"Synthetix V3"})]}),(0,m.jsxs)($.k,{height:"100%",flexDirection:"column",children:[(0,m.jsx)(Je,{totalDebt:h,totalCollateral:d,isLoading:c}),(0,m.jsx)(lt,{pools:a,isLoading:c,collateralTypes:t,liquidityPositionsById:l,apr:i?.combinedApr}),(0,m.jsx)(_t,{})]})]})}var Xt=r(74008),Jt=r(81554),er=r(45501),tr=r(13797);const rr=({issuanceRatioD18:e,collateralAmount:t,collateralPrice:r,debt:a,collateralChange:n,debtChange:i})=>{const o=e||(0,Se.wei)(1),l=(0,Se.wei)(a||0).add(i),s=(0,Se.wei)(t||0).add(n),c=s.mul(r||0),d=Ve(l,c),h=(0,Se.wei)(s).mul(r||0).div(o).sub(a||0),u=h.gte(0)?h:(0,Se.wei)(0);return{isValid:(d.gte(o)||d.lte(0))&&(l.lte(0)||s.gt(0)),hasChanges:!n.eq(0)||!i.eq(0),newCRatio:d,newDebt:l,newCollateralAmount:s,maxDebt:u}};var ar=r(85573);const nr=/^([0-9]*[.])?[0-9]{0,18}$/;function ir(e){const t=parseFloat(e.toString());return t===e.toNumber()?`${t}`:e.toString()}function or({value:e,onChange:t,min:r,max:a,InputProps:i}){const[o,l]=(0,n.useState)(e.gt(0)?e.toString():""),s=(0,n.useCallback)((r=>{if(l(r.target.value),!t)return;if(!nr.test(`${r.target.value}`))return;let a=e;try{a=(0,Se.wei)(r.target.value||0)}catch(e){}e.eq(a)||t(a)}),[t,e]),c=(0,n.useRef)(null);return(0,n.useEffect)((()=>{c.current&&(nr.test(`${o}`)?e&&e.eq(0)?c.current.setCustomValidity("Value required"):r&&r.gte(0)&&e&&e.lt(r)?c.current.setCustomValidity(`Value smaller than minimum of ${ir(r)}`):a&&a.gte(0)&&e&&e.gt(a)?c.current.setCustomValidity(`Value greater than maximum of ${ir(a)}`):c.current.setCustomValidity(""):c.current.setCustomValidity("Invalid number"))}),[o,r,a,e]),(0,n.useEffect)((()=>e.eq(0)?l(""):l(ir(e))),[e]),(0,m.jsx)(ar.I,{ref:c,flex:"1",type:"text",border:"none",borderWidth:"0px",textAlign:"end",p:0,outline:"none",fontFamily:"heading",fontSize:"xl",fontWeight:"black",lineHeight:"2xl",color:"white",height:"unset",autoFocus:!0,placeholder:"Enter Amount",_focus:{boxShadow:"none !important"},_placeholder:{color:"whiteAlpha.700"},value:o,onChange:s,...i})}var lr=r(63883);const sr=({debtChange:e,setDebtChange:t,maxDebt:r})=>{const{network:a}=(0,q.LN)(),n=(0,Le.Yz)(a?.id,a?.preset);return(0,m.jsxs)($.k,{flexDirection:"column",children:[(0,m.jsx)(A.x,{fontSize:"md",fontWeight:"700",mb:"0.5",children:n?"Claim USDC":"Borrow snxUSD"}),(0,m.jsx)(A.x,{fontSize:"sm",color:"gray.400",mb:"4",children:n?"Claim USDC fees you have earned from providing liquidity. These will be available in 24h for withdrawal.":"Take an interest-free loan of snxUSD against your collateral. This\n              increases your debt and decreases your C-Ratio."}),(0,m.jsxs)(Xe,{display:"flex",py:2,px:3,mb:"4",children:[(0,m.jsxs)(A.x,{display:"flex",gap:2,alignItems:"center",fontWeight:"600",mx:"2",children:[n?(0,m.jsx)(lr.o,{}):(0,m.jsx)(W.RF,{}),n?"USDC":"snxUSD"]}),(0,m.jsxs)($.k,{flexDirection:"column",justifyContent:"flex-end",flexGrow:1,children:[(0,m.jsx)(or,{InputProps:{isRequired:!0,"data-testid":"borrow amount input","data-max":r.toString()},value:e,onChange:e=>t(e),max:r}),(0,m.jsx)($.k,{flexDirection:"column",alignItems:"flex-end",fontSize:"xs",color:"whiteAlpha.700",children:(0,m.jsxs)($.k,{gap:"1",cursor:"pointer",onClick:()=>{r&&t(r)},children:[(0,m.jsx)(A.x,{children:"Max:"}),(0,m.jsx)(st.$,{value:r})," ",n?"USDC":"snxUSD"]})})]})]}),(0,m.jsx)(F.z,{"data-testid":"borrow submit",type:"submit",children:n?"Claim USDC":"Borrow snxUSD"})]})},cr=({liquidityPosition:e})=>{const t=(0,xe.UO)(),{debtChange:r,collateralChange:a,setDebtChange:i}=(0,n.useContext)(tr.n),{data:o}=(0,we.t)(t.collateralSymbol),{maxDebt:l}=rr({issuanceRatioD18:o?.issuanceRatioD18,collateralAmount:e?.collateralAmount,collateralPrice:e?.collateralPrice,debt:e?.debt,collateralChange:a,debtChange:r});return(0,m.jsx)(sr,{setDebtChange:i,debtChange:r,maxDebt:l})};var dr=r(55576),hr=r(85649),ur=r(51544);const xr=({liquidityPosition:e})=>{const{network:t}=(0,q.LN)(),r=(0,Le.Yz)(t?.id,t?.preset),a=(0,z.UO)(),[o]=(0,i.lr)(),l=(0,y.useQueryClient)(),s=e.debt.gt(.01)?e.debt:(0,Se.wei)(0),{data:c}=(0,dr.mM)(r?(0,Le.sm)(t?.id):e.tokenAddress),d=(0,n.useMemo)((()=>Number(c?.toString())>=s.toNumber()),[s,c]),{exec:h,settle:u,isLoading:x}=(0,ur.O)({accountId:o.get("accountId")||"",poolId:a.poolId,collateralTypeAddress:e?.tokenAddress,availableUSDCollateral:e.accountCollateral.availableCollateral,debt:s}),{approve:p,requireApproval:f,isLoading:g}=(0,hr.y)({contractAddress:(0,Le.sm)(t?.id),amount:(0,_.vz)(s.toString(),6).mul(110).div(100),spender:(0,Le.Do)(t?.id)}),b=(0,n.useCallback)((async()=>{try{f&&await p(!1),await h(),await Promise.all([l.invalidateQueries({queryKey:[`${t?.id}-${t?.preset}`,"TokenBalance"]}),l.invalidateQueries({queryKey:[`${t?.id}-${t?.preset}`,"Allowance"]}),l.invalidateQueries({queryKey:[`${t?.id}-${t?.preset}`,"LiquidityPosition"]}),l.invalidateQueries({queryKey:[`${t?.id}-${t?.preset}`,"AccountCollateralUnlockDate"]})]),u()}catch(e){}}),[p,h,t?.id,t?.preset,l,f,u]);return(0,m.jsxs)($.k,{flexDirection:"column",children:[(0,m.jsxs)(A.x,{fontSize:"md",fontWeight:"700",mb:"0.5",children:["Repay ",r?"USDC":"snxUSD"]}),(0,m.jsx)(A.x,{fontSize:"sm",color:"gray.400",mb:"4",children:"Your account currently has a positive debt. This amount must be paid to initiate collateral withdrawal."}),(0,m.jsxs)(F.z,{isDisabled:!d,isLoading:x||g,onClick:b,"data-testid":"repay",children:["Repay USDC $",(0,m.jsx)(st.$,{value:s,"data-testid":"current debt"}),d?"":"(Insufficient Balance)"]})]})},pr=({debtChange:e,setDebtChange:t,max:r,currentDebt:a,snxUSDBalance:n,availableUSDCollateral:i})=>{const o=n&&i?n.add(i):void 0,{network:l}=(0,q.LN)(),s=(0,Le.Yz)(l?.id,l?.preset);return(0,m.jsxs)($.k,{flexDirection:"column",children:[(0,m.jsxs)(A.x,{fontSize:"md",fontWeight:"700",mb:"0.5",children:["Repay ",s?"USDC":"snxUSD"]}),(0,m.jsxs)(A.x,{fontSize:"sm",color:"gray.400",mb:"4",children:["Pay down your positions debt with ",s?"USDC":"snxUSD",". This decreases your debt and increases your C-Ratio."]}),(0,m.jsxs)(Xe,{display:"flex",py:2,px:3,mb:"4",children:[(0,m.jsxs)(A.x,{display:"flex",gap:2,alignItems:"center",fontWeight:"600",mx:"2",children:[(0,m.jsx)(W.RF,{}),s?"USDC":"snxUSD"]}),(0,m.jsxs)($.k,{flexDirection:"column",justifyContent:"flex-end",flexGrow:1,children:[(0,m.jsx)(or,{InputProps:{isRequired:!0,"data-testid":"repay amount input","data-max":r?.toString()},value:e.abs(),onChange:e=>t(e.mul(-1)),max:r}),(0,m.jsxs)($.k,{flexDirection:"row",justifyContent:"right",fontSize:"xs",color:"whiteAlpha.700",children:[(0,m.jsxs)($.k,{gap:"1",mr:"3",cursor:"pointer",onClick:()=>{a&&t(a.neg())},children:[(0,m.jsx)(A.x,{children:"Debt:"}),(0,m.jsxs)(A.x,{display:"inline",children:["$",(0,m.jsx)(st.$,{value:a,"data-testid":"current debt"})]})]}),(0,m.jsx)($.k,{gap:"1",cursor:"pointer",onClick:()=>{o&&t(o.neg())},children:(0,m.jsx)(dt.u,{label:(0,m.jsxs)($.k,{direction:"column",alignItems:"flex-start",children:[(0,m.jsxs)($.k,{justifyContent:"space-between",width:"full",gap:1,children:["Wallet Balance: ",(0,m.jsx)(st.$,{value:n,suffix:" sUSD"})]}),(0,m.jsxs)($.k,{justifyContent:"space-between",width:"full",gap:1,children:["Collateral Balance: ",(0,m.jsx)(st.$,{value:i,suffix:" sUSD"})]})]}),children:(0,m.jsxs)($.k,{gap:1,children:[(0,m.jsx)(A.x,{children:"Balance:"}),(0,m.jsx)(A.x,{display:"inline",children:(0,m.jsx)(st.$,{value:o,"data-testid":"available snxUSD balance",suffix:" sUSD"})})]})})})]})]})]}),(0,m.jsxs)(F.z,{"data-testid":"repay submit",type:"submit",isDisabled:!(r&&n&&a&&i),children:["Repay ",s?"USDC":"snxUSD"]})]})},mr=({liquidityPosition:e})=>{const{debtChange:t,setDebtChange:r}=(0,n.useContext)(tr.n),{network:a}=(0,q.LN)(),{data:i}=(0,Re.a)(),o=e?.usdCollateral.availableCollateral,{data:l}=(0,dr.mM)(i?.address),s=e?.debt.gt(0),c=l?.gt(.01)?l:(0,Se.wei)(0);return e?.debt.gt(.01)&&(0,Le.Yz)(a?.id,a?.preset)?(0,m.jsx)(xr,{liquidityPosition:e}):(0,m.jsx)(pr,{setDebtChange:r,debtChange:t,snxUSDBalance:c,availableUSDCollateral:o,currentDebt:s?e?.debt:(0,Se.wei)(0),max:ke().max(e?.debt||(0,Se.wei)(0),o?.add(l||(0,Se.wei)(0))||(0,Se.wei)(0))})};var fr=r(87651);const gr=Ae.z.object({id:ve.Rx,weight:ve.LW,maxDebtShareValue:ve.LW,isLocked:Ae.z.boolean()}),yr=Ae.z.object({id:Ae.z.number(),markets:gr.array(),isAnyMarketLocked:Ae.z.boolean()}),br=Ae.z.boolean(),jr=({collateralChange:e,setCollateralChange:t,max:r,displaySymbol:a,symbol:i,currentCollateral:o,minDelegation:l,isLoadingRequiredData:s,isAnyMarketLocked:c})=>{const d=n.useCallback((()=>{r&&t(r.mul(-1))}),[r,t]),h=o?.add(e)||(0,Se.wei)(0),u=h.gt(l||(0,Se.wei)(0))||h.eq(0),x=!0===c;return(0,m.jsxs)($.k,{flexDirection:"column",children:[(0,m.jsxs)(A.x,{fontSize:"md",fontWeight:"700",mb:"0.5",children:["Remove ",a]}),(0,m.jsx)(A.x,{fontSize:"sm",color:"gray.400",mb:"4",children:"Removing collateral from this position will transfer it to the accounts Available Collateral balance for withdrawal. Collateral may only be removed if the resulting C-Ratio is above the Issuance C-Ratio."}),(0,m.jsxs)(Xe,{flexDirection:"column",py:2,px:3,mb:"4",children:[(0,m.jsxs)($.k,{flexDirection:"row",justifyContent:"space-between",width:"100%",children:[(0,m.jsxs)(A.x,{display:"flex",gap:2,alignItems:"center",fontWeight:"600",mx:"2",children:[(0,m.jsx)(W.l6,{symbol:i}),a]}),(0,m.jsxs)($.k,{flexDirection:"column",justifyContent:"flex-end",flexGrow:1,children:[(0,m.jsx)(or,{InputProps:{isDisabled:x,isRequired:!0,"data-testid":"undelegate amount input","data-max":r?.toString()},value:e.abs(),onChange:e=>t(e.mul(-1)),max:r}),(0,m.jsx)($.k,{flexDirection:"column",alignItems:"flex-end",fontSize:"xs",color:"whiteAlpha.700",children:(0,m.jsxs)($.k,{gap:"1",cursor:x?"not-allowed":"pointer",onClick:x?void 0:d,children:[(0,m.jsx)(A.x,{display:"flex",alignItems:"center",gap:1,children:"Max:"}),(0,m.jsx)(st.$,{value:r,"data-testid":"available to undelegate",suffix:` ${a}`})]})})]})]}),(0,m.jsx)(fr.U,{in:x,animateOpacity:!0,children:(0,m.jsxs)(ft.b,{mt:2,status:"warning",children:[(0,m.jsx)(gt.z,{}),(0,m.jsxs)($.k,{direction:"column",children:[(0,m.jsx)(yt.C,{children:"Credit capacity reached"}),(0,m.jsx)(bt.X,{children:"One of the markets has reached its credit capacity and is currently in a locked state. You cannot remove collateral from the pool at this time."})]})]})}),(0,m.jsx)(fr.U,{in:!u,animateOpacity:!0,children:(0,m.jsxs)(ft.b,{mt:2,status:"info",children:[(0,m.jsx)(gt.z,{}),(0,m.jsxs)($.k,{direction:"column",children:[(0,m.jsxs)(yt.C,{children:["The minimal delegated amount is"," ",(0,m.jsx)(st.$,{value:l,suffix:` ${i}`})]}),(0,m.jsx)(bt.X,{children:"You can close your position by removing all the collateral."})]})]})})]}),(0,m.jsxs)(F.z,{"data-testid":"undelegate submit",type:"submit",isDisabled:s||!0===c,children:["Remove ",a]})]})},wr=({liquidityPosition:e})=>{const{collateralChange:t,debtChange:r,setCollateralChange:a}=(0,n.useContext)(tr.n),i=(0,xe.UO)(),{data:o}=(0,we.t)(i.collateralSymbol),l=(e=>{const{network:t}=(0,q.LN)(),{data:r}=(0,he.a)(),{data:a}=(0,He.L)(),n=(0,q.M9)(),{data:i}=$e();return(0,y.useQuery)({enabled:Boolean(r&&e&&a),queryKey:[`${t?.id}-${t?.preset}`,"PoolConfiguration",{poolId:e}],queryFn:async()=>{if(!(r&&e&&a&&t&&n))throw Error("usePoolConfiguration should not be enabled");const o=(await r.getPoolConfiguration(Ft.O$.from(e))).map((({marketId:e,maxDebtShareValueD18:t,weightD18:r})=>({id:e,weight:t,maxDebtShareValue:r}))),l=await(0,Oe.$)(a,t.isTestnet).then((e=>(0,Oe.x)("0x",a,e))),s=await Promise.all(o.map((e=>r.populateTransaction.isMarketCapacityLocked(e.id)))),c=l.concat(s);i&&c.unshift(i);const d=await(0,Te.Iy)(t,n,c,(e=>{if(!Array.isArray(e))throw Error("Expected array");return e.map((e=>br.parse(r.interface.decodeFunctionResult("isMarketCapacityLocked",e)[0])))}),"isMarketCapacityLocked");return yr.parse({id:parseInt(e),markets:o.map(((e,t)=>({...e,isLocked:d[t]}))),isAnyMarketLocked:d.some(Boolean)})}})})(i.poolId),{network:s}=(0,q.LN)();if(!o)return null;const c=e?.collateralPrice,{newDebt:d}=rr({issuanceRatioD18:o.issuanceRatioD18,collateralAmount:e?.collateralAmount,collateralPrice:c,debt:e?.debt,collateralChange:t,debtChange:r});const h=function(){if(!e||!o)return;const{collateralAmount:t,collateralValue:r}=e;if((0,Le.Yz)(s?.id,s?.preset))return t;if(d.lte(0))return t;const a=d.mul(o.issuanceRatioD18);if(r<a)return(0,Se.wei)(0);const n=r.sub(a).mul(.98);return ke().min(t,n)}();return(0,m.jsx)(jr,{displaySymbol:o.displaySymbol,symbol:o.symbol,minDelegation:o.minDelegationD18,setCollateralChange:a,collateralChange:t,currentCollateral:e?.collateralAmount,currentDebt:e?.debt,max:h,isLoadingRequiredData:l.isLoading||!h,isAnyMarketLocked:l.data?.isAnyMarketLocked})};var Cr=r(82554);const vr=({onBadgePress:e,activeBadge:t,disabled:r})=>(0,m.jsxs)($.k,{w:"100%",justifyContent:"space-between",mt:2,mb:1,children:[(0,m.jsx)(Cr.C,{variant:"percent",sx:{bg:t>=.25?"cyan.500":"whiteAlpha.300",color:t>=.25?"black":"cyan.500",cursor:r?"not-allowed":"pointer"},mr:1,onClick:r?void 0:()=>e(.25),children:"25%"}),(0,m.jsx)(Cr.C,{variant:"percent",sx:{bg:t>=.5?"cyan.500":"whiteAlpha.300",color:t>=.5?"black":"cyan.500",cursor:r?"not-allowed":"pointer"},mx:1,onClick:r?void 0:()=>e(.5),children:"50%"}),(0,m.jsx)(Cr.C,{variant:"percent",sx:{bg:t>=.75?"cyan.500":"whiteAlpha.300",color:t>=.75?"black":"cyan.500",cursor:r?"not-allowed":"pointer"},mx:1,onClick:r?void 0:()=>e(.75),children:"75%"}),(0,m.jsx)(Cr.C,{variant:"percent",sx:{bg:1===t?"cyan.500":"whiteAlpha.300",color:1===t?"black":"cyan.500",cursor:r?"not-allowed":"pointer"},ml:1,onClick:r?void 0:()=>e(1),children:"100%"})]});var Sr=r(95042);function kr(){const{network:e}=(0,q.LN)(),{activeWallet:t}=(0,q.Os)(),r=(0,q.yL)(),{data:a}=(0,we.t)("SNX"),n=t?.address,i=a?.tokenAddress;return(0,y.useQuery)({enabled:Boolean(r&&n&&i),queryKey:[`${e?.id}-${e?.preset}`,"TransferableSynthetix",{address:t?.address}],queryFn:async function(){if(!(r&&n&&i))throw"useTransferableSynthetix should not be enabled";const t=new ce.CH(i,["function balanceOf(address owner) view returns (uint256)","function transferableSynthetix(address account) view returns (uint256 transferable)","function collateral(address account) view returns (uint256 collateral)"],r);try{if("cannon"===e?.name){const e=await t.balanceOf(n);return{transferable:(0,Se.wei)(e)}}const[r,a]=await Promise.all([t.transferableSynthetix(n),t.collateral(n)]);return{transferable:(0,Se.wei)(r),collateral:(0,Se.wei)(a)}}catch(e){throw console.error(e),e}}})}const Ar=({tokenBalance:e,...t})=>(0,m.jsxs)(ft.b,{borderLeftColor:"cyan.500",borderRadius:"6px",...t,children:[(0,m.jsx)(gt.z,{color:"cyan.500"}),(0,m.jsxs)(A.x,{color:"white",fontFamily:"heading",fontSize:"16px",lineHeight:"24px",children:["You have a ",e.toString(2)," SNX active staking position on V2. Youll need to unstake on V2 before being able to deposit on V3."," ",(0,m.jsx)(I.r,{textDecor:"underline",href:"https://staking.synthetix.io/",target:"_blank",children:"Go to V2"})]})]}),Tr=({accountCollateral:e,collateralChange:t,setCollateralChange:r,displaySymbol:a,symbol:i,tokenBalance:o,ethBalance:l,snxBalance:s})=>{const[c,d]=(0,n.useState)(0),h=(0,n.useMemo)((()=>"SNX"===i?s?.transferable:"WETH"!==i?o:o&&l?o.add(l):void 0),[i,o,l,s?.transferable]),u=(0,n.useMemo)((()=>h?.add(e.availableCollateral.toString())),[e.availableCollateral,h]);return(0,m.jsxs)($.k,{flexDirection:"column",children:[(0,m.jsxs)(A.x,{fontSize:"md",fontWeight:"700",mb:"0.5",children:["Add ",a]}),(0,m.jsx)(A.x,{fontSize:"sm",color:"gray.400",mb:"4",children:"Provide additional collateral to this position. This will increase the positions C-Ratio."}),(0,m.jsxs)(Xe,{display:"flex",flexDirection:"column",py:2,px:3,mb:"4",children:[(0,m.jsxs)($.k,{children:[(0,m.jsxs)(A.x,{display:"flex",gap:2,alignItems:"center",fontWeight:"600",mx:"2",children:[(0,m.jsx)(W.l6,{symbol:i}),a]}),(0,m.jsx)($.k,{flexDirection:"column",justifyContent:"flex-end",flexGrow:1,children:(0,m.jsxs)($.k,{flexDirection:"column",justifyContent:"flex-end",flexGrow:1,children:[(0,m.jsx)(or,{InputProps:{"data-testid":"deposit amount input","data-max":u?.toString()},value:t,onChange:e=>{d(0),r(e)},max:u}),(0,m.jsxs)($.k,{flexDirection:"column",alignItems:"flex-end",fontSize:"xs",color:"whiteAlpha.700",children:[e.availableCollateral.gt(0)?(0,m.jsxs)($.k,{gap:"1",cursor:"pointer",onClick:()=>r(e.availableCollateral),children:[(0,m.jsxs)(A.x,{children:["Available ",i," Collateral:"]}),(0,m.jsx)(st.$,{value:e?.availableCollateral})]}):null,(0,m.jsxs)($.k,{gap:"1",cursor:"pointer",onClick:()=>{const e="SNX"===i?s?.transferable:o;e&&r(e)},children:[(0,m.jsxs)(A.x,{children:[i," Balance:"]}),(0,m.jsx)(st.$,{value:"SNX"===i?s?.transferable:o})]}),"WETH"===i?(0,m.jsxs)($.k,{gap:"1",cursor:"pointer",onClick:()=>{l&&r(l)},children:[(0,m.jsx)(A.x,{children:"ETH Balance:"}),(0,m.jsx)(st.$,{value:l})]}):null]})]})})]}),(0,m.jsx)(vr,{disabled:!!u&&u.eq(0),onBadgePress:e=>{if(u){if(c===e)return r((0,Se.wei)(0)),void d(0);d(e),r(u.mul(e))}},activeBadge:c})]}),s?.collateral&&s?.collateral.gt(0)&&"SNX"===i&&(0,m.jsx)(Ar,{tokenBalance:s.collateral}),(0,m.jsxs)(F.z,{disabled:void 0===h,"data-testid":"deposit submit",type:"submit",children:["Add ",a]})]})},Dr=({liquidityPosition:e})=>{const{collateralChange:t,setCollateralChange:r}=(0,n.useContext)(tr.n),{network:a}=(0,q.LN)(),i=(0,xe.UO)(),{data:o}=(0,we.t)(i.collateralSymbol),{data:l}=kr(),{data:s}=(0,dr.mM)((0,Le.Yz)(a?.id,a?.preset)?(0,Le.sm)(a?.id):o?.tokenAddress),{data:c}=(0,Sr.G)();return o&&e?.accountCollateral?(0,m.jsx)(Tr,{accountCollateral:e.accountCollateral,displaySymbol:o.displaySymbol,tokenBalance:s,snxBalance:l,ethBalance:c,symbol:o.symbol,setCollateralChange:r,collateralChange:t}):null},Ir=(0,n.lazy)((()=>(0,Vt.safeImport)((()=>r.e(2899).then(r.bind(r,2899)))))),Fr=(0,n.lazy)((()=>(0,Vt.safeImport)((()=>r.e(3967).then(r.bind(r,3967)))))),Lr=(0,n.lazy)((()=>(0,Vt.safeImport)((()=>Promise.resolve().then(r.bind(r,1249)))))),zr=(0,n.lazy)((()=>(0,Vt.safeImport)((()=>r.e(247).then(r.bind(r,50247)))))),Mr=Ae.z.enum(["borrow","deposit","repay","undelegate"]),$r=({children:e,action:t,activeAction:r,onClick:a,disabled:n})=>(0,m.jsx)(Xe,{as:F.z,fontWeight:"700",fontSize:"md",color:"gray.50",bg:"navy.900",_hover:{bg:"unset"},_active:{bg:"unset"},cursor:n?"not-allowed":"pointer","data-testid":"manage action","data-action":t,"data-active":t===r?"true":void 0,onClick:()=>!n&&a?.(t),py:2,width:"50%",textAlign:"center",opacity:n?"50%":"100%",children:e}),Er=({manageAction:e,liquidityPosition:t})=>{switch(e){case"borrow":return(0,m.jsx)(cr,{liquidityPosition:t});case"deposit":return(0,m.jsx)(Dr,{liquidityPosition:t});case"repay":return(0,m.jsx)(mr,{liquidityPosition:t});case"undelegate":return(0,m.jsx)(wr,{liquidityPosition:t});default:return null}},Nr=({setActiveAction:e,manageAction:t,onSubmit:r,liquidityPosition:a,network:n})=>{const i=Number(a?.debt?.toString()),o=(0,Le.Yz)(n?.id,n?.preset);return(0,m.jsxs)(T.xu,{as:"form",onSubmit:r,children:[(0,m.jsxs)($.k,{mt:2,gap:2,children:[(0,m.jsxs)($r,{onClick:e,action:"deposit",activeAction:t,children:[(0,m.jsx)(Jt.v,{w:"15px",h:"15px",mr:1})," Add Collateral"]}),(0,m.jsxs)($r,{disabled:i<0,onClick:e,action:"repay",activeAction:t,children:[(0,m.jsx)(W.RF,{mr:1})," Repay ",o?"":"snxUSD"]})]}),(0,m.jsxs)($.k,{mt:2,gap:2,children:[(0,m.jsxs)($r,{onClick:e,action:"undelegate",activeAction:t,children:[(0,m.jsx)(er.H,{w:"15px",h:"15px",mr:1})," Remove Collateral"]}),(0,m.jsxs)($r,{disabled:i>0,onClick:e,action:"borrow",activeAction:t,children:[(0,m.jsx)(W.TK,{mr:1})," ",o?"Claim":"Borrow snxUSD"]})]}),t?(0,m.jsx)($.k,{direction:"column",mt:6,children:(0,m.jsx)(Er,{manageAction:t,liquidityPosition:a})}):null]})},Br=({liquidityPosition:e})=>{const t=(0,xe.UO)(),{network:r}=(0,q.LN)(),a=(0,z.s0)(),i=(0,z.TH)(),[o,l]=(0,n.useState)(null),{debtChange:s,collateralChange:c,setCollateralChange:d,setDebtChange:h}=(0,n.useContext)(tr.n),{data:u}=(0,we.t)(t.collateralSymbol),x=(0,Le.Yz)(r?.id,r?.preset),{isValid:p}=rr({issuanceRatioD18:u?.issuanceRatioD18,collateralAmount:e?.collateralAmount,collateralPrice:e?.collateralPrice,debt:e?.debt,collateralChange:c,debtChange:s}),f=Mr.safeParse(t.manageAction),g=f.success?f.data:null,y=!!x||p,b=(0,n.useCallback)((e=>{e.preventDefault();e.target.reportValidity()&&y&&l(g)}),[y,g]);return(0,n.useEffect)((()=>{const t=new URLSearchParams(i.search);if(t.get("manageAction"))return;if(!e)return;if(!u)return;const n=Ve(e.debt,e.collateralValue);if(e.debt.eq(0)||n.gt(u.issuanceRatioD18))return t.set("manageAction","borrow"),void a({pathname:i.pathname,search:t.toString()},{replace:!0});if(n.mul(.9).lt(u.liquidationRatioD18))return t.set("manageAction",(0,Le.Yz)(r?.id,r?.preset)?"deposit":"repay"),void a({pathname:i.pathname,search:t.toString()},{replace:!0});t.set("manageAction","deposit"),a({pathname:i.pathname,search:t.toString()},{replace:!0})}),[u,e,i.pathname,i.search,a,r?.id,r?.preset]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Nr,{liquidityPosition:e,onSubmit:b,network:r,setActiveAction:e=>{d((0,Se.wei)(0)),h((0,Se.wei)(0));const t=new URLSearchParams(i.search);t.set("manageAction",e),a({pathname:i.pathname,search:t.toString()},{replace:!0})},manageAction:g||void 0}),(0,m.jsxs)(n.Suspense,{fallback:null,children:["repay"===o?(0,m.jsx)(Ir,{availableCollateral:e?.usdCollateral.availableCollateral,onClose:()=>{d((0,Se.wei)(0)),h((0,Se.wei)(0)),l(null)},isOpen:"repay"===o}):null,"borrow"===o?(0,m.jsx)(Fr,{onClose:()=>{d((0,Se.wei)(0)),h((0,Se.wei)(0)),l(null)},isOpen:"borrow"===o}):null,"deposit"===o?(0,m.jsx)(Lr,{availableCollateral:e?.accountCollateral.availableCollateral,currentCollateral:e?.collateralAmount??(0,Se.wei)(0),collateralChange:c,onClose:()=>{d((0,Se.wei)(0)),h((0,Se.wei)(0)),l(null)},isOpen:"deposit"===o}):null,"undelegate"===o?(0,m.jsx)(zr,{liquidityPosition:e,onClose:()=>{d((0,Se.wei)(0)),h((0,Se.wei)(0)),l(null)},isOpen:"undelegate"===o}):null]})]})};var Pr=r(7754),Hr=r(84471),Or=r(90711);const Rr=({formatFn:e,value:t,newValue:r,hasChanges:a})=>(0,m.jsxs)($.k,{gap:4,color:"gray.50",fontSize:"2xl",fontWeight:"800",alignItems:"center",lineHeight:"32px",children:[(0,m.jsx)(A.x,{children:e(t)}),a&&!t.eq(r)?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Pr.m,{}),(0,m.jsx)(A.x,{children:e(r)})]}):null]}),Ur=({liquidityPosition:e,collateralType:t,collateralValue:r,cRatio:a,newCollateralAmount:n,newCratio:i,newDebt:o,hasChanges:l,aprData:s})=>{const{network:c}=(0,q.LN)();return(0,m.jsxs)($.k,{direction:"column",children:[(0,Le.Yz)(c?.id,c?.preset)&&(0,m.jsx)(Xe,{py:4,px:6,flexDirection:"row",bg:"navy.700",justifyContent:"space-between",mb:4,children:(0,m.jsxs)($.k,{flexDirection:"column",justifyContent:"space-between",width:"100%",children:[(0,m.jsxs)($.k,{alignItems:"center",mb:"4px",children:[(0,m.jsx)(A.x,{color:"gray.500",fontSize:"xs",fontFamily:"heading",lineHeight:"16px",children:"APR"}),(0,m.jsx)(dt.u,{label:"APR is a combination of past week pool performance and rewards.",textAlign:"start",py:2,px:3,children:(0,m.jsx)($.k,{height:"12px",width:"12px",ml:"4px",alignItems:"center",justifyContent:"center",children:(0,m.jsx)(Hr.s,{color:"white",height:"9px",width:"9px"})})})]}),(0,m.jsx)($.k,{width:"100%",children:s?(0,m.jsx)($.k,{gap:1,color:"gray.50",fontSize:"2xl",fontWeight:"800",alignItems:"center",lineHeight:"32px",children:(0,m.jsxs)(A.x,{children:[s.toFixed(2),"%"]})}):(0,m.jsx)(oe.O,{width:"100%",children:"Lorem ipsum (this wont be displaye debt) "})})]})}),(0,m.jsxs)(Xe,{py:4,px:6,flexDirection:"column",bg:"navy.700",mb:4,children:[(0,m.jsxs)($.k,{alignItems:"center",mb:"4px",children:[(0,m.jsx)(A.x,{color:"gray.500",fontSize:"xs",fontFamily:"heading",lineHeight:"16px",children:"COLLATERAL"}),(0,m.jsx)(dt.u,{label:"Your total amount of collateral locked in this pool.",textAlign:"start",py:2,px:3,children:(0,m.jsx)($.k,{height:"12px",width:"12px",ml:"4px",alignItems:"center",justifyContent:"center",children:(0,m.jsx)(Hr.s,{color:"white",height:"9px",width:"9px"})})})]}),e&&t?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)($.k,{justifyContent:"space-between",alignItems:"center","data-testid":"manage stats collateral",children:[(0,m.jsx)(Rr,{value:e.collateralAmount,newValue:n,formatFn:e=>`${(0,_.Aq)(e)} ${t.displaySymbol}`,hasChanges:l}),(0,m.jsx)(A.x,{fontWeight:"400",color:"gray.500",fontSize:"md",fontFamily:"heading",lineHeight:"24px",children:(0,_.Aq)(e.collateralValue,{currency:"USD",style:"currency"})})]}),(0,m.jsxs)(A.x,{fontWeight:"400",color:"gray.500",fontSize:"xs",children:["Current Value:"," ",(0,_.Aq)(r,{currency:"USD",style:"currency"})]})]}):(0,m.jsx)(oe.O,{width:"100%",children:"Lorem ipsum (this wont be displayed) "})]}),(0,m.jsx)(Xe,{py:4,px:6,flexDirection:"row",bg:"navy.700",justifyContent:"space-between",mb:4,children:(0,m.jsxs)($.k,{flexDirection:"column",justifyContent:"space-between",width:"100%",children:[(0,m.jsxs)($.k,{alignItems:"center",mb:"4px",children:[(0,m.jsx)(A.x,{color:"gray.500",fontSize:"xs",fontFamily:"heading",lineHeight:"16px",children:"DEBT"}),(0,m.jsx)(dt.u,{label:"Your minted debt balance.",textAlign:"start",py:2,px:3,children:(0,m.jsx)($.k,{height:"12px",width:"12px",ml:"4px",alignItems:"center",justifyContent:"center",children:(0,m.jsx)(Hr.s,{color:"white",height:"9px",width:"9px"})})})]}),(0,m.jsx)($.k,{width:"100%","data-testid":"manage stats debt",children:e&&t?(0,m.jsx)(Rr,{value:e.debt,newValue:o,formatFn:e=>(0,_.Aq)(e,{currency:"USD",style:"currency",maximumFractionDigits:8}),hasChanges:l}):(0,m.jsx)(oe.O,{width:"100%",children:"Lorem ipsum (this wont be displaye debt) "})})]})}),!(0,Le.Yz)(c?.id,c?.preset)&&(0,m.jsxs)(Xe,{py:4,px:6,flexDirection:"column",bg:"navy.700",my:0,mb:4,children:[(0,m.jsx)(A.x,{color:"gray.500",fontSize:"xs",fontFamily:"heading",lineHeight:"16px",mb:"4px",children:"C-RATIO"}),(0,m.jsx)($.k,{justifyContent:"space-between",alignItems:"center","data-testid":"manage stats collateral",children:e&&t?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Rr,{value:a.lt(.01)||a.gt(5e4)?(0,Se.wei)(0):a,newValue:i,formatFn:e=>(0,_.Aq)(e,{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}),hasChanges:l}),(0,m.jsx)(A.x,{fontWeight:"400",color:"gray.500",fontSize:"md",fontFamily:"heading",lineHeight:"24px",children:t.issuanceRatioD18.eq(Or.Bz)?"N/A":`Minimum ${(0,_.Aq)(t.issuanceRatioD18,{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2})}`})]}):(0,m.jsx)(oe.O,{width:"100%",children:"Lorem ipsum (this wont be displayed) "})})]})]})},Wr=({liquidityPosition:e})=>{const t=(0,xe.UO)(),{debtChange:r,collateralChange:a}=(0,n.useContext)(tr.n),{data:i}=(0,we.t)(t.collateralSymbol),{data:o}=Yt(),l=e?.collateralValue||(0,Se.wei)(0),s=Ve(e?.debt||(0,Se.wei)(0),l),{newCRatio:c,newCollateralAmount:d,newDebt:h,hasChanges:u}=rr({issuanceRatioD18:i?.issuanceRatioD18,collateralAmount:e?.collateralAmount,collateralPrice:e?.collateralPrice,debt:e?.debt,collateralChange:a,debtChange:r});return(0,m.jsx)(Ur,{hasChanges:u,newCratio:c,newDebt:h,newCollateralAmount:d,liquidityPosition:e,collateralType:i,cRatio:s,collateralValue:l,aprData:o?.combinedApr})};var qr=r(75429);const _r=()=>{const e=(0,z.TH)();return(0,m.jsxs)(I.r,{width:"fit-content",display:"flex",alignItems:"center",color:"cyan.500",as:i.rU,to:{pathname:"/",search:e.search},fontSize:"sm",fontWeight:700,mb:2,children:[(0,m.jsx)(qr.R,{mr:1})," Home"]})};var Vr=r(64565);var Zr=r(21832),Gr=r(5438),Qr=r(93611);function Yr({chain:e,address:t,isTx:r=!1}){switch(e){case"sepolia":return`https://sepolia.etherscan.io/${r?"tx":"address"}/${t}`;case"optimism":return`https://optimistic.etherscan.io/${r?"tx":"address"}/${t}`;case"base":return`https://basescan.org/${r?"tx":"address"}/${t}`;case"base-sepolia":return`https://sepolia.basescan.org/${r?"tx":"address"}/${t}`;default:return`https://etherscan.io/${r?"tx":"address"}/${t}`}}const Kr=({collateralSymbol:e,amount:t,txnStatus:r,txnHash:a})=>{const[i,o]=(0,n.useState)(!1),{network:l}=(0,q.LN)();return(0,n.useEffect)((()=>{"prompting"===r&&o(!0),"error"===r&&o(!1),"success"===r&&setTimeout((()=>{o(!1)}),1200)}),[r]),(0,m.jsxs)(w.u_,{isOpen:i,onClose:()=>o(!1),children:[(0,m.jsx)(C.Z,{bg:"#06061B80"}),(0,m.jsx)(v.h,{bg:"navy.700",mt:"10%",borderWidth:"1px",borderColor:"gray.900",minWidth:"384px",children:(0,m.jsxs)(k.f,{p:4,children:[(0,m.jsx)($.k,{onClick:()=>o(!1),justifyContent:"flex-end",border:"none",boxShadow:"none",_focus:{outline:"none"},children:(0,m.jsx)(Zr.T,{_hover:{cursor:"pointer"}})}),(0,m.jsx)(S.x,{pl:0,py:1,color:"whiteAlpha.900",fontSize:"20px",fontWeight:700,lineHeight:"120%",textAlign:"left",children:"Transaction Pending"}),(0,m.jsx)(A.x,{p:3,pl:0,color:"gray.600",fontFamily:"heading",fontSize:"12px",lineHeight:"150%",mb:2,children:"Follow the Metamask prompts to execute the following transactions."}),(0,m.jsxs)($.k,{px:3,py:3,borderRadius:"5px",border:"1px solid",borderColor:"success"===r?"green.500":"gray.900",children:[(0,m.jsx)($.k,{justifyContent:"center",alignItems:"center",borderRadius:"100px",bg:"success"===r?"green.600":"gray.900",width:"40px",height:"40px",p:3,children:"success"===r?(0,m.jsx)(Gr.n,{color:"white"}):(0,m.jsx)(Qr.D,{size:"25px",isIndeterminate:!0,color:"gray.700"})}),(0,m.jsxs)($.k,{flexDirection:"column",alignItems:"space-between",justifyContent:"space-between",ml:2,children:[(0,m.jsxs)(A.x,{fontSize:"14px",fontWeight:700,lineHeight:"20px",color:"white",children:["Claiming ",t||""," ",e||""]}),(0,m.jsx)(A.x,{fontSize:"12px",lineHeight:"16px",color:"gray.500",children:"Claim your rewards"})]})]}),"success"===r&&(0,m.jsx)(F.z,{mt:5,variant:"solid",justifyContent:"center",px:3,py:3,width:"100%",textAlign:"center",children:"Done"}),a&&(0,m.jsx)($.k,{justifyContent:"center",px:3,py:3,mt:6,mb:1,borderTop:"1px solid",borderTopColor:"gray.900",children:(0,m.jsx)(I.r,{variant:"outline",href:Yr({chain:l?.name||"",address:a,isTx:!0}),fontFamily:"heading",color:"cyan.500",fontWeight:700,lineHeight:"20px",fontSize:"14px",target:"_blank",mt:3,children:"View Transaction"})})]})})]})},Xr=(e,t=5,r=5)=>e.length<=t+r?e:`${e.slice(0,t)}...${e.slice(-r)}`,Jr=({symbol:e,frequency:t,claimableAmount:r,lifetimeClaimed:a,hasClaimed:i,address:o,readOnly:l,total:s})=>{const{accountId:c,collateralSymbol:d,poolId:h}=(0,xe.UO)(),{data:u}=(0,we.t)(d),{network:x}=(0,q.LN)(),{exec:p,txnState:f}=function(e,t,r,a,i){const{network:o}=(0,q.LN)(),{data:l}=(0,he.a)(),[s,c]=(0,n.useReducer)(It.I,It.E),d=(0,y.useQueryClient)(),h=(0,y.useMutation)({mutationFn:async function(){try{if(!i)return;if(!(e&&t&&r&&a&&o))throw new Error("Parameters Undefined");if(!l)throw new Error("CoreProxy undefined");c({type:"prompting"});const n=await l.claimRewards(Ft.O$.from(r),Ft.O$.from(e),t,a);let s;return c({type:"pending",payload:{txnHash:n.hash}}),(await n.wait()).logs.forEach((e=>{if(e.topics[0]===l.interface.getEventTopic("RewardsClaimed")){const{amount:t}=l.interface.decodeEventLog("RewardsClaimed",e.data,e.topics);s=t}})),c({type:"success"}),d.invalidateQueries({queryKey:[`${o?.id}-${o?.preset}`,"Rewards"]}),s}catch(e){return c({type:"error",payload:{error:e}}),0}}});return{mutation:h,txnState:s,settle:()=>c({type:"settled"}),isLoading:h.isPending,exec:h.mutateAsync}}(h||"",u?.tokenAddress||"",c,o,r),{txnStatus:g,txnHash:b}=f,j=function(e){const t=3600,r=604800,a=2592e3;if(0===e)return null;if(e%a==0){const t=e/a;return 1===t?"every month":`every ${t} months`}if(e%r==0){const t=e/r;return 1===t?"every week":`every ${t} weeks`}if(e%86400==0){const t=e/86400;return 1===t?"every day":`every ${t} days`}if(e%t==0){const r=e/t;return 1===r?"every hour":`every ${r.toFixed(1)} hours`}return`every ${(e/t).toFixed(1)} hours`}(t),w=Yr({chain:x?.name||"mainnet",address:o});return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Kr,{amount:r,collateralSymbol:e,txnStatus:g,txnHash:b}),(0,m.jsxs)(at.Tr,{children:[(0,m.jsxs)(ct.Td,{display:"flex",alignItems:"center",px:"14px",border:"none",w:"100%",children:[(0,m.jsx)(le.p,{in:!0,children:(0,m.jsx)(W.l6,{height:"30px",width:"30px",symbol:e})}),(0,m.jsx)(le.p,{in:!0,children:(0,m.jsxs)($.k,{flexDirection:"column",ml:"12px",children:[(0,m.jsx)(I.r,{href:w,target:"_blank",children:(0,m.jsx)(dt.u,{label:`Distributed by ${Xr(o)}`,children:(0,m.jsx)(A.x,{color:"gray.50",fontSize:"14px",fontFamily:"heading",fontWeight:500,lineHeight:"20px",children:(0,m.jsx)(st.$,{showTooltip:!1,value:(0,Se.wei)(s),suffix:` ${e}`})})})}),j&&s>0&&(0,m.jsx)(A.x,{color:"gray.500",fontSize:"12px",fontFamily:"heading",lineHeight:"16px",children:j})]})})]}),(0,m.jsx)(ct.Td,{alignItems:"center",px:"14px",border:"none",children:(0,m.jsxs)(le.p,{in:!0,children:[(0,m.jsxs)(A.x,{color:"gray.50",fontSize:"14px",fontFamily:"heading",fontWeight:500,lineHeight:"20px",children:[(0,m.jsx)(st.$,{value:(0,Se.wei)(r)}),` ${e}`]}),a>0&&(0,m.jsxs)(A.x,{color:"gray.500",fontSize:"12px",fontFamily:"heading",lineHeight:"16px",children:[(0,m.jsx)(dt.u,{label:"Total claimed over lifetime",children:"Lifetime: "}),(0,m.jsx)(st.$,{value:(0,Se.wei)(a)}),e]})]})}),!l&&(0,m.jsx)(ct.Td,{border:"none",px:"0px",children:(0,m.jsx)(le.p,{in:!0,children:(0,m.jsx)(F.z,{w:"100%",size:"sm",variant:"solid",isDisabled:0===r,_disabled:{bg:"gray.900",backgroundImage:"none",color:"gray.500",opacity:.5,cursor:"not-allowed"},onClick:()=>{p()},children:r>0||!i?"Claim":"Claimed"})})})]})]})},ea=()=>(0,m.jsxs)(it.p,{width:"100%",children:[(0,m.jsxs)(at.Tr,{borderBottom:"1px solid #2D2D38",children:[(0,m.jsx)(ct.Td,{pl:"16px",border:"none",children:(0,m.jsx)(pt.s,{startColor:"whiteAlpha.500",endColor:"whiteAlpha.200",h:"30px",w:"30px"})}),(0,m.jsx)(ct.Td,{pl:"16px",border:"none",children:(0,m.jsx)(oe.O,{startColor:"whiteAlpha.500",endColor:"whiteAlpha.200",height:"30px",children:(0,m.jsx)(A.x,{mr:4,children:"Loading"})})}),(0,m.jsx)(ct.Td,{textAlign:"end",pr:"0px",border:"none",children:(0,m.jsx)(oe.O,{startColor:"whiteAlpha.500",endColor:"whiteAlpha.200",height:"30px",children:(0,m.jsx)(A.x,{children:"Loading"})})})]}),(0,m.jsxs)(at.Tr,{borderBottom:"1px solid #2D2D38",children:[(0,m.jsx)(ct.Td,{pl:"16px",border:"none",children:(0,m.jsx)(pt.s,{startColor:"whiteAlpha.200",endColor:"whiteAlpha.500",h:"30px",w:"30px"})}),(0,m.jsx)(ct.Td,{pl:"16px",border:"none",children:(0,m.jsx)(oe.O,{startColor:"whiteAlpha.200",endColor:"whiteAlpha.500",height:"30px",children:(0,m.jsx)(A.x,{mr:4,children:"Loading"})})}),(0,m.jsx)(ct.Td,{textAlign:"end",pr:"0px",border:"none",children:(0,m.jsx)(oe.O,{startColor:"whiteAlpha.200",endColor:"whiteAlpha.500",height:"30px",children:(0,m.jsx)(A.x,{children:"Loading"})})})]}),(0,m.jsxs)(at.Tr,{borderBottom:"1px solid #2D2D38",children:[(0,m.jsx)(ct.Td,{pl:"16px",border:"none",children:(0,m.jsx)(pt.s,{startColor:"whiteAlpha.500",endColor:"whiteAlpha.200",h:"30px",w:"30px"})}),(0,m.jsx)(ct.Td,{pl:"16px",border:"none",children:(0,m.jsx)(oe.O,{startColor:"whiteAlpha.500",endColor:"whiteAlpha.200",height:"30px",children:(0,m.jsx)(A.x,{mr:4,children:"Loading"})})}),(0,m.jsx)(ct.Td,{textAlign:"end",pr:"0px",border:"none",children:(0,m.jsx)(oe.O,{startColor:"whiteAlpha.500",endColor:"whiteAlpha.200",height:"30px",children:(0,m.jsx)(A.x,{children:"Loading"})})})]})]}),ta=({rewards:e,isLoading:t,readOnly:r=!1,...a})=>{const n=e&&0===e.length;return(0,m.jsxs)(Xe,{bg:"navy.700",py:4,px:4,flexDir:"column",...a,children:[(0,m.jsx)(A.x,{color:"gray.500",fontFamily:"heading",lineHeight:"4",fontSize:"xs",mb:"8px",children:"REWARDS"}),(0,m.jsx)(Vr.x,{width:"100%",mb:"8px",children:n?(0,m.jsx)(le.p,{in:!0,children:(0,m.jsx)($.k,{mt:"20px",mb:"8px",justifyContent:"center",children:(0,m.jsx)(A.x,{color:"gray.500",fontFamily:"heading",lineHeight:"4",fontSize:"xs",children:"No Rewards Available"})})}):(0,m.jsxs)(tt.i,{children:[(0,m.jsx)(rt.h,{children:(0,m.jsxs)(at.Tr,{borderBottom:"1px solid #2D2D38",children:[(0,m.jsxs)(nt.Th,{textTransform:"unset",color:"gray.600",border:"none",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",letterSpacing:.6,fontWeight:700,px:4,py:3,children:["Active Rewards",(0,m.jsx)(dt.u,{label:"Total rewards active for the Pool",children:(0,m.jsx)(Hr.s,{ml:1,mb:"1px"})})]}),(0,m.jsx)(nt.Th,{textTransform:"unset",color:"gray.600",border:"none",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",letterSpacing:.6,fontWeight:700,px:4,py:3,children:"Earnings"}),(0,m.jsx)(nt.Th,{textTransform:"unset",color:"transparent",border:"none",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",letterSpacing:.6,fontWeight:700,px:4,py:3,children:"Claim"})]})}),t?(0,m.jsx)(ea,{}):(0,m.jsx)(it.p,{children:e?.map((e=>(0,m.jsx)(Jr,{symbol:e.symbol,claimableAmount:e.claimableAmount.toNumber(),frequency:e.duration,projectedAmount:e.rate/e.duration||0,lifetimeClaimed:e.lifetimeClaimed,hasClaimed:e.lifetimeClaimed>0,address:e.distributorAddress,readOnly:r,total:e.total},e.address)))})]})})]})},ra=Ae.z.string().transform((e=>(0,Se.wei)(e,18,!0))),aa=Ae.z.string().transform((e=>(0,Se.wei)(e,18,!0))),na=(e,t)=>t.add(e).mul(-1),ia=Ae.z.object({id:Ae.z.string(),usd_deposited:aa,usd_withdrawn:aa,net_issuance:aa,reported_debt:aa,updated_at:Ae.z.string(),updates_in_period:Ae.z.string()}).transform((e=>({...e,pnl:na(e.net_issuance,e.reported_debt)}))),oa=Ae.z.object({id:Ae.z.string(),address:Ae.z.string(),usd_deposited:aa,usd_withdrawn:aa,net_issuance:aa,reported_debt:aa,updated_at:Ae.z.string(),market_snapshots_by_week:Ae.z.array(ia)}).transform((e=>({...e,pnl:na(e.net_issuance,e.reported_debt)}))),la=Ae.z.object({id:Ae.z.string(),market:oa,weight:ra,max_debt_share_value:aa}),sa=Ae.z.object({id:Ae.z.string(),total_distributed:Ae.z.string(),rewards_distributions:Ae.z.array(Ae.z.object({amount:Ae.z.string(),duration:Ae.z.string(),created_at:Ae.z.string()})).default([])}),ca=Ae.z.object({id:Ae.z.string(),name:Ae.z.union([Ae.z.string(),Ae.z.null()]).transform((e=>e||"Unnamed Pool")),total_weight:Ae.z.union([Ae.z.null(),ra]),configurations:Ae.z.array(la),registered_distributors:Ae.z.array(sa).default([])}),da=Ae.z.object({data:Ae.z.object({pool:Ae.z.union([ca,Ae.z.null()])})}),ha=(e=>e[0])`
  query pool($id: String) {
    pool(id: $id) {
      id
      name
      registered_distributors(where: { isActive: true }) {
        id
        total_distributed
        rewards_distributions(orderBy: created_at, orderDirection: desc) {
          amount
          duration
          created_at
        }
      }
      total_weight
      configurations {
        id
        weight
        max_debt_share_value
        market {
          id
          address
          usd_deposited
          usd_withdrawn
          net_issuance
          reported_debt
          updated_at
          market_snapshots_by_week(first: 2, orderBy: updated_at, orderDirection: desc) {
            id
            usd_deposited
            usd_withdrawn
            net_issuance
            reported_debt
            updated_at
            updates_in_period
          }
        }
      }
    }
  }
`,ua=e=>{const{network:t}=(0,q.LN)();return(0,y.useQuery)({queryKey:[`${t?.id}-${t?.preset}`,"PoolData",{pool:e}],queryFn:async()=>{if(!e||!t)throw Error("No poolId or network");const r=await(async(e,t)=>{const r=(0,g.Q4)(e),a=await fetch(r,{method:"POST",body:JSON.stringify({query:ha,variables:{id:t}})}),n=await a.json();if(n.errors){const{message:e}=n.errors[0];throw new Error(e)}return da.parse(n)})(t?.name,e);if(!r.data.pool)throw Error(`Pool ${e} not found`);return r.data.pool},enabled:Boolean(e&&parseInt(e)>0)})};var xa=r(5717);const pa=Ae.z.array(Ae.z.object({address:Ae.z.string(),name:Ae.z.string(),symbol:Ae.z.string(),claimableAmount:Ae.z.instanceof(Se.Wei),distributorAddress:Ae.z.string(),rate:Ae.z.number(),duration:Ae.z.number(),lifetimeClaimed:Ae.z.number(),total:Ae.z.number(),decimals:Ae.z.number()})),ma=["function name() view returns (string)","function symbol() view returns (string)","function balanceOf(address) view returns (uint256)","function deposit() payable","function decimals() view returns (uint8)"];function fa(e,t,a,n="69"){const{network:i}=(0,q.LN)(),{data:o}=(0,xa.b)(),{data:l}=(0,he.a)();return(0,y.useQuery)({enabled:Boolean(o&&l&&e&&t&&a&&n),queryKey:[`${i?.id}-${i?.preset}`,"Rewards",{accountId:n},{collateralAddress:a},{distributors:e}],queryFn:async()=>{if(!(o&&l&&t&&a&&n&&e&&i))throw"useRewards is missing required data";if(0===e.length)return[];try{const{abi:s}=await async function(e,t="main"){switch(`${e}-${t}`){case"1-main":return r.e(2739).then(r.bind(r,22739));case"10-main":return r.e(3761).then(r.bind(r,83761));case"11155111-main":return r.e(9216).then(r.bind(r,69216));case"13370-main":return r.e(409).then(r.bind(r,40409));case"8453-andromeda":return r.e(8236).then(r.bind(r,58236));case"84532-andromeda":return r.e(3291).then(r.bind(r,23291));default:throw new Error(`Unsupported chain ${e} for RewardDistributor`)}}(i?.id,i?.preset),c=new Ie.vU(s),d=new Ie.vU(ma),[{returnData:h},...u]=await Promise.all([await o.callStatic.aggregate(e.flatMap((({id:e})=>[{target:e,callData:c.encodeFunctionData("name",[])},{target:e,callData:c.encodeFunctionData("token",[])}]))),...e.map((async({id:e})=>await fetch((0,g.Q4)(i?.name),{method:"POST",body:JSON.stringify({query:"\n  query RewardsData($accountId: String!, $distributor: String!) {\n    rewardsClaimeds(where: { distributor: $distributor, account: $accountId }) {\n      id\n      amount\n    }\n  }\n",variables:{accountId:n,distributor:e}})}).then((e=>e.json()))))]),x=e.map((({id:e,rewards_distributions:t},r)=>{const a=c.decodeFunctionResult("name",h[2*r])[0],n=c.decodeFunctionResult("token",h[2*r+1])[0];let i=0;t.length>0&&(i=parseInt(t[0].duration));const o=u[r].data.rewardsClaimeds.reduce(((e,t)=>e.add((0,Se.wei)(t.amount,18,!0))),(0,Se.wei)(0)).toNumber(),{duration:l,created_at:s}=t[0],d=parseInt(l)+parseInt(s);return{address:e,name:a,token:n,duration:i,total:(new Date).getTime()/1e3>d?"0":t[0].amount,lifetimeClaimed:o}})),{returnData:p}=await o.callStatic.aggregate(x.flatMap((({token:e,address:r})=>[{target:e,callData:d.encodeFunctionData("name",[])},{target:e,callData:d.encodeFunctionData("symbol",[])},{target:e,callData:d.encodeFunctionData("decimals",[])},{target:l.address,callData:l.interface.encodeFunctionData("getRewardRate",[Ft.O$.from(t),e,r])}]))),m=x.map(((e,t)=>{const r=d.decodeFunctionResult("name",p[4*t])[0],a=d.decodeFunctionResult("symbol",p[4*t+1])[0],n=d.decodeFunctionResult("decimals",p[4*t+2])[0],i=l.interface.decodeFunctionResult("getRewardRate",p[4*t+3]),o=(0,Se.wei)(e.total,18,!0).toNumber();return{...e,name:r,symbol:a,decimals:n,rewardRate:(0,Se.wei)(i),total:o}})),f=[];for(const e of m)try{const r=await l.callStatic.claimRewards(Ft.O$.from(n),Ft.O$.from(t),a,e.address);f.push({...e,claimableAmount:(0,Se.wei)(r),distributorAddress:e.address,rate:e.rewardRate.toNumber()})}catch(t){f.push({...e,claimableAmount:(0,Se.wei)(0),distributorAddress:e.address,rate:e.rewardRate.toNumber()})}const y=[...f].sort(((e,t)=>t.claimableAmount.toNumber()-e.claimableAmount.toNumber()));return pa.parse(y)}catch(e){return console.warn(e),[]}}})}var ga=r(50899);const ya=({collateralType:e,isLoading:t,rewards:r,liquidityPosition:a,network:n})=>(0,m.jsxs)(T.xu,{mb:12,children:[(0,m.jsx)(ga.$,{}),(0,m.jsx)(T.xu,{mb:"4",children:(0,m.jsx)(_r,{})}),(0,m.jsxs)($.k,{alignItems:"center",mb:"8px",children:[(0,m.jsx)($.k,{bg:"linear-gradient(180deg, #08021E 0%, #1F0777 100%)",height:"34px",width:"34px",justifyContent:"center",alignItems:"center",borderRadius:"100%",display:"flex",children:(0,m.jsx)(W.l6,{symbol:e?.symbol,width:"28px",height:"28px",fill:"#0B0B22",color:"#00D1FF"})}),(0,m.jsxs)(et.X,{ml:4,fontWeight:700,fontSize:"3xl",color:"gray.50",display:"flex",alignItems:"center",children:[e?.symbol," Liquidity Position"]})]}),(0,m.jsxs)(A.x,{color:"gray.500",fontFamily:"heading",fontSize:"14px",lineHeight:"20px",width:"80%",children:[(0,Le.Yz)(n?.id,n?.preset)?"Deposit to ":"Deposit your collateral to borrow snxUSD and ","contribute to the network collateral. If you've never staked on Synthetix V3 before, please read through this"," ",(0,m.jsx)(I.r,{fontWeight:"600",color:"cyan.500",href:(0,Le.Yz)(n?.id,n?.preset)?"https://docs.synthetix.io/v/v3/for-liquidity-providers/base-lp-guide":"https://docs.synthetix.io/v/v3/for-liquidity-providers/delegating-collateral",target:"_blank",children:"quick introduction"})," ","first."]}),(0,m.jsx)(Xt.i,{mt:"31px",mb:"24px",color:"gray.900"}),(0,m.jsxs)($.k,{gap:4,children:[(0,m.jsxs)(Xe,{p:6,flexDirection:"column",bg:"navy.700",height:"fit-content",children:[(0,m.jsx)(A.x,{fontWeight:"700",fontSize:"xl",color:"gray.50",mb:"1",fontFamily:"heading",children:"Manage C-Ratio"}),(0,m.jsxs)(A.x,{color:"gray.400",fontSize:"sm",mb:"2",children:["The Collateralization Ratio (C-Ratio) is calculated by dividing the value of the positions collateral by the value of the positions debt."," ",(0,m.jsx)(A.x,{as:"span",fontWeight:"700",display:"inline",color:"white",children:"This position will be liquidated if the C-Ratio drops below the Liquidation C-Ratio."})]}),(0,m.jsx)(Br,{liquidityPosition:a})]}),(0,m.jsxs)(T.xu,{minW:"450px",children:[(0,m.jsx)(Wr,{liquidityPosition:a}),(0,m.jsx)(ta,{isLoading:t,rewards:r})]})]})]}),ba=()=>{const{accountId:e,collateralSymbol:t,poolId:r}=(0,xe.UO)(),{isLoading:a,data:n}=(0,we.t)(t),{isLoading:i,data:o}=ua(r),{isLoading:l,data:s}=fa(o?.registered_distributors,r,n?.tokenAddress,e),{data:c}=(({tokenAddress:e,accountId:t,poolId:r})=>{const{data:a}=(0,He.L)(),{data:n}=(0,he.a)(),{data:i}=(0,Re.a)(),{network:o}=(0,q.LN)(),{data:l}=$e(),s=(0,q.eK)(o);return(0,y.useQuery)({queryKey:[`${o?.id}-${o?.preset}`,"LiquidityPosition",{accountId:t},{pool:r,token:e,collateralPriceUpdatesLength:a?.length,priceUpdateTx:l?.data||""}],enabled:Boolean(n&&i&&r&&t&&e&&a),queryFn:async()=>{if(!(n&&t&&r&&e&&a&&i&&o&&s))throw Error("useLiquidityPosition should not be enabled");const{calls:c,decoder:d}=await Ne({collateralAddresses:[e],CoreProxy:n}),{calls:h,decoder:u}=await qe({CoreProxy:n,accountId:t,poolId:r,tokenAddress:e}),{calls:x,decoder:p}=await Be({accountId:t,tokenAddresses:[e,i.address],CoreProxy:n}),m=(await(0,Oe.$)(a,o.isTestnet).then((e=>(0,Oe.x)("0x",a,e)))).concat(c).concat(h).concat(x);return l&&m.unshift(l),await(0,Te.Iy)(o,s,m,(t=>{if(!Array.isArray(t))throw Error("Expected array ");const r=c.length,a=r,n=a+h.length,i=n,[o]=d(t.slice(0,r)),l=u(t.slice(a,n)),[s,x]=p(t.slice(i));return{collateralPrice:o,collateralAmount:l.collateral.amount,collateralValue:l.collateral.amount.mul(o),debt:l.debt,tokenAddress:e,accountCollateral:s,usdCollateral:x}}),"useLiquidityPosition")}})})({tokenAddress:n?.tokenAddress,accountId:e,poolId:r}),{network:d}=(0,q.LN)(),h=l||a||i;return(0,m.jsx)(tr.T,{children:(0,m.jsx)(ya,{isLoading:h,collateralType:n,rewards:s,liquidityPosition:c,network:d})})};var ja=r(89815);const wa=({collateralTypes:e,collateralType:t,onChange:r})=>(0,m.jsxs)(B.v,{children:[(0,m.jsx)(P.j,{minHeight:"48px",alignItems:"center",cursor:"pointer",type:"button",children:(0,m.jsxs)($.k,{children:[t?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(W.l6,{fill:"#0B0B22",color:"#00D1FF",symbol:t.symbol,width:"24px",height:"24px"}),(0,m.jsx)(A.x,{fontWeight:"600",mx:"2",children:t.displaySymbol})]}):null,(0,m.jsx)(ja.v,{opacity:"0.66",w:"6",h:"6",ml:"auto",mr:"2"})]})}),(0,m.jsx)(H.q,{p:1,minW:"0",w:"125px",bg:"black",border:"1px solid rgba(255,255,255,0.33)",children:e.map((e=>(0,m.jsx)(O.s,{alignItems:"left",py:2,borderRadius:"sm",flexDirection:"column",_hover:{bg:"gray.800"},_focus:{bg:"gray.800"},_active:{bg:"gray.800"},onClick:()=>r(e.symbol),children:(0,m.jsxs)($.k,{flexDirection:"row",children:[(0,m.jsx)(W.l6,{fill:"#0B0B22",color:"#00D1FF",symbol:e.symbol,width:"24px",height:"24px"}),(0,m.jsx)(A.x,{ml:"2",fontWeight:"600",children:e?.displaySymbol})]})},e.symbol)))})]}),Ca=({collateralSymbol:e,onChange:t})=>{const{data:r=[]}=(0,we.T)(),{data:a}=(0,we.t)(e);return(0,m.jsx)(wa,{onChange:t,collateralType:a,collateralTypes:r})};var va=r(1249);function Sa({collateralType:e,accountCollateral:t,ethBalance:r,snxBalance:a,isConnected:i,openConnectModal:o,staticCollateral:l,poolId:s,navigate:c,DepositModal:d,CollateralTypeSelector:h,tokenBalance:u}){const x=(0,n.useRef)(null),[p,f]=(0,n.useState)((0,Se.wei)(0)),[g,y]=(0,n.useState)((0,Se.wei)(0)),[b,j]=(0,n.useState)(0),w=(0,z.TH)(),C=(0,n.useMemo)((()=>"SNX"===e?.symbol?a?.transferable:"USDC"===e?.symbol?u?.add(t?.availableCollateral||new Se.Wei(0)):"WETH"!==e?.symbol?u:u&&r?u.add(r):void 0),[e?.symbol,u,r,a?.transferable,t?.availableCollateral]),[v,S]=(0,n.useState)(!1),k=(0,n.useCallback)((async e=>{e.preventDefault();e.target.reportValidity()&&(y((0,Se.wei)(p)),S(!0))}),[p]),D=(0,n.useCallback)((t=>{s&&`${e?.symbol}`.toLowerCase()!==`${t}`.toLowerCase()&&(j(0),y((0,Se.wei)(0)),f((0,Se.wei)(0)),x.current?.focus(),c({pathname:(0,se.Gn)("/deposit/:collateralSymbol/:poolId",{poolId:s,collateralSymbol:t}),search:w.search}))}),[w.search,c,e?.symbol,s]);return!i&&o?(0,m.jsx)($.k,{flexGrow:1,alignItems:"flex-end",children:(0,m.jsx)(F.z,{width:"100%",size:"md",px:"8",onClick:o,children:"Connect Wallet"})}):s&&e?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(T.xu,{as:"form",bg:"navy.900",mb:"8",onSubmit:k,children:[(0,m.jsxs)(T.xu,{borderWidth:"1px",borderColor:"gray.900",borderRadius:"base",p:2,children:[(0,m.jsxs)($.k,{justifyContent:"space-between",children:[(0,m.jsx)($.k,{alignItems:"center",children:l?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(W.l6,{fill:"#0B0B22",color:"#00D1FF",symbol:e.symbol,width:"24px",height:"24px"}),(0,m.jsx)(A.x,{fontWeight:"600",mx:"2",children:e.displaySymbol})]}):(0,m.jsx)(h,{collateralSymbol:e.symbol,onChange:D})}),(0,m.jsxs)($.k,{flexDirection:"column",justifyContent:"flex-end",flexGrow:1,children:[(0,m.jsx)(or,{value:p,onChange:e=>{j(0),f(e)},InputProps:{"data-testid":"deposit amount input"},min:e.minDelegationD18,max:C}),(0,m.jsxs)($.k,{flexDirection:"column",alignItems:"flex-end",fontSize:"xs",color:"whiteAlpha.700",children:[t&&t?.availableCollateral.gt(0)?(0,m.jsx)(I.r,{onClick:()=>f(t?.availableCollateral),children:(0,m.jsx)(st.$,{prefix:`Available ${e.symbol} Collateral: `,value:t?.availableCollateral})}):null,(0,m.jsx)(I.r,{onClick:()=>{if(!u||!a)return;const t="SNX"===e.symbol?a.transferable:u;f(t)},children:(0,m.jsx)(st.$,{prefix:`${e.symbol} Wallet Balance: `,value:"SNX"===e.symbol?a?.transferable:u})}),"WETH"===e?.symbol?(0,m.jsxs)($.k,{gap:"1",cursor:"pointer",onClick:()=>{r&&f(r)},children:[(0,m.jsx)(A.x,{children:"ETH Wallet Balance:"}),(0,m.jsx)(st.$,{value:r})]}):null]})]})]}),(0,m.jsx)(vr,{disabled:!!C&&C.eq(0),onBadgePress:e=>{if(C){if(b===e)return f((0,Se.wei)(0)),void j(0);j(e),f(1===e?C:C.mul(e))}},activeBadge:b}),(0,m.jsx)(fr.U,{in:p.gt(0)&&p.lt(e.minDelegationD18),animateOpacity:!0,children:(0,m.jsxs)(ft.b,{mt:2,status:"info",children:[(0,m.jsx)(gt.z,{}),(0,m.jsxs)(bt.X,{children:["You need to deposit"," ",(0,m.jsx)(st.$,{value:e.minDelegationD18,suffix:` ${e.symbol}`})," ","minimum"]})]})})]}),(0,m.jsx)(F.z,{mt:4,size:"md",px:"8",type:"submit",w:"full","data-testid":"deposit collateral",children:"Deposit Collateral"})]}),a?.collateral&&a?.collateral.gt(0)&&"SNX"===e.symbol&&(0,m.jsx)(Ar,{tokenBalance:a.collateral}),g.gt(0)?(0,m.jsx)(d,{availableCollateral:t?.availableCollateral||(0,Se.wei)(0),currentCollateral:(0,Se.wei)(0),collateralChange:g,isOpen:v,onClose:()=>S(!1)}):null]}):null}const ka=e=>{const[t,r]=(0,K.Or)(),a=(0,z.s0)(),n=(0,q.T9)(),i=(0,xe.UO)(),{data:o}=(0,we.t)(i.collateralSymbol),{network:l}=(0,q.LN)(),s=(0,Sr.G)(),c=kr(),{data:d}=function(e,t){const{data:r}=(0,he.a)(),{network:a}=(0,q.LN)(),n=(0,q.M9)(),{data:i}=$e();return(0,y.useQuery)({queryKey:[`${a?.id}-${a?.preset}`,"AccountSpecificCollateral",{accountId:e},{token:t,priceUpdateTx:i?.data}],enabled:Boolean(r&&e&&t),queryFn:async function(){if(!(r&&e&&t&&a&&n))throw"useAccountSpecificCollateral should not be enabled";const{calls:o,decoder:l}=await Be({accountId:e,tokenAddresses:[t],CoreProxy:r}),s=[...o];return i&&s.unshift(i),(await(0,Te.Iy)(a,n,o,l,"useAccountSpecificCollateral")).at(0)}})}(i.accountId,o?.tokenAddress),{data:h}=(0,dr.mM)((0,Le.Yz)(l?.id,l?.preset)?(0,Le.sm)(l?.id):o?.tokenAddress);return(0,m.jsx)(Sa,{staticCollateral:e.staticCollateral,isConnected:n,openConnectModal:()=>r(),collateralType:o,accountCollateral:d,tokenBalance:h,snxBalance:c.data,ethBalance:s.data,poolId:i.poolId,navigate:a,DepositModal:va.DepositModal,CollateralTypeSelector:Ca})},Aa=({poolName:e,poolId:t})=>{const r=(0,z.TH)();return(0,m.jsxs)(Xe,{p:4,flexDirection:"column",children:[t?(0,m.jsx)($.k,{justifyContent:"space-between",children:(0,m.jsxs)($.k,{flexDirection:"column",children:[(0,m.jsx)(et.X,{fontSize:"xl",children:e}),(0,m.jsxs)(A.x,{fontSize:"sm",color:"gray.400",children:["Pool #",t]})]})}):(0,m.jsxs)($.k,{justifyContent:"space-between",children:[(0,m.jsxs)(T.xu,{children:[(0,m.jsx)(oe.O,{w:16,height:8}),(0,m.jsx)(oe.O,{mt:1,w:8,height:6})]}),(0,m.jsx)(oe.O,{w:16,height:6})]}),t&&(0,m.jsx)(F.z,{as:i.rU,mt:4,size:"md",to:{pathname:(0,se.Gn)("/pools/:poolId",{poolId:t}),search:r.search},variant:"outline",children:"See Pool"})]})},Ta=()=>{const{poolId:e}=(0,xe.UO)(),{data:t}=ua(e),r=_e(t),{data:a}=(0,Ce.AI)(e);return(0,m.jsx)(Aa,{poolName:a?.name,poolId:a?.id,sevenDaysPoolPerformanceGrowth:r?.growthPercentage})};function Da({collateralDisplaySymbol:e,PoolBox:t,DepositForm:r,network:a}){return(0,m.jsxs)($.k,{height:"100%",flexDirection:"column",children:[(0,m.jsx)(ga.$,{}),(0,m.jsx)(_r,{}),(0,m.jsx)($.k,{alignItems:"flex-end",flexWrap:{base:"wrap",md:"nowrap"},children:(0,m.jsxs)(T.xu,{flexGrow:1,mr:12,children:[(0,m.jsx)($.k,{mb:2,children:(0,m.jsxs)($.k,{alignItems:"center",children:[(0,m.jsx)(T.xu,{mr:2,bg:"linear-gradient(180deg, #08021E 0%, #1F0777 146.21%)",p:"3px",borderRadius:"50px",children:(0,m.jsx)(W.l6,{width:"30px",height:"30px",symbol:e||"SNX",fill:"#0B0B22",color:"#00D1FF"})}),(0,m.jsxs)(et.X,{children:[e," Vault"]})]})}),(0,m.jsxs)(A.x,{color:"gray.500",fontSize:"sm",children:[(0,Le.Yz)(a?.id,a?.preset)?"Deposit to ":"Deposit your collateral to borrow snxUSD and ","contribute to the network collateral. If you have never staked on Synthetix before, please review"," ",(0,m.jsx)(I.r,{color:"cyan.500",href:(0,Le.Yz)(a?.id,a?.preset)?"https://docs.synthetix.io/v/v3/for-liquidity-providers/base-lp-guide":"https://docs.synthetix.io/",target:"_blank",children:"the documentation"}),"."]})]})}),(0,m.jsx)(Xt.i,{my:8,bg:"gray.900"}),(0,m.jsxs)($.k,{alignItems:"stretch",flexWrap:{base:"wrap",md:"nowrap"},gap:4,children:[(0,m.jsxs)(Xe,{flexGrow:1,p:4,flexDirection:"column",children:[(0,m.jsx)(et.X,{fontSize:"xl",color:"gray.50",children:"Deposit Collateral"}),(0,m.jsx)(A.x,{fontSize:"sm",color:"gray.500",my:1,children:"Take an interest-free loan against your collateral. This increases your debt and decreases your C-Ratio."}),(0,m.jsxs)(et.X,{mt:4,mb:2,size:"sm",color:"gray.50",children:["Deposit ",e]}),(0,m.jsx)(r,{})]}),(0,m.jsx)(T.xu,{maxW:{base:"full",md:"400px"},width:"full",children:(0,m.jsx)(t,{})})]})]})}function Ia(){const e=(0,xe.UO)(),{data:t}=(0,we.t)(e.collateralSymbol),{network:r}=(0,q.LN)();return(0,m.jsx)(Da,{collateralDisplaySymbol:t?.displaySymbol,DepositForm:ka,PoolBox:Ta,network:r})}const Fa=()=>{const e=(0,xe.UO)(),{data:t}=(0,Ce.AI)(e.poolId);return(0,m.jsx)($.k,{gap:2,alignItems:"flex-end",children:(0,m.jsx)(et.X,{fontWeight:700,fontSize:"3xl",children:t?t.name:"Unknown Pool"})})},La=Ae.z.array(Ae.z.string()),za=new Ie.vU(["function name(uint128 marketId) external view returns (string memory)"]),Ma=e=>(0,m.jsx)(nt.Th,{textTransform:"none",sx:{paddingBottom:1,paddingTop:4,borderColor:"gray.900",borderTop:"none",paddingLeft:2,paddingRight:2},...e}),$a=({isLastItem:e,...t})=>(0,m.jsx)(ct.Td,{sx:{borderBottom:e?"none":"1px",borderBottomColor:"gray.900",paddingLeft:2,paddingRight:2},...t}),Ea=()=>(0,m.jsxs)(at.Tr,{children:[(0,m.jsx)($a,{children:(0,m.jsx)(oe.O,{w:"full",height:8})}),(0,m.jsx)($a,{children:(0,m.jsx)(oe.O,{w:"full",height:8})}),(0,m.jsx)($a,{children:(0,m.jsx)(oe.O,{w:"full",height:8})}),(0,m.jsx)($a,{children:(0,m.jsx)(oe.O,{w:"full",height:8})})]});function Na({poolData:e,marketNamesById:t,poolId:r,poolDataFetched:a}){return a&&!e?(0,m.jsx)(Xe,{padding:4,children:(0,m.jsxs)(A.x,{children:["Pool with id: ",r," does not exist"]})}):(0,m.jsxs)(Xe,{bg:"navy.700",padding:4,flexDirection:"column","data-testid":"pool markets",children:[(0,m.jsx)(A.x,{fontSize:"xl",fontWeight:700,children:"Markets"}),(0,m.jsx)($.k,{children:(0,m.jsx)(Vr.x,{w:"100%",children:(0,m.jsxs)(tt.i,{variant:"simple",children:[(0,m.jsx)(rt.h,{children:(0,m.jsxs)(at.Tr,{children:[(0,m.jsx)(Ma,{children:"Market"}),(0,m.jsx)(Ma,{children:"Pool Allocation"})]})}),(0,m.jsxs)(it.p,{children:[!e&&(0,m.jsx)(Ea,{}),0===e?.configurations.length?(0,m.jsx)(at.Tr,{w:"full",children:(0,m.jsx)(ct.Td,{colSpan:4,border:"none",children:(0,m.jsx)(A.x,{textAlign:"center",mt:4,children:"No markets configured for the pool"})})}):e?.configurations.map((({id:r,market:a,weight:n},i)=>{const o=i+1===e.configurations.length;return(0,m.jsxs)(at.Tr,{"data-testid":"pool market","data-market":r,children:[(0,m.jsxs)($a,{isLastItem:o,children:[(0,m.jsx)(A.x,{fontSize:"sm",display:"block","data-testid":"market name",children:t?.[a.id]?t[a.id]:"-"}),(0,m.jsxs)(A.x,{fontSize:"xs",color:"gray.500","data-testid":"market id",children:["ID: ",a.id]})]}),(0,m.jsx)($a,{isLastItem:o,fontSize:"sm","data-testid":"pool allocation",children:e.total_weight?(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(A.x,{display:"block",children:Ke(n.div(e.total_weight).toNumber())})}):"-"})]},r)}))]})]})})})]})}const Ba=()=>{const e=(0,xe.UO)(),{data:t,isFetched:r}=ua(e.poolId),a=t?.configurations.map((({market:e})=>({marketId:e.id,address:e.address}))),{data:n}=(e=>{const{data:t}=(0,xa.b)(),{network:r}=(0,q.LN)();return(0,y.useQuery)({queryKey:[`${r?.id}-${r?.preset}`,"MarketNamesById",{markets:e?e.map((e=>e.marketId)).sort():[]}],queryFn:async()=>{if(!e||!t)throw Error("Query should not be enable when contract or marketIdsAndAddresses missing");const r=e.map((e=>({target:e.address,callData:za.encodeFunctionData("name",[e.marketId])}))),a=(await t.callStatic.aggregate(r)).returnData.map((e=>za.decodeFunctionResult("name",e)[0]));return La.parse(a)},select:t=>t.reduce(((t,r,a)=>{const n=e?.[a].marketId;return n?(t[n]=r,t):t}),{}),enabled:Boolean(t&&e&&e.length>0)})})(a);return(0,m.jsx)(Na,{poolId:e.poolId,poolDataFetched:r,poolData:t,marketNamesById:n})},Pa=Ae.z.object({value:ve.rK,amount:ve.rK}).transform((({value:e,amount:t})=>({value:(0,Se.wei)(e),amount:(0,Se.wei)(t)}))),Ha=ve.rK.transform((e=>(0,Se.wei)(e))),Oa=({vaultsData:e,collateralPriceByAddress:t,apr:r,isAprLoading:a})=>{const{collateral:i,debt:o}=(e=>{const t={collateral:{value:(0,Se.wei)(0),amount:(0,Se.wei)(0)},debt:(0,Se.wei)(0)};return e?e.reduce(((e,{collateral:t,debt:r})=>(e.collateral={value:e.collateral.value.add(t.value),amount:e.collateral.amount.add(t.amount)},e.debt=e.debt.add(r),e)),t):t})(e);return(0,m.jsxs)(Xe,{padding:4,bg:"navy.700",flexDirection:"column","data-testid":"pool collateral types",children:[(0,m.jsx)(A.x,{fontWeight:700,fontSize:"xl",children:"Pool Collateralization"}),(0,m.jsxs)(Xe,{padding:4,mt:4,flexDirection:"column",children:[(0,m.jsxs)($.k,{justifyContent:"space-between",flexDirection:{base:"row",md:"column",lg:"row"},children:[(0,m.jsx)(A.x,{display:"flex",alignItems:"center",fontWeight:700,fontSize:"md",gap:1,color:"white",children:"Total TVL"}),e?(0,m.jsx)(A.x,{fontWeight:700,fontSize:"xl",color:"white","data-testid":"pool tvl",children:Qe(i.value.toNumber())}):(0,m.jsx)(oe.O,{w:16,h:6})]}),(0,m.jsxs)($.k,{justifyContent:"space-between",flexDirection:{base:"row",md:"column",lg:"row"},children:[(0,m.jsx)(A.x,{display:"flex",alignItems:"center",fontWeight:700,fontSize:"md",gap:1,color:"white",children:"Total Debt"}),e?(0,m.jsx)(A.x,{fontWeight:700,fontSize:"xl",color:"white","data-testid":"pool total debt",children:Qe(o.toNumber())}):(0,m.jsx)(oe.O,{mt:1,w:16,h:6})]}),(0,m.jsxs)($.k,{justifyContent:"space-between",flexDirection:{base:"row",md:"column",lg:"row"},children:[(0,m.jsx)(A.x,{display:"flex",alignItems:"center",fontWeight:700,fontSize:"md",gap:1,color:"white",children:"APR"}),a?(0,m.jsx)(oe.O,{mt:1,w:16,h:6}):(0,m.jsx)(dt.u,{label:"APR is a combination of past week pool performance and rewards.",children:(0,m.jsx)(A.x,{fontWeight:700,fontSize:"xl",color:"white",children:`${r?r?.toFixed(2):"-"}%`})})]})]}),(0,m.jsx)($.k,{flexDirection:"column",justifyContent:"space-between",children:e&&t?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Xt.i,{mt:6,mb:4}),e.map((e=>{const r=t?.[e.collateralType.tokenAddress];return(0,m.jsx)(n.Fragment,{children:(0,m.jsxs)(T.xu,{display:"flex",px:4,mb:2,flexDirection:"column",borderBottom:"1px",borderColor:"gray.900",_last:{borderBottom:"none"},"data-testid":"pool collateral","data-collateral":e.collateralType.symbol,children:[(0,m.jsxs)($.k,{color:"white",display:"flex",gap:1,alignItems:"center",children:[(0,m.jsx)(W.l6,{width:"30px",height:"30px",fill:"#0B0B22",color:"#00D1FF",symbol:e.collateralType.symbol}),(0,m.jsx)(A.x,{fontWeight:700,fontSize:"xl",children:e.collateralType.displaySymbol}),(0,m.jsx)(A.x,{fontSize:"sm",color:"gray.400",fontWeight:"400","data-testid":"collateral price",children:r?Qe(r.toNumber()):"-"})]}),(0,m.jsxs)($.k,{gap:2,justifyContent:"space-between",children:[(0,m.jsxs)($.k,{flexBasis:"50%",flexDirection:"column",children:[(0,m.jsx)(A.x,{mt:2,fontSize:"sm",color:"gray.500",textTransform:"uppercase",whiteSpace:"nowrap",children:"TVL"}),(0,m.jsx)(A.x,{fontSize:"md",fontWeight:700,color:"white","data-testid":"collateral value",children:Qe(e.collateral.value.toNumber())}),(0,m.jsxs)(A.x,{fontSize:"sm",color:"gray.500",fontWeight:"400","data-testid":"collateral amount",children:[Ye(e.collateral.amount.toNumber())," ",e.collateralType.displaySymbol]})]}),(0,m.jsxs)($.k,{flexBasis:"50%",flexDirection:"column",children:[(0,m.jsx)(A.x,{mt:2,fontSize:"sm",color:"gray.500",textTransform:"uppercase",whiteSpace:"nowrap",children:"Debt"}),(0,m.jsx)(A.x,{fontSize:"md",fontWeight:700,color:"white","data-testid":"collateral debt",children:Qe(e.debt.toNumber())}),(0,m.jsxs)(A.x,{fontSize:"sm",color:"gray.500",fontWeight:"400","data-testid":"collateral cratio",children:["VAULT C-RATIO:"," ",e.debt.eq(0)?"-":Ke(e.collateral.value.div(e.debt).toNumber(),{maximumFractionDigits:0})]})]})]})]})},e.collateralType.tokenAddress)}))]}):(0,m.jsxs)(T.xu,{children:[(0,m.jsx)(oe.O,{mt:4,w:"full",height:24}),(0,m.jsx)(oe.O,{mt:2,w:"full",height:24})]})})]})},Ra=()=>{const e=(0,xe.UO)(),{data:t}=(e=>{const{network:t}=(0,q.LN)(),{data:r}=(0,we.T)(),{data:a}=(0,he.a)(),{data:n}=(0,He.L)(),i=(0,q.M9)(),{data:o}=$e();return(0,y.useQuery)({queryKey:[`${t?.id}-${t?.preset}`,"VaultCollaterals",{pool:e,tokens:r?r?.map((e=>e.tokenAddress)).sort():[],priceUpdateTx:o?.data}],queryFn:async()=>{if(!(a&&r&&e&&n&&t&&i))throw Error("useVaultsData should not be enabled when missing data");const l=Promise.all(r.map((t=>a.populateTransaction.getVaultCollateral(e,t.tokenAddress)))),s=Promise.all(r.map((t=>a.populateTransaction.getVaultDebt(e,t.tokenAddress)))),c=(0,Oe.$)(n,t.isTestnet).then((e=>(0,Oe.x)("0x",n,e))),d=await Promise.all([c,l,s]);return o&&d.unshift(o),await(0,Te.Iy)(t,i,d.flat(),(e=>{if(!Array.isArray(e))throw Error("Expected array");const t=e.slice(0,r.length),n=e.slice(r.length);return t.map(((e,t)=>{const i=n[t],o=a.interface.decodeFunctionResult("getVaultDebt",i),l=a.interface.decodeFunctionResult("getVaultCollateral",e),s=Pa.parse({...l});return{debt:Ha.parse(o[0]),collateral:s,collateralType:r[t]}}))}),"useVaultsData")},enabled:Boolean(r?.length&&a&&e&&n)})})(e.poolId?parseFloat(e.poolId):void 0),{data:r}=(()=>{const{network:e}=(0,q.LN)(),{data:t}=(0,he.a)(),{data:r}=(0,we.T)(),a=(0,q.M9)(),n=r?.map((e=>e.tokenAddress)),{data:i}=$e();return(0,y.useQuery)({enabled:Boolean(t&&n&&n?.length>0),queryKey:[`${e?.id}-${e?.preset}`,"CollateralPrices",{collateralAddresses:n,priceUpdateTx:i?.data}],queryFn:async()=>{if(!(t&&n&&0!=n.length&&e&&a))throw"useCollateralPrices missing required data";const{calls:r,decoder:o}=await Ne({CoreProxy:t,collateralAddresses:n}),l=[...r];i&&l.unshift(i);const s=await(0,Te.Iy)(e,a,l,o,"useCollateralPrices");return n.reduce(((e,t,r)=>(e[t]=s[r],e)),{})}})})(),{data:a,isLoading:n}=Yt();return(0,m.jsx)(Oa,{vaultsData:t,collateralPriceByAddress:r,apr:a?.combinedApr,isAprLoading:n})},Ua=()=>{const e=(0,xe.UO)(),{data:t}=(0,Ce.AI)(e.poolId),{accountId:r,collateralSymbol:a,poolId:n}=(0,xe.UO)(),{isLoading:i,data:o}=(0,we.t)(a),{isLoading:l,data:s}=ua(n),{isLoading:c,data:d}=fa(s?.registered_distributors,n,o?.tokenAddress,r),h=c||i||l,u=t?`Pool #${t.id} / ${t.name}`:"Pool";return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(je.q,{children:[(0,m.jsx)("title",{children:u}),(0,m.jsx)("meta",{name:"description",content:u})]}),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(_r,{}),(0,m.jsx)(Fa,{}),(0,m.jsx)(Xt.i,{my:8,bg:"gray.900"}),(0,m.jsxs)($.k,{gap:4,flexDirection:{base:"column",lg:"row"},children:[(0,m.jsx)(T.xu,{flexGrow:1,children:(0,m.jsx)(Ra,{})}),(0,m.jsxs)(T.xu,{flexGrow:1,children:[(0,m.jsx)(Ba,{}),(0,m.jsx)(ta,{mt:4,isLoading:h,rewards:d,readOnly:!0})]})]})]})]})};var Wa=r(82770),qa=r(51380);function _a(){const e=(0,xe.UO)(),{data:t=[]}=ue(),r=(0,z.s0)();return(0,m.jsx)(Wa.P,{placeholder:"Select Account",value:e.accountId,onChange:t=>{r({pathname:(0,se.Gn)("/playground"),search:(0,i.fW)({...e,accountId:t.target.value}).toString()})},display:"inline-block",width:"20em",mr:"1em",children:t.map((e=>(0,m.jsx)("option",{value:e,children:e},e)))})}function Va(){const e=(0,xe.UO)(),{data:t=[]}=(0,Ce.Oh)(),r=(0,z.s0)();return(0,m.jsx)(Wa.P,{placeholder:"Select pool",value:e.poolId,onChange:t=>{r({pathname:(0,se.Gn)("/playground"),search:(0,i.fW)({...e,poolId:t.target.value}).toString()})},display:"inline-block",width:"20em",mr:"1em",children:t.map((e=>(0,m.jsxs)("option",{value:e.id,children:[e.isPreferred?"* ":null,e.name,e.isPreferred?" (preferred)":null]},e.id)))})}function Za(){const e=(0,xe.UO)(),{data:t=[]}=(0,we.T)(),r=(0,z.s0)();return(0,m.jsx)(Wa.P,{placeholder:"Select Collateral",value:e.symbol,onChange:t=>{r({pathname:(0,se.Gn)("/playground"),search:(0,i.fW)({...e,symbol:t.target.value}).toString()})},display:"inline-block",width:"20em",mr:"1em",children:t.map((e=>(0,m.jsx)("option",{value:e.symbol,children:e.symbol},e.symbol)))})}function Ga(){const e=(0,q.mx)(),{data:t}=(0,he.a)(),r=(0,xe.UO)(),{data:a=[],refetch:i}=ue(),[o]=a.filter((e=>e===r.accountId)),{data:l=[]}=(0,we.T)(),s=r.symbol,[{tokenAddress:c}={tokenAddress:void 0}]=l.filter((e=>e.symbol===s)),{data:d}=(0,Ce.AI)(r.poolId),h=Pe({accountId:o}),u=h.data?.find((e=>e.tokenAddress===c)),x=wt({accountId:o}),p=(0,qa.y)({contractAddress:c,spender:t?.address}),f=(0,dr.mM)(c),g=n.useCallback((()=>x.data&&x.data.getTime()>Date.now()?(0,Ct.Z)(x.data,{addSuffix:!0}):"~"),[x.data]),[y,b]=(0,n.useState)(g());(0,n.useEffect)((()=>{const e=setInterval((()=>b(g())),1e3);return()=>clearInterval(e)}),[g]);const j=(0,At.p)({isClosable:!0,duration:9e3}),w=(0,Pt.o)(t);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(T.xu,{p:1,verticalAlign:"middle",children:[(0,m.jsx)(_a,{}),(0,m.jsx)(F.z,{onClick:async()=>{if(o||!t)throw"OMG";try{const e=parseInt(`31337${Math.floor(1e10*Math.random())}`),r=await t["createAccount(uint128)"](e);console.log({tx:r});const a=await r.wait();console.log({result:a}),i()}catch(e){console.error(e);const t=w(e);t&&console.error(new Error(t.name),t),j.closeAll(),j({title:"Create account failed",description:t?(0,m.jsx)(Rt.M,{contractError:t}):"Please try again.",status:"error"})}},children:"Create account"})]}),(0,m.jsxs)(T.xu,{p:1,verticalAlign:"middle",children:[(0,m.jsx)(Za,{}),c?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(ar.I,{disabled:!0,type:"text",name:"accountId",value:p.data?.toString()||"No allowance",width:"20em",mr:"1em"}),(0,m.jsxs)(F.z,{onClick:async()=>{if(!t||!e||!c)throw"OMG";const r=new ce.CH(c,["function approve(address spender, uint256 amount) returns (bool)"],e),a=await r.approve(t.address,Or.Bz);console.log({tx:a});const n=await a.wait();console.log({result:n}),p.refetch()},children:["Approve ",s]})]}):null]}),u?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(T.xu,{p:1,children:[(0,m.jsxs)(A.x,{children:[s," address:"," ",(0,m.jsx)("code",{onClick:()=>{try{navigator.clipboard.writeText(u.tokenAddress)}catch(e){}},style:{cursor:"pointer"},children:c})]}),(0,m.jsxs)(A.x,{children:["Wallet Balance: ",(0,m.jsx)(st.$,{value:f.data})," ",s]})]}),(0,m.jsxs)(T.xu,{mt:10,p:1,verticalAlign:"middle",children:[(0,m.jsx)(ar.I,{type:"number",step:1,min:0,name:"deposit",width:"20em",mr:"1em"}),(0,m.jsx)(F.z,{onClick:async()=>{const e=document.querySelector('[name="deposit"]');if(!(e&&o&&c&&t))throw"OMG";try{const r=await t.deposit(Ft.O$.from(o),c,zt.fi(e.value));console.log({tx:r});const a=await r.wait();console.log({result:a}),f.refetch(),h.refetch()}catch(e){console.error(e);const t=w(e);t&&console.error(new Error(t.name),t),j.closeAll(),j({title:"Deposit failed",description:t?(0,m.jsx)(Rt.M,{contractError:t}):"Please try again.",status:"error"})}},children:"Deposit"})]}),(0,m.jsx)(T.xu,{p:1,children:(0,m.jsxs)(A.x,{children:["Deposited: ",(0,m.jsx)(st.$,{value:u.totalDeposited})," ",s]})}),(0,m.jsxs)(T.xu,{mt:10,p:1,verticalAlign:"middle",children:[(0,m.jsx)(Va,{}),(0,m.jsx)(ar.I,{isDisabled:!d,type:"number",step:1,min:0,name:"delegate",width:"20em",mr:"1em"}),(0,m.jsx)(F.z,{isDisabled:!d,onClick:async()=>{const e=document.querySelector('[name="delegate"]');if(!(e&&d?.id&&o&&c&&t))throw"OMG";try{const r=await t.delegateCollateral(Ft.O$.from(o),Ft.O$.from(d.id),c,zt.fi(e.value),zt.fi("1"));console.log({tx:r});const a=await r.wait();console.log({result:a}),h.refetch()}catch(e){console.error(e);const t=w(e);t&&console.error(new Error(t.name),t),j.closeAll(),j({title:"Delegate failed",description:t?(0,m.jsx)(Rt.M,{contractError:t}):"Please try again.",status:"error"})}},children:"Update delegated"})]}),(0,m.jsx)(T.xu,{p:1,children:(0,m.jsxs)(A.x,{children:["Delegated: ",(0,m.jsx)(st.$,{value:u.totalAssigned})," ",s]})}),(0,m.jsx)(T.xu,{mt:10,p:1,children:(0,m.jsxs)(A.x,{title:x.data?(0,vt.Z)(x.data,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"}):"~",children:["Collateral unlocks: ",y]})}),(0,m.jsxs)(T.xu,{p:1,verticalAlign:"middle",children:[(0,m.jsx)(ar.I,{type:"number",step:1,min:0,max:parseFloat(u.availableCollateral?.toString()||"0"),name:"withdraw",width:"20em",mr:"1em"}),(0,m.jsx)(F.z,{onClick:async()=>{const e=document.querySelector('[name="withdraw"]');if(!(e&&o&&c&&t))throw"OMG";try{const r=await t.withdraw(Ft.O$.from(o),c,zt.fi(e.value));console.log({tx:r});const a=await r.wait();console.log({result:a}),f.refetch(),h.refetch()}catch(e){console.error(e);const t=w(e);t&&console.error(new Error(t.name),t),j.closeAll(),j({title:"Withdraw failed",description:t?(0,m.jsx)(Rt.M,{contractError:t}):"Please try again.",status:"error"})}},children:"Withdraw"})]}),(0,m.jsx)(T.xu,{p:1,children:(0,m.jsxs)(A.x,{children:["Available collateral:"," ",(0,m.jsx)(st.$,{value:u.availableCollateral,suffix:` ${s}`})]})})]}):null]})}function Qa({balance:e,symbol:t,address:r,onMax:a,hideBuyButton:i}){const{network:o}=(0,q.LN)(),l=(0,n.useMemo)((()=>{switch(o?.name){case"goerli":return`https://goerli.etherscan.io/address/${r}#writeContract`;case"sepolia":return`https://sepolia.etherscan.io/address/${r}#writeContract`;case"optimism-goerli":return`https://goerli-optimism.etherscan.io/address/${r}#writeContract`;case"optimism":return`https://app.1inch.io/#/10/unified/swap/ETH/${t.toUpperCase()}`;default:return`https://app.1inch.io/#/1/unified/swap/ETH/${t.toUpperCase()}`}}),[r,o?.name,t]);return(0,m.jsxs)(A.x,{display:"flex",gap:2,alignItems:"center",fontSize:"xs",children:["Balance:",(0,m.jsx)(st.$,{value:e,suffix:` ${t}`}),e&&e.eq(0)&&l&&!i&&(0,m.jsx)(I.r,{href:l,isExternal:!0,children:(0,m.jsxs)(Cr.C,{ml:"1",variant:"outline",transform:"translateY(-1px)",children:["Buy ",t]})}),a&&e?.gt(0)&&(0,m.jsx)(Cr.C,{as:"button",type:"button",variant:"outline",onClick:()=>a(e),children:"Use Max"})]})}var Ya=r(2338);var Ka=r(9875),Xa=r(97386);const Ja="SET_REQUIRE_APPROVAL",en="SET_INFINITE_APPROVAL",tn="RETRY",rn="RUN",an="RESET",nn="idle",on="approve",ln="teleport",sn="failed",cn="success",dn={[on]:on,[ln]:ln},hn="approve",un="teleport",xn={error:null,requireApproval:!1,infiniteApproval:!1},pn=(0,Ka.C)({id:"TeleportMachine",initial:nn,predictableActionArguments:!0,context:xn,on:{[rn]:{target:ln,actions:(0,Xa.f0)({error:e=>xn.error,requireApproval:e=>xn.requireApproval,infiniteApproval:e=>xn.infiniteApproval})},[Ja]:{actions:(0,Xa.f0)({requireApproval:(e,t)=>t.requireApproval})},[en]:{actions:(0,Xa.f0)({infiniteApproval:(e,t)=>t.infiniteApproval})}},states:{[nn]:{on:{[rn]:[{target:on,cond:e=>e.requireApproval},{target:ln}]}},[on]:{invoke:{src:hn,onDone:{target:ln},onError:{target:sn,actions:(0,Xa.f0)({error:(e,t)=>({error:t.data,step:dn.approve})})}}},[ln]:{invoke:{src:un,onDone:{target:cn},onError:{target:sn,actions:(0,Xa.f0)({error:(e,t)=>({error:t.data,step:dn.teleport})})}}},[sn]:{on:{[an]:[{target:nn}],[tn]:[{target:on,cond:e=>e.error?.step===dn.approve,actions:(0,Xa.f0)({error:e=>null})},{target:ln,cond:e=>e.error?.step===dn.teleport,actions:(0,Xa.f0)({error:e=>null})}]}},[cn]:{}}});var mn=r(79155);const fn=({amount:e,isOpen:t,onClose:r,setInfiniteApproval:a,onSubmit:n,state:i,toNetworkName:o,txnHash:l})=>{const s=i.context.infiniteApproval,c=i.context.requireApproval,d=i.context.error,h=i.matches(on)||i.matches(ln);return(0,m.jsxs)(w.u_,{size:"lg",isOpen:t,onClose:r,closeOnOverlayClick:!1,children:[(0,m.jsx)(C.Z,{}),(0,m.jsxs)(v.h,{bg:"black",color:"white",children:[(0,m.jsx)(S.x,{children:"Complete this action"}),(0,m.jsx)(Ya.o,{}),(0,m.jsxs)(k.f,{children:[(0,m.jsx)(A.x,{mb:"2",children:"Please execute the following transactions:"}),(0,m.jsx)(pe.P0,{step:1,title:"Approve snxUSD",status:{failed:d?.step===on,success:!c||i.matches(cn),loading:i.matches(on)&&!d},checkboxLabel:"Approve unlimited",checkboxProps:{isChecked:s,onChange:e=>a(e.target.checked)}}),(0,m.jsx)(pe.P0,{step:2,title:"Teleport snxUSD",subtitle:(0,m.jsx)(m.Fragment,{children:i.matches(cn)?(0,m.jsxs)(A.x,{children:["Teleport for ",(0,m.jsx)(st.$,{showTooltip:!0,value:e,suffix:" snxUSD"})," to"," ",o," executed. Check"," ",(0,m.jsx)(I.r,{color:"cyan.500",href:`https://ccip.chain.link/tx/${l}`,target:"_blank",children:"ccip explorer"})," ","for status."]}):(0,m.jsxs)(A.x,{children:["This will teleport ",(0,m.jsx)(st.$,{value:e,suffix:" snxUSD"})," to"," ",o]})}),status:{failed:d?.step===ln,disabled:i.matches(cn)&&c,success:i.matches(cn),loading:i.matches(ln)&&!d}}),(0,m.jsx)(F.z,{isDisabled:h,onClick:n,width:"100%",my:"4",children:(()=>{switch(!0){case Boolean(d):return"Retry";case h:return"Processing...";case i.matches(cn):return"Done";default:return"Start"}})()})]})]})]})},gn=["error TokenMaxCapacityExceeded(uint256 capacity, uint256 requested, address tokenAddress)","error TokenRateLimitReached(uint256 minWaitInSeconds, uint256 available, address tokenAddress)","error AggregateValueMaxCapacityExceeded(uint256 capacity, uint256 requested)","error AggregateValueRateLimitReached(uint256 minWaitInSeconds, uint256 available)","error UnsupportedDestinationChain(uint64 destinationChainSelector)","error SenderNotAllowed(address sender)","error InsufficientFeeTokenAmount()","error InvalidMsgValue()"],yn=({onClose:e,isOpen:t,amount:r,toNetworkName:a,toNetworkId:i})=>{const{data:o}=(0,he.a)(),{data:l}=(0,Re.a)(),{data:s}=(0,Sr.G)(),{approve:c,requireApproval:d,refetchAllowance:h}=(0,hr.y)({contractAddress:l?.address,amount:r.toBN(),spender:o?.address}),u=(0,At.p)({isClosable:!0,duration:9e3}),{exec:x,txnState:p}=(({toNetworkId:e,amount:t,ethBalance:r})=>{const[a,i]=(0,n.useReducer)(It.I,It.E),{data:o}=(0,he.a)(),l=(0,q.mx)(),{gasSpeed:s}=(0,j.jU)(),c=(0,q.yL)(),d=(0,y.useMutation)({mutationFn:async()=>{if(!l||!o||!c)throw new Error("No signer or CoreProxy");if(r&&!r.eq(0)&&!t.eq(0))try{i({type:"prompting"});const a=await(async({CoreProxy:e,toNetworkId:t,amount:r,ethBalance:a})=>await e.callStatic.transferCrossChain(t,r.toBN(),{value:a.mul(.9).toBN()}))({CoreProxy:o,toNetworkId:e,amount:t,ethBalance:r}),n=(0,$t.o)({provider:c}),d=o.estimateGas.transferCrossChain(e,t.toBN(),{value:a}),h=o.populateTransaction.transferCrossChain(e,t.toBN(),{gasLimit:d,value:a}),[u,x,p]=await Promise.all([n,d,h]),m=(0,Mt.F)({gasLimit:x,gasPrices:u,gasSpeed:s}),f=await l.sendTransaction({...p,...m});i({type:"pending",payload:{txnHash:f.hash}}),await f.wait(),i({type:"success"})}catch(e){throw i({type:"error",payload:{error:e}}),e}}});return{mutation:d,txnState:a,settle:()=>i({type:"settled"}),isLoading:d.isPending,exec:d.mutateAsync}})({amount:r,toNetworkId:i,ethBalance:s}),f=o?.interface.format(mn.pc.full)||[],g=new ce.CH("0x0000000000000000000000000000000000000000",gn.concat(f)),b=(0,Pt.o)(g),[w,C]=(0,Ht.e)(pn,{services:{[hn]:async()=>{try{u({title:"Approve snxUSD",description:"The next transaction will teleport.",status:"info"}),await c(Boolean(w.context.infiniteApproval)),await h()}catch(e){const t=b(e);throw t&&console.error(new Error(t.name),t),u.closeAll(),u({title:"Approval failed",description:t?(0,m.jsx)(Rt.M,{contractError:t}):"Please try again.",status:"error"}),Error("Approve failed",{cause:e})}},[un]:async()=>{try{u.closeAll(),u({title:"Teleporting",description:""}),await x(),u.closeAll(),u({title:"Success",description:"Teleportation executed.",status:"success",duration:5e3})}catch(e){const t=b(e);throw t&&console.error(new Error(t.name),t),u({title:"Teleport failed",description:t?(0,m.jsx)(Rt.M,{contractError:t}):"Please try again.",status:"error"}),Error("Teleport failed",{cause:e})}}}});(0,n.useEffect)((()=>{C(Ja,{requireApproval:d})}),[d,C]);const v=(0,n.useCallback)((()=>{C(an),e()}),[C,e]),S=(0,n.useCallback)((async()=>{w.matches(cn)?v():w.context.error?C(tn):C(rn)}),[v,C,w]);return(0,m.jsx)(fn,{amount:r,isOpen:t,onClose:e,toNetworkName:a,state:w,setInfiniteApproval:e=>{C(en,{infiniteApproval:e})},txnHash:p.txnHash,onSubmit:S})},bn=q.g5.filter((e=>e.isSupported)),jn=({connectedWallet:e,amount:t,setAmount:r,activeNetwork:a,setActiveNetwork:n,balance:i,toNetworkBalance:o,toNetwork:l,setToNetwork:s,usdProxyAddress:c,onTeleportClick:d})=>{const[h,u]=(0,K.Or)();return(0,m.jsxs)(T.xu,{maxW:"600px",children:[(0,m.jsx)(_r,{}),(0,m.jsx)(je.Z,{children:(0,m.jsx)("title",{children:"Teleport snxUSD"})}),(0,m.jsxs)($.k,{justifyContent:"space-between",children:[(0,m.jsx)(et.X,{size:"lg",children:"Teleport snxUSD"}),(0,m.jsx)(W.FZ,{})]}),(0,m.jsxs)(A.x,{mt:2,color:"gray.500",children:["Teleport your assets between layers using the teleporter. This transaction can take up to 30 minutes."," ",(0,m.jsx)(I.r,{color:"cyan.500",target:"_blank",href:"https://blog.synthetix.io/synthetix-launches-teleporters-with-chainlinks-ccip",children:"Read more"})," ","about teleporter and CCIP."]}),(0,m.jsx)(Xt.i,{mt:4,mb:4}),(0,m.jsxs)(Xe,{flexDirection:"column",p:"4",children:[(0,m.jsxs)(Xe,{flexDirection:"column",p:"4",children:[(0,m.jsx)(B.v,{children:({isOpen:e})=>(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)($.k,{alignItems:"center",gap:2,children:[(0,m.jsx)(A.x,{children:"From"}),(0,m.jsxs)(P.j,{as:F.z,variant:"outline",colorScheme:"gray",sx:{"> span":{display:"flex",alignItems:"center"}},mr:1,width:"fit-content",children:[(0,m.jsx)(q.dF,{networkId:a?.id}),(0,m.jsx)(A.x,{variant:"nav",fontSize:"sm",fontWeight:700,ml:1.5,mr:2,display:{base:"none",md:"initial"},children:a?.label}),(0,m.jsx)($.k,{display:{base:"none",md:"initial"},children:e?(0,m.jsx)(W.Kh,{color:"cyan"}):(0,m.jsx)(W._M,{color:"cyan.500"})})]})]}),(0,m.jsx)(H.q,{background:"black",children:bn.filter((e=>"goerli"!==e.name)).filter((e=>e.id!==a?.id)).map((e=>(0,m.jsxs)(O.s,{onClick:()=>{n(e.id),e.id===l?.id&&s(void 0)},display:"flex",alignItems:"center",children:[(0,m.jsx)(q.dF,{networkId:e?.id}),(0,m.jsx)(A.x,{variant:"nav",ml:2,children:e.label})]},e.id)))})]})}),(0,m.jsxs)($.k,{children:[(0,m.jsxs)(A.x,{display:"flex",gap:2,alignItems:"center",fontWeight:"600",children:[(0,m.jsx)(W.RF,{width:"35px",height:"35px"}),"snxUSD"]}),(0,m.jsxs)($.k,{flexDirection:"column",justifyContent:"flex-end",alignItems:"flex-end",flexGrow:1,children:[(0,m.jsx)(or,{InputProps:{isRequired:!0,"data-max":i?.toString(),autoFocus:!0},value:t,onChange:e=>r(e),max:i}),(0,m.jsx)(Qa,{onMax:r,balance:i,symbol:"snxUSD",address:c||""})]})]}),(0,m.jsx)($.k,{alignItems:"center",justifyContent:"flex-end"})]}),(0,m.jsxs)(Xe,{flexDirection:"column",p:"4",mt:4,children:[(0,m.jsx)(B.v,{children:({isOpen:e})=>(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)($.k,{alignItems:"center",gap:2,children:[(0,m.jsx)(A.x,{children:"To"}),(0,m.jsxs)(P.j,{as:F.z,variant:"outline",colorScheme:"gray",sx:{"> span":{display:"flex",alignItems:"center"}},mr:1,width:"fit-content",children:[l?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(q.dF,{networkId:l.id}),(0,m.jsx)(A.x,{variant:"nav",fontSize:"sm",fontWeight:700,ml:1.5,mr:2,display:{base:"none",md:"initial"},children:l.label})]}):"Select Network",(0,m.jsx)($.k,{display:{base:"none",md:"initial"},children:e?(0,m.jsx)(W.Kh,{color:"cyan"}):(0,m.jsx)(W._M,{color:"cyan.500"})})]})]}),(0,m.jsx)(H.q,{background:"black",children:bn.filter((e=>"goerli"!==e.name)).filter((e=>e.id!==a?.id)).filter((e=>a?.isTestnet?e.isTestnet:!e.isTestnet)).map((e=>(0,m.jsxs)(O.s,{onClick:()=>{s(e)},display:"flex",alignItems:"center",children:[(0,m.jsx)(q.dF,{networkId:e.id}),(0,m.jsx)(A.x,{variant:"nav",ml:2,children:e.label})]},e.id)))})]})}),(0,m.jsxs)($.k,{children:[(0,m.jsxs)(A.x,{display:"flex",gap:2,alignItems:"center",children:[(0,m.jsx)(W.RF,{width:"35px",height:"35px"}),"snxUSD"]}),(0,m.jsxs)($.k,{flexDirection:"column",justifyContent:"flex-end",alignItems:"flex-end",flexGrow:1,children:[(0,m.jsx)(or,{InputProps:{isRequired:!0,"data-max":i?.toString()},value:t,onChange:e=>r(e),max:i}),(0,m.jsx)(Qa,{hideBuyButton:!0,onMax:r,balance:o,symbol:"snxUSD",address:c||""})]})]})]}),e?(0,m.jsx)(F.z,{onClick:d,isDisabled:!Boolean(i?.gt(0)&&l),children:"Teleport"}):(0,m.jsx)(F.z,{type:"submit",onClick:()=>u(),children:"Connect Wallet"})]})]})},wn=()=>{const[e,t]=(0,n.useState)((0,Se.wei)(0)),[r,a]=(0,n.useState)(!1),{activeWallet:i}=(0,q.Os)(),{network:o,setNetwork:l}=(0,q.LN)(),[s,c]=(0,n.useState)(),{data:d}=(0,Re.a)(),{data:h}=(0,dr.mM)(d?.address),{data:u}=(0,Re.f)(s),{data:x}=(0,dr.sR)(u?.address,s);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(jn,{connectedWallet:i?.address,activeNetwork:o,balance:h,amount:e,setAmount:t,toNetwork:s,setToNetwork:c,setActiveNetwork:l,toNetworkBalance:s?x:void 0,usdProxyAddress:d?.address,onTeleportClick:()=>a(!0)}),s&&(0,m.jsx)(yn,{isOpen:r,onClose:()=>{a(!1),t((0,Se.wei)(0))},toNetworkId:s.id,toNetworkName:s.name,amount:e})]})};var Cn=r(68588);const vn=()=>{const{t:e}=(0,Cn.$G)();return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(je.Z,{children:(0,m.jsx)("title",{children:e("not-found.page-title")})}),(0,m.jsxs)($.k,{height:"100%",direction:"column",position:"relative",alignItems:"center",justifyContent:"center",flex:"1",children:[(0,m.jsx)(et.X,{fontSize:"5xl",children:"Not found"}),(0,m.jsx)(i.rU,{to:"/",children:(0,m.jsx)(I.r,{color:"cyan.500",children:"Return to Home"})})]})]})};var Sn=r(69231);const kn=({symbol:e,width:t=30,height:r=30,...a})=>(0,m.jsx)(Sn.E,{src:`https://synthetixio.github.io/synthetix-assets/collateral/${e.toUpperCase()}.svg`,alt:e,style:{width:t,height:r},...a}),An=({token:e,name:t,walletBalance:r,walletBalance$:a,accountBalance:n,accountBalance$:i,delegatedBalance:o,delegatedBalance$:l,final:s})=>(0,m.jsxs)(at.Tr,{borderBottomWidth:s?"none":"1px",children:[(0,m.jsx)(ct.Td,{border:"none",children:(0,m.jsx)(le.p,{in:!0,children:(0,m.jsxs)($.k,{alignItems:"center",children:[(0,m.jsx)(kn,{symbol:e}),(0,m.jsxs)($.k,{flexDirection:"column",ml:3,children:[(0,m.jsx)(A.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",children:e}),(0,m.jsx)(A.x,{color:"gray.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",children:t})]})]})})}),(0,m.jsx)(ct.Td,{border:"none",children:(0,m.jsx)(le.p,{in:!0,children:(0,m.jsxs)($.k,{flexDirection:"column",alignItems:"flex-end",children:[(0,m.jsxs)(A.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",children:["$",a]}),(0,m.jsxs)(A.x,{color:"gray.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",children:[r,` ${e}`]})]})})}),(0,m.jsx)(ct.Td,{border:"none",children:(0,m.jsx)(le.p,{in:!0,children:(0,m.jsxs)($.k,{flexDirection:"column",alignItems:"flex-end",children:[(0,m.jsxs)(A.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",children:["$",i]}),(0,m.jsxs)(A.x,{color:"gray.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",children:[n,` ${e}`]})]})})}),(0,m.jsx)(ct.Td,{border:"none",children:(0,m.jsx)(le.p,{in:!0,children:(0,m.jsxs)($.k,{flexDirection:"column",alignItems:"flex-end",children:[(0,m.jsxs)(A.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",children:["$",l]}),(0,m.jsxs)(A.x,{color:"gray.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",children:[o,` ${e}`]})]})})}),(0,m.jsx)(ct.Td,{border:"none",children:(0,m.jsx)(le.p,{in:!0,children:(0,m.jsx)($.k,{flexDirection:"column",children:(0,m.jsx)(F.z,{variant:"unstyled",fontSize:"0.75rem",lineHeight:"1rem",height:"1.75rem",fontWeight:700,borderWidth:"1px",borderColor:"gray.900",borderRadius:"4px",_hover:{bg:"gray.900"},children:"Withdraw"})})})})]}),Tn=()=>(0,m.jsx)(rt.h,{children:(0,m.jsxs)(at.Tr,{children:[(0,m.jsx)(nt.Th,{py:5,textTransform:"unset",color:"gray.600",border:"none",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",children:"Asset"}),(0,m.jsx)(nt.Th,{border:"none",textTransform:"unset",py:5,children:(0,m.jsxs)($.k,{justifyContent:"flex-end",alignItems:"center",children:[(0,m.jsxs)(A.x,{color:"gray.600",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",mr:1,children:["Wallet Balance"," "]}),(0,m.jsx)(dt.u,{label:"Assets currently in your wallet that can be deposited to your Synthetix Account, and utilized as collateral by delegating them to a pool",children:(0,m.jsx)(Hr.s,{w:"12px",h:"12px"})})]})}),(0,m.jsx)(nt.Th,{border:"none",textTransform:"unset",py:5,children:(0,m.jsxs)($.k,{justifyContent:"flex-end",alignItems:"center",children:[(0,m.jsx)(A.x,{color:"gray.600",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",mr:1,children:"Account Balance"}),(0,m.jsx)(dt.u,{label:"Assets deposited in your account. These assets are available to be delegated to a pool",children:(0,m.jsx)(Hr.s,{w:"12px",h:"12px"})})]})}),(0,m.jsx)(nt.Th,{border:"none",textTransform:"unset",py:5,children:(0,m.jsxs)($.k,{justifyContent:"flex-end",alignItems:"center",children:[(0,m.jsx)(A.x,{color:"gray.600",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",mr:1,children:"Delegated"}),(0,m.jsx)(dt.u,{label:"Assets used as collateral in a Position",children:(0,m.jsx)(Hr.s,{w:"12px",h:"12px"})})]})}),(0,m.jsx)(nt.Th,{py:5,textTransform:"unset",color:"gray.600",border:"none",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",children:" "})]})}),Dn=[{token:"SNX",name:"Synthetix",walletBalance:2e3,walletBalance$:8e3,accountBalance:500,accountBalance$:2e3,delegatedBalance:10,delegatedBalance$:40},{token:"ETH",name:"Ethirium",walletBalance:.5,walletBalance$:500,accountBalance:1,accountBalance$:1e3,delegatedBalance:.1,delegatedBalance$:100},{token:"sUSD",name:"Synthetic USD",walletBalance:4e3,walletBalance$:4e3,accountBalance:2e3,accountBalance$:2e3,delegatedBalance:1e3,delegatedBalance$:1e3},{token:"USDC",name:"sUSDC",walletBalance:1e4,walletBalance$:1e4,accountBalance:6e3,accountBalance$:6e3,delegatedBalance:1e3,delegatedBalance$:1e3}],In=({isLoading:e})=>{const{network:t}=(0,q.LN)();return(0,m.jsxs)(Vr.x,{maxW:"100%",mt:4,borderColor:"gray.900",borderWidth:"1px",borderRadius:"5px",p:6,sx:{borderCollapse:"separate !important",borderSpacing:0},bg:"navy.700",children:[(0,m.jsxs)($.k,{alignItems:"center",children:[(0,m.jsx)(et.X,{fontSize:"18px",fontWeight:700,lineHeight:"28px",color:"gray.50",children:"Assets"}),(0,m.jsx)(dt.u,{label:t?.name&&`Collateral types configured for ${t?.name}`,children:(0,m.jsx)(Hr.s,{w:"12px",h:"12px",ml:2})})]}),(0,m.jsxs)(tt.i,{variant:"simple",children:[(0,m.jsx)(Tn,{}),(0,m.jsxs)(it.p,{children:[(0,m.jsxs)(at.Tr,{border:"none",borderTop:"1px",borderTopColor:"gray.900",width:"100%",height:"0px",children:[(0,m.jsx)(ct.Td,{height:"0px",border:"none",px:0,pt:0,pb:5}),(0,m.jsx)(ct.Td,{height:"0px",border:"none",px:0,pt:0,pb:5}),(0,m.jsx)(ct.Td,{height:"0px",border:"none",px:0,pt:0,pb:5}),(0,m.jsx)(ct.Td,{height:"0px",border:"none",px:0,pt:0,pb:5}),(0,m.jsx)(ct.Td,{height:"0px",border:"none",px:0,pt:0,pb:5})]}),e?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(zn,{}),(0,m.jsx)(zn,{})]}):(0,m.jsx)(m.Fragment,{children:Dn.map((({token:e,name:t,accountBalance:r,accountBalance$:a,delegatedBalance:n,delegatedBalance$:i,walletBalance:o,walletBalance$:l},s)=>(0,m.jsx)(An,{token:e,name:t,walletBalance:o,walletBalance$:l,accountBalance:r,accountBalance$:a,delegatedBalance:n,delegatedBalance$:i,final:s===Dn.length-1},e)))})]})]})]})},Fn=({children:e,...t})=>(0,m.jsx)(oe.O,{startColor:"gray.700",endColor:"navy.800",...t,children:e}),Ln=({children:e,...t})=>(0,m.jsx)(pt.s,{startColor:"gray.700",endColor:"navy.800",...t,children:e}),zn=()=>(0,m.jsxs)(at.Tr,{borderBottomWidth:"1px",children:[(0,m.jsx)(ct.Td,{border:"none",children:(0,m.jsxs)($.k,{alignItems:"center",children:[(0,m.jsx)(Ln,{children:(0,m.jsx)(kn,{symbol:"SNX"})}),(0,m.jsxs)($.k,{flexDirection:"column",ml:3,children:[(0,m.jsx)(Fn,{height:"1rem",width:"40%",mb:1,children:(0,m.jsx)(A.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",children:"SNX"})}),(0,m.jsx)(Fn,{height:"0.75rem",width:"70%",children:(0,m.jsx)(A.x,{color:"gray.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",children:"Synthetix Network Token"})})]})]})}),(0,m.jsx)(ct.Td,{border:"none",children:(0,m.jsxs)($.k,{flexDirection:"column",alignItems:"flex-end",children:[(0,m.jsx)(Fn,{height:"1rem",width:"40%",mb:1,children:(0,m.jsx)(A.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",children:"$1,500.00"})}),(0,m.jsx)(Fn,{height:"0.75rem",width:"70%",children:(0,m.jsx)(A.x,{color:"gray.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",children:"750.00 SNX"})})]})}),(0,m.jsx)(ct.Td,{border:"none",children:(0,m.jsxs)($.k,{flexDirection:"column",alignItems:"flex-end",children:[(0,m.jsx)(Fn,{height:"1rem",width:"40%",mb:1,children:(0,m.jsx)(A.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",children:"$2,000.00"})}),(0,m.jsx)(Fn,{height:"0.75rem",width:"70%",children:(0,m.jsx)(A.x,{color:"gray.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",children:"1,000.00 SNX"})})]})}),(0,m.jsx)(ct.Td,{border:"none",children:(0,m.jsxs)($.k,{flexDirection:"column",alignItems:"flex-end",children:[(0,m.jsx)(Fn,{height:"1rem",width:"40%",mb:1,children:(0,m.jsx)(A.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",children:"$2,000.00"})}),(0,m.jsx)(Fn,{height:"0.75rem",width:"70%",children:(0,m.jsx)(A.x,{color:"gray.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",children:"1,000.00 SNX"})})]})}),(0,m.jsx)(ct.Td,{border:"none",children:(0,m.jsx)($.k,{flexDirection:"column",children:(0,m.jsx)(F.z,{variant:"unstyled",fontSize:"0.75rem",lineHeight:"1rem",height:"1.75rem",fontWeight:700,borderWidth:"1px",borderColor:"gray.900",borderRadius:"4px",disabled:!0,children:"Withdraw"})})})]}),Mn=()=>{const[e,t]=(0,n.useState)(!0);return(0,n.useEffect)((()=>{setTimeout((()=>{t(!1)}),5e3)}),[]),(0,m.jsx)(In,{isLoading:e})},$n=({isLoading:e,title:t,label:r,value:a})=>(0,m.jsxs)($.k,{bg:"navy.700",border:"1px solid",borderColor:"gray.900",rounded:"base",flexDir:"column",alignItems:"center",justifyContent:"space-between",w:"297px",height:"88px",px:6,py:4,children:[(0,m.jsxs)($.k,{alignItems:"center",mb:1,children:[(0,m.jsx)(A.x,{fontSize:"14px",color:"gray.500",mr:1,children:t}),r&&(0,m.jsx)(dt.u,{label:r,p:2,mt:1,children:(0,m.jsx)(Hr.s,{w:"10px",h:"10px"})})]}),(0,m.jsx)($.k,{w:"100%",justifyContent:"center",height:"36px",alignItems:"center",children:(0,m.jsx)(Fn,{isLoaded:!e,height:"24px",minWidth:e?"40%":"initial",startColor:"gray.700",endColor:"navy.800",children:(0,m.jsx)(le.p,{in:!0,children:(0,m.jsx)(A.x,{fontSize:"24px",lineHeight:"24px",fontWeight:800,children:a||"Place"})})})})]});function En({symbol:e,token:t,name:r,delegated$:a,delegated:n,apy:i,pnl:o,pnlPercentage:l,borrowed:s,borrowed$:c,debt:d,cRatio:h,final:u}){return(0,m.jsxs)(at.Tr,{borderBottomWidth:u?"none":"1px",children:[(0,m.jsx)(ct.Td,{border:"none",children:(0,m.jsx)(le.p,{in:!0,children:(0,m.jsxs)($.k,{alignItems:"center",children:[(0,m.jsx)(kn,{symbol:e}),(0,m.jsxs)($.k,{flexDirection:"column",ml:3,children:[(0,m.jsx)(A.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",children:t}),(0,m.jsx)(A.x,{color:"gray.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",children:r})]})]})})}),(0,m.jsx)(ct.Td,{border:"none",children:(0,m.jsx)(le.p,{in:!0,children:(0,m.jsxs)($.k,{flexDirection:"column",alignItems:"flex-end",children:[(0,m.jsxs)(A.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",children:["$",a.toNumber().toLocaleString()]}),(0,m.jsxs)(A.x,{color:"gray.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",children:[n.toNumber(),` ${t}`]})]})})}),(0,m.jsx)(ct.Td,{border:"none",children:(0,m.jsx)(le.p,{in:!0,children:(0,m.jsx)($.k,{flexDirection:"column",alignItems:"flex-end",children:(0,m.jsxs)(A.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",children:[i,"%"]})})})}),(0,m.jsx)(ct.Td,{border:"none",children:(0,m.jsx)(le.p,{in:!0,children:(0,m.jsxs)($.k,{flexDirection:"column",alignItems:"flex-end",children:[(0,m.jsxs)(A.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",children:["$",o.toLocaleString("us-EN")]}),(0,m.jsxs)(A.x,{color:"gray.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",children:[l,"%"]})]})})}),(0,m.jsx)(ct.Td,{border:"none",children:(0,m.jsx)(le.p,{in:!0,children:(0,m.jsxs)($.k,{flexDirection:"column",alignItems:"flex-end",children:[(0,m.jsx)(A.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",children:c.eq(0)?"N/A":`$${c.toNumber().toLocaleString()}`}),(0,m.jsxs)(A.x,{color:"gray.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",children:[s.toNumber()," ",t]})]})})}),(0,m.jsx)(ct.Td,{border:"none",children:(0,m.jsx)(le.p,{in:!0,children:(0,m.jsxs)($.k,{flexDirection:"column",alignItems:"flex-end",children:[(0,m.jsx)(A.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",children:d.toNumber().toLocaleString()}),(0,m.jsx)(A.x,{color:"cyan.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",children:d.gt(0)?"Repay Debt":"Claim Credit"})]})})}),(0,m.jsx)(ct.Td,{border:"none",children:(0,m.jsx)(le.p,{in:!0,children:(0,m.jsxs)($.k,{flexDirection:"column",alignItems:"flex-end",children:[(0,m.jsxs)(A.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",children:[h===1/0?"Infinite":h,"%"]}),(0,m.jsx)(Cr.C,{colorScheme:"green",border:"1px solid",bg:"green.900",children:"HEALTHY"})]})})}),(0,m.jsx)(ct.Td,{border:"none",children:(0,m.jsx)($.k,{flexDirection:"column",children:(0,m.jsx)(F.z,{fontSize:"0.75rem",lineHeight:"1rem",height:"1.75rem",fontWeight:700,borderWidth:"1px",borderColor:"gray.900",borderRadius:"4px",children:"Manage"})})})]})}function Nn(){return(0,m.jsxs)(at.Tr,{borderBottomWidth:"1px",children:[(0,m.jsx)(ct.Td,{border:"none",children:(0,m.jsxs)($.k,{alignItems:"center",children:[(0,m.jsx)(Ln,{children:(0,m.jsx)(kn,{symbol:"SNX"})}),(0,m.jsxs)($.k,{flexDirection:"column",ml:3,children:[(0,m.jsx)(Fn,{height:"1rem",mb:1,width:"70%",children:(0,m.jsx)(A.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",children:"sUSDC"})}),(0,m.jsx)(Fn,{height:"0.75rem",children:(0,m.jsx)(A.x,{color:"gray.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",children:"Synthetic USDC"})})]})]})}),(0,m.jsx)(ct.Td,{border:"none",children:(0,m.jsxs)($.k,{flexDirection:"column",alignItems:"flex-end",children:[(0,m.jsx)(Fn,{height:"1rem",mb:1,children:(0,m.jsx)(A.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",children:"$100,000,00"})}),(0,m.jsx)(Fn,{height:"0.75rem",children:(0,m.jsx)(A.x,{color:"gray.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",children:"100,000 SNX"})})]})}),(0,m.jsx)(ct.Td,{border:"none",children:(0,m.jsx)($.k,{flexDirection:"column",alignItems:"flex-end",children:(0,m.jsx)(Fn,{height:"1rem",width:"80%",children:(0,m.jsx)(A.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",children:"15%"})})})}),(0,m.jsx)(ct.Td,{border:"none",children:(0,m.jsxs)($.k,{flexDirection:"column",alignItems:"flex-end",children:[(0,m.jsx)(Fn,{height:"1rem",mb:1,children:(0,m.jsx)(A.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",children:"$5,000"})}),(0,m.jsx)(Fn,{height:"0.75rem",children:(0,m.jsx)(A.x,{color:"gray.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",children:"22%"})})]})}),(0,m.jsx)(ct.Td,{border:"none",children:(0,m.jsxs)($.k,{flexDirection:"column",alignItems:"flex-end",children:[(0,m.jsx)(Fn,{height:"1rem",mb:1,children:(0,m.jsx)(A.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",children:"$100,000"})}),(0,m.jsx)(Fn,{height:"0.75rem",children:(0,m.jsx)(A.x,{color:"gray.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",children:"200 SNX"})})]})}),(0,m.jsx)(ct.Td,{border:"none",children:(0,m.jsxs)($.k,{flexDirection:"column",alignItems:"flex-end",children:[(0,m.jsx)(Fn,{height:"1rem",mb:1,width:"70%",children:(0,m.jsx)(A.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",children:"$20,000"})}),(0,m.jsx)(Fn,{height:"0.75rem",children:(0,m.jsx)(A.x,{color:"cyan.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",children:"Claim Credit"})})]})}),(0,m.jsx)(ct.Td,{border:"none",children:(0,m.jsxs)($.k,{flexDirection:"column",alignItems:"flex-end",children:[(0,m.jsx)(Fn,{height:"1rem",mb:1,children:(0,m.jsx)(A.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",children:"5000%"})}),(0,m.jsx)(Fn,{height:"0.75rem",children:(0,m.jsx)(Cr.C,{colorScheme:"green",border:"1px solid",bg:"green.900",children:"HEALTHY"})})]})}),(0,m.jsx)(ct.Td,{border:"none",children:(0,m.jsx)($.k,{flexDirection:"column",children:(0,m.jsx)(F.z,{fontSize:"0.75rem",lineHeight:"1rem",height:"1.75rem",fontWeight:700,borderWidth:"1px",borderColor:"gray.900",borderRadius:"4px",disabled:!0,children:"Manage"})})})]})}function Bn(){return(0,m.jsx)(rt.h,{children:(0,m.jsxs)(at.Tr,{children:[(0,m.jsx)(nt.Th,{py:5,textTransform:"unset",color:"gray.600",border:"none",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",children:"Collateral"}),(0,m.jsx)(nt.Th,{border:"none",textTransform:"unset",py:5,children:(0,m.jsxs)($.k,{justifyContent:"flex-end",alignItems:"center",children:[(0,m.jsx)(A.x,{color:"gray.600",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",mr:1,children:"Delegated"}),(0,m.jsx)(dt.u,{label:"???",children:(0,m.jsx)(Hr.s,{w:"12px",h:"12px"})})]})}),(0,m.jsx)(nt.Th,{border:"none",textTransform:"unset",py:5,children:(0,m.jsxs)($.k,{justifyContent:"flex-end",alignItems:"center",children:[(0,m.jsx)(A.x,{color:"gray.600",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",mr:1,children:"APR"}),(0,m.jsx)(dt.u,{label:"???",children:(0,m.jsx)(Hr.s,{w:"12px",h:"12px"})})]})}),(0,m.jsx)(nt.Th,{border:"none",textTransform:"unset",py:5,children:(0,m.jsxs)($.k,{justifyContent:"flex-end",alignItems:"center",children:[(0,m.jsx)(A.x,{color:"gray.600",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",mr:1,children:"Pool PNL"}),(0,m.jsx)(dt.u,{label:"???",children:(0,m.jsx)(Hr.s,{w:"12px",h:"12px"})})]})}),(0,m.jsx)(nt.Th,{border:"none",textTransform:"unset",py:5,children:(0,m.jsxs)($.k,{justifyContent:"flex-end",alignItems:"center",children:[(0,m.jsx)(A.x,{color:"gray.600",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",mr:1,children:"Borrowed"}),(0,m.jsx)(dt.u,{label:"???",children:(0,m.jsx)(Hr.s,{w:"12px",h:"12px"})})]})}),(0,m.jsx)(nt.Th,{border:"none",textTransform:"unset",py:5,children:(0,m.jsxs)($.k,{justifyContent:"flex-end",alignItems:"center",children:[(0,m.jsx)(A.x,{color:"gray.600",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",mr:1,children:"Debt"}),(0,m.jsx)(dt.u,{label:"???",children:(0,m.jsx)(Hr.s,{w:"12px",h:"12px"})})]})}),(0,m.jsx)(nt.Th,{border:"none",textTransform:"unset",py:5,children:(0,m.jsxs)($.k,{justifyContent:"flex-end",alignItems:"center",children:[(0,m.jsx)(A.x,{color:"gray.600",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",mr:1,children:"C-Ratio"}),(0,m.jsx)(dt.u,{label:"???",children:(0,m.jsx)(Hr.s,{w:"12px",h:"12px"})})]})}),(0,m.jsx)(nt.Th,{py:5,textTransform:"unset",color:"gray.600",border:"none",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",children:" "})]})})}const Pn=[{token:"sUSDC",symbol:"USDC",name:"Synthetic USDC",delegated$:new(ke())(1e3),delegated:new(ke())(1e3),apy:16.4,pnl:500,pnlPercentage:-25.04,borrowed:new(ke())(0),borrowed$:new(ke())(0),debt:new(ke())(2e3),cRatio:1/0},{token:"ETH",symbol:"ETH",name:"Synthetic ETH",delegated$:new(ke())(10),delegated:new(ke())(12),apy:19.4,pnl:1500,pnlPercentage:25.04,borrowed:new(ke())(100),borrowed$:new(ke())(1002),debt:new(ke())(-420),cRatio:200}],Hn=({isLoading:e})=>(0,m.jsxs)(Vr.x,{maxW:"100%",mt:4,borderColor:"gray.900",borderWidth:"1px",borderRadius:"5px",p:6,sx:{borderCollapse:"separate !important",borderSpacing:0},bg:"navy.700",children:[(0,m.jsxs)($.k,{alignItems:"center",justifyContent:"space-between",children:[(0,m.jsx)(et.X,{fontSize:"18px",fontWeight:700,lineHeight:"28px",color:"gray.50",children:"Spartan Council Pool"}),(0,m.jsx)(le.p,{in:!0,children:(0,m.jsx)(F.z,{as:i.rU,mt:{base:2,md:0},size:"sm",to:{pathname:(0,se.Gn)("/pools/:poolId",{poolId:"1"}),search:location.search},variant:"outline",children:"Pool Info"})})]}),(0,m.jsxs)(tt.i,{variant:"simple",children:[(0,m.jsx)(Bn,{}),(0,m.jsxs)(it.p,{children:[(0,m.jsxs)(at.Tr,{border:"none",borderTop:"1px",borderTopColor:"gray.900",width:"100%",height:"0px",children:[(0,m.jsx)(ct.Td,{height:"0px",border:"none",px:0,pt:0,pb:4}),(0,m.jsx)(ct.Td,{height:"0px",border:"none",px:0,pt:0,pb:4}),(0,m.jsx)(ct.Td,{height:"0px",border:"none",px:0,pt:0,pb:4}),(0,m.jsx)(ct.Td,{height:"0px",border:"none",px:0,pt:0,pb:4}),(0,m.jsx)(ct.Td,{height:"0px",border:"none",px:0,pt:0,pb:4}),(0,m.jsx)(ct.Td,{height:"0px",border:"none",px:0,pt:0,pb:4}),(0,m.jsx)(ct.Td,{height:"0px",border:"none",px:0,pt:0,pb:4}),(0,m.jsx)(ct.Td,{height:"0px",border:"none",px:0,pt:0,pb:4})]}),e?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Nn,{}),(0,m.jsx)(Nn,{})]}):(0,m.jsx)(m.Fragment,{children:Pn.map(((e,t)=>(0,m.jsx)(En,{...e,final:t===Pn.length-1},e.token.concat(t.toString()))))})]})]})]}),On=()=>{const[e,t]=(0,n.useState)(!0);return(0,n.useEffect)((()=>{setTimeout((()=>{t(!1)}),5e3)}),[]),(0,m.jsxs)($.k,{flexDir:"column",children:[(0,m.jsx)(et.X,{fontSize:"1.25rem",fontFamily:"heading",lineHeight:"1.75rem",mt:4,children:"Positions"}),(0,m.jsx)(Hn,{isLoading:e})]})};function Rn(){const[e]=(0,i.lr)(),{data:t,isLoading:r}=Ge({accountId:e.get("accountId")||""}),a=t&&Object.values(t).reduce(((e,t)=>e.add(t.debt)),new(ke())(0));return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(je.q,{children:[(0,m.jsx)("title",{children:"Synthetix V3 - Dashboard"}),(0,m.jsx)("meta",{name:"description",content:"Synthetix V3 - Dashboard"})]}),(0,m.jsxs)($.k,{flexDir:"column",children:[(0,m.jsx)(et.X,{color:"gray.50",fontSize:"1.5rem",children:"Dashboard"}),(0,m.jsxs)($.k,{w:"100%",gap:"4",mt:6,children:[(0,m.jsx)($n,{title:"Total Assets",isLoading:!0,value:"TODO",label:"All assets in your Wallet and in your Synthetix Account."}),(0,m.jsx)($n,{title:"Total Delegated",isLoading:!1,value:"TODO",label:"All assets in your Account that have been Delegated to a Pool."}),(0,m.jsx)($n,{title:"Total Debt",isLoading:r,value:a?.toNumber().toFixed(2)||"0",label:"Aggregated Debt of all your Open Positions."}),(0,m.jsx)($n,{title:"APR",isLoading:!1,value:"14%",label:"Aggregated APR from all your positions."})]}),(0,m.jsx)(Mn,{}),(0,m.jsx)(On,{})]})]})}function Un(){const{data:e}=(0,Ce.Oh)();return(0,m.jsxs)($.k,{flexDir:"column",children:[(0,m.jsx)(et.X,{children:"All Pools"}),(0,m.jsxs)($.k,{gap:"4",flexWrap:e&&e.length>1?"wrap":"nowrap",children:[e?.map((t=>(0,m.jsxs)($.k,{flexDir:"column",w:"100%",border:"1px solid",borderColor:"gray.900",rounded:"base",bg:"navy.700",p:"6",maxW:e.length>1?"488px":"unset",children:[(0,m.jsxs)($.k,{w:"100%",alignItems:"center",justifyContent:"space-between",mb:4,children:[(0,m.jsx)(A.x,{fontSize:"16px",fontWeight:700,color:"white",children:t.name}),(0,m.jsx)(F.z,{variant:"outline",colorScheme:"gray",color:"white",children:"Pool Details"})]}),(0,m.jsx)(Xt.i,{}),(0,m.jsxs)($.k,{w:"100%",h:"164px",alignItems:"center",gap:"4",children:[(0,m.jsxs)($.k,{flexDir:"column",children:[(0,m.jsxs)(A.x,{fontSize:"12px",color:"gray.600",children:["TVL"," ",(0,m.jsx)(dt.u,{label:"???",children:(0,m.jsx)(Hr.s,{w:"12px",h:"12px"})})]}),(0,m.jsx)(A.x,{fontWeight:700,fontSize:"30px",color:"white",children:"TODO"})]}),(0,m.jsxs)($.k,{flexDir:"column",mr:"auto",children:[(0,m.jsxs)(A.x,{fontSize:"12px",color:"gray.600",children:["APR"," ",(0,m.jsx)(dt.u,{label:"???",children:(0,m.jsx)(Hr.s,{w:"12px",h:"12px"})})]}),(0,m.jsx)(A.x,{fontWeight:700,fontSize:"30px",color:"white",children:"TODO"})]}),(0,m.jsx)(Sn.E,{src:"/pools.svg",mr:"50%",mb:4})]}),(0,m.jsx)(Xt.i,{}),(0,m.jsxs)($.k,{mt:4,children:[(0,m.jsx)(kn,{symbol:"USDC"}),(0,m.jsxs)($.k,{flexDirection:"column",ml:3,mr:"auto",children:[(0,m.jsx)(A.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",children:"sUSDC"}),(0,m.jsx)(A.x,{color:"gray.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",children:"Synthetix USDC"})]}),(0,m.jsx)(F.z,{children:"Deposit"})]})]},t.id))),(0,m.jsxs)($.k,{flexDir:"column",w:"100%",border:"1px solid",borderColor:"gray.900",rounded:"base",bg:"navy.700",p:6,shrink:2,children:[(0,m.jsx)(Sn.E,{src:"/op.svg",w:"66px",height:"66px",mb:6}),(0,m.jsx)(A.x,{fontWeight:700,fontSize:"14px",color:"white",children:"10x Cost Effective on Gas Fees"}),(0,m.jsx)(A.x,{fontSize:"12px",color:"gray.600",mb:"auto",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}),(0,m.jsxs)($.k,{justifyContent:"flex-end",gap:4,my:6,children:[(0,m.jsx)(F.z,{variant:"outline",colorScheme:"gray",color:"white",children:"Bridge Asset"}),(0,m.jsx)(F.z,{variant:"outline",colorScheme:"gray",color:"white",children:"Switch to Optimism"})]})]})]})]})}const Wn=()=>(0,m.jsx)(n.Suspense,{fallback:(0,m.jsx)(M.$,{}),children:(0,m.jsx)(z.Z5,{children:(0,m.jsxs)(z.AW,{element:(0,m.jsx)(be,{}),children:[(0,m.jsx)(z.AW,{path:"/positions/:collateralSymbol/:poolId",element:(0,m.jsx)(ba,{})}),(0,m.jsx)(z.AW,{path:"/deposit/:collateralSymbol/:poolId",element:(0,m.jsx)(Ia,{})}),(0,m.jsx)(z.AW,{path:"/dashboard/positions",element:(0,m.jsx)(Rn,{})}),(0,m.jsx)(z.AW,{path:"/pools",element:(0,m.jsx)(Un,{})}),(0,m.jsx)(z.AW,{path:"/pools/:poolId",element:(0,m.jsx)(Ua,{})}),(0,m.jsx)(z.AW,{path:"/teleporter",element:(0,m.jsx)(wn,{})}),(0,m.jsx)(z.AW,{path:"/playground",element:(0,m.jsx)(Ga,{})}),(0,m.jsx)(z.AW,{path:"/",element:(0,m.jsx)(Kt,{})}),(0,m.jsx)(z.AW,{path:"*",element:(0,m.jsx)(vn,{})})]})})});var qn=r(24991);const _n=JSON.parse('{"common":{"learnMore":"Learn more","none":"None","fund":"Fund","connectWallet":"Connect Wallet","unknownFund":"Unknown Fund","deposit":"Deposit","insufficientFunds":"Insufficient Funds","name":"Name","ticker":"Ticker","category":"Category","fees":"Fees","verified":"Verified","crypto":"Crypto","price":"Price"},"home":{"createAccount":{"description":"Deposit with Synthetix to back synthetic assets on-chain. You can earn yield but must maintain your collateralization ratio."},"deposit":{"selectFund":"Select Fund","receiveToken":"Receive an snxAccount token","receiveTokenTooltip":"You will be minted an NFT that represents your account. You can easily transfer it between wallets."}},"synths":{"createSynth":{"title":"Create a Synth","deploySynth":"Deploy a New Synth","iconURI":"Icon URI","priceFeedAddress":"Price Feed Contract Address","priceFeedAddressHelp":"This contract must implement the Synthetix Price Feed Interface. <0>Review the documentation</0>","cta":"Create Synth","feesInfo":"No fees will be applied when this synth is minted or burned.","addFee":"Add a Fee","flat":"Flat","dynamicExchange":"Dynamic Exchange","simulatedLiquidity":"Simulated Liquidity","custom":"Custom"},"synth":{"title":"Synth","description":"Synth"}},"position":{"manage":{"maintain":"Maintain C-Ratio","borrow":"Borrow snxUSD","repay":"Repay snxUSD","custom":"Custom"}},"not-found":{"page-title":"Not Found | Synthetix Depositing","title":"404","subtitle":"Page not found"}}');qn.ZP.use(Cn.Db).init({supportedLngs:["en"],lng:"en",fallbackLng:"en",ns:["common"],defaultNS:"common",interpolation:{escapeValue:!1},react:{useSuspense:!1},resources:{en:{translation:_n}}});const Vn=new y.QueryClient({defaultOptions:{queries:{refetchInterval:!1,staleTime:g.yq,refetchOnWindowFocus:!1}}});function Zn(){const{colorMode:e,toggleColorMode:t}=(0,o.If)();return(0,n.useEffect)((()=>{"light"===e&&t()}),[e,t]),null}const Gn=()=>{const e="true"===sessionStorage.getItem(g.sO.TERMS_CONDITIONS_ACCEPTED);return(0,m.jsx)(y.QueryClientProvider,{client:Vn,children:(0,m.jsx)(K.jA,{web3Onboard:ee,children:(0,m.jsxs)(l.x,{theme:x,children:[(0,m.jsx)(Zn,{}),(0,m.jsx)(f,{}),(0,m.jsx)(j.G2,{children:(0,m.jsxs)(i.UT,{children:[(0,m.jsx)(L,{defaultOpen:!e}),(0,m.jsx)(Wn,{})]})}),(0,m.jsx)(b.t,{})]})})})},Qn=document.querySelector("#app");async function Yn(){if(!Qn)throw new Error("Container #app does not exist");a.createRoot(Qn).render((0,m.jsx)(Gn,{}))}},95509:(e,t,r)=>{const{safeLazy:a}=r(97551),{safeImport:n}=r(16577);e.exports={safeLazy:a,safeImport:n}},97551:(e,t,r)=>{const{lazy:a}=r(2784),{safeImport:n}=r(16577);e.exports={safeLazy:function(e){return a((()=>n(e)))}}},33196:()=>{}}]);
//# sourceMappingURL=app.5f3d7a4f.js.map