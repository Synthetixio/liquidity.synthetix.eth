(globalThis.webpackChunk_snx_v3_liquidity=globalThis.webpackChunk_snx_v3_liquidity||[]).push([[2143],{42219:(e,t,n)=>{"use strict";n.d(t,{VP:()=>c,LL:()=>d,D6:()=>l,yq:()=>u,lm:()=>x,dA:()=>i,sc:()=>w,sO:()=>m,GH:()=>s,Ko:()=>p,Q4:()=>h,kw:()=>g,DM:()=>f,mF:()=>y});var a=n(79929),r=n.n(a),o=n(49494);const i={SHOW_TESTNETS:"SHOW_TESTNETS"},s=new(r())(0),l=o.parseUnits("1",6),c=o.parseUnits("1",18),d=o.parseUnits("1",27),u=3e5,x="8678fe160b1f4d45ad3f3f71502fc57b",h=(e="optimism-mainnet")=>{switch(e){case"mainnet":return"https://subgraph.satsuma-prod.com/ce5e03f52f3b/synthetix/synthetix-mainnet/api";case"sepolia":return"https://subgraph.satsuma-prod.com/ce5e03f52f3b/synthetix/synthetix-sepolia/api";case"optimism-mainnet":return"https://subgraph.satsuma-prod.com/ce5e03f52f3b/synthetix/synthetix-optimism-mainnet/api";case"arbitrum":return"https://subgraph.satsuma-prod.com/ce5e03f52f3b/synthetix/synthetix-arbitrum-mainnet/api";case"base-sepolia":return"https://subgraph.satsuma-prod.com/ce5e03f52f3b/synthetix/synthetix-base-sepolia-andromeda/api";case"base":return"https://subgraph.satsuma-prod.com/ce5e03f52f3b/synthetix/synthetix-base-mainnet-andromeda/api";default:return`https://subgraph.satsuma-prod.com/ce5e03f52f3b/synthetix/synthetix-${e}/api`}},p=(e=8453)=>{switch(e){case 1:return"https://api.synthetix.io/v3/mainnet/sc-pool-apy-all";case 8453:default:return"https://api.synthetix.io/v3/base/sc-pool-apy-all";case 42161:return"https://api.synthetix.io/v3/arbitrum/sc-pool-apy-all"}},m={TERMS_CONDITIONS_ACCEPTED:"TERMS_CONDITIONS_ACCEPTED"},g="https://hermes-mainnet.rpc.extrnode.com/9b85d7db-f562-48e2-ab56-79c01f212582",f="https://hermes-mainnet.rpc.extrnode.com/9b85d7db-f562-48e2-ab56-79c01f212582",y={"8453-andromeda":{"0x4EA71A20e655794051D1eE8b6e4A3269B13ccaCc":{symbol:"stataUSDC",displaySymbol:"Static aUSDC",name:"Static aUSDC"}},"1-main":{"0x10A5F7D9D65bCc2734763444D4940a31b109275f":{symbol:"sUSD",displaySymbol:"V2 sUSD",name:"V2 sUSD"},"0xb2F30A7C980f052f02563fb518dcc39e6bf38175":{symbol:"sUSD",displaySymbol:"V3 sUSD",name:"V3 sUSD"}}},w="1"},83474:(e,t,n)=>{"use strict";async function a(e,t){if(!t)throw new Error("Missing preset");const a=`${Number(e).toFixed(0)}-${t}`;switch(a){case"8453-andromeda":{const[{default:e},{default:t}]=await Promise.all([n.e(6244).then(n.t.bind(n,56244,19)),n.e(1350).then(n.t.bind(n,21350,19))]);return{address:e.contracts.PythERC7412Wrapper,abi:t}}case"84532-andromeda":{const[{default:e},{default:t}]=await Promise.all([n.e(6804).then(n.t.bind(n,96804,19)),n.e(6955).then(n.t.bind(n,36955,19))]);return{address:e.contracts.PythERC7412Wrapper,abi:t}}case"11155111-main":{const[{default:e},{default:t}]=await Promise.all([n.e(3463).then(n.t.bind(n,33463,19)),n.e(440).then(n.t.bind(n,70440,19))]);return{address:e.contracts.PythERC7412Wrapper,abi:t}}case"42161-main":{const[{default:e},{default:t}]=await Promise.all([n.e(8317).then(n.t.bind(n,98317,19)),n.e(5658).then(n.t.bind(n,75658,19))]);return{address:e.contracts.PythERC7412Wrapper,abi:t}}case"421614-main":{const[{default:e},{default:t}]=await Promise.all([n.e(5783).then(n.t.bind(n,15783,19)),n.e(2012).then(n.t.bind(n,82012,19))]);return{address:e.contracts.PythERC7412Wrapper,abi:t}}default:throw new Error(`Unsupported deployment ${a} for PythERC7412Wrapper`)}}n.d(t,{O:()=>a})},40672:(e,t,n)=>{"use strict";n.d(t,{Ri:()=>s,su:()=>p,D7:()=>m,xi:()=>i,Bg:()=>c,ET:()=>f,TR:()=>o,K7:()=>u,PF:()=>l,vK:()=>j,P$:()=>b,o:()=>d,sF:()=>y,b0:()=>g,LK:()=>w});var a=n(62929),r=n(52322);const o=({color:e="#00D1FF",width:t="126px",height:n="22px",withText:o=!0})=>(0,r.jsxs)(a.J,{width:t,height:n,viewBox:"0 0 126 22",fill:"none",color:e,children:[(0,r.jsx)("path",{d:"M7.00677 4.80523C6.804 4.57155 6.55437 4.45443 6.25731 4.45443H0.182051C0.128089 4.45443 0.0839395 4.43722 0.0506907 4.40281C0.0168969 4.36895 0 4.33065 0 4.28957V0.164856C0 0.12378 0.0168969 0.0860357 0.0506907 0.0516214C0.0839395 0.0172071 0.128089 0 0.182051 0H6.60179C8.22171 0 9.61925 0.667193 10.7939 2.00047L12.3533 3.91823L9.31565 7.65107L7.00677 4.80523ZM18.2263 1.97993C19.4009 0.659977 20.805 0 22.4386 0H28.8381C28.8921 0 28.9324 0.0138767 28.9597 0.0410751C28.9864 0.0688286 29 0.109904 29 0.164856V4.28957C29 4.33065 28.9864 4.36895 28.9597 4.40281C28.9324 4.43722 28.8921 4.45443 28.8381 4.45443H22.7629C22.4658 4.45443 22.2162 4.57155 22.0134 4.80523L17.5379 10.291L22.0336 15.8178C22.2363 16.0382 22.4789 16.1481 22.7629 16.1481H28.8381C28.8921 16.1481 28.9324 16.1653 28.9597 16.1997C28.9864 16.2341 29 16.2791 29 16.3335V20.4582C29 20.4993 28.9864 20.5376 28.9597 20.5714C28.9324 20.6058 28.8921 20.623 28.8381 20.623H22.4386C20.805 20.623 19.4075 19.9564 18.2465 18.6226L14.5204 14.0444L10.7939 18.6226C9.61925 19.9564 8.21517 20.623 6.58162 20.623H0.182051C0.128089 20.623 0.0872099 20.6058 0.0605018 20.5714C0.0332488 20.537 0.0201673 20.4926 0.0201673 20.4371V16.3124C0.0201673 16.2713 0.0332488 16.2336 0.0605018 16.1991C0.0872099 16.1647 0.128089 16.1475 0.182051 16.1475H6.25731C6.54074 16.1475 6.79038 16.031 7.00677 15.7967L11.4011 10.3937L18.2263 1.97993Z",fill:"#00D1FF"}),o&&(0,r.jsxs)("g",{children:[(0,r.jsx)("path",{d:"M42.9 3.86001V15.72H51.7V17.86H40.4V3.86001H42.9Z",fill:"white"}),(0,r.jsx)("path",{d:"M53.4645 7.02001H55.7845V17.86H53.4645V7.02001ZM53.4645 3.30001H55.7845V5.62001H53.4645V3.30001Z",fill:"white"}),(0,r.jsx)("path",{d:"M61.0055 7.02001H68.5055V21.78H66.1855V16.38L64.4455 17.86H61.0055C59.4255 17.86 58.1655 16.54 58.1655 15.02V9.86002C58.1655 8.28002 59.4855 7.02001 61.0055 7.02001ZM61.6255 15.86H65.4855C65.8655 15.86 66.1855 15.56 66.1855 15.16V9.04002H61.6255C60.9855 9.04002 60.4655 9.54002 60.4655 10.18V14.7C60.4655 15.36 60.9855 15.86 61.6255 15.86Z",fill:"white"}),(0,r.jsx)("path",{d:"M74.5408 15.86H78.3008C78.6808 15.86 79.0008 15.56 79.0008 15.16V7.02001H81.3208V17.86H79.0008V16.4L77.3208 17.86H73.9008C72.3808 17.86 71.0808 16.6 71.0808 15.02V7.02001H73.3808V14.7C73.3808 15.36 73.8808 15.86 74.5408 15.86Z",fill:"white"}),(0,r.jsx)("path",{d:"M83.9333 7.02001H86.2533V17.86H83.9333V7.02001ZM83.9333 3.30001H86.2533V5.62001H83.9333V3.30001Z",fill:"white"}),(0,r.jsx)("path",{d:"M96.6542 7.02001V3.14001H98.9742V17.86H96.6542V16.38L94.9142 17.86H91.4742C89.8942 17.86 88.6342 16.54 88.6342 15.02V9.86002C88.6342 8.28002 89.9542 7.02001 91.4742 7.02001H96.6542ZM92.0942 15.86H95.9542C96.3342 15.86 96.6542 15.56 96.6542 15.16V9.04002H92.0942C91.4542 9.04002 90.9342 9.54002 90.9342 10.18V14.7C90.9342 15.36 91.4542 15.86 92.0942 15.86Z",fill:"white"}),(0,r.jsx)("path",{d:"M101.59 7.02001H103.91V17.86H101.59V7.02001ZM101.59 3.30001H103.91V5.62001H101.59V3.30001Z",fill:"white"}),(0,r.jsx)("path",{d:"M113.09 15.86V17.86H110.31C108.77 17.86 107.51 16.66 107.51 15.08V9.04002H105.63V7.02001H107.51V4.64002H109.83V7.02001H113.11V9.04002H109.83V14.74C109.83 15.4 110.27 15.86 110.93 15.86H113.09Z",fill:"white"}),(0,r.jsx)("path",{d:"M116.587 21.78L118.747 17.22L113.947 7.02001H116.467L119.947 14.74L123.267 7.02001H125.747L119.067 21.78H116.587Z",fill:"white"})]})]}),i=({width:e="24px",height:t="24px",fill:n="#627EEA",...o})=>(0,r.jsxs)(a.J,{width:e,height:t,viewBox:"0 0 30 30",fill:"none",...o,children:[(0,r.jsx)("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15Z",fill:n}),(0,r.jsx)("path",{d:"M15.467 3.75v8.316l7.028 3.14L15.467 3.75Z",fill:"#fff",fillOpacity:".602"}),(0,r.jsx)("path",{d:"m15.467 3.75-7.03 11.456 7.03-3.14V3.75Z",fill:"#fff"}),(0,r.jsx)("path",{d:"M15.467 20.595v5.65l7.033-9.73-7.033 4.08Z",fill:"#fff",fillOpacity:".602"}),(0,r.jsx)("path",{d:"M15.467 26.245v-5.651l-7.03-4.08 7.03 9.731Z",fill:"#fff"}),(0,r.jsx)("path",{d:"m15.467 19.287 7.028-4.08-7.028-3.14v7.22Z",fill:"#fff",fillOpacity:".2"}),(0,r.jsx)("path",{d:"m8.438 15.206 7.029 4.081v-7.22l-7.03 3.14Z",fill:"#fff",fillOpacity:".602"})]}),s=({width:e="24px",height:t="24px",...n})=>(0,r.jsxs)(a.J,{width:e,height:t,viewBox:"0 0 42 42",...n,children:[(0,r.jsx)("circle",{cx:"21",cy:"21",r:"21",fill:"#2D374B"}),(0,r.jsx)("path",{d:"M25.089 19.4942L27.7327 15.0085L34.8586 26.1072L34.8619 28.2365L34.8386 13.5798C34.8303 13.403 34.7795 13.2308 34.6907 13.0777C34.6018 12.9246 34.4774 12.7952 34.328 12.7003L21.4989 5.32125C21.3456 5.24842 21.1779 5.21102 21.0082 5.21182C20.8386 5.21262 20.6712 5.2516 20.5186 5.32587C20.479 5.34572 20.4407 5.3679 20.4037 5.39231L20.3591 5.42053L7.90602 12.6367L7.85753 12.6585C7.79299 12.6884 7.7314 12.7243 7.67359 12.7657C7.44004 12.9325 7.28088 13.1839 7.23002 13.4664C7.22223 13.5092 7.21692 13.5525 7.21411 13.5959L7.23361 25.5397L13.871 15.2522C14.7066 13.8881 16.5273 13.4487 18.2174 13.4725L20.201 13.5238L8.51275 32.2682L9.89067 33.0614L21.719 13.5426L26.9472 13.5236L15.1494 33.5342L20.0663 36.3639L20.6538 36.7018C20.9073 36.8025 21.1886 36.8081 21.4458 36.7175L34.4553 29.1783L31.9668 30.6196L25.089 19.4942ZM26.0978 34.0217L21.132 26.228L24.1631 21.0845L30.6846 31.3633L26.0978 34.0217Z",fill:"#2D374B"}),(0,r.jsx)("path",{d:"M21.1323 26.228L26.0981 34.0214L30.6851 31.363L24.1639 21.0845L21.1323 26.228Z",fill:"#28A0F0"}),(0,r.jsx)("path",{d:"M34.8623 28.2368L34.859 26.1074L27.7331 15.0087L25.0879 19.4939L31.9669 30.6193L34.4554 29.1781C34.5759 29.0804 34.6745 28.9584 34.7446 28.8201C34.8148 28.6818 34.855 28.5302 34.8626 28.3753L34.8623 28.2368Z",fill:"#28A0F0"}),(0,r.jsx)("path",{d:"M5.00171 30.2455L8.5141 32.2694L20.2024 13.5251L18.2187 13.4738C16.5286 13.4499 14.7079 13.8891 13.8723 15.2534L7.23495 25.541L5.00299 28.9718V30.2466L5.00171 30.2455Z",fill:"white"}),(0,r.jsx)("path",{d:"M26.9474 13.5248L21.7195 13.5438L9.89111 33.0626L14.0254 35.4431L15.1496 33.5362L26.9474 13.5248Z",fill:"white"}),(0,r.jsx)("path",{d:"M37.065 13.4979C37.0411 12.9583 36.8863 12.4327 36.614 11.9664C36.3417 11.5 35.96 11.1068 35.5019 10.8208L22.5047 3.34657C22.0407 3.11856 21.5306 3 21.0137 3C20.4967 3 19.9866 3.11856 19.5226 3.34657C19.4141 3.40121 6.88305 10.6689 6.88305 10.6689C6.70895 10.7525 6.54242 10.8511 6.38535 10.9634C5.97846 11.2528 5.64243 11.6306 5.40249 12.0684C5.16255 12.5063 5.02494 12.9928 5 13.4915V28.971L7.23196 25.5402L7.21477 13.5969C7.22521 13.4332 7.27184 13.2738 7.35129 13.1302C7.43074 12.9867 7.54104 12.8625 7.67424 12.7667C7.73325 12.7244 20.4782 5.34712 20.5188 5.32685C20.6714 5.25259 20.8387 5.21361 21.0084 5.21281C21.1781 5.21201 21.3458 5.24941 21.4991 5.32224L34.3282 12.7018C34.4776 12.7967 34.602 12.9261 34.6908 13.0792C34.7797 13.2323 34.8304 13.4045 34.8387 13.5813V28.3768C34.8356 28.5302 34.7998 28.6812 34.7337 28.8196C34.6675 28.9581 34.5726 29.0808 34.4552 29.1796L31.9667 30.6208L30.684 31.3648L26.0969 34.0232L21.4449 36.7192C21.1877 36.81 20.9064 36.8044 20.653 36.7036L15.1493 33.538L14.0251 35.4447L18.9713 38.2924C19.135 38.3852 19.2807 38.4678 19.4002 38.5351C19.5855 38.6377 19.7117 38.7082 19.7561 38.7298C20.1699 38.9111 20.6173 39.0032 21.0691 38.9999C21.4834 39.0005 21.8942 38.9232 22.28 38.7721L35.7915 30.9474C36.1727 30.6509 36.4843 30.2744 36.7042 29.8445C36.9242 29.4145 37.0471 28.9415 37.0645 28.4589L37.065 13.4979Z",fill:"#96BEDC"})]}),l=({width:e="24px",height:t="24px",color:n="white",fill:o="#FF0420",...i})=>(0,r.jsxs)(a.J,{width:e,height:t,viewBox:"0 0 34 34",...i,children:[(0,r.jsx)("path",{d:"M17 34C26.3888 34 34 26.3888 34 17C34 7.61116 26.3888 0 17 0C7.61116 0 0 7.61116 0 17C0 26.3888 7.61116 34 17 34Z",fill:o}),(0,r.jsx)("path",{d:"M12.3295 21.76C11.3042 21.76 10.4641 21.5131 9.80918 21.0195C9.16298 20.5171 8.83984 19.8031 8.83984 18.8775C8.83984 18.6836 8.8614 18.4456 8.90444 18.1635C9.01651 17.5289 9.1759 16.7664 9.38269 15.8761C9.96858 13.452 11.4808 12.24 13.9193 12.24C14.5828 12.24 15.1773 12.3546 15.7029 12.5838C16.2285 12.8041 16.6421 13.1391 16.9437 13.5886C17.2453 14.0294 17.3961 14.5583 17.3961 15.1753C17.3961 15.3604 17.3745 15.594 17.3314 15.8761C17.2022 16.6606 17.0471 17.4231 16.8662 18.1635C16.5646 19.3711 16.0433 20.2747 15.3022 20.8741C14.5612 21.4647 13.5703 21.76 12.3295 21.76ZM12.5105 19.856C12.993 19.856 13.4023 19.7105 13.7384 19.4196C14.083 19.1288 14.3286 18.6836 14.4751 18.0842C14.6732 17.2556 14.824 16.5328 14.9274 15.9158C14.9619 15.7306 14.9791 15.5411 14.9791 15.3472C14.9791 14.5451 14.5699 14.144 13.7513 14.144C13.2688 14.144 12.8552 14.2894 12.5105 14.5803C12.1744 14.8712 11.9332 15.3164 11.7867 15.9158C11.6316 16.5064 11.4765 17.2291 11.3214 18.0842C11.287 18.2605 11.2697 18.4456 11.2697 18.6395C11.2697 19.4505 11.6833 19.856 12.5105 19.856Z",fill:n}),(0,r.jsx)("path",{d:"M17.9895 21.6278C17.8947 21.6278 17.8215 21.597 17.7698 21.5352C17.7267 21.4647 17.7138 21.3854 17.731 21.2972L19.5146 12.7028C19.5318 12.6059 19.5792 12.5265 19.6568 12.4648C19.7344 12.4031 19.8162 12.3722 19.9024 12.3722H23.3404C24.2968 12.3722 25.0636 12.575 25.641 12.9805C26.2269 13.386 26.5199 13.9721 26.5199 14.739C26.5199 14.9594 26.494 15.1886 26.4423 15.4266C26.2269 16.4403 25.7918 17.1895 25.1369 17.6744C24.4907 18.1592 23.6031 18.4016 22.4744 18.4016H20.7295L20.135 21.2972C20.1178 21.3942 20.0704 21.4735 19.9928 21.5352C19.9153 21.597 19.8334 21.6278 19.7473 21.6278H17.9895ZM22.5648 16.5769C22.9267 16.5769 23.2412 16.4755 23.5084 16.2728C23.7841 16.0701 23.965 15.7792 24.0513 15.4001C24.0771 15.2503 24.09 15.1181 24.09 15.0035C24.09 14.7479 24.0168 14.5539 23.8703 14.4217C23.7238 14.2806 23.4739 14.2101 23.1206 14.2101H21.5697L21.0785 16.5769H22.5648Z",fill:n})]}),c=({w:e="94px",h:t="94px"})=>(0,r.jsxs)(a.J,{w:e,h:t,viewBox:"0 0 94 94",fill:"none",children:[(0,r.jsx)("g",{filter:"url(#filter0_d_1044_28165)",children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M47 76.3333C63.2004 76.3333 76.3333 63.2004 76.3333 47C76.3333 30.7996 63.2004 17.6667 47 17.6667C30.7996 17.6667 17.6667 30.7996 17.6667 47C17.6667 63.2004 30.7996 76.3333 47 76.3333ZM47 79C64.6731 79 79 64.6731 79 47C79 29.3269 64.6731 15 47 15C29.3269 15 15 29.3269 15 47C15 64.6731 29.3269 79 47 79Z",fill:"#FF4A60"})}),(0,r.jsx)("g",{filter:"url(#filter1_d_1044_28165)",children:(0,r.jsx)("path",{d:"M56.3334 39.5466L54.4534 37.6666L47.0001 45.12L39.5467 37.6666L37.6667 39.5466L45.1201 47L37.6667 54.4533L39.5467 56.3333L47.0001 48.88L54.4534 56.3333L56.3334 54.4533L48.8801 47L56.3334 39.5466Z",fill:"#FF4A60"})}),(0,r.jsxs)("defs",{children:[(0,r.jsxs)("filter",{id:"filter0_d_1044_28165",x:"0",y:"0",width:"94",height:"94",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.jsx)("feOffset",{}),(0,r.jsx)("feGaussianBlur",{stdDeviation:"7.5"}),(0,r.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 0.116667 0 0 0 0 0.222667 0 0 0 0.6 0"}),(0,r.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_1044_28165"}),(0,r.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_1044_28165",result:"shape"})]}),(0,r.jsxs)("filter",{id:"filter1_d_1044_28165",x:"22.6667",y:"22.6666",width:"48.6667",height:"48.6666",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.jsx)("feOffset",{}),(0,r.jsx)("feGaussianBlur",{stdDeviation:"7.5"}),(0,r.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 0.116667 0 0 0 0 0.222667 0 0 0 0.6 0"}),(0,r.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_1044_28165"}),(0,r.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_1044_28165",result:"shape"})]})]})]}),d=({width:e="20px",height:t="20ox",color:n="whiteAlpha.700",...o})=>(0,r.jsxs)(a.J,{width:e,color:n,height:t,viewBox:"0 0 20 20",fill:"none",...o,children:[(0,r.jsx)("path",{d:"M6.58154 6.2701C6.23637 6.2701 5.95654 6.54993 5.95654 6.8951C5.95654 7.24028 6.23637 7.5201 6.58154 7.5201H10.3101C10.6553 7.5201 10.9351 7.24028 10.9351 6.8951C10.9351 6.54993 10.6553 6.2701 10.3101 6.2701H6.58154Z",fill:"currentColor"}),(0,r.jsx)("path",{d:"M13.972 9.10498C13.6268 9.10498 13.347 9.38481 13.347 9.72998C13.347 10.0752 13.6268 10.355 13.972 10.355H14.1873C14.5324 10.355 14.8123 10.0752 14.8123 9.72998C14.8123 9.38481 14.5324 9.10498 14.1873 9.10498H13.972Z",fill:"currentColor"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.2918 11.6311L17.2916 11.6447V12.3416C17.2916 14.6883 15.3892 16.5907 13.0426 16.5907H7.07331C4.72664 16.5907 2.82422 14.6883 2.82422 12.3416V7.38508C2.82422 5.0384 4.72664 3.13599 7.07331 3.13599H13.0426C15.3892 3.13599 17.2916 5.0384 17.2916 7.38508V7.90016L17.2918 7.91382L17.2916 7.92747V11.6174L17.2918 11.6311ZM7.07331 4.38599C5.41699 4.38599 4.07422 5.72876 4.07422 7.38508V12.3416C4.07422 13.9979 5.41699 15.3407 7.07331 15.3407H13.0426C14.6989 15.3407 16.0416 13.9979 16.0416 12.3416V12.2561H13.871C12.4998 12.2552 11.3876 11.1445 11.3867 9.77282C11.3867 8.40047 12.4998 7.28966 13.8706 7.28882H16.0401C15.9893 5.67705 14.6667 4.38599 13.0426 4.38599H7.07331ZM13.8714 11.0061H16.0416V8.53882H13.8712C13.1891 8.53932 12.6369 9.09162 12.6367 9.77223C12.6372 10.4535 13.1895 11.0056 13.8714 11.0061Z",fill:"currentColor"})]}),u=({color:e="cyan.400",width:t="29",height:n="21"})=>(0,r.jsx)(a.J,{width:t,height:n,viewBox:"0 0 29 21",fill:"none",color:e,children:(0,r.jsx)("path",{d:"M6.81239 5.45766C6.61525 5.22805 6.37254 5.11297 6.08372 5.11297H0.177C0.124536 5.11297 0.0816109 5.09606 0.0492845 5.06224C0.0164282 5.02898 0 4.99134 0 4.95098V0.89807C0 0.85771 0.0164282 0.820622 0.0492845 0.786807C0.0816109 0.752992 0.124536 0.736084 0.177 0.736084H6.41864C7.99362 0.736084 9.35239 1.39166 10.4944 2.70173L12.0106 4.58611L9.05721 8.25396L6.81239 5.45766ZM17.7207 2.68155C18.8627 1.38457 20.2278 0.736084 21.8161 0.736084H28.0381C28.0906 0.736084 28.1298 0.749719 28.1563 0.776444C28.1822 0.803714 28.1955 0.844074 28.1955 0.89807V4.95098C28.1955 4.99134 28.1822 5.02898 28.1563 5.06224C28.1298 5.09606 28.0906 5.11297 28.0381 5.11297H22.1314C21.8426 5.11297 21.5998 5.22805 21.4027 5.45766L17.0514 10.8479L21.4223 16.2785C21.6195 16.495 21.8553 16.603 22.1314 16.603H28.0381C28.0906 16.603 28.1298 16.6199 28.1563 16.6538C28.1822 16.6876 28.1955 16.7318 28.1955 16.7852V20.8381C28.1955 20.8785 28.1822 20.9161 28.1563 20.9494C28.1298 20.9832 28.0906 21.0001 28.0381 21.0001H21.8161C20.2278 21.0001 18.8691 20.3451 17.7403 19.0345L14.1176 14.5359L10.4944 19.0345C9.35239 20.3451 7.98727 21.0001 6.39903 21.0001H0.177C0.124536 21.0001 0.0847905 20.9832 0.0588234 20.9494C0.0323264 20.9156 0.0196078 20.8719 0.0196078 20.8174V16.7645C0.0196078 16.7241 0.0323264 16.687 0.0588234 16.6532C0.0847905 16.6194 0.124536 16.6025 0.177 16.6025H6.08372C6.35929 16.6025 6.602 16.488 6.81239 16.2578L11.0848 10.9488L17.7207 2.68155Z",fill:"currentColor"})});var x=n(69231);const h="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9Ii00IC00IDMyIDMyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjE2IiBmaWxsPSIjMDA1MkZGIi8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgZD0iTTExLjk4IDI0QzE4LjYxNyAyNCAyNCAxOC42MjcgMjQgMTJTMTguNjE4IDAgMTEuOTggMEM1LjY4IDAgLjUxMiA0LjgzNiAwIDEwLjk5MWgxNS44ODl2Mi4wMThIMEMuNTEzIDE5LjE2NCA1LjY4IDI0IDExLjk4IDI0Ii8+Cjwvc3ZnPgo=";function p({...e}){return(0,r.jsx)(x.E,{src:h,alt:"Base",...e})}const m=({width:e="15px",height:t="15px",...n})=>(0,r.jsxs)(a.J,{width:e,height:t,viewBox:"0 0 24 24",fill:"none",...n,children:[(0,r.jsx)("path",{d:"M9.84893 10.3091C9.247 10.3091 8.77179 10.8341 8.77179 11.4746C8.77179 12.1151 9.25756 12.6401 9.84893 12.6401C10.4509 12.6401 10.9261 12.1151 10.9261 11.4746C10.9366 10.8341 10.4509 10.3091 9.84893 10.3091ZM13.7034 10.3091C13.1015 10.3091 12.6263 10.8341 12.6263 11.4746C12.6263 12.1151 13.112 12.6401 13.7034 12.6401C14.3053 12.6401 14.7806 12.1151 14.7806 11.4746C14.7806 10.8341 14.3053 10.3091 13.7034 10.3091Z",fill:"#FEFEFF"}),(0,r.jsx)("path",{d:"M18.8354 1.49976H4.68468C3.49138 1.49976 2.51984 2.46578 2.51984 3.6628V17.8591C2.51984 19.0561 3.49138 20.0222 4.68468 20.0222H16.66L16.1003 18.0796L17.452 19.3291L18.7298 20.5052L21.0002 22.5002V3.6628C21.0002 2.46578 20.0287 1.49976 18.8354 1.49976ZM14.7591 15.2131C14.7591 15.2131 14.379 14.7615 14.0622 14.3625C15.4456 13.974 15.9736 13.113 15.9736 13.113C15.5406 13.3965 15.1288 13.596 14.7591 13.7325C14.2311 13.953 13.7242 14.1 13.2279 14.184C12.2141 14.373 11.2848 14.3205 10.4928 14.1735C9.89088 14.058 9.37343 13.89 8.94046 13.722C8.69757 13.6275 8.43357 13.512 8.16956 13.365C8.13788 13.344 8.1062 13.3335 8.07452 13.3125C8.0534 13.302 8.04284 13.2915 8.03228 13.281C7.84219 13.176 7.73659 13.1025 7.73659 13.1025C7.73659 13.1025 8.24348 13.9425 9.58463 14.3415C9.26782 14.7405 8.8771 15.2131 8.8771 15.2131C6.54328 15.1396 5.65623 13.617 5.65623 13.617C5.65623 10.2359 7.1769 7.49539 7.1769 7.49539C8.69757 6.36136 10.1443 6.39286 10.1443 6.39286L10.2499 6.51887C8.34908 7.06488 7.47258 7.8944 7.47258 7.8944C7.47258 7.8944 7.70491 7.76839 8.09564 7.58989C9.22558 7.09638 10.1232 6.95988 10.4928 6.92838C10.5562 6.91788 10.609 6.90737 10.6723 6.90737C11.3165 6.82337 12.0452 6.80237 12.8055 6.88637C13.8087 7.00188 14.8859 7.29588 15.9841 7.8944C15.9841 7.8944 15.1499 7.10688 13.3546 6.56087L13.5025 6.39286C13.5025 6.39286 14.9492 6.36136 16.4699 7.49539C16.4699 7.49539 17.9906 10.2359 17.9906 13.617C17.9906 13.617 17.093 15.1396 14.7591 15.2131Z",fill:"#FEFEFF"})]}),g=({...e})=>(0,r.jsxs)(a.J,{viewBox:"0 0 24 24",fill:"none",...e,children:[(0,r.jsx)("g",{clipPath:"url(#clip0_14230_11024)",children:(0,r.jsx)("path",{d:"M10.573 13.5844L4.98887 20.25H6.31212L11.1608 14.4623L15.0334 20.25H19.5L13.6438 11.498L19.5 4.50809H18.1767L13.0564 10.6201L8.9666 4.50809H4.5L10.5733 13.5844H10.573ZM12.3854 11.4209L12.9788 12.2924L17.6999 19.227H15.6673L11.8573 13.6306L11.264 12.7591L6.3115 5.48454H8.34405L12.3854 11.4206V11.4209Z",fill:"white"})}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_14230_11024",children:(0,r.jsx)("rect",{width:"15",height:"15.75",fill:"white",transform:"matrix(-1 0 0 -1 19.5 20.25)"})})})]}),f=({...e})=>(0,r.jsxs)(a.J,{viewBox:"0 0 24 24",fill:"none",...e,children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.0002 2.25049C6.61603 2.25049 2.25058 6.72675 2.25058 12.2476C2.25058 16.6642 5.04356 20.4121 8.91822 21.7331C9.40578 21.8258 9.58498 21.5163 9.58498 21.2514C9.58498 21.013 9.57529 20.2251 9.57207 19.3907C6.85819 19.995 6.28668 18.2121 6.28668 18.2121C5.84271 17.0566 5.20501 16.7487 5.20501 16.7487C4.32029 16.1279 5.2712 16.1411 5.2712 16.1411C6.24955 16.2123 6.76617 17.1708 6.76617 17.1708C7.63635 18.6988 9.04737 18.2568 9.60274 18.0018C9.68992 17.3562 9.94339 16.9142 10.2211 16.6642C8.05611 16.411 5.77975 15.5535 5.77975 11.7245C5.77975 10.6335 6.16075 9.74127 6.78393 9.04103C6.68222 8.7894 6.34964 7.77297 6.87757 6.39566C6.87757 6.39566 7.69609 6.12749 9.55915 7.42037C10.3373 7.19854 11.1704 7.08763 12.0002 7.08432C12.8284 7.08763 13.6631 7.19854 14.4428 7.42037C16.3043 6.12749 17.1212 6.39566 17.1212 6.39566C17.6523 7.77297 17.3181 8.7894 17.2164 9.04103C17.8412 9.74127 18.219 10.6335 18.219 11.7245C18.219 15.5634 15.9378 16.4093 13.768 16.6576C14.1183 16.9672 14.4299 17.5764 14.4299 18.5084C14.4299 19.846 14.4186 20.922 14.4186 21.2514C14.4186 21.5179 14.5946 21.8292 15.0886 21.7315C18.96 20.4088 21.7498 16.6626 21.7498 12.2476C21.7498 6.72675 17.3843 2.25049 12.0002 2.25049Z",fill:"#FEFEFF"}),(0,r.jsx)("path",{d:"M5.94295 16.6031C5.92196 16.6527 5.84447 16.6676 5.77505 16.6328C5.70401 16.5997 5.66526 16.5319 5.68787 16.4822C5.70885 16.4309 5.78473 16.4176 5.85577 16.4508C5.9268 16.4855 5.96716 16.5534 5.94295 16.6031Z",fill:"#FEFEFF"}),(0,r.jsx)("path",{d:"M6.33886 17.055C6.29204 17.0997 6.20163 17.0782 6.14028 17.0086C6.0757 16.9391 6.0644 16.8464 6.11122 16.8017C6.15965 16.757 6.24683 16.7785 6.31141 16.8481C6.37437 16.9176 6.38729 17.0103 6.33886 17.055Z",fill:"#FEFEFF"}),(0,r.jsx)("path",{d:"M6.72318 17.6313C6.66345 17.6743 6.56497 17.6346 6.50523 17.5452C6.4455 17.4558 6.4455 17.3498 6.50685 17.3068C6.56658 17.2638 6.66345 17.3018 6.7248 17.3912C6.78453 17.4806 6.78453 17.5882 6.72318 17.6313Z",fill:"#FEFEFF"}),(0,r.jsx)("path",{d:"M7.24861 18.1876C7.19533 18.2488 7.08071 18.2323 6.99837 18.1495C6.91281 18.0684 6.8902 17.9542 6.94348 17.8946C6.99837 17.8333 7.11138 17.8515 7.19533 17.9326C7.27928 18.0121 7.30512 18.128 7.24861 18.1876Z",fill:"#FEFEFF"}),(0,r.jsx)("path",{d:"M7.97585 18.5102C7.95164 18.588 7.84185 18.6244 7.73207 18.5913C7.62229 18.5565 7.54964 18.4655 7.57224 18.386C7.59484 18.3066 7.70463 18.2702 7.81602 18.3049C7.92742 18.3397 7.99846 18.4307 7.97585 18.5102Z",fill:"#FEFEFF"}),(0,r.jsx)("path",{d:"M8.77338 18.5695C8.77661 18.6523 8.68297 18.7202 8.56673 18.7218C8.45049 18.7251 8.35524 18.6573 8.35524 18.5762C8.35524 18.4934 8.44726 18.4255 8.5635 18.4239C8.67813 18.4222 8.77338 18.4884 8.77338 18.5695Z",fill:"#FEFEFF"}),(0,r.jsx)("path",{d:"M9.51542 18.4407C9.52995 18.5218 9.44923 18.6029 9.33299 18.6261C9.21998 18.6476 9.11504 18.598 9.10051 18.5185C9.08598 18.4357 9.16832 18.353 9.28133 18.3314C9.39757 18.3099 9.50089 18.3596 9.51542 18.4407Z",fill:"#FEFEFF"})]}),y=({...e})=>(0,r.jsxs)(a.J,{viewBox:"0 0 24 24",fill:"none",...e,children:[(0,r.jsx)("g",{clipPath:"url(#clip0_14230_11037)",children:(0,r.jsx)("path",{d:"M6.52381 7.30209C7.07677 9.37496 7.54202 11.0837 7.55756 11.0993C7.57316 11.1148 7.90732 9.92686 8.30024 8.45929L9.32137 4.64551L9.62823 3.5H12.0094C13.3191 3.5 14.3906 3.51182 14.3906 3.52623C14.3906 3.54974 16.36 10.9554 16.4034 11.0949C16.4133 11.1268 16.8207 9.64756 17.3088 7.80784C17.7969 5.96812 18.2549 4.24627 18.3265 3.98145L18.4566 3.5H21.1385C22.6135 3.5 23.8214 3.52245 23.8226 3.5498C23.8239 3.57716 22.7107 7.40183 21.349 12.0491L18.873 20.4985L16.5341 20.4993L14.1951 20.5L14.0945 20.1514C14.0392 19.9597 13.5453 18.2065 12.9969 16.2554C12.4485 14.3044 11.9924 12.7011 11.9833 12.6925C11.9742 12.6839 11.4737 14.4369 10.8711 16.5881L9.77539 20.4994L7.43902 20.4997C5.27152 20.5 5.10012 20.4916 5.06752 20.3838C5.04813 20.3199 3.93934 16.5472 2.60352 12C1.26769 7.45283 0.15877 3.67976 0.139312 3.61548C0.105777 3.50491 0.252535 3.49947 2.8111 3.51587L5.51842 3.5332L6.52381 7.30209Z",fill:"white"})}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_14230_11037",children:(0,r.jsx)("rect",{width:"24",height:"24",fill:"white"})})})]}),w=({...e})=>(0,r.jsx)(a.J,{viewBox:"0 0 24 24",fill:"none",...e,children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.3943 4.94354C21.3075 5.18802 22.0253 5.90572 22.2697 6.81901C22.7115 8.47269 22.7133 11.925 22.7133 11.925C22.7133 11.925 22.7133 15.3773 22.2697 17.031C22.0253 17.9443 21.3075 18.662 20.3943 18.9064C18.7406 19.35 12.1066 19.35 12.1066 19.35C12.1066 19.35 5.47269 19.35 3.819 18.9064C2.90572 18.662 2.18802 17.9443 1.94354 17.031C1.5 15.3773 1.5 11.925 1.5 11.925C1.5 11.925 1.5 8.47269 1.94354 6.81901C2.18802 5.90572 2.90572 5.18802 3.819 4.94354C5.47269 4.5 12.1066 4.5 12.1066 4.5C12.1066 4.5 18.7406 4.5 20.3943 4.94354ZM15.4944 11.9254L9.98331 15.107V8.74375L15.4944 11.9254Z",fill:"white"})}),b=({...e})=>(0,r.jsxs)(a.J,{width:"15",height:"14",viewBox:"0 0 15 14",fill:"none",...e,children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.75 3.30322C5.93307 3.30322 6.09678 3.41547 6.16031 3.58454L7.03581 5.91453L9.40183 6.7767C9.57352 6.83926 9.6875 7.00048 9.6875 7.18076C9.6875 7.36104 9.57352 7.52226 9.40183 7.58482L7.03581 8.44699L6.16031 10.777C6.09678 10.9461 5.93307 11.0583 5.75 11.0583C5.56693 11.0583 5.40322 10.9461 5.33969 10.777L4.46419 8.44699L2.09817 7.58482C1.92648 7.52226 1.8125 7.36104 1.8125 7.18076C1.8125 7.00048 1.92648 6.83926 2.09817 6.7767L4.46419 5.91453L5.33969 3.58454C5.40322 3.41547 5.56693 3.30322 5.75 3.30322ZM5.75 4.97554L5.21499 6.39936C5.17068 6.51728 5.07626 6.61026 4.95651 6.6539L3.51067 7.18076L4.95651 7.70762C5.07626 7.75126 5.17068 7.84424 5.21499 7.96217L5.75 9.38598L6.28501 7.96217C6.32932 7.84424 6.42374 7.75126 6.54349 7.70762L7.98933 7.18076L6.54349 6.6539C6.42374 6.61026 6.32932 6.51728 6.28501 6.39936L5.75 4.97554Z",fill:"white"}),(0,r.jsx)("path",{d:"M5.21499 6.39936L5.75 4.97554L6.28501 6.39936C6.32932 6.51728 6.42374 6.61026 6.54349 6.6539L7.98933 7.18076L6.54349 7.70762C6.42374 7.75126 6.32932 7.84424 6.28501 7.96217L5.75 9.38598L5.21499 7.96217C5.17068 7.84424 5.07626 7.75126 4.95651 7.70762L3.51067 7.18076L4.95651 6.6539C5.07626 6.61026 5.17068 6.51728 5.21499 6.39936Z",fill:"white"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.4103 2.14851C11.3468 1.97943 11.1831 1.86719 11 1.86719C10.8169 1.86719 10.6532 1.97943 10.5897 2.14851L10.1868 3.2206L9.09817 3.61731C8.92648 3.67988 8.8125 3.8411 8.8125 4.02138C8.8125 4.20166 8.92648 4.36287 9.09817 4.42544L10.1868 4.82215L10.5897 5.89424C10.6532 6.06332 10.8169 6.17556 11 6.17556C11.1831 6.17556 11.3468 6.06332 11.4103 5.89424L11.8132 4.82215L12.9018 4.42544C13.0735 4.36287 13.1875 4.20166 13.1875 4.02138C13.1875 3.8411 13.0735 3.67988 12.9018 3.61731L11.8132 3.2206L11.4103 2.14851Z",fill:"white"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.4103 8.46736C11.3468 8.29828 11.1831 8.18604 11 8.18604C10.8169 8.18604 10.6532 8.29828 10.5897 8.46736L10.1868 9.53945L9.09817 9.93616C8.92648 9.99872 8.8125 10.1599 8.8125 10.3402C8.8125 10.5205 8.92648 10.6817 9.09817 10.7443L10.1868 11.141L10.5897 12.2131C10.6532 12.3822 10.8169 12.4944 11 12.4944C11.1831 12.4944 11.3468 12.3822 11.4103 12.2131L11.8132 11.141L12.9018 10.7443C13.0735 10.6817 13.1875 10.5205 13.1875 10.3402C13.1875 10.1599 13.0735 9.99872 12.9018 9.93616L11.8132 9.53945L11.4103 8.46736Z",fill:"white"})]}),j=({...e})=>(0,r.jsxs)(a.J,{width:"178px",height:"178px",viewBox:"0 0 178 178",fill:"none",...e,children:[(0,r.jsx)("circle",{cx:"89.0198",cy:"88.4095",r:"88.305",fill:"#06061B"}),(0,r.jsx)("path",{d:"M68.0815 75.158C67.5149 74.5153 66.8174 74.1932 65.9874 74.1932H49.0126C48.8618 74.1932 48.7384 74.1459 48.6455 74.0512C48.5511 73.9581 48.5039 73.8528 48.5039 73.7398V62.3958C48.5039 62.2828 48.5511 62.179 48.6455 62.0844C48.7384 61.9897 48.8618 61.9424 49.0126 61.9424H66.9499C71.4761 61.9424 75.381 63.7773 78.6629 67.4442L83.0201 72.7185L74.5327 82.9848L68.0815 75.158ZM99.4299 67.3877C102.712 63.7575 106.635 61.9424 111.199 61.9424H129.08C129.231 61.9424 129.344 61.9805 129.42 62.0553C129.495 62.1317 129.533 62.2446 129.533 62.3958V73.7398C129.533 73.8528 129.495 73.9581 129.42 74.0512C129.344 74.1459 129.231 74.1932 129.08 74.1932H112.105C111.275 74.1932 110.578 74.5153 110.011 75.158L97.5064 90.2452L110.068 105.445C110.634 106.051 111.312 106.354 112.105 106.354H129.08C129.231 106.354 129.344 106.401 129.42 106.496C129.495 106.59 129.533 106.714 129.533 106.864V118.208C129.533 118.321 129.495 118.426 129.42 118.519C129.344 118.614 129.231 118.661 129.08 118.661H111.199C106.635 118.661 102.73 116.828 99.4863 113.159L89.0754 100.568L78.6629 113.159C75.381 116.828 71.4578 118.661 66.8936 118.661H49.0126C48.8618 118.661 48.7476 118.614 48.673 118.519C48.5968 118.424 48.5603 118.302 48.5603 118.15V106.806C48.5603 106.693 48.5968 106.589 48.673 106.494C48.7476 106.399 48.8618 106.352 49.0126 106.352H65.9874C66.7793 106.352 67.4768 106.032 68.0815 105.387L80.3595 90.5276L99.4299 67.3877Z",fill:"#00D1FF"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.62306 101.122C1.02459 96.9706 0.714844 92.7262 0.714844 88.4095C0.714844 85.5803 0.84789 82.7823 1.10807 80.0212L11.5198 67.3877C14.8017 63.7575 18.7248 61.9424 23.2891 61.9424H41.1701C41.3209 61.9424 41.4336 61.9805 41.5097 62.0553C41.5844 62.1317 41.6224 62.2446 41.6224 62.3958V73.7398C41.6224 73.8528 41.5844 73.9581 41.5097 74.0512C41.4336 74.1459 41.3209 74.1932 41.1701 74.1932H24.1953C23.3653 74.1932 22.6678 74.5153 22.1012 75.158L9.59627 90.2452L22.1576 105.445C22.7241 106.051 23.4018 106.354 24.1953 106.354H41.1701C41.3209 106.354 41.4336 106.401 41.5097 106.496C41.5844 106.59 41.6224 106.714 41.6224 106.864V118.208C41.6224 118.321 41.5844 118.426 41.5097 118.519C41.4336 118.614 41.3209 118.661 41.1701 118.661H23.2891C18.7248 118.661 14.82 116.828 11.5761 113.159L1.62306 101.122Z",fill:"#00D1FF"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M176.393 101.284C177.007 97.0816 177.325 92.7827 177.325 88.4095C177.325 85.5791 177.192 82.7799 176.931 80.0176L168.27 90.5276L155.992 105.387C155.387 106.032 154.689 106.352 153.898 106.352H136.923C136.772 106.352 136.658 106.399 136.583 106.494C136.507 106.589 136.47 106.693 136.47 106.806V118.15C136.47 118.302 136.507 118.424 136.583 118.519C136.658 118.614 136.772 118.661 136.923 118.661H154.804C159.368 118.661 163.291 116.828 166.573 113.159L176.393 101.284ZM153.898 74.1932C154.728 74.1932 155.425 74.5153 155.992 75.158L162.443 82.9848L170.93 72.7185L166.573 67.4442C163.291 63.7773 159.386 61.9424 154.86 61.9424H136.923C136.772 61.9424 136.649 61.9897 136.556 62.0844C136.461 62.179 136.414 62.2828 136.414 62.3958V73.7398C136.414 73.8528 136.461 73.9581 136.556 74.0512C136.649 74.1459 136.772 74.1932 136.923 74.1932H153.898Z",fill:"#00D1FF"})]})},30548:(e,t,n)=>{"use strict";n.d(t,{PO:()=>M,PZ:()=>g,RR:()=>f,g5:()=>v,dF:()=>m,lg:()=>y,NM:()=>w,EY:()=>I,ZQ:()=>D,getMagicProvider:()=>p,LN:()=>N,yL:()=>z,eK:()=>k,mx:()=>E,Os:()=>T});var a=n(42219),r=n(83474),o=n(40672),i=n(28145),s=n(42764),l=n(1005),c=n(8550),d=n(2784);class u extends l.r{constructor(){if(!window.$chainId)throw new Error("Empty window.$chainId");if(!window.$magicWallet)throw new Error("Empty window.$magicWallet");super("http://127.0.0.1:8545",{chainId:window.$chainId,name:"Anvil"}),Object.defineProperty(this,"magicWallet",{enumerable:!0,value:window.$magicWallet,writable:!1}),Object.defineProperty(this,"chainId",{enumerable:!0,value:window.$chainId,writable:!1})}async listAccounts(){return[this.magicWallet]}async send(e,t){if("eth_chainId"===e)return`0x${Number(this.chainId).toString(16)}`;if("eth_accounts"===e)return[this.magicWallet];try{const n=await super.send(e,t);return console.log("MAGIC.send",{method:e,params:t,result:n}),n}catch(n){throw console.log("MAGIC.send ERROR",{method:e,params:t,error:n}),n}}}var x=n(9073);var h=n(52322);function p(){if(window.$magicWallet&&window.$chainId)return new u}Number(0).toString(16);const m=({networkId:e,size:t="24px",...n})=>{switch(e){case 1:case 11155111:return(0,h.jsx)(o.xi,{w:t,h:t,...n});case 10:case 11155420:return(0,h.jsx)(o.PF,{w:t,h:t,...n});case 84531:case 84532:case 8453:return(0,h.jsx)(o.su,{w:t,h:t,...n});case 13370:return(0,h.jsx)(o.K7,{w:"29px",h:"21px",...n});case 421614:case 42161:return(0,h.jsx)(o.Ri,{w:t,h:t,...n});case 2192:case 13001:return(0,h.jsx)(o.vK,{w:t,h:t,...n});default:return(0,h.jsx)(o.Bg,{w:t,h:t,...n})}},g={id:8453,preset:"andromeda",hexId:`0x${Number(8453).toString(16)}`,token:"ETH",name:"base",rpcUrl:`https://base-mainnet.infura.io/v3/${a.lm}`,label:"Base",isSupported:!0,publicRpcUrl:"https://base.publicnode.com",isTestnet:!1},f={id:1,preset:"main",hexId:`0x${Number(1).toString(16)}`,token:"ETH",name:"mainnet",rpcUrl:`https://mainnet.infura.io/v3/${a.lm}`,label:"Ethereum",isSupported:!0,publicRpcUrl:"https://ethereum.publicnode.com",isTestnet:!1},y={id:10,preset:"main",hexId:`0x${Number(10).toString(16)}`,token:"ETH",name:"optimism-mainnet",rpcUrl:`https://optimism-mainnet.infura.io/v3/${a.lm}`,label:"Optimism",isSupported:!0,publicRpcUrl:"https://mainnet.optimism.io",isTestnet:!1},w={id:11155111,preset:"main",hexId:`0x${Number(11155111).toString(16)}`,token:"ETH",name:"sepolia",rpcUrl:`https://sepolia.infura.io/v3/${a.lm}`,label:"Sepolia Testnet",isSupported:!0,publicRpcUrl:"https://ethereum-sepolia.publicnode.com",isTestnet:!0},b={id:84532,preset:"andromeda",hexId:`0x${Number(84532).toString(16)}`,token:"ETH",name:"base-sepolia",rpcUrl:`https://base-sepolia.infura.io/v3/${a.lm}`,label:"Base Sepolia",isSupported:!0,publicRpcUrl:"https://sepolia.base.org",isTestnet:!0},j={id:13370,preset:"main",hexId:`0x${Number(13370).toString(16)}`,token:"ETH",name:"cannon",rpcUrl:"http://127.0.0.1:8545",label:"Cannon",isSupported:!1,publicRpcUrl:"http://127.0.0.1:8545",isTestnet:!0},C={id:11155420,preset:"main",hexId:`0x${Number(11155420).toString(16)}`,token:"ETH",name:"optimism-sepolia",rpcUrl:`https://optimism-sepolia.infura.io/v3/${a.lm}`,label:"Optimism Sepolia",isSupported:!1,publicRpcUrl:"https://sepolia.optimism.io/",isTestnet:!0},S={id:421614,preset:"main",hexId:`0x${Number(421614).toString(16)}`,token:"ETH",name:"arbitrum-sepolia",rpcUrl:`https://arbitrum-sepolia.infura.io/v3/${a.lm}`,label:"Arbitrum Sepolia",isSupported:!0,publicRpcUrl:"https://sepolia-rollup.arbitrum.io/rpc",isTestnet:!0},M={id:42161,preset:"main",hexId:`0x${Number(42161).toString(16)}`,token:"ETH",name:"arbitrum",rpcUrl:`https://arbitrum-mainnet.infura.io/v3/${a.lm}`,label:"Arbitrum",isSupported:!0,publicRpcUrl:"https://arb1.arbitrum.io/rpc",isTestnet:!1},L={id:2192,preset:"main",hexId:`0x${Number(2192).toString(16)}`,token:"ETH",name:"SNAX",rpcUrl:"https://mainnet.snaxchain.io/",label:"Snaxchain",isSupported:!0,publicRpcUrl:"https://mainnet.snaxchain.io/",isTestnet:!1},A={id:13001,preset:"main",hexId:`0x${Number(13001).toString(16)}`,token:"ETH",name:"SNAX",rpcUrl:"https://testnet.snaxchain.io/",label:"Snaxchain",isSupported:!0,publicRpcUrl:"https://testnet.snaxchain.io/",isTestnet:!0},v=[g,f,y,w,b,j,C,S,M,L,A];async function D(e,t){return(0,r.O)(e,t).then((()=>!0),(()=>!1))}v.find((e=>`${e.id}-${e.preset}`===window.localStorage.getItem("DEFAULT_NETWORK")))??v[1];const I={name:"Synthetix",icon:x,logo:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzYyIiBoZWlnaHQ9IjU2IiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgNzYyIDU2IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxwYXRoIGZpbGw9IiMwMEQxRkYiIGQ9Ik03My40OTIgMjYuMjEycS00Ljg3MS00Ljc2LTExLjcxLTQuNzZIMTYuNThxLTEuMjYgMC0yLjE2Mi0uODc3YTIuODYgMi44NiAwIDAgMS0uOTAzLTIuMTM0di0zLjY2NnEwLTEuMjAyLjkwMy0yLjA4YTMgMyAwIDAgMSAyLjE2Mi0uODc2aDU4LjI4YS40OC40OCAwIDAgMCAuMzU1LS4xMzcuNDIuNDIgMCAwIDAgLjEzNy0uM1YuNDM3cTAtLjIxNy0uMTM3LS4zMjhBLjU2LjU2IDAgMCAwIDc0Ljg2IDBIMTYuNThROS42ODcgMCA0Ljg0NCA0Ljc2MiAwIDkuNTIyIDAgMTYuMjUydi43MTJxMCA2Ljc4NiA0Ljg0MyAxMS41NDcgNC44NDIgNC43NiAxMS43MzggNC43Nmg0NS4ycTEuMjA1IDAgMi4xMDYuODQ4LjkwNC44NDkuOTAzIDIuMTA4djMuNjY1cTAgMS4yNi0uOTAzIDIuMTA4dC0yLjEwNi44NDhIMy40NDhhLjQyLjQyIDAgMCAwLS4zLjEzNy40OC40OCAwIDAgMC0uMTM4LjM1N3YxMC45NDRxMCAuMTY1LjEzNy4zYS40Mi40MiAwIDAgMCAuMy4xMzhoNTguMzM0cTYuODQgMCAxMS43MS00Ljc4OHQ0Ljg3MS0xMS41MnYtLjcxMnEtLjAwMS02LjczMi00Ljg3LTExLjQ5Mk0xNzEuNjIyIDBoLTEyLjY0MWEuNDcuNDcgMCAwIDAtLjMwMS4xMDlxLS4xMzcuMTEtLjEzNy4zMjh2MTMuOXEwIDEuODA1LTEuODYgMi43MzZsLTI1LjIyNiAxMC40NS0yNS4yMjYtMTAuNDVxLTEuODYtLjkzLTEuODYxLTIuNzM3Vi40MzdxMC0uMjE3LS4xMDktLjMyOC0uMTEyLS4xMDgtLjMyOS0uMTA5SDkxLjI5YS40Ny40NyAwIDAgMC0uMy4xMDlxLS4xMzcuMTEtLjEzNy4zMjh2MTUuOTI0cTAgMy41NTkgMS45NyA2LjUxMiAxLjk3IDIuOTU0IDUuMzYzIDQuMzc3bDI2LjQ4NiAxMS4xMDh2MTUuODdhLjQ4LjQ4IDAgMCAwIC4xMzcuMzU3LjQ4LjQ4IDAgMCAwIC4zNTUuMTM3aDEyLjY0MWEuNDIuNDIgMCAwIDAgLjMtLjEzNy40OC40OCAwIDAgMCAuMTM3LS4zNTZ2LTE1Ljg3bDI2LjQ4Ni0xMS4wNTNjMi4yNi0uOTg2IDQuMDUtMi40NTQgNS4zNjItNC40MDVxMS45Ny0yLjkyNyAxLjk2OS02LjQ4NVYuNDM3cTAtLjIxNy0uMTM3LS4zMjhhLjQ3LjQ3IDAgMCAwLS4zLS4xMDltOTMuODk0IDBoLTEyLjY0MXEtLjIyIDAtLjMyOC4xMzdhLjQ2LjQ2IDAgMCAwLS4xMDkuM3Y0Mi40NjRoLTUuMzA4cS0xLjQ3OSAwLTIuNTE3LTEuMzEzTDIyMC4wOTggNS43NDVRMjE2LjE1Ni4yMTkgMjA5LjIwOCAwaC0yMS4xMjJhLjQ4LjQ4IDAgMCAwLS4zNTYuMTM3LjQyLjQyIDAgMCAwLS4xMzcuM3Y1My44NDZxMCAuMTY1LjEzNy4zYS40OC40OCAwIDAgMCAuMzU2LjEzOGgxMi42NDFhLjQyLjQyIDAgMCAwIC4zMDEtLjEzNy40Mi40MiAwIDAgMCAuMTM3LS4zVjExLjgxOGg1LjMwOHExLjQ3NyAwIDIuNTE3IDEuMzY4bDI0LjUxNSAzNS44NDNxMy45NCA1LjUyOCAxMC44OSA1LjY5aDIxLjEyM3EuMjE3IDAgLjMyOC0uMTM2YS40Ny40NyAwIDAgMCAuMTA5LS4zVi40MzZhLjQ4LjQ4IDAgMCAwLS4xMDktLjNxLS4xMTItLjEzNy0uMzMtLjEzN1ptOTEuMzY2IDBIMjc5LjQ1cS0uMjIgMC0uMzI4LjEzN2EuNDYuNDYgMCAwIDAtLjEwOS4zdjEwLjk0NXEtLjAwMS4xNjQuMTA5LjMuMTA4LjEzNy4zMjguMTM3aDMxLjk1N3Y0Mi40NjRxMCAuMTY1LjEwOS4zLjExLjEzOC4zMjkuMTM4aDEyLjY0MXEuMjE5IDAgLjMyOC0uMTM3YS40Ny40NyAwIDAgMCAuMTA5LS4zVjExLjgxOGgzMS45NTdhLjQ4LjQ4IDAgMCAwIC4zNTUtLjEzNy40Mi40MiAwIDAgMCAuMTM3LS4zVi40MzdhLjQyLjQyIDAgMCAwLS4xMzctLjMuNDcuNDcgMCAwIDAtLjM1My0uMTM3bTkzLjg5MyAwaC0xMi42NDFhLjQyLjQyIDAgMCAwLS4zMDEuMTM3LjQyLjQyIDAgMCAwLS4xMzcuM1YyMS40NWgtNTEuMjJWLjQzN2EuNDIuNDIgMCAwIDAtLjEzNy0uMy41LjUgMCAwIDAtLjM1NS0uMTM3aC0xMi42NDFhLjQyLjQyIDAgMCAwLS4zLjEzNy40Mi40MiAwIDAgMC0uMTM3LjN2NTMuODQ2cTAgLjE2NS4xMzcuM2EuNDIuNDIgMCAwIDAgLjMuMTM4aDEyLjY0MWEuNDguNDggMCAwIDAgLjM1NS0uMTM3LjQyLjQyIDAgMCAwIC4xMzctLjNWMzMuMjdoNTEuMjJ2MjEuMDEycTAgLjE2NS4xMzcuM2EuNDIuNDIgMCAwIDAgLjMwMS4xMzhoMTIuNjQxYS40OC40OCAwIDAgMCAuMzU1LS4xMzcuNDIuNDIgMCAwIDAgLjEzNy0uM1YuNDM2YS40My40MyAwIDAgMC0uMTM3LS4zLjQ4LjQ4IDAgMCAwLS4zNTUtLjEzN1ptOTMuNTU4IDBoLTYxLjM0MnEtNi44NDEgMC0xMS43MSA0Ljc2LTQuODcxIDQuNzYxLTQuODcxIDExLjQ5MnYyMi4xNjJxMCA2Ljc4NiA0Ljg3MSAxMS41NDcgNC44NjkgNC43NiAxMS43MSA0Ljc2MWg2MS4zNDJhLjQyLjQyIDAgMCAwIC4zMDEtLjEzNy40Mi40MiAwIDAgMCAuMTM3LS4zVjQzLjM0cTAtLjIxOS0uMTM3LS4zMjhhLjQ4LjQ4IDAgMCAwLS4zMDEtLjExaC02MS4zNDJxLTEuMjYuMDAxLTIuMTM0LS44NzQtLjg3Ny0uODc1LS44NzctMi4wOHYtNi42NzdoNjQuMzE0cS4yMTcgMCAuMzI4LS4xMzdhLjQ4LjQ4IDAgMCAwIC4xMDktLjNWMjEuODg4cTAtLjIxOS0uMTA5LS4zMjktLjExLS4xMDgtLjMyOC0uMTA5SDQ3OS45OHYtNi42NzZxMC0xLjIwMy44NzctMi4wOC44NzQtLjg3NSAyLjEzNC0uODc2aDYxLjM0MnEuMTY0IDAgLjMwMS0uMTM3YS40Mi40MiAwIDAgMCAuMTM3LS4zVi40MzdhLjQyLjQyIDAgMCAwLS4xMzctLjMuNDIuNDIgMCAwIDAtLjMwMS0uMTM3bTkzLjQ1IDBoLTc3LjQzMnEtLjIyIDAtLjMyOC4xMzdhLjQ2LjQ2IDAgMCAwLS4xMDkuM3YxMC45NDVxLS4wMDEuMTY0LjEwOS4zLjEwOS4xMzcuMzI4LjEzN2gzMS45NTd2NDIuNDY0cTAgLjE2NS4xMDkuMy4xMS4xMzguMzI5LjEzOGgxMi42NDFxLjIxOSAwIC4zMjgtLjEzN2EuNDYuNDYgMCAwIDAgLjEwOS0uM1YxMS44MThoMzEuOTU3YS40OC40OCAwIDAgMCAuMzU1LS4xMzcuNDIuNDIgMCAwIDAgLjEzNy0uM1YuNDM3YS40Mi40MiAwIDAgMC0uMTM3LS4zLjQ4LjQ4IDAgMCAwLS4zNTMtLjEzN20yOS40MzEuMTA5cS0uMTEtLjEwOC0uMzI5LS4xMDloLTEyLjY0cS0uMjIgMC0uMzI5LjEwOS0uMTEuMTEtLjEwOS4zMjh2NTMuODQ2cS0uMDAxLjE2NS4xMDkuMy4xMDkuMTM4LjMyOS4xMzhoMTIuNjRxLjIxOCAwIC4zMjktLjEzN2EuNDguNDggMCAwIDAgLjEwOS0uM1YuNDM2cTAtLjIxNy0uMTA5LS4zMjhabTM0LjkgMTMuMTg5cS0uODIyLS45My0yLjAyNS0uOTNoLTE2LjQxNmEuNDguNDggMCAwIDEtLjM1NS0uMTM4LjQuNCAwIDAgMS0uMTM3LS4zVi45ODVxMC0uMTYzLjEzNy0uM2EuNDguNDggMCAwIDEgLjM1NS0uMTM3aDE3LjM0NnE2LjU2NyAwIDExLjMyOCA1LjMwOGw0LjIxMyA1LjA4OS04LjIwOCA5LjkwNHptMzAuMzE0LTcuNDk2UTczNy4xODkuNTQ4IDc0My44MS41NDhoMTcuMjkycS4yMTggMCAuMzI5LjExLjEwOS4xMS4xMDkuMzI3VjExLjkzcTAgLjE2NC0uMTA5LjMtLjExLjEzNy0uMzI5LjEzN2gtMTYuNDE2cS0xLjIwMyAwLTIuMDI1LjkzMWwtMTIuMDkzIDE0LjU1NiAxMi4xNDggMTQuNjY1cS44Mi44NzYgMS45Ny44NzZoMTYuNDE2cS4yMTggMCAuMzI5LjEzNy4xMDkuMTM3LjEwOS4zNTVWNTQuODNhLjQ3LjQ3IDAgMCAxLS4xMDkuM3EtLjExLjEzOC0uMzI5LjEzOGgtMTcuMjlxLTYuNjIyIDAtMTEuMzI4LTUuMzA4bC0xMC4wNjgtMTIuMTQ4LTEwLjA2OSAxMi4xNDhxLTQuNzYxIDUuMzA4LTExLjM4MiA1LjMwOGgtMTcuMjkycS0uMjIgMC0uMzI5LS4xMzdhLjU1LjU1IDAgMCAxLS4xMDktLjM1N1Y0My44MzFhLjQ3LjQ3IDAgMCAxIC4xMDktLjNxLjEwOS0uMTM4LjMyOS0uMTM3aDE2LjQxNnExLjE0NyAwIDIuMDI1LS45MzFsMTEuODczLTE0LjMzN3oiLz4KPC9zdmc+Cg==",description:"Synthetix | The derivatives liquidity protocol.",recommendedInjectedWallets:[{name:"MetaMask",url:"https://metamask.io"},{name:"Brave Wallet",url:"https://brave.com/wallet"}],gettingStartedGuide:"https://synthetix.io",explore:"https://blog.synthetix.io"};function k(e){const{network:t}=N(),n=e??t,a=e?.id===t?.id&&e?.preset===t?.preset,{data:r}=(0,i.useQuery)({queryKey:[`${n?.id}-${n?.preset}`,"ProviderForChain",{isDefaultChain:a}],enabled:Boolean(n),queryFn:()=>{if(!n)throw"OMFG";if(a){const e=p();if(e)return e}return new l.r(n.rpcUrl)}});return r}function T(){const[{wallet:e},t,n]=(0,s.Or)();if(!e)return{activeWallet:void 0,walletsInfo:void 0,connect:t,disconnect:n};const a=e?.accounts[0];return{activeWallet:a,walletsInfo:e,connect:t,disconnect:n}}function N(){const[{connectedChain:e},t]=(0,s.Um)(),n=(0,d.useCallback)((async e=>{const n=v.find((t=>t.id===e));if(n)return await t({chainId:n?.hexId})}),[t]),a=v.find((t=>t.hexId===e?.id));return a?{network:a,setNetwork:n}:{network:void 0,setNetwork:n}}function E(){const{network:e}=N(),[{wallet:t}]=(0,s.Or)(),n=t?.accounts?.[0],{data:a}=(0,i.useQuery)({queryKey:[`${e?.id}-${e?.preset}`,"Signer",n?.address],enabled:Boolean(t&&n),queryFn:()=>{if(!t||!n)throw"OMFG";return(p()??new c.Q(t.provider,"any")).getSigner(n.address)}});return a}function z(){const{network:e}=N();return k(e)}},37745:(e,t,n)=>{"use strict";n.r(t),n.d(t,{bootstrap:()=>fl});var a=n(17029),r=n(74465),o=n(50019),i=n(17150),s=n(42219),l=n(66901),c=n(26468),d=n(19433),u=n(54326),x=n(97217),h=n(59176),p=n(28535),m=n(97010),g=n(11082),f=n(84626),y=n(84586),w=n(39279);const b={"green-cyan":{500:"linear(to-tr, green.500, cyan.500)",600:"linear(to-tr, green.600, cyan.600)",700:"linear(to-tr, green.700, cyan.800)"},grey:{900:"linear(to-tr, grey.900, blackAlpha.900)"},dark:{500:"linear(to-tr, #171923, #141414)"},"pink-purple":{500:"linear(to-tr, pink.500, purple.500)",600:"linear(to-tr, pink.600, purple.600)",700:"linear(to-tr, pink.700, purple.800)"},"pink-blue":{500:"linear(to-tr, pink.500, blue.500)",600:"linear(to-tr, pink.600, blue.600)",700:"linear(to-tr, pink.700, blue.800)"},"pink-cyan":{500:"linear(to-tr, pink.500, cyan.500)",600:"linear(to-tr, pink.600, cyan.600)",700:"linear(to-tr, pink.700, cyan.800)"},orange:{500:"linear(to-tr, orange.500, orange.300)",600:"linear(to-tr, orange.600, orange.400)",700:"linear(to-tr, orange.700, orange.500)"}},j={defaultProps:{colorScheme:"cyan"},variants:{solid:(0,y.k0)((e=>{const{colorScheme:t}=e;if("gray"===t){const t=(0,w.x)("gray.100","whiteAlpha.200")(e);return{borderRadius:"base",color:(0,w.x)("black","whiteAlpha.900")(e),bg:t,_hover:{bg:(0,w.x)("gray.200","whiteAlpha.300")(e),_disabled:{bg:t}},_active:{bg:(0,w.x)("gray.300","whiteAlpha.400")(e)}}}if("cyan"===t)return{borderRadius:"base",bgGradient:b["green-cyan"][500],color:"black",_hover:{bgGradient:b["green-cyan"][600],_disabled:{background:b["green-cyan"][500]}},_active:{bgGradient:b["green-cyan"][700]}};const n=`${t}.500`,a=`${t}.600`,r=`${t}.700`,o=(0,w.x)(n,`${t}.600`)(e);return{borderRadius:"base",bg:o,color:(0,w.x)("white","white")(e),_hover:{bg:(0,w.x)(a,`${t}.500`)(e),_disabled:{bg:o}},_active:{bg:(0,w.x)(r,`${t}.400`)(e)}}})),outline:e=>"gray"===e.colorScheme||"grey"===e.colorScheme?{color:"white",borderColor:"gray.900",_hover:{bg:"whiteAlpha.200"},_active:{bg:"whiteAlpha.400"},borderRadius:"base"}:{color:"cyan.500",border:"1px solid",borderColor:"cyan.500",_hover:{bg:"rgb(0, 209, 255, 0.12)"},_active:{bg:"rgb(0, 209, 255, 0.24)"},borderRadius:"base"},ghost:{color:"cyan.500",_hover:{bg:"rgb(0, 209, 255, 0.12)"},_active:{bg:"rgb(0, 209, 255, 0.24)"},borderRadius:"base"}}},C=(0,r.B1)({useSystemColorMode:!1,initialColorMode:"dark",colors:{gray:{50:"#F6F6F6",100:"#F1F1F1",200:"#DDDDDF",300:"#C3C3C9",400:"#AAAAB2",500:"#91919B",600:"#7A7A85",700:"#63636E",800:"#4D4D57",900:"#303037"},red:{50:"#FFEDEF",100:"#FFC4CB",200:"#FF9BA7",300:"#FF7384",400:"#FF4A60",500:"#E4364B",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFF3EB",100:"#FFD8BE",200:"#FFBE92",300:"#FFA365",400:"#FF9A54",500:"#FC8738",600:"#DC732D",700:"#96420A",800:"#743002",900:"#522100"},yellow:{50:"#FFFBEF",100:"#FFF2CA",200:"#FFF5A8",300:"#FFF889",400:"#FFF458",500:"#FAE527",600:"#EAD516",700:"#B5932B",800:"#776017",900:"#55430D"},green:{50:"#EDFFF9",100:"#C3FFEC",200:"#9AE6B4",300:"#72FFD3",400:"#47FAC2",500:"#34EDB3",600:"#2BD39F",700:"#11946B",800:"#077250",900:"#015037"},blue:{50:"#EDF6FF",100:"#C4E2FF",200:"#9CCFFF",300:"#73BBFF",400:"#479EF0",500:"#3182CE",600:"#1F68AC",700:"#11508A",800:"#073968",900:"#012546"},cyan:{50:"#E5FAFF",100:"#B7F2FF",200:"#8AEAFF",300:"#5CE1FF",400:"#2ED9FF",500:"#00D1FF",600:"#00B0D6",700:"#008EAD",800:"#006D85",900:"#004B5C"},purple:{50:"#F0EEFF",100:"#CFC9FF",200:"#AEA4FF",300:"#8D7EFF",400:"#6B59FF",500:"#5744EA",600:"#402FC8",700:"#2D1EA6",800:"#1D1084",900:"#10104E"},pink:{50:"#FDE8FF",100:"#F9B6FF",200:"#F583FF",300:"#F471FF",400:"#EB46FF",500:"#EE2EFF",600:"#BE02CE",700:"#8D0099",800:"#6E0077",900:"#4E0055"},navy:{50:"#522ED1",100:"#401FB7",200:"#3719A6",300:"#2F1298",400:"#1F0777",500:"#150942",600:"#0E052F",700:"#0B0B22",800:"#0A0A25",900:"#06061B"},error:"#FF4A60",success:"#34EDB3",warning:"#FC8738"},shadows:{outline:"0 0 0 3px rgba(0, 209, 255, 1)"},fonts:{heading:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',display:'"GT America Condensed", Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'"GT America Mono", SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},components:{Popover:{variants:{responsive:{popper:{maxWidth:"unset",width:"unset"}}}},Button:j,Input:{defaultProps:{focusBorderColor:"cyan.500",errorBorderColor:"red.500"}},Select:{defaultProps:{focusBorderColor:"cyan.500",iconColor:"cyan.500",errorBorderColor:"red.500"}},NumberInput:{defaultProps:{focusBorderColor:"cyan.500",errorBorderColor:"red.500"}},Alert:{defaultProps:{variant:"left-accent"},variants:{"left-accent":e=>({container:{bg:`${e.colorScheme}.900`,borderInlineStartColor:`${e.colorScheme}.500`}}),solid:e=>({icon:{color:"white"},container:{bg:`${e.colorScheme}.500`,color:"white"}})}},Textarea:{defaultProps:{focusBorderColor:"cyan.500",colorScheme:"cyan",errorBorderColor:"red.500"}},Skeleton:{defaultProps:{startColor:"gray.900",endColor:"gray.800"}},Checkbox:{defaultProps:{colorScheme:"cyan"},baseStyle:{control:{borderColor:"cyan.500",_checked:{bg:"cyan.500",borderColor:"cyan.500",_hover:{bg:"cyan.600",borderColor:"cyan.600"}},_invalid:{borderColor:"red.500"},_disabled:{_hover:{borderColor:"transparent"}},_hover:{borderColor:"cyan.600"}}}},Radio:{defaultProps:{colorScheme:"cyan"},baseStyle:{control:{borderColor:"cyan.500",_checked:{bg:"cyan.500",borderColor:"cyan.500",_hover:{bg:"cyan.600",borderColor:"cyan.600"}},_invalid:{borderColor:"red.500"},_disabled:{_hover:{borderColor:"transparent"}},_hover:{borderColor:"cyan.600"}}}},Badge:{defaultProps:{colorScheme:"cyan"},variants:{subtle:e=>({color:`${e.colorScheme}.500`,border:"0px",display:"flex",alignItems:"center"}),solid:e=>({background:`${e.colorScheme}.500`,color:"black"}),outline:e=>({borderColor:`${e.colorScheme}.500`,color:`${e.colorScheme}.500`,boxShadow:"unset"})}},Tag:{defaultProps:{colorScheme:"cyan",variant:"solid"},variants:{solid:e=>({container:{background:`${e.colorScheme}.500`,color:"black"}})}},Accordion:{baseStyle:{container:{borderColor:"gray.900",borderWidth:"1px",borderRadius:"base"}}},Progress:{defaultProps:{colorScheme:"cyan",variant:"solid",borderRadius:"full"},variants:{solid:e=>({filledTrack:{background:`${e.colorScheme}.500`,borderRadius:"full"},track:{borderRadius:"full"}})}},Tabs:{defaultProps:{colorScheme:"cyan"},variants:{"solid-rounded":e=>({tab:{_selected:{background:`${e.colorScheme}.500`,color:"black"},color:`${e.colorScheme}.500`}}),"soft-rounded":{tab:{_selected:{background:"whiteAlpha.300",color:"cyan.500"},color:"cyan.500"}}}},Tooltip:{baseStyle:{textAlign:"center",bg:"gray.900",color:"white.500","--popper-arrow-bg":"var(--chakra-colors-gray-900)"}},Switch:{defaultProps:{colorScheme:"cyan"},baseStyle:{track:{_checked:{background:"cyan.500"}}}},Spinner:{baseStyle:{color:"cyan.500"}},Menu:{parts:["button","list","item"],baseStyle:{button:{borderRadius:"base",color:"white",span:{display:"flex",alignItems:"center",px:2},height:"100%"},list:{mt:2,bgColor:"navy.900",padding:0,border:"none",borderRadius:"md",py:0},item:{bgColor:"blackAlpha.300",color:"whiteAlpha.900",p:3,_hover:{bgColor:"whiteAlpha.400"},_active:{bgColor:"navy.900"},_first:{borderTopLeftRadius:"md",borderTopRightRadius:"md"},_last:{borderBottomLeftRadius:"md",borderBottomRightRadius:"md"},_focus:{bgColor:"blackAlpha.400"}}}}},gradients:b,textStyles:{"heading-4xl":{fontSize:{base:"60px",lg:"72px"},fontFamily:"heading",lineHeight:{base:"57.6px",lg:"72px"},fontWeight:700},"heading-3xl":{fontSize:{base:"48px",md:"60px"},fontFamily:"heading",lineHeight:{base:"57.6px",md:"72px",lg:"60px"},fontWeight:700},"heading-2xl":{fontSize:{base:"36px",md:"48px"},fontFamily:"heading",lineHeight:{base:"120%"},fontWeight:700},"heading-xl":{fontSize:{base:"30px",lg:"36px"},fontFamily:"heading",lineHeight:{base:"36px",lg:"120%"},fontWeight:700},"heading-lg":{fontSize:{base:"24px",lg:"30px"},fontFamily:"heading",lineHeight:{base:"28.8px",lg:"36px"},fontWeight:700},"heading-md":{fontSize:{base:"20px",lg:"24px"},fontFamily:"heading",lineHeight:"24px",fontWeight:700},"heading-sm":{fontSize:"16px",fontFamily:"heading",lineHeight:"19.2px",fontWeight:700},"heading-xs":{fontSize:"14px",fontFamily:"heading",lineHeight:"16.8px",fontWeight:700}},sizes:{px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem",max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",container:{sm:"640px",md:"768px",lg:"1024px",xl:"1280px"}},styles:{global:{body:{bg:"navy.900"}}}});var S=n(28165),M=n(52322);const L=()=>(0,M.jsx)(S.xB,{styles:"\n      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@200..700&display=swap');\n      @font-face {\n        font-family: 'GT America Condensed';\n        font-style: normal;\n        font-display: swap;\n        font-weight: 700;\n        src: local('GT America Condensed'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Bold.woff2') format('woff2'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Bold.woff') format('woff'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Bold.otf') format('opentype');\n      }\n      @font-face {\n        font-family: 'GT America Condensed';\n        font-style: italic;\n        font-display: swap;\n        font-weight: 700;\n        src: local('GT America Condensed'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Bold%20Italic.woff2')\n            format('woff2'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Bold%20Italic.woff')\n            format('woff'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Bold%20Italic.otf')\n            format('opentype');\n      }\n      @font-face {\n        font-family: 'GT America Condensed';\n        font-style: normal;\n        font-display: swap;\n        font-weight: 100;\n        src: local('GT America Condensed'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Thin.woff2') format('woff2'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Thin.woff') format('woff'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Thin.otf') format('opentype');\n      }\n      @font-face {\n        font-family: 'GT America Condensed';\n        font-style: italic;\n        font-display: swap;\n        font-weight: 100;\n        src: local('GT America Condensed'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Thin%20Italic.woff2')\n            format('woff2'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Thin%20Italic.woff')\n            format('woff'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Thin%20Italic.otf')\n            format('opentype');\n      }\n      @font-face {\n        font-family: 'GT America Mono';\n        font-style: normal;\n        font-display: swap;\n        font-weight: 700;\n        src: local('GT America Mono'),\n          url('https://fonts.synthetix.io/GT%20America%20Mono%20Bold.woff2') format('woff2'),\n          url('https://fonts.synthetix.io/GT%20America%20Mono%20Bold.woff') format('woff'),\n          url('https://fonts.synthetix.io/GT%20America%20Mono%20Bold.otf') format('opentype');\n      }\n      @font-face {\n        font-family: 'Lustra Text';\n        font-style: normal;\n        font-display: swap;\n        font-weight: 400;\n        src: local('Lustra Text'),\n          url('https://fonts.synthetix.io/Lustra%20Text%20Thin.otf') format('opentype');\n      }\n    "});var A=n(2784),v=n(39857);const D=({defaultOpen:e=!0})=>{const[t,n]=(0,A.useState)(e),[a,r]=(0,A.useState)(!1);return(0,M.jsxs)(l.u_,{isOpen:t,onClose:()=>{},children:[(0,M.jsx)(c.Z,{}),(0,M.jsxs)(d.h,{bgGradient:C.gradients.dark[500],pt:"10",pb:"3",borderWidth:"1px",borderColor:"gray.900","data-cy":"transaction modal",children:[(0,M.jsx)(u.x,{py:0,textAlign:"center",children:"Synthetix Terms of Service"}),(0,M.jsxs)(x.f,{fontSize:"xs",color:"gray.600",children:[(0,M.jsx)(h.x,{fontSize:"sm",children:"By clicking “I Agree” below, you agree to be bound by the terms of this Agreement. As such, you fully understand that:"}),(0,M.jsx)(p.xu,{onScroll:e=>{const t=e.currentTarget;t.scrollTop+10>=t.scrollHeight-t.offsetHeight?r(!0):r(!1)},as:"div",my:2,py:3,height:"350px",overflow:"auto",overflowX:"scroll",sx:{"::-webkit-scrollbar":{display:"block"},"::-webkit-scrollbar-track":{backgroundColor:"transparent"},"::-webkit-scrollbar-track-piece":{backgroundColor:"transparent"},"::-webkit-scrollbar-corner":{backgroundColor:"transparent"}},children:(0,M.jsx)(m.QI,{children:(0,M.jsxs)(h.x,{fontSize:"14px",children:[(0,M.jsxs)(m.HC,{children:[(0,M.jsxs)(g.r,{href:"https://synthetix.io/",target:"_blank",color:"cyan.500",_focusVisible:{outline:"none"},children:["Synthetix"," "]}),"is a blockchain-based decentralized finance project. You are participating at your own risk."]}),(0,M.jsx)(m.HC,{mt:2,children:"Synthetix is offered for use “as is” and without any guarantees regarding security. The protocol is made up of immutable code and can be accessed through a variety of user interfaces."}),(0,M.jsx)(m.HC,{mt:2,children:"No central entity operates the Synthetix protocol. Decisions related to the protocol are governed by a dispersed group of participants who collectively govern and maintain the protocol."}),(0,M.jsx)(m.HC,{mt:2,children:"Synthetix DAO does not unilaterally offer, maintain, operate, administer, or control any trading interfaces. The only user interfaces maintained by Synthetix DAO are the governance and liquidity interfaces herein."}),(0,M.jsxs)(m.HC,{mt:2,children:["You can participate in the governance process by staking SNX tokens in accordance with the rules and parameters summarized"," ",(0,M.jsx)(g.r,{href:"https://governance.synthetix.io/",target:"_blank",color:"cyan.500",_focusVisible:{outline:"none"},children:"here"}),", and/or joining the"," ",(0,M.jsx)(g.r,{color:"cyan.500",target:"_blank",href:"https://discord.com/invite/synthetix",_focusVisible:{outline:"none"},children:"Synthetix Discord"})," ","and contributing to the conversation."]}),(0,M.jsx)(m.HC,{mt:2,children:"The rules and parameters associated with the Synthetix protocol and Synthetix DAO governance are subject to change at any time."}),(0,M.jsxs)(m.HC,{mt:2,children:["Your use of Synthetix is conditioned upon your acceptance to be bound by the Synthetix Term of Use, which can be found"," ",(0,M.jsx)(g.r,{as:v.rU,to:"/terms",target:"_blank",color:"cyan.500",_focusVisible:{outline:"none"},children:"here"}),"."]}),(0,M.jsx)(m.HC,{mt:2,children:"The laws that apply to your use of Synthetix may vary based upon the jurisdiction in which you are located. We strongly encourage you to speak with legal counsel in your jurisdiction if you have any questions regarding your use of Synthetix."}),(0,M.jsx)(m.HC,{mt:2,children:"By entering into this agreement, you are not agreeing to enter into a partnership. You understand that Synthetix is a decentralized protocol provided on an “as is” basis."}),(0,M.jsx)(m.HC,{mt:2,children:"You hereby release all present and future claims against Synthetix DAO related to your use of the protocol, the SNX token, SNX DAO governance, and any other facet of the protocol."}),(0,M.jsx)(m.HC,{mt:2,children:"You agree to indemnify and hold harmless SNX DAO and its affiliates for any costs arising out of or relating to your use of the Synthetix protocol."}),(0,M.jsx)(m.HC,{mt:2,children:"You are not accessing the protocol from Burma (Myanmar), Cuba, Iran, Sudan, Syria, the Western Balkans, Belarus, Côte d’Ivoire, Democratic Republic of the Congo, Iraq, Lebanon, Liberia, Libya, North Korea, Russia, certain sanctioned areas of Ukraine, Somalia, Venezuela, Yemen, or Zimbabwe (collectively, “Prohibited Jurisdictions”), or any other jurisdiction listed as a Specially Designated National by the United States Office of Foreign Asset Control (“OFAC”)."})]})})})]}),(0,M.jsx)(f.z,{variant:"outline",_focusVisible:{outline:"none"},my:4,mx:6,onClick:()=>{a&&(localStorage.setItem(s.sO.TERMS_CONDITIONS_ACCEPTED,JSON.stringify(!0)),n(!1))},isDisabled:!a,children:"I agree"})]})]})};var I=n(28145),k=n(32684),T=n(42764),N=n(18671),E=n(30548),z=n(24761),F=n(46664),P=n(75565),H=n(43471),O=n(87013),$=n(36961);const R=Object.values(E.g5.reduce(((e,t)=>t.isSupported?t.id in e?e:Object.assign(e,{[t.id]:{id:t.id,token:t.token,label:t.label,rpcUrl:t.rpcUrl,publicRpcUrl:t.publicRpcUrl}}):e),{})),U=(0,T.S1)({connect:{autoConnectLastWallet:!0,autoConnectAllPreviousWallet:!0},wallets:window.$magicWallet?[(0,P.ZP)()]:[(0,z.Z)(),(0,P.ZP)({displayUnavailable:[P.lN.MetaMask,P.lN.Trust]}),(0,O.Z)({appUrl:"https://liquidity.synthetix.io",email:"info@synthetix.io"}),(0,H.Z)({projectId:"d6eac005846a1c3be1f8eea3a294eed9",walletConnectVersion:2}),(0,$.Z)({version:2,projectId:"d6eac005846a1c3be1f8eea3a294eed9",dappUrl:"liquidity.synthetix.io"}),(0,F.Z)()],chains:R,appMetadata:{...E.EY,name:"Synthetix Liquidity"},accountCenter:{desktop:{enabled:!1},mobile:{enabled:!1}},notify:{enabled:!1}});var W=n(81540),B=n(38035),q=n(17190),G=n(30195);const V=G.z.object({page:G.z.literal("home").optional(),accountId:G.z.string().optional(),convert:G.z.literal("snxusd").optional(),migrate:G.z.literal("snx").optional(),sort:G.z.string().optional(),dir:G.z.string().optional()}).refine((e=>!e.convert||!e.migrate),{message:"Cannot have both 'convert' and 'migrate' properties"}),Z=G.z.object({page:G.z.literal("settings"),accountId:G.z.string().optional()}),Q=G.z.union([G.z.literal("deposit"),G.z.literal("repay"),G.z.literal("claim"),G.z.literal("undelegate"),G.z.literal("withdraw"),G.z.literal("withdraw-debt"),G.z.literal("close"),G.z.literal("locked")]),Y=G.z.object({page:G.z.literal("position"),collateralSymbol:G.z.string(),manageAction:Q,accountId:G.z.string().optional()});G.z.union([V,Z,Y]);function _(e){return(0,v.fW)((t=function(e){const t=Object.entries(e).filter((([,e])=>void 0!==e));return Object.fromEntries(t)}(e),Object.fromEntries(Object.entries(t).sort((([e],[t])=>e.localeCompare(t))))));var t}function X(e){return _(e).toString()}function K(){const[e,t]=(0,v.lr)();return[A.useMemo((()=>function(e){const t=Object.fromEntries(Array.from(e));for(const e of[V,Z,Y]){const n=e.safeParse(t);if(n.success)return n.data}return console.error("Route cannot be matched",t),{}}(e)),[e]),A.useCallback((e=>{t(_(e))}),[t])]}var J=n(74409),ee=n(2338),te=n(74008),ne=n(85573),ae=n(50250),re=n(47443),oe=n(52929),ie=n(74444),se=n(79929),le=n.n(se);const ce=(e,t=18)=>(0,se.wei)(e,t).toBN(),de=(e,t=6,n=4)=>e.length<=t+n?e:`${e.substring(0,t)}...${e.substring(e.length-n)}`;function ue(e){if(!e)return"---";const t=e.toHexString();return 34===t.length?`${t.slice(0,5)}...${t.slice(-6)}`:`#${e}`}function xe(e,t,n=2){try{const a=e.toString(),r=e.toNumber(),o=r<0?-r-Math.floor(-r):r-Math.floor(r),i=(0!==o?-Math.floor(Math.log10(o)+1):0)+n;return isNaN(r)?a:r.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:i,...t})}catch(t){return e+""}}async function he(e,t){if(!t)throw new Error("Missing preset");const a=`${Number(e).toFixed(0)}-${t}`;switch(a){case"1-main":{const[{default:e},{default:t}]=await Promise.all([n.e(9393).then(n.t.bind(n,18152,19)),n.e(7278).then(n.t.bind(n,77278,19))]);return{address:e.contracts.AccountProxy,abi:t}}case"11155111-main":{const[{default:e},{default:t}]=await Promise.all([n.e(3463).then(n.t.bind(n,33463,19)),n.e(8432).then(n.t.bind(n,8432,19))]);return{address:e.contracts.AccountProxy,abi:t}}case"10-main":{const[{default:e},{default:t}]=await Promise.all([n.e(2320).then(n.t.bind(n,62320,19)),n.e(9530).then(n.t.bind(n,29530,19))]);return{address:e.contracts.AccountProxy,abi:t}}case"8453-andromeda":{const[{default:e},{default:t}]=await Promise.all([n.e(6244).then(n.t.bind(n,56244,19)),n.e(4438).then(n.t.bind(n,24438,19))]);return{address:e.contracts.AccountProxy,abi:t}}case"84532-andromeda":{const[{default:e},{default:t}]=await Promise.all([n.e(6804).then(n.t.bind(n,96804,19)),n.e(1588).then(n.t.bind(n,11588,19))]);return{address:e.contracts.AccountProxy,abi:t}}case"42161-main":{const[{default:e},{default:t}]=await Promise.all([n.e(8317).then(n.t.bind(n,98317,19)),n.e(1567).then(n.t.bind(n,61567,19))]);return{address:e.contracts.AccountProxy,abi:t}}case"421614-main":{const[{default:e},{default:t}]=await Promise.all([n.e(5783).then(n.t.bind(n,15783,19)),n.e(5523).then(n.t.bind(n,35523,19))]);return{address:e.contracts.AccountProxy,abi:t}}default:throw new Error(`Unsupported deployment ${a} for AccountProxy`)}}function pe(e){const{network:t}=(0,E.LN)(),n=e||t;return(0,I.useQuery)({queryKey:[`${n?.id}-${n?.preset}`,"AccountProxy"],enabled:Boolean(n),queryFn:async function(){if(!n)throw new Error("OMFG");return he(n.id,n.preset)},staleTime:1/0,throwOnError:!1})}var me=n(25130),ge=n.n(me),fe=n(50986);const ye=ge()("snx:useTransferAccountId");var we=n(58549);function be({isOpen:e,onClose:t,accountId:n,refetch:a,owner:r}){const[o,i]=(0,A.useState)(""),{isPending:s,mutateAsync:p}=function(e,t){const{data:n}=pe(),{activeWallet:a}=(0,E.Os)(),r=(0,E.mx)(),o=(0,E.yL)(),i=a?.address;return(0,I.useMutation)({mutationFn:async()=>{if(!n)throw new Error("AccountProxy not defined");if(!(i&&r&&o))throw new Error("Wallet is not connected");const a=new fe.CH(n.address,n.abi,r),s=await a.transferFrom(i,e,t);ye("txn",s);const l=await o.waitForTransaction(s.hash);return ye("receipt",l),l}})}(o,n),m=(0,A.useMemo)((()=>we.isAddress(o)&&o.toLowerCase()!==r.toLowerCase()),[r,o]);return(0,M.jsxs)(l.u_,{isOpen:e,onClose:t,children:[(0,M.jsx)(c.Z,{}),(0,M.jsxs)(d.h,{pb:1,border:"1px solid",rounded:"base",borderColor:"gray.900",bg:"navy.700",children:[(0,M.jsx)(u.x,{children:"Transfer Ownership"}),(0,M.jsx)(ee.o,{}),(0,M.jsxs)(x.f,{children:[(0,M.jsx)(te.i,{}),(0,M.jsxs)(h.x,{fontSize:"18px",fontWeight:700,mt:"4",children:["Account ",ue(n)]}),(0,M.jsx)(h.x,{fontSize:"14px",color:"white",mt:"2",children:"Will be transferred from:"}),(0,M.jsx)(ne.I,{mt:"2",bg:"navy.900",disabled:!0,value:r}),(0,M.jsx)(h.x,{fontSize:"14px",color:"white",mt:"2",children:"Will be transferred to:"}),(0,M.jsx)(ne.I,{mt:"2",bg:"navy.900",onChange:e=>{i(e.target.value.trim())},value:o})]}),(0,M.jsxs)(ae.m,{display:"flex",flexDirection:"column",gap:4,justifyContent:"center",children:[(0,M.jsxs)(re.b,{status:"warning",borderRadius:"6px",children:[(0,M.jsx)(oe.z,{}),(0,M.jsx)(B.k,{direction:"column",children:(0,M.jsx)(ie.X,{children:"This action cannot be undone"})})]}),s?(0,M.jsx)(W.$,{color:"cyan"}):(0,M.jsx)(f.z,{w:"100%",onClick:()=>p().then((()=>{i(""),a(),t()})),isDisabled:!m,children:"Confirm"})]})]})]})}var je=n(34572),Ce=n(38817),Se=n(27234),Me=n(80774),Le=n(79443),Ae=n(82554),ve=n(32899),De=n(45647),Ie=n(63014),ke=n(92841);function Te({chain:e,address:t,isTx:n=!1}){switch(e){case"sepolia":return`https://sepolia.etherscan.io/${n?"tx":"address"}/${t}`;case"arbitrum":return`https://arbiscan.io/${n?"tx":"address"}/${t}`;case"optimism":return`https://optimistic.etherscan.io/${n?"tx":"address"}/${t}`;case"base":return`https://basescan.org/${n?"tx":"address"}/${t}`;case"base-sepolia":return`https://sepolia.basescan.org/${n?"tx":"address"}/${t}`;default:return`https://etherscan.io/${n?"tx":"address"}/${t}`}}function Ne({chainId:e,txnHash:t}){switch(e){case 1:return`https://etherscan.io/tx/${t}`;case 11155420:return`https://sepolia.etherscan.io/tx/${t}`;case 42161:return`https://arbiscan.io/tx/${t}`;case 421614:return`https://sepolia.arbiscan.io/tx/${t}`;case 10:return`https://optimistic.etherscan.io/tx/${t}`;case 8453:return`https://basescan.org/tx/${t}`;case 84532:return`https://sepolia.basescan.org/tx/${t}`}}const Ee=({address:e})=>{const{network:t}=(0,E.LN)(),n=(0,A.useMemo)((()=>Te({chain:t?.name||"",address:e})),[e,t?.name]);return(0,M.jsxs)(B.k,{alignItems:"center",gap:2,children:[(0,M.jsx)(ke.u,{label:e,children:de(e)}),(0,M.jsx)(De.T,{onClick:()=>{navigator.clipboard.writeText(e)},cursor:"pointer",_hover:{color:"cyan"}}),(0,M.jsx)("a",{target:"_blank",href:n,rel:"noreferrer",children:(0,M.jsx)(Ie.h,{_hover:{color:"cyan"}})})]})};async function ze(e,t){if(!t)throw new Error("Missing preset");const a=`${Number(e).toFixed(0)}-${t}`;switch(a){case"1-main":{const[{default:e},{default:t}]=await Promise.all([n.e(9393).then(n.t.bind(n,18152,19)),n.e(7290).then(n.t.bind(n,47290,19))]);return{address:e.contracts.CoreProxy,abi:t}}case"11155111-main":{const[{default:e},{default:t}]=await Promise.all([n.e(3463).then(n.t.bind(n,33463,19)),n.e(8231).then(n.t.bind(n,48231,19))]);return{address:e.contracts.CoreProxy,abi:t}}case"10-main":{const[{default:e},{default:t}]=await Promise.all([n.e(2320).then(n.t.bind(n,62320,19)),n.e(5232).then(n.t.bind(n,55232,19))]);return{address:e.contracts.CoreProxy,abi:t}}case"8453-andromeda":{const[{default:e},{default:t}]=await Promise.all([n.e(6244).then(n.t.bind(n,56244,19)),n.e(9276).then(n.t.bind(n,9276,19))]);return{address:e.contracts.CoreProxy,abi:t}}case"84532-andromeda":{const[{default:e},{default:t}]=await Promise.all([n.e(6804).then(n.t.bind(n,96804,19)),n.e(5585).then(n.t.bind(n,64466,19))]);return{address:e.contracts.CoreProxy,abi:t}}case"42161-main":{const[{default:e},{default:t}]=await Promise.all([n.e(8317).then(n.t.bind(n,98317,19)),n.e(8488).then(n.t.bind(n,18488,19))]);return{address:e.contracts.CoreProxy,abi:t}}case"421614-main":{const[{default:e},{default:t}]=await Promise.all([n.e(5783).then(n.t.bind(n,15783,19)),n.e(9116).then(n.t.bind(n,19116,19))]);return{address:e.contracts.CoreProxy,abi:t}}default:throw new Error(`Unsupported deployment ${a} for CoreProxy`)}}function Fe(e){const{network:t}=(0,E.LN)(),n=e||t;return(0,I.useQuery)({queryKey:[`${n?.id}-${n?.preset}`,"CoreProxy"],enabled:Boolean(n),queryFn:async function(){if(!n)throw"OMFG";return ze(n.id,n.preset)},staleTime:1/0,throwOnError:!1})}async function Pe(e,t){const a=`${Number(e).toFixed(0)}-${t}`;switch(a){case"1-main":{const[{default:e},{default:t}]=await Promise.all([n.e(9393).then(n.t.bind(n,18152,19)),n.e(8670).then(n.t.bind(n,68670,19))]);return{address:e.contracts.TrustedMulticallForwarder,abi:t}}case"11155111-main":{const[{default:e},{default:t}]=await Promise.all([n.e(3463).then(n.t.bind(n,33463,19)),n.e(9926).then(n.t.bind(n,49926,19))]);return{address:e.contracts.TrustedMulticallForwarder,abi:t}}case"10-main":{const[{default:e},{default:t}]=await Promise.all([n.e(2320).then(n.t.bind(n,62320,19)),n.e(908).then(n.t.bind(n,70908,19))]);return{address:e.contracts.TrustedMulticallForwarder,abi:t}}case"8453-andromeda":{const[{default:e},{default:t}]=await Promise.all([n.e(6244).then(n.t.bind(n,56244,19)),n.e(4145).then(n.t.bind(n,24145,19))]);return{address:e.contracts.TrustedMulticallForwarder,abi:t}}case"84532-andromeda":{const[{default:e},{default:t}]=await Promise.all([n.e(6804).then(n.t.bind(n,96804,19)),n.e(1841).then(n.t.bind(n,31841,19))]);return{address:e.contracts.TrustedMulticallForwarder,abi:t}}case"42161-main":{const[{default:e},{default:t}]=await Promise.all([n.e(8317).then(n.t.bind(n,98317,19)),n.e(2164).then(n.t.bind(n,42164,19))]);return{address:e.contracts.TrustedMulticallForwarder,abi:t}}case"421614-main":{const[{default:e},{default:t}]=await Promise.all([n.e(5783).then(n.t.bind(n,15783,19)),n.e(7491).then(n.t.bind(n,67491,19))]);return{address:e.contracts.TrustedMulticallForwarder,abi:t}}default:throw new Error(`Unsupported deployment ${a} for Multicall3`)}}function He(e){const{network:t}=(0,E.LN)(),n=e||t;return(0,I.useQuery)({queryKey:[`${n?.id}-${n?.preset}`,"Multicall3"],enabled:Boolean(n),queryFn:async function(){if(!n)throw new Error("OMFG");return Pe(n.id,n.preset)},staleTime:1/0,throwOnError:!1})}var Oe=n(99268),$e=n(7987);const Re=ge()("snx:useManagePermissions"),Ue=({accountId:e,target:t,existing:n=[],selected:a=[]})=>{const{data:r}=Fe(),{data:o}=He(),i=(0,E.mx)(),s=(0,E.yL)();return(0,I.useMutation)({mutationFn:async()=>{if(!(r&&o&&i&&s))throw"OMFG";const{grants:l,revokes:c}=((e,t)=>{let n=[],a=[];return e.concat(t).forEach((r=>{e.includes(r)||(n=[...n,r]),t.includes(r)||(a=[...a,r])})),{grants:n,revokes:a}})(n,a);try{const n=new Oe.vU(r.abi),a=l.map((a=>({target:r.address,callData:n.encodeFunctionData("grantPermission",[e,$e.s(a),t]),allowFailure:!1,requireSuccess:!0}))),d=c.map((a=>({target:r.address,callData:n.encodeFunctionData("revokePermission",[e,$e.s(a),t]),allowFailure:!1,requireSuccess:!0}))),u=new fe.CH(o.address,o.abi,i),x=await u.aggregate3([...a,...d]);Re("txn",x);const h=await s.waitForTransaction(x.hash);Re("receipt",h)}catch(e){throw e}}})},We=["ADMIN","BURN","DELEGATE","MINT","REWARDS","WITHDRAW"];function Be(e){return e.some((e=>void 0===e))?"~":(e.map((e=>e?.address.toLowerCase()||"")).sort().join()||"").split("").reduce((function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e}),0)}function qe(e){const{data:t}=Fe(),{network:n}=(0,E.LN)(),a=(0,E.yL)();return(0,I.useQuery)({queryKey:[`${n?.id}-${n?.preset}`,"AccountPermissions",{accountId:e},{contractsHash:Be([t])}],enabled:Boolean(a&&t&&e),queryFn:async function(){if(!(a&&t&&e))throw"OMFG";const n=new fe.CH(t.address,t.abi,a);return(await n.getAccountPermissions(e)).reduce(((e,{user:t,permissions:n})=>({...e,[t.toLowerCase()]:n.map((e=>$e.F(e)))})),{})}})}function Ge(e){const{data:t}=pe(),{network:n}=(0,E.LN)(),a=(0,E.yL)();return(0,I.useQuery)({queryKey:[`${n?.id}-${n?.preset}`,"AccountOwner",{accountId:e},{contractsHash:Be([t])}],enabled:Boolean(a&&t&&e),queryFn:async function(){if(!(a&&t&&e))throw"OMFG";const n=new fe.CH(t.address,t.abi,a);return await n.ownerOf(e)}})}var Ve=n(84471);function Ze(){return(0,M.jsx)(ke.u,{label:(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)(h.x,{fontWeight:600,textAlign:"left",children:["ADMIN: Full control over the account, except for transferring ownership ",(0,M.jsx)("br",{}),"WITHDRAW: Ability to withdraw collateral from the account",(0,M.jsx)("br",{}),"REWARDS: Ability to claim rewards on behalf of the account",(0,M.jsx)("br",{}),"MINT: Ability to mint snxUSD using the account's collateral",(0,M.jsx)("br",{}),"DELEGATE: Ability to delegate the account's collateral to pools"]})}),children:(0,M.jsx)(Ve.s,{ml:1.5,w:"10px",h:"10px"})})}function Qe({accountId:e,isOpen:t,onClose:n,refetch:a,existingPermissions:r,target:o}){const[i,s]=(0,A.useState)(o||""),[p,m]=(0,A.useState)([...r||[]]),{mutateAsync:g,isPending:y}=Ue({target:i,accountId:e,existing:r||[],selected:p}),{data:w}=qe(e),{data:b}=Ge(e);(0,A.useEffect)((()=>{t||m([...r||[]])}),[r,t]);const j=(0,A.useMemo)((()=>we.isAddress(i)&&b?.toLowerCase()!==i.toLowerCase()&&(!!o||w&&!w[i.toLowerCase()])),[b,i,w,o]),C=(0,A.useMemo)((()=>p.length>0&&j),[j,p.length]);return(0,M.jsxs)(l.u_,{isOpen:t,onClose:n,children:[(0,M.jsx)(c.Z,{}),(0,M.jsxs)(d.h,{py:2,border:"1px solid",rounded:"base",borderColor:"gray.900",bg:"navy.700",children:[(0,M.jsxs)(u.x,{children:[o?"Edit":"New"," Permission"]}),(0,M.jsx)(ee.o,{}),(0,M.jsxs)(x.f,{children:[(0,M.jsx)(te.i,{}),(0,M.jsxs)(B.k,{pt:6,flexDir:"column",gap:"5",children:[!o&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(h.x,{fontWeight:600,fontSize:"14px",color:"white",children:"Address"}),(0,M.jsx)(ne.I,{bg:"navy.900",onChange:e=>{s(e.target.value.trim())},value:i,isInvalid:!j&&!!i})]}),(0,M.jsxs)(h.x,{fontWeight:600,color:"white",fontSize:"14px",children:["Select Permissions ",(0,M.jsx)(Ze,{})]}),(0,M.jsx)(B.k,{justifyContent:"space-evenly",children:We.map((e=>{const t=p.includes(e);return(0,M.jsx)(Ae.C,{onClick:()=>m((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e])),variant:"outline",color:t?"cyan":"gray",textTransform:"capitalize",cursor:"pointer",bg:"gray.900",colorScheme:t?"cyan":"gray",children:e},e)}))})]})]}),(0,M.jsx)(ae.m,{justifyContent:"center",children:y?(0,M.jsx)(W.$,{color:"cyan"}):(0,M.jsxs)(f.z,{w:"100%",onClick:()=>{g().then((()=>{s(""),m([]),a(),n()}))},isDisabled:!C,children:[o?"Update ":"Add new "," permissions"]})})]})]})}function Ye({address:e,currentPermissions:t,accountId:n,refetch:a,isOwner:r}){const{isOpen:o,onClose:i,onOpen:s}=(0,Se.q)(),{mutate:l,isPending:c,isSuccess:d}=Ue({accountId:n,target:e,selected:[],existing:t});return(0,A.useEffect)((()=>{d&&(a(),i())}),[d,i,a]),(0,M.jsxs)(Me.Tr,{children:[(0,M.jsx)(Le.Td,{width:240,borderBottomColor:"gray.900",py:"4",children:(0,M.jsx)(h.x,{fontWeight:400,color:"white",fontSize:"16px",children:(0,M.jsx)(Ee,{address:e})})}),(0,M.jsx)(Le.Td,{borderBottomColor:"gray.900",children:(0,M.jsx)(B.k,{py:2,flexWrap:"wrap",gap:3,children:We.map((e=>{const n=t.includes(e);return(0,M.jsx)(Ae.C,{color:n?"cyan":"gray",colorScheme:n?"cyan":"gray",variant:"outline",bg:n?"cyan.900":"gray.900",size:"sm",textTransform:"capitalize",children:e},e.concat("permission-row"))}))})}),(0,M.jsx)(Le.Td,{borderBottomColor:"gray.900",textAlign:"end",children:r&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Qe,{isOpen:o,onClose:i,accountId:n,refetch:a,existingPermissions:t,target:e}),(0,M.jsx)(ve.h,{onClick:s,size:"sm","aria-label":"edit",variant:"outline",colorScheme:"gray",icon:(0,M.jsx)(je.d,{}),mr:"2"}),(0,M.jsx)(ve.h,{variant:"outline",isLoading:c,colorScheme:"gray",onClick:()=>{l()},size:"sm","aria-label":"delete",icon:(0,M.jsx)(Ce.p,{})})]})})]})}var _e=n(56317),Xe=n(51906);function Ke(){const e=Array.from({length:2},((e,t)=>t));return(0,M.jsx)(M.Fragment,{children:e.map((e=>(0,M.jsxs)(Me.Tr,{borderBottomWidth:1===e?"none":"1px",children:[(0,M.jsx)(Le.Td,{borderBottomColor:"gray.900",py:"4",width:"200px",children:(0,M.jsx)(_e.O,{children:(0,M.jsxs)(h.x,{fontWeight:400,color:"white",fontSize:"16px",children:[de(Xe.d)," "]})})}),(0,M.jsx)(Le.Td,{borderBottomColor:"gray.900",py:"4",children:(0,M.jsx)(_e.O,{children:"-"})}),(0,M.jsx)(Le.Td,{borderBottomColor:"gray.900",py:"4",children:(0,M.jsx)(_e.O,{children:"-"})})]},e)))})}var Je=n(64565),et=n(70189),tt=n(78534),nt=n(5832),at=n(66983);function rt({accountId:e,refetchAccounts:t}){const{isOpen:n,onClose:a,onOpen:r}=(0,Se.q)(),{isOpen:o,onClose:i,onOpen:s}=(0,Se.q)(),{activeWallet:l}=(0,E.Os)(),{data:c,isLoading:d,refetch:u}=qe(e),{data:x,isLoading:p,refetch:m}=Ge(e),g=(0,A.useMemo)((()=>!(!x||x?.toLowerCase()!==l?.address.toLowerCase())),[x,l?.address]);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(Je.x,{flexGrow:"2",borderColor:"gray.900",borderWidth:"1px",borderRadius:"5px",p:6,sx:{borderCollapse:"separate",borderSpacing:0},bg:"navy.700",children:[(0,M.jsxs)(B.k,{mb:"2",w:"100%",justifyContent:"space-between",children:[(0,M.jsxs)(J.X,{size:"md",mb:"1",children:["Account ",ue(e)]}),g&&(0,M.jsx)(f.z,{size:"xs",onClick:()=>{r()},children:"+ New Permission"})]}),(0,M.jsxs)(et.i,{variant:"simple",children:[(0,M.jsx)(tt.h,{children:(0,M.jsxs)(Me.Tr,{children:[(0,M.jsx)(nt.Th,{py:5,textTransform:"unset",color:"gray.600",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",borderBottomColor:"gray.900",children:"Address"}),(0,M.jsxs)(nt.Th,{py:5,textTransform:"unset",color:"gray.600",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",borderBottomColor:"gray.900",children:["Permissions",(0,M.jsx)(Ze,{})]}),(0,M.jsx)(nt.Th,{py:5,textTransform:"unset",color:"gray.600",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",borderBottomColor:"gray.900"})]})}),(0,M.jsxs)(at.p,{children:[(0,M.jsxs)(Me.Tr,{children:[(0,M.jsx)(Le.Td,{width:240,py:5,borderBottomColor:"gray.900",children:(0,M.jsx)(_e.O,{isLoaded:!p,children:x&&(0,M.jsx)(h.x,{fontWeight:400,color:"white",fontSize:"16px",children:(0,M.jsx)(Ee,{address:x})})})}),(0,M.jsx)(Le.Td,{py:5,borderBottomColor:"gray.900",children:(0,M.jsx)(Ae.C,{color:"cyan",variant:"outline",bg:"cyan.900",size:"sm",textTransform:"capitalize",children:"OWNER"})}),(0,M.jsx)(Le.Td,{py:5,borderBottomColor:"gray.900",textAlign:"end",children:g&&(0,M.jsx)(f.z,{size:"xs",variant:"outline",colorScheme:"gray",color:"white",onClick:()=>{s()},children:"Transfer Ownership"})})]}),d&&(0,M.jsx)(Ke,{}),!d&&c&&Object.keys(c).filter((e=>c[e]?.length>0)).map((t=>(0,M.jsx)(Ye,{address:t,currentPermissions:c[t],accountId:e,refetch:u,isOwner:g},t)))]})]})]}),(0,M.jsx)(Qe,{isOpen:n,onClose:a,accountId:e,refetch:u}),x?(0,M.jsx)(be,{isOpen:o,onClose:i,accountId:e,owner:x,refetch:()=>{u(),m(),t()}}):null]})}const ot=()=>(0,M.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,M.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M29.3662 7.14593C29.8933 6.89158 30.5156 6.97433 30.9627 7.35822L42.9627 17.6613C43.3047 17.9549 43.5024 18.3898 43.5024 18.8485C43.5024 19.3072 43.3047 19.7421 42.9627 20.0358L30.9627 30.3388C30.5156 30.7227 29.8933 30.8054 29.3662 30.5511C28.8391 30.2967 28.5024 29.7512 28.5024 29.1515V25.5455H18.0024C17.174 25.5455 16.5024 24.8536 16.5024 24C16.5024 23.1465 17.174 22.4546 18.0024 22.4546H30.0024C30.8309 22.4546 31.5024 23.1465 31.5024 24V25.8519L39.6594 18.8485L31.5024 11.8451V13.697C31.5024 14.5505 30.8309 15.2424 30.0024 15.2424H18.0024C17.174 15.2424 16.5024 14.5505 16.5024 13.697C16.5024 12.8435 17.174 12.1515 18.0024 12.1515H28.5024V8.54547C28.5024 7.94581 28.8391 7.40028 29.3662 7.14593Z",fill:"white"}),(0,M.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.6362 40.8541C18.1092 41.1084 17.4868 41.0257 17.0397 40.6418L5.03972 30.3387C4.69774 30.0451 4.5 29.6102 4.5 29.1515C4.5 28.6928 4.69774 28.2579 5.03972 27.9642L17.0397 17.6612C17.4869 17.2773 18.1092 17.1946 18.6362 17.4489C19.1633 17.7033 19.5 18.2488 19.5 18.8485L19.5 22.4545L30 22.4545C30.8284 22.4545 31.5 23.1464 31.5 24C31.5 24.8535 30.8284 25.5454 30 25.5454L18 25.5454C17.1716 25.5454 16.5 24.8535 16.5 24L16.5 22.1481L8.34308 29.1515L16.5 36.1549L16.5 34.303C16.5 33.4495 17.1716 32.7576 18 32.7576L30 32.7576C30.8284 32.7576 31.5 33.4495 31.5 34.303C31.5 35.1565 30.8284 35.8485 30 35.8485L19.5 35.8485L19.5 39.4545C19.5 40.0542 19.1633 40.5997 18.6362 40.8541Z",fill:"white"}),(0,M.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.3584 13.6973C9.3584 12.8438 10.03 12.1519 10.8584 12.1519H12.5727C13.4011 12.1519 14.0727 12.8438 14.0727 13.6973C14.0727 14.5508 13.4011 15.2428 12.5727 15.2428H10.8584C10.03 15.2428 9.3584 14.5508 9.3584 13.6973Z",fill:"white"}),(0,M.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M38.644 34.3027C38.644 35.1562 37.9725 35.8481 37.144 35.8481L35.4298 35.8481C34.6013 35.8481 33.9298 35.1562 33.9298 34.3027C33.9298 33.4492 34.6013 32.7572 35.4298 32.7572L37.144 32.7572C37.9725 32.7572 38.644 33.4492 38.644 34.3027Z",fill:"white"})]}),it=ge()("snx:useAccounts");function st(){const{activeWallet:e}=(0,E.Os)(),{network:t}=(0,E.LN)(),n=(0,E.yL)(),{data:a}=pe(),{data:r}=He(),o=e?.address;return(0,I.useQuery)({queryKey:[`${t?.id}-${t?.preset}`,"Accounts",{walletAddress:o},{contractsHash:Be([a,r])}],enabled:Boolean(n&&o&&a&&r),queryFn:async function(){if(!(n&&o&&a&&r))throw"OMFG";const e=new fe.CH(a.address,a.abi,n),t=new fe.CH(r.address,r.abi,n);it("walletAddress",o);const i=await e.balanceOf(o);if(it("numberOfAccountTokens",i),i.eq(0))return[];const s=Array.from(Array(i.toNumber()).keys());it("accountIndexes",s);const l=s.map((t=>({target:a.address,callData:e.interface.encodeFunctionData("tokenOfOwnerByIndex",[o,t])}))),c=await t.callStatic.aggregate3(l);it("multicallResponse",c);const d=s.map((t=>{const{returnData:n}=c[t],[a]=e.interface.decodeFunctionResult("tokenOfOwnerByIndex",n);return a}));return it("accounts",d),d}})}function lt(){const{data:e,refetch:t}=st();return(0,M.jsxs)(B.k,{flexDir:"column",gap:"7",children:[(0,M.jsx)(B.k,{flexDir:"column",gap:7,children:e?.map((e=>(0,M.jsx)(rt,{accountId:e,refetchAccounts:t},e.toString())))}),(0,M.jsxs)(B.k,{flexGrow:"1",h:"fit-content",border:"1px solid",borderColor:"gray.900",rounded:"base",flexDir:"column",width:"100%",p:"6",bg:"navy.700",children:[(0,M.jsx)(ot,{}),(0,M.jsx)(J.X,{fontSize:"14px",mt:"6",children:"Delegate Permissions"}),(0,M.jsx)(h.x,{color:"gray.500",fontSize:"12px",mb:"6",children:"Delegation enables a wallet to execute functions on behalf of another wallet/account: lock, borrow, withdraw, claim, but not transfer. Manage addresses and their powers below."}),(0,M.jsx)(g.r,{href:"https://docs.synthetix.io/v/synthetix-v3-user-documentation/protocol-design/vaults#account-permissions",rel:"noopener",target:"_blank",children:(0,M.jsx)(f.z,{variant:"outline",color:"white",colorScheme:"gray",size:"xs",children:"Learn More"})})]})]})}function ct(){return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(N.q,{children:[(0,M.jsx)("title",{children:"Synthetix Account Settings"}),(0,M.jsx)("meta",{name:"description",content:"Synthetix Liquidity V3 - Account Settings"})]}),(0,M.jsxs)(B.k,{flexDir:"column",mb:16,children:[(0,M.jsx)(J.X,{mt:{base:2,sm:8},mb:6,color:"gray.50",fontSize:"1.5rem","data-cy":"account settings",children:"Account Settings"}),(0,M.jsx)(lt,{})]})]})}var dt=n(81672),ut=n(17993);const xt=({onClose:e,onConfirm:t})=>{const[n,a]=K();return(0,M.jsxs)(ut.g,{spacing:2,align:"start",children:[(0,M.jsx)(h.x,{fontWeight:"700",children:"Migrating to Synthetix V3 consists of:"}),(0,M.jsxs)(B.k,{mt:2.5,flexDir:"column",gap:2.5,fontSize:"14px",fontWeight:"400",children:[(0,M.jsxs)(B.k,{alignItems:"center",gap:2.5,children:[(0,M.jsx)(B.k,{width:4,children:(0,M.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,M.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.66602 3.33464C8.66602 4.80739 7.47211 6.0013 5.99935 6.0013C4.52659 6.0013 3.33268 4.80739 3.33268 3.33464C3.33268 1.86188 4.52659 0.667969 5.99935 0.667969C7.47211 0.667969 8.66602 1.86188 8.66602 3.33464ZM7.66602 3.33464C7.66602 4.27782 6.90541 5.01653 5.99935 5.01653C5.09329 5.01653 4.33268 4.27782 4.33268 3.33464C4.33268 2.39145 5.09329 1.65274 5.99935 1.65274C6.90541 1.65274 7.66602 2.39145 7.66602 3.33464Z",fill:"white"}),(0,M.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.99935 6.66797C3.05383 6.66797 0.666016 8.06086 0.666016 9.77908V10.3499C0.666016 10.8937 1.11373 11.3346 1.66602 11.3346H10.3327C10.885 11.3346 11.3327 10.8937 11.3327 10.3499V9.77908C11.3327 8.06086 8.94487 6.66797 5.99935 6.66797ZM1.66602 9.77908C1.66602 9.40806 1.92996 8.89769 2.73776 8.42647C3.52361 7.96806 4.67444 7.65274 5.99935 7.65274C7.32426 7.65274 8.47509 7.96806 9.26093 8.42647C10.0687 8.89769 10.3327 9.40806 10.3327 9.77908V10.3499H1.66602V9.77908Z",fill:"white"})]})}),(0,M.jsx)(h.x,{flex:1,children:"Creation of an Account on Synthetix V3"})]}),(0,M.jsxs)(B.k,{alignItems:"center",gap:2.5,children:[(0,M.jsx)(B.k,{width:4,children:(0,M.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,M.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.5701 3.50845C11.9243 2.86259 10.8771 2.86259 10.2313 3.50845C9.58542 4.1543 9.58542 5.20144 10.2313 5.8473C10.8771 6.49315 11.9243 6.49315 12.5701 5.8473C13.216 5.20144 13.216 4.1543 12.5701 3.50845ZM10.9384 4.21555C11.1937 3.96022 11.6077 3.96022 11.863 4.21555C12.1184 4.47089 12.1184 4.88486 11.863 5.14019C11.6077 5.39552 11.1937 5.39552 10.9384 5.14019C10.6831 4.88486 10.6831 4.47089 10.9384 4.21555Z",fill:"white"}),(0,M.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.4058 1.67272C14.2735 1.54042 14.1066 1.46073 13.9626 1.40881C13.8117 1.35441 13.6425 1.31534 13.4696 1.28623C13.1236 1.22799 12.7119 1.20147 12.2952 1.19264C10.2345 1.14896 8.39798 2.27302 7.20433 3.86456L6.48635 4.82186L6.43706 4.92045L3.84686 3.81037C3.65893 3.72983 3.44091 3.77182 3.29634 3.91639L1.0527 6.16003C0.857434 6.3553 0.857434 6.67188 1.0527 6.86714L1.52372 7.33816C2.18804 8.00248 3.23127 8.05696 3.95773 7.50159L4.71241 7.80346L4.31617 8.1997C4.12091 8.39496 4.12091 8.71155 4.31617 8.90681L4.37057 8.9612L3.50031 9.83146C3.30505 10.0267 3.30505 10.3433 3.50031 10.5386C3.69558 10.7338 4.01216 10.7338 4.20742 10.5386L5.07767 9.66831L6.41025 11.0009L5.54001 11.8711C5.34474 12.0664 5.34474 12.383 5.54001 12.5782C5.73527 12.7735 6.05185 12.7735 6.24711 12.5782L7.11736 11.708L7.17172 11.7624C7.36698 11.9576 7.68356 11.9576 7.87883 11.7624L8.27507 11.3661L8.57696 12.1208C8.02159 12.8473 8.07606 13.8905 8.74038 14.5548L9.21141 15.0259C9.40667 15.2211 9.72325 15.2211 9.91851 15.0259L12.1622 12.7822C12.3067 12.6377 12.3487 12.4196 12.2682 12.2317L11.1581 9.6415L11.2567 9.5922L12.214 8.87423C13.8055 7.68057 14.9296 5.84407 14.8859 3.78334C14.8771 3.36665 14.8506 2.95499 14.7923 2.60896C14.7632 2.43601 14.7241 2.26687 14.6697 2.11599C14.6178 1.97199 14.5381 1.80503 14.4058 1.67272ZM12.274 2.19241C12.6699 2.2008 13.0267 2.22574 13.3036 2.27236C13.4422 2.29568 13.5481 2.3224 13.6234 2.34953C13.6631 2.36383 13.6859 2.37534 13.6971 2.38149C13.7032 2.39263 13.7147 2.4155 13.729 2.45518C13.7562 2.53041 13.7829 2.6364 13.8062 2.77495C13.8528 3.05189 13.8778 3.40864 13.8861 3.80452C13.9215 5.4747 13.0078 7.02884 11.614 8.07423L10.7288 8.7381L8.64387 9.78058L6.29798 7.43468L7.34045 5.34972L8.00433 4.46456C9.04972 3.07071 10.6038 2.15702 12.274 2.19241ZM3.76408 4.86286L5.98907 5.81643L5.39713 7.00031L4.1224 6.49042C3.88643 6.39603 3.61693 6.45135 3.43722 6.63106C3.10409 6.96419 2.56396 6.96419 2.23083 6.63106L2.11336 6.51359L3.76408 4.86286ZM10.2621 10.0895L9.07823 10.6814L9.58813 11.9562C9.68251 12.1921 9.62719 12.4616 9.44749 12.6413C9.11435 12.9745 9.11435 13.5146 9.44749 13.8477L9.56496 13.9652L11.2157 12.3145L10.2621 10.0895ZM5.68956 8.24052L5.37683 8.55325L7.52527 10.7017L7.83801 10.389L5.68956 8.24052Z",fill:"white"}),(0,M.jsx)("path",{d:"M5.22726 11.5584C5.42252 11.3631 5.42252 11.0466 5.22726 10.8513C5.032 10.656 4.71542 10.656 4.52015 10.8513L3.50031 11.8711C3.30505 12.0664 3.30505 12.383 3.50031 12.5782C3.69558 12.7735 4.01216 12.7735 4.20742 12.5782L5.22726 11.5584Z",fill:"white"})]})}),(0,M.jsx)(h.x,{flex:1,children:"Migration of your SNX Collateral (including escrowed SNX) and your debt to a New Liquidity Position on the Liquidity App"})]}),(0,M.jsxs)(B.k,{alignItems:"center",gap:2.5,children:[(0,M.jsx)(B.k,{width:4,children:(0,M.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,M.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.833984 6.0013C0.833984 4.98878 1.6548 4.16797 2.66732 4.16797H9.33398C10.3465 4.16797 11.1673 4.98878 11.1673 6.0013V10.0013C11.1673 11.0138 10.3465 11.8346 9.33398 11.8346H2.66732C1.6548 11.8346 0.833984 11.0138 0.833984 10.0013V6.0013ZM2.66732 5.16797C2.20708 5.16797 1.83398 5.54106 1.83398 6.0013V10.0013C1.83398 10.4615 2.20708 10.8346 2.66732 10.8346H9.33398C9.79422 10.8346 10.1673 10.4615 10.1673 10.0013V6.0013C10.1673 5.54106 9.79422 5.16797 9.33398 5.16797H2.66732Z",fill:"white"}),(0,M.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.83398 3.33464C2.83398 1.58573 4.25175 0.167969 6.00065 0.167969C7.74955 0.167969 9.16732 1.58573 9.16732 3.33464V5.16797H2.83398V3.33464ZM6.00065 1.16797C4.80403 1.16797 3.83398 2.13802 3.83398 3.33464V4.16797H8.16732V3.33464C8.16732 2.13802 7.19727 1.16797 6.00065 1.16797Z",fill:"white"})]})}),(0,M.jsx)(h.x,{flex:1,children:"Lock of funds for 7 days"})]}),(0,M.jsxs)(B.k,{alignItems:"center",gap:2.5,children:[(0,M.jsx)(B.k,{width:4,children:(0,M.jsxs)("svg",{width:"10",height:"11",viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,M.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.43675 4.45617L2.13565 3.15508L9.26758 3.15508L9.26758 2.42138L2.13565 2.42138L3.43675 1.12028L2.91803 0.601562L0.731365 2.78823L2.91803 4.9749L3.43675 4.45617ZM6.56219 6.08028L7.86329 7.38138L0.731363 7.38138L0.731363 8.11508L7.86329 8.11508L6.56219 9.41617L7.08091 9.9349L9.26758 7.74823L7.08091 5.56156L6.56219 6.08028Z",fill:"white"}),(0,M.jsx)("path",{d:"M2.13565 3.15508L2.13565 2.95508L1.65281 2.95508L1.99423 3.2965L2.13565 3.15508ZM3.43675 4.45617L3.57817 4.5976L3.7196 4.45617L3.57817 4.31475L3.43675 4.45617ZM9.26758 3.15508L9.26758 3.35508L9.46758 3.35508L9.46758 3.15508L9.26758 3.15508ZM9.26758 2.42138L9.46758 2.42138L9.46758 2.22138L9.26758 2.22138L9.26758 2.42138ZM2.13565 2.42138L1.99423 2.27996L1.65281 2.62138L2.13565 2.62138L2.13565 2.42138ZM3.43675 1.12028L3.57817 1.2617L3.7196 1.12028L3.57817 0.978862L3.43675 1.12028ZM2.91803 0.601562L3.05945 0.460141L2.91803 0.31872L2.77661 0.460141L2.91803 0.601562ZM0.731365 2.78823L0.589943 2.64681L0.448522 2.78823L0.589943 2.92965L0.731365 2.78823ZM2.91803 4.9749L2.77661 5.11632L2.91803 5.25774L3.05945 5.11632L2.91803 4.9749ZM7.86329 7.38138L7.86329 7.58138L8.34613 7.58138L8.00471 7.23996L7.86329 7.38138ZM6.56219 6.08028L6.42077 5.93886L6.27935 6.08028L6.42077 6.22171L6.56219 6.08028ZM0.731363 7.38138L0.731364 7.18138L0.531363 7.18138L0.531363 7.38138L0.731363 7.38138ZM0.731363 8.11508L0.531363 8.11508L0.531363 8.31508L0.731363 8.31508L0.731363 8.11508ZM7.86329 8.11508L8.00471 8.2565L8.34613 7.91508L7.86329 7.91508L7.86329 8.11508ZM6.56219 9.41617L6.42077 9.27475L6.27935 9.41617L6.42077 9.5576L6.56219 9.41617ZM7.08091 9.9349L6.93949 10.0763L7.08091 10.2177L7.22233 10.0763L7.08091 9.9349ZM9.26758 7.74823L9.409 7.88965L9.55042 7.74823L9.409 7.60681L9.26758 7.74823ZM7.08091 5.56156L7.22233 5.42014L7.08091 5.27872L6.93949 5.42014L7.08091 5.56156ZM1.99423 3.2965L3.29533 4.5976L3.57817 4.31475L2.27707 3.01365L1.99423 3.2965ZM9.26758 2.95508L2.13565 2.95508L2.13565 3.35508L9.26758 3.35508L9.26758 2.95508ZM9.06758 2.42138L9.06758 3.15508L9.46758 3.15508L9.46758 2.42138L9.06758 2.42138ZM2.13565 2.62138L9.26758 2.62138L9.26758 2.22138L2.13565 2.22138L2.13565 2.62138ZM3.29533 0.978862L1.99423 2.27996L2.27707 2.5628L3.57817 1.2617L3.29533 0.978862ZM2.77661 0.742984L3.29533 1.2617L3.57817 0.978862L3.05945 0.460141L2.77661 0.742984ZM0.872786 2.92965L3.05945 0.742984L2.77661 0.460141L0.589943 2.64681L0.872786 2.92965ZM3.05945 4.83347L0.872786 2.64681L0.589943 2.92965L2.77661 5.11632L3.05945 4.83347ZM3.29533 4.31475L2.77661 4.83347L3.05945 5.11632L3.57817 4.5976L3.29533 4.31475ZM8.00471 7.23996L6.70361 5.93886L6.42077 6.22171L7.72187 7.5228L8.00471 7.23996ZM0.731363 7.58138L7.86329 7.58138L7.86329 7.18138L0.731364 7.18138L0.731363 7.58138ZM0.931364 8.11508L0.931364 7.38138L0.531363 7.38138L0.531363 8.11508L0.931364 8.11508ZM7.86329 7.91508L0.731364 7.91507L0.731363 8.31508L7.86329 8.31508L7.86329 7.91508ZM6.70361 9.5576L8.00471 8.2565L7.72187 7.97366L6.42077 9.27475L6.70361 9.5576ZM7.22233 9.79347L6.70361 9.27475L6.42077 9.5576L6.93949 10.0763L7.22233 9.79347ZM9.12616 7.60681L6.93949 9.79347L7.22233 10.0763L9.409 7.88965L9.12616 7.60681ZM6.93949 5.70298L9.12616 7.88965L9.409 7.60681L7.22233 5.42014L6.93949 5.70298ZM6.70361 6.22171L7.22233 5.70298L6.93949 5.42014L6.42077 5.93886L6.70361 6.22171Z",fill:"white"})]})}),(0,M.jsxs)(h.x,{flex:1,children:["(optional) Conversion of your V2 sUSD into V3 sUSD. You can",(0,M.jsx)(g.r,{color:"cyan.500",href:`?${X({convert:"snxusd",accountId:n.accountId})}`,onClick:e=>{e.preventDefault(),a({convert:"snxusd",accountId:n.accountId})},children:" convert your V2 sUSD "}),"at anytime"]})]})]}),(0,M.jsxs)(re.b,{my:6,status:"info",borderRadius:"6px",children:[(0,M.jsx)(oe.z,{}),(0,M.jsxs)(h.x,{fontSize:"14px",children:["Migration to V3 is currently only available on ",(0,M.jsx)("b",{children:"Ethereum Mainnet"}),". Learn more about",(0,M.jsx)(g.r,{color:"cyan.500",href:"https://blog.synthetix.io/synthetix-v3-migration-treasury-council-initiates-transition/",isExternal:!0,children:" migrating to V3."})]})]}),(0,M.jsx)(f.z,{width:"100%",onClick:t,children:"Continue"}),(0,M.jsx)(f.z,{width:"100%",variant:"outline",colorScheme:"gray",onClick:e,children:"Back"})]})};var ht=n(5438),pt=n(69231),mt=n(36474);const gt=({onClose:e,onConfirm:t})=>(0,M.jsxs)(ut.g,{spacing:2,align:"start",children:[(0,M.jsxs)(B.k,{children:[(0,M.jsxs)(ut.g,{gap:6,flex:1,align:"start",fontWeight:"400",fontSize:"14px",children:[(0,M.jsx)(J.X,{size:"sm",children:"Synthetix V3 is now live!"}),(0,M.jsxs)(h.x,{children:["Migrate to Synthetix V3 to ",(0,M.jsx)("b",{children:"earn fees from both V2 and V3 "}),"markets and much more:"]}),(0,M.jsxs)(m.aV,{spacing:2,children:[(0,M.jsxs)(m.HC,{children:[(0,M.jsx)(m.DE,{as:ht.n,color:"cyan.500"}),"V2 Legacy Market Fees"]}),(0,M.jsxs)(m.HC,{children:[(0,M.jsx)(m.DE,{as:ht.n,color:"cyan.500"}),"V3 SC Pool Fees"]}),(0,M.jsxs)(m.HC,{children:[(0,M.jsx)(m.DE,{as:ht.n,color:"cyan.500"}),"LP Incentives"]}),(0,M.jsxs)(m.HC,{children:[(0,M.jsx)(m.DE,{as:ht.n,color:"cyan.500"}),"Improved LP experience"]})]}),(0,M.jsxs)(h.x,{fontSize:"sm",children:["Learn more about"," ",(0,M.jsx)(g.r,{target:"_blank",color:"cyan.500",href:"https://docs.synthetix.io/v/synthetix-v3-user-documentation/liquidity-providers-aka-staking/providing-liquidity-and-earning-rewards/staking-snx-on-eth-mainnet-v3-via-migration-to-legacy-market",children:"Synthetix V3 migration process"})]})]}),(0,M.jsx)(B.k,{alignItems:"center",justifyContent:"center",flex:1,children:(0,M.jsx)(pt.E,{width:"165px",src:"/synthetix-rocket.png",alt:"Synthetix V3 Launch"})})]}),(0,M.jsx)(mt.L,{}),(0,M.jsx)(mt.L,{}),(0,M.jsx)(mt.L,{}),(0,M.jsx)(mt.L,{}),(0,M.jsx)(f.z,{width:"100%",onClick:t,children:"Start Migration"}),(0,M.jsx)(f.z,{variant:"outline",colorScheme:"gray",width:"100%",onClick:e,children:"Later"})]});var ft=n(29117),yt=n(78876),wt=n(87651);const bt=({...e})=>(0,M.jsx)(ke.u,{hasArrow:!0,bg:"gray.900",p:3,borderRadius:"4px",...e});var jt=n(90711);function Ct({value:e,prefix:t="",suffix:n="","data-cy":a,showTooltip:r}){const{formattedValue:o,preciseValue:i,isMaxUint:s}=(0,A.useMemo)((()=>{if(!e)return{formattedValue:"-",preciseValue:"-"};const t=e.eq(0)?"0.00":xe(e),n=(0,se.wei)(t.replaceAll(",",""));return{isMaxUint:(0,se.wei)(jt.PS).lte(e),formattedValue:t,preciseValue:e.eq(n)?t:e.toString()}}),[e]);return(0,M.jsx)(bt,{label:(0,M.jsx)(M.Fragment,{children:s?"You cannot borrow against this collateral":(0,M.jsxs)(M.Fragment,{children:[t,i,n]})}),isDisabled:o===i||!r,children:(0,M.jsxs)("span",{"data-cy":a,children:[t,s?"Infinite":o,!s&&n]})})}var St=n(20688),Mt=n(65311),Lt=n(25195);const At=({targetCratio:e,liquidationCratio:t,cRatio:n})=>t&&e&&n?n<=0?"success":n<t?"error":n<e?"warning":"success":"success",vt=e=>e>=Number.MAX_SAFE_INTEGER,Dt=({targetCratio:e,liquidationCratio:t,cRatio:n})=>t&&e&&n?n<0?0:n>=e?75+25*(n-e)/t:n>=t?25+50*(n-t)/(e-t):25*n/t:0,It=({value:e})=>!e||e<0?(0,M.jsx)(M.Fragment,{children:"N/A"}):vt(e)?(0,M.jsx)(M.Fragment,{children:"Infinite"}):(0,M.jsx)(Ct,{value:(0,se.wei)(e),suffix:"%"}),kt={success:{colorScheme:"green",bg:"green.900",label:"HEALTHY"},error:{colorScheme:"red",bg:"red.900",label:"Unhealthy"},warning:{colorScheme:"orange",bg:"orange.900",label:"MANAGE"}},Tt=({liquidationCratio:e,targetCratio:t,cRatio:n})=>{const a=At({targetCratio:t,liquidationCratio:e,cRatio:n});return(0,M.jsx)(Ae.C,{colorScheme:kt[a].colorScheme,border:"1px solid",bg:kt[a].bg,children:kt[a].label})},Nt=({left:e,text:t,tooltipText:n})=>(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(p.xu,{position:"absolute",height:"40%",transform:"translateX(-50%)",left:e,top:0,bottom:0,margin:"auto",children:(0,M.jsxs)(h.x,{color:"gray.700",whiteSpace:"nowrap",fontSize:"xx-small",transform:"translateY(calc(-100% - 10px) )",children:[t," ",(0,M.jsx)(ke.u,{label:n,hasArrow:!0,children:(0,M.jsx)(Ve.s,{})})]})}),(0,M.jsx)(p.xu,{position:"absolute",height:"40%",width:"1px",bg:"gray.900",left:e,top:0,bottom:0,margin:"auto"})]});function Et({newCRatio:e,currentCRatio:t,targetCratio:n,liquidationCratio:a,hasChanges:r}){const o=At(r?{targetCratio:n,liquidationCratio:a,cRatio:e}:{targetCratio:n,liquidationCratio:a,cRatio:t}),i=Dt({cRatio:e,targetCratio:n,liquidationCratio:a}),s=Dt({cRatio:t,targetCratio:n,liquidationCratio:a});return(0,M.jsxs)(B.k,{flexDir:"column",gap:"2",children:[(0,M.jsxs)(h.x,{color:"gray.500",fontSize:"xs",children:["C-Ratio"," ",(0,M.jsx)(ke.u,{textAlign:"left",label:"C-ratio is a dynamic number that represents a ratio between your locked collateral and your debt",p:"3",children:(0,M.jsx)(Ve.s,{w:"10px",h:"10px"})})]}),(0,M.jsxs)(B.k,{color:"white",fontWeight:800,fontSize:"20px",flexDir:["column","row"],alignItems:"center",gap:2,children:[(0,M.jsx)(It,{value:t}),r?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("span",{children:"→"}),(0,M.jsx)(h.x,{children:!e||e<0?"N/A":vt(e)?"Infinite":`${e.toFixed(2)} %`})]}):null,0!==(r?e||0:t)?(0,M.jsx)(Tt,{cRatio:r?e||0:t,liquidationCratio:a,targetCratio:n}):null]}),(0,M.jsxs)(p.xu,{position:"relative",height:"100px",width:"full",overflowX:"hidden",children:[(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Nt,{left:"25%",text:a?`Liquidation < ${a.toFixed(0)}%`:"Liquidation",tooltipText:"Point at which your Position gets liquidated"}),(0,M.jsx)(Nt,{left:"75%",text:n?`Borrowing Ratio ${vt(n)?"Infinite":n.toFixed(0)}%`:"Borrowing Ratio",tooltipText:"Min point at which you can borrow assets"})]}),(0,M.jsxs)(p.xu,{top:0,bottom:0,height:"12px",position:"absolute",margin:"auto",width:"100%",children:[(0,M.jsx)(Lt.E,{variant:s<i&&!(s>=100&&i>100)?`update-${o}`:o,top:0,bottom:0,height:"12px",position:"absolute",margin:"auto",left:"0",width:"100%",value:Math.min(i,s)}),(0,M.jsx)(Lt.E,{variant:s>=i?`update-${o}`:o,top:0,bottom:0,height:"12px",position:"absolute",margin:"auto",width:"100%",left:`${Math.min(i,s)}%`,display:0===e?"none":"block",value:Math.abs(i-s)})]}),(0,M.jsx)(p.xu,{bg:o,height:"12px",position:"absolute",left:`${i}%`,top:0,bottom:0,margin:"auto",display:0===e?"none":"block",children:t>0?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(St.A,{position:"absolute",right:0,top:0,transform:"translate(50%,-100%)",color:o}),(0,M.jsx)(Mt.$,{position:"absolute",right:0,bottom:0,transform:"translate(50%,100%)",color:o})]}):null})]})]})}function zt(e,t){return e&&t&&!e.eq(0)&&!t.eq(0)?t.div(e):s.GH}const Ft=({size:e,currentCollateral:t,currentDebt:n,collateralChange:a,debtChange:r,collateralPrice:o})=>(0,M.jsxs)(B.k,{alignItems:"center",gap:1.5,children:[(0,M.jsx)(h.x,{color:"white",fontSize:"lg"===e?"20px":"12px",fontWeight:"lg"===e?"800":"700",children:t&&n&&o?t.gt(0)&&n.eq(0)?"Infinite":(0,M.jsx)(Ct,{value:zt(n,t.mul(o)).mul(100),suffix:"%"}):" N/A"}),!o||a?.eq(0)&&r.eq(0)?null:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("span",{children:"→"}),(0,M.jsx)(h.x,{color:"white",fontSize:"lg"===e?"20px":"12px",fontWeight:"lg"===e?"800":"700",children:(t||s.GH).add(a).gt(0)&&(n||s.GH).add(r).eq(0)?"Infinite":(0,M.jsx)(Ct,{value:zt((n||s.GH).add(r),(t||s.GH).add(a).mul(o)).mul(100),suffix:"%"})})]})]});const Pt=["error InsufficientAllowance(uint256 required, uint256 existing)","error InsufficientBalance(uint256 required, uint256 existing)","event Approval(address indexed owner, address indexed spender, uint256 amount)","event Transfer(address indexed from, address indexed to, uint256 amount)","function allowance(address owner, address spender) view returns (uint256)","function approve(address spender, uint256 amount) returns (bool)","function balanceOf(address owner) view returns (uint256)","function decimals() view returns (uint8)","function decreaseAllowance(address spender, uint256 subtractedValue) returns (bool)","function increaseAllowance(address spender, uint256 addedValue) returns (bool)","function name() view returns (string)","function symbol() view returns (string)","function totalSupply() view returns (uint256)","function transfer(address to, uint256 amount) returns (bool)","function transferFrom(address from, address to, uint256 amount) returns (bool)","function transferableSynthetix(address account) view returns (uint256 transferable)","function collateral(address account) view returns (uint256 collateral)"];function Ht(e){const{network:t}=(0,E.LN)(),a=e||t;return(0,I.useQuery)({queryKey:[`${a?.id}-${a?.preset}`,"SNX"],enabled:Boolean(a),queryFn:async function(){if(!a)throw new Error("OMFG");return async function(e,t){const a=`${Number(e).toFixed(0)}-${t}`;switch(a){case"1-main":{const[{default:e}]=await Promise.all([n.e(9393).then(n.t.bind(n,18152,19))]);return{address:e.contracts.CollateralToken_SNX,abi:Pt}}case"11155111-main":{const[{default:e}]=await Promise.all([n.e(3463).then(n.t.bind(n,33463,19))]);return{address:e.contracts.CollateralToken_SNX,abi:Pt}}case"10-main":{const[{default:e}]=await Promise.all([n.e(2320).then(n.t.bind(n,62320,19))]);return{address:e.contracts.CollateralToken_SNX,abi:Pt}}default:throw new Error(`Unsupported deployment ${a} for SNX`)}}(a.id,a.preset)},staleTime:1/0,throwOnError:!1})}function Ot(e){const{network:t}=(0,E.LN)(),a=e||t;return(0,I.useQuery)({queryKey:[`${a?.id}-${a?.preset}`,"SystemToken"],enabled:Boolean(a),queryFn:async function(){if(!a)throw new Error("OMFG");const e=await async function(e,t){if(!t)throw new Error("Missing preset");const a=`${Number(e).toFixed(0)}-${t}`;switch(a){case"1-main":{const[{default:e}]=await Promise.all([n.e(5876).then(n.t.bind(n,55876,19))]);return e}case"11155111-main":{const[{default:e}]=await Promise.all([n.e(4299).then(n.t.bind(n,94299,19))]);return e}case"10-main":{const[{default:e}]=await Promise.all([n.e(3206).then(n.t.bind(n,13206,19))]);return e}case"8453-andromeda":{const[{default:e}]=await Promise.all([n.e(9858).then(n.t.bind(n,29858,19))]);return e}case"84532-andromeda":{const[{default:e}]=await Promise.all([n.e(2518).then(n.t.bind(n,62518,19))]);return e}case"42161-main":{const[{default:e}]=await Promise.all([n.e(7379).then(n.t.bind(n,37379,19))]);return e}case"421614-main":{const[{default:e}]=await Promise.all([n.e(7351).then(n.t.bind(n,27351,19))]);return e}default:throw new Error(`Unsupported deployment ${a} for SystemToken`)}}(a.id,a.preset);return{...e,displaySymbol:s.mF[`${a.id}-${a.preset}`]?.[e.address]?.displaySymbol??e.symbol}},staleTime:1/0,throwOnError:!1})}async function $t(e,t){return(await async function(e,t){if(!t)throw new Error("Missing preset");const a=`${Number(e).toFixed(0)}-${t}`;switch(a){case"1-main":{const[{default:e}]=await Promise.all([n.e(7302).then(n.t.bind(n,77302,19))]);return e}case"11155111-main":{const[{default:e}]=await Promise.all([n.e(6555).then(n.t.bind(n,6555,19))]);return e}case"10-main":{const[{default:e}]=await Promise.all([n.e(1778).then(n.t.bind(n,81778,19))]);return e}case"8453-andromeda":{const[{default:e}]=await Promise.all([n.e(3014).then(n.t.bind(n,33014,19))]);return e}case"84532-andromeda":{const[{default:e}]=await Promise.all([n.e(421).then(n.t.bind(n,70421,19))]);return e}case"42161-main":{const[{default:e}]=await Promise.all([n.e(5640).then(n.t.bind(n,95640,19))]);return e}case"421614-main":{const[{default:e}]=await Promise.all([n.e(3843).then(n.t.bind(n,63843,19))]);return e}default:throw new Error(`Unsupported deployment ${a} for CollateralTokens`)}}(e,t)).map((e=>({address:e.address,symbol:e.symbol,displaySymbol:e.symbol,name:e.name,decimals:e.decimals,depositingEnabled:e.depositingEnabled,issuanceRatioD18:(0,se.wei)(e.issuanceRatioD18,18,!0),liquidationRatioD18:(0,se.wei)(e.liquidationRatioD18,18,!0),liquidationRewardD18:(0,se.wei)(e.liquidationRewardD18,18,!0),minDelegationD18:(0,se.wei)(e.minDelegationD18,18,!0),oracleNodeId:e.oracleNodeId,tokenAddress:e.tokenAddress,oracle:{constPrice:e.oracle.constPrice?(0,se.wei)(e.oracle.constPrice,18,!0):void 0,externalContract:e.oracle.externalContract,stalenessTolerance:e.oracle.stalenessTolerance,pythFeedId:e.oracle.pythFeedId}})))}function Rt(e=!1,t){const{network:n}=(0,E.LN)(),a=t??n,{data:r}=Ot(t),{data:o}=Ht(E.RR),{data:i}=Ht(E.lg);return(0,I.useQuery)({enabled:Boolean(a?.id&&a?.preset&&r&&o&&i),queryKey:[`${a?.id}-${a?.preset}`,"CollateralTypes",{includeDelegationOff:e},{contractsHash:Be([r,o,i])}],queryFn:async()=>{if(!(a?.id&&a?.preset&&r&&o&&i))throw Error("useCollateralTypes should not be enabled when contracts missing");return(await $t(a.id,a.preset)).map((e=>"andromeda"===a?.preset&&"sUSDC"===e.symbol?{...e,symbol:"USDC",displaySymbol:"USDC",name:"USD Coin"}:"andromeda"===a?.preset&&"sStataUSDC"===e.symbol?{...e,symbol:"stataUSDC",displaySymbol:"Static aUSDC",name:"Static aUSDC"}:{...e,displaySymbol:s.mF[`${a.id}-${a.preset}`]?.[e.address]?.displaySymbol??e.displaySymbol??e.symbol})).filter((e=>e.tokenAddress!==r.address)).filter((e=>e.depositingEnabled||a.id===E.RR.id&&e.address===o.address||a.id===E.lg.id&&e.address===i.address)).filter((t=>e||t.minDelegationD18.lt(jt.Bz)))},staleTime:36e5})}function Ut(e,t){const{network:n}=(0,E.LN)(),a=t||n,{data:r}=Rt(!0,t);return(0,I.useQuery)({enabled:Boolean(a&&r&&e),queryKey:[`${a?.id}-${a?.preset}`,"CollateralType",{collateralSymbol:e},{contractsHash:Be(r??[])}],queryFn:async()=>{if(!(a&&r&&e))throw new Error("OMFG");const t=r.find((t=>`${t.symbol}`.toLowerCase()===`${e}`.toLowerCase()));if(!t)throw new Error("Unsupported collateral");return t},staleTime:36e5,throwOnError:!1})}n(5875),n(50509),n(38728),n(64810),n(43419),n(32825),n(16093),n(77829),n(60253),n(49225),n(79941),n(57265),n(25888),n(15840),n(37610),n(13351);var Wt=n(79155),Bt=n(99780),qt=n(10528),Gt=n(49494);const Vt=["error CannotSelfApprove(address addr)","error InvalidTransferRecipient(address addr)","error InvalidOwner(address addr)","error TokenDoesNotExist(uint256 id)","error TokenAlreadyMinted(uint256 id)"],Zt=["error InvalidArgument()","error InvalidUpdateDataSource()","error InvalidUpdateData()","error InsufficientFee()","error NoFreshUpdate()","error PriceFeedNotFoundWithinRange()","error PriceFeedNotFound()","error StalePrice()","error InvalidWormholeVaa()","error InvalidGovernanceMessage()","error InvalidGovernanceTarget()","error InvalidGovernanceDataSource()","error OldGovernanceMessage()","error InvalidWormholeAddressToSet()"],Qt={"00":"Generic compiler inserted panics.","01":"Assert evaluates to false.",11:"Arithmetic operation results in underflow or overflow.",12:"Division by zero.",21:"Cannot convert value into an enum type.",22:"Storage byte array is incorrectly encoded.",31:"Call to 'pop' on an empty array.",32:"Array index is out of bounds.",41:"Allocation of too much memory.",51:"Call to a zero-initialized variable of internal function type."};function Yt(e){return e.cause?.cause?.cause?.error?.data||e.cause?.cause?.cause?.data||e.cause?.cause?.error?.data||e.cause?.cause?.data||e.cause?.data||e?.error?.error?.error?.data||e?.error?.error?.data||e?.error?.data?.data||e?.error?.data||e?.data?.data||e?.data}function _t(e){const t=[];return e.forEach((e=>{e&&e.abi.forEach((e=>{e.startsWith("error ")&&t.push(e)}))})),t}function Xt({errorData:e,abi:t}){if(`${e}`.startsWith("0x08c379a0")){const t=`0x${e.substring(10)}`,n=Bt.$.decode(["string"],t);return console.error(n),{data:e,signature:t,name:`Revert ${n[0]}`,args:{reason:n[0]}}}if(`${e}`.startsWith("0x4e487b71")){const t=`0x${e.substring(10)}`,n=e.slice(-2);return n in Qt?(console.error(`Panic ${Qt[n]}`),{data:e,signature:t,name:`Panic ${Qt[n]}`,args:{code:n}}):(console.error(`Panic ${n}`),{data:e,signature:t,name:`Panic ${n}`,args:{code:n}})}try{const n=new Oe.vU(function(e){const t=new Set,n=[];return e.forEach((e=>{const a=Wt.HY.from(e),r=a.format(Wt.pc.sighash);t.has(r)||(n.push(a.format(Wt.pc.full)),t.add(r))})),n}([...t||[],...Zt,...Vt])).parseError(e),a=Object.fromEntries(Object.entries(n.args).filter((([e])=>`${parseInt(e)}`!==e)).map((([e,t])=>{if(t instanceof qt.O$){const n=parseFloat(Gt.formatEther(t.toString()));return n>.001?[e,n]:t.toNumber()>new Date(2e3,1,1).getTime()/1e3&&t.toNumber()<new Date(2100,1,1).getTime()/1e3?[e,new Date(1e3*t.toNumber())]:[e,parseFloat(t.toString())]}return[e,t]})));return{data:e,name:n.name,signature:n.signature,args:a}}catch(e){console.error(`Error parsing failure: ${e}`)}}function Kt(e){const{network:t}=(0,E.LN)(),a=e||t;return(0,I.useQuery)({queryKey:[`${a?.id}-${a?.preset}`,"LegacyMarket"],enabled:Boolean(a),queryFn:async function(){if(!a)throw new Error("OMFG");return async function(e,t){if(!t)throw new Error("Missing preset");const a=`${Number(e).toFixed(0)}-${t}`;switch(a){case"1-main":{const[{default:e},{default:t}]=await Promise.all([n.e(9393).then(n.t.bind(n,18152,19)),n.e(7453).then(n.t.bind(n,67453,19))]);return{address:e.contracts.LegacyMarketProxy,abi:t}}case"11155111-main":{const[{default:e},{default:t}]=await Promise.all([n.e(3463).then(n.t.bind(n,33463,19)),n.e(8025).then(n.t.bind(n,18025,19))]);return{address:e.contracts.LegacyMarketProxy,abi:t}}default:throw new Error(`Unsupported deployment ${a} for Extras`)}}(a.id,a.preset)},staleTime:1/0,throwOnError:!1})}const Jt=ge()("snx:useMigrate");var en=n(58105);function tn(e){const{network:t}=(0,E.LN)(),a=e||t;return(0,I.useQuery)({queryKey:[`${a?.id}-${a?.preset}`,"V2xSynthetix"],enabled:Boolean(a),queryFn:async function(){if(!a)throw new Error("OMFG");return async function(e,t){if(!t)throw new Error("Missing preset");const a=`${Number(e).toFixed(0)}-${t}`;switch(a){case"1-main":{const[{default:e},{default:t}]=await Promise.all([n.e(9393).then(n.t.bind(n,18152,19)),n.e(7537).then(n.t.bind(n,77537,19))]);return{address:e.contracts.V2x,abi:t}}case"11155111-main":{const[{default:e},{default:t}]=await Promise.all([n.e(3463).then(n.t.bind(n,33463,19)),n.e(4383).then(n.t.bind(n,4383,19))]);return{address:e.contracts.V2x,abi:t}}default:throw new Error(`Unsupported deployment ${a} for V2x`)}}(a.id,a.preset)},staleTime:1/0,throwOnError:!1})}function nn(){const{network:e}=(0,E.LN)(),t=(0,E.yL)(),{activeWallet:n}=(0,E.Os)(),{data:a}=He(e),{data:r}=tn(e),o=n?.address;return(0,I.useQuery)({queryKey:[`${e?.id}-${e?.preset}`,"V2Position",{walletAddress:o},{contractsHash:Be([r,a])}],enabled:Boolean(t&&o&&r&&a),queryFn:async function(){if(!(t&&o&&r&&a))throw"OMFG";const e=new Oe.vU(r.abi),n=[{target:r.address,callData:e.encodeFunctionData("collateral",[o])},{target:r.address,callData:e.encodeFunctionData("balanceOf",[o])},{target:r.address,callData:e.encodeFunctionData("debtBalanceOf",[o,$e.s("sUSD")])},{target:r.address,callData:e.encodeFunctionData("collateralisationRatio",[o])},{target:r.address,callData:e.encodeFunctionData("transferableSynthetix",[o])}],i=new fe.CH(a.address,a.abi,t),{returnData:s}=await i.callStatic.aggregate(n),[l,c,d,u,x]=[(0,se.wei)(e.decodeFunctionResult("collateral",s[0])[0]),(0,se.wei)(e.decodeFunctionResult("collateral",s[1])[0]),(0,se.wei)(e.decodeFunctionResult("collateral",s[2])[0]),(0,se.wei)(e.decodeFunctionResult("collateral",s[3])[0]),(0,se.wei)(e.decodeFunctionResult("collateral",s[4])[0])];return{collateral:l,balance:c,debt:d,cratio:u,transferableSynthetix:x}}})}const an=({items:e,...t})=>(0,M.jsx)(B.k,{p:3.5,borderRadius:"4px",background:"#1F1F34",flexDir:"column",gap:3,...t,children:e.map((({value:e,label:t},n)=>(0,M.jsxs)(B.k,{fontWeight:700,fontSize:"12px",flex:1,width:"100%",children:[(0,M.jsx)(B.k,{alignItems:"center",justify:"flex-start",textAlign:"left",flexGrow:1,children:t}),(0,M.jsx)(B.k,{alignItems:"center",justify:"flex-end",textAlign:"right",flexGrow:1,children:e})]},n)))}),rn=({onConfirm:e,collateral:t,cRatio:n,accountId:a})=>{const[r,o]=(0,A.useState)("Copy");return(0,M.jsxs)(ut.g,{spacing:6,children:[(0,M.jsxs)(h.x,{width:"100%",textAlign:"left",fontSize:"14px",children:["Your ",(0,M.jsx)("b",{children:"Collateral"})," has been migrated to Synthetix V3 System"]}),(0,M.jsxs)(re.b,{rounded:"base",colorScheme:"green",borderRadius:"6px",children:[(0,M.jsx)(B.k,{bg:"green.500",p:"1",rounded:"full",mr:"3.5",children:(0,M.jsx)(ht.n,{w:"12px",h:"12px",color:"green.900"})}),(0,M.jsxs)(h.x,{fontSize:"16px",children:[(0,M.jsx)("b",{children:"Collateral"})," successfully migrated"]})]}),(0,M.jsx)(an,{width:"100%",items:[{label:"Total Collateral",value:t},{label:"C-ratio",value:`${n}%`},{label:"Account Id",value:(0,M.jsxs)(M.Fragment,{children:[`#${a}`,(0,M.jsx)(ke.u,{label:r,closeOnClick:!1,children:(0,M.jsx)(De.T,{ml:"2",onClick:()=>{navigator.clipboard.writeText(a),o("Copied"),setTimeout((()=>{o("Copy")}),1e4)},cursor:"pointer"})})]})}]}),(0,M.jsx)(f.z,{width:"100%",onClick:e,children:"Continue"})]})},on=({onClose:e,onConfirm:t})=>{const{data:a}=Ut("SNX",E.RR),[r,o]=(0,A.useState)(!1),{data:i}=nn(),{migrate:l,transaction:c,isLoading:d,isSuccess:u,accountId:x}=function(){const[e,t]=(0,A.useState)(!1),[n,a]=(0,A.useState)(!1),{network:r}=(0,E.LN)(),o=(0,E.yL)(),i=(0,E.mx)(),{data:s}=Kt(),l=(0,I.useQueryClient)(),c=(0,A.useMemo)((()=>Math.floor(1e12*Math.random()).toString()),[]),{data:d}=(0,I.useQuery)({queryKey:[`${r?.id}-${r?.preset}`,"MigrateTxn",{contractsHash:Be([s])}],enabled:Boolean(i&&s),queryFn:async function(){if(!(s&&i&&o))throw"OMFG";const e=new fe.CH(s.address,s.abi,i),t=await i.getAddress(),n=await e.populateTransaction.migrate(c,{from:t});try{const e=await o.estimateGas(n);return{...n,gasLimit:e.mul(15).div(10)}}catch(e){if(s)try{const t=new Oe.vU(s.abi),n=Yt(e),a=t.parseError(n);console.error("error:",a)}catch{}return null}}});return{migrate:(0,A.useCallback)((async()=>{try{if(!(s&&i&&o&&d))throw"OMFG";t(!0),a(!1);const e=await i.getAddress(),n=new fe.CH(s.address,s.abi,i),u=await n.populateTransaction.migrate(c,{from:e}),x=await o.estimateGas(u),h=await n.migrate(c,{gasLimit:x.mul(15).div(10)});Jt("txn",h);const p=await o.waitForTransaction(h.hash);Jt("receipt",p),t(!1),a(!0),l.invalidateQueries({queryKey:[`${r?.id}-${r?.preset}`,"Accounts"]})}catch(e){throw t(!1),e}}),[c,s,r?.id,r?.preset,o,l,i,d]),transaction:d,isLoading:e,isSuccess:n,accountId:c}}(),{data:m}=function(){const e=(0,E.eK)(E.RR);return(0,I.useQuery)({queryKey:["rates-mainnet"],enabled:Boolean(e),queryFn:async function(){if(!e)throw"Mainnet provider missing";const{address:t,abi:a}=await n.e(1530).then(n.bind(n,21530)),r=new fe.CH(t,a,e),o=await r.ratesForCurrencies([(0,en.formatBytes32String)("SNX"),(0,en.formatBytes32String)("ETH")]);return{snx:(0,se.wei)(o[0]||0),eth:(0,se.wei)(o[1]||0)}},staleTime:6e4,refetchInterval:6e4})}(),y=m?.snx||s.GH,w=m?.eth||s.GH,[b,j]=(0,A.useState)({collateral:"0",cRatio:"0",accountId:""}),C=i?.cratio.eq(0)?"0":(0,se.wei)(1).div(i?.cratio||(0,se.wei)(1)).mul(100).toString(2),S=(0,A.useCallback)((()=>{j({cRatio:C,collateral:i?.collateral?.toString(2)||"0",accountId:x}),l()}),[x,C,i?.collateral,l]);return u?(0,M.jsx)(rn,{onConfirm:()=>t(b.accountId),cRatio:b.cRatio,collateral:b.collateral,accountId:b.accountId}):(0,M.jsxs)(ut.g,{spacing:2.5,align:"start",fontSize:"12px",children:[(0,M.jsx)(J.X,{size:"sm",children:"Summary of your migration"}),(0,M.jsx)(p.xu,{p:3.5,borderRadius:"4px",background:"#1F1F34",width:"100%",children:(0,M.jsxs)(ft.U,{fontWeight:"700",justifyContent:"space-between",children:[(0,M.jsx)(h.x,{children:"C-Ratio"}),(0,M.jsxs)(ft.U,{children:[(0,M.jsxs)(h.x,{children:[C,"%"]}),(0,M.jsx)(Tt,{cRatio:Number(C),liquidationCratio:105,targetCratio:500})]})]})}),(0,M.jsxs)(h.x,{fontSize:"12px",fontWeight:"400",color:"gray",as:"i",children:["Warning: if your c-ratio is below V3 liquidation ratio (105%), your account will be"," ",(0,M.jsx)(g.r,{target:"_blank",color:"cyan.500",href:"https://docs.synthetix.io/v/v3/for-liquidity-integrators/liquidity-positions/position-liquidations",children:"liquidated"})," ","during the migration. We recommend to commence this migration only if you have a healthy c-ratio."]}),(0,M.jsx)(p.xu,{p:3.5,borderRadius:"4px",background:"#1F1F34",width:"100%",children:(0,M.jsxs)(ut.g,{align:"stretch",spacing:3,children:[(0,M.jsxs)(ft.U,{fontWeight:"700",justifyContent:"space-between",children:[(0,M.jsxs)(h.x,{children:["SNX Collateral"," ",(0,M.jsx)(ke.u,{hasArrow:!0,textAlign:"left",label:"Your SNX Collateral will not appear on your wallet anymore as it will be deposited in your Account. You can see the details on your Dashboard.",children:(0,M.jsx)(Ve.s,{})})]}),(0,M.jsxs)(h.x,{children:[i?.collateral?.toString(2)," SNX",i&&y&&y.gt(0)?(0,M.jsxs)(M.Fragment,{children:[" ($",y.mul(i.collateral).toString(2),")"]}):null]})]}),(0,M.jsxs)(ft.U,{color:"gray",justifyContent:"space-between",children:[(0,M.jsx)(h.x,{children:"Balance"}),(0,M.jsxs)(h.x,{children:[i?.balance?.toString(2)," SNX",i&&y&&y.gt(0)?(0,M.jsxs)(M.Fragment,{children:[" ($",y.mul(i.balance).toString(2),")"]}):null]})]}),(0,M.jsxs)(ft.U,{color:"gray",justifyContent:"space-between",children:[(0,M.jsxs)(h.x,{children:["Escrowed"," ",(0,M.jsx)(ke.u,{hasArrow:!0,textAlign:"left",label:"Escrowed SNX will be locked in the V3 system until the escrowed date. It can still be delegated but not withdrawn.",children:(0,M.jsx)(Ve.s,{})})]}),(0,M.jsxs)(h.x,{children:[i?.collateral?.sub(i?.balance)?.toString(2)," SNX",i&&y&&y.gt(0)?(0,M.jsxs)(M.Fragment,{children:[" ($",y.mul(i.collateral.sub(i.balance)).toString(2),")"]}):null]})]}),(0,M.jsxs)(ft.U,{fontWeight:"700",justifyContent:"space-between",children:[(0,M.jsxs)(h.x,{children:["Debt"," ",(0,M.jsx)(ke.u,{hasArrow:!0,label:(0,M.jsx)(h.x,{textAlign:"left",children:"Your debt amount will be the same on V3. Debt is however now determined by the collateral deposited."}),children:(0,M.jsx)(Ve.s,{})})]}),(0,M.jsxs)(h.x,{children:["$",i?.debt?.toString(2)]})]})]})}),(0,M.jsx)(yt.X,{size:"sm",onChange:e=>o(e.currentTarget.checked),children:"I understand that this action cannot be undone"}),(0,M.jsx)(p.xu,{mb:3.5,p:3.5,borderRadius:"4px",background:"#1F1F34",width:"100%",children:(0,M.jsxs)(ft.U,{justifyContent:"space-between",children:[(0,M.jsx)(h.x,{children:"Estimated Gas"}),void 0!==c&&(0,M.jsx)(M.Fragment,{children:c?.gasLimit.gt(0)?(0,M.jsxs)(h.x,{children:[(0,M.jsx)(Ct,{value:(0,se.wei)((0,en.formatEther)(c?.gasLimit.mul(c.gasPrice||1).toString()||0)),suffix:" ETH"}),w?.gt(0)&&(0,M.jsxs)(M.Fragment,{children:[" ($",w.mul((0,en.formatEther)(c?.gasLimit.mul(c.gasPrice||1).toString()||0)).toString(2),")"]})]}):(0,M.jsx)(h.x,{color:"red",children:"Transaction error occured, please seek support"})})]})}),i&&a?(0,M.jsx)(wt.U,{in:i.balance.lt(a.minDelegationD18),animateOpacity:!0,unmountOnExit:!0,children:(0,M.jsxs)(re.b,{mb:3.5,status:"error",borderRadius:"6px",children:[(0,M.jsx)(oe.z,{}),(0,M.jsxs)(ie.X,{fontSize:"16px",children:["The minimal locked amount on V3 is ",(0,M.jsx)(Ct,{value:a?.minDelegationD18})," ","SNX. You can manually unstake your V2 SNX on the"," ",(0,M.jsx)(g.r,{textDecoration:"underline",href:"https://staking.synthetix.io/staking/burn",target:"_blank",children:"Staking App"})]})]})}):null,d?(0,M.jsxs)(B.k,{fontSize:"14px",fontWeight:700,alignItems:"center",justifyContent:"center",width:"100%",gap:2,p:3,color:"cyan.500",children:[(0,M.jsx)(W.$,{}),"Loading"]}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(f.z,{width:"100%",isDisabled:!(c?.gasLimit&&c?.gasLimit.gt(0)&&r),onClick:S,children:"Migrate"}),(0,M.jsx)(f.z,{variant:"outline",colorScheme:"gray",onClick:e,width:"100%",children:"Cancel"})]})]})},sn=({network:e,onClose:t,isOpen:n,onSuccess:a})=>{const r=(0,I.useQueryClient)(),[o,i]=(0,A.useState)(0);return(0,A.useEffect)((()=>{n||i(0)}),[n]),(0,M.jsxs)(l.u_,{size:"lg",isOpen:n,onClose:t,closeOnOverlayClick:!1,children:[(0,M.jsx)(c.Z,{}),(0,M.jsxs)(d.h,{mt:"100px",borderWidth:"1px",borderColor:"gray.900",bg:"navy.900",color:"white",children:[(0,M.jsxs)(B.k,{justifyContent:"space-between",p:6,alignItems:"center",children:[(0,M.jsxs)(J.X,{fontSize:"20px",children:["Migrate to Synthetix V3 on"," ",(0,M.jsx)(h.x,{as:"span",textTransform:"capitalize",children:e.name})]}),(0,M.jsx)(dt.P,{onClick:t,color:"gray"})]}),(0,M.jsx)(B.k,{width:"100%",px:6,children:(0,M.jsx)(te.i,{borderColor:"gray.900",mb:6,colorScheme:"gray"})}),(0,M.jsxs)(x.f,{pt:0,pb:6,children:[0===o&&(0,M.jsx)(gt,{onConfirm:()=>i(1),onClose:t}),1===o&&(0,M.jsx)(xt,{onConfirm:()=>i(2),onClose:()=>i(0)}),2===o&&(0,M.jsx)(on,{onConfirm:n=>{r.invalidateQueries({queryKey:[`${e?.id}-${e?.preset}`,"V2Position"]}),a(n),t()},onClose:t})]})]})]})};var ln=n(78071);function cn({symbol:e,width:t=30,height:n=30,...a}){const r=`https://assets.synthetix.io/collateral/${e?e.toUpperCase():"UNKNOWN"}.svg`;return(0,M.jsx)(pt.E,{src:r,fallbackSrc:"https://assets.synthetix.io/collateral/UNKNOWN.svg",alt:e,style:{width:t,height:n},...a})}const dn=({symbol:e,width:t=30,height:n=30,...a})=>{const r=`https://assets.synthetix.io/synths/${e??"UNKNOWN"}.svg`;return(0,M.jsx)(pt.E,{src:r,fallbackSrc:"https://assets.synthetix.io/collateral/UNKNOWN.svg",alt:e,style:{width:t,height:n},...a})},un=({onConfirm:e,network:t})=>(0,M.jsxs)(ut.g,{spacing:6,children:[(0,M.jsxs)(h.x,{width:"100%",textAlign:"left",fontSize:"14px",children:["Your migration to Synthetix V3 on ",t.name," has been successfully Completed."]}),(0,M.jsx)(B.k,{width:"100%",alignItems:"center",justifyContent:"center",flex:1,children:(0,M.jsx)(pt.E,{maxWidth:"455px",width:"100%",src:"/Migrate Launch.png",alt:"Synthetix V3 Launch"})}),(0,M.jsxs)(re.b,{borderRadius:"6px",colorScheme:"green",children:[(0,M.jsx)(B.k,{bg:"green.500",p:"1",rounded:"full",mr:"3.5",children:(0,M.jsx)(ht.n,{w:"12px",h:"12px",color:"green.900"})}),(0,M.jsx)(h.x,{fontSize:"16px",children:"Migration successfully Completed"})]}),(0,M.jsx)(ut.g,{width:"100%",spacing:4,children:(0,M.jsx)(f.z,{width:"100%",onClick:e,children:"See Position on V3"})})]});var xn=n(70065),hn=n(17479);const pn="true"===window?.localStorage?.CONTRACT_ERROR_OPEN;function mn({contractError:e}){const[t,n]=A.useState(pn);return(0,M.jsxs)(M.Fragment,{children:[t?null:(0,M.jsx)(f.z,{variant:"link",onClick:()=>n(!0),color:"inherit",fontWeight:"normal",fontStyle:"italic",children:"details..."}),(0,M.jsxs)(wt.U,{in:t,animateOpacity:!0,unmountOnExit:!0,children:[(0,M.jsx)(h.x,{fontStyle:"italic",fontSize:"0.8em",children:e.name}),(0,M.jsx)(h.x,{whiteSpace:"pre",fontSize:"0.8em",fontStyle:"italic",pl:"0.5em",children:Object.entries(e.args).map((([e,t])=>`${e}: ${t instanceof Date?(0,hn.Z)(t,"yyyy-MM-dd HH:mm:ss"):t}`)).join("\n")})]})]})}function gn(e){switch(!0){case e.failed:return"red.700";case e.disabled:case e.loading:return"gray.900";case e.success:return"green.700";default:return"gray.900"}}var fn=n(21112);const yn=(0,fn.I)({viewBox:"0 0 14 14",path:(0,M.jsx)("g",{fill:"currentColor",children:(0,M.jsx)("polygon",{points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"})})}),wn=(0,fn.I)({d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"});function bn({status:e,children:t}){switch(!0){case e.failed:return(0,M.jsx)(wn,{color:"white"});case e.success:return(0,M.jsx)(yn,{color:"white"});case e.loading:return(0,M.jsx)(W.$,{color:"white",width:6,height:6});case e.disabled:default:return(0,M.jsx)(p.xu,{__css:{display:"inline",fontWeight:"medium",textAlign:"center",fontSize:"md"},children:t})}}function jn({status:e,children:t}){return(0,M.jsx)(B.k,{width:10,height:10,minWidth:10,minHeight:10,justifyContent:"center",alignItems:"center",bg:gn(e),rounded:"full",transitionProperty:"background",transitionDuration:"normal",children:(0,M.jsx)(bn,{status:e,children:t})})}function Cn({children:e,...t}){return(0,M.jsx)(B.k,{mt:"0.5",children:(0,M.jsx)(yt.X,{size:"sm",...t,children:(0,M.jsx)(p.xu,{fontSize:"xs",opacity:"0.66",children:e})})})}function Sn({step:e,title:t,subtitle:n,checkboxLabel:a,checkboxProps:r,status:o,children:i,...s}){return(0,M.jsxs)(B.k,{position:"relative",alignItems:"center",gap:4,rounded:"lg",mt:"6",p:"4",border:"1px solid",transitionProperty:"border-color",transitionDuration:"normal",borderColor:gn(o),...s,children:[(0,M.jsx)(jn,{status:o,children:e}),(0,M.jsxs)(B.k,{direction:"column",children:[(0,M.jsx)(h.x,{color:"white",fontWeight:700,children:t}),n?(0,M.jsx)(h.x,{as:"div",fontSize:"xs",opacity:"0.66",children:n}):null,a?(0,M.jsx)(Cn,{...r,children:a}):null,i]})]})}const Mn={error:null,modalOpen:!1,txnStatus:"unsent",txnHash:null};function Ln(e,t){switch(t.type){case"prompting":return{...e,txnStatus:"prompting",modalOpen:!0,error:null};case"pending":return{...e,txnStatus:"pending",txnHash:t.payload.txnHash};case"success":return{...e,txnStatus:"success"};case"error":return{...e,txnStatus:"error",error:t.payload.error};case"settled":return{...e,modalOpen:!1,txnStatus:"unsent",error:null,txnHash:null};default:return e}}const An=["function allowance(address, address) view returns (uint256)"],vn=ge()("snx:useApprove"),Dn=["function approve(address spender, uint256 amount) returns (bool)"],In=({contractAddress:e,amount:t,spender:n})=>{const[a,r]=A.useReducer(Ln,Mn),{data:o,refetch:i}=(({contractAddress:e,spender:t})=>{const{activeWallet:n}=(0,E.Os)(),{network:a}=(0,E.LN)(),r=(0,E.yL)();return(0,I.useQuery)({queryKey:[`${a?.id}-${a?.preset}`,"Allowance",{accountAddress:n?.address},{contractAddress:e,spender:t}],queryFn:async()=>{if(!(e&&t&&n?.address&&r))throw new Error("OMG");const a=new fe.CH(e,An,r),o=await a.allowance(n.address,t);return qt.O$.from(o)},enabled:Boolean(n?.address&&e&&t&&r)})})({contractAddress:e,spender:n}),s=o&&t&&o.gte(t),{network:l}=(0,E.LN)(),c=(0,E.mx)(),d=(0,E.yL)(),u=(0,I.useQueryClient)(),x=l&&d&&c&&e&&n&&t&&!0,h=(0,I.useMutation)({mutationFn:async a=>{if(vn("contractAddress",e),vn("spender",n),vn("amount",t),!x)throw new Error("Not ready");if(s)return void r({type:"success"});r({type:"prompting"});const o=new fe.CH(e,Dn,c),i=a?jt.Bz:t;vn("amountToApprove",i);const l=o.estimateGas.approve(n,i),u=o.populateTransaction.approve(n,i),[h,p]=await Promise.all([l,u]),m=await c.sendTransaction({...p,gasLimit:h.mul(15).div(10)});vn("txn",m),r({type:"pending",payload:{txnHash:m.hash}});const g=await d.waitForTransaction(m.hash);return vn("receipt",g),g},onSuccess:async()=>{const e=`${l?.id}-${l?.preset}`;await Promise.all(["Allowance"].map((t=>u.invalidateQueries({queryKey:[e,t]})))),r({type:"success"})},onError:e=>{throw r({type:"error",payload:{error:e}}),e}});return{isReady:x,mutation:h,txnState:a,isLoading:h.isPending,approve:h.mutateAsync,refetchAllowance:i,requireApproval:!s,allowance:o}};function kn(e){const{network:t}=(0,E.LN)(),a=e||t;return(0,I.useQuery)({queryKey:[`${a?.id}-${a?.preset}`,"AllErrors"],enabled:Boolean(a),queryFn:async function(){if(!a)throw new Error("OMFG");return async function(e,t){if(!t)throw new Error("Missing preset");const a=`${Number(e).toFixed(0)}-${t}`;switch(a){case"1-main":{const[{default:e}]=await Promise.all([n.e(4226).then(n.t.bind(n,74226,19))]);return{address:void 0,abi:e}}case"11155111-main":{const[{default:e}]=await Promise.all([n.e(4317).then(n.t.bind(n,74317,19))]);return{address:void 0,abi:e}}case"10-main":{const[{default:e}]=await Promise.all([n.e(4185).then(n.t.bind(n,94185,19))]);return{address:void 0,abi:e}}case"8453-andromeda":{const[{default:e}]=await Promise.all([n.e(733).then(n.t.bind(n,80733,19))]);return{address:void 0,abi:e}}case"84532-andromeda":{const[{default:e}]=await Promise.all([n.e(6422).then(n.t.bind(n,86422,19))]);return{address:void 0,abi:e}}case"42161-main":{const[{default:e}]=await Promise.all([n.e(9118).then(n.t.bind(n,29118,19))]);return{address:void 0,abi:e}}case"421614-main":{const[{default:e}]=await Promise.all([n.e(2366).then(n.t.bind(n,2366,19))]);return{address:void 0,abi:e}}default:throw new Error(`Unsupported deployment ${a} for AllErrors`)}}(a.id,a.preset)},staleTime:1/0,throwOnError:!1})}const Tn=["function clearDebt(address coreProxyAddress, address accountProxyAddress, uint128 accountId, uint128 poolId, address collateralType)","function closePosition(address coreProxyAddress, address accountProxyAddress, uint128 accountId, uint128 poolId, address collateralType)","function decreasePosition(address coreProxyAddress, address accountProxyAddress, uint128 accountId, uint128 poolId, address collateralType, uint256 amount)","function increasePosition(address coreProxyAddress, address accountProxyAddress, uint128 accountId, uint128 poolId, address collateralType, uint256 amount)","function onERC721Received(address, address, uint256, bytes) pure returns (bytes4)","function repay(address coreProxyAddress, address accountProxyAddress, uint128 accountId, uint128 poolId, address collateralType, uint256 debtAmount)","function setupPosition(address coreProxyAddress, address accountProxyAddress, uint128 accountId, uint128 poolId, address collateralType, uint256 amount)","error NotEnoughAllowance(address walletAddress, address tokenAddress, uint256 requiredAllowance, uint256 availableAllowance)","error NotEnoughBalance(address walletAddress, address tokenAddress, uint256 requiredAmount, uint256 availableAmount)"];async function Nn(e,t){const n=`${Number(e).toFixed(0)}-${t}`;switch(n){case"1-main":return{address:"0x21e9D735Db12221a787317954bDdD7144353b5D7",abi:Tn};case"11155111-main":return{address:"0xfaa4d64521db83195b5b3ff502812b267dde4a53",abi:Tn};case"42161-main":return{address:"0x42c7720912fdc1cdff1f73ff0eee5f0af8522491",abi:Tn};case"421614-main":return{address:"0xa86339a1ce701b0c708a56cae3d5142f675e1540",abi:Tn};case"10-main":return{address:"0x8D99de5C3528883fcb9cCFa8E13ffF6330e45CDB",abi:Tn};default:throw new Error(`Unsupported deployment ${n} for ClosePosition`)}}async function En(e,t){return Nn(e,t)}function zn(e){const{network:t}=(0,E.LN)(),n=e||t;return(0,I.useQuery)({queryKey:[`${n?.id}-${n?.preset}`,"ClosePosition"],enabled:Boolean(n),queryFn:async function(){if(!n)throw"OMFG";return En(n.id,n.preset)},staleTime:1/0,throwOnError:!1})}function Fn(e){const{network:t}=(0,E.LN)(),n=e||t;return(0,I.useQuery)({queryKey:[`${n?.id}-${n?.preset}`,"PositionManager"],enabled:Boolean(n),queryFn:async function(){if(!n)throw"OMFG";return Nn(n.id,n.preset)},staleTime:1/0,throwOnError:!1})}const Pn=["constructor(address CoreProxy_, address AccountProxy_, address SpotMarketProxy_, address $USDC_, address $stataUSDC_, address $synthUSDC_, address $synthStataUSDC_, uint128 synthIdUSDC_, uint128 synthIdStataUSDC_, uint128 poolId_)","function $USDC() view returns (address)","function $stataUSDC() view returns (address)","function $synthStataUSDC() view returns (address)","function $synthUSDC() view returns (address)","function AccountProxy() view returns (address)","function CoreProxy() view returns (address)","function SpotMarketProxy() view returns (address)","function clearDebt(uint128 accountId)","function closePosition(uint128 accountId)","function decreasePosition(uint128 accountId, uint256 usdcAmount)","function getAccounts() view returns (uint128[] accountIds)","function increasePosition(uint128 accountId, uint256 usdcAmount)","function onERC721Received(address, address, uint256, bytes) pure returns (bytes4)","function poolId() view returns (uint128)","function repay(uint128 accountId, uint256 debtAmount)","function setupPosition(uint256 usdcAmount)","function synthIdStataUSDC() view returns (uint128)","function synthIdUSDC() view returns (uint128)","function withdraw(uint128 accountId)","error AccountExists()","error NotEnoughAllowance(address walletAddress, address tokenAddress, uint256 requiredAllowance, uint256 availableAllowance)","error NotEnoughBalance(address walletAddress, address tokenAddress, uint256 requiredAmount, uint256 availableAmount)"];async function Hn(e,t){const n=`${Number(e).toFixed(0)}-${t}`;switch(n){case"8453-andromeda":return{address:"0x2d86be18716814a7d9c955149967748eab41254b",abi:Pn};case"84532-andromeda":return{address:"0x289a99810ec2e60ee1b0d89344b6c5c00e8a76a6",abi:Pn};default:throw new Error(`Unsupported deployment ${n} for PositionManagerAndromedaStataUSDC`)}}const On=["constructor(address CoreProxy_, address AccountProxy_, address SpotMarketProxy_, address $USDC_, address $synthUSDC_, uint128 synthIdUSDC_, uint128 poolId_)","function $USDC() view returns (address)","function $synthUSDC() view returns (address)","function AccountProxy() view returns (address)","function CoreProxy() view returns (address)","function SpotMarketProxy() view returns (address)","function clearDebt(uint128 accountId)","function closePosition(uint128 accountId)","function decreasePosition(uint128 accountId, uint256 usdcAmount)","function getAccounts() view returns (uint128[] accountIds)","function increasePosition(uint128 accountId, uint256 usdcAmount)","function onERC721Received(address, address, uint256, bytes) pure returns (bytes4)","function poolId() view returns (uint128)","function repay(uint128 accountId, uint256 debtAmount)","function setupPosition(uint256 usdcAmount)","function synthIdUSDC() view returns (uint128)","function withdraw(uint128 accountId)","error AccountExists()","error NotEnoughAllowance(address walletAddress, address tokenAddress, uint256 requiredAllowance, uint256 availableAllowance)","error NotEnoughBalance(address walletAddress, address tokenAddress, uint256 requiredAmount, uint256 availableAmount)"];async function $n(e,t){const n=`${Number(e).toFixed(0)}-${t}`;switch(n){case"8453-andromeda":return{address:"0xae3fbedc18675fb30d59ee85080deeec485d17b2",abi:On};case"84532-andromeda":return{address:"0x83a3f789d3ea78bbad9389e2f574f11b11b09c07",abi:On};default:throw new Error(`Unsupported deployment ${n} for PositionManagerAndromedaStataUSDC`)}}const Rn=["constructor(address pool, address rewardsController)","error ECDSAInvalidSignature()","error ECDSAInvalidSignatureLength(uint256 length)","error ECDSAInvalidSignatureS(bytes32 s)","error SafeERC20FailedOperation(address token)","event Approval(address indexed owner, address indexed spender, uint256 amount)","event Deposit(address indexed sender, address indexed owner, uint256 assets, uint256 shares)","event Initialized(uint8 version)","event Initialized(address indexed aToken, string staticATokenName, string staticATokenSymbol)","event RewardTokenRegistered(address indexed reward, uint256 startIndex)","event Transfer(address indexed from, address indexed to, uint256 amount)","event Withdraw(address indexed sender, address indexed receiver, address indexed owner, uint256 assets, uint256 shares)","function DOMAIN_SEPARATOR() view returns (bytes32)","function INCENTIVES_CONTROLLER() view returns (address)","function METADEPOSIT_TYPEHASH() view returns (bytes32)","function METAWITHDRAWAL_TYPEHASH() view returns (bytes32)","function PERMIT_TYPEHASH() view returns (bytes32)","function POOL() view returns (address)","function STATIC__ATOKEN_LM_REVISION() view returns (uint256)","function aToken() view returns (address)","function allowance(address, address) view returns (uint256)","function approve(address spender, uint256 amount) returns (bool)","function asset() view returns (address)","function balanceOf(address) view returns (uint256)","function claimRewards(address receiver, address[] rewards)","function claimRewardsOnBehalf(address onBehalfOf, address receiver, address[] rewards)","function claimRewardsToSelf(address[] rewards)","function collectAndUpdateRewards(address reward) returns (uint256)","function convertToAssets(uint256 shares) view returns (uint256)","function convertToShares(uint256 assets) view returns (uint256)","function decimals() view returns (uint8)","function deposit(uint256 assets, address receiver, uint16 referralCode, bool depositToAave) returns (uint256)","function deposit(uint256 assets, address receiver) returns (uint256)","function getClaimableRewards(address user, address reward) view returns (uint256)","function getCurrentRewardsIndex(address reward) view returns (uint256)","function getTotalClaimableRewards(address reward) view returns (uint256)","function getUnclaimedRewards(address user, address reward) view returns (uint256)","function initialize(address newAToken, string staticATokenName, string staticATokenSymbol)","function isRegisteredRewardToken(address reward) view returns (bool)","function maxDeposit(address) view returns (uint256)","function maxMint(address) view returns (uint256)","function maxRedeem(address owner) view returns (uint256)","function maxWithdraw(address owner) view returns (uint256)","function metaDeposit(address depositor, address receiver, uint256 assets, uint16 referralCode, bool depositToAave, uint256 deadline, tuple(address owner, address spender, uint256 value, uint256 deadline, uint8 v, bytes32 r, bytes32 s) permit, tuple(uint8 v, bytes32 r, bytes32 s) sigParams) returns (uint256)","function metaWithdraw(address owner, address receiver, uint256 shares, uint256 assets, bool withdrawFromAave, uint256 deadline, tuple(uint8 v, bytes32 r, bytes32 s) sigParams) returns (uint256, uint256)","function mint(uint256 shares, address receiver) returns (uint256)","function name() view returns (string)","function nonces(address) view returns (uint256)","function permit(address owner, address spender, uint256 value, uint256 deadline, uint8 v, bytes32 r, bytes32 s)","function previewDeposit(uint256 assets) view returns (uint256)","function previewMint(uint256 shares) view returns (uint256)","function previewRedeem(uint256 shares) view returns (uint256)","function previewWithdraw(uint256 assets) view returns (uint256)","function rate() view returns (uint256)","function redeem(uint256 shares, address receiver, address owner) returns (uint256)","function redeem(uint256 shares, address receiver, address owner, bool withdrawFromAave) returns (uint256, uint256)","function refreshRewardTokens()","function rewardTokens() view returns (address[])","function symbol() view returns (string)","function totalAssets() view returns (uint256)","function totalSupply() view returns (uint256)","function transfer(address to, uint256 amount) returns (bool)","function transferFrom(address from, address to, uint256 amount) returns (bool)","function withdraw(uint256 assets, address receiver, address owner) returns (uint256)"];function Un(e){const{network:t}=(0,E.LN)(),a=e||t;return(0,I.useQuery)({queryKey:[`${a?.id}-${a?.preset}`,"StaticAaveUSDC"],enabled:Boolean(a),queryFn:async function(){if(!a)throw new Error("OMFG");return async function(e,t){if(!t)throw new Error("Missing preset");const a=`${Number(e).toFixed(0)}-${t}`;switch(a){case"8453-andromeda":{const[{default:e}]=await Promise.all([n.e(6244).then(n.t.bind(n,56244,19))]);return{address:e.contracts.CollateralToken_stataBasUSDC,abi:Rn}}case"84532-andromeda":{const[{default:e}]=await Promise.all([n.e(6804).then(n.t.bind(n,96804,19))]);return{address:e.contracts.CollateralToken_stataUSDC,abi:Rn}}default:throw new Error(`Unsupported deployment ${a} for Extras`)}}(a.id,a.preset)},staleTime:1/0,throwOnError:!1})}function Wn(){const{data:e}=kn(),{data:t}=zn(),{data:n}=Un(),{data:a}=Fn(),{data:r}=function(e){const{network:t}=(0,E.LN)(),n=e||t;return(0,I.useQuery)({queryKey:[`${n?.id}-${n?.preset}`,"PositionManagerAndromedaStataUSDC"],enabled:Boolean(n),queryFn:async function(){if(!n)throw"OMFG";return Hn(n.id,n.preset)},staleTime:1/0,throwOnError:!1})}(),{data:o}=function(e){const{network:t}=(0,E.LN)(),n=e||t;return(0,I.useQuery)({queryKey:[`${n?.id}-${n?.preset}`,"PositionManagerAndromedaStataUSDC"],enabled:Boolean(n),queryFn:async function(){if(!n)throw"OMFG";return $n(n.id,n.preset)},staleTime:1/0,throwOnError:!1})}();return(0,A.useCallback)((i=>function({error:e,abi:t}){const n=Yt(e);if(n)return Xt({errorData:n,abi:t});console.error({error:e})}({error:i,abi:_t([e,t,n,a,r,o])})),[e,t,a,r,o,n])}const Bn=ge()("snx:useMigrateUSD");const qn=["function balanceOf(address) view returns (uint256)","function decimals() view returns (uint8)"],Gn=(e,t)=>{const{activeWallet:n}=(0,E.Os)(),{network:a}=(0,E.LN)(),r=t||a,o=(0,E.eK)(r),i=n?.address;return(0,I.useQuery)({enabled:Boolean(i&&e&&o&&r),queryKey:[`${r?.id}-${r?.preset}`,"TokenBalance",{accountAddress:i,tokenAddress:e}],queryFn:async()=>{if(!(i&&e&&o&&r))throw"OMFG";const t=new fe.CH(e,qn,o),[n,a]=await Promise.all([t.balanceOf(i),t.decimals()]);return{balance:n,decimals:a}},select:({balance:e,decimals:t})=>(0,se.wei)(e,t),refetchInterval:12e4})};async function Vn(e,t){if(!t)throw new Error("Missing preset");const a=`${Number(e).toFixed(0)}-${t}`;switch(a){case"1-main":{const[{default:e},{default:t}]=await Promise.all([n.e(9393).then(n.t.bind(n,18152,19)),n.e(8634).then(n.t.bind(n,38634,19))]);return{address:e.contracts.USDProxy,abi:t}}case"11155111-main":{const[{default:e},{default:t}]=await Promise.all([n.e(3463).then(n.t.bind(n,33463,19)),n.e(8538).then(n.t.bind(n,78538,19))]);return{address:e.contracts.USDProxy,abi:t}}case"10-main":{const[{default:e},{default:t}]=await Promise.all([n.e(2320).then(n.t.bind(n,62320,19)),n.e(6137).then(n.t.bind(n,46137,19))]);return{address:e.contracts.USDProxy,abi:t}}case"8453-andromeda":{const[{default:e},{default:t}]=await Promise.all([n.e(6244).then(n.t.bind(n,56244,19)),n.e(1020).then(n.t.bind(n,71020,19))]);return{address:e.contracts.USDProxy,abi:t}}case"84532-andromeda":{const[{default:e},{default:t}]=await Promise.all([n.e(6804).then(n.t.bind(n,96804,19)),n.e(2387).then(n.t.bind(n,42387,19))]);return{address:e.contracts.USDProxy,abi:t}}case"42161-main":{const[{default:e},{default:t}]=await Promise.all([n.e(8317).then(n.t.bind(n,98317,19)),n.e(2992).then(n.t.bind(n,12992,19))]);return{address:e.contracts.USDProxy,abi:t}}case"421614-main":{const[{default:e},{default:t}]=await Promise.all([n.e(5783).then(n.t.bind(n,15783,19)),n.e(6864).then(n.t.bind(n,36864,19))]);return{address:e.contracts.USDProxy,abi:t}}default:throw new Error(`Unsupported deployment ${a} for USDProxy`)}}function Zn(e){const{network:t}=(0,E.LN)(),n=e||t;return(0,I.useQuery)({queryKey:[`${n?.id}-${n?.preset}`,"USDProxy"],enabled:Boolean(n),queryFn:async function(){if(!n)throw new Error("OMFG");return Vn(n.id,n.preset)},staleTime:1/0,throwOnError:!1})}function Qn(e){const{data:t}=tn(e),n=(0,E.eK)(e);return(0,I.useQuery)({queryKey:[`${e?.id}-${e?.preset}`,"V2 sUSD",{contractsHash:Be([t])}],enabled:Boolean(n&&t),queryFn:async function(){if(!n||!t)throw"OMFG";const e=new fe.CH(t.address,t.abi,n);return await e.synths($e.s("sUSD"))}})}var Yn=n(45501),_n=n(7754);const Xn={sm:{fontSize:"12px",fontWeight:"700",lineHeight:"14px"},md:{fontSize:"16px",fontWeight:"400",lineHeight:"16px"},lg:{fontSize:"18px",fontWeight:"800",lineHeight:"24px"}};function Kn({formatFn:e,value:t,newValue:n,hasChanges:a,"data-cy":r,size:o="lg",isPending:i}){return(0,M.jsxs)(B.k,{gap:"1",alignItems:"center",color:"white",fontSize:Xn[o].fontSize,fontWeight:Xn[o].fontWeight,lineHeight:Xn[o].lineHeight,flexWrap:"wrap","data-cy":r,children:[(0,M.jsx)(h.x,{as:"div","data-cy":"change stats current",textAlign:"center",opacity:t&&t.eq(0)?"70%":void 0,whiteSpace:"nowrap",children:i?"~":e(t)}),!a||i||t&&t.eq(n)?null:(0,M.jsxs)(B.k,{gap:"1",alignItems:"center",isTruncated:!0,children:[(0,M.jsx)(_n.m,{}),(0,M.jsx)(h.x,{as:"div","data-cy":"change stats new",textAlign:"center",opacity:n.eq(0)?"70%":void 0,whiteSpace:"nowrap",children:e(n)})]})]})}const Jn=({onConfirm:e,v2Balance:t,v3Balance:n,amount:a})=>(0,M.jsxs)(ut.g,{spacing:6,children:[(0,M.jsxs)(h.x,{width:"100%",textAlign:"left",fontSize:"14px",children:["Your ",(0,M.jsx)("b",{children:"V2 sUSD"})," has been converted to ",(0,M.jsx)("b",{children:"V3 sUSD"})]}),(0,M.jsxs)(re.b,{rounded:"base",colorScheme:"green",borderRadius:"6px",children:[(0,M.jsx)(B.k,{bg:"green.500",p:"1",rounded:"full",mr:"3.5",children:(0,M.jsx)(ht.n,{w:"12px",h:"12px",color:"green.900"})}),(0,M.jsxs)(h.x,{fontSize:"16px",children:[(0,M.jsx)("b",{children:"V2 sUSD"})," successfully converted"]})]}),(0,M.jsx)(an,{width:"100%",items:[{label:"Total V2 sUSD",value:(0,M.jsx)(Kn,{value:t,newValue:t.sub(a),formatFn:e=>xe(e??s.GH),hasChanges:!0,size:"sm"})},{label:"Total V3 sUSD",value:(0,M.jsx)(Kn,{value:n,newValue:n.add(a),formatFn:e=>xe(e??s.GH),hasChanges:!0,size:"sm"})}]}),(0,M.jsx)(f.z,{mb:-2,width:"100%",onClick:e,children:"Continue"}),(0,M.jsxs)(f.z,{display:"flex",alignItems:"center",gap:1,variant:"outline",colorScheme:"gray",width:"100%",children:["Deposit V3 sUSD to Curve",(0,M.jsx)(Yn.H,{transform:"rotate(45deg)"})]})]});function ea({onSuccess:e,amount:t,network:n,onBack:a}){const{data:r}=Kt(),{data:o}=Qn(n),{data:i}=Gn(o,n),{data:l}=Zn(n),{data:c}=Gn(l?.address,n),[d,u]=(0,A.useState)(!1),[x,p]=(0,A.useState)({step:1,status:"idle"}),[m,g]=(0,A.useState)({amount:s.GH,v2Balance:s.GH,v3Balance:s.GH}),{approve:y,refetchAllowance:w,requireApproval:b,isReady:j}=In({contractAddress:o,amount:t.toBN(),spender:r?.address}),C=(0,xn.p)({isClosable:!0,duration:9e3}),{migrate:S,isSuccess:L}=function({amount:e}){const[t,n]=(0,A.useState)(!1),[a,r]=(0,A.useState)(!1),o=(0,E.mx)(),{data:i}=Kt(),s=(0,E.yL)(),l=(0,I.useQueryClient)(),{network:c}=(0,E.LN)();return{migrate:(0,A.useCallback)((async()=>{try{if(!(i&&o&&s))throw"OMFG";n(!0),r(!1);const t=new fe.CH(i.address,i.abi,o),a=await t.populateTransaction.convertUSD(e.toBN()),d=await s.estimateGas(a),u=await o.sendTransaction({...a,gasLimit:d.mul(15).div(10)});Bn("txn",u);const x=await s.waitForTransaction(u.hash);Bn("receipt",x),n(!1),r(!0),l.invalidateQueries({queryKey:[`${c?.id}-${c?.preset}`,"TokenBalance"]})}catch(e){if(i)try{const t=new Oe.vU(i.abi),n=Yt(e),a=t.parseError(n);console.error("error:",a)}catch{}throw n(!1),e}}),[e,i,c?.id,c?.preset,s,l,o]),isLoading:t,isSuccess:a}}({amount:t}),v=Wn(),D=(0,A.useCallback)((async()=>{try{if(x.step>2)return void e();1===x.step&&b&&(p({step:1,status:"pending"}),await y(d),w()),p({step:2,status:"pending"}),g({amount:t,v2Balance:i||s.GH,v3Balance:c||s.GH}),await S(),p({step:2,status:"success"}),C.closeAll(),C({title:"Success",description:"Migration executed.",status:"success",duration:5e3,variant:"left-accent"})}catch(e){const t=v(e);t&&console.error(new Error(t.name),t),p((e=>({step:e.step,status:"error"}))),C.closeAll(),C({title:"Migration failed",description:t?(0,M.jsx)(mn,{contractError:t}):"Please try again.",status:"error",variant:"left-accent",duration:36e5})}}),[t,y,v,d,S,e,w,b,C,x.step,i,c]);return L?(0,M.jsx)(Jn,{...m,onConfirm:e}):(0,M.jsxs)(ut.g,{spacing:0,children:[(0,M.jsx)(Sn,{width:"100%",step:1,title:"Approve V2 sUSD transfer",status:{failed:1===x.step&&"error"===x.status,success:x.step>1,loading:1===x.step&&"pending"===x.status},checkboxLabel:"Approve unlimited V2 sUSD transfers to Synthetix",checkboxProps:{isChecked:d,onChange:e=>u(e.target.checked)},mt:0}),(0,M.jsx)(Sn,{width:"100%",step:2,title:"Convert V2 sUSD",mb:4,mt:4,subtitle:(0,M.jsxs)(h.x,{children:["This will convert ",(0,M.jsx)(Ct,{value:t,suffix:" v2 sUSD"})," to v3 sUSD"]}),status:{failed:2===x.step&&"error"===x.status,success:2===x.step&&"success"===x.status,loading:2===x.step&&"pending"===x.status}}),(0,M.jsx)(f.z,{isDisabled:"pending"===x.status||!j,onClick:D,width:"100%",mb:2,children:(()=>{switch(!0){case"error"===x.status:return"Retry";case"pending"===x.status:return"Processing...";case 2===x.step&&"success"===x.status:return"Done";default:return"Execute Transaction"}})()}),"pending"!==x.status&&(0,M.jsx)(f.z,{variant:"outline",colorScheme:"gray",width:"100%",onClick:a,children:"Back"})]})}const ta=e=>(0,M.jsx)(B.k,{bg:"navy.700",borderWidth:"1px",borderColor:"gray.900",borderRadius:"base",...e}),na=/^([0-9]*[.])?[0-9]{0,18}$/;function aa(e){const t=parseFloat(e.toString());return t===e.toNumber()?`${t}`:e.toString()}function ra({value:e,onChange:t,min:n,max:a,InputProps:r,disabled:o}){const[i,s]=(0,A.useState)(e.gt(0)?e.toString():""),l=(0,A.useCallback)((a=>{if(a.target.value.length>24)return;let r=a.target.value;if(isNaN(Number(a.target.value))||n&&n.gt(Number(a.target.value))&&(r=n.toNumber().toString()),s(r),!t)return;if(!na.test(`${r}`))return;let o=e;try{o=(0,se.wei)(r||0)}catch(e){}e.eq(o)||t(o)}),[n,t,e]),c=(0,A.useRef)(null);return(0,A.useEffect)((()=>{c.current&&(na.test(`${i}`)?e&&e.eq(0)?c.current.setCustomValidity("Value required"):n&&n.gte(0)&&e&&e.lt(n)?c.current.setCustomValidity(`Value smaller than minimum of ${aa(n)}`):a&&a.gte(0)&&e&&e.gt(a)?c.current.setCustomValidity(`Value greater than maximum of ${aa(a)}`):c.current.setCustomValidity(""):c.current.setCustomValidity("Invalid number"))}),[i,n,a,e]),(0,A.useEffect)((()=>e.eq(0)?s(""):s(aa(e))),[e]),(0,M.jsx)(ne.I,{ref:c,flex:"1",type:"number",step:"any",border:"none",borderWidth:"0px",textAlign:"end",p:0,outline:"none",fontFamily:"heading",fontSize:"xl",fontWeight:"700",lineHeight:"2xl",color:"white",height:"unset",autoFocus:!0,placeholder:"00.00",_focus:{boxShadow:"none !important"},_placeholder:{color:"whiteAlpha.700"},_disabled:{color:"white"},value:i,onChange:l,disabled:o,...r,maxLength:10})}const oa=({onClose:e,onConfirm:t,setAmount:n,amount:a,network:r})=>{const[o,i]=(0,A.useState)(!1),{data:l}=Qn(r),{data:c}=Gn(l,r),{data:d}=Zn(r),{data:u}=Gn(d?.address,r);return(0,A.useEffect)((()=>{c&&a.eq(0)&&!o&&(n(c),i(!0))}),[a,o,n,c]),(0,M.jsxs)(ut.g,{gap:2.5,children:[(0,M.jsx)(h.x,{width:"100%",textAlign:"left",fontSize:"14px",children:"Convert your V2 sUSD on Ethereum Mainnet to V3 sUSD. You will need V3 sUSD to interact with the new Synthetix products."}),(0,M.jsx)(ta,{width:"100%",display:"flex",flexDirection:"column",p:3,children:(0,M.jsxs)(B.k,{alignItems:"center",children:[(0,M.jsx)(B.k,{flexDir:"column",gap:"1",children:(0,M.jsxs)(B.k,{flexDir:"column",gap:"1",children:[(0,M.jsx)(ta,{display:"flex",justifyContent:"center",alignItems:"center",py:1.5,px:2.5,width:"fit-content",children:(0,M.jsxs)(h.x,{display:"flex",gap:2,alignItems:"center",fontWeight:"600",whiteSpace:"nowrap",children:[(0,M.jsx)(cn,{symbol:"susd",width:16,height:16}),"V2 sUSD"]})}),(0,M.jsxs)(B.k,{fontSize:"xs",color:"whiteAlpha.700",gap:"1",children:[(0,M.jsx)(Ct,{prefix:"Balance: ",value:c}),(0,M.jsx)(h.x,{as:"span",cursor:"pointer",onClick:()=>{c&&n(c)},color:c?.eq(a)?"gray.600":"cyan.500",fontWeight:700,children:" Max"})]})]})}),(0,M.jsx)(B.k,{flexDir:"column",flexGrow:1,children:(0,M.jsx)(ra,{InputProps:{isRequired:!0,"data-max":c?.toString(),type:"number",min:0},value:a,onChange:e=>n(e),min:s.GH})})]})}),(0,M.jsx)(ta,{width:"100%",display:"flex",flexDirection:"column",p:3,children:(0,M.jsxs)(B.k,{alignItems:"center",children:[(0,M.jsxs)(B.k,{flexDir:"column",gap:"1",children:[(0,M.jsx)(ta,{display:"flex",justifyContent:"center",alignItems:"center",py:1.5,px:2.5,width:"fit-content",children:(0,M.jsxs)(h.x,{display:"flex",gap:2,alignItems:"center",fontWeight:"600",whiteSpace:"nowrap",children:[(0,M.jsx)(cn,{symbol:"susd",width:16,height:16}),"V3 sUSD"]})}),(0,M.jsxs)(B.k,{fontSize:"xs",color:"whiteAlpha.700",gap:"1",children:["Balance: ",(0,M.jsx)(Ct,{value:u})]})]}),(0,M.jsx)(B.k,{flexDir:"column",flexGrow:1,children:(0,M.jsx)(ra,{disabled:!0,value:a})})]})}),(0,M.jsx)(wt.U,{in:c?.lt(a),animateOpacity:!0,unmountOnExit:!0,children:(0,M.jsxs)(re.b,{borderRadius:"6px",status:"error",children:[(0,M.jsx)(oe.z,{}),(0,M.jsx)(ie.X,{children:"You cannot convert more than your v2 sUSD balance"})]})}),(0,M.jsx)(f.z,{isDisabled:c?.lt(a)||a.lte(0),mt:3,width:"100%",onClick:t,children:"Convert"}),(0,M.jsx)(f.z,{variant:"outline",colorScheme:"gray",onClick:e,width:"100%",children:"Later"})]})};function ia({onClose:e,isOpen:t,network:n,type:a,accountId:r}){const[o,i]=K(),[u,h]=A.useState(0),[p,m]=A.useState(s.GH);return A.useEffect((()=>{t||(h(0),m(s.GH))}),[t]),(0,M.jsxs)(l.u_,{size:"lg",isOpen:t,onClose:e,closeOnOverlayClick:!1,children:[(0,M.jsx)(c.Z,{}),(0,M.jsxs)(d.h,{mt:"100px",borderWidth:"1px",borderColor:"gray.900",bg:"navy.900",color:"white",children:[(0,M.jsxs)(B.k,{justifyContent:"space-between",p:6,alignItems:"center",children:[(0,M.jsx)(J.X,{fontSize:"20px",children:2===u?"Migration successful":"Convert your V2 sUSD to V3 sUSD on Mainnet"}),(0,M.jsx)(dt.P,{onClick:e,color:"gray"})]}),(0,M.jsx)(B.k,{width:"100%",px:6,children:(0,M.jsx)(te.i,{colorScheme:"gray"})}),(0,M.jsx)(x.f,{p:6,pt:2,children:t&&(0,M.jsxs)(M.Fragment,{children:[0===u&&(0,M.jsx)(oa,{amount:p,setAmount:m,onClose:e,onConfirm:()=>h(1),network:n}),1===u&&(0,M.jsx)(ea,{network:n,onSuccess:()=>{"migration"===a?h(2):e()},onBack:()=>h(0),amount:p}),2===u&&(0,M.jsx)(un,{network:n,onConfirm:()=>{i({accountId:r}),e()}})]})})]})]})}function sa({network:e}){const[t]=K(),[n,a]=(0,A.useState)(!1),{network:r}=(0,E.LN)(),{activeWallet:o}=(0,E.Os)();return(0,A.useEffect)((()=>{"snxusd"===t.convert?.toLowerCase()&&a(!0)}),[t.convert]),o&&r?.id===e.id?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(ia,{type:"convert",network:e,onClose:()=>a(!1),isOpen:n}),(0,M.jsxs)(f.z,{variant:"outline",colorScheme:"gray",px:3,gap:2,display:"flex",alignItems:"center",fontSize:"14px",onClick:()=>a(!0),children:[(0,M.jsx)(cn,{width:24,height:24,symbol:"susd"}),"Convert V2 sUSD"]})]}):null}function la({network:e,type:t="banner"}){const[n,a]=K(),[r,o]=A.useState(!1),[i,s]=A.useState(""),[l,c]=A.useState(!1),{data:d}=nn(),{network:u,setNetwork:x}=(0,E.LN)(),{connect:p,activeWallet:m}=(0,E.Os)(),y=A.useCallback((async()=>{try{if(!m)return void p();if(!(u&&u.id===e.id||await x(e.id)))return;o(!0)}catch(e){}}),[m,p,u,e.id,x]);return A.useEffect((()=>{if("snx"===n.migrate?.toLowerCase()){o(!0);const{migrate:e,...t}=n;a(t)}}),[n,a]),(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(sn,{onSuccess:e=>{s(e),c(!0)},network:e,onClose:()=>o(!1),isOpen:r}),(0,M.jsx)(ia,{network:e,onClose:()=>c(!1),isOpen:l,type:"migration",accountId:i}),!!d&&d?.collateral.gt(0)&&d.debt.gt(0)&&(0,M.jsxs)(ln.p,{in:!0,children:["banner"===t&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(te.i,{my:4}),(0,M.jsxs)(B.k,{justifyContent:["center","space-between"],w:"100%",flexWrap:"wrap",gap:4,children:[(0,M.jsx)(pt.E,{src:"/Rocket.png"}),(0,M.jsxs)(B.k,{mt:1,flex:1,alignItems:"flex-start",flexDir:"column",gap:6,children:[(0,M.jsxs)(J.X,{fontSize:"20px",fontWeight:700,color:"white",children:["You have a ",(0,M.jsx)(Ct,{value:d?.collateral})," SNX position on Synthetix V2 on"," ",(0,M.jsx)(h.x,{as:"span",textTransform:"capitalize",children:e.name})]}),(0,M.jsx)(h.x,{maxW:"484px",fontSize:"14px",color:"gray.500",children:"Migrate your SNX to Synthetix V3 to earn fees from both V2 and V3 markets and much more."})]}),(0,M.jsxs)(B.k,{mt:"auto",alignItems:"flex-center",gap:2,children:[(0,M.jsx)(f.z,{fontSize:"sm",fontWeight:700,colorScheme:"gray",variant:"outline",onClick:y,children:m?u?.id!==e.id?"Switch Network":"Migrate to V3":"Connect"}),(0,M.jsx)(g.r,{href:"https://blog.synthetix.io/synthetix-v3-migration-treasury-council-initiates-transition/",target:"_blank",rel:"noopener",children:(0,M.jsx)(f.z,{fontSize:"sm",fontWeight:700,variant:"outline",colorScheme:"gray",children:"Learn More"})})]})]})]}),"alert"===t?(0,M.jsxs)(re.b,{mb:6,borderLeftColor:"cyan.500",borderRadius:"6px",children:[(0,M.jsx)(oe.z,{color:"cyan.500"}),(0,M.jsxs)(h.x,{color:"white",fontFamily:"heading",fontSize:"16px",lineHeight:"24px",children:["You have a ",(0,M.jsx)(Ct,{value:d?.collateral})," SNX active staking position on V2 on"," ",(0,M.jsx)(h.x,{as:"span",textTransform:"capitalize",children:e.name}),"."," ",(0,M.jsx)(h.x,{onClick:y,as:"span",color:"cyan.500",cursor:"pointer",children:"Migrate to V3"})]})]}):null]})]})}const ca=()=>(0,M.jsx)(M.Fragment,{children:Array.from(Array(3).keys()).map((e=>(0,M.jsxs)(B.k,{flexDir:"row",w:"100%",border:"1px solid",borderColor:"gray.900",rounded:"base",bg:"navy.700",py:4,px:4,gap:4,alignItems:"center",children:[(0,M.jsxs)(B.k,{alignItems:"center",justifyContent:"flex-start",width:"260px",gap:3,children:[(0,M.jsx)(_e.O,{width:"40px",height:"40px",rounded:"full"}),(0,M.jsxs)(B.k,{flex:1,flexDirection:"column",gap:1,children:[(0,M.jsx)(_e.O,{height:"26px",width:"50px"}),(0,M.jsx)(_e.O,{height:"18px",width:"100px"})]})]}),(0,M.jsxs)(B.k,{justifyContent:"flex-end",alignItems:"flex-end",width:"240px",flexDirection:"column",gap:1,children:[(0,M.jsx)(_e.O,{height:"26px",width:"50px"}),(0,M.jsx)(_e.O,{height:"18px",width:"70px"})]}),(0,M.jsx)(B.k,{justifyContent:"flex-end",alignItems:"center",width:"240px",children:(0,M.jsx)(_e.O,{height:6,width:"92px"})}),(0,M.jsx)(B.k,{justifyContent:"flex-end",alignItems:"center",width:"164px",children:(0,M.jsx)(_e.O,{height:6,width:"92px"})})]},e)))});const da=(e,t)=>new Intl.NumberFormat("en-EN",{style:"currency",currency:"USD",...t}).format(Number(e)),ua=(e,t)=>new Intl.NumberFormat("en-EN",{minimumFractionDigits:2,maximumFractionDigits:2,...t}).format(Number(e));var xa=n(40672);const ha=[E.PZ.id,E.PO.id,E.RR.id];function pa(e){const{network:t}=(0,E.LN)(),n=e||t;return(0,I.useQuery)({queryKey:["apr",n?.id],queryFn:async()=>{try{return await async function(e){try{if(!e||!ha.includes(e))throw new Error(`APR endpoint not supported for network ${e}`);const t=await fetch((0,s.Ko)(e));return await t.json()}catch(e){return console.error(e),[]}}(n?.id)}catch(e){return}},staleTime:6e4,enabled:Boolean(n?.id)})}var ma=n(31698);const ga=(e,t)=>(e?.toString(),"andromeda"===t);const fa="1",ya="3";function wa(e,t){return(0,I.useQuery)({enabled:ga(e,t),queryKey:["useStataUSDCAPR",e],queryFn:async()=>{const e=await fetch("https://gateway.thegraph.com/api/f55095f3203bcba72cbee045322be46c/subgraphs/id/GQFbb95cE6d8mV989mL5figjaGaKCQB3xqYrr1bRyXqF",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:ba})}),t=(await e.json()).data.reserves.filter((e=>"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913"===e.underlyingAsset))[0];try{return Number((0,ma.G)({rate:t.liquidityRate,duration:31536e3}).toNumber().toPrecision(2).split("e")[0])}catch(e){return 0}}})}const ba="\n  query {\n  reserves {\n    underlyingAsset\n    liquidityRate\n    }\n  }\n";function ja(e){const{network:t}=(0,E.LN)(),a=e||t;return(0,I.useQuery)({queryKey:[`${a?.id}-${a?.preset}`,"SynthTokens"],enabled:Boolean(a),queryFn:async function(){if(!a)throw new Error("OMFG");return async function(e,t){if(!t)throw new Error("Missing preset");const a=`${Number(e).toFixed(0)}-${t}`;switch(a){case"1-main":{const[{default:e}]=await Promise.all([n.e(4488).then(n.t.bind(n,74488,19))]);return e}case"11155111-main":{const[{default:e}]=await Promise.all([n.e(4233).then(n.t.bind(n,74233,19))]);return e}case"10-main":{const[{default:e}]=await Promise.all([n.e(8995).then(n.t.bind(n,58995,19))]);return e}case"8453-andromeda":{const[{default:e}]=await Promise.all([n.e(7642).then(n.t.bind(n,17642,19))]);return e}case"84532-andromeda":{const[{default:e}]=await Promise.all([n.e(4487).then(n.t.bind(n,4487,19))]);return e}case"42161-main":{const[{default:e}]=await Promise.all([n.e(7925).then(n.t.bind(n,37925,19))]);return e}case"421614-main":{const[{default:e}]=await Promise.all([n.e(6535).then(n.t.bind(n,96535,19))]);return e}default:throw new Error(`Unsupported deployment ${a} for SynthTokens`)}}(a.id,a.preset)},staleTime:1/0,throwOnError:!1})}function Ca({tokenAddress:e,customNetwork:t}){const{data:n}=ja(t);return A.useMemo((()=>{if(!n)return!1;if(!e)return!1;const t=e?.toLowerCase();return n.some((e=>"sStataUSDC"===e.symbol&&t===e.address.toLowerCase()))}),[e,n])}function Sa(e){const{network:t}=(0,E.LN)(),n=e||t,{data:a}=Un(n),r=(0,E.eK)(n);return(0,I.useQuery)({queryKey:[`${n?.id}-${n?.preset}`,"StaticAaveUSDC Rate",{contractsHash:Be([a])}],enabled:Boolean(r&&a),queryFn:async function(){if(!r||!a)throw new Error("OMFG");const e=new fe.CH(a.address,a.abi,r);return await e.rate()}})}const Ma=["error InsufficientAllowance(uint256 required, uint256 existing)","error InsufficientBalance(uint256 required, uint256 existing)","event Approval(address indexed owner, address indexed spender, uint256 amount)","event Transfer(address indexed from, address indexed to, uint256 amount)","function allowance(address owner, address spender) view returns (uint256)","function approve(address spender, uint256 amount) returns (bool)","function balanceOf(address owner) view returns (uint256)","function decimals() view returns (uint8)","function decreaseAllowance(address spender, uint256 subtractedValue) returns (bool)","function increaseAllowance(address spender, uint256 addedValue) returns (bool)","function name() view returns (string)","function symbol() view returns (string)","function totalSupply() view returns (uint256)","function transfer(address to, uint256 amount) returns (bool)","function transferFrom(address from, address to, uint256 amount) returns (bool)"];function La(e){const{network:t}=(0,E.LN)(),n=e||t;return(0,I.useQuery)({queryKey:[`${n?.id}-${n?.preset}`,"USDC"],enabled:Boolean(n),queryFn:async function(){if(!n)throw new Error("OMFG");return async function(e,t){const n=`${Number(e).toFixed(0)}-${t}`;switch(n){case"1-main":return{address:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",abi:Ma};case"11155111-main":return{address:"0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238",abi:Ma};case"10-main":return{address:"0x0b2c639c533813f4aa9d7837caf62653d097ff85",abi:Ma};case"8453-andromeda":return{address:"0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913",abi:Ma};case"84532-andromeda":return{address:"0x036CbD53842c5426634e7929541eC2318f3dCF7e",abi:Ma};case"42161-main":return{address:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",abi:Ma};case"421614-main":return{address:"0x75faf114eafb1BDbe2F0316DF893fd58CE46AA4d",abi:Ma};default:throw new Error(`Unsupported deployment ${n} for USDC`)}}(n.id,n.preset)},staleTime:1/0,throwOnError:!1})}function Aa({pool:e,network:t,collateralType:n,collateralPrices:a}){const[r,o]=K(),{data:i}=ja(),l=A.useMemo((()=>{if(i&&n)return i.find((e=>e.address===n.tokenAddress))?.token?.address}),[n,i]),{data:c}=wa(t.id,t.preset),d="andromeda"===t?.preset?l:n?.tokenAddress,{data:u}=Sa(),{data:x}=Gn(d,t),{data:p}=La(t),{data:m}=Gn(p?.address,t),{network:y,setNetwork:w}=(0,E.LN)(),{connect:b}=(0,E.Os)(),j=Ca({tokenAddress:n?.tokenAddress,customNetwork:t}),C=A.useMemo((()=>j&&u?((m||s.GH).div((0,se.wei)(u,27))||s.GH).add(x||s.GH):x||s.GH),[j,u,x,m]),S=(0,se.wei)(a?.find((e=>e.symbol.toUpperCase()===n.symbol.toUpperCase()))?.price??0),{data:L,isPending:v}=pa(t),D=A.useMemo((()=>{if(L&&n)return L.find((e=>e.collateralType.toLowerCase()===n.tokenAddress.toLowerCase()))}),[L,n]),I=async e=>{e.preventDefault();try{if(!y)return void await b();if(y.id!==t.id&&!await w(t.id))return;o({page:"position",collateralSymbol:n.symbol,manageAction:"deposit",accountId:r.accountId})}catch(e){console.error(e)}},k=y?"Deposit":"Connect Wallet",T=A.useMemo((()=>(0,se.wei)(n.collateralDeposited,Number(n.decimals),!0).mul(S).toNumber().toFixed(0)),[n.collateralDeposited,n.decimals,S]);return(0,M.jsx)(ln.p,{in:!0,style:{order:T},children:(0,M.jsxs)(B.k,{flexDir:"row",w:"100%",border:"1px solid",borderColor:"gray.900",rounded:"base",bg:"navy.700",py:4,px:4,gap:4,alignItems:"center",children:[(0,M.jsxs)(B.k,{as:g.r,href:`?${X({page:"position",collateralSymbol:n.symbol,manageAction:"deposit",accountId:r.accountId})}`,onClick:I,width:"260px",alignItems:"center",textDecoration:"none",_hover:{textDecoration:"none"},children:[(0,M.jsxs)(B.k,{position:"relative",children:[(0,M.jsx)(cn,{w:40,h:40,symbol:n.symbol}),(0,M.jsx)(E.dF,{position:"absolute",right:0,bottom:0,networkId:t.id,size:"14px"})]}),(0,M.jsxs)(B.k,{flexDirection:"column",ml:3,mr:"auto",children:[(0,M.jsx)(h.x,{fontSize:"14px",color:"white",fontWeight:700,lineHeight:"28px",fontFamily:"heading",children:n.displaySymbol}),(0,M.jsxs)(h.x,{textTransform:"capitalize",fontSize:"xs",color:"gray.500",fontFamily:"heading",lineHeight:"20px",children:[t.name," Network"]})]})]}),(0,M.jsxs)(B.k,{width:"240px",direction:"column",alignItems:"flex-end",children:[(0,M.jsx)(h.x,{fontFamily:"heading",fontSize:"14px",fontWeight:500,lineHeight:"28px",color:"white",children:C?da(C.mul(S).toNumber()):"-"}),(0,M.jsxs)(h.x,{color:"gray.500",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",children:[C?ua(C.toNumber()):""," ",n.displaySymbol]})]}),(0,M.jsx)(B.k,{width:"240px",alignItems:"center",justifyContent:"flex-end",children:(0,M.jsx)(h.x,{fontFamily:"heading",fontSize:"14px",lineHeight:"20px",fontWeight:500,color:"white",textAlign:"right",children:S?da((0,se.wei)(n.collateralDeposited,Number(n.decimals),!0).mul(S).toNumber(),{minimumFractionDigits:0,maximumFractionDigits:0}):0})}),(0,M.jsx)(B.k,{width:"164px",alignItems:"center",justifyContent:"flex-end",children:(0,M.jsxs)(h.x,{fontFamily:"heading",fontSize:"14px",lineHeight:"20px",fontWeight:500,color:"white",children:[v?"~":null,!v&&D&&D.apr28d>0?(100*D.apr28d+(j&&c?c:0)).toFixed(2).concat("%"):"-",!v&&D&&D.apr28d>0?(0,M.jsx)(bt,{label:(0,M.jsxs)(B.k,{direction:"column",children:[(0,M.jsxs)(B.k,{justifyContent:"space-between",children:[(0,M.jsx)(h.x,{mr:2,children:"Performance:"}),(0,M.jsx)(h.x,{children:(100*D.apr28dPnl).toFixed(2).concat("%")})]}),(0,M.jsxs)(B.k,{justifyContent:"space-between",children:[(0,M.jsx)(h.x,{mr:2,children:"Rewards: "}),(0,M.jsx)(h.x,{children:(100*D.apr28dRewards).toFixed(2).concat("%")})]}),j&&c?(0,M.jsxs)(B.k,{justifyContent:"space-between",children:[(0,M.jsx)(h.x,{mr:2,children:"AAVE yield: "}),(0,M.jsx)(h.x,{children:c.toFixed(2).concat("%")})]}):null]}),children:(0,M.jsx)(B.k,{as:"span",display:"inline",children:(0,M.jsx)(xa.P$,{w:"14px",h:"14px",mb:1,ml:"0.5px",mt:"1px"})})}):null]})}),(0,M.jsx)(B.k,{minW:"120px",flex:"1",justifyContent:"flex-end",children:(0,M.jsx)(f.z,{as:g.r,href:`?${X({page:"position",collateralSymbol:n.symbol,manageAction:"deposit",accountId:r.accountId})}`,onClick:I,size:"sm",height:"32px",py:"10px",px:2,whiteSpace:"nowrap",borderRadius:"4px",fontFamily:"heading",fontWeight:700,fontSize:"14px",lineHeight:"20px",color:"black",textDecoration:"none",_hover:{textDecoration:"none",color:"black"},children:k})})]})})}var va=n(17123);function Da(e){return!["0x5c6c0d2386e3352356c3ab84434fafb5ea067ac2678a38a338c4a69ddc4bdb0c"].includes(e)}async function Ia(e,t){if(!t)throw new Error("Missing preset");const a=`${Number(e).toFixed(0)}-${t}`;switch(a){case"1-main":{const[{default:e}]=await Promise.all([n.e(9264).then(n.t.bind(n,79264,19))]);return e.filter(Da)}case"11155111-main":{const[{default:e}]=await Promise.all([n.e(1803).then(n.t.bind(n,61803,19))]);return e.filter(Da)}case"10-main":{const[{default:e}]=await Promise.all([n.e(7721).then(n.t.bind(n,27721,19))]);return e.filter(Da)}case"8453-andromeda":{const[{default:e}]=await Promise.all([n.e(5510).then(n.t.bind(n,95510,19))]);return e.filter(Da)}case"84532-andromeda":{const[{default:e}]=await Promise.all([n.e(7984).then(n.t.bind(n,97984,19))]);return e.filter(Da)}case"42161-main":{const[{default:e}]=await Promise.all([n.e(3741).then(n.t.bind(n,63741,19))]);return e.filter(Da)}case"421614-main":{const[{default:e}]=await Promise.all([n.e(1532).then(n.t.bind(n,41532,19))]);return e.filter(Da)}default:throw new Error(`Unsupported deployment ${a} for pythFeeds`)}}const ka=["function updatePriceFeeds(bytes[] updateData) payable"];async function Ta(e,t){if(!t)throw new Error("Missing preset");const n=`${Number(e).toFixed(0)}-${t}`;switch(n){case"1-main":return{address:"0x4305FB66699C3B2702D4d05CF36551390A4c69C6",abi:ka};case"11155111-main":return{address:"0xDd24F84d36BF92C65F92307595335bdFab5Bbd21",abi:ka};case"10-main":case"42161-main":return{address:"0xff1a0f4744e8582DF1aE09D5611b887B6a12925C",abi:ka};case"8453-andromeda":return{address:"0x8250f4aF4B972684F7b336503E2D6dFeDeB1487a",abi:ka};case"84532-andromeda":return{address:"0xA2aa501b19aff244D90cc15a4Cf739D2725B5729",abi:ka};case"421614-main":return{address:"0x4374e5a8b9C22271E9EB878A2AA31DE97DF15DAF",abi:ka};default:throw new Error(`Unsupported deployment ${n} for Extras`)}}var Na=n(83474);const Ea=[E.RR.id,E.PZ.id,E.PO.id],za=E.g5.filter((e=>Ea.includes(e.id)&&e.isSupported)).map((e=>e));const Fa=(e=>e[0])`
  query PoolsListData {
    vaults(where: { pool: "1" }) {
      collateral_type {
        id
        oracle_node_id
        total_amount_deposited
      }
      pool {
        name
        id
      }
    }
  }
`;function Pa(){return(0,I.useQuery)({queryKey:["poolsList"],queryFn:async()=>async function(){const e=za.map((e=>(0,s.Q4)(e.name)));return(await Promise.all(e.map((e=>fetch(e,{method:"POST",body:JSON.stringify({query:Fa})}).then((e=>e.json())))))).map(((e,t)=>({network:za[t],poolInfo:e?.data?.vaults??[]})))}(),staleTime:6e5})}const Ha=new va.O(s.kw);function Oa(e){return Array.from(new Set(Object.entries(e).filter((([e,t])=>66===String(t).length&&(e.startsWith("pyth_feed_id_")||e.startsWith("pyth")&&e.endsWith("FeedId"))))))}async function $a(e){const t=(await Promise.all(za.map((e=>async function(e,t){if(!t)throw new Error("Missing preset");const a=`${Number(e).toFixed(0)}-${t}`;switch(a){case"1-main":{const[{default:e}]=await Promise.all([n.e(9469).then(n.t.bind(n,89469,19))]);return e}case"11155111-main":{const[{default:e}]=await Promise.all([n.e(4548).then(n.t.bind(n,54548,19))]);return e}case"10-main":{const[{default:e}]=await Promise.all([n.e(1992).then(n.t.bind(n,91992,19))]);return e}case"8453-andromeda":{const[{default:e}]=await Promise.all([n.e(9203).then(n.t.bind(n,50853,19))]);return e}case"84532-andromeda":{const[{default:e}]=await Promise.all([n.e(7717).then(n.t.bind(n,67717,19))]);return e}case"42161-main":{const[{default:e}]=await Promise.all([n.e(7919).then(n.t.bind(n,27919,19))]);return e}case"421614-main":{const[{default:e}]=await Promise.all([n.e(6564).then(n.t.bind(n,56564,19))]);return e}default:throw new Error(`Unsupported deployment ${a} for Extras`)}}(e.id,e.preset))))).map(Oa).flat(),a=Array.from(new Set(t.map((([e,t])=>e.startsWith("pyth_feed_id_")?{symbol:e.replace("pyth_feed_id_","").toUpperCase(),priceId:t}:e.startsWith("pyth")&&e.endsWith("FeedId")?{symbol:e.replace("pyth","").replace("FeedId","").toUpperCase(),priceId:t}:{symbol:null,priceId:null})).filter((({symbol:e,priceId:t})=>e&&t))));return e.map((e=>{const t="WETH"===e.symbol?"ETH":e.symbol,n=a.find((e=>e.symbol?.toUpperCase()===t.toUpperCase()));return{...e,priceId:n?.priceId}}))}const Ra=e=>(0,I.useQuery)({queryKey:["offline-prices",e?.map((e=>e.id)).join("-")],enabled:Boolean(e&&e.length>0),queryFn:async()=>{if(!e)throw"useOfflinePrices is missing required data";const t=["sUSDC","USDC"],n=e.filter((e=>!t.includes(e.symbol))),a=[{symbol:"sUSDC",price:(0,se.wei)(1).toBN()},{symbol:"USDC",price:(0,se.wei)(1).toBN()},{symbol:"USDx",price:(0,se.wei)(1).toBN()}];if(!n.length)return a;const r=await $a(n),o=await Ha.getLatestPriceFeeds(r.map((e=>e.priceId)));return o?.forEach((e=>{const t=r.find((({priceId:t})=>t===`0x${e.id}`)),n=e.getPriceUnchecked();t&&a.push({symbol:t.symbol,price:ce(n.price,18+n.expo)})})),a},refetchInterval:6e4}),Ua=e=>{const{network:t}=(0,E.LN)(),n=e||t,a=(0,E.yL)(),{activeWallet:r}=(0,E.Os)(),o=r?.address;return(0,I.useQuery)({queryKey:[`${n?.id}-${n?.preset}`,"PriceUpdates",{walletAddress:o}],enabled:Boolean(n&&a&&r),queryFn:async()=>{if(!(n&&a&&r))throw"OMG";try{const{address:e,abi:t}=await Pe(n.id,n.preset),r=new Oe.vU(t),i=new Oe.vU(["function getLatestPrice(bytes32 priceId, uint256 stalenessTolerance) external view returns (int256)"]),s=await async function(e){return await Ia(e.id,e.preset)}(n);if("true"===window.localStorage.getItem("DEBUG")&&console.log("[useCollateralPriceUpdates]",{pythFeedIds:s}),0===s.length)return null;const{address:l}=await(0,Na.O)(n.id,n.preset),c=[...s.map((e=>({target:l,callData:i.encodeFunctionData("getLatestPrice",[e,1600]),value:0,requireSuccess:!1})))],d=r.encodeFunctionData("aggregate3Value",[c]),u=await a.call({data:d,to:e}),x=r.decodeFunctionResult("aggregate3Value",u||"")[0],h=[];if(x.forEach((({success:e},t)=>{e||h.push(s[t])})),"true"===window.localStorage.getItem("DEBUG")&&console.log("[useCollateralPriceUpdates]",{outdatedPriceIds:h}),h.length){const e=await(async(e,t)=>{if(!e.length)return null;const n=Array.from(new Set(e)),a=await Ha.getPriceFeedsUpdateData(n),r=await Ta(t.id,t.preset);return{to:r.address,data:new Oe.vU(r.abi).encodeFunctionData("updatePriceFeeds",[a]),value:n.length}})(h,n).catch((()=>{}));if(e)return{...e,from:o}}return null}catch(e){return null}},refetchInterval:12e4})};async function Wa(e,t){if(!t)throw new Error("Missing preset");const a=`${Number(e).toFixed(0)}-${t}`;switch(a){case"1-main":{const[{default:e},{default:t}]=await Promise.all([n.e(9393).then(n.t.bind(n,18152,19)),n.e(965).then(n.t.bind(n,30965,19))]);return{address:e.contracts.SpotMarketProxy,abi:t}}case"11155111-main":{const[{default:e},{default:t}]=await Promise.all([n.e(3463).then(n.t.bind(n,33463,19)),n.e(9273).then(n.t.bind(n,49273,19))]);return{address:e.contracts.SpotMarketProxy,abi:t}}case"10-main":{const[{default:e},{default:t}]=await Promise.all([n.e(2320).then(n.t.bind(n,62320,19)),n.e(3581).then(n.t.bind(n,53581,19))]);return{address:e.contracts.SpotMarketProxy,abi:t}}case"8453-andromeda":{const[{default:e},{default:t}]=await Promise.all([n.e(6244).then(n.t.bind(n,56244,19)),n.e(3688).then(n.t.bind(n,13688,19))]);return{address:e.contracts.SpotMarketProxy,abi:t}}case"84532-andromeda":{const[{default:e},{default:t}]=await Promise.all([n.e(6804).then(n.t.bind(n,96804,19)),n.e(7711).then(n.t.bind(n,57711,19))]);return{address:e.contracts.SpotMarketProxy,abi:t}}case"42161-main":{const[{default:e},{default:t}]=await Promise.all([n.e(8317).then(n.t.bind(n,98317,19)),n.e(5996).then(n.t.bind(n,85996,19))]);return{address:e.contracts.SpotMarketProxy,abi:t}}case"421614-main":{const[{default:e},{default:t}]=await Promise.all([n.e(5783).then(n.t.bind(n,15783,19)),n.e(4927).then(n.t.bind(n,4927,19))]);return{address:e.contracts.SpotMarketProxy,abi:t}}default:throw new Error(`Unsupported deployment ${a} for SpotMarketProxy`)}}const Ba=e=>null!=e;async function qa({priceIds:e,isTestnet:t}){const n=new va.O(t?s.DM:s.kw);return await n.getPriceFeedsUpdateData(e)}const Ga=e=>{switch(e){case"cannon":case"optimism-mainnet":case"base":case"base-sepolia":return"0x4200000000000000000000000000000000000006";case"mainnet":return"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2";case"sepolia":return"0x7b79995e5f793a07bc00c21412e50ecae098e7f9";case"arbitrum":return"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1";case"arbitrum-sepolia":return"0x980B62Da83eFf3D4576C647993b0c1D7faf17c73";default:throw new Error(`Unsupported chain ${e}`)}};async function Va({network:e,calls:t,label:n}){const a=ge()(`snx:withERC7412:${n}`);if(!a.enabled)return;const r=new Oe.vU(function(e){const t=new Set,n=[];return e.filter((e=>e.startsWith("function "))).forEach((e=>{const a=Wt.HY.from(e);if(a){const e=a.format(Wt.pc.sighash);t.has(e)||(n.push(a.format(Wt.pc.full)),t.add(e))}})),n}((await Promise.all([ze(e.id,e.preset).catch((()=>({abi:[]}))),Wa(e.id,e.preset).catch((()=>({abi:[]}))),he(e.id,e.preset).catch((()=>({abi:[]}))),Vn(e.id,e.preset).catch((()=>({abi:[]}))),En(e.id,e.preset).catch((()=>({abi:[]}))),(0,Na.O)(e.id,e.preset).catch((()=>({abi:[]}))),Ta(e.id,e.preset).catch((()=>({abi:[]}))),Nn(e.id,e.preset).catch((()=>({abi:[]}))),$n(e.id,e.preset).catch((()=>({abi:[]}))),Hn(e.id,e.preset).catch((()=>({abi:[]})))])).flatMap((e=>e?e.abi:[]))));a("multicall calls",t.map((({data:e,value:t,...n})=>{try{const{name:n,args:a}=r.parseTransaction({data:e,value:t});if(Object.keys(a).filter((([e])=>`${e}`!=`${parseInt(e)}`)).length>0){return{$:n,...Object.fromEntries(Object.entries(a).filter((([e])=>`${e}`!=`${parseInt(e)}`)))}}const o=Object.entries(a).filter((([e])=>`${e}`==`${parseInt(e)}`)).map((([,e])=>e));return{$:n,...o}}catch{return{$:"unknown",data:e,value:t,...n}}})))}async function Za(e,t,n,a){const r=await Pe(e.id,e.preset),o=new Oe.vU(r.abi),i={from:n||Ga(e.name),to:r.address,data:o.encodeFunctionData("aggregate3Value",[t.map((e=>({target:e.to,callData:e.data,value:e.value?qt.O$.from(e.value):qt.O$.from(0),requireSuccess:e.requireSuccess??!0})))]),value:t.reduce(((e,t)=>t.value?e.add(t.value):e),qt.O$.from(0))};return{multicallTxn:i,gasLimit:await a.estimateGas(i),_calls:t}}const Qa=async(e,t,n,a,r)=>{const o=ge()(`snx:withERC7412:${a}`);if(!await(0,E.ZQ)(t.id,t.preset))return await Va({network:t,calls:n,label:a}),await Za(t,n,r,e);const i=await Ta(t.id,t.preset);for(;;)try{return await Va({network:t,calls:n,label:a}),await Za(t,n,r,e)}catch(a){console.error(a);let s=Yt(a);if(!s&&a.transaction)try{o("Error is missing revert data, trying provider.call, instead of estimate gas...");s=await e.call(a.transaction)}catch(e){o("provider.call(error.transaction) failed, trying to extract error",e),s=Yt(a)}if(!s)throw a;o("errorData",s);const l=s.split("cf2cabdf").slice(1).map((e=>e.slice(0,512))).map((e=>`0x${e.slice(-64)}`));if(l.length<1)throw a;const c=Array.from(new Set(l));o("missingPriceUpdates",c);const d=await qa({priceIds:c,isTestnet:t.isTestnet}),u={from:r,to:i.address,data:new Oe.vU(i.abi).encodeFunctionData("updatePriceFeeds",[d]),value:qt.O$.from(c.length),requireSuccess:!1};o("extraPriceUpdateTxn",u),n=[u,...n]}};async function Ya(e,t,n,a,r){const o=ge()(`snx:withERC7412:${r}`),i=await Pe(e.id,e.preset),s=Ga(e.name),{_calls:l,multicallTxn:c,gasLimit:d}=await Qa(t,e,n.filter(Ba).map((e=>e.from?e:{...e,from:s})),r,s),u=await t.call({...c,gasLimit:d.mul(15).div(10)});if("0x"===u)throw new Error(`[${r}] Call returned 0x`);const x=new Oe.vU(i.abi).decodeFunctionResult("aggregate3Value",u)[0];o("multicall response",x);const h=await Ta(e.id,e.preset),p=x.filter(((e,t)=>l?.[t]?.to?.toLowerCase()!==h.address?.toLowerCase()));if(n.length!==p.length)throw new Error(`[${r}] Unexpected multicall response`);const m=a(p);return o("multicall decoded",m),m}async function _a({targetNetwork:e,provider:t,nodeId:a}){const r=await async function(e,t){if(!t)throw new Error("Missing preset");const a=`${Number(e).toFixed(0)}-${t}`;switch(a){case"1-main":{const[{default:e},{default:t}]=await Promise.all([n.e(9393).then(n.t.bind(n,18152,19)),n.e(4314).then(n.t.bind(n,74314,19))]);return{address:e.contracts.OracleManagerProxy,abi:t}}case"11155111-main":{const[{default:e},{default:t}]=await Promise.all([n.e(3463).then(n.t.bind(n,33463,19)),n.e(1989).then(n.t.bind(n,1989,19))]);return{address:e.contracts.OracleManagerProxy,abi:t}}case"10-main":{const[{default:e},{default:t}]=await Promise.all([n.e(2320).then(n.t.bind(n,62320,19)),n.e(7722).then(n.t.bind(n,87722,19))]);return{address:e.contracts.OracleManagerProxy,abi:t}}case"8453-andromeda":{const[{default:e},{default:t}]=await Promise.all([n.e(6244).then(n.t.bind(n,56244,19)),n.e(1274).then(n.t.bind(n,61274,19))]);return{address:e.contracts.OracleManagerProxy,abi:t}}case"84532-andromeda":{const[{default:e},{default:t}]=await Promise.all([n.e(6804).then(n.t.bind(n,96804,19)),n.e(1750).then(n.t.bind(n,91750,19))]);return{address:e.contracts.OracleManagerProxy,abi:t}}case"42161-main":{const[{default:e},{default:t}]=await Promise.all([n.e(8317).then(n.t.bind(n,98317,19)),n.e(948).then(n.t.bind(n,80948,19))]);return{address:e.contracts.OracleManagerProxy,abi:t}}case"421614-main":{const[{default:e},{default:t}]=await Promise.all([n.e(5783).then(n.t.bind(n,15783,19)),n.e(3927).then(n.t.bind(n,43927,19))]);return{address:e.contracts.OracleManagerProxy,abi:t}}default:throw new Error(`Unsupported deployment ${a} for OracleManagerProxy`)}}(e.id,e.preset),o=new fe.CH(r.address,r.abi,t),i=await o.populateTransaction.process(a);i.from=Ga(e?.name||"");const s=[i];return await Ya(e,t,s,(e=>{const t=o.interface.decodeFunctionResult("process",e[0].returnData);return t?.node?{price:(0,se.wei)(t.node.price),timestamp:new Date(Number(t.node.timestamp.mul(1e3).toString()))}:{price:(0,se.wei)(t.price),timestamp:new Date(Number(t.timestamp.mul(1e3).toString()))}}),"useOraclePrice")}function Xa({...e}){return(0,M.jsx)(B.k,{color:"gray.600",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",letterSpacing:.6,fontWeight:700,alignItems:"center",justifyContent:"right",...e})}function Ka(){const{data:e,isPending:t}=Pa(),{data:n,isPending:a}=Rt(!1,E.PZ),{data:r,isPending:o}=Rt(!1,E.RR),i=A.useMemo((()=>[...n??[],...r??[]].filter((e=>"stataUSDC"!==e.symbol))),[n,r]),{data:s,isPending:l}=Ra(i.map((e=>({id:e.tokenAddress,oracleId:e.oracleNodeId,symbol:e.symbol})))),c=n?.find((e=>"stataUSDC"===e.symbol)),{data:d,isPending:u}=function(e,t){const{network:n}=(0,E.LN)(),a=t||n,r=(0,E.eK)(a);return(0,I.useQuery)({refetchInterval:12e4,enabled:Boolean(a&&r&&e),queryKey:[`${a?.id}-${a?.preset}`,"oracle-price",{nodeId:e}],queryFn:async()=>{if(!(a&&r&&e))throw new Error("OMG");return _a({targetNetwork:a,provider:r,nodeId:e})}})}(c?.oracleNodeId,E.PZ),x=t||l||a||o||u,h=A.useMemo((()=>e?e.map((({network:e,poolInfo:t})=>{const a=t.map((({collateral_type:e})=>({collateralDeposited:e.total_amount_deposited,tokenAddress:e.id})));let o=[];e.id===E.PZ.id?o=n:e.id===E.RR.id&&(o=r);const i=o?.map((e=>({...e,collateralDeposited:a.find((({tokenAddress:t})=>t.toLowerCase()===e.tokenAddress.toLowerCase()))?.collateralDeposited||"0"})));return{network:e,poolInfo:t,collateralDeposited:a,collateralTypes:i}})):[]),[e,n,r]),p=A.useMemo((()=>{if(c&&d)return s?.concat({symbol:"stataUSDC",price:d?.price.toBN()})}),[c,s,d]);return(0,M.jsxs)(B.k,{mt:6,maxW:"100%",overflowX:"auto",direction:"column",gap:4,children:[(0,M.jsxs)(B.k,{flexDir:"row",minW:"800px",gap:4,py:3,px:4,whiteSpace:"nowrap",children:[(0,M.jsx)(Xa,{width:"260px",justifyContent:"left",children:"Collateral / Network"}),(0,M.jsx)(Xa,{width:"240px",children:"Wallet Balance"}),(0,M.jsx)(Xa,{width:"240px",children:"TVL"}),(0,M.jsx)(Xa,{width:"164px",children:"APR"}),(0,M.jsx)(B.k,{minW:"120px",flex:"1"})]}),x?(0,M.jsx)(ca,{}):null,!x&&h&&p?(0,M.jsx)(B.k,{minW:"800px",direction:"column-reverse",gap:4,children:h.flatMap((({network:e,poolInfo:t,collateralTypes:n})=>n?.map((n=>(0,M.jsx)(Aa,{pool:t?.[0]?.pool,network:e,collateralType:n,collateralPrices:p},`${e.id}-${n.address}`)))))}):null]})}const Ja=()=>{const{connect:e}=(0,E.Os)();return(0,M.jsxs)(B.k,{w:"100%",justifyContent:"space-between",alignItems:"center",children:[(0,M.jsx)(h.x,{color:"gray.500",fontWeight:500,fontSize:"14px",lineHeight:"14px",my:"4",pl:"3",children:"Please connect wallet to view active positions"}),(0,M.jsx)(f.z,{size:"sm","data-cy":"connect wallet button",onClick:()=>{e()},children:"Connect Wallet"})]})};function er(){const{network:e}=(0,E.LN)();return(0,M.jsx)(tt.h,{children:(0,M.jsxs)(Me.Tr,{children:[(0,M.jsx)(nt.Th,{py:5,textTransform:"unset",color:"gray.600",border:"none",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",children:"Collateral"}),(0,M.jsx)(nt.Th,{textAlign:"right",border:"none",textTransform:"unset",py:5,children:(0,M.jsxs)(B.k,{justifyContent:"flex-end",alignItems:"center",children:[(0,M.jsx)(h.x,{color:"gray.600",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",mr:1,children:"Locked"}),(0,M.jsx)(bt,{label:(0,M.jsx)(h.x,{textAlign:"left",children:"Unlocked assets can be locked into a position at any time or withdrawn after 24h since last activity"}),children:(0,M.jsx)(Ve.s,{w:"10px",h:"10px"})})]})}),(0,M.jsx)(nt.Th,{textAlign:"right",border:"none",textTransform:"unset",py:5,children:(0,M.jsx)(h.x,{color:"gray.600",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",mr:1,children:"Unlocked"})}),(0,M.jsx)(nt.Th,{border:"none",textTransform:"unset",py:5,children:(0,M.jsxs)(B.k,{justifyContent:"flex-end",alignItems:"center",children:[(0,M.jsx)(h.x,{color:"gray.600",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",mr:1,children:"APR"}),(0,M.jsx)(bt,{label:(0,M.jsx)(B.k,{flexDirection:"column",alignItems:"start",children:(0,M.jsx)(h.x,{textAlign:"left",fontSize:"14px",children:"APR is averaged over the trailing 28 days and is comprised of both performance and rewards"})}),children:(0,M.jsx)(Ve.s,{w:"10px",h:"10px"})})]})}),(0,M.jsx)(nt.Th,{border:"none",textTransform:"unset",py:5,children:(0,M.jsxs)(B.k,{justifyContent:"flex-end",alignItems:"center",children:[(0,M.jsx)(h.x,{color:"gray.600",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",mr:1,children:"andromeda"===e?.preset?"PNL":"Debt"}),(0,M.jsx)(bt,{label:"andromeda"===e?.preset?"Your portion of the pool's total debt, which fluctuates based on trader performance and market conditions":(0,M.jsxs)(h.x,{textAlign:"left",children:["Debt consists of:",(0,M.jsx)("br",{}),"- Your portion of the pool's total debt, which fluctuates based on trader performance and market conditions",(0,M.jsx)("br",{}),"- The amount you've borrowed against your collateral without incurring interest"]}),children:(0,M.jsx)(Ve.s,{w:"10px",h:"10px"})})]})}),"andromeda"===e?.preset?null:(0,M.jsx)(nt.Th,{border:"none",textTransform:"unset",py:5,children:(0,M.jsxs)(B.k,{justifyContent:"flex-end",alignItems:"center",children:[(0,M.jsx)(h.x,{color:"gray.600",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",mr:1,children:"C-Ratio"}),(0,M.jsx)(bt,{label:(0,M.jsx)(B.k,{flexDirection:"column",alignItems:"start",children:(0,M.jsx)(h.x,{textAlign:"left",fontSize:"14px",children:"C-ratio is a dynamic number that represents a ratio between your locked collateral and your debt"})}),children:(0,M.jsx)(Ve.s,{w:"10px",h:"10px"})})]})}),(0,M.jsx)(nt.Th,{py:5,textTransform:"unset",color:"gray.600",border:"none",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",children:" "})]})})}var tr=n(89536);var nr=n(61295);const ar=({onClose:e})=>{const[t]=K(),{data:n}=Ut(t.collateralSymbol),{data:a,isPending:r}=function(e,t,n){const{network:a}=(0,E.LN)(),r=n||a,{data:o}=Fe(r),i=(0,E.eK)(r);return(0,I.useQuery)({enabled:Boolean(i&&o),queryKey:[`${r?.id}-${r?.preset}`,"Locks",{contractsHash:Be([o]),accountId:e,collateralType:t}],queryFn:async()=>{if(!(i&&o&&e&&t))throw"OMFG";const n=new fe.CH(o.address,o.abi,i);return(await n.getLocks(e,t,0,100)).map((e=>({timestamp:e.lockExpirationTime,expirationDate:new Date(1e3*e.lockExpirationTime.toNumber()),amount:e.amountD18})))}})}(t?.accountId,n?.address);return(0,M.jsxs)("div",{children:[(0,M.jsxs)(h.x,{color:"gray.50",fontSize:"20px",fontWeight:700,children:[(0,M.jsx)(tr.R,{cursor:"pointer",onClick:e,mr:2}),"Escrowed SNX"]}),(0,M.jsx)(te.i,{my:4}),"SNX"===n?.symbol&&(0,M.jsxs)(h.x,{fontSize:"14px",color:"white",children:["All SNX rewards on V2 are subject to a 12-month escrow time-lock. Escrowed SNX is",(0,M.jsx)("b",{children:" automatically locked "})," and will continue to earn rewards. After a 12-month lock, this SNX can be ",(0,M.jsx)("b",{children:"unlocked and withdrawn"}),"."]}),(0,M.jsxs)(et.i,{"data-cy":"locked collateral table",mt:2.5,variant:"simple",children:[(0,M.jsx)(tt.h,{children:(0,M.jsxs)(Me.Tr,{borderBottom:"1px solid #2D2D38",children:[(0,M.jsx)(nt.Th,{textTransform:"unset",color:"gray.600",border:"none",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",letterSpacing:.6,fontWeight:700,px:4,py:3,children:"Unlocking Date"}),(0,M.jsxs)(nt.Th,{textTransform:"unset",color:"gray.600",border:"none",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",letterSpacing:.6,fontWeight:700,px:4,py:3,textAlign:"right",children:[n?.displaySymbol??t.collateralSymbol," Amount"]})]})}),n&&!r&&a?(0,M.jsx)(at.p,{children:a.map((e=>(0,M.jsxs)(Me.Tr,{borderBottom:"1px solid #2D2D38",children:[(0,M.jsx)(Le.Td,{px:4,py:5,border:"none",children:(0,M.jsx)(h.x,{fontWeight:500,color:"white",fontSize:"14px",children:(0,nr.Z)(e.expirationDate,{year:"numeric",month:"short",day:"numeric"})})}),(0,M.jsx)(Le.Td,{px:4,py:5,textAlign:"right",border:"none",children:(0,M.jsx)(h.x,{fontWeight:500,color:"white",fontSize:"14px",children:(0,M.jsx)(Ct,{value:(0,se.wei)(e.amount,Number(n.decimals),!0)})})})]},e.timestamp.toString())))}):null]}),r?(0,M.jsx)(_e.O,{mt:4,width:"100%",height:"30px",rounded:"sm"}):null,r||a?.length?null:(0,M.jsxs)(h.x,{width:"100%",textAlign:"center",color:"gray.500",fontWeight:500,fontSize:"14px",my:"4",pl:"3",children:["No Escrowed ",n?.displaySymbol??t.collateralSymbol]}),(0,M.jsx)(f.z,{onClick:e,mt:6,width:"100%",variant:"outline",colorScheme:"gray",children:"Close"})]})};var rr=n(32246);function or(e){return e?e.gt(0)?"white.500":e.lt(0)?"green.500":"white.500":"gray.50"}function ir({debt:e,...t}){return(0,M.jsx)(h.x,{as:"span",...t,color:or(e),children:(0,M.jsx)(Ct,{prefix:(e&&e.gt(0)?"-":"")+"$",value:e?e.abs():s.GH})})}function sr({debt:e,...t}){return(0,M.jsx)(h.x,{as:"span",...t,color:or(e),children:(0,M.jsx)(Ct,{prefix:(e&&e.lt(0)?"-":"")+"$",value:e?e.abs():s.GH})})}function lr({accountId:e}){const{data:t}=Fe(),{network:n}=(0,E.LN)(),a=(0,E.yL)();return(0,I.useQuery)({queryKey:[`${n?.id}-${n?.preset}`,"AccountCollateralUnlockDate",{accountId:e},{contractsHash:Be([t])}],enabled:Boolean(a&&t&&e),queryFn:async function(){if(!(a&&t&&e))throw"OMFG";const n=new fe.CH(t.address,t.abi,a),[r,o]=await Promise.all([n.getAccountLastInteraction(e),n.getConfigUint($e.s("accountTimeoutWithdraw"))]),i=r.add(o);return new Date(1e3*i.toNumber())}})}var cr=n(74479);function dr(e){const{data:t,isLoading:n}=lr({accountId:e}),{minutes:a,hours:r,seconds:o,isRunning:i,restart:s}=(0,cr.useTimer)({expiryTimestamp:new Date,autoStart:!1});return(0,A.useEffect)((()=>{t&&!n&&s(t,!0)}),[t,n,s]),{minutes:a,hours:r,seconds:o,isRunning:i&&!![a,r,o].find((e=>e>0)),accountCollateralUnlockDate:t}}function ur({liquidityPosition:e}){const[t,n]=K(),{network:a}=(0,E.LN)(),r=Ca({tokenAddress:e.collateralType.tokenAddress,customNetwork:a}),{minutes:o,hours:i,isRunning:s}=dr(t.accountId),{data:l}=wa(a?.id,a?.preset),c=e?e.collateralAmount.add(e.totalLocked):void 0,d=e?e.collateralValue.add(e.totalLocked.mul(e.collateralPrice)):void 0,{data:u,isPending:x}=pa(a),m=A.useMemo((()=>u?.find((t=>t.collateralType.toLowerCase()===e?.collateralType?.tokenAddress.toLowerCase()))),[u,e?.collateralType?.tokenAddress]);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Le.Td,{border:"none",children:(0,M.jsx)(ln.p,{in:!0,children:(0,M.jsxs)(B.k,{as:g.r,href:`?${X({page:"position",collateralSymbol:e.collateralType.symbol,manageAction:e.debt.gt(0)?"repay":"claim",accountId:t.accountId})}`,onClick:a=>{a.preventDefault(),n({page:"position",collateralSymbol:e.collateralType.symbol,manageAction:e.debt.gt(0)?"repay":"claim",accountId:t.accountId})},alignItems:"center",textDecoration:"none",_hover:{textDecoration:"none"},whiteSpace:"nowrap",children:[(0,M.jsx)(cn,{symbol:e.collateralType.symbol}),(0,M.jsxs)(B.k,{flexDirection:"column",ml:3,children:[(0,M.jsx)(h.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",fontSize:"sm",children:e.collateralType.symbol}),(0,M.jsx)(h.x,{color:"gray.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",children:e.collateralType.displaySymbol})]})]})})}),(0,M.jsx)(Le.Td,{border:"none",children:(0,M.jsxs)(B.k,{flexDirection:"column",alignItems:"flex-end",children:[(0,M.jsxs)(h.x,{display:"flex",alignItems:"center",gap:2,color:"white",lineHeight:"1.25rem",fontFamily:"heading",fontSize:"sm",children:[(0,M.jsx)(Ct,{prefix:"$",value:d}),e.totalLocked.gt(0)?(0,M.jsx)(ke.u,{label:(0,M.jsx)(Ct,{prefix:"Including ",value:e.totalLocked,suffix:` ${e.collateralType.displaySymbol} Escrow that cannot be unlocked until the unlocking date has been reached`,showTooltip:!0}),children:(0,M.jsx)(pt.E,{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAxMCAxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0uMzk2IDZjMC0uODg2LjcxOC0xLjYwNCAxLjYwNC0xLjYwNGg1LjgzM2MuODg2IDAgMS42MDQuNzE4IDEuNjA0IDEuNjA0djMuNWMwIC44ODYtLjcxOCAxLjYwNC0xLjYwNCAxLjYwNEgyQTEuNjA0IDEuNjA0IDAgMCAxIC4zOTYgOS41ek0yIDUuMjdhLjczLjczIDAgMCAwLS43My43M3YzLjVjMCAuNDAzLjMyNy43My43My43M2g1LjgzM2EuNzMuNzMgMCAwIDAgLjczLS43M1Y2YS43My43MyAwIDAgMC0uNzMtLjczeiIgY2xpcC1ydWxlPSJldmVub2RkIi8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMi4xNDYgMy42NjdhMi43NyAyLjc3IDAgMSAxIDUuNTQyIDBWNS4yN0gyLjE0NnptMi43Ny0xLjg5NmExLjg5NiAxLjg5NiAwIDAgMC0xLjg5NSAxLjg5NnYuNzI5aDMuNzkydi0uNzNhMS44OTYgMS44OTYgMCAwIDAtMS44OTYtMS44OTUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgo8L3N2Zz4K"})}):null]}),(0,M.jsx)(h.x,{color:"gray.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",children:(0,M.jsx)(Ct,{value:c,suffix:` ${e.collateralType.displaySymbol}`})})]})}),(0,M.jsx)(Le.Td,{border:"none",children:(0,M.jsxs)(B.k,{flexDirection:"column",alignItems:"flex-end",children:[(0,M.jsxs)(h.x,{display:"flex",alignItems:"center",color:"white",lineHeight:"1.25rem",fontFamily:"heading",fontSize:"sm",gap:1.5,children:[(0,M.jsx)(Ct,{prefix:"$",value:e.availableCollateral.mul(e.collateralPrice)}),e.availableCollateral.gt(0)&&s&&(0,M.jsx)(ke.u,{label:`Withdrawal available in ${i}H${o}M`,children:(0,M.jsx)(rr.w,{})})]}),(0,M.jsxs)(p.xu,{color:"gray.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",children:[(0,M.jsx)(Ct,{value:e.availableCollateral,suffix:` ${e.collateralType.displaySymbol}`})," ",e.availableCollateral.gt(0)&&!s?(0,M.jsx)(g.r,{href:`?${X({page:"position",collateralSymbol:e.collateralType.symbol,manageAction:"withdraw",accountId:t.accountId})}`,onClick:a=>{a.preventDefault(),n({page:"position",collateralSymbol:e.collateralType.symbol,manageAction:"withdraw",accountId:t.accountId})},color:"cyan.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",children:"Withdraw"}):null]})]})}),(0,M.jsx)(Le.Td,{border:"none",children:(0,M.jsx)(ln.p,{in:!0,children:(0,M.jsx)(B.k,{flexDirection:"column",alignItems:"flex-end",children:(0,M.jsxs)(h.x,{color:"white",lineHeight:"1.25rem",fontFamily:"heading",fontSize:"sm",children:[x?"~":null,!x&&m&&m.apr28d>0?(100*m.apr28d+(r&&l?l:0)).toFixed(2).concat("%"):"-"]})})})}),(0,M.jsx)(Le.Td,{border:"none",children:(0,M.jsxs)(B.k,{flexDirection:"column",alignItems:"flex-end",children:["andromeda"===a?.preset?(0,M.jsx)(ir,{debt:e.debt,lineHeight:"1.25rem",fontFamily:"heading",fontSize:"sm"}):(0,M.jsx)(sr,{debt:e.debt,lineHeight:"1.25rem",fontFamily:"heading",fontSize:"sm"}),(0,M.jsxs)(wt.U,{in:e.debt.gt(0)||e.debt.lt(0),children:[e.debt.gt(0)?(0,M.jsx)(g.r,{color:"cyan.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",href:`?${X({page:"position",collateralSymbol:e.collateralType.symbol,manageAction:"repay",accountId:t.accountId})}`,onClick:a=>{a.preventDefault(),n({page:"position",collateralSymbol:e.collateralType.symbol,manageAction:"repay",accountId:t.accountId})},children:"Repay Debt"}):null,e.debt.lt(0)?(0,M.jsx)(g.r,{color:"cyan.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",href:`?${X({page:"position",collateralSymbol:e.collateralType.symbol,manageAction:"claim",accountId:t.accountId})}`,onClick:a=>{a.preventDefault(),n({page:"position",collateralSymbol:e.collateralType.symbol,manageAction:"claim",accountId:t.accountId})},children:"Claim Credit"}):null]})]})}),"andromeda"===a?.preset?null:(0,M.jsx)(Le.Td,{border:"none",children:(0,M.jsx)(ln.p,{in:!0,children:(0,M.jsxs)(B.k,{flexDirection:"column",alignItems:"flex-end",children:[(0,M.jsx)(h.x,{color:"white",fontSize:"sm",lineHeight:"1.25rem",fontFamily:"heading",children:(0,M.jsx)(It,{value:100*e.cRatio.toNumber()})}),(0,M.jsx)(Tt,{cRatio:100*e.cRatio.toNumber(),liquidationCratio:e.collateralType.liquidationRatioD18?100*e.collateralType.liquidationRatioD18.toNumber():0,targetCratio:e.collateralType.issuanceRatioD18?100*e.collateralType.issuanceRatioD18.toNumber():0})]})})}),(0,M.jsx)(Le.Td,{border:"none",pr:0,children:(0,M.jsx)(B.k,{justifyContent:"flex-end",children:(0,M.jsx)(f.z,{as:g.r,href:`?${X({page:"position",collateralSymbol:e.collateralType.symbol,manageAction:"deposit",accountId:t.accountId})}`,onClick:a=>{a.preventDefault(),n({page:"position",collateralSymbol:e.collateralType.symbol,manageAction:"deposit",accountId:t.accountId})},fontSize:"sm",lineHeight:"1.25rem",height:"2rem",fontWeight:700,pt:"5px",pb:"5px",pl:"12px",pr:"12px",borderWidth:"1px",borderColor:"gray.900",borderRadius:"4px",textDecoration:"none",_hover:{textDecoration:"none"},children:"Manage"})})})]})}const xr=ge()("snx:useLiquidityPositions"),hr=({accountId:e})=>{const{data:t}=Fe(),{data:n}=Rt(),{network:a}=(0,E.LN)(),r=(0,E.eK)(a),{data:o}=Ot(),i=(0,I.useQueryClient)();return(0,I.useQuery)({queryKey:[`${a?.id}-${a?.preset}`,"LiquidityPositions",{accountId:e},{contractsHash:Be([t]),collateralTypes:Be([o,...n||[]])}],enabled:Boolean(a&&r&&t&&o&&e&&n),queryFn:async()=>{if(!(a&&r&&t&&o&&e&&n))throw"OMFG";const l=new fe.CH(t.address,t.abi,r),c=l.populateTransaction.getAccountAvailableCollateral(e,o.address),d=n.map((t=>l.populateTransaction.getPositionCollateral(e,s.sc,t.tokenAddress))),u=n.map((t=>l.populateTransaction.getPositionDebt(e,s.sc,t.tokenAddress))),x=n.map((e=>l.populateTransaction.getCollateralPrice(e.tokenAddress))),h=n.map((t=>l.populateTransaction.getAccountCollateral(e,t.tokenAddress))),p=await Promise.all([c,...d,...u,...x,...h]);return await Ya(a,r,p,(r=>{const[s]=l.interface.decodeFunctionResult("getAccountAvailableCollateral",r[0].returnData),c=n.map(((e,t)=>{const[a]=l.interface.decodeFunctionResult("getPositionCollateral",r[1+0*n.length+t].returnData),[o]=l.interface.decodeFunctionResult("getPositionDebt",r[1+1*n.length+t].returnData),[i]=l.interface.decodeFunctionResult("getCollateralPrice",r[1+2*n.length+t].returnData),[c,d,u]=l.interface.decodeFunctionResult("getAccountCollateral",r[1+3*n.length+t].returnData),x=(0,se.wei)(c),h=(0,se.wei)(d),p=(0,se.wei)(u);xr({collateralType:e,positionCollateral:a,positionDebt:o,collateralPriceRaw:i,totalDeposited:x,totalAssigned:h,totalLocked:p});const m=(0,se.wei)(x.sub(h).sub(p)),g=(0,se.wei)(s),f=(0,se.wei)(i),y=(0,se.wei)(a),w=y.mul(f),b=(0,se.wei)(o);return{collateralType:e,collateralPrice:f,availableCollateral:m,availableSystemToken:g,collateralAmount:y,collateralValue:w,debt:b,cRatio:zt(b,w),totalDeposited:x,totalAssigned:h,totalLocked:p}}));return xr(c),c.forEach((n=>{i.setQueryData([`${a?.id}-${a?.preset}`,"LiquidityPosition",{accountId:e},{tokenAddress:n.collateralType.tokenAddress},{contractsHash:Be([t]),collateralTypes:Be([o,n.collateralType])}],n)})),c}),"useLiquidityPositions")}})},pr=()=>{const[e,t]=K();return(0,M.jsxs)(B.k,{justifyContent:"space-between",alignItems:"baseline",w:"100%",children:[(0,M.jsx)(h.x,{color:"gray.500",fontWeight:500,fontSize:"14px",my:"4",pl:"3",children:"You can open a new position by choosing a vault for collateral type"}),(0,M.jsx)(f.z,{as:g.r,href:`?${X({accountId:e.accountId})}`,onClick:n=>{n.preventDefault(),t({accountId:e.accountId})},size:"sm","data-cy":"all pools button",children:"Explore all Vaults"})]})};var mr=n(76364);const gr=({children:e,...t})=>(0,M.jsx)(_e.O,{startColor:"gray.700",endColor:"navy.800",...t,children:e}),fr=({children:e,...t})=>(0,M.jsx)(mr.s,{startColor:"gray.700",endColor:"navy.800",...t,children:e});function yr(){return(0,M.jsxs)(Me.Tr,{children:[(0,M.jsx)(Le.Td,{border:"none",children:(0,M.jsxs)(B.k,{alignItems:"center",children:[(0,M.jsx)(fr,{children:(0,M.jsx)(cn,{symbol:"SNX"})}),(0,M.jsxs)(B.k,{flexDirection:"column",ml:3,children:[(0,M.jsx)(gr,{height:"1rem",mb:1,width:"70%",children:(0,M.jsx)(h.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",children:"sUSDC"})}),(0,M.jsx)(gr,{height:"0.75rem",children:(0,M.jsx)(h.x,{color:"gray.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",children:"Synthetic USDC"})})]})]})}),(0,M.jsx)(Le.Td,{border:"none",children:(0,M.jsxs)(B.k,{flexDirection:"column",alignItems:"flex-end",children:[(0,M.jsx)(gr,{height:"1rem",mb:1,children:(0,M.jsx)(h.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",children:"$100,000"})}),(0,M.jsx)(gr,{height:"0.75rem",children:(0,M.jsx)(h.x,{color:"gray.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",children:"200 SNX"})})]})}),(0,M.jsx)(Le.Td,{border:"none",children:(0,M.jsxs)(B.k,{flexDirection:"column",alignItems:"flex-end",children:[(0,M.jsx)(gr,{height:"1rem",mb:1,children:(0,M.jsx)(h.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",children:"$100,000"})}),(0,M.jsx)(gr,{height:"0.75rem",children:(0,M.jsx)(h.x,{color:"gray.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",children:"200 SNX"})})]})}),(0,M.jsx)(Le.Td,{border:"none",children:(0,M.jsxs)(B.k,{flexDirection:"column",alignItems:"flex-end",children:[(0,M.jsx)(gr,{height:"1rem",mb:1,width:"70%",children:(0,M.jsx)(h.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",children:"$20,000"})}),(0,M.jsx)(gr,{height:"0.75rem",children:(0,M.jsx)(h.x,{color:"cyan.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",children:"Claim Credit"})})]})}),(0,M.jsx)(Le.Td,{border:"none",children:(0,M.jsxs)(B.k,{flexDirection:"column",alignItems:"flex-end",children:[(0,M.jsx)(gr,{height:"1rem",mb:1,children:(0,M.jsx)(h.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",children:"5000%"})}),(0,M.jsx)(gr,{height:"0.75rem",children:(0,M.jsx)(Ae.C,{colorScheme:"green",border:"1px solid",bg:"green.900",children:"HEALTHY"})})]})}),(0,M.jsx)(Le.Td,{border:"none",children:(0,M.jsx)(B.k,{flexDirection:"column",children:(0,M.jsx)(gr,{height:"1.75rem",children:(0,M.jsx)(f.z,{fontSize:"0.75rem",lineHeight:"1rem",height:"1.75rem",fontWeight:700,borderWidth:"1px",borderColor:"gray.900",borderRadius:"4px",disabled:!0,children:"Manage"})})})})]})}const wr=()=>(0,M.jsxs)(Me.Tr,{border:"none",borderTop:"1px",borderTopColor:"gray.900",width:"100%",height:"0px",children:[(0,M.jsx)(Le.Td,{height:"0px",border:"none",px:0,pt:0,pb:4}),(0,M.jsx)(Le.Td,{height:"0px",border:"none",px:0,pt:0,pb:4}),(0,M.jsx)(Le.Td,{height:"0px",border:"none",px:0,pt:0,pb:4}),(0,M.jsx)(Le.Td,{height:"0px",border:"none",px:0,pt:0,pb:4}),(0,M.jsx)(Le.Td,{height:"0px",border:"none",px:0,pt:0,pb:4}),(0,M.jsx)(Le.Td,{height:"0px",border:"none",px:0,pt:0,pb:4}),(0,M.jsx)(Le.Td,{height:"0px",border:"none",px:0,pt:0,pb:4})]}),br=()=>{const[e]=K(),{network:t}=(0,E.LN)(),{activeWallet:n}=(0,E.Os)(),a=n?.address,{data:r,isPending:o}=hr({accountId:e.accountId}),i=A.useMemo((()=>r?r.filter((e=>!!e.collateralAmount.gt(0)||(!!e.availableCollateral.gt(0)||!("andromeda"!==t?.preset||"USDC"!==e.collateralType.displaySymbol||!e.availableSystemToken.gt(0))))):[]),[r,t?.preset]);return(0,M.jsxs)(Je.x,{maxW:"100%",borderColor:"gray.900",borderWidth:"1px",borderRadius:"5px",p:6,sx:{borderCollapse:"separate !important",borderSpacing:0},bg:"navy.700",children:[a?null:(0,M.jsx)(Ja,{}),a&&!e.accountId||!o&&!i.length?(0,M.jsx)(pr,{}):null,e.accountId&&(o||i.length>0)?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(J.X,{as:B.k,alignItems:"center",gap:2,fontSize:"18px",fontWeight:700,lineHeight:"28px",color:"gray.50",mb:3,children:t?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(E.dF,{size:"24px",networkId:t.id,mr:1}),(0,M.jsxs)(h.x,{children:[t.label," Network"]})]}):null}),(0,M.jsxs)(et.i,{variant:"simple",children:[(0,M.jsx)(er,{}),(0,M.jsxs)(at.p,{children:[(0,M.jsx)(wr,{}),o?(0,M.jsx)(yr,{}):(0,M.jsx)(M.Fragment,{children:i?.map(((e,t)=>(0,M.jsx)(Me.Tr,{borderBottomWidth:t===i.length-1?"none":"1px",children:(0,M.jsx)(ur,{liquidityPosition:e})},`${s.sc}-${e.collateralType.tokenAddress}`)))})]})]})]}):null]})};n(61601),n(21027),n(35788),n(86023),n(7935),n(13418),n(9185),n(48813),n(5228),n(46085),n(27886),n(94734),n(73919);function jr(e){const{network:t}=(0,E.LN)(),a=e||t;return(0,I.useQuery)({queryKey:[`${a?.id}-${a?.preset}`,"RewardsDistributors"],enabled:Boolean(a),queryFn:async function(){if(!a)throw new Error("OMFG");return async function(e,t){if(!t)throw new Error("Missing preset");const a=`${Number(e).toFixed(0)}-${t}`;switch(a){case"1-main":{const[{default:e}]=await Promise.all([n.e(7279).then(n.t.bind(n,47279,19))]);return e}case"11155111-main":{const[{default:e}]=await Promise.all([n.e(4075).then(n.t.bind(n,94075,19))]);return e}case"10-main":{const[{default:e}]=await Promise.all([n.e(938).then(n.t.bind(n,30938,19))]);return e}case"8453-andromeda":{const[{default:e}]=await Promise.all([n.e(1527).then(n.t.bind(n,61527,19))]);return e}case"84532-andromeda":{const[{default:e}]=await Promise.all([n.e(2370).then(n.t.bind(n,92370,19))]);return e}case"42161-main":{const[{default:e}]=await Promise.all([n.e(6874).then(n.t.bind(n,76874,19))]);return e}case"421614-main":{const[{default:e}]=await Promise.all([n.e(3892).then(n.t.bind(n,53892,19))]);return e}default:throw new Error(`Unsupported deployment ${a} for RewardsDistributors`)}}(a.id,a.preset)},staleTime:1/0,throwOnError:!1})}const Cr=ge()("snx:useRewards");function Sr({network:e,rewards:t,synthTokens:n}){if(t&&t.length>0){const a=new Map;return t.filter((({claimableAmount:e})=>e.gt(0))).forEach((({distributor:t,claimableAmount:r})=>{const o=n?.find((e=>e.address.toLowerCase()===t.payoutToken.address.toLowerCase())),i=o&&o.token?o.token:t.payoutToken,l=s.mF[`${e.id}-${e.preset}`]?.[i.address]?.symbol??i.symbol;a.has(l)?a.set(l,a.get(l).add(r)):a.set(l,r)})),Array.from(a.entries()).map((([e,t])=>({displaySymbol:e,claimableAmount:t}))).sort(((e,t)=>e.displaySymbol.localeCompare(t.displaySymbol))).sort(((e,t)=>t.claimableAmount.toNumber()-e.claimableAmount.toNumber()))}}function Mr({accountId:e}){const{network:t}=(0,E.LN)(),n=(0,E.yL)(),{data:a}=ja(),{data:r}=Rt(),{data:o}=He(t),{data:i}=Fe(t),{data:l}=jr(t);return(0,I.useQuery)({enabled:Boolean(t&&i&&o&&l&&e&&r&&a),queryKey:[`${t?.id}-${t?.preset}`,"Rewards",{accountId:e},{contractsHash:Be([i,o,...l??[],...a??[],...r??[]])}],queryFn:async()=>{if(!(i&&o&&l&&e&&r&&a))throw new Error("OMG");const t=l.map((t=>{if(t.collateralType)return{method:"getAvailableRewards",claimMethod:"claimRewards",args:[qt.O$.from(e),qt.O$.from(s.sc),t.collateralType.address,t.address],distributor:t,collateralType:t.collateralType}})).filter((e=>void 0!==e));Cr("vaultDistributors",t);const c=l.filter((e=>!e.collateralType)).filter((e=>!e.name.includes("Liquidation Rewards"))).flatMap((t=>({method:"getAvailablePoolRewards",claimMethod:"claimPoolRewards",args:[qt.O$.from(e),qt.O$.from(s.sc),Xe.d,t.address],distributor:t,collateralType:void 0})));Cr("poolDistributors",c);const d=l.filter((e=>!e.collateralType)).filter((e=>!e.name.includes("Liquidation Rewards"))).flatMap((t=>r.map((n=>({method:"getAvailablePoolRewards",claimMethod:"claimPoolRewards",args:[qt.O$.from(e),qt.O$.from(s.sc),n.address,t.address],distributor:t,collateralType:n})))));Cr("poolDistributorsPerCollateral",d);const u=l.filter((e=>!e.collateralType)).filter((e=>e.name.includes("Liquidation Rewards"))).flatMap((t=>r.map((n=>({method:"getAvailableRewards",claimMethod:"claimRewards",args:[qt.O$.from(e),qt.O$.from(s.sc),n.address,t.address],distributor:t,collateralType:n})))));Cr("liquidationRewardsDistributors",u);const x=[...t,...c,...d,...u];Cr("multicall",x);const h=new fe.CH(i.address,i.abi,n),p=await Promise.all(x.map((async({method:e,args:t})=>{const{to:n,data:a}=await h.populateTransaction[e](...t);return{target:n,callData:a,allowFailure:!0}})));Cr("calls",p);const m=new fe.CH(o.address,o.abi,n),g=await m.callStatic.aggregate3(p);Cr("multicallResponse",g);const f=x.map((({method:e,claimMethod:t,args:n,distributor:a,collateralType:r},o)=>{const{success:i,returnData:s}=g[o];if(!i)return;const[l]=h.interface.decodeFunctionResult(e,s);return{method:e,claimMethod:t,args:n,distributor:a,collateralType:r,claimableAmount:(0,se.wei)(l)}})).filter((e=>void 0!==e));return Cr("availableRewards",f),f}})}function Lr(e){const{network:t}=(0,E.LN)(),n=e||t;return(0,I.useQuery)({queryKey:[`${n?.id}-${n?.preset}`,"SpotMarketProxy"],enabled:Boolean(n),queryFn:async function(){if(!n)throw new Error("OMFG");return Wa(n.id,n.preset)},staleTime:1/0,throwOnError:!1})}const Ar=ge()("snx:useClaimAllRewards");var vr=n(60110);function Dr(){return(0,M.jsxs)(re.b,{borderRadius:"6px",status:"warning",mb:"6",children:[(0,M.jsx)(oe.z,{}),(0,M.jsx)(h.x,{children:"This action will reset the withdrawal waiting period to 24 hours"})]})}function Ir(){const[e]=K(),{data:t}=lr({accountId:e.accountId});return(0,M.jsxs)(re.b,{borderRadius:"6px",status:"warning",mb:"6",children:[(0,M.jsx)(oe.z,{}),t&&t.getTime()>Date.now()?(0,M.jsx)(h.x,{children:"All new deposits have a 24 hour withdrawal waiting period. This action will reset your active withdrawal waiting period to 24 hours."}):(0,M.jsx)(h.x,{children:"All new deposits have a 24 hour withdrawal waiting period."})]})}function kr({txnStatus:e,txnHash:t}){const[n]=K(),{network:a}=(0,E.LN)(),{data:r}=Mr({accountId:n.accountId}),{data:o}=ja(),[i,s]=A.useState(!1),[u,p]=A.useState(),m=A.useCallback((()=>{s(!1),p(void 0)}),[]);return A.useEffect((()=>{"prompting"===e&&s(!0),"error"===e&&m()}),[m,e]),A.useEffect((()=>{if(i&&r&&o&&a){const e=Sr({network:a,rewards:r,synthTokens:o});u||p(e)}}),[i,r,o,u,a]),(0,M.jsxs)(l.u_,{isOpen:i,onClose:m,children:[(0,M.jsx)(c.Z,{bg:"#06061B80"}),(0,M.jsx)(d.h,{bg:"navy.700",mt:"10%",borderWidth:"1px",borderColor:"gray.900",minWidth:"384px",children:(0,M.jsxs)(x.f,{"data-cy":"claim rewards dialog",p:6,children:[(0,M.jsx)(h.x,{color:"gray.50",fontSize:"20px",fontWeight:700,children:"Claiming Rewards"}),(0,M.jsx)(te.i,{my:4}),(0,M.jsxs)(B.k,{position:"relative",alignItems:"center",gap:4,mb:6,rounded:"lg",mt:"6",p:"4",border:"2px solid",transitionProperty:"border-color",transitionDuration:"normal",borderColor:"success"===e?"green.500":"gray.900",children:[(0,M.jsx)(B.k,{justifyContent:"center",alignItems:"center",borderRadius:"100px",bg:"success"===e?"green.600":"gray.900",width:"40px",height:"40px",p:3,children:"success"===e?(0,M.jsx)(ht.n,{color:"white"}):(0,M.jsx)(vr.D,{size:"25px",isIndeterminate:!0,color:"gray.700"})}),(0,M.jsx)(B.k,{flexDirection:"column",alignItems:"space-between",justifyContent:"space-between",ml:2,"data-cy":"claim rewards info",children:u?u.map((({displaySymbol:t,claimableAmount:n})=>(0,M.jsx)(h.x,{fontSize:"14px",fontWeight:700,lineHeight:"20px",color:"white",children:(0,M.jsx)(Ct,{prefix:"success"===e?"Claimed ":"Claiming ",value:n,suffix:` ${t}`})},t))):(0,M.jsx)(h.x,{fontSize:"12px",lineHeight:"16px",color:"gray.500",children:"Claim your rewards"})})]}),(0,M.jsx)(Dr,{}),"success"===e?(0,M.jsx)(f.z,{mt:5,variant:"solid",justifyContent:"center",px:3,py:3,width:"100%",textAlign:"center",onClick:m,children:"Done"}):null,t&&(0,M.jsx)(B.k,{justifyContent:"center",px:3,py:3,mt:6,mb:1,borderTop:"1px solid",borderTopColor:"gray.900","data-cy":"transaction hash",children:(0,M.jsx)(g.r,{variant:"outline",href:Te({chain:a?.name||"",address:t,isTx:!0}),fontFamily:"heading",color:"cyan.500",fontWeight:700,lineHeight:"20px",fontSize:"14px",target:"_blank",mt:3,children:"View Transaction"})})]})})]})}const Tr=()=>(0,M.jsxs)(Me.Tr,{children:[(0,M.jsx)(Le.Td,{pl:"16px",border:"none",children:(0,M.jsx)(mr.s,{startColor:"whiteAlpha.500",endColor:"whiteAlpha.200",h:"30px",w:"30px"})}),(0,M.jsx)(Le.Td,{pl:"16px",border:"none",children:(0,M.jsx)(_e.O,{startColor:"whiteAlpha.500",endColor:"whiteAlpha.200",height:"30px",children:(0,M.jsx)(h.x,{mr:4,children:"Loading"})})}),(0,M.jsx)(Le.Td,{textAlign:"end",pr:"0px",border:"none",children:(0,M.jsx)(_e.O,{startColor:"whiteAlpha.500",endColor:"whiteAlpha.200",height:"30px",children:(0,M.jsx)(h.x,{children:"Loading"})})})]});function Nr({displaySymbol:e,claimableAmount:t}){return(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)(Me.Tr,{children:[(0,M.jsxs)(Le.Td,{display:"flex",alignItems:"center",px:4,py:3,border:"none",w:"100%",children:[(0,M.jsx)(ln.p,{in:!0,children:(0,M.jsx)(cn,{height:30,width:30,symbol:e})}),(0,M.jsx)(ln.p,{in:!0,children:(0,M.jsx)(B.k,{flexDirection:"column",ml:"12px",children:(0,M.jsx)(h.x,{color:"gray.50",fontSize:"14px",fontFamily:"heading",fontWeight:500,lineHeight:"20px",children:e})})})]}),(0,M.jsx)(Le.Td,{alignItems:"center",px:4,py:3,border:"none",children:(0,M.jsx)(ln.p,{in:!0,children:(0,M.jsx)(h.x,{color:"gray.50",fontSize:"14px",fontFamily:"heading",fontWeight:500,lineHeight:"20px",children:(0,M.jsx)(Ct,{value:t,showTooltip:!0})})})})]})})}function Er(){const[e]=K(),{data:t,isPending:n}=Mr({accountId:e.accountId}),{exec:a,txnState:r}=function({accountId:e}){const{data:t}=Mr({accountId:e}),n=(0,xn.p)({isClosable:!0,duration:9e3}),{network:a}=(0,E.LN)(),{data:r}=Lr(),o=(0,E.mx)(),{data:i}=Fe(),[l,c]=A.useReducer(Ln,Mn),d=(0,I.useQueryClient)(),u=(0,E.yL)(),{data:x}=ja(),{data:h}=Ua(),p=Wn(),m=(0,I.useMutation)({mutationFn:async function(){if(!(a&&u&&o&&r&&i&&t&&x))throw new Error("Not ready");c({type:"prompting"});const e=[],n=new fe.CH(i.address,i.abi,o),l=new fe.CH(r.address,r.abi,o);t.forEach((({distributor:t,claimableAmount:a,claimMethod:r,args:o})=>{if(a.gt(0)){e.push(n.populateTransaction[r](...o));const i=x.find((e=>e.address.toLowerCase()===t.payoutToken.address.toLowerCase()));if(i&&i.token){const t=a.toBN().sub(a.toBN().div(100)).mul(Gt.parseUnits("1",i.token.decimals)).div(s.VP);e.push(l.populateTransaction.unwrap(i.synthMarketId,a.toBN(),t))}}}));const d=await Promise.all(e);Ar("calls",d),h&&d.unshift(h);const p=await o.getAddress(),{multicallTxn:m,gasLimit:g}=await Qa(u,a,d,"useClaimAllRewards",p),f=await o.sendTransaction({...m,gasLimit:g.mul(15).div(10)});Ar("txn",f),c({type:"pending",payload:{txnHash:f.hash}});const y=await u.waitForTransaction(f.hash);return Ar("receipt",y),y},onError(e){const t=p(e);t&&console.error(new Error(t.name),t),c({type:"error",payload:{error:e}}),n.closeAll(),n({title:"Claiming failed",description:t?(0,M.jsx)(mn,{contractError:t}):"Please try again.",status:"error",variant:"left-accent",duration:36e5})},onSuccess:async()=>{const e=`${a?.id}-${a?.preset}`;await Promise.all(["PriceUpdates","Rewards","TokenBalance","SynthBalances","EthBalance"].map((t=>d.invalidateQueries({queryKey:[e,t]})))),c({type:"success"}),n.closeAll(),n({title:"Success",description:"Your rewards have been claimed",status:"success",duration:5e3,variant:"left-accent"})}});return{mutation:m,txnState:l,settle:()=>c({type:"settled"}),isLoading:m.isPending,exec:m.mutateAsync}}({accountId:e.accountId}),{network:o}=(0,E.LN)(),{data:i}=ja(),l=A.useMemo((()=>o&&t&&i?Sr({network:o,rewards:t,synthTokens:i}):void 0),[o,t,i]);return(0,M.jsxs)(Je.x,{children:[(0,M.jsx)(kr,{txnStatus:r.txnStatus,txnHash:r.txnHash}),(0,M.jsxs)(B.k,{alignItems:"center",justifyContent:"space-between",children:[(0,M.jsx)(J.X,{fontSize:"18px",fontWeight:700,lineHeight:"28px",color:"gray.50",mb:3,children:"Rewards"}),(0,M.jsx)(f.z,{size:"sm",variant:"solid",isDisabled:!(l&&l.length>0),_disabled:{bg:"gray.900",backgroundImage:"none",color:"gray.500",opacity:.5,cursor:"not-allowed"},"data-cy":"claim rewards submit",onClick:()=>a(),children:"Claim"})]}),(0,M.jsxs)(et.i,{"data-cy":"rewards table",children:[(0,M.jsx)(tt.h,{children:(0,M.jsxs)(Me.Tr,{borderBottom:"1px solid #2D2D38",children:[(0,M.jsxs)(nt.Th,{textTransform:"unset",color:"gray.600",border:"none",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",letterSpacing:.6,fontWeight:700,px:4,py:3,children:["Token",(0,M.jsx)(bt,{label:"Total rewards active for the Pool",children:(0,M.jsx)(Ve.s,{ml:1,mb:"1px"})})]}),(0,M.jsx)(nt.Th,{textTransform:"unset",color:"gray.600",border:"none",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",letterSpacing:.6,fontWeight:700,px:4,py:3,children:"Earnings"})]})}),(0,M.jsxs)(at.p,{children:[e.accountId?null:(0,M.jsx)(Me.Tr,{children:(0,M.jsx)(Le.Td,{display:"flex",alignItems:"left",px:4,border:"none",w:"100%",children:(0,M.jsx)(h.x,{color:"gray.500",fontFamily:"heading",fontSize:"xs",children:"Create a Position to see your earnings"})})}),e.accountId&&n?(0,M.jsx)(Tr,{}):null,l&&0===l.length?(0,M.jsx)(Me.Tr,{children:(0,M.jsx)(Le.Td,{display:"flex",alignItems:"left",px:4,border:"none",w:"100%",children:(0,M.jsx)(h.x,{color:"gray.500",fontFamily:"heading",fontSize:"xs",children:"No Rewards Available"})})}):null,l&&l.length?l.map((({displaySymbol:e,claimableAmount:t})=>(0,M.jsx)(Nr,{displaySymbol:e,claimableAmount:t},e))):null]})]})]})}function zr(e){return 1===e?"https://stats.synthetix.io/all/?page=ethereum":10===e?"https://stats.synthetix.io/all/?page=optimism":8453===e?"https://stats.synthetix.io/all/?page=base":42161===e?"https://stats.synthetix.io/all/?page=arbitrum":"https://stats.synthetix.io/all/"}const Fr=n.p+"coin.4a23499f.png",Pr=new va.O(s.kw),Hr={SNX:"0x39d020f60982ed892abbcd4a06a276a9f9b7bfbce003204c110b6e488f502da3"},Or=e=>(0,I.useQuery)({queryKey:["PythPrice",e],enabled:Boolean(e),queryFn:async()=>{if(e&&e in Hr){const t=Hr[e],n=await Pr.getLatestPriceFeeds([t]);if(n){const[e]=n,{price:t,expo:a}=e.getPriceUnchecked();return Gt.parseUnits(t,18+a)}}return qt.O$.from(0)}});function $r(){const{activeWallet:e}=(0,E.Os)(),t=(0,E.eK)(E.RR),{data:n}=Ut("SNX",E.RR),a=e?.address,r=n?.tokenAddress;return(0,I.useQuery)({enabled:Boolean(t&&a&&r),queryKey:[`${E.RR?.id}-${E.RR?.preset}`,"TransferableSynthetix",{address:e?.address}],queryFn:async function(){if(!(t&&a&&r))throw"useTransferableSynthetix should not be enabled";const e=new fe.CH(r,["function balanceOf(address owner) view returns (uint256)","function transferableSynthetix(address account) view returns (uint256 transferable)","function collateral(address account) view returns (uint256 collateral)"],t);try{const[t,n]=await Promise.all([e.transferableSynthetix(a),e.collateral(a)]);return{transferable:(0,se.wei)(t),collateral:(0,se.wei)(n)}}catch(e){throw console.error(e),e}}})}const Rr=G.z.custom((e=>qt.O$.isBigNumber(e))),Ur=Rr.transform((e=>(0,se.wei)(e,0).toNumber())),Wr=Rr.transform((e=>(0,se.wei)(e))),Br=G.z.object({value:Rr,amount:Rr}).transform((({value:e,amount:t})=>({value:(0,se.wei)(e),amount:(0,se.wei)(t)}))),qr=e=>{const{network:t}=(0,E.LN)(),n=e||t,{data:a}=Rt(!1,e),{data:r}=Fe(e),o=(0,E.eK)(n);return(0,I.useQuery)({queryKey:[`${n?.id}-${n?.preset}`,"VaultsData",{contractsHash:Be([r,...a??[]])}],enabled:Boolean(r&&a&&n&&o),queryFn:async()=>{if(!(r&&a&&n&&o))throw Error("useVaultsData should not be enabled when missing data");const e=new fe.CH(r.address,r.abi,o),t=await Promise.all(a.map((t=>e.populateTransaction.getVaultCollateral(s.sc,t.tokenAddress))));return await Ya(n,o,t,(e=>e.map((({returnData:e},t)=>{const n=new Oe.vU(r.abi).decodeFunctionResult("getVaultCollateral",e);return{collateral:Br.parse({...n}),collateralType:a[t]}}))),"useVaultsData")}})};var Gr=n(90052);const Vr=ge()("snx:useAccountAvailableCollateral");const Zr=["constructor(address CoreProxy_, address AccountProxy_, address TreasuryMarketProxy_, address LegacyMarketProxy_)","function AccountProxy() view returns (address)","function CoreProxy() view returns (address)","function LegacyMarketProxy() view returns (address)","function TreasuryMarketProxy() view returns (address)","function UINT256_MAX() view returns (uint256)","function V2xResolver() view returns (address)","function closePosition(uint128 accountId)","function get$SNX() view returns (address $SNX)","function get$sUSD() view returns (address $sUSD)","function get$snxUSD() view returns (address $snxUSD)","function getAccounts() view returns (uint128[] accountIds)","function getV2x() view returns (address v2x)","function getV2xUsd() view returns (address v2xUsd)","function increasePosition(uint128 accountId, uint256 snxAmount)","function migratePosition(uint128 sourcePoolId, uint128 accountId)","function onERC721Received(address, address, uint256, bytes) pure returns (bytes4)","function repayLoan(uint128 accountId, uint256 susdAmount)","function setupPosition(uint256 snxAmount)","function withdraw(uint128 accountId)","error AccountExists()","error NotEnoughAllowance(address walletAddress, address tokenAddress, uint256 requiredAllowance, uint256 availableAllowance)","error NotEnoughBalance(address walletAddress, address tokenAddress, uint256 requiredAmount, uint256 availableAmount)"];function Qr(e){const{network:t}=(0,E.LN)(),n=e||t;return(0,I.useQuery)({queryKey:[`${n?.id}-${n?.preset}`,"PositionManagerNewPool"],enabled:Boolean(n),queryFn:async function(){if(!n)throw"OMFG";return async function(e,t){const n=`${Number(e).toFixed(0)}-${t}`;if("1-main"===n)return{address:"0x190dc6311258C6D84E60c24b21008C280880dE95",abi:Zr};throw new Error(`Unsupported deployment ${n} for PositionManagerNewPool`)}(n.id,n.preset)},staleTime:1/0,throwOnError:!1})}const Yr=ge()("snx:useIncreasePositionNewPools");function _r(e){const{network:t}=(0,E.LN)(),a=e||t;return(0,I.useQuery)({queryKey:[`${a?.id}-${a?.preset}`,"TreasuryMarketProxy"],enabled:Boolean(a),queryFn:async function(){if(!a)throw new Error("OMFG");return async function(e,t){if(!t)throw new Error("Missing preset");const a=`${Number(e).toFixed(0)}-${t}`;if("1-main"===a){const[{default:e},{default:t}]=await Promise.all([n.e(9393).then(n.t.bind(n,18152,19)),n.e(4722).then(n.t.bind(n,34722,19))]);return{address:e.contracts.TreasuryMarketProxy,abi:t}}throw new Error(`Unsupported deployment ${a} for TreasuryMarketProxy`)}(a.id,a.preset)},staleTime:1/0,throwOnError:!1})}const Xr=ge()("snx:useLoanedAmount");function Kr(){const[e]=K(),t=(0,E.yL)(),{network:n}=(0,E.LN)(),{data:a}=_r();return(0,I.useQuery)({queryKey:[`${n?.id}-${n?.preset}`,"New Pool","useLoanedAmount",{accountId:e.accountId},{contractsHash:Be([a])}],enabled:Boolean(n&&t&&a&&e.accountId),queryFn:async()=>{if(!(n&&t&&a&&e.accountId))throw new Error("OMFG");Xr("accountId",e.accountId);const r=new fe.CH(a.address,a.abi,t),o=await r.loanedAmount(e.accountId);return Xr("loanedAmount",o),o}})}const Jr=ge()("snx:usePositionCollateral");function eo(){const[e]=K(),t=(0,E.yL)(),{network:n}=(0,E.LN)(),{data:a}=Ut("SNX"),{data:r}=Fe(),o=e.accountId,i=a?.tokenAddress;return(0,I.useQuery)({queryKey:[`${n?.id}-${n?.preset}`,"New Pool","positionCollateral",{accountId:o,poolId:8,collateralAddress:i},{contractsHash:Be([r])}],enabled:Boolean(n&&t&&r&&o&&i),queryFn:async()=>{if(!(n&&t&&r&&o&&i))throw new Error("OMFG");Jr({accountId:o,poolId:8,collateralAddress:i});const e=new fe.CH(r.address,r.abi,t),a=await e.getPositionCollateral(o,8,i);return Jr("positionCollateral",a),a}})}const to=(e,t,n)=>{const a=Math.min(e,n)/n;return t*(1-Math.pow(a,2))};function no(){const e=-500,t=A.useMemo((()=>{const t=[];for(let n=0;n<=50;n++){const a=20*n,r=to(20*n,e,1e3),o=r/e*300;t.push({x:a,y:o,value:r})}return t}),[e]),[n,a]=A.useState(null),r=A.useCallback((e=>{for(let n=0;n<t.length-1;n++){const{x:a,y:r}=t[n],{x:o,y:i}=t[n+1];if(e>=a&&e<=o){return{y:r+(e-a)/(o-a)*(i-r),value:t[n+1].value}}}return{y:0,value:t[0].value}}),[t]);return(0,M.jsxs)("svg",{viewBox:"-70 -70 1100 400",className:"chart",children:[(0,M.jsx)("rect",{x:"0",y:"0",width:"1000",height:"300",fill:"transparent",onMouseMove:e=>{const t=e.target;if(t){const n=t.getBoundingClientRect(),r=(e.clientX-n.left)/n.width*1e3;a(r)}},onMouseLeave:()=>{a(null)}}),(0,M.jsx)("polyline",{fill:"none",stroke:"#9999ac",strokeWidth:"2",points:t.map((({x:e,y:t})=>`${e},${t}`)).join(" ")}),(0,M.jsx)("circle",{cx:t[0].x,cy:t[0].y,r:"8",fill:"#9999ac"}),(0,M.jsx)("circle",{cx:t[t.length-1].x,cy:t[t.length-1].y,r:"8",fill:"#9999ac"}),null!==n&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("line",{x1:n,y1:"0",x2:n,y2:"300",stroke:"#aaa",strokeWidth:"1",strokeDasharray:"4"}),(0,M.jsx)("circle",{cx:n,cy:r(n).y,r:"8",fill:"#9999ac"}),(0,M.jsx)("text",{x:n+20,y:r(n).y+20,fill:"#9999ac",fontSize:"20",textAnchor:"start",children:Math.round(r(n).value)})]}),(0,M.jsx)("line",{x1:"0",y1:"0",x2:"1030",y2:"0",stroke:"#2d2d38",strokeWidth:"1"}),(0,M.jsx)("line",{x1:"0",y1:"0",x2:"0",y2:"330",stroke:"#fff",strokeWidth:"1",strokeDasharray:"5"}),(0,M.jsx)("text",{x:"0",y:"-15",fill:"#9999ac",fontSize:"20",textAnchor:"start",children:"Now"}),(0,M.jsx)("text",{x:"1000",y:"-15",fill:"#9999ac",fontSize:"20",textAnchor:"end",children:"End"}),(0,M.jsx)("text",{x:"-10",y:"20",fill:"#9999ac",fontSize:"20",textAnchor:"end",children:"0%"}),(0,M.jsx)("text",{x:"-10",y:"300",fill:"#9999ac",fontSize:"20",textAnchor:"end",children:"100%"})]})}function ao({size:e=200,strokeWidth:t=1}){const n=(e-t)/2,a=e/2;return(0,M.jsxs)("svg",{viewBox:`0 0 ${e} ${e}`,xmlns:"http://www.w3.org/2000/svg",children:[(0,M.jsx)("defs",{children:(0,M.jsxs)("linearGradient",{id:"circular-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,M.jsx)("stop",{offset:"0%",stopColor:"#34EDB3"}),(0,M.jsx)("stop",{offset:"100%",stopColor:"#00D1FF"})]})}),(0,M.jsx)("circle",{cx:a,cy:a,r:n,fill:"none",stroke:"url(#circular-gradient)",strokeWidth:"1"}),(0,M.jsx)("text",{x:a,y:a,fill:"#ffffff",fontSize:"36",textAnchor:"middle",children:"10.1%"}),(0,M.jsx)("text",{x:a,y:a+30,fill:"#9999ac",fontSize:"18",textAnchor:"middle",children:"APR"})]})}const ro=n.p+"synthetix-rocket.5a88f260.png",oo=({onClose:e,onConfirm:t})=>(0,M.jsxs)(ut.g,{spacing:2,align:"start",children:[(0,M.jsxs)(B.k,{children:[(0,M.jsxs)(ut.g,{gap:6,flex:1,align:"start",fontWeight:"400",fontSize:"14px",children:[(0,M.jsx)(J.X,{size:"sm",children:"Delegated Staking is now live!"}),(0,M.jsx)(h.x,{children:"Migrate from Synthetix V2 or V3 to have your active debt forgiven over 12 months, while also earning:"}),(0,M.jsxs)(m.aV,{spacing:2,children:[(0,M.jsxs)(m.HC,{children:[(0,M.jsx)(m.DE,{as:ht.n,color:"cyan.500"}),"V2 Legacy Market Fees"]}),(0,M.jsxs)(m.HC,{children:[(0,M.jsx)(m.DE,{as:ht.n,color:"cyan.500"}),"V3 SC Pool Fees"]}),(0,M.jsxs)(m.HC,{children:[(0,M.jsx)(m.DE,{as:ht.n,color:"cyan.500"}),"LP Incentives"]}),(0,M.jsxs)(m.HC,{children:[(0,M.jsx)(m.DE,{as:ht.n,color:"cyan.500"}),"Improved LP experience"]})]}),(0,M.jsxs)(h.x,{fontSize:"sm",children:["Learn more about"," ",(0,M.jsx)(g.r,{isExternal:!0,color:"cyan.500",href:"https://sips.synthetix.io/sips/sip-420/",children:"Delegated Staking and the Jubilee Pool"})]})]}),(0,M.jsx)(B.k,{alignItems:"center",justifyContent:"center",flex:1,children:(0,M.jsx)(pt.E,{width:"165px",src:ro,alt:"Synthetix Delegated Staking Launch"})})]}),(0,M.jsx)(mt.L,{mt:6}),(0,M.jsx)(f.z,{width:"100%",onClick:t,children:"Start Migration"}),(0,M.jsx)(f.z,{variant:"outline",colorScheme:"gray",width:"100%",onClick:e,children:"Later"})]}),io="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAxMiAxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04LjY2NiAzLjMzNWEyLjY2NyAyLjY2NyAwIDEgMS01LjMzMyAwIDIuNjY3IDIuNjY3IDAgMCAxIDUuMzMzIDBtLTEgMGMwIC45NDMtLjc2IDEuNjgyLTEuNjY3IDEuNjgyYTEuNjc0IDEuNjc0IDAgMCAxLTEuNjY2LTEuNjgyYzAtLjk0NC43Ni0xLjY4MiAxLjY2Ni0xLjY4MnMxLjY2Ny43MzggMS42NjcgMS42ODJNNiA2LjY2OEMzLjA1MyA2LjY2OC42NjUgOC4wNjEuNjY1IDkuNzc5di41N2MwIC41NDUuNDQ4Ljk4NiAxIC45ODZoOC42NjdjLjU1MiAwIDEtLjQ0MSAxLS45ODV2LS41N2MwLTEuNzItMi4zODgtMy4xMTItNS4zMzQtMy4xMTJNMS42NjUgOS43NzljMC0uMzcuMjY0LS44ODEgMS4wNzItMS4zNTMuNzg2LS40NTggMS45MzYtLjc3MyAzLjI2MS0uNzczczIuNDc2LjMxNSAzLjI2Mi43NzNjLjgwOC40NzIgMS4wNzIuOTgyIDEuMDcyIDEuMzUzdi41N0gxLjY2NnoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgo8L3N2Zz4K",so="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAxMiAxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0uODM0IDYuMDAxYzAtMS4wMTIuODItMS44MzMgMS44MzMtMS44MzNoNi42NjdjMS4wMTMgMCAxLjgzMy44MiAxLjgzMyAxLjgzM3Y0YzAgMS4wMTMtLjgyIDEuODM0LTEuODMzIDEuODM0SDIuNjY3QTEuODMzIDEuODMzIDAgMCAxIC44MzQgMTB6bTEuODMzLS44MzNhLjgzMy44MzMgMCAwIDAtLjgzMy44MzN2NGMwIC40Ni4zNzMuODM0LjgzMy44MzRoNi42NjdjLjQ2IDAgLjgzMy0uMzc0LjgzMy0uODM0di00YS44MzMuODMzIDAgMCAwLS44MzMtLjgzM3oiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTIuODM0IDMuMzM1YTMuMTY3IDMuMTY3IDAgMSAxIDYuMzMzIDB2MS44MzNIMi44MzR6bTMuMTY3LTIuMTY3Yy0xLjE5NyAwLTIuMTY3Ljk3LTIuMTY3IDIuMTY3di44MzNoNC4zMzN2LS44MzNjMC0xLjE5Ny0uOTctMi4xNjctMi4xNjYtMi4xNjciIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgo8L3N2Zz4K",lo="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMi41NyAzLjUwOGExLjY1NCAxLjY1NCAwIDEgMC0yLjMzOSAyLjM0IDEuNjU0IDEuNjU0IDAgMCAwIDIuMzQtMi4zNG0tMS42MzIuNzA4YS42NTQuNjU0IDAgMSAxIC45MjUuOTI0LjY1NC42NTQgMCAwIDEtLjkyNS0uOTI0IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC40MDYgMS42NzNhMS4yIDEuMiAwIDAgMC0uNDQzLS4yNjQgMyAzIDAgMCAwLS40OTMtLjEyMyA4LjQgOC40IDAgMCAwLTEuMTc1LS4wOTNjLTIuMDYtLjA0NC0zLjg5NyAxLjA4LTUuMDkgMi42NzJsLS43MTkuOTU3LS4wNDkuMDk4LTIuNTktMS4xMWEuNS41IDAgMCAwLS41NS4xMDZMMS4wNTIgNi4xNmEuNS41IDAgMCAwIDAgLjcwN2wuNDcuNDcxYTEuODUgMS44NSAwIDAgMCAyLjQzNS4xNjRsLjc1NC4zMDEtLjM5Ni4zOTdhLjUuNSAwIDAgMCAwIC43MDdsLjA1NS4wNTQtLjg3Ljg3YS41LjUgMCAwIDAgLjcwNi43MDhsLjg3LS44N0w2LjQxIDExbC0uODcuODdhLjUuNSAwIDEgMCAuNzA3LjcwN2wuODctLjg3LjA1NS4wNTRhLjUuNSAwIDAgMCAuNzA3IDBsLjM5Ni0uMzk2LjMwMi43NTVjLS41NTUuNzI2LS41IDEuNzcuMTYzIDIuNDM0bC40NzEuNDdhLjUuNSAwIDAgMCAuNzA4IDBsMi4yNDMtMi4yNDNhLjUuNSAwIDAgMCAuMTA2LS41NWwtMS4xMS0yLjU5LjA5OS0uMDUuOTU3LS43MThjMS41OTItMS4xOTMgMi43MTYtMy4wMyAyLjY3Mi01LjA5YTguNCA4LjQgMCAwIDAtLjA5NC0xLjE3NSAzIDMgMCAwIDAtLjEyMi0uNDkzIDEuMiAxLjIgMCAwIDAtLjI2NC0uNDQzbS0yLjEzMi41MmMuMzk2LjAwOC43NTMuMDMzIDEuMDMuMDhxLjIwNi4wMzUuMzIuMDc3LjA1OC4wMjEuMDczLjAzMWwuMDMyLjA3NGEyIDIgMCAwIDEgLjA3Ny4zMmMuMDQ3LjI3Ny4wNzIuNjM0LjA4IDEuMDMuMDM2IDEuNjctLjg3OCAzLjIyNC0yLjI3MiA0LjI3bC0uODg1LjY2M0w4LjY0NCA5Ljc4IDYuMjk4IDcuNDM0IDcuMzQgNS4zNWwuNjY0LS44ODVjMS4wNDYtMS4zOTQgMi42LTIuMzA4IDQuMjctMi4yNzNtLTguNTEgMi42NyAyLjIyNS45NTNMNS4zOTcgN2wtMS4yNzUtLjUxYS42NC42NCAwIDAgMC0uNjg1LjE0MS44NTMuODUzIDAgMCAxLTEuMjA2IDBsLS4xMTgtLjExN3ptNi40OTggNS4yMjYtMS4xODQuNTkyLjUxIDEuMjc1YS42NC42NCAwIDAgMS0uMTQuNjg1Ljg1My44NTMgMCAwIDAgMCAxLjIwN2wuMTE3LjExNyAxLjY1LTEuNjV6TTUuNjkgOC4yNDFsLS4zMTMuMzEyIDIuMTQ4IDIuMTQ5LjMxMy0uMzEzeiIgY2xpcC1ydWxlPSJldmVub2RkIi8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgZD0iTTUuMjI3IDExLjU1OGEuNS41IDAgMSAwLS43MDctLjcwN2wtMS4wMiAxLjAyYS41LjUgMCAxIDAgLjcwNy43MDd6Ii8+Cjwvc3ZnPgo=",co=ge()("snx:useTargetCRatio");function uo(){const e=(0,E.yL)(),{network:t}=(0,E.LN)(),{data:n}=_r();return(0,I.useQuery)({queryKey:[`${t?.id}-${t?.preset}`,"New Pool","targetCRatio",{contractsHash:Be([n])}],enabled:Boolean(t&&e&&n),queryFn:async()=>{if(!(t&&e&&n))throw new Error("OMFG");const a=new fe.CH(n.address,n.abi,e),r=await a.targetCratio();return co("targetCratio",r),r}})}function xo(e){return e?`${parseFloat((0,se.wei)(e).mul(100).toString()).toFixed(0)}%`:"-"}function ho({onClose:e,onConfirm:t}){const[n,a]=K(),{data:r}=uo();return(0,M.jsxs)(ut.g,{spacing:2,align:"start",children:[(0,M.jsx)(h.x,{fontWeight:"700",children:"Migrating to Delegated Staking consists of:"}),(0,M.jsxs)(B.k,{mt:2.5,flexDir:"column",gap:2.5,fontSize:"14px",fontWeight:"400",children:[(0,M.jsxs)(B.k,{alignItems:"center",gap:2.5,children:[(0,M.jsx)(B.k,{width:4,children:(0,M.jsx)(pt.E,{src:io})}),(0,M.jsxs)(h.x,{flex:1,children:["Delegating your staking account to the Synthetix Treasury (see:"," ",(0,M.jsx)(g.r,{isExternal:!0,href:"https://sips.synthetix.io/sips/sip-420/",color:"cyan.500",children:"SIP-420"}),")"]})]}),(0,M.jsxs)(B.k,{alignItems:"center",gap:2.5,children:[(0,M.jsx)(B.k,{width:4,children:(0,M.jsx)(pt.E,{src:lo})}),(0,M.jsx)(h.x,{flex:1,children:"Migration of your SNX Collateral (including escrowed SNX) and your debt to the Jubilee Pool on the Liquidity App"})]}),(0,M.jsxs)(B.k,{alignItems:"center",gap:2.5,children:[(0,M.jsx)(B.k,{width:4,children:(0,M.jsx)(pt.E,{src:so})}),(0,M.jsx)(h.x,{flex:1,children:"Lock of funds for 7 days"})]})]}),(0,M.jsxs)(re.b,{my:6,status:"info",borderRadius:"6px",children:[(0,M.jsx)(oe.z,{}),(0,M.jsxs)(h.x,{fontSize:"14px",children:["Migration to the Jubilee Pool requires a C-Ratio of >",xo(r),". If you are below ",xo(r),", you must"," ",(0,M.jsx)(g.r,{textDecoration:"underline",href:`?${X({page:"position",collateralSymbol:"SNX",manageAction:"repay",accountId:n.accountId})}`,onClick:e=>{e.preventDefault(),a({page:"position",collateralSymbol:"SNX",manageAction:"repay",accountId:n.accountId})},children:"repay your debt"})," ","before migration."]})]}),(0,M.jsx)(f.z,{width:"100%",onClick:t,children:"Continue"}),(0,M.jsx)(f.z,{width:"100%",variant:"outline",colorScheme:"gray",onClick:e,children:"Back"})]})}const po=ge()("snx:useLiquidityPosition"),mo=({accountId:e,collateralType:t})=>{const{data:n}=Fe(),{network:a}=(0,E.LN)(),r=(0,E.eK)(a),{data:o}=Ot();return(0,I.useQuery)({queryKey:[`${a?.id}-${a?.preset}`,"LiquidityPosition",{accountId:e},{tokenAddress:t?.tokenAddress},{contractsHash:Be([n,o])}],enabled:Boolean(a&&r&&n&&o&&e&&t),queryFn:async()=>{if(!(a&&r&&n&&o&&e&&t))throw"OMFG";const i=new fe.CH(n.address,n.abi,r),l=i.populateTransaction.getAccountAvailableCollateral(e,o.address),c=i.populateTransaction.getPositionCollateral(e,s.sc,t.tokenAddress),d=i.populateTransaction.getPositionDebt(e,s.sc,t.tokenAddress),u=i.populateTransaction.getCollateralPrice(t.tokenAddress),x=i.populateTransaction.getAccountCollateral(e,t.tokenAddress),h=await Promise.all([l,c,d,u,x]);return await Ya(a,r,h,(e=>{po("collateralType",t);const[n]=i.interface.decodeFunctionResult("getAccountAvailableCollateral",e[0].returnData);po("accountAvailableSystemToken",n);const[a]=i.interface.decodeFunctionResult("getPositionCollateral",e[1].returnData);po("positionCollateral",a);const[r]=i.interface.decodeFunctionResult("getPositionDebt",e[2].returnData);po("positionDebt",r);const[o]=i.interface.decodeFunctionResult("getCollateralPrice",e[3].returnData);po("collateralPriceRaw",o);const[s,l,c]=i.interface.decodeFunctionResult("getAccountCollateral",e[4].returnData),d=(0,se.wei)(s),u=(0,se.wei)(l),x=(0,se.wei)(c);po("totalDeposited",d),po("totalAssigned",u),po("totalLocked",x);const h=(0,se.wei)(d.sub(u).sub(x)),p=(0,se.wei)(n),m=(0,se.wei)(o),g=(0,se.wei)(a),f=g.mul(m),y=(0,se.wei)(r),w=zt(y,f),b={collateralType:t,collateralPrice:m,availableCollateral:h,availableSystemToken:p,collateralAmount:g,collateralValue:f,debt:y,cRatio:w,totalDeposited:d,totalAssigned:u,totalLocked:x};return po("liquidityPosition",b),b}),"useLiquidityPosition")}})},go=ge()("snx:useMigrateNewPool");function fo({onClose:e,onConfirm:t}){const[n,a]=K(),{data:r}=Ut("SNX"),{data:o,isPending:i}=mo({accountId:n.accountId,collateralType:r}),{isReady:l,mutation:c}=function(){const[e]=K(),t=(0,E.mx)(),n=(0,E.yL)(),{network:a}=(0,E.LN)(),{data:r}=Ut("SNX"),{data:o}=mo({accountId:e.accountId,collateralType:r}),{data:i}=Qr(),{data:l}=pe(),{data:c}=He(),{data:d}=uo(),u=a&&n&&t&&c&&i&&l&&o&&o.collateralAmount.gt(0)&&o.cRatio.gte(d)&&!0,x=(0,xn.p)({isClosable:!0,duration:9e3}),h=Wn(),p=(0,I.useQueryClient)(),m=(0,I.useMutation)({mutationFn:async()=>{if(!u)throw new Error("Not ready");x.closeAll(),x({title:"Migrating...",variant:"left-accent"});const a=new Oe.vU(l.abi),r=new Oe.vU(i.abi),o=[{target:l.address,callData:a.encodeFunctionData("approve",[i.address,qt.O$.from(e.accountId)]),requireSuccess:!0},{target:i.address,callData:r.encodeFunctionData("migratePosition",[qt.O$.from(s.sc),qt.O$.from(e.accountId)]),requireSuccess:!0}];go("multicall",o);const d=new fe.CH(c.address,c.abi,t),h=await d.populateTransaction.aggregate3(o),p=await n.estimateGas(h);go("gasLimit",p);const m=await d.aggregate3(o,{gasLimit:p.mul(15).div(10)});go("txn",m);const g=await n.waitForTransaction(m.hash);return go("receipt",g),g},onSuccess:async()=>{const e=`${a?.id}-${a?.preset}`;await Promise.all(["New Pool","PriceUpdates","LiquidityPosition","LiquidityPositions","TokenBalance","SynthBalances","EthBalance","Allowance","TransferableSynthetix","AccountCollateralUnlockDate"].map((t=>p.invalidateQueries({queryKey:[e,t]})))),x.closeAll(),x({title:"Success",description:"Migration completed.",status:"success",duration:5e3,variant:"left-accent"})},onError:e=>{const t=h(e);throw t&&console.error(new Error(t.name),t),x.closeAll(),x({title:"Could not complete migration",description:t?(0,M.jsx)(mn,{contractError:t}):"Please try again.",status:"error",variant:"left-accent",duration:36e5}),Error("Migration failed",{cause:e})}});return{isReady:u,mutation:m}}(),{data:d}=uo(),{data:u,isPending:x}=Or("SNX"),[m,y]=A.useState(!1),w=A.useCallback((()=>{c.mutateAsync().then(t)}),[c,t]);return(0,M.jsxs)(ut.g,{spacing:2.5,align:"start",fontSize:"12px",children:[(0,M.jsx)(J.X,{size:"sm",children:"Summary of your migration"}),(0,M.jsx)(p.xu,{p:3.5,borderRadius:"4px",background:"#1F1F34",width:"100%",children:(0,M.jsxs)(ut.g,{align:"stretch",spacing:3,children:[(0,M.jsxs)(ft.U,{fontWeight:"700",justifyContent:"space-between",children:[(0,M.jsx)(h.x,{children:"Total collateral"}),i||x?"~":(0,M.jsx)(Ct,{prefix:"$",value:o&&u?o.collateralAmount.mul(u):void 0,suffix:" SNX"})," "]}),(0,M.jsxs)(ft.U,{fontWeight:"700",justifyContent:"space-between",children:[(0,M.jsx)(h.x,{children:"C-Ratio"}),(0,M.jsx)(h.x,{children:i?"~":xo(o?.cRatio.toBN())})]}),(0,M.jsxs)(ft.U,{fontWeight:"700",justifyContent:"space-between",children:[(0,M.jsx)(h.x,{children:"Loan"}),i?"~":(0,M.jsx)(Ct,{prefix:"$",value:o?(0,se.wei)(o.debt):void 0,suffix:" sUSD"})]})]})}),(0,M.jsx)(yt.X,{size:"sm",onChange:e=>y(e.currentTarget.checked),children:"I understand that this action cannot be undone"}),(0,M.jsx)(wt.U,{in:o&&o.cRatio.lt(d),animateOpacity:!0,unmountOnExit:!0,children:(0,M.jsxs)(re.b,{mb:3.5,status:"error",borderRadius:"6px",children:[(0,M.jsx)(oe.z,{}),(0,M.jsxs)(ie.X,{fontSize:"16px",children:["The minimal C-Ratio for migration to Delegated Staking is"," ",(0,M.jsx)("b",{children:xo(d)}),". You can repay debt and increase your C-Ratio on the"," ",(0,M.jsx)(g.r,{textDecoration:"underline",href:`?${X({page:"position",collateralSymbol:"SNX",manageAction:"repay",accountId:n.accountId})}`,onClick:e=>{e.preventDefault(),a({page:"position",collateralSymbol:"SNX",manageAction:"repay",accountId:n.accountId})},children:"Manage Position page"})]})]})}),(0,M.jsx)(f.z,{width:"100%",isDisabled:!(l&&m),onClick:w,children:"Migrate"}),(0,M.jsx)(f.z,{variant:"outline",colorScheme:"gray",onClick:e,width:"100%",children:"Cancel"})]})}const yo=({receipt:e,onConfirm:t})=>{const{network:n}=(0,E.LN)(),{data:a,isPending:r}=eo(),{data:o,isPending:i}=Kr(),{data:s,isPending:l}=Or("SNX");return(0,M.jsxs)(ut.g,{spacing:6,children:[(0,M.jsxs)(h.x,{width:"100%",textAlign:"left",fontSize:"14px",children:["Your ",(0,M.jsx)("b",{children:"Collateral"})," has been migrated to Delegated Staking"]}),(0,M.jsxs)(re.b,{rounded:"base",colorScheme:"green",borderRadius:"6px",children:[(0,M.jsx)(B.k,{bg:"green.500",p:"1",rounded:"full",mr:"3.5",children:(0,M.jsx)(ht.n,{w:"12px",h:"12px",color:"green.900"})}),(0,M.jsxs)(h.x,{fontSize:"16px",children:[(0,M.jsx)("b",{children:"Collateral"})," successfully migrated"]})]}),(0,M.jsx)(an,{width:"100%",items:[{label:"Total collateral",value:r||l?"~":(0,M.jsx)(Ct,{prefix:"$",value:a&&s?(0,se.wei)(a).mul(s):void 0,suffix:" SNX"})},{label:"Loaned amount",value:i?"~":(0,M.jsx)(Ct,{prefix:"$",value:o?(0,se.wei)(o):void 0,suffix:" sUSD"})},{label:"Transaction",value:(0,M.jsxs)(g.r,{isExternal:!0,variant:"outline",href:Ne({chainId:n?.id,txnHash:e?.transactionHash}),fontFamily:"heading",color:"cyan.500",cursor:"pointer",fontWeight:700,target:"_blank",alignItems:"center",gap:1,children:[e?.transactionHash.slice(0,5),"...",e?.transactionHash.slice(-4)]})}]}),(0,M.jsx)(f.z,{width:"100%",onClick:t,children:"Continue"})]})};function wo({onClose:e,isOpen:t}){const[n,a]=A.useState(0);A.useEffect((()=>{t||a(0)}),[t]);const[r,o]=A.useState();return(0,M.jsxs)(l.u_,{size:"lg",isOpen:t,onClose:e,closeOnOverlayClick:!1,children:[(0,M.jsx)(c.Z,{}),(0,M.jsxs)(d.h,{mt:"100px",borderWidth:"1px",borderColor:"gray.900",bg:"navy.900",color:"white",children:[(0,M.jsxs)(B.k,{justifyContent:"space-between",p:6,alignItems:"center",children:[(0,M.jsx)(J.X,{fontSize:"20px",children:"Migrate to Delegated Staking"}),(0,M.jsx)(dt.P,{onClick:e,color:"gray"})]}),(0,M.jsx)(B.k,{width:"100%",px:6,children:(0,M.jsx)(te.i,{borderColor:"gray.900",mb:6,colorScheme:"gray"})}),(0,M.jsxs)(x.f,{pt:0,pb:6,children:[0===n?(0,M.jsx)(oo,{onConfirm:()=>a(1),onClose:e}):null,1===n?(0,M.jsx)(ho,{onConfirm:()=>a(2),onClose:()=>a(0)}):null,2===n?(0,M.jsx)(fo,{onConfirm:e=>{o(e),a(3)},onClose:e}):null,3===n?(0,M.jsx)(yo,{receipt:r,onConfirm:e}):null]})]})]})}function bo({...e}){return(0,M.jsx)(B.k,{alignItems:"center",borderWidth:1,borderRadius:4,px:2,py:0,gap:2,height:"1.75em",color:"gray.500",fontWeight:"500",...e})}function jo(){const{network:e}=(0,E.LN)(),{data:t,isPending:n}=qr(e),{data:a,isPending:r}=Kr(),{data:o}=Ut("SNX"),i=A.useMemo((()=>{if(t&&o)return t.find((e=>e.collateralType.address.toLowerCase()===o.address.toLowerCase()))}),[o,t]),{data:s,isPending:l}=function(){const[e]=K(),t=(0,E.yL)(),{network:n}=(0,E.LN)(),{data:a}=Ut("SNX"),{data:r}=Fe(),o=e.accountId,i=a?.tokenAddress;return(0,I.useQuery)({queryKey:[`${n?.id}-${n?.preset}`,"New Pool","accountAvailableCollateral",{accountId:o,collateralAddress:i},{contractsHash:Be([r])}],enabled:Boolean(n&&t&&r&&o&&i),queryFn:async()=>{if(!(n&&t&&r&&o&&i))throw new Error("OMFG");Vr({accountId:o,collateralAddress:i});const e=new fe.CH(r.address,r.abi,t),a=await e.getAccountAvailableCollateral(o,i);return Vr("accountAvailableCollateral",a),a}})}(),{data:c,isPending:d}=eo(),{data:u,isPending:x}=$r(),{data:m,isPending:y}=Or("SNX"),{isReady:w,mutation:b}=function(){const[e]=K(),t=(0,E.mx)(),n=(0,E.yL)(),{network:a}=(0,E.LN)(),{data:r}=Qr(),{data:o}=pe(),{data:i}=He(),{data:s}=Ht(),l=a&&n&&t&&i&&r&&o&&s&&!0,c=(0,xn.p)({isClosable:!0,duration:9e3}),d=Wn(),u=(0,I.useQueryClient)(),x=(0,I.useMutation)({mutationFn:async()=>{if(!l)throw new Error("Not ready");c.closeAll(),c({title:"Approving SNX...",variant:"left-accent"});const a=await t.getAddress(),d=new fe.CH(s.address,s.abi,t),u=await d.balanceOf(a),x=await d.estimateGas.approve(r.address,u);await d.approve(r.address,u,{gasLimit:x.mul(15).div(10)}),c.closeAll(),c({title:"Updating position...",variant:"left-accent"});const h=new Oe.vU(o.abi),p=new Oe.vU(r.abi),m=[{target:o.address,callData:h.encodeFunctionData("approve",[r.address,qt.O$.from(e.accountId)]),requireSuccess:!0},{target:r.address,callData:p.encodeFunctionData("increasePosition",[qt.O$.from(e.accountId),jt.Bz]),requireSuccess:!0}];Yr("multicall",m);const g=new fe.CH(i.address,i.abi,t),f=await g.populateTransaction.aggregate3(m),y=await n.estimateGas(f);Yr("gasLimit",y);const w=await g.aggregate3(m,{gasLimit:y.mul(15).div(10)});Yr("txn",w);const b=await n.waitForTransaction(w.hash);return Yr("receipt",b),b},onSuccess:async()=>{u.invalidateQueries({queryKey:[`${a?.id}-${a?.preset}`,"New Pool"]}),c.closeAll(),c({title:"Success",description:"Position updated.",status:"success",duration:5e3,variant:"left-accent"})},onError:e=>{const t=d(e);throw t&&console.error(new Error(t.name),t),c.closeAll(),c({title:"Could not update position",description:t?(0,M.jsx)(mn,{contractError:t}):"Please try again.",status:"error",variant:"left-accent",duration:36e5}),Error("Update failed",{cause:e})}});return{isReady:l,mutation:x}}(),[j,C]=A.useState(!1);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(wo,{onClose:()=>C(!1),isOpen:j}),(0,M.jsxs)(B.k,{direction:"column",borderColor:"gray.900",borderWidth:"1px",borderRadius:"5px",bg:"navy.700",p:6,gap:9,children:[(0,M.jsxs)(p.xu,{children:[(0,M.jsxs)(B.k,{direction:"row",flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",children:[(0,M.jsxs)(J.X,{as:B.k,alignItems:"center",gap:4,fontSize:"20px",lineHeight:"1.75rem",color:"gray.50",fontWeight:700,children:[(0,M.jsx)(xa.K7,{}),(0,M.jsx)(h.x,{children:"SNX Jubilee"})]}),(0,M.jsxs)(B.k,{direction:"row",flexWrap:"wrap",alignItems:"center",gap:2,children:[(0,M.jsxs)(bo,{children:[(0,M.jsx)(E.dF,{size:"14px",networkId:e?.id}),(0,M.jsxs)(h.x,{children:[e?.label," Network"]})]}),(0,M.jsxs)(bo,{children:[(0,M.jsx)(h.x,{children:"TVL"}),(0,M.jsx)(h.x,{color:"gray.50",children:n?"~":i?(0,Gr.Z)(i.collateral.value.toNumber()).format({trimMantissa:!0,thousandSeparated:!0,average:!0,mantissa:1,spaceSeparated:!0}):"-"})]}),(0,M.jsxs)(bo,{as:g.r,isExternal:!0,href:zr(e?.id),textDecoration:"none",_hover:{textDecoration:"none"},cursor:"pointer",children:[(0,M.jsx)(h.x,{children:"More Stats"}),(0,M.jsx)(Yn.H,{transform:"rotate(45deg)"})]})]})]}),(0,M.jsx)(h.x,{mt:3,color:"gray.500",children:"Deposit your SNX to earn a share of the protocol’s revenue"})]}),(0,M.jsxs)(B.k,{direction:["column","row","row"],flexWrap:"wrap",alignItems:"top",justifyContent:"stretch",gap:4,children:[(0,M.jsxs)(B.k,{flex:[1,1,2],direction:"row",flexWrap:"wrap",gap:6,children:[(0,M.jsxs)(B.k,{minWidth:"120px",direction:"column",gap:3,children:[(0,M.jsx)(h.x,{color:"gray.500",children:"Deposited"}),(0,M.jsxs)(h.x,{color:"gray.50",fontSize:"1.25em",children:[d||y?"~":null,!d&&!y&&c&&m?(0,M.jsx)(Ct,{prefix:"$",value:(0,se.wei)(c).mul(m)}):null]})]}),(0,M.jsxs)(B.k,{minWidth:"120px",direction:"column",gap:3,children:[(0,M.jsx)(h.x,{color:"gray.500",children:"Loan"}),(0,M.jsxs)(h.x,{color:"gray.50",fontSize:"1.25em",children:[r||y?"~":null,r||y||!a?null:(0,M.jsx)(Ct,{prefix:"$",value:(0,se.wei)(a)})]})]})]}),(0,M.jsxs)(B.k,{flex:[1,1,1],minWidth:"300px",direction:"row",gap:3,children:[(0,M.jsxs)(B.k,{gap:3,direction:"column",width:"50%",children:[(0,M.jsx)(h.x,{color:"gray.500",children:"Available to deposit"}),(0,M.jsxs)(h.x,{color:"gray.50",fontSize:"1.25em",children:[x||y?"~":null,!x&&!y&&u&&m?(0,M.jsx)(Ct,{prefix:"$",value:u.transferable.mul(m),suffix:" SNX"}):null]}),(0,M.jsx)(f.z,{width:"100%",isDisabled:!(u&&u.transferable.gt(0)&&w),isLoading:b.isPending,onClick:()=>b.mutate(),children:"Deposit"})]}),(0,M.jsxs)(B.k,{gap:3,direction:"column",width:"50%",children:[(0,M.jsx)(h.x,{color:"gray.500",children:"Available to withdraw"}),(0,M.jsxs)(h.x,{color:"gray.50",fontSize:"1.25em",children:[l||y?"~":null,!l&&!y&&s&&m?(0,M.jsx)(Ct,{prefix:"$",value:(0,se.wei)(s).mul(m),suffix:" SNX"}):null]}),(0,M.jsx)(f.z,{width:"100%",isDisabled:!(s&&s.gt(0)),children:"Withdraw"})]})]})]}),(0,M.jsxs)(B.k,{direction:{base:"column",sm:"row",lg:"row",xl:"row"},flexWrap:"wrap",gap:4,children:[(0,M.jsxs)(B.k,{order:{base:2,sm:1,lg:1,xl:1},flex:{base:1,sm:2,lg:2,xl:2},width:"100%",borderColor:"gray.900",borderWidth:"1px",borderRadius:"5px",bg:"navy.900",p:6,direction:"column",gap:6,children:[(0,M.jsxs)(B.k,{direction:"row",gap:6,children:[(0,M.jsx)(B.k,{flex:{base:1,sm:1,lg:1,xl:1},direction:"column",width:"200px",gap:6,children:(0,M.jsx)(J.X,{fontSize:"20px",lineHeight:"1.75rem",color:"gray.50",fontWeight:700,children:"Yield"})}),(0,M.jsxs)(B.k,{flex:{base:1,sm:2,lg:2,xl:2},direction:"row",minWidth:"400px",gap:6,children:[(0,M.jsxs)(B.k,{minWidth:"120px",direction:"column",gap:3,children:[(0,M.jsx)(h.x,{color:"gray.500",children:"Performance"}),(0,M.jsx)(h.x,{color:"gray.50",fontSize:"1.25em",children:"N / A"})]}),(0,M.jsxs)(B.k,{minWidth:"120px",direction:"column",gap:3,children:[(0,M.jsx)(h.x,{color:"gray.500",children:"Rewards"}),(0,M.jsx)(h.x,{color:"gray.50",fontSize:"1.25em",children:"N / A"})]})]})]}),(0,M.jsxs)(B.k,{gap:6,direction:{base:"column",sm:"column",lg:"row",xl:"row"},children:[(0,M.jsx)(B.k,{flex:{base:1,sm:1,lg:1,xl:1},direction:"column",width:"200px",gap:6,justifyContent:"center",children:(0,M.jsx)(ao,{})}),(0,M.jsxs)(B.k,{flex:{base:1,sm:2,lg:2,xl:2},direction:"column",minWidth:"400px",gap:6,borderColor:"gray.900",borderWidth:"1px",borderRadius:"5px",p:3,children:[(0,M.jsxs)(B.k,{minWidth:"120px",direction:"column",gap:3,children:[(0,M.jsx)(h.x,{color:"gray.500",children:"Loan repaid"}),(0,M.jsxs)(p.xu,{children:[(0,M.jsx)(h.x,{as:"span",color:"gray.50",fontSize:"1.25em",children:(0,M.jsx)(Ct,{prefix:"$",value:(0,se.wei)(0)})}),(0,M.jsx)(h.x,{as:"span",color:"gray.500",fontSize:"1.25em",children:(0,M.jsx)(Ct,{prefix:" / $",value:(0,se.wei)(0)})})]})]}),(0,M.jsx)(p.xu,{children:(0,M.jsx)(no,{})})]})]})]}),(0,M.jsxs)(B.k,{order:{base:1,sm:1,lg:1,xl:1},flex:{base:1,sm:1,lg:1,xl:1},width:"100%",direction:"column",borderColor:"gray.900",borderWidth:"1px",borderRadius:"5px",p:3,gap:3,justifyContent:"space-between",children:[(0,M.jsxs)(B.k,{direction:"column",gap:3,children:[(0,M.jsx)(pt.E,{rounded:"8px",src:Fr,width:"100%",maxWidth:"354px"}),(0,M.jsx)(J.X,{fontSize:"20px",lineHeight:"1.75rem",color:"gray.50",fontWeight:700,children:"Debt Jubilee"})]}),(0,M.jsx)(f.z,{onClick:()=>C(!0),children:"Migrate to Jubilee"})]})]})]})]})}function Co({isLoading:e,title:t,label:n,value:a}){return(0,M.jsxs)(B.k,{bg:"navy.700",border:"1px solid",borderColor:"gray.900",rounded:"base",flexDir:"column",alignItems:"center",justifyContent:"center",minWidth:"200px",flex:1,height:"160px",px:6,py:4,children:[(0,M.jsxs)(B.k,{alignItems:"center",mb:1,children:[(0,M.jsx)(h.x,{fontSize:"14px",color:"gray.500",mr:1,children:t}),n&&(0,M.jsx)(bt,{label:n,p:3,mt:1,children:(0,M.jsx)(Ve.s,{w:"10px",h:"10px"})})]}),(0,M.jsx)(B.k,{w:"100%",justifyContent:"center",alignItems:"center",children:(0,M.jsx)(gr,{isLoaded:!e,height:"24px",minWidth:e?"40%":"initial",startColor:"gray.700",endColor:"navy.800",children:(0,M.jsx)(ln.p,{in:!0,children:(0,M.jsx)(h.x,{fontSize:"24px",lineHeight:"24px",fontWeight:800,"data-cy":"stats box","data-title":t,children:a||"$0.00"})})})})]})}function So(){const[e]=K(),{data:t,isPending:n}=hr({accountId:e.accountId}),a=A.useMemo((()=>t?t.reduce(((e,t)=>e.add(t.collateralAmount.mul(t.collateralPrice))),(0,se.wei)(0)):(0,se.wei)(0)),[t]);return(0,M.jsx)(Co,{title:"Total Locked",isLoading:!(!e.accountId||e.accountId&&!n),value:(0,M.jsx)(Ct,{prefix:"$",value:(0,se.wei)(a||"0")}),label:(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(h.x,{textAlign:"left",children:"All assets locked in Positions "})})})}const Mo=ge()("snx:useCollateralPrices");function Lo(){const[e]=K(),{network:t}=(0,E.LN)(),{data:n,isPending:a}=Mr({accountId:e.accountId}),{data:r,isPending:o}=Or("SNX"),i=A.useMemo((()=>{const e=new Set;if(n)for(const t of n)t.claimableAmount.gt(0)&&e.add(t.distributor.payoutToken.address);return e}),[n]),{data:s,isPending:l}=function(e,t){const{network:n}=(0,E.LN)(),a=t??n,r=(0,E.eK)(a),{data:o}=Fe(t);return(0,I.useQuery)({enabled:Boolean(a&&r&&o&&e),queryKey:[`${a?.id}-${a?.preset}`,"CollateralPrices",{contractsHash:Be([o,...Array.from(e).map((e=>({address:e})))])}],queryFn:async()=>{if(!(a&&r&&o&&e))throw new Error("OMFG");const t=new fe.CH(o.address,o.abi,r),n=Array.from(e).map((e=>({method:"getCollateralPrice",args:[e],address:e})));Mo("multicall",n);const i=await Promise.all(n.map((({method:e,args:n})=>t.populateTransaction[e](...n))));Mo("calls",i);const s=await Ya(a,r,i.map((e=>(e.requireSuccess=!1,e))),(e=>n.reduce(((n,a,r)=>{if(e[r].success){const[o]=t.interface.decodeFunctionResult("getCollateralPrice",e[r].returnData);n.set(a.address,o)}return n}),new Map)),"useCollateralPrices");return Mo("prices",s),s}})}(i,t),c=A.useMemo((()=>{if(n&&s&&r)return n.reduce(((e,t)=>"SNX"===t.distributor.payoutToken.symbol?e.add(t.claimableAmount.mul(r)):s.has(t.distributor.payoutToken.address)?e.add(t.claimableAmount.mul(s.get(t.distributor.payoutToken.address))):e),(0,se.wei)(0))}),[n,s,r]),{data:d,isPending:u}=hr({accountId:e.accountId}),x=A.useMemo((()=>{if(d)return d.reduce(((e,t)=>e.add(t.debt)),(0,se.wei)(0))}),[d]);return(0,M.jsx)(Co,{title:"Total PNL",isLoading:!(!e.accountId||e.accountId&&!u&&!a&&!o&&!l),value:x&&c?(0,M.jsx)(ir,{debt:x.sub(c)}):null,label:(0,M.jsx)(h.x,{textAlign:"left",children:"Aggregated PNL of all your open Positions and combined value of all your Rewards. This is not inclusive on previously claimed Rewards."})})}const Ao=ge()("snx:StataUSDC");function vo(){const{network:e}=(0,E.LN)(),t=(0,E.yL)(),n=(0,E.mx)(),{activeWallet:a}=(0,E.Os)(),r=a?.address,{data:o}=Un(),{data:i}=(0,I.useQuery)({queryKey:[`${e?.id}-${e?.preset}`,"StaticAaveUSDC Redeem"],enabled:Boolean(e&&t&&r&&o),queryFn:async function(){if(!(e&&t&&r&&o))throw new Error("OMFG");const n=new fe.CH(o.address,o.abi,t),a=await n.maxRedeem(r);return{maxRedeem:a,previewRedeem:await n.previewRedeem(a)}}}),s=(0,xn.p)({isClosable:!0,duration:9e3}),l=(0,I.useQueryClient)(),c=Wn(),d=e&&t&&n&&r&&o&&!0,{mutateAsync:u,isPending:x}=(0,I.useMutation)({mutationFn:async function(){if(!d)throw new Error("Not ready");const e=new fe.CH(o.address,o.abi,n),a=await e.maxRedeem(r);Ao("maxRedeem",a);const i=a;Ao("shares",i);const s=r;Ao("receiver",s);const l=r;Ao("owner",l);Ao("withdrawFromAave",true);const c=[i,s,l,true],u=await e.estimateGas["redeem(uint256,address,address,bool)"](...c),x=await e["redeem(uint256,address,address,bool)"](...c,{gasLimit:u.mul(15).div(10)});Ao("txn",x);const h=await t.waitForTransaction(x.hash);return Ao("receipt",h),h},onSuccess:async()=>{const t=`${e?.id}-${e?.preset}`;await Promise.all(["StaticAaveUSDC Redeem"].map((e=>l.invalidateQueries({queryKey:[t,e]})))),s.closeAll(),s({title:"Success",description:"Your Static aUSDC has been unwrapped to USDC.",status:"success",duration:5e3,variant:"left-accent"})},onError:e=>{const t=c(e);throw t&&console.error(new Error(t.name),t),s.closeAll(),s({title:"Transaction failed",variant:"left-accent",description:t?(0,M.jsx)(mn,{contractError:t}):"Please try again.",status:"error",duration:36e5}),Error("Transaction failed",{cause:e})}});return i&&i.maxRedeem.gt(0)?(0,M.jsx)(p.xu,{mt:6,children:(0,M.jsxs)(B.k,{alignItems:"center",justifyContent:"space-between",children:[(0,M.jsxs)(B.k,{alignItems:"center",textDecoration:"none",_hover:{textDecoration:"none"},children:[(0,M.jsx)(cn,{height:30,width:30,symbol:"stataUSDC"}),(0,M.jsx)(B.k,{flexDirection:"column",ml:3,children:(0,M.jsx)(h.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",fontSize:"sm",children:"Static aUSDC"})})]}),(0,M.jsx)(B.k,{direction:"column",alignItems:"flex-end",children:(0,M.jsx)(h.x,{color:"green.500",fontSize:"14px",fontFamily:"heading",fontWeight:500,lineHeight:"20px",children:(0,M.jsx)(Ct,{prefix:"$",value:(0,se.wei)(i.previewRedeem,6),showTooltip:!0})})}),(0,M.jsx)(f.z,{size:"sm",variant:"solid",isDisabled:!d,isLoading:x,_disabled:{bg:"gray.900",backgroundImage:"none",color:"gray.500",opacity:.5,cursor:"not-allowed"},"data-cy":"unwrap stata submit",onClick:()=>u(),children:"Unwrap"})]})}):null}function Do({synth:e,balance:t}){return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Le.Td,{border:"none",children:(0,M.jsx)(ln.p,{in:!0,children:(0,M.jsxs)(B.k,{alignItems:"center",textDecoration:"none",_hover:{textDecoration:"none"},children:[(0,M.jsx)(dn,{height:30,width:30,symbol:e.symbol}),(0,M.jsxs)(B.k,{flexDirection:"column",ml:3,children:[(0,M.jsx)(h.x,{color:"white",fontWeight:700,lineHeight:"1.25rem",fontFamily:"heading",fontSize:"sm",children:e.symbol}),(0,M.jsx)(h.x,{color:"gray.500",fontFamily:"heading",fontSize:"0.75rem",lineHeight:"1rem",children:e.name})]})]})})}),(0,M.jsx)(Le.Td,{border:"none",children:(0,M.jsx)(ln.p,{in:!0,children:(0,M.jsx)(h.x,{color:t.gt(0)?"green.500":"gray.50",fontSize:"14px",fontFamily:"heading",fontWeight:500,lineHeight:"20px",children:(0,M.jsx)(Ct,{value:t,showTooltip:!0})})})})]})}const Io=ge()("snx:useSynthBalances");function ko(){const{network:e}=(0,E.LN)(),t=(0,E.yL)(),{activeWallet:n}=(0,E.Os)(),a=n?.address,{data:r}=ja(),{data:o}=He();return(0,I.useQuery)({enabled:Boolean(e&&o&&r&&a),queryKey:[`${e?.id}-${e?.preset}`,"SynthBalances",{walletAddress:a},{contractsHash:Be([o,...r??[]])}],queryFn:async()=>{if(!(e&&o&&r&&a))throw new Error("OMG");Io("synthTokens",r);const n=new Oe.vU(["function balanceOf(address) view returns (uint256)"]),i=r.map((e=>({synth:e,method:"balanceOf",args:[a],target:e.address,callData:n.encodeFunctionData("balanceOf",[a]),allowFailure:!0})));Io("multicall",i);const s=new fe.CH(o.address,o.abi,t),l=await s.callStatic.aggregate3(i.map((({target:e,callData:t,allowFailure:n})=>({target:e,callData:t,allowFailure:n}))));Io("multicallResponse",l);const c=i.map((({method:e,synth:t},a)=>{const{success:r,returnData:o}=l[a];if(!r)return void Io(`${e} call error for ${t.symbol}`);const[i]=n.decodeFunctionResult(e,o);return{synth:t,balance:(0,se.wei)(i,t.decimals)}})).filter((e=>void 0!==e));return Io("balances",c),c}})}const To=ge()("snx:useUnwrapAllSynths");const No=()=>(0,M.jsxs)(Me.Tr,{children:[(0,M.jsx)(Le.Td,{pl:"16px",border:"none",children:(0,M.jsx)(mr.s,{startColor:"whiteAlpha.500",endColor:"whiteAlpha.200",height:30,width:30})}),(0,M.jsx)(Le.Td,{pl:"16px",border:"none",children:(0,M.jsx)(_e.O,{startColor:"whiteAlpha.500",endColor:"whiteAlpha.200",height:"30px",children:(0,M.jsx)(h.x,{fontSize:"14px",fontFamily:"heading",fontWeight:500,lineHeight:"20px",children:" "})})})]});function Eo({txnStatus:e,txnHash:t}){const{network:n}=(0,E.LN)(),{data:a}=ko(),[r,o]=A.useState(!1),[i,u]=A.useState(),p=A.useCallback((()=>{o(!1),u(void 0)}),[]);return A.useEffect((()=>{"prompting"===e&&o(!0),"error"===e&&(u(void 0),o(!1))}),[e]),A.useEffect((()=>{if(r&&a&&n){const e=a.map((({synth:e,balance:t})=>({balance:t,symbol:e.token?e.token.symbol:e.symbol,name:e.token?e.token.name:e.name,...s.mF[`${n.id}-${n.preset}`]?.[e.token?e.token.address:e.address]}))).filter((({balance:e})=>e.gt(0))).sort(((e,t)=>e.symbol.localeCompare(t.symbol))).sort(((e,t)=>t.balance.toNumber()-e.balance.toNumber()));i||u(e)}}),[i,r,n,a]),(0,M.jsxs)(l.u_,{isOpen:r,onClose:p,children:[(0,M.jsx)(c.Z,{bg:"#06061B80"}),(0,M.jsx)(d.h,{bg:"navy.700",mt:"10%",borderWidth:"1px",borderColor:"gray.900",minWidth:"384px",children:(0,M.jsxs)(x.f,{"data-cy":"unwrap synths dialog",p:6,children:[(0,M.jsx)(h.x,{color:"gray.50",fontSize:"20px",fontWeight:700,children:"Unwrapping Synths"}),(0,M.jsx)(te.i,{my:4}),(0,M.jsxs)(B.k,{position:"relative",alignItems:"center",gap:4,mb:6,rounded:"lg",mt:"6",p:"4",border:"2px solid",transitionProperty:"border-color",transitionDuration:"normal",borderColor:"success"===e?"green.500":"gray.900",children:[(0,M.jsx)(B.k,{justifyContent:"center",alignItems:"center",borderRadius:"100px",bg:"success"===e?"green.600":"gray.900",width:"40px",height:"40px",p:3,children:"success"===e?(0,M.jsx)(ht.n,{color:"white"}):(0,M.jsx)(vr.D,{size:"25px",isIndeterminate:!0,color:"gray.700"})}),(0,M.jsx)(B.k,{flexDirection:"column",alignItems:"space-between",justifyContent:"space-between",ml:2,"data-cy":"unwrap synths info",children:i?i.map((({symbol:t,balance:n})=>(0,M.jsx)(h.x,{fontSize:"14px",fontWeight:700,lineHeight:"20px",color:"white",children:(0,M.jsx)(Ct,{prefix:"success"===e?"Unwrapped ":"Unwrapping ",value:n,suffix:` ${t}`})},t))):(0,M.jsx)(h.x,{fontSize:"12px",lineHeight:"16px",color:"gray.500",children:"Unwrapping your synths"})})]}),"success"===e?(0,M.jsx)(f.z,{mt:5,variant:"solid",justifyContent:"center",px:3,py:3,width:"100%",textAlign:"center",onClick:p,children:"Done"}):null,t&&(0,M.jsx)(B.k,{justifyContent:"center",px:3,py:3,mt:6,mb:1,borderTop:"1px solid",borderTopColor:"gray.900","data-cy":"transaction hash",children:(0,M.jsx)(g.r,{variant:"outline",href:Te({chain:n?.name||"",address:t,isTx:!0}),fontFamily:"heading",color:"cyan.500",fontWeight:700,lineHeight:"20px",fontSize:"14px",target:"_blank",mt:3,children:"View Transaction"})})]})})]})}function zo(){const{activeWallet:e}=(0,E.Os)(),t=e?.address,{data:n,isPending:a}=ko(),{exec:r,txnState:o}=function(){const{data:e}=ko(),t=(0,xn.p)({isClosable:!0,duration:9e3}),{network:n}=(0,E.LN)(),a=(0,E.yL)(),r=(0,E.mx)(),{data:o}=Lr(),[i,l]=A.useReducer(Ln,Mn),{data:c}=Ua(),d=Wn(),u=(0,I.useQueryClient)(),x=(0,I.useMutation)({mutationFn:async function(){if(!(n&&a&&r&&o&&e))throw new Error("Not ready");l({type:"prompting"});const t=[],i=new fe.CH(o.address,o.abi,r);e.forEach((({synth:e,balance:n})=>{if(e.token&&n.gt(0)){const a=n.toBN().sub(n.toBN().div(100)).mul(Gt.parseUnits("1",e.token.decimals)).div(s.VP);t.push(i.populateTransaction.unwrap(e.synthMarketId,n.toBN(),a))}}));const[d]=await Promise.all([Promise.all(t)]);To("calls",d),c&&d.unshift(c);const u=await r.getAddress(),{multicallTxn:x,gasLimit:h}=await Qa(a,n,d,"useUnwrapAllSynths",u),p=await r.sendTransaction({...x,gasLimit:h.mul(15).div(10)});To("txn",p),l({type:"pending",payload:{txnHash:p.hash}});const m=await a.waitForTransaction(p.hash);return To("receipt",m),m},onError(e){const n=d(e);n&&console.error(new Error(n.name),n),l({type:"error",payload:{error:e}}),t.closeAll(),t({title:"Withdrawal failed",description:n?(0,M.jsx)(mn,{contractError:n}):"Please try again.",status:"error",variant:"left-accent",duration:36e5})},onSuccess:async()=>{const e=`${n?.id}-${n?.preset}`;await Promise.all(["PriceUpdates","TokenBalance","SynthBalances","EthBalance"].map((t=>u.invalidateQueries({queryKey:[e,t]})))),l({type:"success"}),t.closeAll(),t({title:"Success",description:"Your synths have been unwrapped",status:"success",duration:5e3,variant:"left-accent"})}});return{mutation:x,txnState:i,settle:()=>l({type:"settled"}),isLoading:x.isPending,exec:x.mutateAsync}}(),i=A.useMemo((()=>{if(n&&n.length)return n.filter((({balance:e})=>e.gt((0,se.wei)(.01)))).sort(((e,t)=>e.synth.symbol.localeCompare(t.synth.symbol))).sort(((e,t)=>t.balance.toNumber()-e.balance.toNumber()))}),[n]);return(0,M.jsxs)(Je.x,{children:[(0,M.jsx)(Eo,{txnStatus:o.txnStatus,txnHash:o.txnHash}),(0,M.jsxs)(B.k,{alignItems:"center",justifyContent:"space-between",children:[(0,M.jsx)(J.X,{fontSize:"18px",fontWeight:700,lineHeight:"28px",color:"gray.50",mb:3,children:"Synths"}),(0,M.jsx)(f.z,{size:"sm",variant:"solid",isDisabled:!(n&&n.some((({balance:e})=>e.gt(0)))),_disabled:{bg:"gray.900",backgroundImage:"none",color:"gray.500",opacity:.5,cursor:"not-allowed"},"data-cy":"unwrap synths submit",onClick:()=>r(),children:"Unwrap"})]}),(0,M.jsxs)(et.i,{variant:"simple","data-cy":"synths table",children:[(0,M.jsx)(tt.h,{children:(0,M.jsxs)(Me.Tr,{borderBottom:"1px solid #2D2D38",children:[(0,M.jsx)(nt.Th,{textTransform:"unset",color:"gray.600",border:"none",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",letterSpacing:.6,fontWeight:700,px:4,py:3,children:"Token"}),(0,M.jsxs)(nt.Th,{textTransform:"unset",color:"gray.600",border:"none",fontFamily:"heading",fontSize:"12px",lineHeight:"16px",letterSpacing:.6,fontWeight:700,px:4,py:3,children:["Synth balance",(0,M.jsx)(bt,{label:"Total synth balance in your wallet",children:(0,M.jsx)(Ve.s,{ml:1,mb:"1px"})})]})]})}),(0,M.jsxs)(at.p,{children:[t?null:(0,M.jsx)(Me.Tr,{children:(0,M.jsx)(Le.Td,{display:"flex",alignItems:"left",px:4,border:"none",w:"100%",children:(0,M.jsx)(h.x,{color:"gray.500",fontFamily:"heading",fontSize:"xs",children:"Please connect wallet to view synths"})})}),t&&a?(0,M.jsx)(No,{}):null,!a&&i&&0===i.length?(0,M.jsx)(Me.Tr,{children:(0,M.jsx)(Le.Td,{display:"flex",alignItems:"left",px:4,border:"none",w:"100%",children:(0,M.jsx)(h.x,{color:"gray.500",fontFamily:"heading",fontSize:"xs",children:"You do not have any synths"})})}):null,i?i.map((({synth:e,balance:t},n)=>(0,M.jsx)(Me.Tr,{borderBottomWidth:n===i.length-1?"none":"1px",children:(0,M.jsx)(Do,{synth:e,balance:t})},e.symbol))):null]})]})]})}const Fo="true"===window.localStorage.SNX_NEXT;function Po(){const{network:e}=(0,E.LN)();return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(N.q,{children:[(0,M.jsx)("title",{children:"Synthetix Liquidity V3"}),(0,M.jsx)("meta",{name:"description",content:"Synthetix Liquidity V3"})]}),(0,M.jsxs)(B.k,{pt:{base:2,sm:10},flexDir:"column",mb:16,children:[e&&[E.RR.id,E.NM.id].includes(e.id)&&(0,M.jsx)(la,{network:e,type:"alert"}),(0,M.jsxs)(B.k,{columnGap:20,flexWrap:"wrap",justifyContent:"space-between",children:[(0,M.jsxs)(B.k,{flexDirection:"column",minWidth:400,children:[(0,M.jsx)(J.X,{mt:[6,10],color:"gray.50",maxWidth:"20rem",fontSize:["2rem","3rem"],lineHeight:"120%",children:"Earn"}),(0,M.jsx)(h.x,{color:"gray.500",fontSize:"1rem",lineHeight:6,fontFamily:"heading",mt:"1rem",children:"Deposit SNX to earn a privileged share of protocol performance"})]}),(0,M.jsxs)(B.k,{mt:10,gap:4,flex:1,children:[(0,M.jsx)(So,{}),(0,M.jsx)(Lo,{})]})]}),e?.id===E.RR.id&&Fo?(0,M.jsx)(p.xu,{mt:12,children:(0,M.jsx)(jo,{})}):null,(0,M.jsxs)(B.k,{mt:12,flexDirection:"column",gap:4,children:[(0,M.jsx)(J.X,{fontSize:"1.25rem",fontFamily:"heading",lineHeight:"1.75rem",children:"Positions"}),(0,M.jsx)(br,{})]}),(0,M.jsxs)(B.k,{mt:6,flexDirection:["column","column","row"],gap:4,children:[(0,M.jsx)(B.k,{flex:1,flexDirection:"column",borderColor:"gray.900",borderWidth:"1px",borderRadius:"5px",p:6,sx:{borderCollapse:"separate !important",borderSpacing:0},bg:"navy.700",children:(0,M.jsx)(Er,{})}),(0,M.jsxs)(B.k,{flex:1,flexDirection:"column",borderColor:"gray.900",borderWidth:"1px",borderRadius:"5px",p:6,sx:{borderCollapse:"separate !important",borderSpacing:0},bg:"navy.700",children:[(0,M.jsx)(zo,{}),(0,M.jsx)(vo,{})]})]}),(0,M.jsxs)(B.k,{mt:12,flexDirection:"column",children:[(0,M.jsx)(J.X,{fontSize:"1.25rem",fontFamily:"heading",lineHeight:"1.75rem",children:"Vaults"}),(0,M.jsx)(Ka,{})]}),e&&[E.RR.id,E.NM.id].includes(e.id)?(0,M.jsx)(la,{network:e,type:"banner"}):null]})]})}const Ho=()=>(0,M.jsx)(B.k,{borderTop:"1px solid",borderTopColor:"gray.900",bg:"navy.700",children:(0,M.jsxs)(q.W,{maxW:"1236px",as:B.k,height:"72px",alignItems:"center",justifyContent:"space-between",children:[(0,M.jsx)(xa.TR,{withText:!1}),(0,M.jsxs)(B.k,{alignItems:"center",children:[(0,M.jsx)(g.r,{href:"https://discord.com/invite/synthetix",target:"_blank",children:(0,M.jsx)(xa.D7,{w:"24px",h:"24px",mr:2})}),(0,M.jsx)(g.r,{href:"https://x.com/synthetix_io",target:"_blank",children:(0,M.jsx)(xa.b0,{w:"24px",h:"24px",mr:2})}),(0,M.jsx)(g.r,{href:"https://github.com/Synthetixio/",target:"_blank",children:(0,M.jsx)(xa.ET,{w:"24px",h:"24px",mr:2})}),(0,M.jsx)(g.r,{href:"https://warpcast.com/~/channel/synthetix",target:"_blank",children:(0,M.jsx)(xa.sF,{w:"24px",h:"24px",mr:2})}),(0,M.jsx)(g.r,{href:"https://www.youtube.com/@synthetix.v3",target:"_blank",children:(0,M.jsx)(xa.LK,{w:"24px",h:"24px"})})]})]})});var Oo=n(73557),$o=n(41330),Ro=n(10625),Uo=n(67046),Wo=n(99058),Bo=n(17383),qo=n(39415),Go=n(41098);const Vo=ge()("snx:useCreateAccount");const Zo=(e,t)=>{"undefined"!=typeof window&&window.localStorage.setItem(e,JSON.stringify(t))};function Qo(e,t){const[n,a]=(0,A.useState)((()=>{const n=function(e){if("undefined"!=typeof window){const t=window.localStorage.getItem(e);try{if(null!=t)return JSON.parse(t)}catch(e){console.error(e)}}return null}(e);return null!=n?n:t}));return[n,t=>{const r=t instanceof Function?t(n):t;a(r),Zo(e,r)}]}const Yo=E.g5.filter((({isSupported:e,isTestnet:t})=>e&&!t)),_o=E.g5.filter((({isSupported:e,isTestnet:t})=>e&&t));function Xo(){const[e,t]=K(),[n,a]=A.useState("Copy"),{activeWallet:r,walletsInfo:o,connect:i,disconnect:l}=(0,E.Os)(),{network:c,setNetwork:d}=(0,E.LN)(),{data:u,isPending:x}=st(),p=function(){const{data:e}=Fe(),t=(0,E.mx)(),{network:n}=(0,E.LN)(),a=(0,E.yL)(),r=(0,I.useQueryClient)();return{enabled:Boolean(n&&e),mutation:(0,I.useMutation)({mutationFn:async function(){if(!(e&&t&&a))throw"OMFG";const n=new fe.CH(e.address,e.abi,t),r=await n["createAccount()"]();Vo("txn",r);const o=await a.waitForTransaction(r.hash);let i;if(Vo("receipt",o),o.logs.forEach((e=>{if(e.topics[0]===n.interface.getEventTopic("AccountCreated")){const[t]=n.interface.decodeEventLog("AccountCreated",e.data,e.topics);i=t}})),Vo("newAccountId",i),i)return i;throw new Error("Could not find new account id")},onSuccess:async()=>{const e=`${n?.id}-${n?.preset}`;await Promise.all(["Accounts"].map((t=>r.invalidateQueries({queryKey:[e,t]}))))}})}}(),[m,y]=Qo(s.dA.SHOW_TESTNETS,!1),w=A.useMemo((()=>{try{if(e.accountId&&e.accountId.length>0)return qt.O$.from(e.accountId)}catch{}}),[e.accountId]),b=!r,j=r&&!c;return A.useEffect((()=>{if(b){const{accountId:n,...a}=e;t(a)}else if(!x&&u){if(u.length>0&&!e.accountId)return void t({...e,accountId:u[0].toString()});if(u.length>0&&w&&!u.some((e=>e.eq(w))))return void t({...e,accountId:u[0].toString()});if(!u.length){const{accountId:n,...a}=e;return void t(a)}}}),[u,x,b,e,w,t]),A.useEffect((()=>{window.$magicWallet&&i({autoSelect:{disableModals:!0,label:"MetaMask"}})}),[i]),r?(0,M.jsxs)(B.k,{children:[c?(0,M.jsxs)(Ro.v,{children:[(0,M.jsxs)(Uo.j,{as:f.z,variant:"outline",colorScheme:"gray",sx:{"> span":{display:"flex",alignItems:"center"}},mr:1,px:3,children:[(0,M.jsx)(E.dF,{filter:c.isTestnet?"grayscale(1)":"",networkId:b?8453:j?0:c.id}),(0,M.jsx)(h.x,{variant:"nav",ml:2,display:{base:"none",md:"inline-block"},children:c.label})]}),(0,M.jsxs)(Wo.q,{border:"1px",borderColor:"gray.900",children:[Yo.map((({id:e,preset:t,label:n})=>(0,M.jsxs)(Bo.s,{onClick:()=>d(e),isDisabled:!!window.$chainId&&window.$chainId!==e,children:[(0,M.jsx)(E.dF,{networkId:e,size:"20px"}),(0,M.jsx)(h.x,{variant:"nav",ml:2,children:n})]},`${e}-${t}`))),m&&(0,M.jsx)(te.i,{color:"gray.900"}),(0,M.jsx)(qo._,{children:(0,M.jsxs)(B.k,{py:4,px:3,alignItems:"center",justifyContent:"space-between",children:[(0,M.jsx)(h.x,{fontSize:"14px",fontFamily:"heading",lineHeight:"20px",children:"Show Testnets"}),(0,M.jsx)(Go.r,{mr:2,size:"sm",color:"gray.900",colorScheme:"gray",isChecked:m,onChange:()=>y(!m)})]})}),(m?_o:[]).map((({id:e,preset:t,label:n})=>(0,M.jsxs)(Bo.s,{onClick:()=>d(e),isDisabled:!!window.$chainId&&window.$chainId!==e,children:[(0,M.jsx)(E.dF,{filter:"grayscale(1)",networkId:e,size:"20px"}),(0,M.jsx)(h.x,{variant:"nav",ml:2,children:n})]},`${e}-${t}`)))]})]}):null,(0,M.jsxs)(Ro.v,{placement:"bottom-end",children:[(0,M.jsxs)(Uo.j,{as:f.z,variant:"outline",colorScheme:"gray",ml:2,height:10,py:"6px",px:"9.5px",whiteSpace:"nowrap","data-cy":"wallet button",children:[(0,M.jsx)(xa.o,{color:"white"}),(0,M.jsx)(h.x,{as:"span",ml:1,color:"white",fontWeight:700,fontSize:"xs",userSelect:"none","data-cy":"short wallet address",children:r.ens?.name||de(r.address)})]}),(0,M.jsx)(Wo.q,{children:(0,M.jsx)(B.k,{border:"1px solid",rounded:"base",borderColor:"gray.900",w:"370px",_hover:{bg:"navy.700"},backgroundColor:"navy.700",opacity:1,p:"4",children:(0,M.jsxs)(B.k,{flexDir:"column",w:"100%",gap:"2",children:[(0,M.jsxs)(B.k,{justifyContent:"space-between",children:[(0,M.jsxs)(h.x,{fontSize:"14px",color:"gray.500",children:["Connected with ",o?.label]}),(0,M.jsx)(f.z,{onClick:()=>{o&&l(o)},size:"xs",variant:"outline",colorScheme:"gray",color:"white",children:"Disconnect"})]}),(0,M.jsxs)(B.k,{fontWeight:700,color:"white",fontSize:"16px",alignItems:"center",children:[(0,M.jsx)(bt,{label:r.address,fontFamily:"monospace",fontSize:"0.9em",children:(0,M.jsx)(h.x,{children:de(r.address)})}),(0,M.jsx)(bt,{label:n,closeOnClick:!1,children:(0,M.jsx)(De.T,{ml:"2",onClick:()=>{navigator.clipboard.writeText(r.address),a("Copied"),setTimeout((()=>{a("Copy")}),1e4)}})})]}),(0,M.jsxs)(B.k,{flexDir:"column",p:"2",border:"1px solid",borderColor:"gray.900",rounded:"base",gap:"2",children:[(0,M.jsxs)(B.k,{w:"100%",justifyContent:"space-between",children:[(0,M.jsx)(h.x,{fontWeight:400,fontSize:"14px",children:"Account(s)"}),(0,M.jsx)(g.r,{href:`?${X({page:"settings",accountId:e.accountId})}`,onClick:n=>{n.preventDefault(),t({page:"settings",accountId:e.accountId})},children:(0,M.jsx)(ve.h,{variant:"outline",colorScheme:"gray",size:"xs",icon:(0,M.jsx)($o.e,{}),"aria-label":"account settings"})})]}),(0,M.jsx)(B.k,{"data-cy":"accounts list",flexDir:"column",children:u?.map((n=>(0,M.jsxs)(h.x,{display:"flex",alignItems:"center",color:"white",fontWeight:700,fontSize:"16px",cursor:"pointer",p:"3","data-cy":"account id","data-account-id":n,_hover:{bg:"whiteAlpha.300"},onClick:a=>{a.stopPropagation(),t({...e,accountId:n.toString()})},children:[ue(n),w&&n.eq(w)?(0,M.jsx)(Ae.C,{ml:2,colorScheme:"cyan",variant:"outline",children:"Connected"}):null]},n.toString())))}),(0,M.jsx)(f.z,{onClick:e=>{e.preventDefault(),e.stopPropagation(),p.mutation.mutate()},isDisabled:!p.enabled||p.mutation.isPending,size:"xs",variant:"outline",colorScheme:"gray",color:"white",leftIcon:(0,M.jsx)("svg",{width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,M.jsx)("path",{d:"M3.5 3.5V0.5H4.5V3.5H7.5V4.5H4.5V7.5H3.5V4.5H0.5V3.5H3.5Z",fill:"white"})}),w:"130px","data-cy":"create new account button",children:"Create Account"})]})]})})})]})]}):(0,M.jsx)(f.z,{"data-cy":"connect wallet button",onClick:()=>i(),type:"button",size:"sm",ml:2,py:5,children:"Connect Wallet"})}function Ko(){const{network:e}=(0,E.LN)(),{onClose:t}=(0,Se.q)(),n=(0,Oo.TH)();return(0,A.useEffect)((()=>{t()}),[n,t]),(0,M.jsx)(B.k,{bg:"navy.700",mb:"4",py:"3",borderBottomWidth:"1px",borderBottomColor:"gray.900",px:{base:1,md:10},children:(0,M.jsxs)(q.W,{maxW:"1236px",as:B.k,justifyContent:"space-between",alignItems:"center",children:[(0,M.jsxs)(B.k,{flexDirection:"row",justifyContent:"start",alignItems:"center",children:[(0,M.jsx)(g.r,{mt:-1.5,to:"/",as:v.OL,display:{base:"none",md:"inline-block"},children:(0,M.jsx)(xa.TR,{})}),(0,M.jsx)(g.r,{mt:-1.5,to:"/",as:v.OL,display:{md:"none"},children:(0,M.jsx)(xa.K7,{})})]}),(0,M.jsxs)(B.k,{gap:3,flexWrap:"wrap-reverse",justifyContent:"center",alignItems:"center",children:[e&&[E.RR.id,E.NM.id].includes(e.id)?(0,M.jsx)(sa,{network:e}):null,(0,M.jsx)(Xo,{})]})]})})}const Jo=(0,A.createContext)({collateralChange:(0,se.wei)(0),debtChange:(0,se.wei)(0),withdrawAmount:(0,se.wei)(0),setDebtChange:()=>{},setCollateralChange:()=>{},setWithdrawAmount:()=>{}}),ei=({children:e})=>{const[t,n]=(0,A.useState)((0,se.wei)(0)),[a,r]=(0,A.useState)((0,se.wei)(0)),[o,i]=(0,A.useState)((0,se.wei)(0));return(0,M.jsx)(Jo.Provider,{value:{debtChange:t,setDebtChange:n,collateralChange:a,setCollateralChange:r,withdrawAmount:o,setWithdrawAmount:i},children:e})},ti=e=>{const{data:t}=Rt(!0),n=t?.filter((e=>"stataUSDC"!==e.symbol)),{data:a}=Ra((n||[]).map((e=>({id:e.tokenAddress,oracleId:e.oracleNodeId,symbol:e.symbol}))));return(0,A.useMemo)((()=>{if(!t||!a)return s.GH;const n="stataUSDC"===e?a.find((e=>"USDC"===`${e.symbol}`.toUpperCase())):a.find((t=>`${t.symbol}`.toUpperCase()===`${e}`.toUpperCase()));return n&&n.price?(0,se.wei)(n.price):s.GH}),[a,t,e])};function ni({title:e,subline:t,alertText:n,summary:a,onClose:r}){return(0,M.jsxs)(B.k,{flexDir:"column",gap:"6",borderColor:"gray.900",rounded:"base",height:"fit-content",children:[e&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(J.X,{color:"gray.50",fontSize:"20px",fontWeight:700,children:e}),(0,M.jsx)(te.i,{})]}),t&&(0,M.jsx)(h.x,{color:"white",fontSize:"14px",fontWeight:400,children:t}),(0,M.jsxs)(re.b,{status:"success",rounded:"base",borderRadius:"6px",children:[(0,M.jsx)(B.k,{bg:"green.500",p:"1",rounded:"full",mr:"2",children:(0,M.jsx)(yn,{w:"12px",h:"12px",color:"green.900"})}),(0,M.jsx)(h.x,{color:"white",fontSize:"16px",fontWeight:400,children:n})]}),a,(0,M.jsx)(f.z,{w:"100%",onClick:r,children:"Continue"})]})}function ai({newDebt:e,hasChanges:t}){const[n]=K(),{data:a}=Ut(n.collateralSymbol),{data:r,isPending:o}=mo({accountId:n.accountId,collateralType:a});return(0,M.jsx)(ta,{p:4,flex:"1",flexDirection:"row",bg:"navy.700",children:(0,M.jsxs)(B.k,{flexDirection:"column",width:"100%",children:[(0,M.jsxs)(B.k,{alignItems:"center",mb:"4px",children:[(0,M.jsx)(h.x,{color:"gray.500",fontSize:"xs",fontFamily:"heading",lineHeight:"16px",children:"Debt"}),(0,M.jsx)(ke.u,{label:(0,M.jsxs)(h.x,{children:["Debt consists of:",(0,M.jsx)("br",{}),"- Your portion of the pool's total debt, which fluctuates based on trader performance and market conditions",(0,M.jsx)("br",{}),"- The amount you've borrowed against your collateral without incurring interest"]}),textAlign:"start",py:2,px:3,children:(0,M.jsx)(B.k,{height:"12px",width:"12px",ml:"4px",alignItems:"center",justifyContent:"center",children:(0,M.jsx)(Ve.s,{color:"gray.500",height:"10px",width:"10px"})})})]}),(0,M.jsx)(B.k,{width:"100%",children:(0,M.jsx)(Kn,{value:r?.debt,isPending:Boolean(n.accountId&&o),newValue:e,formatFn:e=>(0,M.jsx)(sr,{debt:e,as:"span"}),hasChanges:t,"data-cy":"stats debt"})})]})})}function ri(){const{network:e}=(0,E.LN)(),[t]=K(),{data:n}=Ut(t.collateralSymbol),{data:a,isPending:r}=qr(e),o=A.useMemo((()=>{if(a&&n)return a.find((e=>e.collateralType.address.toLowerCase()===n.address.toLowerCase()))}),[n,a]);return(0,M.jsxs)(B.k,{alignItems:"center",children:[(0,M.jsx)(B.k,{bg:"linear-gradient(180deg, #08021E 0%, #1F0777 100%)",justifyContent:"center",alignItems:"center",borderRadius:"100%",display:"flex",children:(0,M.jsx)(cn,{symbol:n?.symbol??t.collateralSymbol,height:42,width:42,fill:"#0B0B22",color:"#00D1FF"})}),(0,M.jsxs)(B.k,{direction:"column",gap:.5,children:[(0,M.jsxs)(J.X,{ml:4,fontWeight:700,fontSize:["18px","20px","24px"],color:"gray.50",display:"flex",alignItems:"center",children:[n?.displaySymbol??t.collateralSymbol," Liquidity Position"]}),(0,M.jsxs)(B.k,{ml:4,fontWeight:700,fontSize:["10px","12px"],color:"gray.50",alignItems:"center",gap:3,lineHeight:"14px",children:[(0,M.jsxs)(B.k,{mt:.25,alignItems:"center",color:"gray.500",fontWeight:"500",borderWidth:1,borderRadius:4,px:1,py:.5,gap:2,children:[(0,M.jsx)(E.dF,{size:"14px",networkId:e?.id}),(0,M.jsxs)(h.x,{children:[e?.label," Network"]})]}),(0,M.jsxs)(B.k,{alignItems:"center",color:"gray.500",fontWeight:"500",borderWidth:1,borderRadius:4,px:1,py:.5,gap:2,children:[(0,M.jsx)(h.x,{children:"TVL"}),(0,M.jsx)(h.x,{children:r?"~":o?da(o.collateral.value.toNumber(),{maximumFractionDigits:0}):"-"})]}),(0,M.jsxs)(B.k,{as:g.r,isExternal:!0,href:zr(e?.id),textDecoration:"none",_hover:{textDecoration:"none"},cursor:"pointer",alignItems:"center",color:"gray.500",fontWeight:"500",borderWidth:1,borderRadius:4,px:1,py:.5,gap:2,children:[(0,M.jsx)(h.x,{children:"More Stats"}),(0,M.jsx)(Yn.H,{transform:"rotate(45deg)"})]})]})]})]})}function oi(){return(0,M.jsxs)(ta,{display:"flex",flexDirection:["column","column","column","column","row"],alignItems:"center",gap:6,p:6,bg:"navy.700",children:[(0,M.jsxs)(B.k,{flexDir:"column",gap:3,children:[(0,M.jsx)(h.x,{color:"white.900",fontSize:"20px",fontWeight:700,children:"This position earns yield via Aave and Synthetix"}),(0,M.jsx)(h.x,{color:"white.600",fontSize:"14px",fontWeight:300,children:"Deposit USDC, and we’ll wrap it into Static aUSDC for you. Watch your balance stay the same while the value grows, earning effortless yield through Aave and Synthetix."}),(0,M.jsx)(f.z,{mt:1,as:g.r,href:"https://governance.aave.com/t/bgd-statatoken-v3/11894",target:"_blank",textDecoration:"none",variant:"outline",colorScheme:"gray",w:"fit-content",children:"Read more about Static aUSDC"})]}),(0,M.jsx)(pt.E,{rounded:"8px",src:Fr,width:257})]})}const ii=({issuanceRatioD18:e,collateralAmount:t,collateralPrice:n,debt:a,collateralChange:r,debtChange:o})=>{const i=e||(0,se.wei)(1),s=(0,se.wei)(a||0).add(o),l=(0,se.wei)(t||0).add(r),c=zt(s,l.mul(n||0)),d=(0,se.wei)(l).mul(n||0).div(i).sub(a||0),u=d.gte(0)?d:(0,se.wei)(0);return{isValid:o.lte(0)&&r.gte(0)||(c.gte(i)||c.lte(0))&&(s.lte(0)||l.gt(0)),hasChanges:!r.eq(0)||!o.eq(0),newCRatio:c,newDebt:s,newCollateralAmount:l,maxDebt:u}};function si({newCollateralAmount:e,hasChanges:t}){const[n,a]=K(),{data:r}=Ut(n.collateralSymbol),{data:o,isPending:i}=mo({accountId:n.accountId,collateralType:r});return(0,M.jsx)(ta,{maxW:["100%","50%"],p:4,flex:"1",flexDirection:"row",bg:"navy.700",children:(0,M.jsxs)(B.k,{opacity:o||t?"100%":"40%",flexDirection:"column",width:"100%",children:[(0,M.jsx)(B.k,{alignItems:"center",mb:"4px",children:(0,M.jsx)(h.x,{color:"gray.500",fontSize:"xs",fontFamily:"heading",lineHeight:"16px",children:"Collateral"})}),(0,M.jsx)(B.k,{width:"100%",isTruncated:!0,children:(0,M.jsxs)(B.k,{width:"100%",direction:"column",gap:"1",children:[(0,M.jsx)(Kn,{isPending:Boolean(n.accountId&&i),value:o?.collateralAmount,newValue:e,formatFn:e=>`${xe(e??s.GH)} ${r?.displaySymbol??n.collateralSymbol}`,hasChanges:t,"data-cy":"stats collateral"}),o?(0,M.jsx)(Kn,{isPending:Boolean(n.accountId&&i),value:o?o.collateralAmount.mul(o.collateralPrice):s.GH,newValue:e.mul(o?.collateralPrice??s.GH),formatFn:e=>xe(e??s.GH,{currency:"USD",style:"currency"}),size:"md",hasChanges:t,"data-cy":"stats collateral value"}):null]})}),o&&o.totalLocked.gt(0)?(0,M.jsxs)(B.k,{"data-cy":"locked amount",mt:4,alignItems:"center",gap:2,alignContent:"center",children:[(0,M.jsx)(h.x,{color:"gray.500",fontSize:"sm",fontFamily:"heading",lineHeight:"16px",children:"Escrowed"})," ",(0,M.jsx)(g.r,{"data-cy":"locked amount link",color:"white",fontSize:"sm",fontFamily:"heading",lineHeight:"16px",fontWeight:700,ml:1,href:`?${X({...n,page:"position",manageAction:"locked"})}`,onClick:e=>{e.preventDefault(),a({...n,page:"position",manageAction:"locked"})},children:(0,M.jsx)(Ct,{value:o.totalLocked,suffix:` ${r?.displaySymbol}`,showTooltip:!0})})]}):null]})})}function li({newDebt:e,hasChanges:t}){const[n]=K(),{data:a}=Ut(n.collateralSymbol),{data:r,isPending:o}=mo({accountId:n.accountId,collateralType:a});return(0,M.jsx)(ta,{p:4,flex:"1",flexDirection:"row",bg:"navy.700",justifyContent:"space-between",children:(0,M.jsxs)(B.k,{flexDirection:"column",width:"100%",children:[(0,M.jsxs)(B.k,{alignItems:"center",mb:"4px",children:[(0,M.jsx)(h.x,{color:"gray.500",fontSize:"xs",fontFamily:"heading",lineHeight:"16px",children:"PnL"}),(0,M.jsx)(bt,{label:"Your portion of the pool's total debt, which fluctuates based on trader performance and market conditions",textAlign:"start",py:2,px:3,children:(0,M.jsx)(B.k,{height:"12px",width:"12px",ml:"4px",alignItems:"center",justifyContent:"center",children:(0,M.jsx)(Ve.s,{color:"white",height:"9px",width:"9px"})})})]}),(0,M.jsx)(B.k,{width:"100%",children:(0,M.jsx)(Kn,{value:r?.debt.mul(-1),isPending:Boolean(n.accountId&&o),newValue:e.mul(-1),formatFn:e=>(0,M.jsx)(ir,{debt:e?e.mul(-1):e}),hasChanges:t,"data-cy":"stats pnl"})})]})})}function ci(){const[e]=K(),{network:t}=(0,E.LN)(),{debtChange:n,collateralChange:a}=A.useContext(Jo),{data:r}=Ut(e.collateralSymbol),{data:o}=mo({accountId:e.accountId,collateralType:r}),i=Ca({tokenAddress:r?.tokenAddress}),{data:l}=Sa(),c=A.useMemo((()=>i&&l?a.div(l).mul(s.LL):a),[a,i,l]),d=zt(o?.debt,o?.collateralValue),{newCRatio:u,newCollateralAmount:x,newDebt:p,hasChanges:m}=ii({issuanceRatioD18:r?.issuanceRatioD18,collateralAmount:o?.collateralAmount,collateralPrice:o?.collateralPrice,debt:o?.debt,collateralChange:c,debtChange:n});return(0,M.jsxs)(B.k,{direction:"column",gap:4,children:[(0,M.jsx)(h.x,{color:"white",fontSize:"lg",fontFamily:"heading",fontWeight:"bold",lineHeight:"16px",children:"Overview"}),(0,M.jsxs)(B.k,{flexWrap:"wrap",direction:["column","row"],gap:4,children:[(0,M.jsx)(si,{newCollateralAmount:x,hasChanges:m}),"andromeda"===t?.preset?(0,M.jsx)(li,{newDebt:p,hasChanges:m}):(0,M.jsx)(ai,{newDebt:p,hasChanges:m})]}),"andromeda"===t?.preset?null:(0,M.jsx)(ta,{py:4,px:6,flexDirection:"column",bg:"navy.700",children:(0,M.jsx)(Et,{hasChanges:m,currentCRatio:o?.collateralValue.gt(0)&&o?.debt.eq(0)?Number.MAX_SAFE_INTEGER:100*d.toNumber(),liquidationCratio:100*(r?.liquidationRatioD18?.toNumber()||0),newCRatio:x.gt(0)&&p.eq(0)?Number.MAX_SAFE_INTEGER:100*u.toNumber(),targetCratio:100*(r?.issuanceRatioD18.toNumber()||0)})})]})}const di=ge()("snx:ClosePositionOneStep");function ui({onClose:e,onBack:t}){const[n]=K(),{data:a}=Ut(n.collateralSymbol),{data:r,refetch:o}=mo({accountId:n.accountId,collateralType:a}),{setCollateralChange:i,setDebtChange:l}=A.useContext(Jo),c=(0,xn.p)({isClosable:!0,duration:9e3}),[d,u]=A.useState({step:0,status:"idle"}),x=(0,I.useQueryClient)(),p=Wn(),{data:m}=Fe(),{data:y}=He(),{data:w}=pe(),{data:b}=zn(),{data:j}=function(e){const{network:t}=(0,E.LN)(),n=e||t;return(0,I.useQuery)({queryKey:[`${n?.id}-${n?.preset}`,"PythVerifier"],enabled:Boolean(n),queryFn:async function(){if(!n)throw new Error("OMFG");return Ta(n.id,n.preset)},staleTime:1/0,throwOnError:!1})}(),{data:C}=function(e){const{network:t}=(0,E.LN)(),n=e||t;return(0,I.useQuery)({queryKey:[`${n?.id}-${n?.preset}`,"PythFeeds"],enabled:Boolean(n),queryFn:async function(){if(!n)throw new Error("OMFG");return Ia(n.id,n.preset)},staleTime:1/0,throwOnError:!1})}(),{data:S}=Ot(),{data:L}=Ua(),{network:v}=(0,E.LN)(),D=(0,E.mx)(),k=(0,E.yL)(),{mutate:T}=(0,I.useMutation)({mutationFn:async function(){if(di("params",n),di("collateralType",a),u({step:1,status:"pending"}),!(v&&k&&D&&m&&y&&w&&b&&j&&C&&n.accountId&&S?.address&&a?.tokenAddress))throw new Error("Not ready");const e=new fe.CH(b.address,b.abi,D),t=new fe.CH(w.address,w.abi,D),r=new fe.CH(S?.address,["function approve(address spender, uint256 amount) returns (bool)"],D),{data:i}=await o({throwOnError:!0});if(!i)throw new Error("Could not fetch fresh liquidity position");const l=i.debt.lt(1)?Gt.parseEther("1"):i.debt.mul(120).div(100).toBN();di("adjustedAllowance",l);const c=t.populateTransaction.approve(b.address,n.accountId),d=r.populateTransaction.approve(b.address,l),x=e.populateTransaction.closePosition(m.address,w.address,n.accountId,s.sc,a.tokenAddress),h=Promise.all([c,d,x]),[p]=await Promise.all([h]);L&&p.unshift(L);const g=await D.getAddress(),{multicallTxn:f,gasLimit:M}=await Qa(k,v,p,"useClosePosition",g),A=await D.sendTransaction({...f,gasLimit:M.mul(15).div(10)});di("txn",A);const I=await k.waitForTransaction(A.hash);return di("receipt",I),I},onSuccess:async()=>{const e=`${v?.id}-${v?.preset}`;await Promise.all(["PriceUpdates","LiquidityPosition","LiquidityPositions","TokenBalance","SynthBalances","EthBalance","Allowance","TransferableSynthetix","AccountCollateralUnlockDate"].map((t=>x.invalidateQueries({queryKey:[e,t]})))),i(s.GH),l(s.GH),u({step:1,status:"success"})},onError:e=>{u({step:1,status:"error"});const t=p(e);throw t&&console.error(new Error(t.name),t),c.closeAll(),c({title:"Transaction failed",variant:"left-accent",description:t?(0,M.jsx)(mn,{contractError:t}):"Please try again.",status:"error",duration:36e5}),Error("Transaction failed",{cause:e})}});return"success"===d.status?(0,M.jsx)(ni,{onClose:e,title:"Position successfully closed",subline:(0,M.jsxs)(M.Fragment,{children:["Your position has been successfully closed. To learn more, visit the"," ",(0,M.jsx)(g.r,{href:"https://docs.synthetix.io/",target:"_blank",color:"cyan.500",children:"Synthetix V3 Documentation"})]}),alertText:(0,M.jsx)(M.Fragment,{children:"Position successfully closed"})}):(0,M.jsxs)(B.k,{flexDirection:"column","data-cy":"close position multistep",children:[(0,M.jsxs)(h.x,{color:"gray.50",fontSize:"20px",fontWeight:700,children:[(0,M.jsx)(tr.R,{cursor:"pointer",onClick:t,mr:2}),"Close Position"]}),(0,M.jsx)(te.i,{mt:6,bg:"gray.900"}),(0,M.jsx)(Sn,{step:1,title:"Close position",subtitle:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(h.x,{children:"Approve close position on behalf"}),r&&r.debt&&r.debt.gt(0)?(0,M.jsx)(h.x,{children:(0,M.jsx)(Ct,{prefix:"Repay ",value:r.debt,suffix:` ${S?S.symbol:""} of debt`})}):null,r&&r.debt&&r.debt.lt(0)?(0,M.jsx)(h.x,{children:(0,M.jsx)(Ct,{prefix:"Claim ",value:r.debt.abs(),suffix:` ${S?S.symbol:""}`})}):null,r?(0,M.jsx)(Ct,{prefix:"Unlock ",value:r.collateralAmount,suffix:` ${a?a.symbol:""} from the pool`}):null]}),status:{failed:"error"===d.status,success:"success"===d.status,loading:"pending"===d.status}}),(0,M.jsxs)(f.z,{"data-cy":"close position confirm button",isLoading:"pending"===d.status,isDisabled:!(r&&r.collateralAmount.gt(0)),onClick:()=>T(),mt:"6",children:["error"===d.status?"Retry":null,"pending"===d.status?"Processing...":null,"idle"===d.status?"Execute Transaction":null]})]})}const xi=ge()("snx:useBorrow"),hi=({borrowAmount:e})=>{const[t]=K(),{data:n}=Ut(t.collateralSymbol),[a,r]=(0,A.useReducer)(Ln,Mn),{data:o}=Fe(),{data:i}=Ua(),l=(0,E.mx)(),c=(0,E.yL)(),{network:d}=(0,E.LN)(),u=(0,I.useQueryClient)(),x=l&&o&&t.accountId&&n?.address&&d&&c&&!!e,h=(0,I.useMutation)({mutationFn:async()=>{if(!x)throw new Error("Not ready");r({type:"prompting"});const a=new fe.CH(o.address,o.abi,l).populateTransaction.mintUsd(qt.O$.from(t.accountId),qt.O$.from(s.sc),n?.address,e.toBN()),u=Promise.all([a]),[h]=await Promise.all([u]);i&&h.unshift(i);const p=await l.getAddress(),{multicallTxn:m,gasLimit:g}=await Qa(c,d,h,"useBorrow",p),f=await l.sendTransaction({...m,gasLimit:g.mul(15).div(10)});xi("txn",f),r({type:"pending",payload:{txnHash:f.hash}});const y=await c.waitForTransaction(f.hash);return xi("receipt",y),y},onSuccess:async()=>{const e=`${d?.id}-${d?.preset}`;await Promise.all(["PriceUpdates","LiquidityPosition","LiquidityPositions","TokenBalance","SynthBalances","EthBalance","TransferableSynthetix","AccountCollateralUnlockDate"].map((t=>u.invalidateQueries({queryKey:[e,t]})))),r({type:"success"})},onError:e=>{throw r({type:"error",payload:{error:e}}),e}});return{isReady:x,mutation:h,txnState:a,settle:()=>r({type:"settled"}),isLoading:h.isPending,exec:h.mutateAsync}},pi=["function depositDebtToRepay(address synthetixCore, address spotMarket, address accountProxy, uint128 accountId, uint128 poolId, address collateralType, uint128 spotMarketId)"];function mi(e){const{network:t}=(0,E.LN)(),n=e||t;return(0,I.useQuery)({queryKey:[`${n?.id}-${n?.preset}`,"DebtRepayer"],enabled:Boolean(n),queryFn:async function(){if(!n)throw new Error("OMFG");return async function(e,t){const n=`${Number(e).toFixed(0)}-${t}`;switch(n){case"8453-andromeda":return{address:"0x624f2aB0f1DFF2297b9eca320898381Fbba4E3E3",abi:pi};case"84532-andromeda":return{address:"0xe4b0233F06a308B4732282e24ce7aE0c87bdEcbc",abi:pi};default:throw new Error(`Unsupported deployment ${n} for DebtRepayer`)}}(n.id,n.preset)},staleTime:1/0,throwOnError:!1})}const gi=ge()("snx:useRepay");function fi({repayAmount:e}){const[t]=K(),{data:n}=Ut(t.collateralSymbol),[a,r]=(0,A.useReducer)(Ln,Mn),{data:o}=Fe(),{data:i}=pe(),{data:l}=Fn(),{data:c}=mo({accountId:t.accountId,collateralType:n}),{data:d}=Ot(),{data:u}=Gn(d?.address),{data:x}=Ua(),h=(0,E.mx)(),{network:p}=(0,E.LN)(),m=(0,E.yL)(),g=u&&c?u.add(c.availableSystemToken):void 0,f=c&&c.debt.gt(0)&&g&&e&&g.gte(e),y=e&&e.gt(0)&&f&&p&&m&&h&&o&&i&&l&&t.accountId&&d?.address&&n?.tokenAddress&&!0,w=(0,I.useQueryClient)(),b=(0,I.useMutation)({mutationFn:async()=>{if(!y)throw new Error("Not ready");r({type:"prompting"});const a=new fe.CH(i.address,i.abi,h),c=new fe.CH(d?.address,["function approve(address spender, uint256 amount) returns (bool)"],h),u=new fe.CH(l.address,l.abi,h),g=a.populateTransaction.approve(l.address,t.accountId),f=c.populateTransaction.approve(l.address,e.toBN()),w=u.populateTransaction.repay(o.address,i.address,t.accountId,s.sc,n.tokenAddress,e.toBN()),b=Promise.all([g,f,w]),[j]=await Promise.all([b]);x&&j.unshift(x);const C=await h.getAddress(),{multicallTxn:S,gasLimit:M}=await Qa(m,p,j,"useRepay",C),L=await h.sendTransaction({...S,gasLimit:M.mul(15).div(10)});gi("txn",L),r({type:"pending",payload:{txnHash:L.hash}});const A=await m.waitForTransaction(L.hash);return gi("receipt",A),A},onSuccess:async()=>{const e=`${p?.id}-${p?.preset}`;await Promise.all(["PriceUpdates","LiquidityPosition","LiquidityPositions","TokenBalance","SynthBalances","EthBalance","Allowance","TransferableSynthetix"].map((t=>w.invalidateQueries({queryKey:[e,t]})))),r({type:"success"})},onError:e=>{throw r({type:"error",payload:{error:e}}),e}});return{isReady:y,mutation:b,txnState:a,settle:()=>r({type:"settled"}),isLoading:b.isPending,exec:b.mutateAsync}}const yi=ge()("snx:useUndelegate"),wi=({undelegateAmount:e})=>{const[t]=K(),{data:n}=Ut(t.collateralSymbol),a=n?.tokenAddress,[r,o]=(0,A.useReducer)(Ln,Mn),{data:i}=mo({accountId:t.accountId,collateralType:n}),{data:l}=Fe(),{data:c}=Ua(),d=(0,E.mx)(),u=(0,E.yL)(),{network:x}=(0,E.LN)(),h=(0,I.useQueryClient)(),p=i&&i.collateralAmount.gt(0)&&e&&i.collateralAmount.gte(e)&&x&&u&&d&&l&&t.accountId&&a&&!0,m=(0,I.useMutation)({mutationFn:async()=>{if(!p)throw new Error("Not ready");o({type:"prompting"});const n=new fe.CH(l.address,l.abi,d).populateTransaction.delegateCollateral(qt.O$.from(t.accountId),qt.O$.from(s.sc),a,i.collateralAmount.sub(e).toBN(),(0,se.wei)(1).toBN()),r=await d.getAddress(),h=Promise.all([n]),[m]=await Promise.all([h]);c&&m.unshift(c);const{multicallTxn:g,gasLimit:f}=await Qa(u,x,m,"useUndelegate",r),y=await d.sendTransaction({...g,gasLimit:f.mul(15).div(10)});yi("txn",y),o({type:"pending",payload:{txnHash:y.hash}});const w=await u.waitForTransaction(y.hash);return yi("receipt",w),w},onSuccess:async()=>{const e=`${x?.id}-${x?.preset}`;await Promise.all(["PriceUpdates","LiquidityPosition","LiquidityPositions","TokenBalance","SynthBalances","EthBalance","Allowance","TransferableSynthetix","AccountCollateralUnlockDate"].map((t=>h.invalidateQueries({queryKey:[e,t]})))),o({type:"success"})},onError:e=>{throw o({type:"error",payload:{error:e}}),e}});return{isReady:p,mutation:m,txnState:r,settle:()=>o({type:"settled"}),isLoading:m.isPending,exec:m.mutateAsync}},bi=ge()("snx:useUndelegateBaseAndromeda");function ji({undelegateAmount:e}){const[t]=K(),{data:n}=Ut(t.collateralSymbol),{data:a}=mo({accountId:t.accountId,collateralType:n}),r=n?.tokenAddress,o=a?.collateralAmount||(0,se.wei)(0),[i,l]=A.useReducer(Ln,Mn),{data:c}=Fe(),{data:d}=Lr(),{data:u}=Ua(),x=(0,E.mx)(),h=(0,E.yL)(),{network:p}=(0,E.LN)(),{data:m}=pe(),{data:g}=mi(),f=(0,I.useQueryClient)(),y=a&&a.collateralAmount.gt(0)&&e&&a.collateralAmount.gte(e)&&p&&h&&x&&c&&m&&g&&d&&t.accountId&&r&&!0,w=(0,I.useMutation)({mutationFn:async()=>{if(!y)throw new Error("Not ready");l({type:"prompting"});const n=new fe.CH(m.address,m.abi,x),a=new fe.CH(g.address,g.abi,x),i=n.populateTransaction.approve(g.address,t.accountId),f=a.populateTransaction.depositDebtToRepay(c.address,d.address,m.address,t.accountId,s.sc,r,fa),w=new fe.CH(c.address,c.abi,x).populateTransaction.delegateCollateral(qt.O$.from(t.accountId),qt.O$.from(s.sc),r,o.sub(e).toBN(),(0,se.wei)(1).toBN()),b=Promise.all([i,f,w].filter(Ba)),[j]=await Promise.all([b]);u&&j.unshift(u);const C=await x.getAddress(),{multicallTxn:S,gasLimit:M}=await Qa(h,p,j,"useUndelegateBase",C),L=await x.sendTransaction({...S,gasLimit:M.mul(15).div(10)});bi("txn",L),l({type:"pending",payload:{txnHash:L.hash}});const A=await h.waitForTransaction(L.hash);return bi("receipt",A),A},onSuccess:async()=>{const e=`${p?.id}-${p?.preset}`;await Promise.all(["PriceUpdates","LiquidityPosition","LiquidityPositions","TokenBalance","SynthBalances","EthBalance","Allowance","AccountCollateralUnlockDate"].map((t=>f.invalidateQueries({queryKey:[e,t]})))),l({type:"success"})},onError:e=>{throw l({type:"error",payload:{error:e}}),e}});return{mutation:w,txnState:i,settle:()=>l({type:"settled"}),isLoading:w.isPending,exec:w.mutateAsync,isReady:y}}function Ci({onClose:e,onBack:t}){const[n]=K(),{data:a}=Ut(n.collateralSymbol),{data:r}=mo({accountId:n.accountId,collateralType:a}),[o,i]=A.useState([]),{setCollateralChange:l,setDebtChange:c}=A.useContext(Jo),{data:d}=Ot(),{data:u}=Fe(),{network:x}=(0,E.LN)(),p=(0,xn.p)({isClosable:!0,duration:9e3}),m=a?.displaySymbol,[y,w]=A.useState({step:0,status:"idle"}),{data:b}=ja(),j=A.useMemo((()=>{if(b&&a)return b.find((e=>e.address===a.tokenAddress))?.token?.address}),[a,b]),C="andromeda"===x?.preset?j:d?.address,S=r?.availableCollateral||s.GH,L=Wn(),{approve:v,requireApproval:D,isReady:I}=In({contractAddress:C,amount:r&&r.debt.abs().sub(S).gt(0)?r.debt.abs().sub(S).toBN():void 0,spender:u?.address}),{exec:k}=fi({repayAmount:r?.debt}),{exec:T}=wi({undelegateAmount:r?.collateralAmount.gt(0)?r?.collateralAmount:void 0}),{data:N}=mi(),{data:z}=zn(),{data:F}=La(),{approve:P,requireApproval:H,isLoading:O,isReady:$}=In({contractAddress:F?.address,amount:r?ce(r.debt.abs().toString(),6).mul(120).div(100):qt.O$.from(0),spender:N?.address}),{exec:R}=ji({undelegateAmount:r?.collateralAmount}),{exec:U}=hi({borrowAmount:r?.debt.lt(0)?r?.debt.abs():void 0}),W=A.useCallback((()=>{const e=[];return"andromeda"!==x?.preset?(r?.debt.gt(0)?(D&&e.push({title:`Approve ${d?.displaySymbol} transfer`,cb:()=>v(!1)}),e.push({title:"Repay",subtitle:(0,M.jsx)(Ct,{prefix:"Repay ",value:r?.debt.abs(),suffix:` ${d?.displaySymbol}`}),cb:()=>k()})):r?.debt.lt(0)&&e.push({title:"Claim",subtitle:(0,M.jsx)(Ct,{prefix:"Claim ",value:r?.debt.abs(),suffix:` ${d?.displaySymbol}`}),cb:()=>U()}),e.push({title:"Unlock collateral",subtitle:(0,M.jsx)(Ct,{value:r?.collateralAmount||s.GH,suffix:` ${m} will be unlocked from the pool.`}),cb:()=>T()})):(r?.debt.gt(-1e-5)&&H&&e.push({title:`Approve ${"andromeda"===x?.preset?a?.symbol:d?.symbol} transfer`,cb:()=>P(!1)}),e.push({title:"Unlock collateral",subtitle:(0,M.jsx)(Ct,{value:r?.collateralAmount||s.GH,suffix:` ${m} will be unlocked from the pool.`}),cb:()=>R()})),e}),[z,x?.preset,r?.debt,r?.collateralAmount,m,D,d?.displaySymbol,d?.symbol,v,k,U,T,H,a?.symbol,P,R]);A.useEffect((()=>{o.length||O||(w({step:0,status:"idle"}),i(W()))}),[W,O,o.length]);const q=y.step>=o.length,G=A.useCallback((async()=>{try{let e=y.step>-1?y.step:0;for(;e<o.length;e++)w({step:e,status:"pending"}),await o[e].cb();w({step:o.length,status:"success"}),l(s.GH),c(s.GH)}catch(e){w((e=>({step:e.step,status:"error"})));const t=L(e);throw t&&console.error(new Error(t.name),t),p.closeAll(),p({title:"Transaction failed",variant:"left-accent",description:t?(0,M.jsx)(mn,{contractError:t}):"Please try again.",status:"error",duration:36e5}),Error("Transaction failed",{cause:e})}}),[y.step,o,l,c,L,p]);return q?(0,M.jsx)(ni,{onClose:e,title:"Position successfully closed",subline:(0,M.jsxs)(M.Fragment,{children:["Your position has been successfully closed. To learn more, visit the"," ",(0,M.jsx)(g.r,{href:"https://docs.synthetix.io/",target:"_blank",color:"cyan.500",children:"Synthetix V3 Documentation"})]}),alertText:(0,M.jsx)(M.Fragment,{children:"Position successfully closed"})}):(0,M.jsxs)(B.k,{flexDirection:"column","data-cy":"close position multistep",children:[(0,M.jsxs)(h.x,{color:"gray.50",fontSize:"20px",fontWeight:700,children:[(0,M.jsx)(tr.R,{cursor:"pointer",onClick:t,mr:2}),"Close Position"]}),(0,M.jsx)(te.i,{mt:6,bg:"gray.900"}),O&&!o.length&&(0,M.jsx)(_e.O,{width:"100%",height:"78px",mt:"6"}),o.map(((e,t)=>(0,M.jsx)(Sn,{step:t+1,title:e.title,subtitle:e.subtitle,status:{failed:y.step===t&&"error"===y.status,success:y.step>t,loading:y.step===t&&"pending"===y.status}},t))),(0,M.jsx)(f.z,{"data-cy":"close position confirm button",isDisabled:!I||!$,isLoading:"pending"===y.status,onClick:G,mt:"6",children:(()=>{switch(!0){case"error"===y.status:return"Retry";case"pending"===y.status:return"Processing...";default:return"Execute Transaction"}})()})]})}function Si({onSubmit:e,onClose:t}){const[n]=K(),{data:a}=Ut(n.collateralSymbol),{data:r}=Ot(),{data:o,isPending:i}=mo({accountId:n.accountId,collateralType:a}),l=a?.displaySymbol,{network:c}=(0,E.LN)(),d="andromeda"===c?.preset?"USDC":r?.symbol,{data:u,isPending:x}=Gn(r?.address),p=ti(d),m=ti(l),{data:g}=zn();return(0,M.jsxs)(B.k,{"data-cy":"close position multistep",flexDirection:"column",children:[(0,M.jsxs)(h.x,{color:"gray.50",fontSize:"20px",fontWeight:700,children:[(0,M.jsx)(tr.R,{cursor:"pointer",onClick:t,mr:2}),"Close Position"]}),(0,M.jsx)(te.i,{my:5,bg:"gray.900"}),(0,M.jsx)(h.x,{color:"gray.50",fontSize:"sm",fontWeight:"700",mb:2,children:!i&&o?(0,M.jsx)(M.Fragment,{children:o.debt.gt(0)?"Repay Debt":"Claim Profit"}):(0,M.jsx)(M.Fragment,{children:" "})}),(0,M.jsx)(ta,{display:"flex",flexDirection:"column",p:3,mb:"6",children:(0,M.jsxs)(B.k,{alignItems:"center",children:[(0,M.jsxs)(B.k,{alignItems:"flex-start",flexDir:"column",gap:1,children:[(0,M.jsx)(ta,{display:"flex",justifyContent:"center",alignItems:"center",py:1.5,px:2.5,children:(0,M.jsxs)(h.x,{display:"flex",gap:2,alignItems:"center",fontWeight:"600",whiteSpace:"nowrap",children:[(0,M.jsx)(cn,{symbol:d,width:16,height:16}),"andromeda"===c?.preset?"USDC":r?.displaySymbol]})}),(0,M.jsxs)(h.x,{fontSize:"12px",whiteSpace:"nowrap","data-cy":"debt amount",children:[i?"~":null,!i&&o?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Ct,{prefix:o.debt.gt(0)?"Debt: ":"Max Claim: ",value:o.debt.abs()})," ",(0,M.jsx)(h.x,{as:"span",color:"gray.600",fontWeight:700,children:"Max"})]}):null]})]}),(0,M.jsxs)(B.k,{flexGrow:1,flexDir:"column",children:[(0,M.jsx)(ra,{value:!i&&o?o.debt.abs():s.GH,disabled:!0}),(0,M.jsx)(B.k,{fontSize:"xs",color:"whiteAlpha.700",alignSelf:"flex-end",gap:"1",children:p.gt(0)&&(0,M.jsx)(Ct,{prefix:"$",value:!i&&o?o.debt.abs().mul(p):s.GH})})]})]})}),(0,M.jsx)(h.x,{color:"gray.50",fontSize:"sm",fontWeight:"700",mb:2,children:"Unlock Collateral"}),(0,M.jsx)(ta,{display:"flex",flexDirection:"column",p:3,mb:"6",children:(0,M.jsxs)(B.k,{alignItems:"center",children:[(0,M.jsxs)(B.k,{alignItems:"flex-start",flexDir:"column",gap:1,children:[(0,M.jsx)(ta,{display:"flex",justifyContent:"center",alignItems:"center",py:1.5,px:2.5,children:(0,M.jsxs)(h.x,{display:"flex",gap:2,alignItems:"center",fontWeight:"600",whiteSpace:"nowrap",children:[(0,M.jsx)(cn,{symbol:l,width:16,height:16}),l]})}),(0,M.jsxs)(h.x,{fontSize:"12px",whiteSpace:"nowrap","data-cy":"locked collateral amount",children:[i?"Locked: ~":null,!i&&o?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Ct,{prefix:"Locked: ",value:o.collateralAmount})," ",(0,M.jsx)(h.x,{as:"span",color:"gray.600",fontWeight:700,children:"Max"})]}):null]})]}),(0,M.jsxs)(B.k,{flexGrow:1,flexDir:"column",children:[(0,M.jsx)(ra,{value:!i&&o?o.collateralAmount:s.GH,disabled:!0}),(0,M.jsx)(B.k,{fontSize:"xs",color:"whiteAlpha.700",alignSelf:"flex-end",gap:"1",children:m.gt(0)&&(0,M.jsx)(Ct,{prefix:"$",value:!i&&o?o.collateralAmount.abs().mul(m):s.GH})})]})]})}),(0,M.jsx)(wt.U,{in:g&&u&&o&&!u.add(o.availableSystemToken).gte(o.debt),animateOpacity:!0,unmountOnExit:!0,children:(0,M.jsxs)(re.b,{mb:6,status:"error",borderRadius:"6px",children:[(0,M.jsx)(oe.z,{}),(0,M.jsxs)(ie.X,{children:[(0,M.jsxs)(h.x,{children:["You do not have enough ",r?.displaySymbol," to repay debt"]}),(0,M.jsx)(h.x,{children:(0,M.jsx)(Ct,{prefix:"Available: ",value:u&&o&&u.add(o.availableSystemToken),suffix:` ${r?.displaySymbol}`})})]})]})}),(0,M.jsx)(f.z,{"data-cy":"close position submit",onClick:e,type:"submit",isDisabled:g&&!(!x&&u&&!i&&o&&u.add(o.availableSystemToken).gte(o.debt)),children:"Close Position"})]})}const Mi=({onClose:e})=>{const[t]=K(),[n,a]=A.useState(!1),{setCollateralChange:r,setDebtChange:o}=A.useContext(Jo),{data:i}=Ut(t.collateralSymbol),{data:l}=mo({accountId:t.accountId,collateralType:i});A.useEffect((()=>(l&&(o(l.debt.mul(-1)),r(l.collateralAmount.mul(-1))),()=>{o(s.GH),r(s.GH)})),[l,r,o]);const{data:c}=zn();return i?(0,M.jsxs)(M.Fragment,{children:[n?null:(0,M.jsx)(Si,{onClose:e,onSubmit:()=>a(!0)}),n&&!c?(0,M.jsx)(Ci,{onBack:()=>a(!1),onClose:e}):null,n&&c?(0,M.jsx)(ui,{onBack:()=>a(!1),onClose:e}):null]}):null};function Li({tokenBalance:e,...t}){const[,n]=K();return(0,M.jsxs)(re.b,{borderLeftColor:"cyan.500",borderRadius:"6px",...t,children:[(0,M.jsx)(oe.z,{color:"cyan.500"}),(0,M.jsxs)(h.x,{color:"white",fontFamily:"heading",fontSize:"16px",lineHeight:"24px",children:["You have a ",e.toString(2)," SNX active staking position on V2."," ",(0,M.jsx)(g.r,{color:"cyan.500",href:`?${X({migrate:"snx"})}`,onClick:e=>{e.preventDefault(),n({migrate:"snx"})},children:"Migrate to V3"})]})]})}const Ai=({isOpen:e})=>{const[t,n]=K();return(0,M.jsxs)(l.u_,{isOpen:e,onClose:()=>{},children:[(0,M.jsx)(c.Z,{}),(0,M.jsxs)(d.h,{p:6,borderWidth:"1px",borderColor:"gray.900",mt:"17.5%",bg:"navy.700",children:[(0,M.jsx)(u.x,{p:0,children:"Collateral Not Supported"}),(0,M.jsx)(te.i,{my:6}),(0,M.jsx)(h.x,{color:"white",fontFamily:"heading",fontSize:"14px",lineHeight:"20px",children:"This collateral is not supported on this network. Go back to home page to see your active positions on this network."}),(0,M.jsx)(f.z,{as:g.r,href:`?${X({accountId:t.accountId})}`,onClick:e=>{e.preventDefault(),n({accountId:t.accountId})},mt:6,textDecoration:"none",_hover:{textDecoration:"none"},children:"Back"})]})]})},vi=[{title:"Deposit and Lock",link:"deposit",icon:e=>(0,M.jsxs)("svg",{width:"37",height:"36",viewBox:"0 0 37 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,M.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.875 18C6.875 15.7218 8.72183 13.875 11 13.875H26C28.2782 13.875 30.125 15.7218 30.125 18V27C30.125 29.2782 28.2782 31.125 26 31.125H11C8.72183 31.125 6.875 29.2782 6.875 27V18ZM11 16.125C9.96447 16.125 9.125 16.9645 9.125 18V27C9.125 28.0355 9.96447 28.875 11 28.875H26C27.0355 28.875 27.875 28.0355 27.875 27V18C27.875 16.9645 27.0355 16.125 26 16.125H11Z",fill:"cyan"===e?"#00D1FF":"white"}),(0,M.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.375 12C11.375 8.06497 14.565 4.875 18.5 4.875C22.435 4.875 25.625 8.06497 25.625 12V16.125H11.375V12ZM18.5 7.125C15.8076 7.125 13.625 9.30761 13.625 12V13.875H23.375V12C23.375 9.30761 21.1924 7.125 18.5 7.125Z",fill:"cyan"===e?"#00D1FF":"white"})]})},{title:"Unlock",link:"undelegate",icon:e=>(0,M.jsxs)("svg",{width:"32",height:"28",viewBox:"0 0 32 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,M.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.375 14C0.375 11.7218 2.22183 9.875 4.5 9.875H19.5C21.7782 9.875 23.625 11.7218 23.625 14V23C23.625 25.2782 21.7782 27.125 19.5 27.125H4.5C2.22183 27.125 0.375 25.2782 0.375 23V14ZM4.5 12.125C3.46447 12.125 2.625 12.9645 2.625 14V23C2.625 24.0355 3.46447 24.875 4.5 24.875H19.5C20.5355 24.875 21.375 24.0355 21.375 23V14C21.375 12.9645 20.5355 12.125 19.5 12.125H4.5Z",fill:"cyan"===e?"#00D1FF":"white"}),(0,M.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.875 8C16.875 4.06497 20.065 0.875 24 0.875C27.935 0.875 31.125 4.06497 31.125 8V11H28.875V8C28.875 5.30761 26.6924 3.125 24 3.125C21.3076 3.125 19.125 5.30761 19.125 8V11H16.875V8Z",fill:"cyan"===e?"#00D1FF":"white"})]})},{title:"Withdraw",link:"withdraw",icon:e=>(0,M.jsxs)("svg",{width:"37",height:"36",viewBox:"0 0 37 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,M.jsx)("path",{d:"M6.60986 29.7349C6.60986 29.942 6.77776 30.1099 6.98486 30.1099L28.7349 30.1099C28.942 30.1099 29.1099 29.942 29.1099 29.7349L29.1099 21.1099L31.3599 21.1099L31.3599 29.7349C31.3599 31.1846 30.1846 32.3599 28.7349 32.3599L6.98486 32.3599C5.53512 32.3599 4.35986 31.1846 4.35986 29.7349L4.35986 21.1099L6.60986 21.1099L6.60986 22.2348L6.60986 29.7349Z",fill:"cyan"===e?"#00D1FF":"white"}),(0,M.jsx)("path",{d:"M18.9849 26.7349L16.7349 26.7349L16.7349 7.94653L12.3555 12.3259L10.8728 10.6273L17.8599 3.64019L24.8469 10.6273L23.3643 12.3259L18.9849 7.94653L18.9849 26.7349Z",fill:"cyan"===e?"#00D1FF":"white"})]})}];var Di=n(36371),Ii=n(73582),ki=n(2969),Ti=n(3181),Ni=n(13272);function Ei({txnStatus:e,txnHash:t}){const{debtChange:n,setCollateralChange:a,setDebtChange:r}=A.useContext(Jo),{data:o}=Ot(),[i,s]=A.useState(!1),{network:u}=(0,E.LN)();A.useEffect((()=>{"prompting"===e&&s(!0),"error"===e&&s(!1)}),[e]);const[p,m]=A.useState();return A.useEffect((()=>{n&&n.gt(0)&&m(n.abs())}),[n]),(0,M.jsxs)(l.u_,{isOpen:i,onClose:()=>{a((0,se.wei)(0)),r((0,se.wei)(0)),s(!1)},children:[(0,M.jsx)(c.Z,{bg:"#06061B80"}),(0,M.jsx)(d.h,{bg:"navy.700",mt:"10%",borderWidth:"1px",borderColor:"gray.900",minWidth:"384px",children:(0,M.jsxs)(x.f,{"data-cy":"borrow dialog",p:6,children:[(0,M.jsx)(h.x,{color:"gray.50",fontSize:"20px",fontWeight:700,children:"Borrowing Debt"}),(0,M.jsx)(te.i,{my:4}),(0,M.jsxs)(B.k,{position:"relative",alignItems:"center",gap:4,mb:6,rounded:"lg",mt:"6",p:"4",border:"2px solid",transitionProperty:"border-color",transitionDuration:"normal",borderColor:"success"===e?"green.500":"gray.900",children:[(0,M.jsx)(B.k,{justifyContent:"center",alignItems:"center",borderRadius:"100px",bg:"success"===e?"green.600":"gray.900",width:"40px",height:"40px",p:3,children:"success"===e?(0,M.jsx)(ht.n,{color:"white"}):(0,M.jsx)(vr.D,{size:"25px",isIndeterminate:!0,color:"gray.700"})}),(0,M.jsx)(B.k,{flexDirection:"column",alignItems:"space-between",justifyContent:"space-between",ml:2,"data-cy":"borrow info",children:p?(0,M.jsx)(h.x,{fontSize:"14px",fontWeight:700,lineHeight:"20px",color:"white",children:(0,M.jsx)(Ct,{prefix:"success"===e?"Borrowed ":"Borrowing ",value:p,suffix:` ${o?.displaySymbol}`})}):null})]}),(0,M.jsx)(Dr,{}),"success"===e?(0,M.jsx)(f.z,{mt:5,variant:"solid",justifyContent:"center",px:3,py:3,width:"100%",textAlign:"center",onClick:()=>s(!1),children:"Done"}):null,(0,M.jsx)(B.k,{justifyContent:"center",px:3,py:3,mt:6,mb:1,borderTop:"1px solid",borderTopColor:"gray.900","data-cy":"transaction hash",children:(0,M.jsx)(B.k,{as:g.r,isExternal:!0,variant:"outline",href:Ne({chainId:u?.id,txnHash:t}),fontFamily:"heading",color:t?"cyan.500":"gray.700",cursor:t?"pointer":"default",fontWeight:700,lineHeight:"20px",fontSize:"14px",target:"_blank",mt:3,alignItems:"center",gap:1,children:t?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(h.x,{children:"View Transaction"}),(0,M.jsx)(Yn.H,{transform:"rotate(45deg)"})]}):(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(h.x,{children:"Signing Transaction"})})})})]})})]})}function zi(){const[e]=K(),{debtChange:t,setDebtChange:n}=A.useContext(Jo),{data:a}=Ut(e.collateralSymbol),{data:r,isPending:o}=mo({accountId:e.accountId,collateralType:a}),{data:i}=Ot(),{network:l}=(0,E.LN)(),{isReady:c,txnState:d,mutation:u}=hi({borrowAmount:t.gt(0)?t.abs():void 0}),x=A.useMemo((()=>!r||r?.debt.gte(0)?s.GH:(0,se.wei)(r.debt.abs().toBN())),[r]),{maxDebt:p}=ii({issuanceRatioD18:a?.issuanceRatioD18,collateralAmount:r?.collateralAmount,collateralPrice:r?.collateralPrice,debt:r?.debt,collateralChange:s.GH,debtChange:t}),m="andromeda"===l?.preset?s.GH:p.mul(99).div(100),g=A.useMemo((()=>x.add(m)),[x,m]),y=(0,xn.p)({isClosable:!0,duration:9e3}),w=Wn(),b=A.useCallback((async e=>{e.preventDefault();try{y.closeAll(),y({title:"Borrowing...",variant:"left-accent"}),await u.mutateAsync(),n(s.GH),y.closeAll(),y({title:"Success",description:"Your debt has been increased.",status:"success",duration:5e3,variant:"left-accent"})}catch(e){const t=w(e);throw t&&console.error(new Error(t.name),t),y({title:"Could not complete borrowing",description:t?(0,M.jsx)(mn,{contractError:t}):"Please try again.",status:"error",variant:"left-accent",duration:36e5}),Error("Borrow failed",{cause:e})}}),[w,u,n,y]);return(0,M.jsxs)(B.k,{flexDirection:"column","data-cy":"borrow form",as:"form",onSubmit:b,children:[(0,M.jsx)(Ei,{txnStatus:d.txnStatus,txnHash:d.txnHash}),(0,M.jsx)(h.x,{color:"gray./50",fontSize:"sm",fontWeight:"700",mb:"3",children:"Borrow"}),(0,M.jsxs)(ta,{display:"flex",p:3,mb:"6",children:[(0,M.jsxs)(B.k,{alignItems:"flex-start",flexDir:"column",gap:"1",children:[(0,M.jsx)(ta,{display:"flex",py:1.5,px:2.5,children:(0,M.jsxs)(h.x,{display:"flex",gap:2,fontSize:"16px",alignItems:"center",fontWeight:"600",whiteSpace:"nowrap",children:[(0,M.jsx)(cn,{symbol:i?.symbol,width:16,height:16}),i?.displaySymbol]})}),(0,M.jsx)(B.k,{fontSize:"12px",gap:"1",children:(0,M.jsxs)(B.k,{gap:"1",mr:"3",alignItems:"center","data-cy":"max borrow amount",whiteSpace:"nowrap",children:[o?"~":null,!o&&r?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Ct,{prefix:"Debt: $",value:g})," ",(0,M.jsx)(h.x,{as:"span",cursor:"pointer",onClick:e=>{e.preventDefault(),n(g)},color:"cyan.500",fontWeight:700,children:"Max"})]}):null]})})]}),(0,M.jsxs)(B.k,{flexDirection:"column",flexGrow:1,children:[(0,M.jsx)(ra,{InputProps:{isRequired:!0,"data-cy":"borrow amount input",type:"number",min:0},value:t.abs(),onChange:e=>n(e),max:g,min:s.GH}),(0,M.jsxs)(h.x,{fontSize:"xs",color:"whiteAlpha.700",alignSelf:"flex-end",children:[o?"~":null,!o&&r&&r.collateralPrice.gt(0)?(0,M.jsx)(Ct,{prefix:"$",value:t.abs()}):null]})]})]}),(0,M.jsx)(f.z,{"data-cy":"borrow submit",type:"submit",isDisabled:!c||t.gt(g),children:t.eq(0)?"Enter Amount":"Borrow"})]})}function Fi(){const{network:e}=(0,E.LN)(),{debtChange:t,collateralChange:n,setDebtChange:a}=(0,A.useContext)(Jo),[r]=K(),{data:o}=Ut(r.collateralSymbol),{data:i,isPending:l}=mo({accountId:r.accountId,collateralType:o}),c=(0,A.useMemo)((()=>!i||i?.debt.gte(0)?s.GH:(0,se.wei)(i.debt.abs().toBN().mul(99).div(100))),[i]),{maxDebt:d}=ii({issuanceRatioD18:o?.issuanceRatioD18,collateralAmount:i?.collateralAmount,collateralPrice:i?.collateralPrice,debt:i?.debt,collateralChange:n,debtChange:t}),u="andromeda"===e?.preset?s.GH:d.mul(99).div(100),{data:x}=Ot(),m=(0,A.useMemo)((()=>c.add(u)),[c,u]),g="andromeda"===e?.preset?o?.symbol:x?.symbol,y=ti(g);return(0,M.jsxs)(B.k,{flexDirection:"column","data-cy":"claim form",children:[(0,M.jsx)(h.x,{color:"gray./50",fontSize:"sm",fontWeight:"700",mb:"3",children:"andromeda"===e?.preset?"Claim Profit":"Claim/Borrow"}),(0,M.jsxs)(ta,{display:"flex",p:3,mb:"6",children:[(0,M.jsxs)(B.k,{alignItems:"flex-start",flexDir:"column",gap:"1",children:[(0,M.jsx)(ta,{display:"flex",py:1.5,px:2.5,children:(0,M.jsxs)(h.x,{display:"flex",gap:2,fontSize:"16px",alignItems:"center",fontWeight:"600",whiteSpace:"nowrap",children:[(0,M.jsx)(cn,{symbol:g,width:16,height:16}),"andromeda"===e?.preset?o?.displaySymbol:x?.displaySymbol]})}),(0,M.jsxs)(B.k,{fontSize:"12px",gap:"1","data-cy":"credit amount",children:[l?"Credit: ~":null,!l&&c?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Ct,{prefix:"Credit: ",value:c})," ",(0,M.jsx)(h.x,{cursor:"pointer",onClick:()=>a(c),color:"cyan.500",fontWeight:700,children:"Max"})]}):null]})]}),(0,M.jsxs)(B.k,{flexDir:"column",flexGrow:1,children:[(0,M.jsx)(ra,{InputProps:{isRequired:!0,"data-cy":"claim amount input","data-max":c.toString(),type:"number",min:0},value:t,onChange:e=>a(e),max:m,min:s.GH}),(0,M.jsx)(B.k,{fontSize:"xs",color:"whiteAlpha.700",alignSelf:"flex-end",gap:"1",children:y.gt(0)&&(0,M.jsx)(Ct,{prefix:"$",value:t.abs().mul(y)})})]})]}),(0,M.jsx)(wt.U,{in:t.lte(0)&&c.gt(0),animateOpacity:!0,unmountOnExit:!0,children:(0,M.jsxs)(re.b,{colorScheme:"green",mb:"6",borderRadius:"6px",children:[(0,M.jsx)(oe.z,{}),(0,M.jsxs)(h.x,{children:["Positive market performance has credited your position. Claim up to"," ",(0,M.jsx)(p.xu,{onClick:()=>{c&&a(c)},cursor:"pointer",as:"span",textDecoration:"underline",children:(0,M.jsx)(Ct,{value:c,prefix:"$"})})," without accruing debt."]})]})}),(0,M.jsx)(wt.U,{in:t.gt(0),animateOpacity:!0,unmountOnExit:!0,children:(0,M.jsxs)(re.b,{status:"warning",mb:"6",borderRadius:"6px",children:[(0,M.jsx)(oe.z,{}),(0,M.jsx)(h.x,{children:"Assets will be available to withdraw 24 hours after your last interaction with this position."})]})}),(0,M.jsx)(wt.U,{in:t.lte(0)&&"andromeda"!==e?.preset&&u.gt(0),animateOpacity:!0,unmountOnExit:!0,children:(0,M.jsxs)(re.b,{colorScheme:"blue",mb:"6",borderRadius:"6px",children:[(0,M.jsx)(oe.z,{}),(0,M.jsxs)(h.x,{children:["You can take an interest-free loan up to  ",(0,M.jsx)(p.xu,{onClick:()=>{u&&a(u.add(c))},cursor:"pointer",as:"span",textDecoration:"underline",children:(0,M.jsx)(Ct,{value:u,prefix:"$"})})]})]})}),(0,M.jsx)(wt.U,{in:!t.gt(m)&&t.gt(0)&&t.gt(c)&&"andromeda"!==e?.preset,animateOpacity:!0,unmountOnExit:!0,children:(0,M.jsxs)(re.b,{colorScheme:"info",mb:"6",borderRadius:"6px",children:[(0,M.jsx)(oe.z,{}),(0,M.jsxs)(h.x,{children:["You are about to take a ",(0,M.jsx)(Ct,{value:t.sub(c),prefix:"$"})," ","interest-free loan"]})]})}),(0,M.jsx)(f.z,{isDisabled:t.lte(0)||t.gt(m),"data-cy":"claim submit",type:"submit",children:t.lte(0)?"Enter Amount":t.gt(c)&&"andromeda"!==e?.preset?"Borrow":"Claim Profit"})]})}var Pi=n(9073);function Hi({onClose:e}){const{data:t}=Ot();return(0,M.jsxs)(B.k,{"data-cy":"claim success",flexDir:"column",gap:"6",borderColor:"gray.900",rounded:"base",height:"fit-content",children:[(0,M.jsxs)(J.X,{color:"gray.50",fontSize:"20px",fontWeight:700,children:["What can you do with your ",t?.displaySymbol,"?"]}),(0,M.jsx)(te.i,{}),(0,M.jsxs)(B.k,{flexWrap:"wrap",px:1,alignItems:"center",gap:4,children:[(0,M.jsx)(pt.E,{src:Pi,width:42}),(0,M.jsxs)(B.k,{flexDir:"column",children:[(0,M.jsx)(h.x,{color:"white",fontSize:"16px",fontWeight:800,children:"Trade L1 Perp"}),(0,M.jsx)(h.x,{color:"white",fontSize:"14px",fontWeight:300,children:"Trade with synthetix integrators"})]}),(0,M.jsx)(h.x,{ml:"auto",color:"white",fontSize:"12px",fontWeight:800,children:"Coming soon"})]}),(0,M.jsxs)(B.k,{flexWrap:"wrap",px:1,alignItems:"center",gap:4,mt:4,mb:2,children:[(0,M.jsx)(pt.E,{width:"42px",src:"/curve.png",alt:"Curve"}),(0,M.jsxs)(B.k,{flexDir:"column",children:[(0,M.jsx)(h.x,{color:"white",fontSize:"16px",fontWeight:800,children:"sUSD/USDC Pool"}),(0,M.jsx)(h.x,{color:"white",fontSize:"14px",fontWeight:300,children:"Curve"})]}),(0,M.jsxs)(f.z,{as:g.r,ml:"auto",size:"sm",href:"https://curve.fi/#/ethereum/pools/factory-stable-ng-258/deposit",target:"_blank",textDecoration:"none",_hover:{textDecoration:"none"},display:"flex",alignItems:"center",fontWeight:700,gap:"2",children:["Deposit on Curve"," ",(0,M.jsx)(Yn.H,{style:{transform:"rotate(45deg)"}})]})]}),(0,M.jsx)(f.z,{onClick:e,variant:"outline",colorScheme:"gray",w:"100%",children:"Later"})]})}function Oi({onClose:e}){const[t]=K(),{debtChange:n,setDebtChange:a}=(0,A.useContext)(Jo),{network:r}=(0,E.LN)(),[o,i]=(0,A.useState)(!1),{data:l}=Ut(t.collateralSymbol),{data:c}=mo({accountId:t.accountId,collateralType:l}),{data:d}=Ot(),u=(0,A.useMemo)((()=>!c||c?.debt.gte(0)?s.GH:(0,se.wei)(c.debt.abs().toBN().sub(1))),[c]),x=(0,A.useMemo)((()=>n.gt(u)&&"andromeda"!==r?.preset),[n,r?.preset,u]),{exec:p,txnState:m,settle:y}=hi({borrowAmount:n.gt(0)?n.abs():void 0}),w=(0,xn.p)({isClosable:!0,duration:9e3}),b=Wn(),j=(0,A.useCallback)((async()=>{try{await p(),a(s.GH)}catch(e){const t=b(e);throw t&&console.error(new Error(t.name),t),w.closeAll(),w({title:x?"Borrow":"Claim failed",description:t?(0,M.jsx)(mn,{contractError:t}):"Please try again.",status:"error",variant:"left-accent",duration:36e5}),Error(x?"Borrow":"Claim failed",{cause:e})}}),[p,a,b,w,x]),C="andromeda"===r?.preset?l?.displaySymbol:d?.displaySymbol;return"success"===m.txnStatus?o?(0,M.jsx)(Hi,{onClose:()=>{y(),e()}}):(0,M.jsx)(ni,{onClose:()=>{1===r?.id&&"main"===r?.preset?i(!0):(y(),e())},title:"Debt successfully updated",subline:(0,M.jsxs)(M.Fragment,{children:["Your ",(0,M.jsx)("b",{children:"debt"})," has been updated. To learn more, visit the"," ",(0,M.jsx)(g.r,{href:"https://docs.synthetix.io/",target:"_blank",color:"cyan.500",children:"Synthetix V3 Documentation"})]}),alertText:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("b",{children:"Debt"})," successfully updated"]})}):(0,M.jsxs)("div",{"data-cy":"claim multistep",children:[(0,M.jsxs)(h.x,{color:"gray.50",fontSize:"20px",fontWeight:700,children:[(0,M.jsx)(tr.R,{cursor:"pointer",onClick:()=>{y(),e()},mr:2}),"Manage Debt"]}),(0,M.jsx)(te.i,{my:4}),(0,M.jsx)(Sn,{step:1,title:"andromeda"===r?.preset?"Claim":"Borrow",subtitle:(0,M.jsxs)(h.x,{as:"div",children:["andromeda"===r?.preset?"Claim":"Borrow",(0,M.jsx)(Ct,{prefix:" ",value:n,suffix:` ${C}`})]}),status:{failed:"error"===m.txnStatus,loading:["prompting","pending"].includes(m.txnStatus)}}),(0,M.jsx)(f.z,{isDisabled:["pending","prompting"].includes(m.txnStatus),onClick:()=>{["unsent","error"].includes(m.txnStatus)&&j()},width:"100%",mt:"6","data-cy":"claim confirm button",children:(()=>{switch(m.txnStatus){case"error":return"Retry";case"pending":case"prompting":return"Processing...";default:return"Execute Transaction"}})()})]})}const $i=Rr.transform((e=>(0,se.wei)(e)));function Ri(){const{activeWallet:e}=(0,E.Os)(),t=(0,E.yL)(),{network:n}=(0,E.LN)();return(0,I.useQuery)({queryKey:[`${n?.id}-${n?.preset}`,"EthBalance",{accountAddress:e?.address}],enabled:Boolean(t&&e),queryFn:async()=>{if(!t||!e)throw"OMFG";return $i.parse(await t.getBalance(e.address))}})}function Ui(){const[e]=K(),{collateralChange:t,setCollateralChange:n}=A.useContext(Jo),{network:a}=(0,E.LN)(),{data:r}=Ut(e.collateralSymbol),{data:o,isPending:i}=mo({accountId:e.accountId,collateralType:r}),{data:l}=$r(),c=Ca({tokenAddress:r?.tokenAddress}),{data:d}=Gn(r?.tokenAddress),{data:u}=Ri(),x=ti(r?.symbol),{data:p}=La(),{data:m,isPending:g}=Gn(p?.address),y=A.useMemo((()=>"SNX"===r?.symbol?s.GH.add(l?l.transferable:s.GH).add(o?o.availableCollateral:s.GH):"WETH"===r?.symbol?s.GH.add(u??s.GH).add(d??s.GH).add(o?o.availableCollateral:s.GH):"andromeda"===a?.preset?s.GH.add(m||s.GH):s.GH.add(d??s.GH).add(o?o.availableCollateral:s.GH)),[r?.symbol,o,l,d,u,m,a?.preset]),w=t.gt(y);return(0,M.jsxs)(B.k,{flexDirection:"column","data-cy":"deposit and lock collateral form",children:[(0,M.jsx)(h.x,{color:"gray./50",fontSize:"sm",fontWeight:"700",mb:"3",children:"Deposit and Lock Collateral"}),(0,M.jsxs)(ta,{display:"flex",p:3,mb:"6",children:[(0,M.jsxs)(B.k,{alignItems:"flex-start",flexDir:"column",gap:"1",children:[(0,M.jsx)(ta,{display:"flex",py:1.5,px:2.5,children:(0,M.jsxs)(h.x,{display:"flex",gap:2,alignItems:"center",fontWeight:"600",children:[(0,M.jsx)(cn,{symbol:r?.symbol??e.collateralSymbol,width:16,height:16}),r?.displaySymbol??e.collateralSymbol]})}),(0,M.jsx)(ke.u,{label:(0,M.jsxs)(B.k,{flexDirection:"column",alignItems:"flex-start",fontSize:"xs",color:"whiteAlpha.700",children:["andromeda"===a?.preset?(0,M.jsx)(M.Fragment,{children:g?"Wallet Balance: ~":(0,M.jsx)(Ct,{prefix:"Wallet Balance: ",value:m})}):null,"andromeda"!==a?.preset?(0,M.jsxs)(M.Fragment,{children:[i?"Unlocked Balance: ~":(0,M.jsx)(Ct,{prefix:"Unlocked Balance: ",value:o?.availableCollateral}),(0,M.jsx)(Ct,{prefix:"Wallet Balance: ",value:"SNX"===r?.symbol?l?.transferable:d}),"WETH"===r?.symbol?(0,M.jsx)(Ct,{prefix:"ETH Balance: ",value:u}):null]}):null]}),children:(0,M.jsxs)(h.x,{fontSize:"12px","data-cy":"balance amount",children:[e.accountId&&i?"Balance: ~":null,(!e.accountId||e.accountId&&!i)&&y?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Ct,{prefix:"Balance: ",value:y})," ",(0,M.jsx)(h.x,{as:"span",cursor:"pointer",onClick:()=>n(y),color:"cyan.500",fontWeight:700,children:"Max"})]}):null]})})]}),(0,M.jsxs)(B.k,{flexDir:"column",flexGrow:1,children:[(0,M.jsx)(ra,{InputProps:{"data-cy":"deposit amount input","data-max":y?.toString(),min:0},value:t,onChange:e=>{n(e)},max:y,min:s.GH}),(0,M.jsx)(B.k,{fontSize:"xs",color:"whiteAlpha.700",alignSelf:"flex-end",gap:"1",children:(0,M.jsx)(Ct,{prefix:"$",value:t.abs().mul(x)})})]})]}),"SNX"===r?.symbol&&l&&l.collateral&&l.collateral.gt(0)?(0,M.jsx)(Li,{mb:"6",tokenBalance:l.collateral}):null,(0,M.jsx)(wt.U,{in:t.gt(0)&&!w,animateOpacity:!0,unmountOnExit:!0,children:(0,M.jsx)(Ir,{})}),(0,M.jsx)(wt.U,{in:c,animateOpacity:!0,unmountOnExit:!0,children:(0,M.jsxs)(re.b,{mb:6,status:"info",borderRadius:"6px",children:[(0,M.jsx)(oe.z,{}),(0,M.jsx)(ie.X,{children:"Deposit USDC and it will automatically wrap into Static aUSDC"})]})}),!r||!o&&e.accountId?null:(0,M.jsx)(wt.U,{in:t.gt(0)&&t.add(o?o.collateralAmount:s.GH).lt(r.minDelegationD18),animateOpacity:!0,unmountOnExit:!0,children:(0,M.jsxs)(re.b,{mb:6,status:"error",borderRadius:"6px",children:[(0,M.jsx)(oe.z,{}),(0,M.jsxs)(ie.X,{children:["Your deposit must be"," ",ua(parseFloat(r.minDelegationD18.toString()))," ",r.symbol," or higher"]})]})}),(0,M.jsx)(wt.U,{in:w,animateOpacity:!0,unmountOnExit:!0,children:(0,M.jsxs)(re.b,{mb:6,status:"error",borderRadius:"6px",children:[(0,M.jsx)(oe.z,{}),(0,M.jsx)(ie.X,{children:"You cannot Deposit and Lock more Collateral than your Balance amount"})]})}),r&&o?(0,M.jsx)(wt.U,{in:t.abs().gt(0)&&!w&&t.add(o.collateralAmount).gte(r.minDelegationD18),animateOpacity:!0,unmountOnExit:!0,children:(0,M.jsx)(an,{mb:6,items:[...o?[{label:`Locked ${r?.displaySymbol??e.collateralSymbol}`,value:(0,M.jsx)(Kn,{value:o.collateralAmount,newValue:o.collateralAmount.add(t),formatFn:e=>xe(e??s.GH),hasChanges:t.abs().gt(0),size:"sm"})}]:[],...o&&"andromeda"!==a?.preset?[{label:"C-ratio",value:(0,M.jsx)(Ft,{currentCollateral:o.collateralAmount,currentDebt:o.debt,collateralChange:t,collateralPrice:o.collateralPrice,debtChange:s.GH,size:"sm"})}]:[]]})}):null,(0,M.jsx)(f.z,{"data-cy":"deposit submit",type:"submit",isDisabled:!(t.gt(0)&&!w&&r&&t.add(o?.collateralAmount??s.GH).gt(r.minDelegationD18)),children:t.lte(0)?"Enter Amount":"Deposit and Lock Collateral"})]})}var Wi=n(9875),Bi=n(97386);const qi="SET_REQUIRE_APPROVAL",Gi="SET_WRAP_AMOUNT",Vi="SET_INFINITE_APPROVAL",Zi="RETRY",Qi="RUN",Yi="RESET",_i="idle",Xi="wrap",Ki="approveCollateral",Ji="deposit",es="failed",ts="success",ns={[Ki]:Ki,[Xi]:Xi,[Ji]:Ji},as="wrapEth",rs="approveCollateral",os="executeDeposit",is={wrapAmount:(0,se.wei)(0),error:null,requireApproval:!1,infiniteApproval:!1},ss=(0,Wi.C)({id:"DepositMachine",initial:_i,predictableActionArguments:!0,context:is,on:{[Qi]:{target:Ji,actions:(0,Bi.f0)({wrapAmount:e=>is.wrapAmount,error:e=>is.error,requireApproval:e=>is.requireApproval,infiniteApproval:e=>is.infiniteApproval})},[qi]:{actions:(0,Bi.f0)({requireApproval:(e,t)=>t.requireApproval})},[Gi]:{actions:(0,Bi.f0)({wrapAmount:(e,t)=>t.wrapAmount})},[Vi]:{actions:(0,Bi.f0)({infiniteApproval:(e,t)=>t.infiniteApproval})}},states:{[_i]:{on:{[Qi]:[{target:Xi,cond:e=>e.wrapAmount.gt(0)},{target:Ki,cond:e=>e.requireApproval},{target:Ji}]}},[Xi]:{invoke:{src:as,onError:{target:es,actions:(0,Bi.f0)({error:(e,t)=>({error:t.data,step:ns.wrap})})},onDone:[{target:Ki,cond:e=>e.requireApproval},{target:Ji}]}},[Ki]:{invoke:{src:rs,onDone:{target:Ji},onError:{target:es,actions:(0,Bi.f0)({error:(e,t)=>({error:t.data,step:ns.approveCollateral})})}}},[Ji]:{invoke:{src:os,onDone:{target:ts},onError:{target:es,actions:(0,Bi.f0)({error:(e,t)=>({error:t.data,step:ns.deposit})})}}},[es]:{on:{[Zi]:[{target:Ki,cond:e=>e.error?.step===ns.approveCollateral,actions:(0,Bi.f0)({error:e=>null})},{target:Xi,cond:e=>e.error?.step===ns.wrap,actions:(0,Bi.f0)({error:e=>null})},{target:Ji,cond:e=>e.error?.step===ns.deposit,actions:(0,Bi.f0)({error:e=>null})}]}},[ts]:{}}}),ls=ge()("snx:useDeposit"),cs=ge()("snx:useWrapEth");var ds=n(97737);function us({onClose:e}){const[t,n]=K(),{collateralChange:a,setCollateralChange:r}=A.useContext(Jo),{data:o}=Fe(),{data:i}=Ut(t.collateralSymbol),{data:l}=mo({accountId:t.accountId,collateralType:i}),c=l?.collateralAmount??s.GH,d=l?.availableCollateral??s.GH,[u,x]=A.useState({currentCollateral:s.GH,collateralChange:s.GH,currentDebt:s.GH}),p=A.useMemo((()=>{const e=a.sub(d);return e.lt(0)?s.GH:e}),[d,a]),m=A.useMemo((()=>{const e=p;return e.gt(0)?e:s.GH}),[p]),{exec:y,wethBalance:w}=(()=>{const e=(0,E.mx)(),t=(0,E.yL)(),{data:n}=Ut("WETH"),{data:a,refetch:r}=Ri(),{data:o,refetch:i}=Gn(n?.tokenAddress),{mutateAsync:s,isPending:l}=(0,I.useMutation)({mutationFn:async a=>{if(!n||!e||!t)return;const r=new fe.CH(n?.tokenAddress,["function deposit() payable"],e),o=await r.deposit({value:a.toBN()});cs("txn",o);const i=await t.waitForTransaction(o.hash);return cs("receipt",i),i}});return{exec:(0,A.useCallback)((async e=>{if(a){if(a.lt(e))throw new Error("Amount exceeds balance");await s(e),r(),i()}}),[a,s,r,i]),isLoading:l,wethBalance:o,ethBalance:a}})(),b="WETH"===(i?.displaySymbol??t.collateralSymbol)&&m.gt(w||0)?m.sub(w||0):s.GH,{approve:j,requireApproval:C,isReady:S}=In({contractAddress:i?.tokenAddress,amount:a.lte(d)?(0,se.wei)(0).toBN():a.sub(d).toBN(),spender:o?.address}),L=A.useMemo((()=>`${Math.floor(1e12*Math.random())}`),[]),{exec:v,isReady:D}=(({accountId:e,newAccountId:t,collateralTypeAddress:n,collateralChange:a,currentCollateral:r,availableCollateral:o})=>{const[i,l]=(0,A.useReducer)(Ln,Mn),{data:c}=Fe(),{data:d}=Ua(),{network:u}=(0,E.LN)(),x=(0,E.mx)(),h=(0,E.yL)(),p=(0,I.useQueryClient)(),m=u&&h&&x&&c&&n&&o&&a.gt(0)&&!0,g=(0,I.useMutation)({mutationFn:async()=>{if(!m)throw new Error("Not ready");l({type:"prompting"});const i=await x.getAddress(),p=e??t,g=new fe.CH(c.address,c.abi,x),f=e?void 0:g.populateTransaction["createAccount(uint128)"](qt.O$.from(p));ls("collateralChange",a),ls("availableCollateral",o);const y=a.sub(o);ls("amountNeeded",y);const w=y.gt(0)?g.populateTransaction.deposit(qt.O$.from(p),n,y.toBN()):void 0;ls("currentCollateral",r),ls("collateralChange",a),ls("newDelegation",r.add(a));const b=g.populateTransaction.delegateCollateral(qt.O$.from(p),qt.O$.from(s.sc),n,r.add(a).toBN(),(0,se.wei)(1).toBN()),j=Promise.all([f,w,b].filter(Ba)),[C]=await Promise.all([j]);d&&C.unshift(d);const{multicallTxn:S,gasLimit:M}=await Qa(h,u,C,"useDeposit",i),L=await x.sendTransaction({...S,gasLimit:M.mul(15).div(10)});ls("txn",L),l({type:"pending",payload:{txnHash:L.hash}});const A=await h.waitForTransaction(L.hash);return ls("receipt",A),A},onSuccess:async()=>{const e=`${u?.id}-${u?.preset}`;await Promise.all(["Accounts","PriceUpdates","LiquidityPosition","LiquidityPositions","TokenBalance","SynthBalances","EthBalance","Allowance","TransferableSynthetix"].map((t=>p.invalidateQueries({queryKey:[e,t]})))),l({type:"success"})},onError:e=>{throw l({type:"error",payload:{error:e}}),e}});return{mutation:g,txnState:i,settle:()=>l({type:"settled"}),isLoading:g.isPending,exec:g.mutateAsync,isReady:m}})({accountId:t.accountId,newAccountId:L,collateralTypeAddress:i?.tokenAddress,collateralChange:a,currentCollateral:c,availableCollateral:d}),k=(0,xn.p)({isClosable:!0,duration:9e3}),T=Wn(),[N,z]=(0,ds.e)(ss,{services:{[as]:async()=>{try{await y(N.context.wrapAmount)}catch(e){const t=T(e);throw t&&console.error(new Error(t.name),t),k.closeAll(),k({title:"Wrapping ETH failed",description:t?(0,M.jsx)(mn,{contractError:t}):e.message||"Please try again.",status:"error",variant:"left-accent",duration:36e5}),Error("Wrapping failed",{cause:e})}},[rs]:async()=>{try{if(!C)return;k({title:"Approve collateral for transfer",description:`Approve ${i?.displaySymbol} transfer`,status:"info",variant:"left-accent"}),await j(Boolean(N.context.infiniteApproval))}catch(e){const t=T(e);throw t&&console.error(new Error(t.name),t),k.closeAll(),k({title:"Approval failed",description:t?(0,M.jsx)(mn,{contractError:t}):"Please try again.",status:"error",variant:"left-accent",duration:36e5}),Error("Approve failed",{cause:e})}},[os]:async()=>{try{k.closeAll(),k({title:Boolean(t.accountId)?"Locking your collateral":"Creating your account and locking your collateral",description:"",variant:"left-accent"}),x({currentCollateral:c,currentDebt:l?.debt||s.GH,collateralChange:a}),await v(),r(s.GH),k.closeAll(),k({title:"Success",description:"Your locked collateral amount has been updated.",status:"success",duration:5e3,variant:"left-accent"})}catch(e){const t=T(e);throw t&&console.error(new Error(t.name),t),k.closeAll(),k({title:"Could not complete locking collateral",description:t?(0,M.jsx)(mn,{contractError:t}):"Please try again.",status:"error",variant:"left-accent",duration:36e5}),Error("Lock collateral failed",{cause:e})}}}}),F=b.toString(),P=N.matches(ts)||N.matches(Ji);A.useEffect((()=>{P||z(Gi,{wrapAmount:(0,se.wei)(F||"0")})}),[P,F]),A.useEffect((()=>{z(qi,{requireApproval:C})}),[C,z]);const H=A.useCallback((()=>{if(N.matches(ts)&&t.accountId&&i?.symbol)return z(Yi),e(),void n({page:"position",collateralSymbol:i.symbol,manageAction:"deposit",accountId:t.accountId});z(Yi),e()}),[N,t.accountId,i?.symbol,z,e,n]),O=A.useCallback((async()=>{N.matches(ts)?H():N.context.error?z(Zi):z(Qi)}),[H,z,N]),$=A.useMemo((()=>[...[{label:`Locked ${i?.displaySymbol??t.collateralSymbol}`,value:(0,M.jsx)(Kn,{value:u.currentCollateral,newValue:u.currentCollateral.add(u.collateralChange),formatFn:e=>xe(e??s.GH),hasChanges:u.collateralChange.abs().gt(0),size:"sm"})}],{label:"C-ratio",value:(0,M.jsx)(Ft,{currentCollateral:u.currentCollateral,currentDebt:u.currentDebt,collateralChange:u.collateralChange,collateralPrice:l?.collateralPrice??s.GH,debtChange:s.GH,size:"sm"})}]),[i?.displaySymbol,t.collateralSymbol,u.currentCollateral,u.collateralChange,u.currentDebt,l?.collateralPrice]),R=i?.displaySymbol,U=N.matches(Ki)||N.matches(Ji)||N.matches(Xi),W="WETH"===(i?.displaySymbol??t.collateralSymbol),B={wrap:W?1:0,approve:W?2:1,deposit:W?3:2};return N.matches(ts)?(0,M.jsx)(ni,{onClose:O,title:"Collateral successfully updated",subline:(0,M.jsxs)(M.Fragment,{children:["Your ",(0,M.jsx)("b",{children:"collateral"})," has been updated. To learn more, visit the"," ",(0,M.jsx)(g.r,{href:"https://docs.synthetix.io/",target:"_blank",color:"cyan.500",children:"Synthetix V3 Documentation"})]}),alertText:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("b",{children:"Collateral"})," successfully updated"]}),summary:(0,M.jsx)(an,{items:$})}):(0,M.jsxs)("div",{"data-cy":"deposit multistep",children:[(0,M.jsxs)(h.x,{color:"gray.50",fontSize:"20px",fontWeight:700,children:[(0,M.jsx)(tr.R,{cursor:"pointer",onClick:e,mr:2}),"Manage Collateral"]}),(0,M.jsx)(te.i,{my:4}),W?(0,M.jsx)(Sn,{step:B.wrap,title:"Wrap",subtitle:N.context.wrapAmount.eq(0)?(0,M.jsxs)(h.x,{as:"div",children:[(0,M.jsx)(Ct,{value:a,suffix:` ${i?.displaySymbol??t.collateralSymbol}`})," ","from balance will be used."]}):(0,M.jsxs)(h.x,{as:"div",children:["You must wrap additional ",(0,M.jsx)(Ct,{value:N.context.wrapAmount,suffix:" ETH"})," ","before depositing."]}),status:{failed:N.context.error?.step===Xi,disabled:"WETH"!==(i?.displaySymbol??t.collateralSymbol),success:N.context.wrapAmount.eq(0)||N.matches(ts),loading:N.matches(Xi)&&!N.context.error}}):null,(0,M.jsx)(Sn,{step:B.approve,title:`Approve ${R} transfer`,status:{failed:N.context.error?.step===Ki,success:!N.context.requireApproval||N.matches(ts),loading:N.matches(Ki)&&!N.context.error},checkboxLabel:N.context.requireApproval?`Approve unlimited ${R} transfers to Synthetix`:void 0,checkboxProps:{isChecked:N.context.infiniteApproval,onChange:e=>z(Vi,{infiniteApproval:e.target.checked})}}),(0,M.jsx)(Sn,{step:B.deposit,title:`Deposit and Lock ${R}`,subtitle:(0,M.jsx)(M.Fragment,{children:N.matches(ts)?(0,M.jsx)(Ct,{value:a,suffix:` ${i?.displaySymbol??t.collateralSymbol} deposited and locked.`}):(0,M.jsx)(M.Fragment,{children:d&&d.gt(s.GH)?(0,M.jsx)(M.Fragment,{children:d.gte(a)?(0,M.jsx)(Ct,{prefix:"This will deposit and lock ",value:a,suffix:` ${i?.displaySymbol??t.collateralSymbol}.`}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(h.x,{children:(0,M.jsx)(Ct,{prefix:"This will deposit and lock ",value:d,suffix:` ${i?.displaySymbol??t.collateralSymbol}.`})}),(0,M.jsx)(h.x,{children:(0,M.jsx)(Ct,{prefix:"An additional ",value:a.sub(d),suffix:` ${i?.displaySymbol??t.collateralSymbol} will be deposited and locked from your wallet.`})})]})}):(0,M.jsx)(Ct,{prefix:"This will deposit and lock ",value:a,suffix:` ${i?.displaySymbol??t.collateralSymbol}.`})})}),status:{failed:N.context.error?.step===Ji,disabled:N.matches(ts)&&N.context.requireApproval,success:N.matches(ts),loading:N.matches(Ji)&&!N.context.error}}),(0,M.jsx)(f.z,{isDisabled:U||!D||!S,onClick:O,width:"100%",mt:"6","data-cy":"deposit confirm button",children:(()=>{switch(!0){case Boolean(N.context.error):return"Retry";case U:return"Processing...";case N.matches(ts):return"Continue";default:return"Execute Transaction"}})()})]})}function xs({collateralType:e,customNetwork:t}){const{network:n}=(0,E.LN)(),a=t||n,{data:r}=ja(t);return(0,I.useQuery)({queryKey:[`${a?.id}-${a?.preset}`,"PositionManager",{collateralType:e?.address},{synthTokens:Boolean(r)}],enabled:Boolean(a&&r&&e),queryFn:async function(){if(!(a&&r&&e))throw"OMFG";const t=e.address.toLowerCase();for(const e of r)if(t===e.address.toLowerCase()){if("andromeda"===a.preset&&"sUSDC"===e.symbol)return $n(a.id,a.preset);if("andromeda"===a.preset&&"sStataUSDC"===e.symbol)return Hn(a.id,a.preset)}return Nn(a.id,a.preset)},staleTime:1/0,throwOnError:!1})}const hs=ge()("snx:DepositModalAndromeda");function ps({onClose:e}){const[t]=K(),{data:n}=Ut(t.collateralSymbol),{collateralChange:a,setCollateralChange:r}=A.useContext(Jo),o=(0,xn.p)({isClosable:!0,duration:9e3}),i=(0,I.useQueryClient)(),l=Wn(),{data:c}=La(),{data:d}=pe(),{data:u}=xs({collateralType:n}),{data:x}=Ua(),{network:p}=(0,E.LN)(),m=(0,E.mx)(),g=(0,E.yL)(),{approve:y,requireApproval:w,txnState:b,isReady:j}=In({contractAddress:c?.address,amount:a.toBN().mul(s.D6).div(s.VP),spender:u?.address}),C=p&&g&&m&&d&&u&&c?.address&&n?.tokenAddress&&a.gt(0)&&j&&!0,[S,L]=A.useReducer(Ln,Mn),[v,D]=A.useState(a),{mutate:k}=(0,I.useMutation)({mutationFn:async function(){if(hs("params",t),hs("collateralType",n),!C)throw new Error("Not ready");w&&await y(!1),L({type:"prompting"});const e=await m.getAddress(),r=[];if(t.accountId){const e=new fe.CH(d.address,d.abi,m).populateTransaction.approve(u.address,t.accountId);r.push(e)}const o=new fe.CH(u.address,u.abi,m);if(t.accountId){const e=o.populateTransaction.increasePosition(t.accountId,a.toBN().mul(s.D6).div(s.VP));r.push(e)}else{const e=o.populateTransaction.setupPosition(a.toBN().mul(s.D6).div(s.VP));r.push(e)}const i=await Promise.all(r);x&&i.unshift(x);const{multicallTxn:l,gasLimit:c}=await Qa(g,p,i,"useDepositAndromeda",e),h=await m.sendTransaction({...l,gasLimit:c.mul(15).div(10)});hs("txn",h),L({type:"pending",payload:{txnHash:h.hash}});const f=await g.waitForTransaction(h.hash);return hs("receipt",f),f},onSuccess:async()=>{const e=`${p?.id}-${p?.preset}`;await Promise.all(["Accounts","PriceUpdates","LiquidityPosition","LiquidityPositions","TokenBalance","SynthBalances","EthBalance","Allowance"].map((t=>i.invalidateQueries({queryKey:[e,t]})))),o.closeAll(),o({title:"Success",description:"Your locked collateral amount has been updated.",status:"success",duration:5e3,variant:"left-accent"}),r(s.GH),L({type:"success"})},onError:e=>{L({type:"error",payload:{error:e}});const t=l(e);throw t&&console.error(new Error(t.name),t),o.closeAll(),o({title:"Transaction failed",variant:"left-accent",description:t?(0,M.jsx)(mn,{contractError:t}):"Please try again.",status:"error",duration:36e5}),Error("Transaction failed",{cause:e})}});return(0,M.jsxs)(B.k,{flexDirection:"column","data-cy":"deposit multistep",children:[(0,M.jsxs)(h.x,{color:"gray.50",fontSize:"20px",fontWeight:700,children:[(0,M.jsx)(tr.R,{cursor:"pointer",onClick:()=>{L({type:"settled"}),D(a),e()},mr:2}),t.accountId?(0,M.jsx)(M.Fragment,{children:"Manage Collateral"}):(0,M.jsx)(M.Fragment,{children:"Open Liquidity Position"})]}),(0,M.jsx)(te.i,{my:4}),(0,M.jsx)(Sn,{step:1,title:"Approve USDC",subtitle:(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(Ct,{prefix:"Approve spending of ",value:v,suffix:" USDC."})}),status:{failed:"error"===b.txnStatus,success:"success"===b.txnStatus,loading:"prompting"===b.txnStatus||"pending"===b.txnStatus}}),(0,M.jsx)(Sn,{step:2,title:"Deposit and Lock USDC",subtitle:(0,M.jsxs)(M.Fragment,{children:[t.accountId?null:(0,M.jsx)(h.x,{children:"Create new account"}),t.accountId?(0,M.jsx)(h.x,{children:"Approve update position on behalf"}):null,(0,M.jsx)(Ct,{prefix:"Deposit and lock ",value:v,suffix:" USDC."})]}),status:{failed:"error"===S.txnStatus,success:"success"===S.txnStatus,loading:"prompting"===S.txnStatus||"pending"===S.txnStatus}}),"success"===S.txnStatus?(0,M.jsx)(f.z,{onClick:()=>{L({type:"settled"}),D(a),e()},mt:"6",children:"Done"}):(0,M.jsx)(f.z,{"data-cy":"deposit confirm button",isLoading:"prompting"===b.txnStatus||"pending"===b.txnStatus||"prompting"===S.txnStatus||"pending"===S.txnStatus,isDisabled:!C,onClick:()=>k(),mt:"6",children:"unsent"===b.txnStatus&&"unsent"===S.txnStatus?"Execute Transaction":"error"===b.txnStatus||"error"===S.txnStatus?"Retry":"prompting"===b.txnStatus||"pending"===b.txnStatus||"prompting"===S.txnStatus||"pending"===S.txnStatus?"Processing...":"Execute Transaction"})]})}function ms({txnStatus:e,txnHash:t}){const{debtChange:n,setCollateralChange:a,setDebtChange:r}=A.useContext(Jo),{data:o}=Ot(),[i,s]=A.useState(!1),{network:u}=(0,E.LN)();A.useEffect((()=>{"prompting"===e&&s(!0),"error"===e&&s(!1)}),[e]);const[p,m]=A.useState();return A.useEffect((()=>{n&&n.lt(0)&&m(n.abs())}),[n]),(0,M.jsxs)(l.u_,{isOpen:i,onClose:()=>{a((0,se.wei)(0)),r((0,se.wei)(0)),s(!1)},children:[(0,M.jsx)(c.Z,{bg:"#06061B80"}),(0,M.jsx)(d.h,{bg:"navy.700",mt:"10%",borderWidth:"1px",borderColor:"gray.900",minWidth:"384px",children:(0,M.jsxs)(x.f,{"data-cy":"repay dialog",p:6,children:[(0,M.jsx)(h.x,{color:"gray.50",fontSize:"20px",fontWeight:700,children:"Repaying Debt"}),(0,M.jsx)(te.i,{my:4}),(0,M.jsxs)(B.k,{position:"relative",alignItems:"center",gap:4,mb:6,rounded:"lg",mt:"6",p:"4",border:"2px solid",transitionProperty:"border-color",transitionDuration:"normal",borderColor:"success"===e?"green.500":"gray.900",children:[(0,M.jsx)(B.k,{justifyContent:"center",alignItems:"center",borderRadius:"100px",bg:"success"===e?"green.600":"gray.900",width:"40px",height:"40px",p:3,children:"success"===e?(0,M.jsx)(ht.n,{color:"white"}):(0,M.jsx)(vr.D,{size:"25px",isIndeterminate:!0,color:"gray.700"})}),(0,M.jsx)(B.k,{flexDirection:"column",alignItems:"space-between",justifyContent:"space-between",ml:2,"data-cy":"claim rewards info",children:p?(0,M.jsx)(h.x,{fontSize:"14px",fontWeight:700,lineHeight:"20px",color:"white",children:(0,M.jsx)(Ct,{prefix:"success"===e?"Repaid ":"Repaying ",value:p,suffix:` ${o?.displaySymbol}`})}):(0,M.jsx)(h.x,{fontSize:"12px",lineHeight:"16px",color:"gray.500",children:"Claim your rewards"})})]}),(0,M.jsx)(Dr,{}),"success"===e?(0,M.jsx)(f.z,{mt:5,variant:"solid",justifyContent:"center",px:3,py:3,width:"100%",textAlign:"center",onClick:()=>s(!1),children:"Done"}):null,(0,M.jsx)(B.k,{justifyContent:"center",px:3,py:3,mt:6,mb:1,borderTop:"1px solid",borderTopColor:"gray.900","data-cy":"transaction hash",children:(0,M.jsx)(B.k,{as:g.r,isExternal:!0,variant:"outline",href:Ne({chainId:u?.id,txnHash:t}),fontFamily:"heading",color:t?"cyan.500":"gray.700",cursor:t?"pointer":"default",fontWeight:700,lineHeight:"20px",fontSize:"14px",target:"_blank",mt:3,alignItems:"center",gap:1,children:t?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(h.x,{children:"View Transaction"}),(0,M.jsx)(Yn.H,{transform:"rotate(45deg)"})]}):(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(h.x,{children:"Signing Transaction"})})})})]})})]})}function gs(){const[e]=K(),{debtChange:t,setDebtChange:n}=A.useContext(Jo),{data:a}=Ut(e.collateralSymbol),{data:r,isPending:o}=mo({accountId:e.accountId,collateralType:a}),{data:i}=Ot(),{data:l,isPending:c}=Gn(i?.address),d=l&&r?l.add(r.availableSystemToken):void 0,{isReady:u,txnState:x,mutation:p}=fi({repayAmount:t&&t.lt(0)?t.abs():void 0}),m=(0,xn.p)({isClosable:!0,duration:9e3}),g=Wn(),y=A.useCallback((async e=>{e.preventDefault();try{m.closeAll(),m({title:"Repaying...",variant:"left-accent"}),await p.mutateAsync(),n(s.GH),m.closeAll(),m({title:"Success",description:"Your debt has been repaid.",status:"success",duration:5e3,variant:"left-accent"})}catch(e){const t=g(e);throw t&&console.error(new Error(t.name),t),m({title:"Could not complete repaying",description:t?(0,M.jsx)(mn,{contractError:t}):"Please try again.",status:"error",variant:"left-accent",duration:36e5}),Error("Repay failed",{cause:e})}}),[g,p,n,m]);return(0,M.jsxs)(B.k,{flexDirection:"column","data-cy":"repay debt form",as:"form",onSubmit:y,children:[(0,M.jsx)(ms,{txnStatus:x.txnStatus,txnHash:x.txnHash}),(0,M.jsx)(h.x,{color:"gray./50",fontSize:"sm",fontWeight:"700",mb:"3",children:"Repay Debt"}),(0,M.jsxs)(ta,{display:"flex",p:3,mb:"6",children:[(0,M.jsxs)(B.k,{alignItems:"flex-start",flexDir:"column",gap:"1",children:[(0,M.jsx)(ta,{display:"flex",py:1.5,px:2.5,children:(0,M.jsxs)(h.x,{display:"flex",gap:2,fontSize:"16px",alignItems:"center",fontWeight:"600",whiteSpace:"nowrap",children:[(0,M.jsx)(cn,{symbol:i?.symbol,width:16,height:16}),i?.displaySymbol]})}),(0,M.jsx)(B.k,{fontSize:"12px",gap:"1",children:(0,M.jsxs)(B.k,{gap:"1",mr:"3",alignItems:"center","data-cy":"current debt amount",whiteSpace:"nowrap",children:[o||c?"~":null,!o&&!c&&r&&d?(0,M.jsxs)(M.Fragment,{children:[r.debt.abs().gt(d)?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Ct,{prefix:"Available: $",value:d})," ",(0,M.jsx)(h.x,{as:"span",cursor:"pointer",onClick:e=>{e.preventDefault(),n(d.mul(-1))},color:"cyan.500",fontWeight:700,children:"Max"})]}):null,d.gt(r.debt.abs())?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Ct,{prefix:"Debt: $",value:r.debt.abs()})," ",(0,M.jsx)(h.x,{as:"span",cursor:"pointer",onClick:e=>{e.preventDefault(),n(r.debt.neg())},color:"cyan.500",fontWeight:700,children:"Max"})]}):null]}):null]})})]}),(0,M.jsxs)(B.k,{flexDirection:"column",flexGrow:1,children:[(0,M.jsx)(ra,{InputProps:{isRequired:!0,"data-cy":"repay amount input",type:"number",min:0},value:t.abs(),onChange:e=>n(e.mul(-1)),max:r?r.debt:(0,se.wei)(0),min:s.GH}),(0,M.jsxs)(h.x,{fontSize:"xs",color:"whiteAlpha.700",alignSelf:"flex-end",children:[o?"~":null,!o&&r&&r.collateralPrice.gt(0)?(0,M.jsx)(Ct,{prefix:"$",value:t.abs()}):null]})]})]}),(0,M.jsx)(f.z,{"data-cy":"repay submit",type:"submit",isDisabled:!u,children:t.eq(0)?"Enter Amount":"Repay"})]})}const fs=ge()("snx:useClearDebt");function ys(){const[e]=K(),{data:t}=Ut(e.collateralSymbol),{data:n}=mo({accountId:e.accountId,collateralType:t}),{data:a}=La(),{data:r}=Gn(a?.address),{exec:o,settle:i,isLoading:l}=(({accountId:e,collateralTypeAddress:t})=>{const[n,a]=A.useReducer(Ln,Mn),{data:r}=Fe(),{data:o}=Lr(),{data:i}=pe(),{data:l}=Ua(),c=(0,E.mx)(),{network:d}=(0,E.LN)(),u=(0,E.yL)(),{data:x}=mi(),h=(0,I.useQueryClient)(),p=(0,I.useMutation)({mutationFn:async()=>{if(!c||!d||!u)throw new Error("No signer or network");if(!(r&&e&&t&&o&&x&&i))return;a({type:"prompting"});const n=new fe.CH(i.address,i.abi,c),h=new fe.CH(x.address,x.abi,c),p=n.populateTransaction.approve(x.address,e),m=h.populateTransaction.depositDebtToRepay(r.address,o.address,i.address,e,s.sc,t,fa),g=Promise.all([p,m]),[f]=await Promise.all([g]);l&&f.unshift(l);const y=await c.getAddress(),{multicallTxn:w,gasLimit:b}=await Qa(u,d,f,"useRepay",y),j=await c.sendTransaction({...w,gasLimit:b.mul(15).div(10)});fs("txn",j),a({type:"pending",payload:{txnHash:j.hash}});const C=await u.waitForTransaction(j.hash);return fs("receipt",C),a({type:"success"}),C},onSuccess:async()=>{const e=`${d?.id}-${d?.preset}`;await Promise.all(["PriceUpdates","LiquidityPosition","LiquidityPositions","TokenBalance","SynthBalances","EthBalance","Allowance","TransferableSynthetix"].map((t=>h.invalidateQueries({queryKey:[e,t]})))),a({type:"success"})},onError:e=>{throw a({type:"error",payload:{error:e}}),e}});return{mutation:p,txnState:n,settle:()=>a({type:"settled"}),isLoading:p.isPending,exec:p.mutateAsync}})({accountId:e.accountId,collateralTypeAddress:t?.address}),{data:c}=mi(),{approve:d,requireApproval:u,isLoading:x,isReady:p}=In({contractAddress:a?.address,amount:n?ce(n.debt.toString(),6).mul(150).div(100):void 0,spender:c?.address}),m=A.useCallback((async()=>{try{u&&await d(!1),await o(),i()}catch(e){}}),[d,o,u,i]),g=n&&r&&n.availableSystemToken.add(r).gte(n.debt);return(0,M.jsxs)(B.k,{"data-cy":"repay debt form",flexDirection:"column",children:[(0,M.jsx)(h.x,{fontSize:"md",fontWeight:"700",mb:"0.5",children:"Repay USDC"}),n?(0,M.jsxs)(M.Fragment,{children:[n.debt.lte(0)?(0,M.jsxs)(re.b,{"data-cy":"repay debt success",my:2,status:"success",rounded:"base",borderRadius:"6px",children:[(0,M.jsx)(B.k,{bg:"green.500",p:"1",rounded:"full",mr:"2",children:(0,M.jsx)(ht.n,{w:"12px",h:"12px",color:"green.900"})}),(0,M.jsx)(h.x,{color:"white",fontSize:"16px",fontWeight:400,children:"Your account currently has no debt."})]}):null,n.debt.gt(0)?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(h.x,{fontSize:"sm",color:"gray.400",mb:"4",children:"Your account currently has a positive debt. This amount must be paid to initiate collateral withdrawal."}),(0,M.jsx)(f.z,{isDisabled:!g||!p,isLoading:l||x,onClick:m,"data-cy":"repay debt submit",children:(0,M.jsx)(Ct,{prefix:"Repay USDC $",value:n.debt,suffix:g?"":" (Insufficient Balance)"})})]}):null]}):null]})}const ws=ge()("snx:useRepayBaseAndromeda"),bs=({accountId:e,collateralTypeAddress:t,debtChange:n,availableUSDCollateral:a,collateralSymbol:r})=>{const[o,i]=(0,A.useReducer)(Ln,Mn),{data:l}=Fe(),{data:c}=Ot(),{data:d}=Lr(),{data:u}=Ua(),{data:x}=function(e){const{network:t}=(0,E.LN)(),n=e??t,a=(0,E.eK)(n),{data:r}=Rt(!1,e),{data:o}=Lr(e),{data:i}=Ot(e);return(0,I.useQuery)({queryKey:[`${n?.id}-${n?.preset}`,"GetUSDTokens"],enabled:Boolean(o&&a&&n&&r?.length&&i),queryFn:async()=>{if(!(o&&a&&n&&r?.length&&i))throw"OMFG";const e=new fe.CH(o.address,o.abi,a),t="andromeda"===n?.preset?(await e.getWrapper(fa))?.wrapCollateralType:void 0;return{snxUSD:i.address,sUSD:r?.find((e=>"andromeda"===n?.preset?"usdc"===e.symbol.toLowerCase():"susdc"===e.symbol.toLowerCase()))?.tokenAddress,USDC:t}}})}(),h=(0,E.mx)(),{network:p}=(0,E.LN)(),m=(0,E.yL)(),g=(0,I.useQueryClient)(),f=(0,I.useMutation)({mutationFn:async()=>{if(!h||!p||!m)throw new Error("No signer or network");if(!(l&&e&&t&&c&&d&&x?.sUSD))return;if(!a)return;if(n.eq(0))return;const o=n.abs(),g=o.sub(a),f=g.gt(0)?ce(g.toString(),6):qt.O$.from(0);i({type:"prompting"});const y=function(e){switch(e?.toLowerCase()){case"usdc":case"susdc":default:return fa;case"statausdc":case"sstatausdc":case"stataUSDC":return ya}}(r),w=new fe.CH(d.address,d.abi,h),b=f.gt(0)?w.populateTransaction.wrap(y,f,0):void 0,j=new fe.CH(t,Dn,h),C=g.gt(0)?j.populateTransaction.approve(d.address,g.toBN()):void 0,S=g.gt(0)?w.populateTransaction.sell(y,g.toBN(),0,Xe.d):void 0,M=new fe.CH(c.address,Dn,h),L=g.gt(0)?M.populateTransaction.approve(l.address,g.toBN()):void 0,A=new fe.CH(l.address,l.abi,h),v=g.lte(0)?void 0:A.populateTransaction.deposit(qt.O$.from(e),c.address,g.toBN()),D=A.populateTransaction.burnUsd(qt.O$.from(e),qt.O$.from(s.sc),t,o.toBN()),I=Promise.all([b,C,S,L,v,D].filter(Ba)),[k]=await Promise.all([I]);u&&k.unshift(u);const T=await h.getAddress(),{multicallTxn:N,gasLimit:E}=await Qa(m,p,k,"useRepay",T),z=await h.sendTransaction({...N,gasLimit:E.mul(15).div(10)});ws("txn",z),i({type:"pending",payload:{txnHash:z.hash}});const F=await m.waitForTransaction(z.hash);return ws("receipt",F),F},onSuccess:async()=>{const e=`${p?.id}-${p?.preset}`;await Promise.all(["PriceUpdates","LiquidityPosition","LiquidityPositions","TokenBalance","SynthBalances","EthBalance","Allowance"].map((t=>g.invalidateQueries({queryKey:[e,t]})))),i({type:"success"})},onError:e=>{throw i({type:"error",payload:{error:e}}),e}});return{mutation:f,txnState:o,settle:()=>i({type:"settled"}),isLoading:f.isPending,exec:f.mutateAsync}},js="SET_REQUIRE_APPROVAL",Cs="SET_INFINITE_APPROVAL",Ss="RETRY",Ms="RUN",Ls="RESET",As="idle",vs="approve",Ds="repay",Is="failed",ks="success",Ts={[vs]:vs,[Ds]:Ds},Ns="approveSUSD",Es="executeRepay",zs={error:null,requireApproval:!1,infiniteApproval:!1},Fs=(0,Wi.C)({id:"RepayMachine",initial:As,predictableActionArguments:!0,context:zs,on:{[Ms]:{target:Ds,actions:(0,Bi.f0)({error:e=>zs.error,requireApproval:e=>zs.requireApproval,infiniteApproval:e=>zs.infiniteApproval})},[js]:{actions:(0,Bi.f0)({requireApproval:(e,t)=>t.requireApproval})},[Cs]:{actions:(0,Bi.f0)({infiniteApproval:(e,t)=>t.infiniteApproval})}},states:{[As]:{on:{[Ms]:[{target:vs,cond:e=>e.requireApproval},{target:Ds}]}},[vs]:{invoke:{src:Ns,onDone:{target:Ds},onError:{target:Is,actions:(0,Bi.f0)({error:(e,t)=>({error:t.data,step:Ts.approve})})}}},[Ds]:{invoke:{src:Es,onDone:{target:ks},onError:{target:Is,actions:(0,Bi.f0)({error:(e,t)=>({error:t.data,step:Ts.repay})})}}},[Is]:{on:{[Ss]:[{target:vs,cond:e=>e.error?.step===Ts.approve,actions:(0,Bi.f0)({error:e=>null})},{target:Ds,cond:e=>e.error?.step===Ts.repay,actions:(0,Bi.f0)({error:e=>null})}]}},[ks]:{}}});function Ps({onClose:e}){const{debtChange:t,setDebtChange:n}=A.useContext(Jo),[a]=K(),{network:r}=(0,E.LN)(),{data:o}=Ut(a.collateralSymbol),{data:i}=mo({accountId:a.accountId,collateralType:o}),{data:l}=Ot(),{exec:c,settle:d}=fi({repayAmount:t&&t.lt(0)?t.abs():void 0}),{exec:u,settle:x}=bs({accountId:a.accountId,collateralTypeAddress:o?.tokenAddress,debtChange:t,availableUSDCollateral:i?i.availableSystemToken:void 0}),p=(0,xn.p)({isClosable:!0,duration:9e3}),{data:m}=Fe(),{data:y}=Lr(),w=Wn(),b=t.abs().sub(i?i.availableSystemToken:0),{data:j}=ja(),C=A.useMemo((()=>{if(j&&o)return j.find((e=>e.address===o.tokenAddress))?.token?.address}),[o,j]),S="andromeda"===r?.preset?C:l?.address,{approve:L,requireApproval:v,isReady:D}=In({contractAddress:S,amount:"andromeda"===r?.preset?b.toBN().mul(s.D6).div(s.VP):b.toBN(),spender:"andromeda"===r?.preset?y?.address:m?.address}),[I,k]=(0,ds.e)(Fs,{services:{[Ns]:async()=>{try{p({title:`Approve ${l?.displaySymbol} for transfer`,description:"The next transaction will repay your debt.",status:"info",variant:"left-accent"}),await L(Boolean(I.context.infiniteApproval))}catch(e){const t=w(e);throw t&&console.error(new Error(t.name),t),p.closeAll(),p({title:"Approval failed",description:t?(0,M.jsx)(mn,{contractError:t}):"Please try again.",status:"error",variant:"left-accent",duration:36e5}),Error("Approve failed",{cause:e})}},[Es]:async()=>{try{p.closeAll(),p({title:"Repaying...",variant:"left-accent"}),"andromeda"===r?.preset?await u():await c(),n(s.GH),p.closeAll(),p({title:"Success",description:"Your debt has been repaid.",status:"success",duration:5e3,variant:"left-accent"})}catch(e){const t=w(e);throw t&&console.error(new Error(t.name),t),p({title:"Could not complete repaying",description:t?(0,M.jsx)(mn,{contractError:t}):"Please try again.",status:"error",variant:"left-accent",duration:36e5}),Error("Repay failed",{cause:e})}}}}),T=b.gt(0);A.useEffect((()=>{k(js,{requireApproval:v&&T})}),[T,v,k]);const N=A.useCallback((async()=>{if(I.matches(ks))return k(Ls),void e();I.context.error?k(Ss):k(Ms)}),[e,k,I]),z="andromeda"===r?.preset?"USDC":l?.displaySymbol;return I.matches(ks)?(0,M.jsx)(ni,{onClose:N,title:"Debt successfully updated",subline:(0,M.jsxs)(M.Fragment,{children:["Your ",(0,M.jsx)("b",{children:"debt"})," has been updated. To learn more, visit the"," ",(0,M.jsx)(g.r,{href:"https://docs.synthetix.io/",target:"_blank",color:"cyan.500",children:"Synthetix V3 Documentation"})]}),alertText:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("b",{children:"Debt"})," successfully updated"]})}):(0,M.jsxs)("div",{"data-cy":"repay multistep",children:[(0,M.jsxs)(h.x,{color:"gray.50",fontSize:"20px",fontWeight:700,children:[(0,M.jsx)(tr.R,{cursor:"pointer",onClick:()=>{d(),x(),e()},mr:2}),"Manage Debt"]}),(0,M.jsx)(te.i,{my:4}),(0,M.jsx)(Sn,{step:1,title:`Approve ${z} transfer`,status:{failed:I.context.error?.step===vs,success:!I.context.requireApproval||I.matches(ks),loading:I.matches(vs)&&!I.context.error},checkboxLabel:I.context.requireApproval?`Approve unlimited ${z} transfers to Synthetix.`:void 0,checkboxProps:{isChecked:I.context.infiniteApproval,onChange:e=>k(Cs,{infiniteApproval:e.target.checked})}}),(0,M.jsx)(Sn,{step:2,title:"Repay",subtitle:(0,M.jsxs)(h.x,{children:["Repay ",(0,M.jsx)(Ct,{value:t.abs(),suffix:` ${z}`})]}),status:{failed:I.context.error?.step===Ds,success:I.matches(ks),loading:I.matches(Ds)&&!I.context.error}}),(0,M.jsx)(f.z,{isDisabled:I.matches(vs)||I.matches(Ds)||!D,onClick:N,width:"100%",mt:"6","data-cy":"repay confirm button",children:(()=>{switch(!0){case Boolean(I.context.error):return"Retry";case I.matches(vs)||I.matches(Ds):return"Processing...";case I.matches(ks):return"Continue";default:return"Execute Transaction"}})()})]})}var Hs=n(80877);const Os=G.z.object({id:Ur,weight:Wr,maxDebtShareValue:Wr,isLocked:G.z.boolean()}),$s=G.z.object({id:G.z.number(),markets:Os.array(),isAnyMarketLocked:G.z.boolean()});function Rs({txnStatus:e,approvalTxnStatus:t,txnHash:n}){const[a]=K(),{collateralChange:r,setCollateralChange:o,setDebtChange:i}=A.useContext(Jo),{data:s}=Ut(a.collateralSymbol),[u,p]=A.useState(!1),{network:m}=(0,E.LN)();A.useEffect((()=>{"prompting"!==e&&"prompting"!==t||p(!0),"error"!==e&&"error"!==t||p(!1)}),[t,e]);const[y,w]=A.useState();return A.useEffect((()=>{r&&r.lt(0)&&w(r.abs())}),[r]),(0,M.jsxs)(l.u_,{isOpen:u,onClose:()=>{o((0,se.wei)(0)),i((0,se.wei)(0)),p(!1)},children:[(0,M.jsx)(c.Z,{bg:"#06061B80"}),(0,M.jsx)(d.h,{bg:"navy.700",mt:"10%",borderWidth:"1px",borderColor:"gray.900",minWidth:"384px",children:(0,M.jsxs)(x.f,{"data-cy":"undelegate dialog",p:6,children:[(0,M.jsx)(h.x,{color:"gray.50",fontSize:"20px",fontWeight:700,children:"Unlocking Collateral"}),(0,M.jsx)(te.i,{my:4}),(0,M.jsxs)(B.k,{position:"relative",alignItems:"center",gap:4,mb:6,rounded:"lg",mt:"6",p:"4",border:"2px solid",transitionProperty:"border-color",transitionDuration:"normal",borderColor:"success"===e?"green.500":"gray.900",children:[(0,M.jsx)(B.k,{justifyContent:"center",alignItems:"center",borderRadius:"100px",bg:"success"===e?"green.600":"gray.900",width:"40px",height:"40px",p:3,children:"success"===e?(0,M.jsx)(ht.n,{color:"white"}):(0,M.jsx)(vr.D,{size:"25px",isIndeterminate:!0,color:"gray.700"})}),(0,M.jsx)(B.k,{flexDirection:"column",alignItems:"space-between",justifyContent:"space-between",ml:2,"data-cy":"undelegate collateral info",children:y?(0,M.jsx)(h.x,{fontSize:"14px",fontWeight:700,lineHeight:"20px",color:"white",children:(0,M.jsx)(Ct,{prefix:"success"===e?"Unlocked ":"Unlocking ",value:y,suffix:` ${s?.displaySymbol}`})}):null})]}),"success"===e?(0,M.jsx)(f.z,{mt:5,variant:"solid",justifyContent:"center",px:3,py:3,width:"100%",textAlign:"center",onClick:()=>p(!1),children:"Done"}):null,(0,M.jsx)(B.k,{justifyContent:"center",px:3,py:3,mt:6,mb:1,borderTop:"1px solid",borderTopColor:"gray.900","data-cy":"transaction hash",children:(0,M.jsx)(B.k,{as:g.r,isExternal:!0,variant:"outline",href:Ne({chainId:m?.id,txnHash:n}),fontFamily:"heading",color:n?"cyan.500":"gray.700",cursor:n?"pointer":"default",fontWeight:700,lineHeight:"20px",fontSize:"14px",target:"_blank",mt:3,alignItems:"center",gap:1,children:n?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(h.x,{children:"View Transaction"}),(0,M.jsx)(Yn.H,{transform:"rotate(45deg)"})]}):(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(h.x,{children:"Signing Transaction"})})})})]})})]})}function Us(){const[e,t]=K(),{collateralChange:n,debtChange:a,setCollateralChange:r}=A.useContext(Jo),{data:o}=Ut(e.collateralSymbol),i=(()=>{const{network:e}=(0,E.LN)(),{data:t}=Fe(),n=(0,E.yL)();return(0,I.useQuery)({enabled:Boolean(t&&e&&n),queryKey:[`${e?.id}-${e?.preset}`,"PoolConfiguration",{contractsHash:Be([t])}],queryFn:async()=>{if(!(t&&e&&n))throw"OMFG";const a=new fe.CH(t.address,t.abi,n),r=(await a.getPoolConfiguration(qt.O$.from(s.sc))).map((({marketId:e,maxDebtShareValueD18:t,weightD18:n})=>({id:e,weight:t,maxDebtShareValue:n}))),o=await Promise.all(r.map((e=>a.populateTransaction.isMarketCapacityLocked(e.id)))),i=await Ya(e,n,o,(e=>e.map((({returnData:e})=>{const[t]=a.interface.decodeFunctionResult("isMarketCapacityLocked",e);return t}))),"isMarketCapacityLocked");return $s.parse({id:parseInt(s.sc),markets:r.map(((e,t)=>({...e,isLocked:i[t]}))),isAnyMarketLocked:i.some(Boolean)})}})})(),{network:l}=(0,E.LN)(),{data:c}=La(),{data:d}=mi(),{data:u,isPending:x}=mo({accountId:e.accountId,collateralType:o}),p=u?.collateralPrice,{newDebt:m}=ii({issuanceRatioD18:o?.issuanceRatioD18,collateralAmount:u?.collateralAmount,collateralPrice:p,debt:u?.debt,collateralChange:n,debtChange:a}),y=A.useMemo((()=>"andromeda"!==l?.preset?qt.O$.from(0):u?u.debt.lte(0)?qt.O$.from(0):u.debt.toBN().mul(s.D6).div(s.VP).mul(110).div(100):void 0),[u,l?.preset]),{approve:w,requireApproval:b,txnState:j,isReady:C}=In({contractAddress:c?.address,amount:y,spender:d?.address}),{isReady:S,txnState:L,mutation:v}=wi({undelegateAmount:n&&n.lt(0)?n.abs():void 0}),{isReady:D,txnState:k,mutation:T}=ji({undelegateAmount:n&&n.lt(0)?n.abs():void 0}),N="andromeda"===l?.preset&&C&&D||"andromeda"!==l?.preset&&S,z="andromeda"===l?.preset?k:L,F=u?.availableCollateral,P=(()=>{if(!u||!o)return;const{collateralAmount:e,collateralValue:t}=u;if("andromeda"===l?.preset)return e;if(m.lte(0))return e;const n=m.mul(o.liquidationRatioD18);if(t.lt(n))return(0,se.wei)(0);const a=t.sub(n).mul(.98);return le().min(e,a)})(),H=i.isLoading||!P,O=i.data?.isAnyMarketLocked,{minutes:$,hours:R,isRunning:U}=dr(e.accountId),W=u?.collateralAmount?.add(n)||(0,se.wei)(0),q=W.gte(o?.minDelegationD18||(0,se.wei)(0))||W.eq(0),G=O,V=!!P&&n.abs().gt(P),Z=!N||H||O||n.gte(0)||!q||V,Q=(0,xn.p)({isClosable:!0,duration:9e3}),Y=Wn(),_=A.useCallback((async e=>{e.preventDefault();try{Q.closeAll(),Q({title:"Undelegating...",variant:"left-accent"}),"andromeda"===l?.preset?(b&&await w(!1),await T.mutateAsync()):await v.mutateAsync(),r(s.GH),Q.closeAll(),Q({title:"Success",description:"Your collateral has been updated.",status:"success",duration:5e3,variant:"left-accent"})}catch(e){const t=Y(e);throw t&&console.error(new Error(t.name),t),Q({title:"Could not complete repaying",description:t?(0,M.jsx)(mn,{contractError:t}):"Please try again.",status:"error",variant:"left-accent",duration:36e5}),Error("Undelegate failed",{cause:e})}}),[w,Y,l?.preset,b,r,Q,v,T]);return(0,M.jsxs)(B.k,{flexDirection:"column","data-cy":"undelegate collateral form",children:[(0,M.jsx)(Rs,{txnStatus:z.txnStatus,txnHash:z.txnHash,approvalTxnStatus:j.txnStatus}),(0,M.jsx)(h.x,{color:"gray./50",fontSize:"sm",fontWeight:"700",mb:"3",children:"Unlock Collateral"}),(0,M.jsxs)(ta,{display:"flex",p:3,mb:"6",children:[(0,M.jsxs)(B.k,{alignItems:"flex-start",flexDir:"column",gap:"1",children:[(0,M.jsx)(ta,{display:"flex",py:1.5,px:2.5,children:(0,M.jsxs)(h.x,{display:"flex",gap:2,alignItems:"center",fontWeight:"600",children:[(0,M.jsx)(cn,{symbol:o?.symbol??e.collateralSymbol,width:16,height:16}),o?.displaySymbol??e.collateralSymbol]})}),(0,M.jsxs)(h.x,{fontSize:"12px",whiteSpace:"nowrap","data-cy":"locked amount",children:[x?"Locked: ~":null,!x&&P?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Ct,{prefix:"Locked: ",value:P})," ",(0,M.jsx)(h.x,{as:"span",cursor:"pointer",onClick:()=>r(P.mul(-1)),color:"cyan.500",fontWeight:700,children:"Max"})]}):null]})]}),(0,M.jsxs)(B.k,{flexDir:"column",flexGrow:1,children:[(0,M.jsx)(ra,{InputProps:{isDisabled:G,isRequired:!0,"data-cy":"undelegate amount input",type:"number",min:0},value:n.abs(),onChange:e=>r(e.mul(-1)),max:P,min:s.GH}),(0,M.jsxs)(B.k,{fontSize:"xs",color:"whiteAlpha.700",alignSelf:"flex-end",gap:"1",children:[x?"~":null,!x&&u&&u.collateralPrice.gt(0)?(0,M.jsx)(Ct,{prefix:"$",value:n.abs().mul(u.collateralPrice)}):null]})]})]}),(0,M.jsx)(wt.U,{in:G,animateOpacity:!0,unmountOnExit:!0,children:(0,M.jsxs)(re.b,{mb:6,status:"warning",borderRadius:"6px",children:[(0,M.jsx)(oe.z,{}),(0,M.jsxs)(B.k,{direction:"column",children:[(0,M.jsx)(Hs.C,{children:"Credit capacity reached"}),(0,M.jsx)(ie.X,{children:"One of the markets has reached its credit capacity and is currently in a locked state. You cannot unlock collateral from the pool at this time."})]})]})}),o?(0,M.jsx)(wt.U,{in:!q&&!n.eq(0),animateOpacity:!0,unmountOnExit:!0,children:(0,M.jsxs)(re.b,{mb:6,status:"info",borderRadius:"6px",children:[(0,M.jsx)(oe.z,{}),(0,M.jsxs)(B.k,{direction:"column",children:[(0,M.jsxs)(Hs.C,{children:["The minimal locked amount is"," ",(0,M.jsx)(Ct,{value:o.minDelegationD18,suffix:` ${o?.displaySymbol??e.collateralSymbol}`})]}),(0,M.jsx)(ie.X,{children:"You can close your position by removing all the collateral."})]})]})}):null,(0,M.jsx)(wt.U,{in:n.abs().gt(0)&&q&&U,animateOpacity:!0,unmountOnExit:!0,children:(0,M.jsxs)(re.b,{status:"warning",mb:"6",children:[(0,M.jsx)(oe.z,{}),(0,M.jsxs)(h.x,{children:["You will be able to withdraw assets in ",R,"H",$,"M. Any account activity will reset this timer to 24H."]})]})}),u?(0,M.jsx)(wt.U,{in:n.abs().gt(0)&&q&&!U&&F?.gt(0),animateOpacity:!0,unmountOnExit:!0,children:(0,M.jsxs)(re.b,{status:"info",mb:"6",borderRadius:"6px",children:[(0,M.jsx)(oe.z,{}),(0,M.jsxs)(h.x,{children:["You already have"," ",(0,M.jsx)(Ct,{value:F,suffix:` ${u.collateralType.symbol}`})," ","unlocked.  ",(0,M.jsx)(g.r,{href:`?${X({page:"position",collateralSymbol:e.collateralSymbol,manageAction:"withdraw",accountId:e.accountId})}`,onClick:n=>{n.preventDefault(),t({page:"position",collateralSymbol:e.collateralSymbol,manageAction:"withdraw",accountId:e.accountId})},textDecoration:"underline",children:"Withdraw"})," ","before unlocking again as it will restart the 24h withdrawal timeout."]})]})}):null,"andromeda"===l?.preset&&u?(0,M.jsx)(wt.U,{in:u.debt.gt(0),animateOpacity:!0,unmountOnExit:!0,children:(0,M.jsxs)(re.b,{status:"info",mb:"6",borderRadius:"6px",children:[(0,M.jsx)(oe.z,{}),(0,M.jsxs)(h.x,{children:[(0,M.jsx)(Ct,{prefix:"You will repay ",value:u.debt,suffix:" USDC"})," to unlock ",u.collateralType.displaySymbol]})]})}):null,u?(0,M.jsx)(wt.U,{in:n.abs().gt(0),animateOpacity:!0,unmountOnExit:!0,children:(0,M.jsx)(an,{mb:6,items:[{label:`Locked ${o?.displaySymbol??e.collateralSymbol}`,value:(0,M.jsx)(Kn,{value:u.collateralAmount||s.GH,newValue:W,formatFn:e=>xe(e??s.GH),hasChanges:n.abs().gt(0),size:"sm"})},..."andromeda"!==l?.preset?[{label:"C-ratio",value:(0,M.jsx)(Ft,{currentCollateral:u.collateralAmount,currentDebt:u.debt,collateralChange:n,collateralPrice:u.collateralPrice,debtChange:s.GH,size:"sm"})}]:[]]})}):null,(0,M.jsx)(f.z,{onClick:_,"data-cy":"undelegate submit",type:"submit",isDisabled:Z,children:n.gte(0)?"Enter Amount":"Unlock Collateral"})]})}const Ws="SET_AMOUNT",Bs="SET_COLLATERAL_SYMBOL",qs="RETRY",Gs="RUN",Vs="RESET",Zs="idle",Qs="undelegate",Ys="failed",_s="success",Xs={[Qs]:Qs},Ks="undelegate",Js={amount:(0,se.wei)(0),error:null,collateralSymbol:void 0},el=(0,Wi.C)({id:"UndelegateMachine",initial:Zs,predictableActionArguments:!0,context:Js,on:{[Vs]:{target:Zs,actions:(0,Bi.f0)({amount:e=>Js.amount,error:e=>Js.error,collateralSymbol:e=>Js.collateralSymbol})},[Ws]:{actions:(0,Bi.f0)({amount:(e,t)=>t.amount})},[Bs]:{actions:(0,Bi.f0)({collateralSymbol:(e,t)=>t.symbol})}},states:{[Zs]:{on:{[Gs]:[{target:Qs,cond:e=>e.amount.gt(0)}]}},[Qs]:{invoke:{src:Ks,onError:{target:Ys,actions:(0,Bi.f0)({error:(e,t)=>({error:t.data,step:Xs.undelegate})})},onDone:[{target:_s}]}},[Ys]:{on:{[qs]:[{target:Qs,cond:e=>e.error?.step===Xs.undelegate,actions:(0,Bi.f0)({error:e=>null})}]}},[_s]:{}}});function tl({onClose:e}){const[t]=K(),{collateralChange:n,setCollateralChange:a}=A.useContext(Jo),{network:r}=(0,E.LN)(),{data:o}=Ut(t.collateralSymbol),{data:i}=mo({accountId:t.accountId,collateralType:o}),l=(0,xn.p)({isClosable:!0,duration:9e3}),[c,d]=A.useState({currentCollateral:s.GH,collateralChange:s.GH,currentDebt:s.GH}),u=i?.collateralAmount||(0,se.wei)(0),{exec:x,isReady:p}=wi({undelegateAmount:n&&n.lt(0)?n.abs():void 0}),{data:m}=La(),{data:y}=mi(),w=A.useMemo((()=>"andromeda"!==r?.preset?qt.O$.from(0):i?i.debt.lte(0)?qt.O$.from(0):i.debt.toBN().mul(s.D6).div(s.VP).mul(110).div(100):void 0),[i,r?.preset]),{approve:b,requireApproval:j,isReady:C}=In({contractAddress:m?.address,amount:w,spender:y?.address}),{exec:S,isReady:L}=ji({undelegateAmount:n&&n.lt(0)?n.abs():void 0}),v=Wn(),[D,I]=(0,ds.e)(el,{context:{amount:n.abs()},services:{[Ks]:async()=>{try{d({currentCollateral:u,currentDebt:i?.debt||s.GH,collateralChange:n}),"andromeda"===r?.preset?(j&&await b(!1),await S()):await x(),a(s.GH),l.closeAll(),l({title:"Success",description:"Your locked collateral amount has been updated.",status:"success",duration:5e3,variant:"left-accent"})}catch(e){const t=v(e);throw t&&console.error(new Error(t.name),t),l.closeAll(),l({title:"Unlock collateral failed",description:t?(0,M.jsx)(mn,{contractError:t}):"Please try again.",status:"error",variant:"left-accent",duration:36e5}),Error("Unlock collateral failed",{cause:e})}}}}),k=n.toString();A.useEffect((()=>{I(Ws,{amount:(0,se.wei)(k).abs()})}),[k,I]),A.useEffect((()=>{I(Bs,{symbol:(0,se.wei)(k).abs()})}),[k,I]);const T=A.useCallback((async()=>{if(D.matches(_s))return I(Vs),void e();D.context.error?I(qs):I(Gs)}),[e,I,D]),N=D.matches(Qs);if(D.matches(_s))return(0,M.jsx)(ni,{onClose:T,title:"Collateral successfully updated",subline:(0,M.jsxs)(M.Fragment,{children:["Your ",(0,M.jsx)("b",{children:"collateral"})," has been updated. To learn more, visit the"," ",(0,M.jsx)(g.r,{href:"https://docs.synthetix.io/",target:"_blank",color:"cyan.500",children:"Synthetix V3 Documentation"})]}),alertText:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("b",{children:"Collateral"})," successfully updated"]}),summary:(0,M.jsx)(an,{items:[...i?[{label:"Locked "+o?.displaySymbol,value:(0,M.jsx)(Kn,{value:c.currentCollateral,newValue:c.currentCollateral.add(c.collateralChange),formatFn:e=>xe(e??s.GH),hasChanges:c.collateralChange.abs().gt(0),size:"sm"})}]:[],...i&&"andromeda"!==r?.preset?[{label:"C-ratio",value:(0,M.jsx)(Ft,{currentCollateral:c.currentCollateral,currentDebt:c.currentDebt,collateralChange:c.collateralChange,collateralPrice:i?.collateralPrice??s.GH,debtChange:s.GH,size:"sm"})}]:[]]})});const z=!N&&("andromeda"===r?.preset&&C&&L||"andromeda"!==r?.preset&&p);return(0,M.jsxs)("div",{"data-cy":"undelegate multistep",children:[(0,M.jsxs)(h.x,{color:"gray.50",fontSize:"20px",fontWeight:700,children:[(0,M.jsx)(tr.R,{cursor:"pointer",onClick:e,mr:2}),"Manage Collateral"]}),(0,M.jsx)(te.i,{my:4}),(0,M.jsx)(Sn,{step:1,title:"Unlock collateral",subtitle:(0,M.jsx)(Ct,{value:D.context.amount,suffix:` ${o?.displaySymbol} will be unlocked from the pool.`}),status:{failed:Boolean(D.context.error?.step===Qs),disabled:D.context.amount.eq(0),success:D.matches(_s),loading:D.matches(Qs)&&!D.context.error}}),(0,M.jsx)(f.z,{isDisabled:!z,onClick:T,width:"100%",mt:"6","data-cy":"undelegate confirm button",children:(()=>{switch(!0){case Boolean(D.context.error):return"Retry";case N:return"Processing...";case D.matches(_s):return"Continue";default:return"Execute Transaction"}})()})]})}const nl=ge()("snx:useWithdraw");function al({txnStatus:e,txnHash:t,isDebtWithdrawal:n}){const[a]=K(),{withdrawAmount:r,setWithdrawAmount:o}=A.useContext(Jo),{data:i}=Ot(),{data:s}=Ut(a.collateralSymbol),[u,p]=A.useState(!1),{network:m}=(0,E.LN)();A.useEffect((()=>{"prompting"===e&&p(!0),"error"===e&&p(!1)}),[e]);const[y,w]=A.useState();return A.useEffect((()=>{r&&r.gt(0)&&w(r.abs())}),[r]),(0,M.jsxs)(l.u_,{isOpen:u,onClose:()=>{o((0,se.wei)(0)),p(!1)},children:[(0,M.jsx)(c.Z,{bg:"#06061B80"}),(0,M.jsx)(d.h,{bg:"navy.700",mt:"10%",borderWidth:"1px",borderColor:"gray.900",minWidth:"384px",children:(0,M.jsxs)(x.f,{"data-cy":"withdraw dialog",p:6,children:[(0,M.jsx)(h.x,{color:"gray.50",fontSize:"20px",fontWeight:700,children:n?"Withdrawing":"Withdrawing Collateral"}),(0,M.jsx)(te.i,{my:4}),(0,M.jsxs)(B.k,{position:"relative",alignItems:"center",gap:4,mb:6,rounded:"lg",mt:"6",p:"4",border:"2px solid",transitionProperty:"border-color",transitionDuration:"normal",borderColor:"success"===e?"green.500":"gray.900",children:[(0,M.jsx)(B.k,{justifyContent:"center",alignItems:"center",borderRadius:"100px",bg:"success"===e?"green.600":"gray.900",width:"40px",height:"40px",p:3,children:"success"===e?(0,M.jsx)(ht.n,{color:"white"}):(0,M.jsx)(vr.D,{size:"25px",isIndeterminate:!0,color:"gray.700"})}),(0,M.jsx)(B.k,{flexDirection:"column",alignItems:"space-between",justifyContent:"space-between",ml:2,"data-cy":"withdraw info",children:r?(0,M.jsx)(h.x,{fontSize:"14px",fontWeight:700,lineHeight:"20px",color:"white",children:(0,M.jsx)(Ct,{prefix:"success"===e?"Withdrew ":"Withdrawing ",value:y,suffix:` ${n?i?.displaySymbol:s?.displaySymbol}`})}):null})]}),(0,M.jsx)(Dr,{}),"success"===e?(0,M.jsx)(f.z,{mt:5,variant:"solid",justifyContent:"center",px:3,py:3,width:"100%",textAlign:"center",onClick:()=>p(!1),children:"Done"}):null,(0,M.jsx)(B.k,{justifyContent:"center",px:3,py:3,mt:6,mb:1,borderTop:"1px solid",borderTopColor:"gray.900","data-cy":"transaction hash",children:(0,M.jsx)(B.k,{as:g.r,isExternal:!0,variant:"outline",href:Ne({chainId:m?.id,txnHash:t}),fontFamily:"heading",color:t?"cyan.500":"gray.700",cursor:t?"pointer":"default",fontWeight:700,lineHeight:"20px",fontSize:"14px",target:"_blank",mt:3,alignItems:"center",gap:1,children:t?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(h.x,{children:"View Transaction"}),(0,M.jsx)(Yn.H,{transform:"rotate(45deg)"})]}):(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(h.x,{children:"Signing Transaction"})})})})]})})]})}function rl({isDebtWithdrawal:e=!1}){const[t]=K(),{setWithdrawAmount:n,withdrawAmount:a}=A.useContext(Jo),{data:r}=Ut(t.collateralSymbol),{data:o,isPending:i}=mo({accountId:t.accountId,collateralType:r}),{data:l}=Ot(),{data:c,isLoading:d}=lr({accountId:t.accountId}),u=e?l?.symbol:r?.symbol,x=e?l?.displaySymbol:r?.displaySymbol,{minutes:p,hours:m,isRunning:g}=dr(t.accountId),y=d?null:c,w=A.useMemo((()=>e&&o?o.availableSystemToken:!e&&o?o.availableCollateral:void 0),[e,o]),{mutation:b,isReady:j,txnState:C}=(({accountId:e,token:t,amount:n})=>{const[a,r]=(0,A.useReducer)(Ln,Mn),{data:o}=Fe(),{data:i}=Ua(),{network:s}=(0,E.LN)(),l=(0,E.mx)(),c=(0,E.yL)(),d=l&&s&&c&&o&&t&&n&&n.gt(0),u=(0,I.useQueryClient)(),x=(0,I.useMutation)({mutationFn:async()=>{if(!d)throw new Error("Not ready");const a=await l.getAddress();r({type:"prompting"});const u=new fe.CH(o.address,o.abi,l).populateTransaction.withdraw(qt.O$.from(e),t.address,ce(n.toString(),t.decimals)),x=Promise.all([u]),[h]=await Promise.all([x]);i&&h.unshift(i);const{multicallTxn:p,gasLimit:m}=await Qa(c,s,h,"useWithdraw",a),g=await l.sendTransaction({...p,gasLimit:m.mul(15).div(10)});nl("txn",g),r({type:"pending",payload:{txnHash:g.hash}});const f=await c.waitForTransaction(g.hash);return nl("receipt",f),f},onSuccess:async()=>{const e=`${s?.id}-${s?.preset}`;await Promise.all(["PriceUpdates","LiquidityPosition","LiquidityPositions","TokenBalance","SynthBalances","EthBalance","Allowance","TransferableSynthetix","AccountCollateralUnlockDate"].map((t=>u.invalidateQueries({queryKey:[e,t]})))),r({type:"success"})},onError:e=>{throw r({type:"error",payload:{error:e}}),e}});return{isReady:d,mutation:x,txnState:a,settle:()=>r({type:"settled"}),isLoading:x.isPending,exec:x.mutateAsync}})({amount:a,accountId:t.accountId,token:e?l:r}),S=(0,xn.p)({isClosable:!0,duration:9e3}),L=Wn(),v=A.useCallback((async e=>{e.preventDefault();try{S.closeAll(),S({title:"Withdrawing...",variant:"left-accent"}),await b.mutateAsync(),n(s.GH),S.closeAll(),S({title:"Success",description:"Withdrawal was successful",status:"success",duration:5e3,variant:"left-accent"})}catch(e){const t=L(e);t&&console.error(new Error(t.name),t),S.closeAll(),S({title:"Could not complete withdrawing",description:t?(0,M.jsx)(mn,{contractError:t}):"Please try again.",status:"error",variant:"left-accent",duration:36e5})}}),[L,n,S,b]);return(0,M.jsxs)(B.k,{flexDirection:"column","data-cy":"withdraw form",as:"form",onSubmit:v,children:[(0,M.jsx)(al,{isDebtWithdrawal:e,txnStatus:C.txnStatus,txnHash:C.txnHash}),(0,M.jsx)(h.x,{color:"gray./50",fontSize:"sm",fontWeight:"700",mb:"3",children:e?"Withdraw":"Withdraw Collateral"}),(0,M.jsxs)(ta,{display:"flex",p:3,mb:"6",children:[(0,M.jsxs)(B.k,{alignItems:"flex-start",flexDir:"column",gap:"1",children:[(0,M.jsx)(ta,{display:"flex",py:1.5,px:2.5,children:(0,M.jsxs)(h.x,{display:"flex",gap:2,fontSize:"16px",alignItems:"center",fontWeight:"600",whiteSpace:"nowrap",children:[(0,M.jsx)(cn,{symbol:u,width:16,height:16}),e?l?.displaySymbol:r?.displaySymbol]})}),(0,M.jsxs)(h.x,{fontSize:"12px",whiteSpace:"nowrap","data-cy":"withdraw amount",children:[e&&i?"Available: ~":null,!e&&i?"Unlocked: ~":null,w?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Ct,{prefix:e?"Available: ":"Unlocked: ",value:w})," ",(0,M.jsx)(h.x,{as:"span",cursor:"pointer",onClick:()=>n(w),color:"cyan.500",fontWeight:700,children:"Max"})]}):null]})]}),(0,M.jsxs)(B.k,{flexDir:"column",flexGrow:1,children:[(0,M.jsx)(ra,{InputProps:{isRequired:!0,"data-cy":"withdraw amount input",type:"number",min:0},value:a,onChange:e=>n(e),max:w,min:s.GH}),(0,M.jsxs)(B.k,{fontSize:"xs",color:"whiteAlpha.700",alignSelf:"flex-end",gap:"1",children:[i?"~":null,!i&&o&&o.collateralPrice.gt(0)?(0,M.jsx)(Ct,{prefix:"$",value:a.abs().mul(o.collateralPrice)}):null]})]})]}),(0,M.jsx)(wt.U,{in:w&&w.gt(0)&&g,animateOpacity:!0,unmountOnExit:!0,children:(0,M.jsxs)(re.b,{status:"warning",mb:"6",borderRadius:"6px",children:[(0,M.jsx)(oe.z,{}),(0,M.jsxs)(h.x,{children:["You will be able to withdraw assets in ",m,"H",p,"M. Any account activity will reset this timer to 24H."]})]})}),(0,M.jsx)(wt.U,{in:w&&w.gt(0)&&!g,animateOpacity:!0,unmountOnExit:!0,children:(0,M.jsxs)(re.b,{status:"success",mb:"6",borderRadius:"6px",children:[(0,M.jsx)(oe.z,{}),(0,M.jsx)(Ct,{prefix:"You can now withdraw ",value:w,suffix:` ${x}`})]})}),(0,M.jsx)(wt.U,{in:w&&a.gt(w),animateOpacity:!0,unmountOnExit:!0,children:(0,M.jsxs)(re.b,{colorScheme:"red",mb:"6",borderRadius:"6px",children:[(0,M.jsx)(oe.z,{}),(0,M.jsxs)(h.x,{children:["You cannot Withdraw more ",e?"":"Collateral"," than your Unlocked Balance"]})]})}),(0,M.jsx)(f.z,{isDisabled:!j||g||!y||w&&a.gt(w),"data-cy":"withdraw submit",type:"submit",children:a.gt(0)?"Withdraw":"Enter Amount"})]})}function ol({txnStatus:e,txnHash:t}){const{withdrawAmount:n,setWithdrawAmount:a}=A.useContext(Jo),[r,o]=A.useState(!1),{network:i}=(0,E.LN)();A.useEffect((()=>{"prompting"===e&&o(!0),"error"===e&&o(!1)}),[e]);const[s,u]=A.useState();return A.useEffect((()=>{n&&n.gt(0)&&u(n.abs())}),[n]),(0,M.jsxs)(l.u_,{isOpen:r,onClose:()=>{a((0,se.wei)(0)),o(!1)},children:[(0,M.jsx)(c.Z,{bg:"#06061B80"}),(0,M.jsx)(d.h,{bg:"navy.700",mt:"10%",borderWidth:"1px",borderColor:"gray.900",minWidth:"384px",children:(0,M.jsxs)(x.f,{"data-cy":"withdraw dialog",p:6,children:[(0,M.jsx)(h.x,{color:"gray.50",fontSize:"20px",fontWeight:700,children:"Withdrawing USDC"}),(0,M.jsx)(te.i,{my:4}),(0,M.jsxs)(B.k,{position:"relative",alignItems:"center",gap:4,mb:6,rounded:"lg",mt:"6",p:"4",border:"2px solid",transitionProperty:"border-color",transitionDuration:"normal",borderColor:"success"===e?"green.500":"gray.900",children:[(0,M.jsx)(B.k,{justifyContent:"center",alignItems:"center",borderRadius:"100px",bg:"success"===e?"green.600":"gray.900",width:"40px",height:"40px",p:3,children:"success"===e?(0,M.jsx)(ht.n,{color:"white"}):(0,M.jsx)(vr.D,{size:"25px",isIndeterminate:!0,color:"gray.700"})}),(0,M.jsx)(B.k,{flexDirection:"column",alignItems:"space-between",justifyContent:"space-between",ml:2,"data-cy":"withdraw info",children:n?(0,M.jsx)(h.x,{fontSize:"14px",fontWeight:700,lineHeight:"20px",color:"white",children:(0,M.jsx)(Ct,{prefix:"success"===e?"Withdrew ":"Withdrawing ",value:s,suffix:" USDC"})}):null})]}),(0,M.jsx)(Dr,{}),"success"===e?(0,M.jsx)(f.z,{mt:5,variant:"solid",justifyContent:"center",px:3,py:3,width:"100%",textAlign:"center",onClick:()=>o(!1),children:"Done"}):null,(0,M.jsx)(B.k,{justifyContent:"center",px:3,py:3,mt:6,mb:1,borderTop:"1px solid",borderTopColor:"gray.900","data-cy":"transaction hash",children:(0,M.jsx)(B.k,{as:g.r,isExternal:!0,variant:"outline",href:Ne({chainId:i?.id,txnHash:t}),fontFamily:"heading",color:t?"cyan.500":"gray.700",cursor:t?"pointer":"default",fontWeight:700,lineHeight:"20px",fontSize:"14px",target:"_blank",mt:3,alignItems:"center",gap:1,children:t?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(h.x,{children:"View Transaction"}),(0,M.jsx)(Yn.H,{transform:"rotate(45deg)"})]}):(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(h.x,{children:"Signing Transaction"})})})})]})})]})}const il=ge()("snx:WithdrawAndromeda");function sl(){const[e]=K(),{setWithdrawAmount:t}=A.useContext(Jo),{data:n}=Ut(e.collateralSymbol),{data:a,isPending:r}=mo({accountId:e.accountId,collateralType:n}),{data:o,isLoading:i}=lr({accountId:e.accountId}),l="USDC",{minutes:c,hours:d,isRunning:u}=dr(e.accountId),x=i?null:o,p=A.useMemo((()=>{if(a)return a.availableCollateral.mul(a.collateralPrice).add(a.availableSystemToken)}),[a]);A.useEffect((()=>{p&&p.gt(0)&&t(p.abs())}),[p,t]);const[m,g]=(0,A.useReducer)(Ln,Mn),{data:y}=Ua(),{network:w}=(0,E.LN)(),b=(0,E.mx)(),j=(0,E.yL)(),{data:C}=pe(),{data:S}=xs({collateralType:n}),L=b&&w&&j&&C&&S&&!0,v=(0,I.useQueryClient)(),D=(0,I.useMutation)({mutationFn:async function(){if(il("params",e),il("collateralType",n),!L)throw new Error("Not ready");g({type:"prompting"});const t=await b.getAddress(),a=[];if(e.accountId){const t=new fe.CH(C.address,C.abi,b).populateTransaction.approve(S.address,e.accountId);a.push(t)}const r=new fe.CH(S.address,S.abi,b).populateTransaction.withdraw(e.accountId);a.push(r);const o=await Promise.all(a);y&&o.unshift(y);const{multicallTxn:i,gasLimit:s}=await Qa(j,w,o,"useDepositAndromeda",t),l=await b.sendTransaction({...i,gasLimit:s.mul(15).div(10)});il("txn",l),g({type:"pending",payload:{txnHash:l.hash}});const c=await j.waitForTransaction(l.hash);return il("receipt",c),c},onSuccess:async()=>{const e=`${w?.id}-${w?.preset}`;await Promise.all(["Accounts","PriceUpdates","LiquidityPosition","LiquidityPositions","TokenBalance","SynthBalances","EthBalance","Allowance"].map((t=>v.invalidateQueries({queryKey:[e,t]})))),k.closeAll(),k({title:"Success",description:"Your locked collateral amount has been updated.",status:"success",duration:5e3,variant:"left-accent"}),g({type:"success"})},onError:e=>{g({type:"error",payload:{error:e}});const t=T(e);throw t&&console.error(new Error(t.name),t),k.closeAll(),k({title:"Transaction failed",variant:"left-accent",description:t?(0,M.jsx)(mn,{contractError:t}):"Please try again.",status:"error",duration:36e5}),Error("Transaction failed",{cause:e})}}),k=(0,xn.p)({isClosable:!0,duration:9e3}),T=Wn(),N=A.useCallback((async e=>{e.preventDefault();try{k.closeAll(),k({title:"Withdrawing...",variant:"left-accent"}),await D.mutateAsync(),t(s.GH),k.closeAll(),k({title:"Success",description:"Withdrawal was successful",status:"success",duration:5e3,variant:"left-accent"})}catch(e){const t=T(e);t&&console.error(new Error(t.name),t),k.closeAll(),k({title:"Could not complete withdrawing",description:t?(0,M.jsx)(mn,{contractError:t}):"Please try again.",status:"error",variant:"left-accent",duration:36e5})}}),[T,t,k,D]);return(0,M.jsxs)(B.k,{flexDirection:"column","data-cy":"withdraw form",as:"form",onSubmit:N,children:[(0,M.jsx)(ol,{txnStatus:m.txnStatus,txnHash:m.txnHash}),(0,M.jsx)(h.x,{color:"gray./50",fontSize:"sm",fontWeight:"700",mb:"3",children:"Withdraw Collateral"}),(0,M.jsxs)(ta,{display:"flex",p:3,mb:"6",children:[(0,M.jsxs)(B.k,{alignItems:"flex-start",flexDir:"column",gap:"1",children:[(0,M.jsx)(ta,{display:"flex",py:1.5,px:2.5,children:(0,M.jsxs)(h.x,{display:"flex",gap:2,fontSize:"16px",alignItems:"center",fontWeight:"600",whiteSpace:"nowrap",children:[(0,M.jsx)(cn,{symbol:l,width:16,height:16}),l]})}),(0,M.jsxs)(h.x,{fontSize:"12px",whiteSpace:"nowrap","data-cy":"withdraw amount",children:[r?"Unlocked: ~":null,p?(0,M.jsx)(Ct,{prefix:"Unlocked: ",value:p,suffix:` ${l}`}):null]})]}),(0,M.jsxs)(B.k,{flexDir:"column",flexGrow:1,children:[(0,M.jsx)(ra,{InputProps:{isRequired:!0,"data-cy":"withdraw amount input",type:"number",min:0},value:p?(0,se.wei)(parseFloat(p.toString()).toFixed(2)):s.GH,disabled:!0}),(0,M.jsxs)(B.k,{fontSize:"xs",color:"whiteAlpha.700",alignSelf:"flex-end",gap:"1",children:[r?"~":null,!r&&p?(0,M.jsx)(Ct,{prefix:"$",value:p||s.GH}):null]})]})]}),(0,M.jsx)(wt.U,{in:p&&p.gt(0)&&u,animateOpacity:!0,unmountOnExit:!0,children:(0,M.jsxs)(re.b,{status:"warning",mb:"6",borderRadius:"6px",children:[(0,M.jsx)(oe.z,{}),(0,M.jsxs)(h.x,{children:["You will be able to withdraw assets in ",d,"H",c,"M. Any account activity will reset this timer to 24H."]})]})}),(0,M.jsx)(wt.U,{in:p&&p.gt(0)&&!u,animateOpacity:!0,unmountOnExit:!0,children:(0,M.jsxs)(re.b,{status:"success",mb:"6",borderRadius:"6px",children:[(0,M.jsx)(oe.z,{}),(0,M.jsx)(Ct,{prefix:"You can now withdraw ",value:p,suffix:` ${l}`})]})}),(0,M.jsx)(f.z,{isDisabled:!L||u||!x||!(p&&p.gt(0)),"data-cy":"withdraw submit",type:"submit",children:"Withdraw"})]})}const ll=({setTxnModalOpen:e,txnModalOpen:t})=>{const[n,a]=K(),{network:r}=(0,E.LN)(),{debtChange:o,collateralChange:i,setCollateralChange:s,setDebtChange:l}=A.useContext(Jo),{data:c}=Ut(n.collateralSymbol),{data:d}=mo({accountId:n.accountId,collateralType:c}),{isValid:u}=ii({issuanceRatioD18:c?.issuanceRatioD18,collateralAmount:d?.collateralAmount,collateralPrice:d?.collateralPrice,debt:d?.debt,collateralChange:i,debtChange:o}),x=Q.safeParse(n.manageAction),m=x.success?x.data:void 0,f=(e=>{const t=[{title:e?"Claim":"Claim/Borrow",link:"claim",icon:e=>(0,M.jsxs)("svg",{width:"37",height:"36",viewBox:"0 0 37 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,M.jsxs)("g",{clipPath:"url(#clip0_11314_79978)",children:[(0,M.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.0903 8.50714C9.39782 8.50714 3.97247 13.9325 3.97247 20.625C3.97247 27.3175 9.39782 32.7429 16.0903 32.7429C22.7828 32.7429 28.2082 27.3175 28.2082 20.625C28.2082 13.9325 22.7828 8.50714 16.0903 8.50714ZM1.46533 20.625C1.46533 12.5478 8.01317 6 16.0903 6C24.1675 6 30.7153 12.5478 30.7153 20.625C30.7153 28.7022 24.1675 35.25 16.0903 35.25C8.01317 35.25 1.46533 28.7022 1.46533 20.625Z",fill:"cyan"===e?"#00D1FF":"white"}),(0,M.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.5792 17.9742C14.589 17.5066 14.7225 17.3161 14.8124 17.2254C14.931 17.1058 15.1602 16.9772 15.5845 16.9097C16.4687 16.769 17.6646 16.9739 18.6515 17.2338L19.8638 17.553L20.5023 15.1286L19.29 14.8093C18.2491 14.5351 16.6222 14.2059 15.1905 14.4337C14.4569 14.5505 13.6548 14.8318 13.0317 15.4605C12.3834 16.1147 12.0715 16.9997 12.0715 18.0296V18.0771L12.0751 18.1244C12.1655 19.316 12.8745 20.108 13.6098 20.6288C14.284 21.1062 15.1197 21.4539 15.7947 21.7348C15.8202 21.7454 15.8454 21.7559 15.8704 21.7664C16.6329 22.084 17.1988 22.3286 17.591 22.6158C17.9362 22.8687 17.9707 23.0216 17.9707 23.1567C17.9707 23.6803 17.8165 23.8884 17.6957 23.9976C17.5342 24.1438 17.2307 24.2862 16.7131 24.3507C15.6587 24.482 14.289 24.2239 13.2807 23.9538L12.0698 23.6296L11.4212 26.0513L12.6321 26.3756C13.6977 26.661 15.462 27.0331 17.023 26.8386C17.8131 26.7402 18.6878 26.4808 19.3774 25.8572C20.1078 25.1967 20.4778 24.2672 20.4778 23.1567C20.4778 21.9459 19.8008 21.1267 19.0724 20.5932C18.4094 20.1076 17.5679 19.7573 16.8907 19.4754C16.8718 19.4675 16.8531 19.4597 16.8345 19.452C16.0731 19.1348 15.4848 18.8844 15.0588 18.5828C14.6976 18.3269 14.602 18.1399 14.5792 17.9742Z",fill:"cyan"===e?"#00D1FF":"white"}),(0,M.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.0903 25.0125C16.7827 25.0125 17.3439 25.5737 17.3439 26.2661V29.4H14.8368V26.2661C14.8368 25.5737 15.398 25.0125 16.0903 25.0125Z",fill:"cyan"===e?"#00D1FF":"white"}),(0,M.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.3439 11.85V14.9839C17.3439 15.6763 16.7827 16.2375 16.0903 16.2375C15.398 16.2375 14.8368 15.6763 14.8368 14.9839V11.85H17.3439Z",fill:"cyan"===e?"#00D1FF":"white"}),(0,M.jsx)("path",{d:"M30.5 4.5V1.5H33.5V4.5H36.5V7.5H33.5V10.5H30.5V7.5H27.5V4.5H30.5Z",fill:"cyan"===e?"#00D1FF":"white"})]}),(0,M.jsx)("defs",{children:(0,M.jsx)("clipPath",{id:"clip0_11314_79978",children:(0,M.jsx)("rect",{width:"36",height:"36",fill:"cyan"===e?"#00D1FF":"white",transform:"translate(0.5)"})})})]})},{title:"Repay Debt",link:"repay",icon:e=>(0,M.jsxs)("svg",{width:"37",height:"36",viewBox:"0 0 37 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,M.jsxs)("g",{clipPath:"url(#clip0_11314_79981)",children:[(0,M.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.0903 8.50714C9.39782 8.50714 3.97247 13.9325 3.97247 20.625C3.97247 27.3175 9.39782 32.7429 16.0903 32.7429C22.7828 32.7429 28.2082 27.3175 28.2082 20.625C28.2082 13.9325 22.7828 8.50714 16.0903 8.50714ZM1.46533 20.625C1.46533 12.5478 8.01317 6 16.0903 6C24.1675 6 30.7153 12.5478 30.7153 20.625C30.7153 28.7022 24.1675 35.25 16.0903 35.25C8.01317 35.25 1.46533 28.7022 1.46533 20.625Z",fill:"cyan"===e?"#00D1FF":"white"}),(0,M.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.5792 17.9742C14.589 17.5066 14.7225 17.3161 14.8124 17.2254C14.931 17.1058 15.1602 16.9772 15.5845 16.9097C16.4687 16.769 17.6646 16.9739 18.6515 17.2338L19.8638 17.553L20.5023 15.1286L19.29 14.8093C18.2491 14.5351 16.6222 14.2059 15.1905 14.4337C14.4569 14.5505 13.6548 14.8318 13.0317 15.4605C12.3834 16.1147 12.0715 16.9997 12.0715 18.0296V18.0771L12.0751 18.1244C12.1655 19.316 12.8745 20.108 13.6098 20.6288C14.284 21.1062 15.1197 21.4539 15.7947 21.7348C15.8202 21.7454 15.8454 21.7559 15.8704 21.7664C16.6329 22.084 17.1988 22.3286 17.591 22.6158C17.9362 22.8687 17.9707 23.0216 17.9707 23.1567C17.9707 23.6803 17.8165 23.8884 17.6957 23.9976C17.5342 24.1438 17.2307 24.2862 16.7131 24.3507C15.6587 24.482 14.289 24.2239 13.2807 23.9538L12.0698 23.6296L11.4212 26.0513L12.6321 26.3756C13.6977 26.661 15.462 27.0331 17.023 26.8386C17.8131 26.7402 18.6878 26.4808 19.3774 25.8572C20.1078 25.1967 20.4778 24.2672 20.4778 23.1567C20.4778 21.9459 19.8008 21.1267 19.0724 20.5932C18.4094 20.1076 17.5679 19.7573 16.8907 19.4754C16.8718 19.4675 16.8531 19.4597 16.8345 19.452C16.0731 19.1348 15.4848 18.8844 15.0588 18.5828C14.6976 18.3269 14.602 18.1399 14.5792 17.9742Z",fill:"cyan"===e?"#00D1FF":"white"}),(0,M.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.0903 25.0125C16.7827 25.0125 17.3439 25.5737 17.3439 26.2661V29.4H14.8368V26.2661C14.8368 25.5737 15.398 25.0125 16.0903 25.0125Z",fill:"cyan"===e?"#00D1FF":"white"}),(0,M.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.3439 11.85V14.9839C17.3439 15.6763 16.7827 16.2375 16.0903 16.2375C15.398 16.2375 14.8368 15.6763 14.8368 14.9839V11.85H17.3439Z",fill:"cyan"===e?"#00D1FF":"white"}),(0,M.jsx)("path",{d:"M30.5 4.5H33.5H36.5V7.5H33.5H30.5H27.5V4.5H30.5Z",fill:"cyan"===e?"#00D1FF":"white"})]}),(0,M.jsx)("defs",{children:(0,M.jsx)("clipPath",{id:"clip0_11314_79981",children:(0,M.jsx)("rect",{width:"36",height:"36",fill:"cyan"===e?"#00D1FF":"white",transform:"translate(0.5)"})})})]})}];return e?t:[...t,{title:"Withdraw",link:"withdraw-debt",icon:e=>(0,M.jsxs)("svg",{width:"37",height:"36",viewBox:"0 0 37 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,M.jsx)("path",{d:"M6.60986 29.7349C6.60986 29.942 6.77776 30.1099 6.98486 30.1099L28.7349 30.1099C28.942 30.1099 29.1099 29.942 29.1099 29.7349L29.1099 21.1099L31.3599 21.1099L31.3599 29.7349C31.3599 31.1846 30.1846 32.3599 28.7349 32.3599L6.98486 32.3599C5.53512 32.3599 4.35986 31.1846 4.35986 29.7349L4.35986 21.1099L6.60986 21.1099L6.60986 22.2348L6.60986 29.7349Z",fill:"cyan"===e?"#00D1FF":"white"}),(0,M.jsx)("path",{d:"M18.9849 26.7349L16.7349 26.7349L16.7349 7.94653L12.3555 12.3259L10.8728 10.6273L17.8599 3.64019L24.8469 10.6273L23.3643 12.3259L18.9849 7.94653L18.9849 26.7349Z",fill:"cyan"===e?"#00D1FF":"white"})]})}]})("andromeda"===r?.preset),y=f.some((e=>e.link===m))?"debt":"collateral",w=(0,A.useCallback)((t=>{t.preventDefault();const n=t.target;("andromeda"===r?.preset||u)&&n.reportValidity()&&e(m)}),[u,m,r?.preset,e]);return(0,M.jsxs)(M.Fragment,{children:[t?null:(0,M.jsxs)(p.xu,{children:[(0,M.jsxs)(Di.m,{isFitted:!0,index:"collateral"===y?0:1,children:[(0,M.jsxs)(Ii.t,{children:[(0,M.jsx)(ki.O,{as:g.r,href:`?${X({page:"position",collateralSymbol:n.collateralSymbol,manageAction:vi[0].link,accountId:n.accountId})}`,onClick:e=>{e.preventDefault(),"collateral"!==y&&(s((0,se.wei)(0)),l((0,se.wei)(0))),a({page:"position",collateralSymbol:n.collateralSymbol,manageAction:vi[0].link,accountId:n.accountId})},color:"collateral"===y?"white":"gray.500",fontWeight:700,fontSize:["12px","16px"],whiteSpace:"nowrap",textDecoration:"none",_hover:{textDecoration:"none"},children:"Manage Collateral"}),(0,M.jsx)(ki.O,{as:g.r,href:`?${X({page:"position",collateralSymbol:n.collateralSymbol,manageAction:f[0].link,accountId:n.accountId})}`,onClick:e=>{e.preventDefault(),"debt"!==y&&(s((0,se.wei)(0)),l((0,se.wei)(0))),a({page:"position",collateralSymbol:n.collateralSymbol,manageAction:f[0].link,accountId:n.accountId})},color:"debt"===y?"white":"gray.500",fontWeight:700,fontSize:["12px","16px"],whiteSpace:"nowrap",textDecoration:"none",_hover:{textDecoration:"none"},children:"andromeda"===r?.preset?"Manage PnL":"Manage Debt"})]}),(0,M.jsxs)(Ti.n,{children:[(0,M.jsx)(Ni.x,{px:"0",children:(0,M.jsx)(B.k,{flexDir:["column","row"],gap:4,children:vi.map((e=>(0,M.jsxs)(B.k,{as:g.r,href:`?${X({page:"position",collateralSymbol:n.collateralSymbol,manageAction:e.link,accountId:n.accountId})}`,onClick:t=>{t.preventDefault(),s((0,se.wei)(0)),l((0,se.wei)(0)),a({page:"position",collateralSymbol:n.collateralSymbol,manageAction:e.link,accountId:n.accountId})},h:"84px",minH:["90px","84px"],justifyContent:"center",border:"1px solid",flexDir:"column",alignItems:"center",borderColor:m===e.link?"cyan.500":"gray.900",rounded:"base",flex:"1",minWidth:["100%","auto"],textDecoration:"none",_hover:{textDecoration:"none"},children:[e.icon(m===e.link?"cyan":"white"),(0,M.jsx)(h.x,{fontSize:"14px",fontWeight:700,mt:"2",color:m===e.link?"cyan.500":"white",textAlign:"center",lineHeight:"1.1",children:e.title})]},e.title.concat("-tab-actions"))))})}),(0,M.jsx)(Ni.x,{px:"0",children:(0,M.jsx)(B.k,{flexDir:["column","row"],gap:4,children:f.map((e=>(0,M.jsxs)(B.k,{as:g.r,href:`?${X({page:"position",collateralSymbol:n.collateralSymbol,manageAction:e.link,accountId:n.accountId})}`,onClick:t=>{t.preventDefault(),s((0,se.wei)(0)),l((0,se.wei)(0)),a({page:"position",collateralSymbol:n.collateralSymbol,manageAction:e.link,accountId:n.accountId})},flex:"1",h:"84px",minH:["90px","84px"],justifyContent:"center",border:"1px solid",flexDir:"column",alignItems:"center",borderColor:m===e.link?"cyan.500":"gray.900",rounded:"base",cursor:"pointer",minWidth:["100%","auto"],textDecoration:"none",_hover:{textDecoration:"none"},children:[e.icon(m===e.link?"cyan":"white"),(0,M.jsx)(h.x,{fontSize:"14px",fontWeight:700,mt:"2",color:m===e.link?"cyan.500":"white",textAlign:"center",lineHeight:"1.1",children:e.title})]},e.title.concat("-tab-actions"))))})})]})]}),"repay"===m&&"andromeda"!==r?.preset?(0,M.jsx)(B.k,{direction:"column",children:(0,M.jsx)(gs,{})}):"claim"===m&&"andromeda"!==r?.preset?(0,M.jsx)(B.k,{direction:"column",children:(0,M.jsx)(zi,{})}):"withdraw"===m&&"andromeda"===r?.preset?(0,M.jsx)(B.k,{direction:"column",children:(0,M.jsx)(sl,{})}):"withdraw"===m&&"andromeda"!==r?.preset?(0,M.jsx)(B.k,{direction:"column",children:(0,M.jsx)(rl,{})}):"withdraw-debt"===m&&"andromeda"!==r?.preset?(0,M.jsx)(B.k,{direction:"column",children:(0,M.jsx)(rl,{isDebtWithdrawal:!0})}):(0,M.jsxs)(B.k,{direction:"column",as:"form",onSubmit:w,children:["claim"===m?(0,M.jsx)(Fi,{}):null,"deposit"===m?(0,M.jsx)(Ui,{}):null,"repay"===m&&"andromeda"===r?.preset?(0,M.jsx)(ys,{}):null,"repay"===m&&"andromeda"!==r?.preset?(0,M.jsx)(gs,{}):null,"undelegate"===m?(0,M.jsx)(Us,{}):null]})]}),"repay"===t&&"andromeda"===r?.preset?(0,M.jsx)(Ps,{onClose:()=>{s((0,se.wei)(0)),l((0,se.wei)(0)),e(void 0)}}):null,"claim"===t?(0,M.jsx)(Oi,{onClose:()=>{s((0,se.wei)(0)),l((0,se.wei)(0)),e(void 0)}}):null,"deposit"===t&&"andromeda"!==r?.preset?(0,M.jsx)(us,{onClose:()=>{s((0,se.wei)(0)),l((0,se.wei)(0)),e(void 0)}}):null,"deposit"===t&&"andromeda"===r?.preset?(0,M.jsx)(ps,{onClose:()=>{s((0,se.wei)(0)),l((0,se.wei)(0)),e(void 0)}}):null,"undelegate"===t?(0,M.jsx)(tl,{onClose:()=>{s((0,se.wei)(0)),l((0,se.wei)(0)),e(void 0)}}):null]})},cl=()=>{const[e,t]=K(),{network:n}=(0,E.LN)(),{data:a,isPending:r}=Ut(e.collateralSymbol),{data:o}=mo({accountId:e.accountId,collateralType:a}),{data:i}=wa(n?.id,n?.preset),s=Ca({tokenAddress:a?.tokenAddress,customNetwork:n}),[l,c]=A.useState(void 0),{data:d,isPending:u}=pa(n),x=A.useMemo((()=>d?.find((e=>e.collateralType.toLowerCase()===a?.tokenAddress.toLowerCase()))),[d,a?.tokenAddress]);return(0,M.jsxs)(ei,{children:[(0,M.jsxs)(N.q,{children:[(0,M.jsx)("title",{children:`Synthetix ${a?.displaySymbol??e.collateralSymbol} Position`}),(0,M.jsx)("meta",{name:"description",content:`Synthetix Liquidity V3 - ${a?.displaySymbol??e.collateralSymbol} Position`})]}),(0,M.jsx)(Ai,{isOpen:!r&&!a}),(0,M.jsxs)(p.xu,{mb:12,mt:8,children:[(0,M.jsxs)(B.k,{flexDir:["column","row"],flexWrap:"wrap",px:[0,6],alignItems:"center",justifyContent:"space-between",mb:"8px",gap:4,children:[(0,M.jsx)(ri,{}),(0,M.jsxs)(B.k,{alignItems:["center","flex-end"],direction:"column",children:[(0,M.jsx)(bt,{label:"APR is averaged over the trailing 28 days and is comprised of both performance and rewards",children:(0,M.jsxs)(h.x,{fontFamily:"heading",fontSize:"sm",lineHeight:5,fontWeight:"medium",color:"gray.500",children:["Estimated APR",(0,M.jsx)(Ve.s,{ml:1,mb:"2px",w:"10px",h:"10px"})]})}),(0,M.jsxs)(h.x,{fontWeight:"bold",fontSize:"20px",color:"white",lineHeight:"36px",children:[u?"~":null,!u&&x&&x.apr28d>0?(100*x.apr28d+(s&&i?i:0)).toFixed(2).concat("%"):"-"]})]})]}),(0,M.jsxs)(B.k,{mt:6,flexDirection:["column","column","row"],gap:4,children:[(0,M.jsxs)(B.k,{flex:1,direction:"column",gap:6,children:[(0,M.jsx)(ta,{gap:4,p:6,flexDirection:"column",bg:"navy.700",children:(0,M.jsx)(ci,{})}),s&&o&&o.collateralAmount.eq(0)&&(0,M.jsx)(oi,{})]}),(0,M.jsxs)(B.k,{maxWidth:["100%","100%","501px"],width:"100%",flex:1,alignSelf:"flex-start",flexDirection:"column",children:["close"===e.manageAction?(0,M.jsx)(ta,{flex:1,maxW:["100%","100%","501px"],p:6,flexDirection:"column",bg:"navy.700",height:"fit-content",children:(0,M.jsx)(Mi,{onClose:()=>t({page:"position",collateralSymbol:e.collateralSymbol,manageAction:"deposit",accountId:e.accountId})})}):null,"locked"===e.manageAction?(0,M.jsx)(ta,{flex:1,maxW:["100%","100%","501px"],p:6,flexDirection:"column",bg:"navy.700",height:"fit-content",children:(0,M.jsx)(ar,{onClose:()=>t({page:"position",collateralSymbol:e.collateralSymbol,manageAction:"deposit",accountId:e.accountId})})}):null,["close","locked"].includes(e.manageAction)?null:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(ta,{flex:1,p:6,flexDirection:"column",bg:"navy.700",height:"fit-content",children:(0,M.jsx)(ll,{setTxnModalOpen:c,txnModalOpen:l})}),!l&&o?.collateralAmount.gt(0)?(0,M.jsx)(h.x,{textAlign:"center",cursor:"pointer",onClick:()=>t({page:"position",collateralSymbol:e.collateralSymbol,manageAction:"close",accountId:e.accountId}),color:"cyan.500",fontWeight:700,mt:"5","data-cy":"close position",children:"Close Position"}):null]})]})]})]})]})};function dl(){const[e]=K();return"settings"===e.page?(0,M.jsx)(ct,{}):"position"===e.page?(0,M.jsx)(cl,{}):(0,M.jsx)(Po,{})}function ul(){return(0,M.jsx)(A.Suspense,{fallback:(0,M.jsx)(W.$,{}),children:(0,M.jsx)(p.xu,{as:"main",minHeight:"100vh",color:"rgba(255,255,255,0.85)",display:"flex",flexDirection:"column",bg:"navy.900",children:(0,M.jsxs)(B.k,{flex:"1",flexDirection:"column",children:[(0,M.jsx)(Ko,{}),(0,M.jsx)(q.W,{display:"flex",flexDir:"column",maxW:"1236px",flex:"1",children:(0,M.jsx)(dl,{})}),(0,M.jsx)(Ho,{})]})})})}const xl=new I.QueryClient({defaultOptions:{queries:{retry:!1,refetchInterval:!1,staleTime:s.yq,refetchOnWindowFocus:!1,throwOnError:e=>(console.error(e),!1)},mutations:{retry:!1,throwOnError:e=>(console.error(e),!1)}}}),hl=(0,r.B1)({...C,components:{...C.components,Progress:{parts:["filledTrack","track"],baseStyle:{track:{overflow:"unset",bg:"whiteAlpha.100"}},variants:{error:e=>({filledTrack:{bg:"error",boxShadow:`0px 0px 15px ${e.theme.colors.error}`}}),warning:e=>({filledTrack:{bg:"warning",boxShadow:`0px 0px 15px ${e.theme.colors.warning}`}}),success:e=>({filledTrack:{bg:"success",boxShadow:`0px 0px 15px ${e.theme.colors.success}`}}),"update-error":()=>({filledTrack:{bg:"red.700"}}),"update-warning":()=>({filledTrack:{bg:"orange.700"}}),"update-success":()=>({filledTrack:{bg:"green.700"}}),white:{filledTrack:{bg:"white",borderRadius:"full"}}}}}});function pl(){const{colorMode:e,toggleColorMode:t}=(0,o.If)();return(0,A.useEffect)((()=>{"light"===e&&t()}),[e,t]),null}const ml=()=>{const e="true"===localStorage.getItem(s.sO.TERMS_CONDITIONS_ACCEPTED);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(N.Z,{children:[(0,M.jsx)("meta",{property:"og:url",content:"https://liquidity.synthetix.io/"}),(0,M.jsx)("meta",{property:"og:type",content:"website"}),(0,M.jsx)("meta",{property:"og:title",content:"Synthetix | Liquidity"}),(0,M.jsx)("meta",{property:"og:description",content:"The Liquidity Layer of DeFi. Provide liquidity for the next generation of permissionless protocols"}),(0,M.jsx)("meta",{property:"og:image",content:"https://liquidity.synthetix.io/Liquidity.jpg"}),(0,M.jsx)("meta",{property:"og:image:alt",content:"Synthetix | Liquidity"}),(0,M.jsx)("meta",{property:"og:site_name",content:""}),(0,M.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,M.jsx)("meta",{name:"twitter:site",content:"@synthetix_io"}),(0,M.jsx)("meta",{name:"twitter:creator",content:"@synthetix_io"}),(0,M.jsx)("meta",{name:"twitter:image",content:"https://liquidity.synthetix.io/Liquidity.jpg"}),(0,M.jsx)("meta",{name:"twitter:url",content:"https://liquidity.synthetix.io/"})]}),(0,M.jsx)(I.QueryClientProvider,{client:xl,children:(0,M.jsx)(T.jA,{web3Onboard:U,children:(0,M.jsxs)(i.x,{theme:hl,children:[(0,M.jsx)(pl,{}),(0,M.jsx)(L,{}),(0,M.jsxs)(v.VK,{children:[(0,M.jsx)(D,{defaultOpen:!e}),(0,M.jsx)(ul,{})]}),(0,M.jsx)(k.t,{})]})})})]})},gl=document.querySelector("#app");async function fl(){if(!gl)throw new Error("Container #app does not exist");if("true"===window.localStorage.DEBUG||"snx"===window.localStorage.DEBUG?.slice(0,3)){const{Wei:e}=await Promise.resolve().then(n.t.bind(n,79929,23)),{ethers:t}=await Promise.all([n.e(6582),n.e(3705)]).then(n.bind(n,13705));function r(e){return e.eq(t.constants.MaxUint256)?"MaxUint256":e.eq(t.constants.MaxInt256)?"MaxInt256":e.abs().gt(1e10)?`wei ${parseFloat(t.utils.formatEther(`${e}`))}`:parseFloat(e.toString())}window.devtoolsFormatters=window.devtoolsFormatters??[],window.devtoolsFormatters.push({header:function(n){return n instanceof t.BigNumber?["div",{style:"color: #6ff"},["span",{},"BigNumber("],["span",{style:"color: #ff3"},r(n)],["span",{}," "],["span",{style:"color: #3f3"},n.toHexString()],["span",{},")"]]:n instanceof e?["div",{style:"color: #6ff"},["span",{},"Wei("],["span",{style:"color: #ff3"},r(t.BigNumber.from(n.toBN()))],["span",{}," "],["span",{style:"color: #3f3"},n.toBN().toHexString()],["span",{},")"]]:null},hasBody:function(){return!1}})}if(window.localStorage.MAGIC_WALLET&&42===`${window.localStorage.MAGIC_WALLET}`.length){const{ethers:o}=await Promise.all([n.e(6582),n.e(3705)]).then(n.bind(n,13705));if(window.$magicWallet=window.localStorage.MAGIC_WALLET,o.utils.isAddress(window.$magicWallet)){const i=new o.providers.JsonRpcProvider("http://127.0.0.1:8545"),s=await i.getNetwork();window.$chainId=s.chainId;const{getMagicProvider:l}=await Promise.resolve().then(n.bind(n,30548)),c=l();window.ethereum=c?new Proxy(c,{get(e,t){switch(t){case"chainId":return`0x${Number(window.$chainId).toString(16)}`;case"isMetaMask":return!0;case"getSigner":return()=>c.getSigner(window.$magicWallet);case"request":return async({method:e,params:t})=>{switch(e){case"eth_accounts":case"eth_requestAccounts":return[window.$magicWallet];case"eth_chainId":return`0x${Number(window.$chainId).toString(16)}`;default:try{const n=await c.send(e,t);return console.log("MAGIC_WALLET",{method:e,params:t,result:n}),n}catch(n){throw console.log("MAGIC_WALLET",{method:e,params:t,error:n}),n}}};default:return e[t]}}}):void 0}}a.createRoot(gl).render((0,M.jsx)(ml,{}))}},9073:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzQwIiBoZWlnaHQ9IjI0MCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDM0MCAyNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZmlsbD0iIzAwRDFGRiIgZD0iTTgyLjE0OCA1NS45MnEtMy41NjQtNC4wODEtOC43ODYtNC4wODNIMi4xMzRjLS42MzIgMC0xLjE1LS4yLTEuNTQtLjYtLjM5Ni0uMzk1LS41OTQtLjg0LS41OTQtMS4zMTl2LTQ4UTAgMS4yMDEuNTk0LjYwMUMuOTg0LjIgMS41MDIgMCAyLjEzNCAwSDc3LjRjMTguOTkyIDAgMzUuMzc3IDcuNzY0IDQ5LjE0OSAyMy4yOGwxOC4yODMgMjIuMzE3LTM1LjYxNCA0My40NHptMTMxLjU0LTMyLjg4UTIzNC4zNDUgMCAyNjMuMDczIDBoNzUuMDI5cS45NDguMDAxIDEuNDI1LjQ3OC40NzEuNDgzLjQ3MyAxLjQ0djQ4YzAgLjQ3OC0uMTYuOTI0LS40NzMgMS4zMThxLS40NzcuNi0xLjQyNS42aC03MS4yMjdjLTMuNDgzIDAtNi40MSAxLjM2NC04Ljc4NyA0LjA4M2wtNTIuNDcxIDYzLjgzOSA1Mi43MDggNjQuMzE2YzIuMzc3IDIuNTY1IDUuMjIxIDMuODQ0IDguNTUgMy44NDRoNzEuMjI3cS45NDggMCAxLjQyNS42Yy4zMTMuNDAxLjQ3My45MjQuNDczIDEuNTU3djQ4YzAgLjQ3OC0uMTYuOTI0LS40NzMgMS4zMThxLS40NzcuNi0xLjQyNS42MDFoLTc1LjAyOXEtMjguNzMuMDAxLTQ5LjE0OS0yMy4yOGwtNDMuNjg0LTUzLjI3OC00My42OTEgNTMuMjc4cS0yMC42NTggMjMuMjgxLTQ5LjM4NSAyMy4yOEgyLjEzNGMtLjYzMiAwLTEuMTEyLS4yMDEtMS40MjUtLjYwMS0uMzItLjQwMS0uNDczLS45MTctLjQ3My0xLjU2M3YtNDhjMC0uNDc4LjE1NC0uOTE4LjQ3My0xLjMxOC4zMTMtLjQwMS43OTMtLjYwMSAxLjQyNS0uNjAxaDcxLjIyOGMzLjMyMyAwIDYuMjUtMS4zNTYgOC43ODYtNC4wODJsNTEuNTItNjIuODc2eiIvPgo8L3N2Zz4K"},33196:()=>{}}]);
//# sourceMappingURL=app.9751e92c.js.map