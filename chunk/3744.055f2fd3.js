"use strict";(globalThis.webpackChunk_snx_v3_liquidity=globalThis.webpackChunk_snx_v3_liquidity||[]).push([[3744],{15617:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_BASE_URL=void 0,t.DEFAULT_BASE_URL="https://safe-client.safe.global"},73376:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteEndpoint=t.getEndpoint=t.postEndpoint=void 0;const s=n(84774);function a(e,t,n,a){return`${e}${(0,s.insertParams)(t,n)}${(0,s.stringifyQuery)(a)}`}t.postEndpoint=function(e,t,n){const i=a(e,t,null==n?void 0:n.path,null==n?void 0:n.query);return(0,s.fetchData)(i,null==n?void 0:n.body)},t.getEndpoint=function(e,t,n,i){if(i)return(0,s.fetchData)(i);const r=a(e,t,null==n?void 0:n.path,null==n?void 0:n.query);return(0,s.fetchData)(r)},t.deleteEndpoint=function(e,t,n){const i=a(e,t,null==n?void 0:n.path);return(0,s.deleteData)(i)}},57374:function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,a)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterDevice=t.unregisterSafe=t.registerDevice=t.getDelegates=t.confirmSafeMessage=t.proposeSafeMessage=t.getSafeMessage=t.getSafeMessages=t.getDecodedData=t.getMasterCopies=t.getSafeApps=t.getChainConfig=t.getChainsConfig=t.proposeTransaction=t.getNonces=t.postSafeGasEstimation=t.getTransactionDetails=t.getTransactionQueue=t.getTransactionHistory=t.getCollectiblesPage=t.getCollectibles=t.getOwnedSafes=t.getFiatCurrencies=t.getBalances=t.getMultisigTransactions=t.getModuleTransactions=t.getIncomingTransfers=t.getSafeInfo=t.setBaseUrl=void 0;const i=n(73376),r=n(15617);a(n(34071),t),a(n(92807),t),a(n(46262),t),a(n(92073),t),a(n(89154),t),a(n(25860),t),a(n(12742),t),a(n(95821),t),a(n(32146),t);let o=r.DEFAULT_BASE_URL;t.setBaseUrl=e=>{o=e},t.getSafeInfo=function(e,t){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/safes/{address}",{path:{chainId:e,address:t}})},t.getIncomingTransfers=function(e,t,n,s){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/safes/{address}/incoming-transfers/",{path:{chainId:e,address:t},query:n},s)},t.getModuleTransactions=function(e,t,n,s){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/safes/{address}/module-transactions/",{path:{chainId:e,address:t},query:n},s)},t.getMultisigTransactions=function(e,t,n,s){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/safes/{address}/multisig-transactions/",{path:{chainId:e,address:t},query:n},s)},t.getBalances=function(e,t,n="usd",s={}){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/safes/{address}/balances/{currency}",{path:{chainId:e,address:t,currency:n},query:s})},t.getFiatCurrencies=function(){return(0,i.getEndpoint)(o,"/v1/balances/supported-fiat-codes")},t.getOwnedSafes=function(e,t){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/owners/{address}/safes",{path:{chainId:e,address:t}})},t.getCollectibles=function(e,t,n={}){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:e,address:t},query:n})},t.getCollectiblesPage=function(e,t,n={},s){return(0,i.getEndpoint)(o,"/v2/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:e,address:t},query:n},s)},t.getTransactionHistory=function(e,t,n={},s){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/transactions/history",{path:{chainId:e,safe_address:t},query:n},s)},t.getTransactionQueue=function(e,t,n={},s){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/transactions/queued",{path:{chainId:e,safe_address:t},query:n},s)},t.getTransactionDetails=function(e,t){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/transactions/{transactionId}",{path:{chainId:e,transactionId:t}})},t.postSafeGasEstimation=function(e,t,n){return(0,i.postEndpoint)(o,"/v2/chains/{chainId}/safes/{safe_address}/multisig-transactions/estimations",{path:{chainId:e,safe_address:t},body:n})},t.getNonces=function(e,t){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/nonces",{path:{chainId:e,safe_address:t}})},t.proposeTransaction=function(e,t,n){return(0,i.postEndpoint)(o,"/v1/chains/{chainId}/transactions/{safe_address}/propose",{path:{chainId:e,safe_address:t},body:n})},t.getChainsConfig=function(e){return(0,i.getEndpoint)(o,"/v1/chains",{query:e})},t.getChainConfig=function(e){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}",{path:{chainId:e}})},t.getSafeApps=function(e,t={}){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/safe-apps",{path:{chainId:e},query:t})},t.getMasterCopies=function(e){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/about/master-copies",{path:{chainId:e}})},t.getDecodedData=function(e,t,n){return(0,i.postEndpoint)(o,"/v1/chains/{chainId}/data-decoder",{path:{chainId:e},body:{data:t,to:n}})},t.getSafeMessages=function(e,t,n){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:e,safe_address:t},query:{}},n)},t.getSafeMessage=function(e,t){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/messages/{message_hash}",{path:{chainId:e,message_hash:t}})},t.proposeSafeMessage=function(e,t,n){return(0,i.postEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:e,safe_address:t},body:n})},t.confirmSafeMessage=function(e,t,n){return(0,i.postEndpoint)(o,"/v1/chains/{chainId}/messages/{message_hash}/signatures",{path:{chainId:e,message_hash:t},body:n})},t.getDelegates=function(e,t={}){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/delegates",{path:{chainId:e},query:t})},t.registerDevice=function(e){return(0,i.postEndpoint)(o,"/v1/register/notifications",{body:e})},t.unregisterSafe=function(e,t,n){return(0,i.deleteEndpoint)(o,"/v1/chains/{chainId}/notifications/devices/{uuid}/safes/{safe_address}",{path:{chainId:e,safe_address:t,uuid:n}})},t.unregisterDevice=function(e,t){return(0,i.deleteEndpoint)(o,"/v1/chains/{chainId}/notifications/devices/{uuid}",{path:{chainId:e,uuid:t}})}},92073:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FEATURES=t.GAS_PRICE_TYPE=t.RPC_AUTHENTICATION=void 0,function(e){e.API_KEY_PATH="API_KEY_PATH",e.NO_AUTHENTICATION="NO_AUTHENTICATION",e.UNKNOWN="UNKNOWN"}(t.RPC_AUTHENTICATION||(t.RPC_AUTHENTICATION={})),function(e){e.ORACLE="ORACLE",e.FIXED="FIXED",e.FIXED_1559="FIXED1559",e.UNKNOWN="UNKNOWN"}(t.GAS_PRICE_TYPE||(t.GAS_PRICE_TYPE={})),function(e){e.ERC721="ERC721",e.SAFE_APPS="SAFE_APPS",e.CONTRACT_INTERACTION="CONTRACT_INTERACTION",e.DOMAIN_LOOKUP="DOMAIN_LOOKUP",e.SPENDING_LIMIT="SPENDING_LIMIT",e.EIP1559="EIP1559",e.SAFE_TX_GAS_OPTIONAL="SAFE_TX_GAS_OPTIONAL",e.TX_SIMULATION="TX_SIMULATION",e.EIP1271="EIP1271"}(t.FEATURES||(t.FEATURES={}))},89154:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TokenType=void 0,function(e){e.ERC20="ERC20",e.ERC721="ERC721",e.NATIVE_TOKEN="NATIVE_TOKEN"}(t.TokenType||(t.TokenType={}))},12742:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},25860:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},32146:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceType=void 0,function(e){e.ANDROID="ANDROID",e.IOS="IOS",e.WEB="WEB"}(t.DeviceType||(t.DeviceType={}))},92807:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SafeAppSocialPlatforms=t.SafeAppFeatures=t.SafeAppAccessPolicyTypes=void 0,function(e){e.NoRestrictions="NO_RESTRICTIONS",e.DomainAllowlist="DOMAIN_ALLOWLIST"}(t.SafeAppAccessPolicyTypes||(t.SafeAppAccessPolicyTypes={})),function(e){e.BATCHED_TRANSACTIONS="BATCHED_TRANSACTIONS"}(t.SafeAppFeatures||(t.SafeAppFeatures={})),function(e){e.TWITTER="TWITTER",e.GITHUB="GITHUB",e.DISCORD="DISCORD"}(t.SafeAppSocialPlatforms||(t.SafeAppSocialPlatforms={}))},34071:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ImplementationVersionState=void 0,function(e){e.UP_TO_DATE="UP_TO_DATE",e.OUTDATED="OUTDATED",e.UNKNOWN="UNKNOWN"}(t.ImplementationVersionState||(t.ImplementationVersionState={}))},95821:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SafeMessageStatus=t.SafeMessageListItemType=void 0,function(e){e.DATE_LABEL="DATE_LABEL",e.MESSAGE="MESSAGE"}(t.SafeMessageListItemType||(t.SafeMessageListItemType={})),function(e){e.NEEDS_CONFIRMATION="NEEDS_CONFIRMATION",e.CONFIRMED="CONFIRMED"}(t.SafeMessageStatus||(t.SafeMessageStatus={}))},46262:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LabelValue=t.DetailedExecutionInfoType=t.TransactionListItemType=t.ConflictType=t.TransactionInfoType=t.SettingsInfoType=t.TransactionTokenType=t.TransferDirection=t.TransactionStatus=t.Operation=void 0,function(e){e[e.CALL=0]="CALL",e[e.DELEGATE=1]="DELEGATE"}(t.Operation||(t.Operation={})),function(e){e.AWAITING_CONFIRMATIONS="AWAITING_CONFIRMATIONS",e.AWAITING_EXECUTION="AWAITING_EXECUTION",e.CANCELLED="CANCELLED",e.FAILED="FAILED",e.SUCCESS="SUCCESS"}(t.TransactionStatus||(t.TransactionStatus={})),function(e){e.INCOMING="INCOMING",e.OUTGOING="OUTGOING",e.UNKNOWN="UNKNOWN"}(t.TransferDirection||(t.TransferDirection={})),function(e){e.ERC20="ERC20",e.ERC721="ERC721",e.NATIVE_COIN="NATIVE_COIN"}(t.TransactionTokenType||(t.TransactionTokenType={})),function(e){e.SET_FALLBACK_HANDLER="SET_FALLBACK_HANDLER",e.ADD_OWNER="ADD_OWNER",e.REMOVE_OWNER="REMOVE_OWNER",e.SWAP_OWNER="SWAP_OWNER",e.CHANGE_THRESHOLD="CHANGE_THRESHOLD",e.CHANGE_IMPLEMENTATION="CHANGE_IMPLEMENTATION",e.ENABLE_MODULE="ENABLE_MODULE",e.DISABLE_MODULE="DISABLE_MODULE",e.SET_GUARD="SET_GUARD",e.DELETE_GUARD="DELETE_GUARD"}(t.SettingsInfoType||(t.SettingsInfoType={})),function(e){e.TRANSFER="Transfer",e.SETTINGS_CHANGE="SettingsChange",e.CUSTOM="Custom",e.CREATION="Creation"}(t.TransactionInfoType||(t.TransactionInfoType={})),function(e){e.NONE="None",e.HAS_NEXT="HasNext",e.END="End"}(t.ConflictType||(t.ConflictType={})),function(e){e.TRANSACTION="TRANSACTION",e.LABEL="LABEL",e.CONFLICT_HEADER="CONFLICT_HEADER",e.DATE_LABEL="DATE_LABEL"}(t.TransactionListItemType||(t.TransactionListItemType={})),function(e){e.MULTISIG="MULTISIG",e.MODULE="MODULE"}(t.DetailedExecutionInfoType||(t.DetailedExecutionInfoType={})),function(e){e.Queued="Queued",e.Next="Next"}(t.LabelValue||(t.LabelValue={}))},84774:function(e,t){var n=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(a,i){function r(e){try{c(s.next(e))}catch(e){i(e)}}function o(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteData=t.fetchData=t.stringifyQuery=t.insertParams=void 0;const s=e=>"object"==typeof e&&null!==e&&"code"in e&&"message"in e;function a(e){return n(this,void 0,void 0,(function*(){let t;try{t=yield e.json()}catch(t){if(e.headers&&"0"!==e.headers.get("content-length"))throw new Error(`Invalid response content: ${e.statusText}`)}if(!e.ok){const n=s(t)?`${t.code}: ${t.message}`:e.statusText;throw new Error(n)}return t}))}t.insertParams=function(e,t){return t?Object.keys(t).reduce(((e,n)=>function(e,t,n){return e.replace(new RegExp(`\\{${t}\\}`,"g"),n)}(e,n,String(t[n]))),e):e},t.stringifyQuery=function(e){if(!e)return"";const t=new URLSearchParams;Object.keys(e).forEach((n=>{null!=e[n]&&t.append(n,String(e[n]))}));const n=t.toString();return n?`?${n}`:""},t.fetchData=function(e,t){return n(this,void 0,void 0,(function*(){let n;null!=t&&(n={method:"POST",body:"string"==typeof t?t:JSON.stringify(t),headers:{"Content-Type":"application/json"}});return a(yield fetch(e,n))}))},t.deleteData=function(e){return n(this,void 0,void 0,(function*(){return a(yield fetch(e,{method:"DELETE"}))}))}},83744:(e,t,n)=>{n.d(t,{default:()=>U});n(61601),n(21027),n(35788),n(86023),n(7935),n(13418),n(9185),n(48813),n(5228),n(46085),n(27886),n(94734),n(73919);const s=e=>e.toString(16).padStart(2,"0"),a=()=>"undefined"!=typeof window?(e=>{const t=new Uint8Array((e||40)/2);return window.crypto.getRandomValues(t),Array.from(t,s).join("")})(10):(new Date).getTime().toString(36);class i{}var r,o;i.makeRequest=(e,t)=>({id:a(),method:e,params:t,env:{sdkVersion:"9.1.0"}}),i.makeResponse=(e,t,n)=>({id:e,success:!0,version:n,data:t}),i.makeErrorResponse=(e,t,n)=>({id:e,success:!1,error:t,version:n}),function(e){e.sendTransactions="sendTransactions",e.rpcCall="rpcCall",e.getChainInfo="getChainInfo",e.getSafeInfo="getSafeInfo",e.getTxBySafeTxHash="getTxBySafeTxHash",e.getSafeBalances="getSafeBalances",e.signMessage="signMessage",e.signTypedMessage="signTypedMessage",e.getEnvironmentInfo="getEnvironmentInfo",e.getOffChainSignature="getOffChainSignature",e.requestAddressBook="requestAddressBook",e.wallet_getPermissions="wallet_getPermissions",e.wallet_requestPermissions="wallet_requestPermissions"}(r||(r={})),function(e){e.requestAddressBook="requestAddressBook"}(o||(o={}));const c=class{constructor(e=null,t=!1){this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer="undefined"==typeof window,this.isValidMessage=({origin:e,data:t,source:n})=>{const s=!t,a=!this.isServer&&n===window.parent,i=void 0!==t.version&&parseInt(t.version.split(".")[0]),r="number"==typeof i&&i>=1;let o=!0;return Array.isArray(this.allowedOrigins)&&(o=void 0!==this.allowedOrigins.find((t=>t.test(e)))),!s&&a&&r&&o},this.logIncomingMessage=e=>{console.info(`Safe Apps SDK v1: A message was received from origin ${e.origin}. `,e.data)},this.onParentMessage=e=>{this.isValidMessage(e)&&(this.debugMode&&this.logIncomingMessage(e),this.handleIncomingMessage(e.data))},this.handleIncomingMessage=e=>{const{id:t}=e,n=this.callbacks.get(t);n&&(n(e),this.callbacks.delete(t))},this.send=(e,t)=>{const n=i.makeRequest(e,t);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(n,"*"),new Promise(((e,t)=>{this.callbacks.set(n.id,(n=>{n.success?e(n):t(new Error(n.error))}))}))},this.allowedOrigins=e,this.debugMode=t,this.isServer||window.addEventListener("message",this.onParentMessage)}},u=e=>"object"==typeof e&&null!=e&&"domain"in e&&"types"in e&&"message"in e;n(57374);class d{constructor(e){this.communicator=e}async getBySafeTxHash(e){if(!e)throw new Error("Invalid safeTxHash");return(await this.communicator.send(r.getTxBySafeTxHash,{safeTxHash:e})).data}async signMessage(e){const t={message:e};return(await this.communicator.send(r.signMessage,t)).data}async signTypedMessage(e){if(!u(e))throw new Error("Invalid typed data");return(await this.communicator.send(r.signTypedMessage,{typedData:e})).data}async send({txs:e,params:t}){if(!e||!e.length)throw new Error("No transactions were passed");const n={txs:e,params:t};return(await this.communicator.send(r.sendTransactions,n)).data}}const l="eth_call",p="eth_gasPrice",f="eth_getLogs",h="eth_getBalance",y="eth_getCode",g="eth_getBlockByHash",m="eth_getBlockByNumber",T="eth_getStorageAt",E="eth_getTransactionByHash",I="eth_getTransactionReceipt",S="eth_getTransactionCount",_="eth_estimateGas",A="safe_setSettings",N={defaultBlockParam:(e="latest")=>e,returnFullTxObjectParam:(e=!1)=>e,blockNumberToHex:e=>Number.isInteger(e)?`0x${e.toString(16)}`:e};class v{constructor(e){this.communicator=e,this.call=this.buildRequest({call:l,formatters:[null,N.defaultBlockParam]}),this.getBalance=this.buildRequest({call:h,formatters:[null,N.defaultBlockParam]}),this.getCode=this.buildRequest({call:y,formatters:[null,N.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:T,formatters:[null,N.blockNumberToHex,N.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:f}),this.getBlockByHash=this.buildRequest({call:g,formatters:[null,N.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:m,formatters:[N.blockNumberToHex,N.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:E}),this.getTransactionReceipt=this.buildRequest({call:I}),this.getTransactionCount=this.buildRequest({call:S,formatters:[null,N.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:p}),this.getEstimateGas=e=>this.buildRequest({call:_})([e]),this.setSafeSettings=this.buildRequest({call:A})}buildRequest(e){const{call:t,formatters:n}=e;return async e=>{n&&Array.isArray(e)&&n.forEach(((t,n)=>{t&&(e[n]=t(e[n]))}));const s={call:t,params:e||[]};return(await this.communicator.send(r.rpcCall,s)).data}}}var O=n(89254),b=n(96620),C=n(48030);const w=4001;class D extends Error{constructor(e,t,n){super(e),this.code=t,this.data=n,Object.setPrototypeOf(this,D.prototype)}}class P{constructor(e){this.communicator=e}async getPermissions(){return(await this.communicator.send(r.wallet_getPermissions,void 0)).data}async requestPermissions(e){if(!this.isPermissionRequestValid(e))throw new D("Permissions request is invalid",w);try{return(await this.communicator.send(r.wallet_requestPermissions,e)).data}catch{throw new D("Permissions rejected",w)}}isPermissionRequestValid(e){return e.every((e=>"object"==typeof e&&Object.keys(e).every((e=>!!Object.values(o).includes(e)))))}}const M=(e,t)=>t.some((t=>t.parentCapability===e)),R=()=>(e,t,n)=>{const s=n.value;return n.value=async function(){const e=new P(this.communicator);let n=await e.getPermissions();if(M(t,n)||(n=await e.requestPermissions([{[t]:{}}])),!M(t,n))throw new D("Permissions rejected",w);return s.apply(this)},n};var L=function(e,t,n,s){var a,i=arguments.length,r=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};class B{constructor(e){this.communicator=e}async getChainInfo(){return(await this.communicator.send(r.getChainInfo,void 0)).data}async getInfo(){return(await this.communicator.send(r.getSafeInfo,void 0)).data}async experimental_getBalances({currency:e="usd"}={}){return(await this.communicator.send(r.getSafeBalances,{currency:e})).data}async check1271Signature(e,t="0x"){const n=await this.getInfo(),s=(0,O.R)({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[e,t]}),a={call:l,params:[{to:n.safeAddress,data:s},"latest"]};try{return"0x1626ba7e"===(await this.communicator.send(r.rpcCall,a)).data.slice(0,10).toLowerCase()}catch(e){return!1}}async check1271SignatureBytes(e,t="0x"){const n=await this.getInfo(),s=(0,O.R)({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[e,t]}),a={call:l,params:[{to:n.safeAddress,data:s},"latest"]};try{return"0x20c13b0b"===(await this.communicator.send(r.rpcCall,a)).data.slice(0,10).toLowerCase()}catch(e){return!1}}calculateMessageHash(e){return(0,b.r)(e)}calculateTypedMessageHash(e){const t="object"==typeof e.domain.chainId?e.domain.chainId.toNumber():Number(e.domain.chainId);let n=e.primaryType;if(!n){const t=Object.values(e.types),s=Object.keys(e.types).filter((e=>t.every((t=>t.every((({type:t})=>t.replace("[","").replace("]","")!==e))))));if(0===s.length||s.length>1)throw new Error("Please specify primaryType");n=s[0]}return(0,C.Jv)({message:e.message,domain:{...e.domain,chainId:t,verifyingContract:e.domain.verifyingContract,salt:e.domain.salt},types:e.types,primaryType:n})}async getOffChainSignature(e){return(await this.communicator.send(r.getOffChainSignature,e)).data}async isMessageSigned(e,t="0x"){let n;if("string"==typeof e&&(n=async()=>{const n=this.calculateMessageHash(e);return await this.isMessageHashSigned(n,t)}),u(e)&&(n=async()=>{const n=this.calculateTypedMessageHash(e);return await this.isMessageHashSigned(n,t)}),n){return await n()}throw new Error("Invalid message type")}async isMessageHashSigned(e,t="0x"){const n=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)];for(const s of n){if(await s(e,t))return!0}return!1}async getEnvironmentInfo(){return(await this.communicator.send(r.getEnvironmentInfo,void 0)).data}async requestAddressBook(){return(await this.communicator.send(r.requestAddressBook,void 0)).data}}L([R()],B.prototype,"requestAddressBook",null);const U=class{constructor(e={}){const{allowedDomains:t=null,debug:n=!1}=e;this.communicator=new c(t,n),this.eth=new v(this.communicator),this.txs=new d(this.communicator),this.safe=new B(this.communicator),this.wallet=new P(this.communicator)}}},89254:(e,t,n)=>{n.d(t,{R:()=>d});var s=n(56578),a=n(56304),i=n(59604),r=n(85351),o=n(48985),c=n(2351);const u="/docs/contract/encodeFunctionData";function d(e){const{args:t}=e,{abi:n,functionName:d}=1===e.abi.length&&e.functionName?.startsWith("0x")?e:function(e){const{abi:t,args:n,functionName:s}=e;let a=t[0];if(s){const e=(0,c.mE)({abi:t,args:n,name:s});if(!e)throw new i.xL(s,{docsPath:u});a=e}if("function"!==a.type)throw new i.xL(void 0,{docsPath:u});return{abi:[a],functionName:(0,r.C)((0,o.t)(a))}}(e),l=n[0],p=d,f="inputs"in l&&l.inputs?(0,a.E)(l.inputs,t??[]):void 0;return(0,s.SM)([p,f??"0x"])}},96620:(e,t,n)=>{n.d(t,{r:()=>c});var s=n(43784);const a="Ethereum Signed Message:\n";var i=n(56578),r=n(99532),o=n(56940);function c(e,t){return(0,s.w)(function(e){const t="string"==typeof e?(0,o.$G)(e):"string"==typeof e.raw?e.raw:(0,o.ci)(e.raw),n=(0,o.$G)(`${a}${(0,r.d)(t)}`);return(0,i.zo)([n,t])}(e),t)}},48030:(e,t,n)=>{n.d(t,{Jv:()=>T});var s=n(56304),a=n(56578),i=n(56940),r=n(43784),o=n(59604),c=n(31688),u=n(57977);class d extends u.G{constructor({primaryType:e,types:t}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(t))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class l extends u.G{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}var p=n(95092),f=n(99532);const h=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,y=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function g({domain:e}){return["string"==typeof e?.name&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},"number"==typeof e?.chainId&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function m(e){if("address"===e||"bool"===e||"string"===e||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new l({type:e})}function T(e){const{domain:t={},message:n,primaryType:s}=e,u={EIP712Domain:g({domain:t}),...e.types};!function(e){const{domain:t,message:n,primaryType:s,types:a}=e,r=(e,t)=>{for(const n of e){const{name:e,type:s}=n,u=t[e],d=s.match(y);if(d&&("number"==typeof u||"bigint"==typeof u)){const[e,t,n]=d;(0,i.eC)(u,{signed:"int"===t,size:Number.parseInt(n)/8})}if("address"===s&&"string"==typeof u&&!(0,p.U)(u))throw new c.b({address:u});const l=s.match(h);if(l){const[e,t]=l;if(t&&(0,f.d)(u)!==Number.parseInt(t))throw new o.KY({expectedSize:Number.parseInt(t),givenSize:(0,f.d)(u)})}const g=a[s];g&&(m(s),r(g,u))}};if(a.EIP712Domain&&t&&r(a.EIP712Domain,t),"EIP712Domain"!==s){if(!a[s])throw new d({primaryType:s,types:a});r(a[s],n)}}({domain:t,message:n,primaryType:s,types:u});const l=["0x1901"];return t&&l.push(function({domain:e,types:t}){return E({data:e,primaryType:"EIP712Domain",types:t})}({domain:t,types:u})),"EIP712Domain"!==s&&l.push(E({data:n,primaryType:s,types:u})),(0,r.w)((0,a.zo)(l))}function E({data:e,primaryType:t,types:n}){const s=I({data:e,primaryType:t,types:n});return(0,r.w)(s)}function I({data:e,primaryType:t,types:n}){const a=[{type:"bytes32"}],i=[S({primaryType:t,types:n})];for(const s of n[t]){const[t,r]=A({types:n,name:s.name,type:s.type,value:e[s.name]});a.push(t),i.push(r)}return(0,s.E)(a,i)}function S({primaryType:e,types:t}){const n=(0,i.NC)(function({primaryType:e,types:t}){let n="";const s=_({primaryType:e,types:t});s.delete(e);const a=[e,...Array.from(s).sort()];for(const e of a)n+=`${e}(${t[e].map((({name:e,type:t})=>`${t} ${e}`)).join(",")})`;return n}({primaryType:e,types:t}));return(0,r.w)(n)}function _({primaryType:e,types:t},n=new Set){const s=e.match(/^\w*/u),a=s?.[0];if(n.has(a)||void 0===t[a])return n;n.add(a);for(const e of t[a])_({primaryType:e.type,types:t},n);return n}function A({types:e,name:t,type:n,value:a}){if(void 0!==e[n])return[{type:"bytes32"},(0,r.w)(I({data:a,primaryType:n,types:e}))];if("bytes"===n){return a=`0x${(a.length%2?"0":"")+a.slice(2)}`,[{type:"bytes32"},(0,r.w)(a)]}if("string"===n)return[{type:"bytes32"},(0,r.w)((0,i.NC)(a))];if(n.lastIndexOf("]")===n.length-1){const i=n.slice(0,n.lastIndexOf("[")),o=a.map((n=>A({name:t,type:i,types:e,value:n})));return[{type:"bytes32"},(0,r.w)((0,s.E)(o.map((([e])=>e)),o.map((([,e])=>e))))]}return[{type:n},a]}}}]);
//# sourceMappingURL=3744.055f2fd3.js.map