{"version":3,"file":"chunk/app.b9d909df.js","mappings":"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","sources":["webpack://@snx-v3/liquidity/../components/Amount/Amount.tsx","webpack://@snx-v3/liquidity/../components/ContractError/ContractError.tsx","webpack://@snx-v3/liquidity/../lib/useWrapEth/useWrapEth.ts","webpack://@snx-v3/liquidity/../components/DepositModal/DepositMachine.ts","webpack://@snx-v3/liquidity/../components/DepositModal/DepositModal.tsx","webpack://@snx-v3/liquidity/../lib/useDeposit/useDeposit.tsx","webpack://@snx-v3/liquidity/../lib/useDepositBaseAndromeda/useDepositBaseAndromeda.tsx","webpack://@snx-v3/liquidity/../components/DepositModal/index.ts","webpack://@snx-v3/liquidity/../components/Multistep/StepIcon.tsx","webpack://@snx-v3/liquidity/../components/Multistep/statusColor.ts","webpack://@snx-v3/liquidity/../components/Multistep/Step.tsx","webpack://@snx-v3/liquidity/../components/Multistep/Multistep.tsx","webpack://@snx-v3/liquidity/../components/Tooltip/Tooltip.tsx","webpack://@snx-v3/liquidity/../components/icons/SUSDCIcon/SUSDCIcon.tsx","webpack://@snx-v3/liquidity/../components/icons/Logo/Logo.tsx","webpack://@snx-v3/liquidity/../components/icons/EthereumIcon/EthereumIcon.tsx","webpack://@snx-v3/liquidity/../components/icons/OptimismIcon/OptimismIcon.tsx","webpack://@snx-v3/liquidity/../components/icons/DollarCircle/DollarCircle.tsx","webpack://@snx-v3/liquidity/../components/icons/ArbitrumIcon/ArbitrumIcon.tsx","webpack://@snx-v3/liquidity/../components/icons/FailedIcon/FailedIcon.tsx","webpack://@snx-v3/liquidity/../components/icons/WalletIcon/WalletIcon.tsx","webpack://@snx-v3/liquidity/../components/icons/LogoIcon/LogoIcon.tsx","webpack://@snx-v3/liquidity/../components/icons/BaseIcon/BaseIcon.tsx","webpack://@snx-v3/liquidity/../components/icons/DiscordIcon/DiscordIcon.tsx","webpack://@snx-v3/liquidity/../components/icons/XIcon/XIcon.tsx","webpack://@snx-v3/liquidity/../components/icons/GithubIcon/GithubIcon.tsx","webpack://@snx-v3/liquidity/../components/icons/WarpcastIcon/WarpcastIcon.tsx","webpack://@snx-v3/liquidity/../components/icons/YoutubeIcon/YoutubeIcon.tsx","webpack://@snx-v3/liquidity/../components/icons/Sparkles/Sparkles.tsx","webpack://@snx-v3/liquidity/../components/icons/SNXChainIcon/SNXChainIcon.tsx","webpack://@snx-v3/liquidity/../lib/ManagePositionContext/ManagePositionContext.tsx","webpack://@snx-v3/liquidity/../lib/calculations/calculations.ts","webpack://@snx-v3/liquidity/../lib/constants/constants.ts","webpack://@snx-v3/liquidity/../lib/contracts/importers/importAccountProxy.js","webpack://@snx-v3/liquidity/../lib/contracts/importers/importAllErrors.js","webpack://@snx-v3/liquidity/../lib/contracts/importers/importClosePosition.js","webpack://@snx-v3/liquidity/../lib/contracts/importers/importCoreProxy.js","webpack://@snx-v3/liquidity/../lib/contracts/importers/importMulticall3.js","webpack://@snx-v3/liquidity/../lib/contracts/importers/importPythERC7412Wrapper.js","webpack://@snx-v3/liquidity/../lib/contracts/importers/importPythFeeds.js","webpack://@snx-v3/liquidity/../lib/contracts/importers/importPythVerfier.js","webpack://@snx-v3/liquidity/../lib/contracts/importers/importUSDProxy.js","webpack://@snx-v3/liquidity/../lib/contracts/useClosePosition/useClosePosition.ts","webpack://@snx-v3/liquidity/../lib/contracts/useCoreProxy/useCoreProxy.ts","webpack://@snx-v3/liquidity/../lib/contracts/importers/importDebtRepayer.js","webpack://@snx-v3/liquidity/../lib/contracts/useDebtRepayer/useDebtRepayer.ts","webpack://@snx-v3/liquidity/../lib/contracts/useSpotMarketProxy/useSpotMarketProxy.ts","webpack://@snx-v3/liquidity/../lib/contracts/importers/importSpotMarketProxy.js","webpack://@snx-v3/liquidity/../lib/contracts/useSystemToken/useSystemToken.ts","webpack://@snx-v3/liquidity/../lib/contracts/importers/importSystemToken.js","webpack://@snx-v3/liquidity/../lib/contracts/useUSDProxy/useUSDProxy.ts","webpack://@snx-v3/liquidity/../lib/format/format.ts","webpack://@snx-v3/liquidity/../lib/format/currency.ts","webpack://@snx-v3/liquidity/../lib/isBaseAndromeda/isBaseAndromeda.ts","webpack://@snx-v3/liquidity/../lib/tsHelpers/contractsHash.ts","webpack://@snx-v3/liquidity/../lib/tsHelpers/notNill.ts","webpack://@snx-v3/liquidity/../lib/tsHelpers/stringToHash.ts","webpack://@snx-v3/liquidity/../lib/txnReducer/txnReducer.ts","webpack://@snx-v3/liquidity/../lib/useAccountCollateral/useAccountCollaterals.ts","webpack://@snx-v3/liquidity/../lib/useAllowance/useAllowance.ts","webpack://@snx-v3/liquidity/../lib/useApprove/useApprove.ts","webpack://@snx-v3/liquidity/../lib/useApr/useApr.ts","webpack://@snx-v3/liquidity/../lib/useBlockchain/magic.ts","webpack://@snx-v3/liquidity/../lib/useBlockchain/useBlockchain.tsx","webpack://@snx-v3/liquidity/../lib/useBorrow/useBorrow.tsx","webpack://@snx-v3/liquidity/../lib/useCollateralPriceUpdates/useCollateralPriceUpdates.ts","webpack://@snx-v3/liquidity/../lib/contracts/importers/importExtras.js","webpack://@snx-v3/liquidity/../lib/useCollateralTypes/useCollateralTypes.ts","webpack://@snx-v3/liquidity/../lib/contracts/importers/importCollateralTokens.js","webpack://@snx-v3/liquidity/../lib/useContractErrorParser/useContractErrorParser.ts","webpack://@snx-v3/liquidity/../lib/contracts/useAllErrors/useAllErrors.ts","webpack://@snx-v3/liquidity/../lib/useEthBalance/useEthBalance.ts","webpack://@snx-v3/liquidity/../lib/useGasOptions/useGasOptions.ts","webpack://@snx-v3/liquidity/../lib/feeSuggestion/math.ts","webpack://@snx-v3/liquidity/../lib/feeSuggestion/utils.ts","webpack://@snx-v3/liquidity/../lib/feeSuggestion/feeSuggestion.ts","webpack://@snx-v3/liquidity/../lib/useGasPrice/useGasPrice.ts","webpack://@snx-v3/liquidity/../lib/useGasSpeed/GasSpeedContext.tsx","webpack://@snx-v3/liquidity/../lib/useGetUSDTokens/useGetUSDTokens.ts","webpack://@snx-v3/liquidity/../lib/useParams/useParams.ts","webpack://@snx-v3/liquidity/../lib/usePools/usePools.ts","webpack://@snx-v3/liquidity/../lib/usePoolsList/usePoolsList.ts","webpack://@snx-v3/liquidity/../lib/useRepay/useRepay.tsx","webpack://@snx-v3/liquidity/../lib/useTokenBalance/useTokenBalance.ts","webpack://@snx-v3/liquidity/../lib/useUndelegate/useUndelegate.tsx","webpack://@snx-v3/liquidity/../lib/useUndelegateBaseAndromeda/useUndelegateBaseAndromeda.tsx","webpack://@snx-v3/liquidity/../lib/withERC7412/withERC7412.ts","webpack://@snx-v3/liquidity/../lib/zod/zod.ts","webpack://@snx-v3/liquidity/./src/components/CRatioBar/CRatioChangeStat.tsx","webpack://@snx-v3/liquidity/./src/components/ChangeStat/ChangeStat.tsx","webpack://@snx-v3/liquidity/./src/components/Manage/LiquidityPositionUpdated.tsx","webpack://@snx-v3/liquidity/./src/components/TransactionSummary/TransactionSummary.tsx","webpack://@snx-v3/liquidity/../lib/theme/theme.ts","webpack://@snx-v3/liquidity/../lib/theme/fonts.tsx","webpack://@snx-v3/liquidity/../components/TermsModal/TermsModal.tsx","webpack://@snx-v3/liquidity/../lib/useLocalStorage/useLocalStorage.ts","webpack://@snx-v3/liquidity/../lib/contracts/useAccountProxy/useAccountProxy.ts","webpack://@snx-v3/liquidity/../lib/contracts/useMulticall3/useMulticall3.ts","webpack://@snx-v3/liquidity/../lib/useAccounts/useAccounts.ts","webpack://@snx-v3/liquidity/./src/layouts/Default/NetworkController.tsx","webpack://@snx-v3/liquidity/./src/components/TokenIcon/TokenIcon.tsx","webpack://@snx-v3/liquidity/../components/NumberInput/NumberInput.tsx","webpack://@snx-v3/liquidity/../components/BorderBox/BorderBox.tsx","webpack://@snx-v3/liquidity/../lib/contracts/useV2xSynthetix/useV2xSynthetix.ts","webpack://@snx-v3/liquidity/../lib/contracts/importers/importV2x.js","webpack://@snx-v3/liquidity/../lib/useV2sUSD/useV2sUSD.ts","webpack://@snx-v3/liquidity/./src/components/MigrateUSD/StepIntro.tsx","webpack://@snx-v3/liquidity/../lib/contracts/useLegacyMarket/useLegacyMarket.ts","webpack://@snx-v3/liquidity/../lib/contracts/importers/importLegacyMarket.js","webpack://@snx-v3/liquidity/../lib/parser/parseTxError.ts","webpack://@snx-v3/liquidity/./src/components/MigrateUSD/StepSuccess.tsx","webpack://@snx-v3/liquidity/./src/components/MigrateUSD/MigrateUSDTransaction.tsx","webpack://@snx-v3/liquidity/../lib/useMigrateUSD/useMigrateUSD.ts","webpack://@snx-v3/liquidity/./src/components/Migration/StepSuccessFinal.tsx","webpack://@snx-v3/liquidity/./src/components/MigrateUSD/MigrateUSDModal.tsx","webpack://@snx-v3/liquidity/./src/components/MigrateUSD/MigrateUSDButton.tsx","webpack://@snx-v3/liquidity/./src/layouts/Default/Header.tsx","webpack://@snx-v3/liquidity/./src/layouts/Default/Footer.tsx","webpack://@snx-v3/liquidity/./src/layouts/Default/DefaultLayout.tsx","webpack://@snx-v3/liquidity/./src/pages/404.tsx","webpack://@snx-v3/liquidity/./src/components/CollateralAlert/CollateralAlert.tsx","webpack://@snx-v3/liquidity/./src/components/CollateralAlert/UnsupportedCollateralAlert.tsx","webpack://@snx-v3/liquidity/../lib/contracts/useSynthTokens/useSynthTokens.ts","webpack://@snx-v3/liquidity/../lib/contracts/importers/importSynthTokens.js","webpack://@snx-v3/liquidity/../lib/contracts/useRewardsDistributors/useRewardsDistributors.ts","webpack://@snx-v3/liquidity/../lib/contracts/importers/importRewardsDistributors.js","webpack://@snx-v3/liquidity/../lib/useRewards/useRewards.ts","webpack://@snx-v3/liquidity/../lib/etherscanLink/etherscanLink.ts","webpack://@snx-v3/liquidity/../components/WithdrawIncrease/WithdrawIncrease.tsx","webpack://@snx-v3/liquidity/./src/components/Rewards/AllRewardsModal.tsx","webpack://@snx-v3/liquidity/./src/components/Rewards/RewardsLoading.tsx","webpack://@snx-v3/liquidity/../lib/formatters/string.ts","webpack://@snx-v3/liquidity/./src/components/Rewards/RewardsRow.tsx","webpack://@snx-v3/liquidity/./src/components/Rewards/Rewards.tsx","webpack://@snx-v3/liquidity/../lib/useClaimAllRewards/useClaimAllRewards.tsx","webpack://@snx-v3/liquidity/./src/components/SynthSkeleton/SynthSkeleton.tsx","webpack://@snx-v3/liquidity/./src/components/Stats/StatBox.tsx","webpack://@snx-v3/liquidity/../lib/useCollateralPrices/useCollateralPrices.ts","webpack://@snx-v3/liquidity/../lib/tsHelpers/keyBy.ts","webpack://@snx-v3/liquidity/../lib/useLiquidityPosition/useLiquidityPosition.ts","webpack://@snx-v3/liquidity/../lib/useLiquidityPositions/useLiquidityPositions.ts","webpack://@snx-v3/liquidity/./src/components/Stats/StatsList.tsx","webpack://@snx-v3/liquidity/./src/utils/assets.ts","webpack://@snx-v3/liquidity/./src/utils/positions.ts","webpack://@snx-v3/liquidity/../lib/useOraclePrice/useOraclePrice.ts","webpack://@snx-v3/liquidity/../lib/contracts/importers/importOracleManagerProxy.js","webpack://@snx-v3/liquidity/../lib/useTokenPrice/useTokenPrice.ts","webpack://@snx-v3/liquidity/../lib/useAccountCollateralUnlockDate/useAccountCollateralUnlockDate.ts","webpack://@snx-v3/liquidity/../lib/useWithdrawTimer/useWithdrawTimer.ts","webpack://@snx-v3/liquidity/./src/components/CRatioBar/CRatioBar.utils.ts","webpack://@snx-v3/liquidity/./src/components/CRatioBar/CRatioAmount.tsx","webpack://@snx-v3/liquidity/./src/components/CRatioBar/CRatioBadge.tsx","webpack://@snx-v3/liquidity/./src/components/Positions/PositionsTable/DebtAmount.tsx","webpack://@snx-v3/liquidity/./src/components/Positions/PositionsTable/PositionsRow.tsx","webpack://@snx-v3/liquidity/./src/components/Positions/PositionsTable/PositionsRowLoading.tsx","webpack://@snx-v3/liquidity/./src/components/Positions/PositionsTable/PositionsTable.tsx","webpack://@snx-v3/liquidity/./src/components/Positions/PositionsTable/PositionTableHeader.tsx","webpack://@snx-v3/liquidity/./src/components/Positions/PositionsTable/PositionNotConnected.tsx","webpack://@snx-v3/liquidity/./src/components/Positions/PositionsTable/PositionEmpty.tsx","webpack://@snx-v3/liquidity/./src/components/Positions/PositionsTable/TableDivider.tsx","webpack://@snx-v3/liquidity/./src/components/Positions/PositionsList.tsx","webpack://@snx-v3/liquidity/../lib/validatePosition/validatePosition.ts","webpack://@snx-v3/liquidity/./src/components/Borrow/Borrow.tsx","webpack://@snx-v3/liquidity/../lib/useTransferableSynthetix/useTransferableSynthetix.ts","webpack://@snx-v3/liquidity/../lib/formatters/number.ts","webpack://@snx-v3/liquidity/./src/components/Deposit/Deposit.tsx","webpack://@snx-v3/liquidity/./src/components/Withdraw/Withdraw.tsx","webpack://@snx-v3/liquidity/./src/components/Manage/actions.tsx","webpack://@snx-v3/liquidity/./src/components/Manage/ManageActions.tsx","webpack://@snx-v3/liquidity/./src/components/CRatioBar/LineWithText.tsx","webpack://@snx-v3/liquidity/./src/components/CRatioBar/CRatioBar.tsx","webpack://@snx-v3/liquidity/./src/components/Manage/CollateralStats.tsx","webpack://@snx-v3/liquidity/./src/components/Manage/DebtStats.tsx","webpack://@snx-v3/liquidity/./src/components/Manage/PnlStats.tsx","webpack://@snx-v3/liquidity/./src/components/Manage/ManageStats.tsx","webpack://@snx-v3/liquidity/./src/components/Migration/StepIntro.tsx","webpack://@snx-v3/liquidity/./src/components/Migration/StepExplain.tsx","webpack://@snx-v3/liquidity/../lib/useV2Position/useV2Position.ts","webpack://@snx-v3/liquidity/./src/components/Migration/StepSuccess.tsx","webpack://@snx-v3/liquidity/./src/components/Migration/StepSummary.tsx","webpack://@snx-v3/liquidity/../lib/useMigrate/useMigrate.ts","webpack://@snx-v3/liquidity/../lib/useRates/useRates.ts","webpack://@snx-v3/liquidity/./src/components/Migration/MigrationDialog.tsx","webpack://@snx-v3/liquidity/./src/components/Migration/MigrationBanner.tsx","webpack://@snx-v3/liquidity/./src/components/InitialDeposit/InitialDeposit.tsx","webpack://@snx-v3/liquidity/./src/components/Manage/PositionTitle.tsx","webpack://@snx-v3/liquidity/./src/components/Manage/NoPosition.tsx","webpack://@snx-v3/liquidity/./src/components/Repay/Repay.tsx","webpack://@snx-v3/liquidity/../lib/useClearDebt/useClearDebt.tsx","webpack://@snx-v3/liquidity/./src/components/Repay/RepayAllDebt.tsx","webpack://@snx-v3/liquidity/../lib/usePoolConfiguration/usePoolConfiguration.ts","webpack://@snx-v3/liquidity/./src/components/Undelegate/Undelegate.tsx","webpack://@snx-v3/liquidity/../lib/useVaultsData/useVaultsData.ts","webpack://@snx-v3/liquidity/./src/components/Pools/CollateralSection.tsx","webpack://@snx-v3/liquidity/./src/components/Pools/PoolCards/Specifics.tsx","webpack://@snx-v3/liquidity/./src/components/Pools/PoolCards/PoolRow.tsx","webpack://@snx-v3/liquidity/./src/components/Pools/PoolCards/PoolCard.tsx","webpack://@snx-v3/liquidity/./src/components/Pools/ChainFilter.tsx","webpack://@snx-v3/liquidity/./src/components/Pools/CollateralFilter.tsx","webpack://@snx-v3/liquidity/./src/components/Pools/PoolCards/TorosPoolCard.tsx","webpack://@snx-v3/liquidity/./src/components/Pools/PoolCards/PoolCardsLoading.tsx","webpack://@snx-v3/liquidity/./src/components/Pools/Balloon.tsx","webpack://@snx-v3/liquidity/./src/components/Pools/PoolsList.tsx","webpack://@snx-v3/liquidity/./src/components/Pools/PoolHeader.tsx","webpack://@snx-v3/liquidity/./src/components/Claim/Claim.tsx","webpack://@snx-v3/liquidity/./src/components/WatchAccountBanner/WatchAccountBanner.tsx","webpack://@snx-v3/liquidity/./src/pages/Dashboard.tsx","webpack://@snx-v3/liquidity/./src/pages/Home.tsx","webpack://@snx-v3/liquidity/../lib/usePoolData/usePoolData.tsx","webpack://@snx-v3/liquidity/../lib/contracts/usePythFeeds/usePythFeeds.ts","webpack://@snx-v3/liquidity/../lib/contracts/usePythVerifier/usePythVerifier.ts","webpack://@snx-v3/liquidity/./src/components/ClosePosition/fetchPositionDebt.ts","webpack://@snx-v3/liquidity/./src/components/ClosePosition/fetchPositionDebtWithPriceUpdate.ts","webpack://@snx-v3/liquidity/./src/components/ClosePosition/fetchPriceUpdateTxn.ts","webpack://@snx-v3/liquidity/./src/components/ClosePosition/fetchAccountCollateral.ts","webpack://@snx-v3/liquidity/./src/components/ClosePosition/fetchAccountCollateralWithPriceUpdate.ts","webpack://@snx-v3/liquidity/./src/components/ClosePosition/useErrorParser.ts","webpack://@snx-v3/liquidity/./src/components/ClosePosition/useSynthetix.ts","webpack://@snx-v3/liquidity/./src/components/ClosePosition/usePriceUpdateTxn.ts","webpack://@snx-v3/liquidity/./src/components/ClosePosition/useAccountCollateral.ts","webpack://@snx-v3/liquidity/./src/components/ClosePosition/usePositionDebt.ts","webpack://@snx-v3/liquidity/./src/components/ClosePosition/ClosePositionOneStep.tsx","webpack://@snx-v3/liquidity/./src/components/ClosePosition/ClosePositionTransactions.tsx","webpack://@snx-v3/liquidity/./src/components/ClosePosition/useAccountAvailableCollateral.ts","webpack://@snx-v3/liquidity/./src/components/ClosePosition/fetchAccountAvailableCollateral.ts","webpack://@snx-v3/liquidity/./src/components/ClosePosition/ClosePosition.tsx","webpack://@snx-v3/liquidity/./src/components/Manage/ManageLoading.tsx","webpack://@snx-v3/liquidity/./src/pages/Manage.tsx","webpack://@snx-v3/liquidity/../components/HomeLink/HomeLink.tsx","webpack://@snx-v3/liquidity/./src/pages/Pool.tsx","webpack://@snx-v3/liquidity/./src/pages/Pools.tsx","webpack://@snx-v3/liquidity/../lib/useManagePermissions/useManagePermissions.ts","webpack://@snx-v3/liquidity/./src/components/Address/Address.tsx","webpack://@snx-v3/liquidity/./src/components/Permissions/AccountPermissions.ts","webpack://@snx-v3/liquidity/../lib/useAccountInfo/useAccountPermissions.ts","webpack://@snx-v3/liquidity/./src/components/Permissions/PermissionsInfo.tsx","webpack://@snx-v3/liquidity/./src/components/Permissions/PermissionModal.tsx","webpack://@snx-v3/liquidity/./src/components/Permissions/PermissionRow.tsx","webpack://@snx-v3/liquidity/./src/components/Permissions/TransferOwnershipModal.tsx","webpack://@snx-v3/liquidity/../lib/useTransferAccountId/useTransferAccountId.ts","webpack://@snx-v3/liquidity/./src/components/Permissions/PermissionTableLoading.tsx","webpack://@snx-v3/liquidity/./src/components/Permissions/PermissionTable.tsx","webpack://@snx-v3/liquidity/./src/components/Permissions/DelegationIcon.tsx","webpack://@snx-v3/liquidity/./src/components/Permissions/Permissions.tsx","webpack://@snx-v3/liquidity/./src/pages/Account/Settings.tsx","webpack://@snx-v3/liquidity/./src/Router.tsx","webpack://@snx-v3/liquidity/./src/utils/onboard.ts","webpack://@snx-v3/liquidity/./src/App.tsx","webpack://@snx-v3/liquidity/./src/utils/theme.ts","webpack://@snx-v3/liquidity/./src/index.tsx","webpack://@snx-v3/liquidity/../../tools/safe-import/index.js","webpack://@snx-v3/liquidity/../../tools/safe-import/safeLazy.js"],"sourcesContent":["import { useMemo } from 'react';\nimport { currency } from '@snx-v3/format';\nimport Wei, { wei } from '@synthetixio/wei';\nimport { constants } from 'ethers';\nimport { Tooltip } from '@snx-v3/Tooltip';\n\nexport function Amount({\n  value,\n  prefix = '',\n  suffix = '',\n  'data-cy': testid,\n  showTooltip,\n}: {\n  prefix?: string;\n  value?: Wei;\n  suffix?: string;\n  'data-cy'?: string;\n  showTooltip?: boolean;\n}) {\n  const { formattedValue, preciseValue, isMaxUint } = useMemo(() => {\n    if (!value) {\n      return { formattedValue: '-', preciseValue: '-' };\n    }\n\n    const formattedValue = value.eq(0) ? '0.00' : currency(value);\n    const cleanNumber = wei(formattedValue.replaceAll(',', ''));\n\n    return {\n      isMaxUint: wei(constants.MaxInt256).lte(value),\n      formattedValue,\n      preciseValue: value.eq(cleanNumber) ? formattedValue : value.toString(),\n    };\n  }, [value]);\n\n  return (\n    <Tooltip\n      label={\n        <>\n          {isMaxUint ? (\n            'You cannot borrow sUSD against this collateral'\n          ) : (\n            <>\n              {prefix}\n              {preciseValue}\n              {suffix}\n            </>\n          )}\n        </>\n      }\n      isDisabled={formattedValue === preciseValue || !showTooltip}\n    >\n      <span data-cy={testid}>\n        {prefix}\n        {isMaxUint ? 'Infinite' : formattedValue}\n        {!isMaxUint && suffix}\n      </span>\n    </Tooltip>\n  );\n}\n","import React from 'react';\nimport { Button, Collapse, Text } from '@chakra-ui/react';\nimport format from 'date-fns/format';\nimport { ContractErrorType } from '@snx-v3/useContractErrorParser';\n\nconst defaultOpen = window?.localStorage?.CONTRACT_ERROR_OPEN === 'true';\n\nexport function ContractError({ contractError }: { contractError: ContractErrorType }) {\n  const [isOpen, setIsOpen] = React.useState(defaultOpen);\n\n  return (\n    <>\n      {!isOpen ? (\n        <Button\n          variant=\"link\"\n          onClick={() => setIsOpen(true)}\n          color=\"inherit\"\n          fontWeight=\"normal\"\n          fontStyle=\"italic\"\n        >\n          details...\n        </Button>\n      ) : null}\n      <Collapse in={isOpen} animateOpacity>\n        <Text fontStyle=\"italic\" fontSize=\"0.8em\">\n          {contractError.name}\n        </Text>\n        <Text whiteSpace=\"pre\" fontSize=\"0.8em\" fontStyle=\"italic\" pl=\"0.5em\">\n          {Object.entries(contractError.args)\n            .map(\n              ([key, val]) =>\n                `${key}: ${val instanceof Date ? format(val, 'yyyy-MM-dd HH:mm:ss') : val}`\n            )\n            .join('\\n')}\n        </Text>\n      </Collapse>\n    </>\n  );\n}\n","import { useSigner } from '@snx-v3/useBlockchain';\nimport { useCollateralType } from '@snx-v3/useCollateralTypes';\nimport { useEthBalance } from '@snx-v3/useEthBalance';\nimport { useTokenBalance } from '@snx-v3/useTokenBalance';\nimport { Contract } from 'ethers';\nimport { useMutation } from '@tanstack/react-query';\nimport Wei from '@synthetixio/wei';\nimport { useCallback } from 'react';\n\nconst minimalWETHABI = ['function deposit() payable', 'function withdraw(uint256 wad)'];\n\nexport const useWrapEth = () => {\n  const signer = useSigner();\n\n  const { data: ethCollateral } = useCollateralType('WETH');\n  const { data: ethBalance, refetch: refetchETHBalance } = useEthBalance();\n  const { data: wethBalance, refetch: refetchWETHBalance } = useTokenBalance(\n    ethCollateral?.tokenAddress\n  );\n\n  const { mutateAsync, isPending } = useMutation({\n    mutationFn: async (amount: Wei) => {\n      if (!ethCollateral || !signer) return;\n      const contract = new Contract(ethCollateral?.tokenAddress, minimalWETHABI, signer);\n      const txn = await contract.deposit({ value: amount.toBN() });\n      await txn.wait();\n    },\n  });\n\n  const exec = useCallback(\n    async (amount: Wei) => {\n      if (!ethBalance) return;\n      if (ethBalance.lt(amount)) {\n        throw new Error('Amount exceeds balance');\n      }\n      await mutateAsync(amount);\n      refetchETHBalance();\n      refetchWETHBalance();\n    },\n    [ethBalance, mutateAsync, refetchETHBalance, refetchWETHBalance]\n  );\n\n  return {\n    exec,\n    isLoading: isPending,\n    wethBalance,\n    ethBalance,\n  };\n};\n\nexport const useUnWrapEth = () => {\n  const signer = useSigner();\n\n  const { data: ethCollateral } = useCollateralType('WETH');\n  const { data: ethBalance, refetch: refetchETHBalance } = useEthBalance();\n  const { data: wethBalance, refetch: refetchWETHBalance } = useTokenBalance(\n    ethCollateral?.tokenAddress\n  );\n\n  const { mutateAsync, isPending } = useMutation({\n    mutationFn: async (amount: Wei) => {\n      if (!ethCollateral || !signer) return;\n      const contract = new Contract(ethCollateral?.tokenAddress, minimalWETHABI, signer);\n      const txn = await contract.withdraw(amount.toBN());\n      await txn.wait();\n    },\n  });\n\n  const exec = useCallback(\n    async (amount: Wei) => {\n      if (!wethBalance) return;\n      if (wethBalance.lt(amount)) return;\n      await mutateAsync(amount);\n      await Promise.all([refetchETHBalance(), refetchWETHBalance()]);\n    },\n    [mutateAsync, refetchETHBalance, refetchWETHBalance, wethBalance]\n  );\n\n  return {\n    exec,\n    isLoading: isPending,\n    wethBalance,\n    ethBalance,\n  };\n};\n","import { Wei, wei } from '@synthetixio/wei';\nimport { createMachine, assign } from 'xstate';\n\nexport const Events = {\n  SET_REQUIRE_APPROVAL: 'SET_REQUIRE_APPROVAL',\n  SET_WRAP_AMOUNT: 'SET_WRAP_AMOUNT',\n  SET_INFINITE_APPROVAL: 'SET_INFINITE_APPROVAL',\n  RETRY: 'RETRY',\n  RUN: 'RUN',\n  SUCCESS: 'SUCCESS',\n  FAILURE: 'FAILURE',\n  RESET: 'RESET',\n} as const;\n\nexport const State = {\n  idle: 'idle',\n  wrap: 'wrap',\n  approve: 'approve',\n  deposit: 'deposit',\n  failed: 'failed',\n  success: 'success',\n} as const;\n\nconst FailedSteps = {\n  [State.approve]: State.approve,\n  [State.wrap]: State.wrap,\n  [State.deposit]: State.deposit,\n} as const;\n\nexport const ServiceNames = {\n  wrapEth: 'wrapEth',\n  approveWETH: 'approveWETH',\n  executeDeposit: 'executeDeposit',\n} as const;\n\ntype Context = {\n  error: {\n    error: Error;\n    step: keyof typeof FailedSteps;\n  } | null;\n  requireApproval: boolean;\n  wrapAmount: Wei;\n  infiniteApproval: boolean;\n};\n\ntype EventNamesType = typeof Events;\n\ntype DepositEvents =\n  | { type: EventNamesType['SET_REQUIRE_APPROVAL']; requireApproval: boolean }\n  | { type: EventNamesType['SET_WRAP_AMOUNT']; wrapAmount: Wei }\n  | { type: EventNamesType['SET_INFINITE_APPROVAL']; infiniteApproval: boolean }\n  | { type: EventNamesType['RETRY'] }\n  | { type: EventNamesType['RUN'] }\n  | { type: EventNamesType['SUCCESS'] }\n  | { type: EventNamesType['FAILURE'] }\n  | { type: EventNamesType['RESET'] };\n\ntype StateType = typeof State;\ntype MachineState =\n  | {\n      value: StateType['idle'];\n      context: Context & { error: null };\n    }\n  | {\n      value: StateType['wrap'];\n      context: Context & { error: null };\n    }\n  | {\n      value: StateType['approve'];\n      context: Context & { error: null };\n    }\n  | {\n      value: StateType['deposit'];\n      context: Context & { error: null };\n    }\n  | {\n      value: StateType['failed'];\n      context: Context & { error: { error: Error; step: keyof typeof FailedSteps } };\n    }\n  | {\n      value: StateType['success'];\n      context: Context & {\n        error: null;\n      };\n    };\n\nconst initialContext = {\n  wrapAmount: wei(0),\n  error: null,\n  requireApproval: false,\n  infiniteApproval: false,\n};\n\nexport const DepositMachine = createMachine<Context, DepositEvents, MachineState>({\n  id: 'DepositMachine',\n  initial: State.idle,\n  predictableActionArguments: true,\n  context: initialContext,\n  on: {\n    [Events.RUN]: {\n      target: State.deposit,\n      actions: assign({\n        wrapAmount: (_) => initialContext.wrapAmount,\n        error: (_) => initialContext.error,\n        requireApproval: (_) => initialContext.requireApproval,\n        infiniteApproval: (_) => initialContext.infiniteApproval,\n      }),\n    },\n    [Events.SET_REQUIRE_APPROVAL]: {\n      actions: assign({ requireApproval: (_context, event) => event.requireApproval }),\n    },\n    [Events.SET_WRAP_AMOUNT]: {\n      actions: assign({ wrapAmount: (_context, event) => event.wrapAmount }),\n    },\n    [Events.SET_INFINITE_APPROVAL]: {\n      actions: assign({ infiniteApproval: (_context, event) => event.infiniteApproval }),\n    },\n  },\n  states: {\n    [State.idle]: {\n      on: {\n        [Events.RUN]: [\n          { target: State.wrap, cond: (context) => context.wrapAmount.gt(0) },\n          { target: State.approve, cond: (context) => context.requireApproval },\n          { target: State.deposit },\n        ],\n      },\n    },\n    [State.wrap]: {\n      invoke: {\n        src: ServiceNames.wrapEth,\n        onError: {\n          target: State.failed,\n          actions: assign({\n            error: (_context, event) => ({ error: event.data, step: FailedSteps.wrap }),\n          }),\n        },\n        onDone: [\n          { target: State.approve, cond: (context) => context.requireApproval },\n          { target: State.deposit },\n        ],\n      },\n    },\n    [State.approve]: {\n      invoke: {\n        src: ServiceNames.approveWETH,\n        onDone: {\n          target: State.deposit,\n        },\n        onError: {\n          target: State.failed,\n          actions: assign({\n            error: (_context, event) => ({ error: event.data, step: FailedSteps.approve }),\n          }),\n        },\n      },\n    },\n    [State.deposit]: {\n      invoke: {\n        src: ServiceNames.executeDeposit,\n        onDone: {\n          target: State.success,\n        },\n        onError: {\n          target: State.failed,\n          actions: assign({\n            error: (_context, event) => ({ error: event.data, step: FailedSteps.deposit }),\n          }),\n        },\n      },\n    },\n    [State.failed]: {\n      on: {\n        [Events.RETRY]: [\n          {\n            target: State.approve,\n            cond: (c) => c.error?.step === FailedSteps.approve,\n            actions: assign({ error: (_) => null }),\n          },\n          {\n            target: State.wrap,\n            cond: (c) => c.error?.step === FailedSteps.wrap,\n            actions: assign({ error: (_) => null }),\n          },\n          {\n            target: State.deposit,\n            cond: (c) => c.error?.step === FailedSteps.deposit,\n            actions: assign({ error: (_) => null }),\n          },\n        ],\n      },\n    },\n    [State.success]: {},\n  },\n});\n","import { ArrowBackIcon } from '@chakra-ui/icons';\nimport { Button, Divider, Link, Text, useToast } from '@chakra-ui/react';\nimport { Amount } from '@snx-v3/Amount';\nimport { ZEROWEI } from '@snx-v3/constants';\nimport { ContractError } from '@snx-v3/ContractError';\nimport { currency } from '@snx-v3/format';\nimport { getSpotMarketId, isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { ManagePositionContext } from '@snx-v3/ManagePositionContext';\nimport { Multistep } from '@snx-v3/Multistep';\nimport { useApprove } from '@snx-v3/useApprove';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { CollateralType, useCollateralType } from '@snx-v3/useCollateralTypes';\nimport { useContractErrorParser } from '@snx-v3/useContractErrorParser';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { useDeposit } from '@snx-v3/useDeposit';\nimport { useDepositBaseAndromeda } from '@snx-v3/useDepositBaseAndromeda';\nimport { useGetWrapperToken } from '@snx-v3/useGetUSDTokens';\nimport { LiquidityPosition } from '@snx-v3/useLiquidityPosition';\nimport { useParams } from '@snx-v3/useParams';\nimport { usePool } from '@snx-v3/usePools';\nimport { useSpotMarketProxy } from '@snx-v3/useSpotMarketProxy';\nimport { useWrapEth } from '@snx-v3/useWrapEth';\nimport { Wei, wei } from '@synthetixio/wei';\nimport { useQueryClient } from '@tanstack/react-query';\nimport { useMachine } from '@xstate/react';\nimport { utils } from 'ethers';\nimport { FC, ReactNode, useCallback, useContext, useEffect, useMemo, useState } from 'react';\nimport { generatePath, useLocation, useNavigate } from 'react-router-dom';\nimport type { StateFrom } from 'xstate';\nimport { ChangeStat } from '../../ui/src/components/ChangeStat';\nimport { CRatioChangeStat } from '../../ui/src/components/CRatioBar/CRatioChangeStat';\nimport { LiquidityPositionUpdated } from '../../ui/src/components/Manage/LiquidityPositionUpdated';\nimport { TransactionSummary } from '../../ui/src/components/TransactionSummary/TransactionSummary';\nimport { DepositMachine, Events, ServiceNames, State } from './DepositMachine';\n\nexport const DepositModalUi: FC<{\n  collateralChange: Wei;\n  isOpen: boolean;\n  onClose: () => void;\n  collateralType?: CollateralType;\n  state: StateFrom<typeof DepositMachine>;\n  setInfiniteApproval: (x: boolean) => void;\n  onSubmit: () => void;\n  availableCollateral: Wei;\n  poolName: string;\n  title?: string;\n  txSummary?: ReactNode;\n}> = ({\n  collateralChange,\n  isOpen,\n  onClose,\n  collateralType,\n  setInfiniteApproval,\n  onSubmit,\n  state,\n  availableCollateral,\n  poolName,\n  title = 'Manage Collateral',\n  txSummary,\n}) => {\n  const wrapAmount = state.context.wrapAmount;\n  const infiniteApproval = state.context.infiniteApproval;\n  const requireApproval = state.context.requireApproval;\n  const error = state.context.error;\n  const isProcessing =\n    state.matches(State.approve) || state.matches(State.deposit) || state.matches(State.wrap);\n\n  const isWETH = collateralType?.symbol === 'WETH';\n\n  const stepNumbers = {\n    wrap: isWETH ? 1 : 0,\n    approve: isWETH ? 2 : 1,\n    deposit: isWETH ? 3 : 2,\n  };\n\n  if (isOpen) {\n    if (state.matches(State.success)) {\n      return (\n        <LiquidityPositionUpdated\n          onClose={onSubmit}\n          title=\"Collateral successfully Updated\"\n          subline={\n            <>\n              Your <b>Collateral</b> has been updated, read more about it in the{' '}\n              <Link\n                href=\"https://docs.synthetix.io/v/synthetix-v3-user-documentation\"\n                target=\"_blank\"\n                color=\"cyan.500\"\n              >\n                Synthetix V3 Documentation\n              </Link>\n            </>\n          }\n          alertText={\n            <>\n              <b>Collateral</b> successfully Updated\n            </>\n          }\n          summary={txSummary}\n        />\n      );\n    }\n\n    return (\n      <div data-cy=\"deposit multistep\">\n        <Text color=\"gray.50\" fontSize=\"20px\" fontWeight={700}>\n          <ArrowBackIcon cursor=\"pointer\" onClick={onClose} mr={2} />\n          {title}\n        </Text>\n        <Divider my={4} />\n        {isWETH ? (\n          <Multistep\n            step={stepNumbers.wrap}\n            title=\"Wrap\"\n            subtitle={\n              wrapAmount.eq(0) ? (\n                <Text as=\"div\">\n                  <Amount value={collateralChange} suffix={` ${collateralType?.symbol}`} /> from\n                  balance will be used.\n                </Text>\n              ) : (\n                <Text as=\"div\">\n                  You must wrap additional <Amount value={wrapAmount} suffix=\" ETH\" /> before\n                  depositing.\n                </Text>\n              )\n            }\n            status={{\n              failed: error?.step === State.wrap,\n              disabled: collateralType?.symbol !== 'WETH',\n              success: wrapAmount.eq(0) || state.matches(State.success),\n              loading: state.matches(State.wrap) && !error,\n            }}\n          />\n        ) : null}\n\n        <Multistep\n          step={stepNumbers.approve}\n          title={`Approve ${collateralType?.symbol} transfer`}\n          status={{\n            failed: error?.step === State.approve,\n            success: !requireApproval || state.matches(State.success),\n            loading: state.matches(State.approve) && !error,\n          }}\n          checkboxLabel={\n            requireApproval\n              ? `Approve unlimited ${collateralType?.symbol} transfers to Synthetix.`\n              : undefined\n          }\n          checkboxProps={{\n            isChecked: infiniteApproval,\n            onChange: (e) => setInfiniteApproval(e.target.checked),\n          }}\n        />\n\n        <Multistep\n          step={stepNumbers.deposit}\n          title={`Deposit & Lock ${collateralType?.symbol}`}\n          subtitle={\n            <>\n              {state.matches(State.success) ? (\n                <Text>\n                  <Amount value={collateralChange} suffix={` ${collateralType?.symbol}`} />{' '}\n                  deposited & locked in {poolName}.\n                </Text>\n              ) : (\n                <>\n                  {availableCollateral && availableCollateral.gt(wei(0)) ? (\n                    <>\n                      {availableCollateral.gte(collateralChange) ? (\n                        <Text>\n                          <Amount\n                            prefix=\"This will deposit and lock \"\n                            value={collateralChange}\n                            suffix={` ${collateralType?.symbol} to ${poolName}.`}\n                          />\n                        </Text>\n                      ) : (\n                        <>\n                          <Text>\n                            <Amount\n                              prefix=\"This will deposit and lock \"\n                              value={availableCollateral}\n                              suffix={` ${collateralType?.symbol} to ${poolName}.`}\n                            />\n                          </Text>\n                          <Text>\n                            <Amount\n                              prefix=\"An additional \"\n                              value={collateralChange.sub(availableCollateral)}\n                              suffix={` ${collateralType?.symbol} will be deposited and locked from your wallet.`}\n                            />\n                          </Text>\n                        </>\n                      )}\n                    </>\n                  ) : (\n                    <Text>\n                      <Amount\n                        prefix=\"This will deposit and lock \"\n                        value={collateralChange}\n                        suffix={` ${collateralType?.symbol} to ${poolName}.`}\n                      />\n                    </Text>\n                  )}\n                </>\n              )}\n            </>\n          }\n          status={{\n            failed: error?.step === State.deposit,\n            disabled: state.matches(State.success) && requireApproval,\n            success: state.matches(State.success),\n            loading: state.matches(State.deposit) && !error,\n          }}\n        />\n        <Button\n          isDisabled={isProcessing}\n          onClick={onSubmit}\n          width=\"100%\"\n          mt=\"6\"\n          data-cy=\"deposit confirm button\"\n        >\n          {(() => {\n            switch (true) {\n              case Boolean(error):\n                return 'Retry';\n              case isProcessing:\n                return 'Processing...';\n              case state.matches(State.success):\n                return 'Continue';\n              default:\n                return 'Execute Transaction';\n            }\n          })()}\n        </Button>\n      </div>\n    );\n  }\n};\n\nexport type DepositModalProps = FC<{\n  isOpen: boolean;\n  onClose: () => void;\n  title?: string;\n  liquidityPosition?: LiquidityPosition;\n}>;\n\nexport const DepositModal: DepositModalProps = ({ onClose, isOpen, title, liquidityPosition }) => {\n  const { collateralChange, setCollateralChange } = useContext(ManagePositionContext);\n  const currentCollateral = liquidityPosition?.collateralAmount ?? ZEROWEI;\n  const availableCollateral = liquidityPosition?.accountCollateral.availableCollateral ?? ZEROWEI;\n\n  const [txSummary, setTxSummary] = useState({\n    currentCollateral: ZEROWEI,\n    collateralChange: ZEROWEI,\n    currentDebt: ZEROWEI,\n  });\n\n  const navigate = useNavigate();\n  const { collateralSymbol, poolId, accountId } = useParams();\n  const queryClient = useQueryClient();\n  const { network } = useNetwork();\n\n  const { data: CoreProxy } = useCoreProxy();\n  const { data: SpotMarketProxy } = useSpotMarketProxy();\n  const { data: collateralType } = useCollateralType(collateralSymbol);\n\n  const isBase = isBaseAndromeda(network?.id, network?.preset);\n  const { data: wrapperToken } = useGetWrapperToken(getSpotMarketId(collateralSymbol));\n\n  const collateralAddress = isBaseAndromeda(network?.id, network?.preset)\n    ? wrapperToken\n    : collateralType?.tokenAddress;\n\n  const collateralNeeded = collateralChange.sub(availableCollateral);\n\n  const { approve, requireApproval } = useApprove({\n    contractAddress: collateralAddress,\n    amount: collateralNeeded.gt(0)\n      ? isBase\n        ? // Base USDC and Base stataUSDC are 6 decimals\n          utils.parseUnits(collateralNeeded.toString(), 6)\n        : utils.parseUnits(collateralNeeded.toString(), collateralType?.decimals)\n      : 0,\n    spender: isBase ? SpotMarketProxy?.address : CoreProxy?.address,\n  });\n\n  const toast = useToast({ isClosable: true, duration: 9000 });\n\n  // TODO: Update logic on new account id\n  const newAccountId = useMemo(() => `${Math.floor(Math.random() * 1000000000000)}`, []);\n\n  const { exec: wrapEth, wethBalance } = useWrapEth();\n\n  const wrapAmount =\n    collateralType?.symbol === 'WETH' && collateralNeeded.gt(wethBalance || 0)\n      ? collateralNeeded.sub(wethBalance || 0)\n      : wei(0);\n\n  const { data: pool } = usePool(poolId);\n\n  const { exec: execDeposit } = useDeposit({\n    accountId: accountId,\n    newAccountId,\n    poolId: poolId,\n    collateralTypeAddress: collateralAddress,\n    collateralChange,\n    currentCollateral,\n    availableCollateral: availableCollateral || wei(0),\n    decimals: Number(collateralType?.decimals) || 18,\n  });\n\n  const { exec: depositBaseAndromeda } = useDepositBaseAndromeda({\n    accountId,\n    newAccountId,\n    poolId,\n    collateralTypeAddress: collateralAddress,\n    collateralChange,\n    currentCollateral,\n    availableCollateral: availableCollateral || wei(0),\n    collateralSymbol,\n  });\n\n  const errorParser = useContractErrorParser();\n\n  const [state, send] = useMachine(DepositMachine, {\n    services: {\n      [ServiceNames.wrapEth]: async () => {\n        try {\n          await wrapEth(state.context.wrapAmount);\n        } catch (error: any) {\n          const contractError = errorParser(error);\n          if (contractError) {\n            console.error(new Error(contractError.name), contractError);\n          }\n\n          toast.closeAll();\n          toast({\n            title: 'Wrapping ETH failed',\n            description: contractError ? (\n              <ContractError contractError={contractError} />\n            ) : (\n              error.message || 'Please try again.'\n            ),\n            status: 'error',\n            variant: 'left-accent',\n            duration: 3_600_000,\n          });\n          throw Error('Wrapping failed', { cause: error });\n        }\n      },\n      [ServiceNames.approveWETH]: async () => {\n        try {\n          toast({\n            title: 'Approve collateral for transfer',\n            description: accountId\n              ? 'The next transaction will lock this collateral.'\n              : 'The next transaction will create your account and and lock this collateral',\n            status: 'info',\n            variant: 'left-accent',\n          });\n\n          await approve(Boolean(state.context.infiniteApproval));\n        } catch (error: any) {\n          const contractError = errorParser(error);\n          if (contractError) {\n            console.error(new Error(contractError.name), contractError);\n          }\n          toast.closeAll();\n          toast({\n            title: 'Approval failed',\n            description: contractError ? (\n              <ContractError contractError={contractError} />\n            ) : (\n              'Please try again.'\n            ),\n            status: 'error',\n            variant: 'left-accent',\n            duration: 3_600_000,\n          });\n          throw Error('Approve failed', { cause: error });\n        }\n      },\n      [ServiceNames.executeDeposit]: async () => {\n        try {\n          toast.closeAll();\n          toast({\n            title: Boolean(accountId)\n              ? 'Locking your collateral'\n              : 'Creating your account and locking your collateral',\n            description: '',\n            variant: 'left-accent',\n          });\n\n          setTxSummary({\n            currentCollateral,\n            currentDebt: liquidityPosition?.debt || ZEROWEI,\n            collateralChange,\n          });\n\n          if (isBase) {\n            await depositBaseAndromeda();\n          } else {\n            await execDeposit();\n          }\n\n          await Promise.all([\n            queryClient.invalidateQueries({\n              queryKey: [`${network?.id}-${network?.preset}`, 'EthBalance'],\n            }),\n            queryClient.invalidateQueries({\n              queryKey: [`${network?.id}-${network?.preset}`, 'LiquidityPosition'],\n            }),\n            collateralType?.symbol === 'SNX'\n              ? queryClient.invalidateQueries({\n                  queryKey: [`${network?.id}-${network?.preset}`, 'TransferableSynthetix'],\n                })\n              : Promise.resolve(),\n            queryClient.invalidateQueries({\n              queryKey: [`${network?.id}-${network?.preset}`, 'Allowance'],\n            }),\n            queryClient.invalidateQueries({\n              queryKey: [`${network?.id}-${network?.preset}`, 'LiquidityPositions'],\n            }),\n            !accountId\n              ? queryClient.invalidateQueries({\n                  queryKey: [`${network?.id}-${network?.preset}`, 'Accounts'],\n                })\n              : Promise.resolve(),\n          ]);\n\n          setCollateralChange(ZEROWEI);\n\n          toast.closeAll();\n          toast({\n            title: 'Success',\n            description: 'Your locked collateral amount has been updated.',\n            status: 'success',\n            duration: 5000,\n            variant: 'left-accent',\n          });\n        } catch (error: any) {\n          const contractError = errorParser(error);\n          if (contractError) {\n            console.error(new Error(contractError.name), contractError);\n          }\n\n          toast.closeAll();\n          toast({\n            title: 'Could not complete locking collateral',\n            description: contractError ? (\n              <ContractError contractError={contractError} />\n            ) : (\n              'Please try again.'\n            ),\n            status: 'error',\n            variant: 'left-accent',\n            duration: 3_600_000,\n          });\n          throw Error('Lock collateral failed', { cause: error });\n        }\n      },\n    },\n  });\n\n  const wrapAmountString = wrapAmount.toString();\n  const isSuccessOrDeposit = state.matches(State.success) || state.matches(State.deposit);\n\n  useEffect(() => {\n    if (isSuccessOrDeposit) {\n      // We do this to ensure the success state displays the wrap amount used before deposit\n      return;\n    }\n    send(Events.SET_WRAP_AMOUNT, { wrapAmount: wei(wrapAmountString) });\n  }, [wrapAmountString, send, isSuccessOrDeposit]);\n\n  useEffect(() => {\n    send(Events.SET_REQUIRE_APPROVAL, { requireApproval });\n  }, [requireApproval, send]);\n\n  const location = useLocation();\n\n  const handleClose = useCallback(() => {\n    const isSuccess = state.matches(State.success);\n\n    if (isSuccess && poolId && collateralType?.symbol) {\n      send(Events.RESET);\n      onClose();\n      navigate({\n        pathname: generatePath('/positions/:collateralType/:poolId', {\n          collateralType: collateralType.symbol,\n          poolId,\n        }),\n        search: location.search,\n      });\n    }\n    send(Events.RESET);\n    onClose();\n  }, [location.search, send, onClose, state, poolId, collateralType?.symbol, navigate]);\n\n  const onSubmit = useCallback(async () => {\n    if (state.matches(State.success)) {\n      handleClose();\n      return;\n    }\n    if (state.context.error) {\n      send(Events.RETRY);\n      return;\n    }\n    send(Events.RUN);\n  }, [handleClose, send, state]);\n\n  const txSummaryItems = useMemo(() => {\n    const items = [\n      {\n        label: 'Locked ' + collateralType?.symbol,\n        value: (\n          <ChangeStat\n            value={txSummary.currentCollateral}\n            newValue={txSummary.currentCollateral.add(txSummary.collateralChange)}\n            formatFn={(val: Wei) => currency(val)}\n            hasChanges={txSummary.collateralChange.abs().gt(0)}\n            size=\"sm\"\n          />\n        ),\n      },\n    ];\n\n    if (isBase) {\n      return items;\n    }\n\n    return [\n      ...items,\n      {\n        label: 'C-ratio',\n        value: (\n          <CRatioChangeStat\n            currentCollateral={txSummary.currentCollateral}\n            currentDebt={txSummary.currentDebt}\n            collateralChange={txSummary.collateralChange}\n            collateralPrice={liquidityPosition?.collateralPrice ?? ZEROWEI}\n            debtChange={ZEROWEI}\n            size=\"sm\"\n          />\n        ),\n      },\n    ];\n  }, [\n    collateralType?.symbol,\n    isBase,\n    liquidityPosition?.collateralPrice,\n    txSummary.collateralChange,\n    txSummary.currentCollateral,\n    txSummary.currentDebt,\n  ]);\n\n  return (\n    <DepositModalUi\n      collateralChange={collateralChange}\n      isOpen={isOpen}\n      onClose={onClose}\n      collateralType={collateralType}\n      state={state}\n      setInfiniteApproval={(infiniteApproval) => {\n        send(Events.SET_INFINITE_APPROVAL, { infiniteApproval });\n      }}\n      onSubmit={onSubmit}\n      poolName={pool?.name || ''}\n      availableCollateral={availableCollateral || wei(0)}\n      title={title}\n      txSummary={<TransactionSummary items={txSummaryItems} />}\n    />\n  );\n};\n","import { parseUnits } from '@snx-v3/format';\nimport { notNil } from '@snx-v3/tsHelpers';\nimport { initialState, reducer } from '@snx-v3/txnReducer';\nimport { useNetwork, useProvider, useSigner } from '@snx-v3/useBlockchain';\nimport { useCollateralPriceUpdates } from '@snx-v3/useCollateralPriceUpdates';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { formatGasPriceForTransaction } from '@snx-v3/useGasOptions';\nimport { getGasPrice } from '@snx-v3/useGasPrice';\nimport { useGasSpeed } from '@snx-v3/useGasSpeed';\nimport { withERC7412 } from '@snx-v3/withERC7412';\nimport Wei, { wei } from '@synthetixio/wei';\nimport { useMutation } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\nimport { useReducer } from 'react';\n\nexport const useDeposit = ({\n  accountId,\n  newAccountId,\n  poolId,\n  collateralTypeAddress,\n  collateralChange,\n  currentCollateral,\n  availableCollateral,\n  decimals,\n}: {\n  accountId?: string;\n  newAccountId: string;\n  poolId?: string;\n  collateralTypeAddress?: string;\n  currentCollateral: Wei;\n  availableCollateral?: Wei;\n  collateralChange: Wei;\n  decimals: number;\n}) => {\n  const [txnState, dispatch] = useReducer(reducer, initialState);\n  const { data: CoreProxy } = useCoreProxy();\n  const { data: priceUpdateTx, refetch: refetchPriceUpdateTx } = useCollateralPriceUpdates();\n\n  const { gasSpeed } = useGasSpeed();\n\n  const { network } = useNetwork();\n  const signer = useSigner();\n  const provider = useProvider();\n\n  const mutation = useMutation({\n    mutationFn: async () => {\n      if (\n        !(\n          network &&\n          provider &&\n          signer &&\n          CoreProxy &&\n          poolId &&\n          collateralTypeAddress &&\n          availableCollateral\n        )\n      ) {\n        return;\n      }\n      if (collateralChange.eq(0)) {\n        return;\n      }\n\n      try {\n        dispatch({ type: 'prompting' });\n        const walletAddress = await signer.getAddress();\n        const id = accountId ?? newAccountId;\n\n        const CoreProxyContract = new ethers.Contract(CoreProxy.address, CoreProxy.abi, signer);\n        // create account only when no account exists\n        const createAccount = accountId\n          ? undefined\n          : CoreProxyContract.populateTransaction['createAccount(uint128)'](\n              ethers.BigNumber.from(id)\n            );\n\n        const amount = collateralChange.sub(availableCollateral);\n\n        const collateralAmount = amount.gt(0)\n          ? parseUnits(amount.toString(), decimals)\n          : ethers.BigNumber.from(0);\n\n        // optionally deposit if available collateral not enough\n        const deposit = collateralAmount.gt(0)\n          ? CoreProxyContract.populateTransaction.deposit(\n              ethers.BigNumber.from(id),\n              collateralTypeAddress,\n              collateralAmount // only deposit what's needed\n            )\n          : undefined;\n\n        const delegate = CoreProxyContract.populateTransaction.delegateCollateral(\n          ethers.BigNumber.from(id),\n          ethers.BigNumber.from(poolId),\n          collateralTypeAddress,\n          currentCollateral.add(collateralChange).toBN(),\n          wei(1).toBN()\n        );\n        const callsPromise = Promise.all([createAccount, deposit, delegate].filter(notNil));\n\n        const [calls, gasPrices] = await Promise.all([callsPromise, getGasPrice({ provider })]);\n        if (priceUpdateTx) {\n          calls.unshift(priceUpdateTx as any);\n        }\n\n        const { multicallTxn: erc7412Tx, gasLimit } = await withERC7412(\n          network,\n          calls,\n          'useDeposit',\n          walletAddress\n        );\n\n        const gasOptionsForTransaction = formatGasPriceForTransaction({\n          gasLimit,\n          gasPrices,\n          gasSpeed,\n        });\n\n        const txn = await signer.sendTransaction({ ...erc7412Tx, ...gasOptionsForTransaction });\n        dispatch({ type: 'pending', payload: { txnHash: txn.hash } });\n\n        await txn.wait();\n        dispatch({ type: 'success' });\n      } catch (error: any) {\n        dispatch({ type: 'error', payload: { error } });\n        throw error;\n      }\n    },\n    onSuccess: () => {\n      // After mutation withERC7412, we guaranteed to have updated all the prices, dont care about await\n      refetchPriceUpdateTx();\n    },\n  });\n  return {\n    mutation,\n    txnState,\n    settle: () => dispatch({ type: 'settled' }),\n    isLoading: mutation.isPending,\n    exec: mutation.mutateAsync,\n  };\n};\n","import { parseUnits } from '@snx-v3/format';\nimport { getSpotMarketId } from '@snx-v3/isBaseAndromeda';\nimport { notNil } from '@snx-v3/tsHelpers';\nimport { initialState, reducer } from '@snx-v3/txnReducer';\nimport { approveAbi } from '@snx-v3/useApprove';\nimport { useNetwork, useProvider, useSigner } from '@snx-v3/useBlockchain';\nimport { useCollateralPriceUpdates } from '@snx-v3/useCollateralPriceUpdates';\nimport { useCollateralType } from '@snx-v3/useCollateralTypes';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { formatGasPriceForTransaction } from '@snx-v3/useGasOptions';\nimport { getGasPrice } from '@snx-v3/useGasPrice';\nimport { useGasSpeed } from '@snx-v3/useGasSpeed';\nimport { useGetUSDTokens } from '@snx-v3/useGetUSDTokens';\nimport { useSpotMarketProxy } from '@snx-v3/useSpotMarketProxy';\nimport { withERC7412 } from '@snx-v3/withERC7412';\nimport Wei, { wei } from '@synthetixio/wei';\nimport { useMutation } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\nimport { useReducer } from 'react';\n\nexport const useDepositBaseAndromeda = ({\n  accountId,\n  newAccountId,\n  poolId,\n  collateralTypeAddress,\n  collateralChange,\n  currentCollateral,\n  availableCollateral,\n  collateralSymbol,\n}: {\n  accountId?: string;\n  newAccountId: string;\n  poolId?: string;\n  collateralTypeAddress?: string;\n  currentCollateral: Wei;\n  availableCollateral?: Wei;\n  collateralChange: Wei;\n  collateralSymbol?: string;\n}) => {\n  const [txnState, dispatch] = useReducer(reducer, initialState);\n  const { data: CoreProxy } = useCoreProxy();\n  const { data: SpotMarketProxy } = useSpotMarketProxy();\n  const { data: priceUpdateTx, refetch: refetchPriceUpdateTx } = useCollateralPriceUpdates();\n  const { data: usdTokens } = useGetUSDTokens();\n  const { data: collateralType } = useCollateralType(collateralSymbol);\n\n  const { gasSpeed } = useGasSpeed();\n\n  const { network } = useNetwork();\n  const signer = useSigner();\n  const provider = useProvider();\n\n  const mutation = useMutation({\n    mutationFn: async () => {\n      if (\n        !(\n          network &&\n          provider &&\n          signer &&\n          CoreProxy &&\n          SpotMarketProxy &&\n          poolId &&\n          collateralTypeAddress &&\n          availableCollateral &&\n          usdTokens?.sUSD\n        )\n      ) {\n        return;\n      }\n      if (collateralChange.eq(0)) return;\n\n      try {\n        // Steps:\n        // 1. Create an account if not exists\n        // 2. Wrap USDC or stataUSDC to sUSDC or sStataUSDC\n        // 3. Approve sUSDC or sStataUSDC\n        // 4. Deposit sUSDC or sStataUSDC\n        // 5. Delegate collateral\n\n        dispatch({ type: 'prompting' });\n        const id = accountId ?? newAccountId;\n\n        const CoreProxyContract = new ethers.Contract(CoreProxy.address, CoreProxy.abi, signer);\n        const SpotMarketProxyContract = new ethers.Contract(\n          SpotMarketProxy.address,\n          SpotMarketProxy.abi,\n          signer\n        );\n\n        // create account only when no account exists\n        const createAccount = accountId\n          ? undefined\n          : CoreProxyContract.populateTransaction['createAccount(uint128)'](\n              ethers.BigNumber.from(id)\n            );\n\n        const amount = collateralChange.sub(availableCollateral);\n\n        const collateralAmount = amount.gt(0)\n          ? parseUnits(amount.toString(), 6)\n          : ethers.BigNumber.from(0);\n\n        const spotMarketId = getSpotMarketId(collateralSymbol);\n        const amountD18 = amount.gt(0)\n          ? parseUnits(amount.toString(), 18)\n          : ethers.BigNumber.from(0);\n\n        // Wrap\n        const wrap = collateralAmount.gt(0)\n          ? SpotMarketProxyContract.populateTransaction.wrap(\n              spotMarketId,\n              collateralAmount,\n              amountD18\n            )\n          : undefined;\n\n        // Synth\n        const synthAddress = collateralType?.tokenAddress;\n        if (!synthAddress) {\n          throw 'synth not found';\n        }\n        const SynthContract = new ethers.Contract(synthAddress, approveAbi, signer);\n\n        const synthApproval = amountD18.gt(0)\n          ? SynthContract.populateTransaction.approve(CoreProxy.address, amountD18)\n          : undefined;\n\n        // optionally deposit if available collateral not enough\n        const deposit = amountD18.gt(0)\n          ? CoreProxyContract.populateTransaction.deposit(\n              ethers.BigNumber.from(id),\n              synthAddress,\n              amountD18 // only deposit what's needed\n            )\n          : undefined;\n\n        const delegate = CoreProxyContract.populateTransaction.delegateCollateral(\n          ethers.BigNumber.from(id),\n          ethers.BigNumber.from(poolId),\n          synthAddress,\n          currentCollateral.toBN().add(parseUnits(collateralChange.toString(), 18)).toString(),\n          wei(1).toBN()\n        );\n\n        const callsPromise = Promise.all(\n          [wrap, synthApproval, createAccount, deposit, delegate].filter(notNil)\n        );\n\n        const [calls, gasPrices] = await Promise.all([callsPromise, getGasPrice({ provider })]);\n\n        if (priceUpdateTx) {\n          calls.unshift(priceUpdateTx as any);\n        }\n\n        const walletAddress = await signer.getAddress();\n\n        const { multicallTxn: erc7412Tx, gasLimit } = await withERC7412(\n          network,\n          calls,\n          'useDepositBaseAndromeda',\n          walletAddress\n        );\n\n        const gasOptionsForTransaction = formatGasPriceForTransaction({\n          gasLimit,\n          gasPrices,\n          gasSpeed,\n        });\n\n        const txn = await signer.sendTransaction({ ...erc7412Tx, ...gasOptionsForTransaction });\n        dispatch({ type: 'pending', payload: { txnHash: txn.hash } });\n\n        await txn.wait();\n        dispatch({ type: 'success' });\n      } catch (error: any) {\n        dispatch({ type: 'error', payload: { error } });\n        throw error;\n      }\n    },\n    onSuccess: () => {\n      // After mutation withERC7412, we guaranteed to have updated all the prices, dont care about await\n      refetchPriceUpdateTx();\n    },\n  });\n  return {\n    mutation,\n    txnState,\n    settle: () => dispatch({ type: 'settled' }),\n    isLoading: mutation.isPending,\n    exec: mutation.mutateAsync,\n  };\n};\n","import { DepositModal } from './DepositModal';\nexport * from './DepositModal';\nexport default DepositModal;\n","import { Box, Spinner } from '@chakra-ui/react';\nimport { PropsWithChildren } from 'react';\nimport { MultistepStatus } from './MultistepStatus';\n\nimport { createIcon } from '@chakra-ui/icon';\n\nexport const CheckIcon = createIcon({\n  viewBox: '0 0 14 14',\n  path: (\n    <g fill=\"currentColor\">\n      <polygon points=\"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039\" />\n    </g>\n  ),\n});\n\nexport const CloseIcon = createIcon({\n  d: 'M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z',\n});\n\nexport function StepIcon({ status, children }: PropsWithChildren<{ status: MultistepStatus }>) {\n  switch (true) {\n    case status.failed:\n      return <CloseIcon color=\"white\" />;\n    case status.success:\n      return <CheckIcon color=\"white\" />;\n    case status.loading:\n      return <Spinner color=\"white\" width={6} height={6} />;\n    case status.disabled:\n    default:\n      return (\n        <Box\n          __css={{\n            display: 'inline',\n            fontWeight: 'medium',\n            textAlign: 'center',\n            fontSize: 'md',\n          }}\n        >\n          {children}\n        </Box>\n      );\n  }\n}\n","import { MultistepStatus } from './MultistepStatus';\n\nexport function statusColor(status: MultistepStatus): string {\n  switch (true) {\n    // order matters\n    case status.failed:\n      return 'red.700';\n    case status.disabled:\n      return 'gray.900';\n    case status.loading:\n      return 'gray.900';\n    case status.success:\n      return 'green.700';\n    default:\n      return 'gray.900';\n  }\n}\n","import { Flex } from '@chakra-ui/react';\nimport { PropsWithChildren } from 'react';\nimport { MultistepStatus } from './MultistepStatus';\nimport { StepIcon } from './StepIcon';\nimport { statusColor } from './statusColor';\n\nexport function Step({ status, children }: PropsWithChildren<{ status: MultistepStatus }>) {\n  return (\n    <Flex\n      width={10}\n      height={10}\n      minWidth={10}\n      minHeight={10}\n      justifyContent=\"center\"\n      alignItems=\"center\"\n      bg={statusColor(status)}\n      rounded=\"full\"\n      transitionProperty=\"background\"\n      transitionDuration=\"normal\"\n    >\n      <StepIcon status={status}>{children}</StepIcon>\n    </Flex>\n  );\n}\n","import { PropsWithChildren, ReactNode } from 'react';\nimport { Box, Checkbox, CheckboxProps, Flex, FlexProps, Text } from '@chakra-ui/react';\nimport { Step } from './Step';\nimport { statusColor } from './statusColor';\nimport { MultistepStatus } from './MultistepStatus';\n\nfunction StepCheckbox({ children, ...props }: PropsWithChildren<CheckboxProps>) {\n  return (\n    <Flex mt=\"0.5\">\n      <Checkbox size=\"sm\" {...props}>\n        <Box fontSize=\"xs\" opacity=\"0.66\">\n          {children}\n        </Box>\n      </Checkbox>\n    </Flex>\n  );\n}\ninterface Props extends Omit<FlexProps, 'title'> {\n  step: number;\n  title: string | ReactNode;\n  subtitle?: string | ReactNode;\n  checkboxLabel?: string;\n  checkboxProps?: CheckboxProps;\n  status: MultistepStatus;\n  children?: ReactNode | undefined;\n}\n\nexport function Multistep({\n  step,\n  title,\n  subtitle,\n  checkboxLabel,\n  checkboxProps,\n  status,\n  children,\n  ...props\n}: Props) {\n  return (\n    <Flex\n      position=\"relative\"\n      alignItems=\"center\"\n      gap={4}\n      rounded=\"lg\"\n      mt=\"6\"\n      p=\"4\"\n      border=\"1px solid\"\n      transitionProperty=\"border-color\"\n      transitionDuration=\"normal\"\n      borderColor={statusColor(status)}\n      {...props}\n    >\n      <Step status={status}>{step}</Step>\n      <Flex direction=\"column\">\n        <Text>{title}</Text>\n        {subtitle ? (\n          <Text as=\"div\" fontSize=\"xs\" opacity=\"0.66\">\n            {subtitle}\n          </Text>\n        ) : null}\n        {checkboxLabel ? <StepCheckbox {...checkboxProps}>{checkboxLabel}</StepCheckbox> : null}\n        {children}\n      </Flex>\n    </Flex>\n  );\n}\n","import { Tooltip as ChakraTooltip, TooltipProps } from '@chakra-ui/react';\n\nexport const Tooltip = ({ ...props }: TooltipProps) => {\n  return <ChakraTooltip hasArrow bg=\"gray.900\" p={3} borderRadius=\"4px\" {...props} />;\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\nexport const SUSDCIcon = ({ width = '24px', height = '24px' }: IconProps) => {\n  return (\n    <Icon width={width} height={height} viewBox=\"0 0 30 30\" fill=\"none\">\n      <g clipPath=\"url(#clip0_10043_2361)\">\n        <path\n          d=\"M15 30C23.3125 30 30 23.3125 30 15C30 6.68745 23.3125 0 15 0C6.68745 0 0 6.68745 0 15C0 23.3125 6.68745 30 15 30Z\"\n          fill=\"#2775CA\"\n        />\n        <path\n          d=\"M19.125 17.375C19.125 15.1875 17.8125 14.4375 15.1875 14.1251C13.3125 13.875 12.9375 13.3751 12.9375 12.5C12.9375 11.6249 13.5625 11.0625 14.8125 11.0625C15.9375 11.0625 16.5625 11.4375 16.875 12.375C16.9375 12.5625 17.125 12.6875 17.3125 12.6875H18.3124C18.5625 12.6875 18.75 12.5 18.75 12.2501V12.1875C18.4999 10.8125 17.3749 9.75 15.9375 9.62505V8.12505C15.9375 7.875 15.75 7.6875 15.4375 7.62495H14.5C14.25 7.62495 14.0625 7.81245 13.9999 8.12505V9.5625C12.1249 9.81255 10.9375 11.0625 10.9375 12.6251C10.9375 14.6876 12.1875 15.5 14.8125 15.8126C16.5625 16.125 17.125 16.5 17.125 17.5001C17.125 18.5001 16.2499 19.1876 15.0625 19.1876C13.4374 19.1876 12.8749 18.5 12.6874 17.5625C12.625 17.3126 12.4375 17.1875 12.25 17.1875H11.1874C10.9375 17.1875 10.75 17.375 10.75 17.625V17.6876C10.9999 19.25 12 20.375 14.0625 20.6876V22.1876C14.0625 22.4375 14.25 22.625 14.5624 22.6875H15.4999C15.7499 22.6875 15.9375 22.5 16 22.1876V20.6876C17.875 20.375 19.125 19.0625 19.125 17.375Z\"\n          fill=\"white\"\n        />\n        <path\n          d=\"M11.8125 23.9374C6.9375 22.1875 4.43745 16.75 6.25005 11.9374C7.18755 9.31245 9.25005 7.3125 11.8125 6.375C12.0625 6.25005 12.1875 6.06255 12.1875 5.74995V4.875C12.1875 4.62495 12.0625 4.43745 11.8125 4.37505C11.7499 4.37505 11.625 4.37505 11.5624 4.43745C5.625 6.31245 2.37495 12.625 4.24995 18.5625C5.37495 22.0624 8.0625 24.75 11.5624 25.875C11.8125 25.9999 12.0625 25.875 12.1249 25.6249C12.1875 25.5625 12.1875 25.5 12.1875 25.375V24.4999C12.1875 24.3124 12 24.0625 11.8125 23.9374ZM18.4375 4.43745C18.1875 4.3125 17.9375 4.43745 17.875 4.6875C17.8125 4.75005 17.8125 4.81245 17.8125 4.93755V5.8125C17.8125 6.06255 18 6.31245 18.1875 6.43755C23.0625 8.18745 25.5625 13.6249 23.75 18.4375C22.8125 21.0625 20.75 23.0625 18.1875 24C17.9374 24.1249 17.8125 24.3124 17.8125 24.625V25.5C17.8125 25.75 17.9374 25.9375 18.1875 25.9999C18.25 25.9999 18.375 25.9999 18.4375 25.9375C24.375 24.0625 27.6251 17.7499 25.7501 11.8125C24.6251 8.25 21.875 5.56245 18.4375 4.43745Z\"\n          fill=\"white\"\n        />\n      </g>\n      <defs>\n        <clipPath id=\"clip0_10043_2361\">\n          <rect width=\"30\" height=\"30\" fill=\"white\" />\n        </clipPath>\n      </defs>\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\ninterface LogoProps extends IconProps {\n  withText?: boolean;\n}\n\nexport const Logo = ({\n  color = '#00D1FF',\n  width = '126px',\n  height = '22px',\n  withText = true,\n}: LogoProps) => {\n  return (\n    <Icon width={width} height={height} viewBox=\"0 0 126 22\" fill=\"none\" color={color}>\n      <path\n        d=\"M7.00677 4.80523C6.804 4.57155 6.55437 4.45443 6.25731 4.45443H0.182051C0.128089 4.45443 0.0839395 4.43722 0.0506907 4.40281C0.0168969 4.36895 0 4.33065 0 4.28957V0.164856C0 0.12378 0.0168969 0.0860357 0.0506907 0.0516214C0.0839395 0.0172071 0.128089 0 0.182051 0H6.60179C8.22171 0 9.61925 0.667193 10.7939 2.00047L12.3533 3.91823L9.31565 7.65107L7.00677 4.80523ZM18.2263 1.97993C19.4009 0.659977 20.805 0 22.4386 0H28.8381C28.8921 0 28.9324 0.0138767 28.9597 0.0410751C28.9864 0.0688286 29 0.109904 29 0.164856V4.28957C29 4.33065 28.9864 4.36895 28.9597 4.40281C28.9324 4.43722 28.8921 4.45443 28.8381 4.45443H22.7629C22.4658 4.45443 22.2162 4.57155 22.0134 4.80523L17.5379 10.291L22.0336 15.8178C22.2363 16.0382 22.4789 16.1481 22.7629 16.1481H28.8381C28.8921 16.1481 28.9324 16.1653 28.9597 16.1997C28.9864 16.2341 29 16.2791 29 16.3335V20.4582C29 20.4993 28.9864 20.5376 28.9597 20.5714C28.9324 20.6058 28.8921 20.623 28.8381 20.623H22.4386C20.805 20.623 19.4075 19.9564 18.2465 18.6226L14.5204 14.0444L10.7939 18.6226C9.61925 19.9564 8.21517 20.623 6.58162 20.623H0.182051C0.128089 20.623 0.0872099 20.6058 0.0605018 20.5714C0.0332488 20.537 0.0201673 20.4926 0.0201673 20.4371V16.3124C0.0201673 16.2713 0.0332488 16.2336 0.0605018 16.1991C0.0872099 16.1647 0.128089 16.1475 0.182051 16.1475H6.25731C6.54074 16.1475 6.79038 16.031 7.00677 15.7967L11.4011 10.3937L18.2263 1.97993Z\"\n        fill=\"#00D1FF\"\n      />\n      {withText && (\n        <g>\n          <path d=\"M42.9 3.86001V15.72H51.7V17.86H40.4V3.86001H42.9Z\" fill=\"white\" />\n          <path\n            d=\"M53.4645 7.02001H55.7845V17.86H53.4645V7.02001ZM53.4645 3.30001H55.7845V5.62001H53.4645V3.30001Z\"\n            fill=\"white\"\n          />\n          <path\n            d=\"M61.0055 7.02001H68.5055V21.78H66.1855V16.38L64.4455 17.86H61.0055C59.4255 17.86 58.1655 16.54 58.1655 15.02V9.86002C58.1655 8.28002 59.4855 7.02001 61.0055 7.02001ZM61.6255 15.86H65.4855C65.8655 15.86 66.1855 15.56 66.1855 15.16V9.04002H61.6255C60.9855 9.04002 60.4655 9.54002 60.4655 10.18V14.7C60.4655 15.36 60.9855 15.86 61.6255 15.86Z\"\n            fill=\"white\"\n          />\n          <path\n            d=\"M74.5408 15.86H78.3008C78.6808 15.86 79.0008 15.56 79.0008 15.16V7.02001H81.3208V17.86H79.0008V16.4L77.3208 17.86H73.9008C72.3808 17.86 71.0808 16.6 71.0808 15.02V7.02001H73.3808V14.7C73.3808 15.36 73.8808 15.86 74.5408 15.86Z\"\n            fill=\"white\"\n          />\n          <path\n            d=\"M83.9333 7.02001H86.2533V17.86H83.9333V7.02001ZM83.9333 3.30001H86.2533V5.62001H83.9333V3.30001Z\"\n            fill=\"white\"\n          />\n          <path\n            d=\"M96.6542 7.02001V3.14001H98.9742V17.86H96.6542V16.38L94.9142 17.86H91.4742C89.8942 17.86 88.6342 16.54 88.6342 15.02V9.86002C88.6342 8.28002 89.9542 7.02001 91.4742 7.02001H96.6542ZM92.0942 15.86H95.9542C96.3342 15.86 96.6542 15.56 96.6542 15.16V9.04002H92.0942C91.4542 9.04002 90.9342 9.54002 90.9342 10.18V14.7C90.9342 15.36 91.4542 15.86 92.0942 15.86Z\"\n            fill=\"white\"\n          />\n          <path\n            d=\"M101.59 7.02001H103.91V17.86H101.59V7.02001ZM101.59 3.30001H103.91V5.62001H101.59V3.30001Z\"\n            fill=\"white\"\n          />\n          <path\n            d=\"M113.09 15.86V17.86H110.31C108.77 17.86 107.51 16.66 107.51 15.08V9.04002H105.63V7.02001H107.51V4.64002H109.83V7.02001H113.11V9.04002H109.83V14.74C109.83 15.4 110.27 15.86 110.93 15.86H113.09Z\"\n            fill=\"white\"\n          />\n          <path\n            d=\"M116.587 21.78L118.747 17.22L113.947 7.02001H116.467L119.947 14.74L123.267 7.02001H125.747L119.067 21.78H116.587Z\"\n            fill=\"white\"\n          />\n        </g>\n      )}\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\nexport const EthereumIcon = ({\n  width = '24px',\n  height = '24px',\n  fill = `#627EEA`,\n  ...props\n}: IconProps) => {\n  return (\n    <Icon width={width} height={height} viewBox=\"0 0 30 30\" fill=\"none\" {...props}>\n      <path\n        d=\"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15Z\"\n        fill={fill as string}\n      />\n      <path d=\"M15.467 3.75v8.316l7.028 3.14L15.467 3.75Z\" fill=\"#fff\" fillOpacity=\".602\" />\n      <path d=\"m15.467 3.75-7.03 11.456 7.03-3.14V3.75Z\" fill=\"#fff\" />\n      <path d=\"M15.467 20.595v5.65l7.033-9.73-7.033 4.08Z\" fill=\"#fff\" fillOpacity=\".602\" />\n      <path d=\"M15.467 26.245v-5.651l-7.03-4.08 7.03 9.731Z\" fill=\"#fff\" />\n      <path d=\"m15.467 19.287 7.028-4.08-7.028-3.14v7.22Z\" fill=\"#fff\" fillOpacity=\".2\" />\n      <path d=\"m8.438 15.206 7.029 4.081v-7.22l-7.03 3.14Z\" fill=\"#fff\" fillOpacity=\".602\" />\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\nexport const OptimismIcon = ({\n  width = '24px',\n  height = '24px',\n  color = 'white',\n  fill = '#FF0420',\n  ...props\n}: IconProps) => {\n  return (\n    <Icon width={width} height={height} viewBox=\"0 0 34 34\" {...props}>\n      <path\n        d=\"M17 34C26.3888 34 34 26.3888 34 17C34 7.61116 26.3888 0 17 0C7.61116 0 0 7.61116 0 17C0 26.3888 7.61116 34 17 34Z\"\n        fill={fill as string}\n      />\n      <path\n        d=\"M12.3295 21.76C11.3042 21.76 10.4641 21.5131 9.80918 21.0195C9.16298 20.5171 8.83984 19.8031 8.83984 18.8775C8.83984 18.6836 8.8614 18.4456 8.90444 18.1635C9.01651 17.5289 9.1759 16.7664 9.38269 15.8761C9.96858 13.452 11.4808 12.24 13.9193 12.24C14.5828 12.24 15.1773 12.3546 15.7029 12.5838C16.2285 12.8041 16.6421 13.1391 16.9437 13.5886C17.2453 14.0294 17.3961 14.5583 17.3961 15.1753C17.3961 15.3604 17.3745 15.594 17.3314 15.8761C17.2022 16.6606 17.0471 17.4231 16.8662 18.1635C16.5646 19.3711 16.0433 20.2747 15.3022 20.8741C14.5612 21.4647 13.5703 21.76 12.3295 21.76ZM12.5105 19.856C12.993 19.856 13.4023 19.7105 13.7384 19.4196C14.083 19.1288 14.3286 18.6836 14.4751 18.0842C14.6732 17.2556 14.824 16.5328 14.9274 15.9158C14.9619 15.7306 14.9791 15.5411 14.9791 15.3472C14.9791 14.5451 14.5699 14.144 13.7513 14.144C13.2688 14.144 12.8552 14.2894 12.5105 14.5803C12.1744 14.8712 11.9332 15.3164 11.7867 15.9158C11.6316 16.5064 11.4765 17.2291 11.3214 18.0842C11.287 18.2605 11.2697 18.4456 11.2697 18.6395C11.2697 19.4505 11.6833 19.856 12.5105 19.856Z\"\n        fill={color as string}\n      />\n      <path\n        d=\"M17.9895 21.6278C17.8947 21.6278 17.8215 21.597 17.7698 21.5352C17.7267 21.4647 17.7138 21.3854 17.731 21.2972L19.5146 12.7028C19.5318 12.6059 19.5792 12.5265 19.6568 12.4648C19.7344 12.4031 19.8162 12.3722 19.9024 12.3722H23.3404C24.2968 12.3722 25.0636 12.575 25.641 12.9805C26.2269 13.386 26.5199 13.9721 26.5199 14.739C26.5199 14.9594 26.494 15.1886 26.4423 15.4266C26.2269 16.4403 25.7918 17.1895 25.1369 17.6744C24.4907 18.1592 23.6031 18.4016 22.4744 18.4016H20.7295L20.135 21.2972C20.1178 21.3942 20.0704 21.4735 19.9928 21.5352C19.9153 21.597 19.8334 21.6278 19.7473 21.6278H17.9895ZM22.5648 16.5769C22.9267 16.5769 23.2412 16.4755 23.5084 16.2728C23.7841 16.0701 23.965 15.7792 24.0513 15.4001C24.0771 15.2503 24.09 15.1181 24.09 15.0035C24.09 14.7479 24.0168 14.5539 23.8703 14.4217C23.7238 14.2806 23.4739 14.2101 23.1206 14.2101H21.5697L21.0785 16.5769H22.5648Z\"\n        fill={color as string}\n      />\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\ninterface DollarCircleProps extends IconProps {\n  fill?: string;\n}\n\nexport const DollarCircle = ({ width = '24px', height = '24px', ...props }: DollarCircleProps) => {\n  return (\n    <Icon width={width} height={height} viewBox=\"0 0 19 18\" fill=\"none\" {...props}>\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M9.79517 2.75357C6.44891 2.75357 3.73624 5.46625 3.73624 8.8125C3.73624 12.1588 6.44891 14.8714 9.79517 14.8714C13.1414 14.8714 15.8541 12.1588 15.8541 8.8125C15.8541 5.46625 13.1414 2.75357 9.79517 2.75357ZM2.48267 8.8125C2.48267 4.77392 5.75658 1.5 9.79517 1.5C13.8337 1.5 17.1077 4.77392 17.1077 8.8125C17.1077 12.8511 13.8337 16.125 9.79517 16.125C5.75658 16.125 2.48267 12.8511 2.48267 8.8125Z\"\n        fill=\"white\"\n      />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M9.03962 7.48711C9.04452 7.25329 9.11127 7.15806 9.15621 7.11271C9.21551 7.05288 9.33009 6.98862 9.54225 6.95486C9.98435 6.88451 10.5823 6.98693 11.0758 7.11688L11.6819 7.27652L12.0011 6.06428L11.395 5.90465C10.8745 5.76757 10.0611 5.60296 9.34526 5.71686C8.97845 5.77523 8.57742 5.91591 8.26586 6.23026C7.94168 6.55735 7.78576 6.99985 7.78576 7.51481V7.53855L7.78756 7.56221C7.83275 8.15802 8.18724 8.55401 8.55492 8.8144C8.89199 9.05311 9.30983 9.22697 9.64735 9.36742C9.66009 9.37272 9.67272 9.37797 9.68522 9.38318C10.0665 9.54198 10.3494 9.6643 10.5455 9.80792C10.7181 9.93436 10.7353 10.0108 10.7353 10.0783C10.7353 10.3402 10.6583 10.4442 10.5979 10.4988C10.5171 10.5719 10.3654 10.6431 10.1066 10.6754C9.57934 10.741 8.8945 10.6119 8.39035 10.4769L7.7849 10.3148L7.4606 11.5257L8.06605 11.6878C8.59887 11.8305 9.48099 12.0165 10.2615 11.9193C10.6565 11.8701 11.0939 11.7404 11.4387 11.4286C11.8039 11.0983 11.9889 10.6336 11.9889 10.0783C11.9889 9.47293 11.6504 9.06337 11.2862 8.79661C10.9547 8.55379 10.534 8.37864 10.1954 8.23769C10.1859 8.23376 10.1765 8.22986 10.1672 8.22598C9.78653 8.06741 9.49239 7.94221 9.27941 7.79139C9.09878 7.66347 9.051 7.56996 9.03962 7.48711Z\"\n        fill=\"white\"\n      />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M9.79517 11.0063C10.1413 11.0063 10.422 11.2869 10.422 11.633V13.2H9.16838V11.633C9.16838 11.2869 9.449 11.0063 9.79517 11.0063Z\"\n        fill=\"white\"\n      />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M10.422 4.425V5.99196C10.422 6.33813 10.1413 6.61875 9.79517 6.61875C9.449 6.61875 9.16838 6.33813 9.16838 5.99196V4.425H10.422Z\"\n        fill=\"white\"\n      />\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\nexport const ArbitrumIcon = ({ width = '24px', height = '24px', ...props }: IconProps) => {\n  return (\n    <Icon width={width} height={height} viewBox=\"0 0 42 42\" {...props}>\n      <circle cx=\"21\" cy=\"21\" r=\"21\" fill=\"#2D374B\" />\n      <path\n        d=\"M25.089 19.4942L27.7327 15.0085L34.8586 26.1072L34.8619 28.2365L34.8386 13.5798C34.8303 13.403 34.7795 13.2308 34.6907 13.0777C34.6018 12.9246 34.4774 12.7952 34.328 12.7003L21.4989 5.32125C21.3456 5.24842 21.1779 5.21102 21.0082 5.21182C20.8386 5.21262 20.6712 5.2516 20.5186 5.32587C20.479 5.34572 20.4407 5.3679 20.4037 5.39231L20.3591 5.42053L7.90602 12.6367L7.85753 12.6585C7.79299 12.6884 7.7314 12.7243 7.67359 12.7657C7.44004 12.9325 7.28088 13.1839 7.23002 13.4664C7.22223 13.5092 7.21692 13.5525 7.21411 13.5959L7.23361 25.5397L13.871 15.2522C14.7066 13.8881 16.5273 13.4487 18.2174 13.4725L20.201 13.5238L8.51275 32.2682L9.89067 33.0614L21.719 13.5426L26.9472 13.5236L15.1494 33.5342L20.0663 36.3639L20.6538 36.7018C20.9073 36.8025 21.1886 36.8081 21.4458 36.7175L34.4553 29.1783L31.9668 30.6196L25.089 19.4942ZM26.0978 34.0217L21.132 26.228L24.1631 21.0845L30.6846 31.3633L26.0978 34.0217Z\"\n        fill=\"#2D374B\"\n      />\n      <path\n        d=\"M21.1323 26.228L26.0981 34.0214L30.6851 31.363L24.1639 21.0845L21.1323 26.228Z\"\n        fill=\"#28A0F0\"\n      />\n      <path\n        d=\"M34.8623 28.2368L34.859 26.1074L27.7331 15.0087L25.0879 19.4939L31.9669 30.6193L34.4554 29.1781C34.5759 29.0804 34.6745 28.9584 34.7446 28.8201C34.8148 28.6818 34.855 28.5302 34.8626 28.3753L34.8623 28.2368Z\"\n        fill=\"#28A0F0\"\n      />\n      <path\n        d=\"M5.00171 30.2455L8.5141 32.2694L20.2024 13.5251L18.2187 13.4738C16.5286 13.4499 14.7079 13.8891 13.8723 15.2534L7.23495 25.541L5.00299 28.9718V30.2466L5.00171 30.2455Z\"\n        fill=\"white\"\n      />\n      <path\n        d=\"M26.9474 13.5248L21.7195 13.5438L9.89111 33.0626L14.0254 35.4431L15.1496 33.5362L26.9474 13.5248Z\"\n        fill=\"white\"\n      />\n      <path\n        d=\"M37.065 13.4979C37.0411 12.9583 36.8863 12.4327 36.614 11.9664C36.3417 11.5 35.96 11.1068 35.5019 10.8208L22.5047 3.34657C22.0407 3.11856 21.5306 3 21.0137 3C20.4967 3 19.9866 3.11856 19.5226 3.34657C19.4141 3.40121 6.88305 10.6689 6.88305 10.6689C6.70895 10.7525 6.54242 10.8511 6.38535 10.9634C5.97846 11.2528 5.64243 11.6306 5.40249 12.0684C5.16255 12.5063 5.02494 12.9928 5 13.4915V28.971L7.23196 25.5402L7.21477 13.5969C7.22521 13.4332 7.27184 13.2738 7.35129 13.1302C7.43074 12.9867 7.54104 12.8625 7.67424 12.7667C7.73325 12.7244 20.4782 5.34712 20.5188 5.32685C20.6714 5.25259 20.8387 5.21361 21.0084 5.21281C21.1781 5.21201 21.3458 5.24941 21.4991 5.32224L34.3282 12.7018C34.4776 12.7967 34.602 12.9261 34.6908 13.0792C34.7797 13.2323 34.8304 13.4045 34.8387 13.5813V28.3768C34.8356 28.5302 34.7998 28.6812 34.7337 28.8196C34.6675 28.9581 34.5726 29.0808 34.4552 29.1796L31.9667 30.6208L30.684 31.3648L26.0969 34.0232L21.4449 36.7192C21.1877 36.81 20.9064 36.8044 20.653 36.7036L15.1493 33.538L14.0251 35.4447L18.9713 38.2924C19.135 38.3852 19.2807 38.4678 19.4002 38.5351C19.5855 38.6377 19.7117 38.7082 19.7561 38.7298C20.1699 38.9111 20.6173 39.0032 21.0691 38.9999C21.4834 39.0005 21.8942 38.9232 22.28 38.7721L35.7915 30.9474C36.1727 30.6509 36.4843 30.2744 36.7042 29.8445C36.9242 29.4145 37.0471 28.9415 37.0645 28.4589L37.065 13.4979Z\"\n        fill=\"#96BEDC\"\n      />\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\nexport const FailedIcon = ({ w = '94px', h = '94px' }: IconProps) => {\n  return (\n    <Icon w={w} h={h} viewBox=\"0 0 94 94\" fill=\"none\">\n      <g filter=\"url(#filter0_d_1044_28165)\">\n        <path\n          fillRule=\"evenodd\"\n          clipRule=\"evenodd\"\n          d=\"M47 76.3333C63.2004 76.3333 76.3333 63.2004 76.3333 47C76.3333 30.7996 63.2004 17.6667 47 17.6667C30.7996 17.6667 17.6667 30.7996 17.6667 47C17.6667 63.2004 30.7996 76.3333 47 76.3333ZM47 79C64.6731 79 79 64.6731 79 47C79 29.3269 64.6731 15 47 15C29.3269 15 15 29.3269 15 47C15 64.6731 29.3269 79 47 79Z\"\n          fill=\"#FF4A60\"\n        />\n      </g>\n      <g filter=\"url(#filter1_d_1044_28165)\">\n        <path\n          d=\"M56.3334 39.5466L54.4534 37.6666L47.0001 45.12L39.5467 37.6666L37.6667 39.5466L45.1201 47L37.6667 54.4533L39.5467 56.3333L47.0001 48.88L54.4534 56.3333L56.3334 54.4533L48.8801 47L56.3334 39.5466Z\"\n          fill=\"#FF4A60\"\n        />\n      </g>\n      <defs>\n        <filter\n          id=\"filter0_d_1044_28165\"\n          x=\"0\"\n          y=\"0\"\n          width=\"94\"\n          height=\"94\"\n          filterUnits=\"userSpaceOnUse\"\n          colorInterpolationFilters=\"sRGB\"\n        >\n          <feFlood floodOpacity=\"0\" result=\"BackgroundImageFix\" />\n          <feColorMatrix\n            in=\"SourceAlpha\"\n            type=\"matrix\"\n            values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\"\n            result=\"hardAlpha\"\n          />\n          <feOffset />\n          <feGaussianBlur stdDeviation=\"7.5\" />\n          <feColorMatrix\n            type=\"matrix\"\n            values=\"0 0 0 0 1 0 0 0 0 0.116667 0 0 0 0 0.222667 0 0 0 0.6 0\"\n          />\n          <feBlend mode=\"normal\" in2=\"BackgroundImageFix\" result=\"effect1_dropShadow_1044_28165\" />\n          <feBlend\n            mode=\"normal\"\n            in=\"SourceGraphic\"\n            in2=\"effect1_dropShadow_1044_28165\"\n            result=\"shape\"\n          />\n        </filter>\n        <filter\n          id=\"filter1_d_1044_28165\"\n          x=\"22.6667\"\n          y=\"22.6666\"\n          width=\"48.6667\"\n          height=\"48.6666\"\n          filterUnits=\"userSpaceOnUse\"\n          colorInterpolationFilters=\"sRGB\"\n        >\n          <feFlood floodOpacity=\"0\" result=\"BackgroundImageFix\" />\n          <feColorMatrix\n            in=\"SourceAlpha\"\n            type=\"matrix\"\n            values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\"\n            result=\"hardAlpha\"\n          />\n          <feOffset />\n          <feGaussianBlur stdDeviation=\"7.5\" />\n          <feColorMatrix\n            type=\"matrix\"\n            values=\"0 0 0 0 1 0 0 0 0 0.116667 0 0 0 0 0.222667 0 0 0 0.6 0\"\n          />\n          <feBlend mode=\"normal\" in2=\"BackgroundImageFix\" result=\"effect1_dropShadow_1044_28165\" />\n          <feBlend\n            mode=\"normal\"\n            in=\"SourceGraphic\"\n            in2=\"effect1_dropShadow_1044_28165\"\n            result=\"shape\"\n          />\n        </filter>\n      </defs>\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\nexport const WalletIcon = ({\n  width = '20px',\n  height = '20ox',\n  color = 'whiteAlpha.700',\n  ...props\n}: IconProps) => {\n  return (\n    <Icon width={width} color={color} height={height} viewBox=\"0 0 20 20\" fill=\"none\" {...props}>\n      <path\n        d=\"M6.58154 6.2701C6.23637 6.2701 5.95654 6.54993 5.95654 6.8951C5.95654 7.24028 6.23637 7.5201 6.58154 7.5201H10.3101C10.6553 7.5201 10.9351 7.24028 10.9351 6.8951C10.9351 6.54993 10.6553 6.2701 10.3101 6.2701H6.58154Z\"\n        fill=\"currentColor\"\n      />\n      <path\n        d=\"M13.972 9.10498C13.6268 9.10498 13.347 9.38481 13.347 9.72998C13.347 10.0752 13.6268 10.355 13.972 10.355H14.1873C14.5324 10.355 14.8123 10.0752 14.8123 9.72998C14.8123 9.38481 14.5324 9.10498 14.1873 9.10498H13.972Z\"\n        fill=\"currentColor\"\n      />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M17.2918 11.6311L17.2916 11.6447V12.3416C17.2916 14.6883 15.3892 16.5907 13.0426 16.5907H7.07331C4.72664 16.5907 2.82422 14.6883 2.82422 12.3416V7.38508C2.82422 5.0384 4.72664 3.13599 7.07331 3.13599H13.0426C15.3892 3.13599 17.2916 5.0384 17.2916 7.38508V7.90016L17.2918 7.91382L17.2916 7.92747V11.6174L17.2918 11.6311ZM7.07331 4.38599C5.41699 4.38599 4.07422 5.72876 4.07422 7.38508V12.3416C4.07422 13.9979 5.41699 15.3407 7.07331 15.3407H13.0426C14.6989 15.3407 16.0416 13.9979 16.0416 12.3416V12.2561H13.871C12.4998 12.2552 11.3876 11.1445 11.3867 9.77282C11.3867 8.40047 12.4998 7.28966 13.8706 7.28882H16.0401C15.9893 5.67705 14.6667 4.38599 13.0426 4.38599H7.07331ZM13.8714 11.0061H16.0416V8.53882H13.8712C13.1891 8.53932 12.6369 9.09162 12.6367 9.77223C12.6372 10.4535 13.1895 11.0056 13.8714 11.0061Z\"\n        fill=\"currentColor\"\n      />\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\nexport const LogoIcon = ({ color = 'cyan.400', width = '29', height = '21' }: IconProps) => {\n  return (\n    <Icon width={width} height={height} viewBox=\"0 0 29 21\" fill=\"none\" color={color}>\n      <path\n        d=\"M6.81239 5.45766C6.61525 5.22805 6.37254 5.11297 6.08372 5.11297H0.177C0.124536 5.11297 0.0816109 5.09606 0.0492845 5.06224C0.0164282 5.02898 0 4.99134 0 4.95098V0.89807C0 0.85771 0.0164282 0.820622 0.0492845 0.786807C0.0816109 0.752992 0.124536 0.736084 0.177 0.736084H6.41864C7.99362 0.736084 9.35239 1.39166 10.4944 2.70173L12.0106 4.58611L9.05721 8.25396L6.81239 5.45766ZM17.7207 2.68155C18.8627 1.38457 20.2278 0.736084 21.8161 0.736084H28.0381C28.0906 0.736084 28.1298 0.749719 28.1563 0.776444C28.1822 0.803714 28.1955 0.844074 28.1955 0.89807V4.95098C28.1955 4.99134 28.1822 5.02898 28.1563 5.06224C28.1298 5.09606 28.0906 5.11297 28.0381 5.11297H22.1314C21.8426 5.11297 21.5998 5.22805 21.4027 5.45766L17.0514 10.8479L21.4223 16.2785C21.6195 16.495 21.8553 16.603 22.1314 16.603H28.0381C28.0906 16.603 28.1298 16.6199 28.1563 16.6538C28.1822 16.6876 28.1955 16.7318 28.1955 16.7852V20.8381C28.1955 20.8785 28.1822 20.9161 28.1563 20.9494C28.1298 20.9832 28.0906 21.0001 28.0381 21.0001H21.8161C20.2278 21.0001 18.8691 20.3451 17.7403 19.0345L14.1176 14.5359L10.4944 19.0345C9.35239 20.3451 7.98727 21.0001 6.39903 21.0001H0.177C0.124536 21.0001 0.0847905 20.9832 0.0588234 20.9494C0.0323264 20.9156 0.0196078 20.8719 0.0196078 20.8174V16.7645C0.0196078 16.7241 0.0323264 16.687 0.0588234 16.6532C0.0847905 16.6194 0.124536 16.6025 0.177 16.6025H6.08372C6.35929 16.6025 6.602 16.488 6.81239 16.2578L11.0848 10.9488L17.7207 2.68155Z\"\n        fill=\"currentColor\"\n      />\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\nexport const BaseIcon = ({\n  width = '24px',\n  height = '24px',\n  fill = '#0052FF',\n  ...props\n}: IconProps) => {\n  return (\n    <Icon width={width} height={height} viewBox=\"0 0 24 24\" {...props}>\n      <circle cx=\"12\" cy=\"12\" r=\"12\" fill=\"white\" />\n      <g width=\"24\" height=\"24\" fill=\"white\">\n        <path\n          d=\"M11.9791 24C18.618 24 24 18.6274 24 12C24 5.37257 18.618 0 11.9791 0C5.6804 0 0.513182 4.8359 0 10.9913H15.8889V13.0087H8.6297e-08C0.513182 19.1641 5.6804 24 11.9791 24Z\"\n          fill={fill as string}\n        />\n      </g>\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\ninterface DiscordIcon extends IconProps {\n  fill?: string;\n}\n\nexport const DiscordIcon = ({ width = '15px', height = '15px', ...props }: DiscordIcon) => {\n  return (\n    <Icon width={width} height={height} viewBox=\"0 0 24 24\" fill=\"none\" {...props}>\n      <path\n        d=\"M9.84893 10.3091C9.247 10.3091 8.77179 10.8341 8.77179 11.4746C8.77179 12.1151 9.25756 12.6401 9.84893 12.6401C10.4509 12.6401 10.9261 12.1151 10.9261 11.4746C10.9366 10.8341 10.4509 10.3091 9.84893 10.3091ZM13.7034 10.3091C13.1015 10.3091 12.6263 10.8341 12.6263 11.4746C12.6263 12.1151 13.112 12.6401 13.7034 12.6401C14.3053 12.6401 14.7806 12.1151 14.7806 11.4746C14.7806 10.8341 14.3053 10.3091 13.7034 10.3091Z\"\n        fill=\"#FEFEFF\"\n      />\n      <path\n        d=\"M18.8354 1.49976H4.68468C3.49138 1.49976 2.51984 2.46578 2.51984 3.6628V17.8591C2.51984 19.0561 3.49138 20.0222 4.68468 20.0222H16.66L16.1003 18.0796L17.452 19.3291L18.7298 20.5052L21.0002 22.5002V3.6628C21.0002 2.46578 20.0287 1.49976 18.8354 1.49976ZM14.7591 15.2131C14.7591 15.2131 14.379 14.7615 14.0622 14.3625C15.4456 13.974 15.9736 13.113 15.9736 13.113C15.5406 13.3965 15.1288 13.596 14.7591 13.7325C14.2311 13.953 13.7242 14.1 13.2279 14.184C12.2141 14.373 11.2848 14.3205 10.4928 14.1735C9.89088 14.058 9.37343 13.89 8.94046 13.722C8.69757 13.6275 8.43357 13.512 8.16956 13.365C8.13788 13.344 8.1062 13.3335 8.07452 13.3125C8.0534 13.302 8.04284 13.2915 8.03228 13.281C7.84219 13.176 7.73659 13.1025 7.73659 13.1025C7.73659 13.1025 8.24348 13.9425 9.58463 14.3415C9.26782 14.7405 8.8771 15.2131 8.8771 15.2131C6.54328 15.1396 5.65623 13.617 5.65623 13.617C5.65623 10.2359 7.1769 7.49539 7.1769 7.49539C8.69757 6.36136 10.1443 6.39286 10.1443 6.39286L10.2499 6.51887C8.34908 7.06488 7.47258 7.8944 7.47258 7.8944C7.47258 7.8944 7.70491 7.76839 8.09564 7.58989C9.22558 7.09638 10.1232 6.95988 10.4928 6.92838C10.5562 6.91788 10.609 6.90737 10.6723 6.90737C11.3165 6.82337 12.0452 6.80237 12.8055 6.88637C13.8087 7.00188 14.8859 7.29588 15.9841 7.8944C15.9841 7.8944 15.1499 7.10688 13.3546 6.56087L13.5025 6.39286C13.5025 6.39286 14.9492 6.36136 16.4699 7.49539C16.4699 7.49539 17.9906 10.2359 17.9906 13.617C17.9906 13.617 17.093 15.1396 14.7591 15.2131Z\"\n        fill=\"#FEFEFF\"\n      />\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\nexport const XIcon = ({ ...props }: IconProps) => {\n  return (\n    <Icon viewBox=\"0 0 24 24\" fill=\"none\" {...props}>\n      <g clipPath=\"url(#clip0_14230_11024)\">\n        <path\n          d=\"M10.573 13.5844L4.98887 20.25H6.31212L11.1608 14.4623L15.0334 20.25H19.5L13.6438 11.498L19.5 4.50809H18.1767L13.0564 10.6201L8.9666 4.50809H4.5L10.5733 13.5844H10.573ZM12.3854 11.4209L12.9788 12.2924L17.6999 19.227H15.6673L11.8573 13.6306L11.264 12.7591L6.3115 5.48454H8.34405L12.3854 11.4206V11.4209Z\"\n          fill=\"white\"\n        />\n      </g>\n      <defs>\n        <clipPath id=\"clip0_14230_11024\">\n          <rect width=\"15\" height=\"15.75\" fill=\"white\" transform=\"matrix(-1 0 0 -1 19.5 20.25)\" />\n        </clipPath>\n      </defs>\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\nexport const GithubIcon = ({ ...props }: IconProps) => {\n  return (\n    <Icon viewBox=\"0 0 24 24\" fill=\"none\" {...props}>\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M12.0002 2.25049C6.61603 2.25049 2.25058 6.72675 2.25058 12.2476C2.25058 16.6642 5.04356 20.4121 8.91822 21.7331C9.40578 21.8258 9.58498 21.5163 9.58498 21.2514C9.58498 21.013 9.57529 20.2251 9.57207 19.3907C6.85819 19.995 6.28668 18.2121 6.28668 18.2121C5.84271 17.0566 5.20501 16.7487 5.20501 16.7487C4.32029 16.1279 5.2712 16.1411 5.2712 16.1411C6.24955 16.2123 6.76617 17.1708 6.76617 17.1708C7.63635 18.6988 9.04737 18.2568 9.60274 18.0018C9.68992 17.3562 9.94339 16.9142 10.2211 16.6642C8.05611 16.411 5.77975 15.5535 5.77975 11.7245C5.77975 10.6335 6.16075 9.74127 6.78393 9.04103C6.68222 8.7894 6.34964 7.77297 6.87757 6.39566C6.87757 6.39566 7.69609 6.12749 9.55915 7.42037C10.3373 7.19854 11.1704 7.08763 12.0002 7.08432C12.8284 7.08763 13.6631 7.19854 14.4428 7.42037C16.3043 6.12749 17.1212 6.39566 17.1212 6.39566C17.6523 7.77297 17.3181 8.7894 17.2164 9.04103C17.8412 9.74127 18.219 10.6335 18.219 11.7245C18.219 15.5634 15.9378 16.4093 13.768 16.6576C14.1183 16.9672 14.4299 17.5764 14.4299 18.5084C14.4299 19.846 14.4186 20.922 14.4186 21.2514C14.4186 21.5179 14.5946 21.8292 15.0886 21.7315C18.96 20.4088 21.7498 16.6626 21.7498 12.2476C21.7498 6.72675 17.3843 2.25049 12.0002 2.25049Z\"\n        fill=\"#FEFEFF\"\n      />\n      <path\n        d=\"M5.94295 16.6031C5.92196 16.6527 5.84447 16.6676 5.77505 16.6328C5.70401 16.5997 5.66526 16.5319 5.68787 16.4822C5.70885 16.4309 5.78473 16.4176 5.85577 16.4508C5.9268 16.4855 5.96716 16.5534 5.94295 16.6031Z\"\n        fill=\"#FEFEFF\"\n      />\n      <path\n        d=\"M6.33886 17.055C6.29204 17.0997 6.20163 17.0782 6.14028 17.0086C6.0757 16.9391 6.0644 16.8464 6.11122 16.8017C6.15965 16.757 6.24683 16.7785 6.31141 16.8481C6.37437 16.9176 6.38729 17.0103 6.33886 17.055Z\"\n        fill=\"#FEFEFF\"\n      />\n      <path\n        d=\"M6.72318 17.6313C6.66345 17.6743 6.56497 17.6346 6.50523 17.5452C6.4455 17.4558 6.4455 17.3498 6.50685 17.3068C6.56658 17.2638 6.66345 17.3018 6.7248 17.3912C6.78453 17.4806 6.78453 17.5882 6.72318 17.6313Z\"\n        fill=\"#FEFEFF\"\n      />\n      <path\n        d=\"M7.24861 18.1876C7.19533 18.2488 7.08071 18.2323 6.99837 18.1495C6.91281 18.0684 6.8902 17.9542 6.94348 17.8946C6.99837 17.8333 7.11138 17.8515 7.19533 17.9326C7.27928 18.0121 7.30512 18.128 7.24861 18.1876Z\"\n        fill=\"#FEFEFF\"\n      />\n      <path\n        d=\"M7.97585 18.5102C7.95164 18.588 7.84185 18.6244 7.73207 18.5913C7.62229 18.5565 7.54964 18.4655 7.57224 18.386C7.59484 18.3066 7.70463 18.2702 7.81602 18.3049C7.92742 18.3397 7.99846 18.4307 7.97585 18.5102Z\"\n        fill=\"#FEFEFF\"\n      />\n      <path\n        d=\"M8.77338 18.5695C8.77661 18.6523 8.68297 18.7202 8.56673 18.7218C8.45049 18.7251 8.35524 18.6573 8.35524 18.5762C8.35524 18.4934 8.44726 18.4255 8.5635 18.4239C8.67813 18.4222 8.77338 18.4884 8.77338 18.5695Z\"\n        fill=\"#FEFEFF\"\n      />\n      <path\n        d=\"M9.51542 18.4407C9.52995 18.5218 9.44923 18.6029 9.33299 18.6261C9.21998 18.6476 9.11504 18.598 9.10051 18.5185C9.08598 18.4357 9.16832 18.353 9.28133 18.3314C9.39757 18.3099 9.50089 18.3596 9.51542 18.4407Z\"\n        fill=\"#FEFEFF\"\n      />\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\nexport const WarpcastIcon = ({ ...props }: IconProps) => {\n  return (\n    <Icon viewBox=\"0 0 24 24\" fill=\"none\" {...props}>\n      <g clipPath=\"url(#clip0_14230_11037)\">\n        <path\n          d=\"M6.52381 7.30209C7.07677 9.37496 7.54202 11.0837 7.55756 11.0993C7.57316 11.1148 7.90732 9.92686 8.30024 8.45929L9.32137 4.64551L9.62823 3.5H12.0094C13.3191 3.5 14.3906 3.51182 14.3906 3.52623C14.3906 3.54974 16.36 10.9554 16.4034 11.0949C16.4133 11.1268 16.8207 9.64756 17.3088 7.80784C17.7969 5.96812 18.2549 4.24627 18.3265 3.98145L18.4566 3.5H21.1385C22.6135 3.5 23.8214 3.52245 23.8226 3.5498C23.8239 3.57716 22.7107 7.40183 21.349 12.0491L18.873 20.4985L16.5341 20.4993L14.1951 20.5L14.0945 20.1514C14.0392 19.9597 13.5453 18.2065 12.9969 16.2554C12.4485 14.3044 11.9924 12.7011 11.9833 12.6925C11.9742 12.6839 11.4737 14.4369 10.8711 16.5881L9.77539 20.4994L7.43902 20.4997C5.27152 20.5 5.10012 20.4916 5.06752 20.3838C5.04813 20.3199 3.93934 16.5472 2.60352 12C1.26769 7.45283 0.15877 3.67976 0.139312 3.61548C0.105777 3.50491 0.252535 3.49947 2.8111 3.51587L5.51842 3.5332L6.52381 7.30209Z\"\n          fill=\"white\"\n        />\n      </g>\n      <defs>\n        <clipPath id=\"clip0_14230_11037\">\n          <rect width=\"24\" height=\"24\" fill=\"white\" />\n        </clipPath>\n      </defs>\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\nexport const YoutubeIcon = ({ ...props }: IconProps) => {\n  return (\n    <Icon viewBox=\"0 0 24 24\" fill=\"none\" {...props}>\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M20.3943 4.94354C21.3075 5.18802 22.0253 5.90572 22.2697 6.81901C22.7115 8.47269 22.7133 11.925 22.7133 11.925C22.7133 11.925 22.7133 15.3773 22.2697 17.031C22.0253 17.9443 21.3075 18.662 20.3943 18.9064C18.7406 19.35 12.1066 19.35 12.1066 19.35C12.1066 19.35 5.47269 19.35 3.819 18.9064C2.90572 18.662 2.18802 17.9443 1.94354 17.031C1.5 15.3773 1.5 11.925 1.5 11.925C1.5 11.925 1.5 8.47269 1.94354 6.81901C2.18802 5.90572 2.90572 5.18802 3.819 4.94354C5.47269 4.5 12.1066 4.5 12.1066 4.5C12.1066 4.5 18.7406 4.5 20.3943 4.94354ZM15.4944 11.9254L9.98331 15.107V8.74375L15.4944 11.9254Z\"\n        fill=\"white\"\n      />\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\nexport const Sparkles = ({ ...props }: IconProps) => {\n  return (\n    <Icon width=\"15\" height=\"14\" viewBox=\"0 0 15 14\" fill=\"none\" {...props}>\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M5.75 3.30322C5.93307 3.30322 6.09678 3.41547 6.16031 3.58454L7.03581 5.91453L9.40183 6.7767C9.57352 6.83926 9.6875 7.00048 9.6875 7.18076C9.6875 7.36104 9.57352 7.52226 9.40183 7.58482L7.03581 8.44699L6.16031 10.777C6.09678 10.9461 5.93307 11.0583 5.75 11.0583C5.56693 11.0583 5.40322 10.9461 5.33969 10.777L4.46419 8.44699L2.09817 7.58482C1.92648 7.52226 1.8125 7.36104 1.8125 7.18076C1.8125 7.00048 1.92648 6.83926 2.09817 6.7767L4.46419 5.91453L5.33969 3.58454C5.40322 3.41547 5.56693 3.30322 5.75 3.30322ZM5.75 4.97554L5.21499 6.39936C5.17068 6.51728 5.07626 6.61026 4.95651 6.6539L3.51067 7.18076L4.95651 7.70762C5.07626 7.75126 5.17068 7.84424 5.21499 7.96217L5.75 9.38598L6.28501 7.96217C6.32932 7.84424 6.42374 7.75126 6.54349 7.70762L7.98933 7.18076L6.54349 6.6539C6.42374 6.61026 6.32932 6.51728 6.28501 6.39936L5.75 4.97554Z\"\n        fill=\"white\"\n      />\n      <path\n        d=\"M5.21499 6.39936L5.75 4.97554L6.28501 6.39936C6.32932 6.51728 6.42374 6.61026 6.54349 6.6539L7.98933 7.18076L6.54349 7.70762C6.42374 7.75126 6.32932 7.84424 6.28501 7.96217L5.75 9.38598L5.21499 7.96217C5.17068 7.84424 5.07626 7.75126 4.95651 7.70762L3.51067 7.18076L4.95651 6.6539C5.07626 6.61026 5.17068 6.51728 5.21499 6.39936Z\"\n        fill=\"white\"\n      />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M11.4103 2.14851C11.3468 1.97943 11.1831 1.86719 11 1.86719C10.8169 1.86719 10.6532 1.97943 10.5897 2.14851L10.1868 3.2206L9.09817 3.61731C8.92648 3.67988 8.8125 3.8411 8.8125 4.02138C8.8125 4.20166 8.92648 4.36287 9.09817 4.42544L10.1868 4.82215L10.5897 5.89424C10.6532 6.06332 10.8169 6.17556 11 6.17556C11.1831 6.17556 11.3468 6.06332 11.4103 5.89424L11.8132 4.82215L12.9018 4.42544C13.0735 4.36287 13.1875 4.20166 13.1875 4.02138C13.1875 3.8411 13.0735 3.67988 12.9018 3.61731L11.8132 3.2206L11.4103 2.14851Z\"\n        fill=\"white\"\n      />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M11.4103 8.46736C11.3468 8.29828 11.1831 8.18604 11 8.18604C10.8169 8.18604 10.6532 8.29828 10.5897 8.46736L10.1868 9.53945L9.09817 9.93616C8.92648 9.99872 8.8125 10.1599 8.8125 10.3402C8.8125 10.5205 8.92648 10.6817 9.09817 10.7443L10.1868 11.141L10.5897 12.2131C10.6532 12.3822 10.8169 12.4944 11 12.4944C11.1831 12.4944 11.3468 12.3822 11.4103 12.2131L11.8132 11.141L12.9018 10.7443C13.0735 10.6817 13.1875 10.5205 13.1875 10.3402C13.1875 10.1599 13.0735 9.99872 12.9018 9.93616L11.8132 9.53945L11.4103 8.46736Z\"\n        fill=\"white\"\n      />\n    </Icon>\n  );\n};\n","import { Icon, IconProps } from '@chakra-ui/react';\n\nexport const SNXChainIcon = ({ ...props }: IconProps) => {\n  return (\n    <Icon width=\"178px\" height=\"178px\" viewBox=\"0 0 178 178\" fill=\"none\" {...props}>\n      <circle cx=\"89.0198\" cy=\"88.4095\" r=\"88.305\" fill=\"#06061B\" />\n      <path\n        d=\"M68.0815 75.158C67.5149 74.5153 66.8174 74.1932 65.9874 74.1932H49.0126C48.8618 74.1932 48.7384 74.1459 48.6455 74.0512C48.5511 73.9581 48.5039 73.8528 48.5039 73.7398V62.3958C48.5039 62.2828 48.5511 62.179 48.6455 62.0844C48.7384 61.9897 48.8618 61.9424 49.0126 61.9424H66.9499C71.4761 61.9424 75.381 63.7773 78.6629 67.4442L83.0201 72.7185L74.5327 82.9848L68.0815 75.158ZM99.4299 67.3877C102.712 63.7575 106.635 61.9424 111.199 61.9424H129.08C129.231 61.9424 129.344 61.9805 129.42 62.0553C129.495 62.1317 129.533 62.2446 129.533 62.3958V73.7398C129.533 73.8528 129.495 73.9581 129.42 74.0512C129.344 74.1459 129.231 74.1932 129.08 74.1932H112.105C111.275 74.1932 110.578 74.5153 110.011 75.158L97.5064 90.2452L110.068 105.445C110.634 106.051 111.312 106.354 112.105 106.354H129.08C129.231 106.354 129.344 106.401 129.42 106.496C129.495 106.59 129.533 106.714 129.533 106.864V118.208C129.533 118.321 129.495 118.426 129.42 118.519C129.344 118.614 129.231 118.661 129.08 118.661H111.199C106.635 118.661 102.73 116.828 99.4863 113.159L89.0754 100.568L78.6629 113.159C75.381 116.828 71.4578 118.661 66.8936 118.661H49.0126C48.8618 118.661 48.7476 118.614 48.673 118.519C48.5968 118.424 48.5603 118.302 48.5603 118.15V106.806C48.5603 106.693 48.5968 106.589 48.673 106.494C48.7476 106.399 48.8618 106.352 49.0126 106.352H65.9874C66.7793 106.352 67.4768 106.032 68.0815 105.387L80.3595 90.5276L99.4299 67.3877Z\"\n        fill=\"#00D1FF\"\n      />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M1.62306 101.122C1.02459 96.9706 0.714844 92.7262 0.714844 88.4095C0.714844 85.5803 0.84789 82.7823 1.10807 80.0212L11.5198 67.3877C14.8017 63.7575 18.7248 61.9424 23.2891 61.9424H41.1701C41.3209 61.9424 41.4336 61.9805 41.5097 62.0553C41.5844 62.1317 41.6224 62.2446 41.6224 62.3958V73.7398C41.6224 73.8528 41.5844 73.9581 41.5097 74.0512C41.4336 74.1459 41.3209 74.1932 41.1701 74.1932H24.1953C23.3653 74.1932 22.6678 74.5153 22.1012 75.158L9.59627 90.2452L22.1576 105.445C22.7241 106.051 23.4018 106.354 24.1953 106.354H41.1701C41.3209 106.354 41.4336 106.401 41.5097 106.496C41.5844 106.59 41.6224 106.714 41.6224 106.864V118.208C41.6224 118.321 41.5844 118.426 41.5097 118.519C41.4336 118.614 41.3209 118.661 41.1701 118.661H23.2891C18.7248 118.661 14.82 116.828 11.5761 113.159L1.62306 101.122Z\"\n        fill=\"#00D1FF\"\n      />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M176.393 101.284C177.007 97.0816 177.325 92.7827 177.325 88.4095C177.325 85.5791 177.192 82.7799 176.931 80.0176L168.27 90.5276L155.992 105.387C155.387 106.032 154.689 106.352 153.898 106.352H136.923C136.772 106.352 136.658 106.399 136.583 106.494C136.507 106.589 136.47 106.693 136.47 106.806V118.15C136.47 118.302 136.507 118.424 136.583 118.519C136.658 118.614 136.772 118.661 136.923 118.661H154.804C159.368 118.661 163.291 116.828 166.573 113.159L176.393 101.284ZM153.898 74.1932C154.728 74.1932 155.425 74.5153 155.992 75.158L162.443 82.9848L170.93 72.7185L166.573 67.4442C163.291 63.7773 159.386 61.9424 154.86 61.9424H136.923C136.772 61.9424 136.649 61.9897 136.556 62.0844C136.461 62.179 136.414 62.2828 136.414 62.3958V73.7398C136.414 73.8528 136.461 73.9581 136.556 74.0512C136.649 74.1459 136.772 74.1932 136.923 74.1932H153.898Z\"\n        fill=\"#00D1FF\"\n      />\n    </Icon>\n  );\n};\n","import Wei, { wei } from '@synthetixio/wei';\nimport React, { createContext, useState, PropsWithChildren, Dispatch, SetStateAction } from 'react';\n\nexport const ManagePositionContext = createContext<{\n  collateralChange: Wei;\n  debtChange: Wei;\n  withdrawAmount: Wei;\n  setDebtChange: Dispatch<SetStateAction<Wei>>;\n  setCollateralChange: Dispatch<SetStateAction<Wei>>;\n  setWithdrawAmount: Dispatch<SetStateAction<Wei>>;\n}>({\n  collateralChange: wei(0),\n  debtChange: wei(0),\n  withdrawAmount: wei(0),\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  setDebtChange: () => {},\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  setCollateralChange: () => {},\n  setWithdrawAmount: () => {},\n});\n\nexport const ManagePositionProvider: React.FC<PropsWithChildren> = ({ children }) => {\n  const [debtChange, setDebtChange] = useState(wei(0));\n  const [collateralChange, setCollateralChange] = useState(wei(0));\n  const [withdrawAmount, setWithdrawAmount] = useState(wei(0));\n\n  return (\n    <ManagePositionContext.Provider\n      value={{\n        debtChange,\n        setDebtChange,\n        collateralChange,\n        setCollateralChange,\n        withdrawAmount,\n        setWithdrawAmount,\n      }}\n    >\n      {children}\n    </ManagePositionContext.Provider>\n  );\n};\n","import type { MarketSnapshotByWeekSchema, PoolType } from '@snx-v3/usePoolData';\nimport { z } from 'zod';\nimport { wei, Wei } from '@synthetixio/wei';\nimport { ZEROWEI } from '@snx-v3/constants';\n\ntype MarketSnapshotByWeek = z.infer<typeof MarketSnapshotByWeekSchema>;\n\nexport const calculateSevenDaysPnlGrowth = (marketSnapshots?: MarketSnapshotByWeek[]) => {\n  if (!marketSnapshots || marketSnapshots.length === 0) return undefined;\n  const end = marketSnapshots[0].pnl;\n  const start = marketSnapshots[1]?.pnl || wei(0);\n\n  return {\n    value: end.sub(start),\n    percentage: start.eq(0) ? undefined : end.sub(start).div(start.abs()),\n  };\n};\n\nexport const calculatePoolPerformanceLifetime = (poolData?: PoolType) => {\n  return poolData?.configurations.reduce((acc, { market }) => {\n    return acc.add(market.pnl);\n  }, wei(0));\n};\n\nexport const calculatePoolPerformanceSevenDays = (poolData?: PoolType) => {\n  const total = calculatePoolPerformanceLifetime(poolData);\n\n  const totalSevenDaysAgo = poolData?.configurations.reduce((acc, { market }) => {\n    return acc.add(market.market_snapshots_by_week[1]?.pnl || wei(0));\n  }, wei(0));\n\n  if (!total || !totalSevenDaysAgo) {\n    return undefined;\n  }\n\n  return {\n    value: total.sub(totalSevenDaysAgo), // Not that this value does not take into account that other pools might have exposure to markets\n    growthPercentage: totalSevenDaysAgo.eq(0)\n      ? undefined\n      : total.sub(totalSevenDaysAgo).div(totalSevenDaysAgo.abs()),\n  };\n};\n\nexport const calculateCRatio = (debt: Wei, collateralValue: Wei) =>\n  debt.eq(0) || collateralValue.eq(0) ? ZEROWEI : collateralValue.div(debt);\n","import { constants } from 'ethers';\nimport Wei from '@synthetixio/wei';\n\nexport const LOCAL_STORAGE_KEYS = {\n  SHOW_TESTNETS: 'SHOW_TESTNETS',\n};\nexport const ZEROWEI = new Wei(0);\nexport const ONEWEI = new Wei(1);\nexport const MAXUINT = new Wei(constants.MaxUint256);\n\nexport const GWEI_DECIMALS = 9;\nexport const GAS_LIMIT_MULTIPLIER = 1.5;\n\nexport const DEFAULT_QUERY_REFRESH_INTERVAL = 600_000; // 10min\nexport const DEFAULT_QUERY_STALE_TIME = 300_000; // 5min\n\nexport const INFURA_KEY = process.env.INFURA_KEY || '8678fe160b1f4d45ad3f3f71502fc57b';\nexport const ONBOARD_KEY = 'sec_jykTuCK0ZuqXWf3wNYqizxs2';\n\nexport const getSubgraphUrl = (networkName = 'optimism-mainnet') => {\n  switch (networkName) {\n    case 'mainnet':\n      return 'https://subgraph.satsuma-prod.com/ce5e03f52f3b/synthetix/synthetix-mainnet/api';\n    case 'sepolia':\n      return 'https://subgraph.satsuma-prod.com/ce5e03f52f3b/synthetix/synthetix-sepolia/api';\n    case 'optimism-mainnet':\n      return 'https://subgraph.satsuma-prod.com/ce5e03f52f3b/synthetix/synthetix-optimism-mainnet/api';\n    case 'arbitrum':\n      return `https://subgraph.satsuma-prod.com/ce5e03f52f3b/synthetix/synthetix-arbitrum-mainnet/api`;\n    case 'base-sepolia':\n      return 'https://subgraph.satsuma-prod.com/ce5e03f52f3b/synthetix/synthetix-base-sepolia-andromeda/api';\n    case 'base':\n      return 'https://subgraph.satsuma-prod.com/ce5e03f52f3b/synthetix/synthetix-base-mainnet-andromeda/api';\n    default:\n      return `https://subgraph.satsuma-prod.com/ce5e03f52f3b/synthetix/synthetix-${networkName}/api`;\n  }\n};\n\nexport const getAprUrl = (networkId = 8453) => {\n  switch (networkId) {\n    case 1:\n      return 'https://api.synthetix.io/v3/mainnet/sc-pool-apy-all';\n    case 8453:\n      return 'https://api.synthetix.io/v3/base/sc-pool-apy-all';\n    case 42161:\n      return 'https://api.synthetix.io/v3/arbitrum/sc-pool-apy-all';\n    default:\n      return `https://api.synthetix.io/v3/base/sc-pool-apy-all`;\n  }\n};\n\nexport const SESSION_STORAGE_KEYS = {\n  TERMS_CONDITIONS_ACCEPTED: 'TERMS_CONDITIONS_ACCEPTED',\n};\n\nexport const offchainMainnetEndpoint =\n  process.env.PYTH_MAINNET_ENDPOINT ||\n  'https://hermes-mainnet.rpc.extrnode.com/9b85d7db-f562-48e2-ab56-79c01f212582';\n\nexport const offchainTestnetEndpoint =\n  process.env.PYTH_TESTNET_ENDPOINT ||\n  'https://hermes-mainnet.rpc.extrnode.com/9b85d7db-f562-48e2-ab56-79c01f212582';\n","export async function importAccountProxy(chainId, preset) {\n  if (!preset) {\n    throw new Error(`Missing preset`);\n  }\n  const deployment = `${Number(chainId).toFixed(0)}-${preset}`;\n  switch (deployment) {\n    case '1-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/1-main/meta.json'),\n        import('@synthetixio/v3-contracts/1-main/AccountProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.AccountProxy, abi };\n    }\n    case '11155111-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/11155111-main/meta.json'),\n        import('@synthetixio/v3-contracts/11155111-main/AccountProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.AccountProxy, abi };\n    }\n    case '10-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/10-main/meta.json'),\n        import('@synthetixio/v3-contracts/10-main/AccountProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.AccountProxy, abi };\n    }\n    case '8453-andromeda': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/8453-andromeda/meta.json'),\n        import('@synthetixio/v3-contracts/8453-andromeda/AccountProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.AccountProxy, abi };\n    }\n    case '84532-andromeda': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/84532-andromeda/meta.json'),\n        import('@synthetixio/v3-contracts/84532-andromeda/AccountProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.AccountProxy, abi };\n    }\n    case '42161-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-main/meta.json'),\n        import('@synthetixio/v3-contracts/42161-main/AccountProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.AccountProxy, abi };\n    }\n    case '421614-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/421614-main/meta.json'),\n        import('@synthetixio/v3-contracts/421614-main/AccountProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.AccountProxy, abi };\n    }\n    default: {\n      throw new Error(`Unsupported deployment ${deployment} for AccountProxy`);\n    }\n  }\n}\n","export async function importAllErrors(chainId, preset) {\n  if (!preset) {\n    throw new Error(`Missing preset`);\n  }\n  const deployment = `${Number(chainId).toFixed(0)}-${preset}`;\n  switch (deployment) {\n    case '1-main': {\n      const [{ default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/1-main/AllErrors.readable.json'),\n      ]);\n      return { address: undefined, abi };\n    }\n    case '11155111-main': {\n      const [{ default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/11155111-main/AllErrors.readable.json'),\n      ]);\n      return { address: undefined, abi };\n    }\n    case '10-main': {\n      const [{ default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/10-main/AllErrors.readable.json'),\n      ]);\n      return { address: undefined, abi };\n    }\n    case '8453-andromeda': {\n      const [{ default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/8453-andromeda/AllErrors.readable.json'),\n      ]);\n      return { address: undefined, abi };\n    }\n    case '84532-andromeda': {\n      const [{ default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/84532-andromeda/AllErrors.readable.json'),\n      ]);\n      return { address: undefined, abi };\n    }\n    case '42161-main': {\n      const [{ default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-main/AllErrors.readable.json'),\n      ]);\n      return { address: undefined, abi };\n    }\n    case '421614-main': {\n      const [{ default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/421614-main/AllErrors.readable.json'),\n      ]);\n      return { address: undefined, abi };\n    }\n    default: {\n      throw new Error(`Unsupported deployment ${deployment} for AllErrors`);\n    }\n  }\n}\n","/*\nabi = [{\"inputs\":[{\"internalType\":\"address\",\"name\":\"walletAddress\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"tokenAddress\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"requiredAllowance\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"availableAllowance\",\"type\":\"uint256\"}],\"name\":\"NotEnoughAllowance\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"walletAddress\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"tokenAddress\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"requiredAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"availableAmount\",\"type\":\"uint256\"}],\"name\":\"NotEnoughBalance\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"coreProxyAddress\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"accountProxyAddress\",\"type\":\"address\"},{\"internalType\":\"uint128\",\"name\":\"accountId\",\"type\":\"uint128\"},{\"internalType\":\"uint128\",\"name\":\"poolId\",\"type\":\"uint128\"},{\"internalType\":\"address\",\"name\":\"collateralType\",\"type\":\"address\"}],\"name\":\"closePosition\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]\nInterface = require('ethers').utils.Interface\nnew Interface(abi).format();\n*/\n\nconst abi = [\n  'error NotEnoughAllowance(address walletAddress, address tokenAddress, uint256 requiredAllowance, uint256 availableAllowance)',\n  'error NotEnoughBalance(address walletAddress, address tokenAddress, uint256 requiredAmount, uint256 availableAmount)',\n  'function closePosition(address coreProxyAddress, address accountProxyAddress, uint128 accountId, uint128 poolId, address collateralType)',\n];\n\nexport async function importClosePosition(chainId, preset) {\n  const deployment = `${Number(chainId).toFixed(0)}-${preset}`;\n  switch (deployment) {\n    case '1-main': {\n      // https://etherscan.io/address/0x800b12d24ebb639bce7280861b05149f0d60f99e#code\n      return { address: '0x800b12d24ebb639bce7280861b05149f0d60f99e', abi };\n    }\n    case '11155111-main': {\n      // https://sepolia.etherscan.io/address/0xcc998ef6d1923f206be1fed700eb1afebd69fbce#code\n      return { address: '0xcc998ef6d1923f206be1fed700eb1afebd69fbce', abi };\n    }\n    case '42161-main': {\n      // https://arbiscan.io/address/0x28551921507790D91260d8eD08E3D688d525A752#code\n      return { address: '0x28551921507790D91260d8eD08E3D688d525A752', abi };\n    }\n    case '421614-main': {\n      // https://sepolia.arbiscan.io/address/0x0482BD380d46bCC924f3DD29307ECdAad8fF2a0C#code\n      return { address: '0x0482BD380d46bCC924f3DD29307ECdAad8fF2a0C', abi };\n    }\n    default: {\n      throw new Error(`Unsupported deployment ${deployment} for ClosePosition`);\n    }\n  }\n}\n","export async function importCoreProxy(chainId, preset) {\n  if (!preset) {\n    throw new Error(`Missing preset`);\n  }\n  const deployment = `${Number(chainId).toFixed(0)}-${preset}`;\n  switch (deployment) {\n    case '1-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/1-main/meta.json'),\n        import('@synthetixio/v3-contracts/1-main/CoreProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.CoreProxy, abi };\n    }\n    case '11155111-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/11155111-main/meta.json'),\n        import('@synthetixio/v3-contracts/11155111-main/CoreProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.CoreProxy, abi };\n    }\n    case '10-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/10-main/meta.json'),\n        import('@synthetixio/v3-contracts/10-main/CoreProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.CoreProxy, abi };\n    }\n    case '8453-andromeda': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/8453-andromeda/meta.json'),\n        import('@synthetixio/v3-contracts/8453-andromeda/CoreProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.CoreProxy, abi };\n    }\n    case '84532-andromeda': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/84532-andromeda/meta.json'),\n        import('@synthetixio/v3-contracts/84532-andromeda/CoreProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.CoreProxy, abi };\n    }\n    case '42161-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-main/meta.json'),\n        import('@synthetixio/v3-contracts/42161-main/CoreProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.CoreProxy, abi };\n    }\n    case '421614-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/421614-main/meta.json'),\n        import('@synthetixio/v3-contracts/421614-main/CoreProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.CoreProxy, abi };\n    }\n    default: {\n      throw new Error(`Unsupported deployment ${deployment} for CoreProxy`);\n    }\n  }\n}\n","const abi = [\n  'function aggregate(tuple(address target, bytes callData)[] calls) payable returns (uint256 blockNumber, bytes[] returnData)',\n  'function blockAndAggregate(tuple(address target, bytes callData)[] calls) payable returns (uint256 blockNumber, bytes32 blockHash, tuple(bool success, bytes returnData)[] returnData)',\n  'function getBasefee() view returns (uint256 basefee)',\n  'function getBlockHash(uint256 blockNumber) view returns (bytes32 blockHash)',\n  'function getBlockNumber() view returns (uint256 blockNumber)',\n  'function getChainId() view returns (uint256 chainid)',\n  'function getCurrentBlockCoinbase() view returns (address coinbase)',\n  'function getCurrentBlockDifficulty() view returns (uint256 difficulty)',\n  'function getCurrentBlockGasLimit() view returns (uint256 gaslimit)',\n  'function getCurrentBlockTimestamp() view returns (uint256 timestamp)',\n  'function getEthBalance(address addr) view returns (uint256 balance)',\n  'function getLastBlockHash() view returns (bytes32 blockHash)',\n  'function tryAggregate(bool requireSuccess, tuple(address target, bytes callData)[] calls) payable returns (tuple(bool success, bytes returnData)[] returnData)',\n  'function tryBlockAndAggregate(bool requireSuccess, tuple(address target, bytes callData)[] calls) payable returns (uint256 blockNumber, bytes32 blockHash, tuple(bool success, bytes returnData)[] returnData)',\n  'function aggregate3(tuple(address target, bool allowFailure, bytes callData)[] calls) payable returns (tuple(bool success, bytes returnData)[] returnData)',\n  'function aggregate3Value(tuple(address target, bool allowFailure, uint256 value, bytes callData)[] calls) payable returns (tuple(bool success, bytes returnData)[] returnData)',\n];\n\nexport async function importMulticall3(chainId, preset) {\n  const deployment = `${Number(chainId).toFixed(0)}-${preset}`;\n  switch (deployment) {\n    case '1-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/1-main/meta.json'),\n        import('@synthetixio/v3-contracts/1-main/TrustedMulticallForwarder.readable.json'),\n      ]);\n      return { address: meta.contracts.TrustedMulticallForwarder, abi };\n    }\n    case '11155111-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/11155111-main/meta.json'),\n        import('@synthetixio/v3-contracts/11155111-main/TrustedMulticallForwarder.readable.json'),\n      ]);\n      return { address: meta.contracts.TrustedMulticallForwarder, abi };\n    }\n    case '10-main': {\n      const { optimism } = await import('viem/chains');\n      return { address: optimism.contracts.multicall3.address, abi };\n    }\n    case '8453-andromeda': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/8453-andromeda/meta.json'),\n        import('@synthetixio/v3-contracts/8453-andromeda/TrustedMulticallForwarder.readable.json'),\n      ]);\n      return { address: meta.contracts.TrustedMulticallForwarder, abi };\n    }\n    case '84532-andromeda': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/84532-andromeda/meta.json'),\n        import('@synthetixio/v3-contracts/84532-andromeda/TrustedMulticallForwarder.readable.json'),\n      ]);\n      return { address: meta.contracts.TrustedMulticallForwarder, abi };\n    }\n    case '42161-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-main/meta.json'),\n        import('@synthetixio/v3-contracts/42161-main/TrustedMulticallForwarder.readable.json'),\n      ]);\n      return { address: meta.contracts.TrustedMulticallForwarder, abi };\n    }\n    case '421614-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/421614-main/meta.json'),\n        import('@synthetixio/v3-contracts/421614-main/TrustedMulticallForwarder.readable.json'),\n      ]);\n      return { address: meta.contracts.TrustedMulticallForwarder, abi };\n    }\n    default: {\n      throw new Error(`Unsupported deployment ${deployment} for Multicall3`);\n    }\n  }\n}\n","export async function importPythERC7412Wrapper(chainId, preset) {\n  if (!preset) {\n    throw new Error(`Missing preset`);\n  }\n  const deployment = `${Number(chainId).toFixed(0)}-${preset}`;\n  switch (deployment) {\n    case '8453-andromeda': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/8453-andromeda/meta.json'),\n        import('@synthetixio/v3-contracts/8453-andromeda/PythERC7412Wrapper.readable.json'),\n      ]);\n      return { address: meta.contracts.PythERC7412Wrapper, abi };\n    }\n    case '84532-andromeda': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/84532-andromeda/meta.json'),\n        import('@synthetixio/v3-contracts/84532-andromeda/PythERC7412Wrapper.readable.json'),\n      ]);\n      return { address: meta.contracts.PythERC7412Wrapper, abi };\n    }\n    case '11155111-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/11155111-main/meta.json'),\n        import('@synthetixio/v3-contracts/11155111-main/PythERC7412Wrapper.readable.json'),\n      ]);\n      return { address: meta.contracts.PythERC7412Wrapper, abi };\n    }\n    case '42161-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-main/meta.json'),\n        import('@synthetixio/v3-contracts/42161-main/PythERC7412Wrapper.readable.json'),\n      ]);\n      return { address: meta.contracts.PythERC7412Wrapper, abi };\n    }\n    case '421614-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/421614-main/meta.json'),\n        import('@synthetixio/v3-contracts/421614-main/PythERC7412Wrapper.readable.json'),\n      ]);\n      return { address: meta.contracts.PythERC7412Wrapper, abi };\n    }\n    default: {\n      throw new Error(`Unsupported deployment ${deployment} for PythERC7412Wrapper`);\n    }\n  }\n}\n","export async function importPythFeeds(chainId, preset) {\n  if (!preset) {\n    throw new Error(`Missing preset`);\n  }\n  const deployment = `${Number(chainId).toFixed(0)}-${preset}`;\n  switch (deployment) {\n    case '1-main': {\n      const [{ default: pythFeeds }] = await Promise.all([\n        import('@synthetixio/v3-contracts/1-main/pythFeeds.json'),\n      ]);\n      return pythFeeds;\n    }\n    case '11155111-main': {\n      const [{ default: pythFeeds }] = await Promise.all([\n        import('@synthetixio/v3-contracts/11155111-main/pythFeeds.json'),\n      ]);\n      return pythFeeds;\n    }\n    case '10-main': {\n      const [{ default: pythFeeds }] = await Promise.all([\n        import('@synthetixio/v3-contracts/10-main/pythFeeds.json'),\n      ]);\n      return pythFeeds;\n    }\n    case '8453-andromeda': {\n      const [{ default: pythFeeds }] = await Promise.all([\n        import('@synthetixio/v3-contracts/8453-andromeda/pythFeeds.json'),\n      ]);\n      return pythFeeds;\n    }\n    case '84532-andromeda': {\n      const [{ default: pythFeeds }] = await Promise.all([\n        import('@synthetixio/v3-contracts/84532-andromeda/pythFeeds.json'),\n      ]);\n      return pythFeeds;\n    }\n    case '42161-main': {\n      const [{ default: pythFeeds }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-main/pythFeeds.json'),\n      ]);\n      return pythFeeds;\n    }\n    case '421614-main': {\n      const [{ default: pythFeeds }] = await Promise.all([\n        import('@synthetixio/v3-contracts/421614-main/pythFeeds.json'),\n      ]);\n      return pythFeeds;\n    }\n    default: {\n      throw new Error(`Unsupported deployment ${deployment} for pythFeeds`);\n    }\n  }\n}\n","// [\n//   \"constructor()\",\n//   \"error InsufficientFee()\",\n//   \"error InvalidArgument()\",\n//   \"error InvalidGovernanceDataSource()\",\n//   \"error InvalidGovernanceMessage()\",\n//   \"error InvalidGovernanceTarget()\",\n//   \"error InvalidUpdateData()\",\n//   \"error InvalidUpdateDataSource()\",\n//   \"error InvalidWormholeAddressToSet()\",\n//   \"error InvalidWormholeVaa()\",\n//   \"error NoFreshUpdate()\",\n//   \"error OldGovernanceMessage()\",\n//   \"error PriceFeedNotFound()\",\n//   \"error PriceFeedNotFoundWithinRange()\",\n//   \"error StalePrice()\",\n//   \"event AdminChanged(address previousAdmin, address newAdmin)\",\n//   \"event BatchPriceFeedUpdate(uint16 chainId, uint64 sequenceNumber)\",\n//   \"event BeaconUpgraded(address indexed beacon)\",\n//   \"event ContractUpgraded(address oldImplementation, address newImplementation)\",\n//   \"event DataSourcesSet(tuple(uint16 chainId, bytes32 emitterAddress)[] oldDataSources, tuple(uint16 chainId, bytes32 emitterAddress)[] newDataSources)\",\n//   \"event FeeSet(uint256 oldFee, uint256 newFee)\",\n//   \"event GovernanceDataSourceSet(tuple(uint16 chainId, bytes32 emitterAddress) oldDataSource, tuple(uint16 chainId, bytes32 emitterAddress) newDataSource, uint64 initialSequence)\",\n//   \"event Initialized(uint8 version)\",\n//   \"event OwnershipTransferred(address indexed previousOwner, address indexed newOwner)\",\n//   \"event PriceFeedUpdate(bytes32 indexed id, uint64 publishTime, int64 price, uint64 conf)\",\n//   \"event Upgraded(address indexed implementation)\",\n//   \"event ValidPeriodSet(uint256 oldValidPeriod, uint256 newValidPeriod)\",\n//   \"event WormholeAddressSet(address oldWormholeAddress, address newWormholeAddress)\",\n//   \"function chainId() view returns (uint16)\",\n//   \"function executeGovernanceInstruction(bytes encodedVM)\",\n//   \"function getEmaPrice(bytes32 id) view returns (tuple(int64 price, uint64 conf, int32 expo, uint256 publishTime) price)\",\n//   \"function getEmaPriceNoOlderThan(bytes32 id, uint256 age) view returns (tuple(int64 price, uint64 conf, int32 expo, uint256 publishTime) price)\",\n//   \"function getEmaPriceUnsafe(bytes32 id) view returns (tuple(int64 price, uint64 conf, int32 expo, uint256 publishTime) price)\",\n//   \"function getPrice(bytes32 id) view returns (tuple(int64 price, uint64 conf, int32 expo, uint256 publishTime) price)\",\n//   \"function getPriceNoOlderThan(bytes32 id, uint256 age) view returns (tuple(int64 price, uint64 conf, int32 expo, uint256 publishTime) price)\",\n//   \"function getPriceUnsafe(bytes32 id) view returns (tuple(int64 price, uint64 conf, int32 expo, uint256 publishTime) price)\",\n//   \"function getUpdateFee(bytes[] updateData) view returns (uint256 feeAmount)\",\n//   \"function getUpdateFee(uint256 updateDataSize) view returns (uint256 feeAmount)\",\n//   \"function getValidTimePeriod() view returns (uint256)\",\n//   \"function governanceDataSource() view returns (tuple(uint16 chainId, bytes32 emitterAddress))\",\n//   \"function governanceDataSourceIndex() view returns (uint32)\",\n//   \"function hashDataSource(tuple(uint16 chainId, bytes32 emitterAddress) ds) pure returns (bytes32)\",\n//   \"function initialize(address wormhole, uint16[] dataSourceEmitterChainIds, bytes32[] dataSourceEmitterAddresses, uint16 governanceEmitterChainId, bytes32 governanceEmitterAddress, uint64 governanceInitialSequence, uint256 validTimePeriodSeconds, uint256 singleUpdateFeeInWei)\",\n//   \"function isValidDataSource(uint16 dataSourceChainId, bytes32 dataSourceEmitterAddress) view returns (bool)\",\n//   \"function isValidGovernanceDataSource(uint16 governanceChainId, bytes32 governanceEmitterAddress) view returns (bool)\",\n//   \"function lastExecutedGovernanceSequence() view returns (uint64)\",\n//   \"function latestPriceInfoPublishTime(bytes32 priceId) view returns (uint64)\",\n//   \"function owner() view returns (address)\",\n//   \"function parseAuthorizeGovernanceDataSourceTransferPayload(bytes encodedPayload) pure returns (tuple(bytes claimVaa) sgds)\",\n//   \"function parseGovernanceInstruction(bytes encodedInstruction) pure returns (tuple(uint8 module, uint8 action, uint16 targetChainId, bytes payload) gi)\",\n//   \"function parsePriceFeedUpdates(bytes[] updateData, bytes32[] priceIds, uint64 minPublishTime, uint64 maxPublishTime) payable returns (tuple(bytes32 id, tuple(int64 price, uint64 conf, int32 expo, uint256 publishTime) price, tuple(int64 price, uint64 conf, int32 expo, uint256 publishTime) emaPrice)[] priceFeeds)\",\n//   \"function parsePriceFeedUpdatesUnique(bytes[] updateData, bytes32[] priceIds, uint64 minPublishTime, uint64 maxPublishTime) payable returns (tuple(bytes32 id, tuple(int64 price, uint64 conf, int32 expo, uint256 publishTime) price, tuple(int64 price, uint64 conf, int32 expo, uint256 publishTime) emaPrice)[] priceFeeds)\",\n//   \"function parseRequestGovernanceDataSourceTransferPayload(bytes encodedPayload) pure returns (tuple(uint32 governanceDataSourceIndex) sgdsClaim)\",\n//   \"function parseSetDataSourcesPayload(bytes encodedPayload) pure returns (tuple(tuple(uint16 chainId, bytes32 emitterAddress)[] dataSources) sds)\",\n//   \"function parseSetFeePayload(bytes encodedPayload) pure returns (tuple(uint256 newFee) sf)\",\n//   \"function parseSetValidPeriodPayload(bytes encodedPayload) pure returns (tuple(uint256 newValidPeriod) svp)\",\n//   \"function parseSetWormholeAddressPayload(bytes encodedPayload) pure returns (tuple(address newWormholeAddress) sw)\",\n//   \"function parseUpgradeContractPayload(bytes encodedPayload) pure returns (tuple(address newImplementation) uc)\",\n//   \"function priceFeedExists(bytes32 id) view returns (bool)\",\n//   \"function proxiableUUID() view returns (bytes32)\",\n//   \"function pythUpgradableMagic() pure returns (uint32)\",\n//   \"function queryPriceFeed(bytes32 id) view returns (tuple(bytes32 id, tuple(int64 price, uint64 conf, int32 expo, uint256 publishTime) price, tuple(int64 price, uint64 conf, int32 expo, uint256 publishTime) emaPrice) priceFeed)\",\n//   \"function renounceOwnership()\",\n//   \"function singleUpdateFeeInWei() view returns (uint256)\",\n//   \"function transferOwnership(address newOwner)\",\n//   \"function updatePriceFeeds(bytes[] updateData) payable\",\n//   \"function updatePriceFeedsIfNecessary(bytes[] updateData, bytes32[] priceIds, uint64[] publishTimes) payable\",\n//   \"function upgradeTo(address newImplementation)\",\n//   \"function upgradeToAndCall(address newImplementation, bytes data) payable\",\n//   \"function validDataSources() view returns (tuple(uint16 chainId, bytes32 emitterAddress)[])\",\n//   \"function validTimePeriodSeconds() view returns (uint256)\",\n//   \"function version() pure returns (string)\",\n//   \"function wormhole() view returns (address)\"\n// ]\nconst abi = ['function updatePriceFeeds(bytes[] updateData) payable'];\n\nexport async function importPythVerfier(chainId, preset) {\n  if (!preset) {\n    throw new Error(`Missing preset`);\n  }\n  const deployment = `${Number(chainId).toFixed(0)}-${preset}`;\n\n  switch (deployment) {\n    case '1-main': {\n      return {\n        address: '0x4305FB66699C3B2702D4d05CF36551390A4c69C6',\n        abi,\n      };\n    }\n    case '11155111-main': {\n      return {\n        address: '0xDd24F84d36BF92C65F92307595335bdFab5Bbd21',\n        abi,\n      };\n    }\n    case '10-main': {\n      return {\n        address: '0xff1a0f4744e8582DF1aE09D5611b887B6a12925C',\n        abi,\n      };\n    }\n    case '8453-andromeda': {\n      return {\n        address: '0x8250f4aF4B972684F7b336503E2D6dFeDeB1487a',\n        abi,\n      };\n    }\n    case '84532-andromeda': {\n      return {\n        address: '0xA2aa501b19aff244D90cc15a4Cf739D2725B5729',\n        abi,\n      };\n    }\n    case '42161-main': {\n      return {\n        address: '0xff1a0f4744e8582DF1aE09D5611b887B6a12925C',\n        abi,\n      };\n    }\n    case '421614-main': {\n      return {\n        address: '0x4374e5a8b9C22271E9EB878A2AA31DE97DF15DAF',\n        abi,\n      };\n    }\n    default: {\n      throw new Error(`Unsupported deployment ${deployment} for Extras`);\n    }\n  }\n}\n","export async function importUSDProxy(chainId, preset) {\n  if (!preset) {\n    throw new Error(`Missing preset`);\n  }\n  const deployment = `${Number(chainId).toFixed(0)}-${preset}`;\n  switch (deployment) {\n    case '1-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/1-main/meta.json'),\n        import('@synthetixio/v3-contracts/1-main/USDProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.USDProxy, abi };\n    }\n    case '11155111-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/11155111-main/meta.json'),\n        import('@synthetixio/v3-contracts/11155111-main/USDProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.USDProxy, abi };\n    }\n    case '10-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/10-main/meta.json'),\n        import('@synthetixio/v3-contracts/10-main/USDProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.USDProxy, abi };\n    }\n    case '8453-andromeda': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/8453-andromeda/meta.json'),\n        import('@synthetixio/v3-contracts/8453-andromeda/USDProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.USDProxy, abi };\n    }\n    case '84532-andromeda': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/84532-andromeda/meta.json'),\n        import('@synthetixio/v3-contracts/84532-andromeda/USDProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.USDProxy, abi };\n    }\n    case '42161-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-main/meta.json'),\n        import('@synthetixio/v3-contracts/42161-main/USDProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.USDProxy, abi };\n    }\n    case '421614-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/421614-main/meta.json'),\n        import('@synthetixio/v3-contracts/421614-main/USDProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.USDProxy, abi };\n    }\n    default: {\n      throw new Error(`Unsupported deployment ${deployment} for USDProxy`);\n    }\n  }\n}\n","import { importClosePosition } from '@snx-v3/contracts';\nimport { Network, useNetwork } from '@snx-v3/useBlockchain';\nimport { useQuery } from '@tanstack/react-query';\n\nexport function useClosePosition(customNetwork?: Network) {\n  const { network } = useNetwork();\n  const targetNetwork = customNetwork || network;\n\n  return useQuery({\n    queryKey: [`${targetNetwork?.id}-${targetNetwork?.preset}`, 'ClosePosition'],\n    enabled: Boolean(targetNetwork),\n    queryFn: async function () {\n      if (!targetNetwork) throw 'OMFG';\n      return importClosePosition(targetNetwork.id, targetNetwork.preset);\n    },\n    staleTime: Infinity,\n    // On some chains this is not available, and that is expected\n    throwOnError: false,\n  });\n}\n","import { importCoreProxy } from '@snx-v3/contracts';\nimport { Network, useNetwork } from '@snx-v3/useBlockchain';\nimport { useQuery } from '@tanstack/react-query';\n\nexport function useCoreProxy(customNetwork?: Network) {\n  const { network } = useNetwork();\n  const targetNetwork = customNetwork || network;\n\n  return useQuery({\n    queryKey: [`${targetNetwork?.id}-${targetNetwork?.preset}`, 'CoreProxy'],\n    enabled: Boolean(targetNetwork),\n    queryFn: async function () {\n      if (!targetNetwork) throw 'OMFG';\n      return importCoreProxy(targetNetwork.id, targetNetwork.preset);\n    },\n    staleTime: Infinity,\n    // On some chains this is not available, and that is expected\n    throwOnError: false,\n  });\n}\n","const abi = [\n  'function depositDebtToRepay(address synthetixCore, address spotMarket, uint128 accountId, uint128 poolId, address collateralType, uint128 spotMarketId)',\n];\n\nexport async function importDebtRepayer(chainId, preset) {\n  const deployment = `${Number(chainId).toFixed(0)}-${preset}`;\n  switch (deployment) {\n    case '8453-andromeda': {\n      // https://basescan.org/address/0xBD8004ea5c73E33d405d35d594221Efc733F7E37#code\n      return { address: '0xBD8004ea5c73E33d405d35d594221Efc733F7E37', abi };\n    }\n    case '84532-andromeda': {\n      // https://sepolia.basescan.org/address/0x0d08ff9e0ceddf81a85bc160d5d378eea7a1e200#code\n      return { address: '0x0d08ff9e0ceddf81a85bc160d5d378eea7a1e200', abi };\n    }\n    // Arbitrum contracts cannot be the same as Base as the workflow is different\n    //    case '42161-main': {\n    //      // https://arbiscan.io/address/0x2305f5f9ef3abf0d6d02411aca44f85113b247af#code\n    //      return { address: '0x2305f5f9ef3abf0d6d02411aca44f85113b247af', abi };\n    //    }\n    //    case '421614-main': {\n    //      // https://sepolia.arbiscan.io/address/0xd88de2ee855f145ab1ecfff8273661c3d59fc8ad#code\n    //      return { address: '0xd88de2ee855f145ab1ecfff8273661c3d59fc8ad', abi };\n    //    }\n    default: {\n      throw new Error(`Unsupported deployment ${deployment} for DebtRepayer`);\n    }\n  }\n}\n","import { importDebtRepayer } from '@snx-v3/contracts';\nimport { Network, useNetwork } from '@snx-v3/useBlockchain';\nimport { useQuery } from '@tanstack/react-query';\n\nexport function useDebtRepayer(customNetwork?: Network) {\n  const { network } = useNetwork();\n  const targetNetwork = customNetwork || network;\n\n  return useQuery({\n    queryKey: [`${targetNetwork?.id}-${targetNetwork?.preset}`, 'DebtRepayer'],\n    enabled: Boolean(targetNetwork),\n    queryFn: async function () {\n      if (!targetNetwork) throw new Error('OMFG');\n      return importDebtRepayer(targetNetwork.id, targetNetwork.preset);\n    },\n    staleTime: Infinity,\n    // On some chains this is not available, and that is expected\n    throwOnError: false,\n  });\n}\n","import { importSpotMarketProxy } from '@snx-v3/contracts';\nimport { Network, useNetwork } from '@snx-v3/useBlockchain';\nimport { useQuery } from '@tanstack/react-query';\n\nexport function useSpotMarketProxy(customNetwork?: Network) {\n  const { network } = useNetwork();\n  const targetNetwork = customNetwork || network;\n\n  return useQuery({\n    queryKey: [`${targetNetwork?.id}-${targetNetwork?.preset}`, 'SpotMarketProxy'],\n    enabled: Boolean(targetNetwork),\n    queryFn: async function () {\n      if (!targetNetwork) throw new Error('OMFG');\n      return importSpotMarketProxy(targetNetwork.id, targetNetwork.preset);\n    },\n    staleTime: Infinity,\n    // On some chains this is not available, and that is expected\n    throwOnError: false,\n  });\n}\n","export async function importSpotMarketProxy(chainId, preset) {\n  if (!preset) {\n    throw new Error(`Missing preset`);\n  }\n  const deployment = `${Number(chainId).toFixed(0)}-${preset}`;\n  switch (deployment) {\n    case '1-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/1-main/meta.json'),\n        import('@synthetixio/v3-contracts/1-main/SpotMarketProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.SpotMarketProxy, abi };\n    }\n    case '11155111-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/11155111-main/meta.json'),\n        import('@synthetixio/v3-contracts/11155111-main/SpotMarketProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.SpotMarketProxy, abi };\n    }\n    case '10-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/10-main/meta.json'),\n        import('@synthetixio/v3-contracts/10-main/SpotMarketProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.SpotMarketProxy, abi };\n    }\n    case '8453-andromeda': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/8453-andromeda/meta.json'),\n        import('@synthetixio/v3-contracts/8453-andromeda/SpotMarketProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.SpotMarketProxy, abi };\n    }\n    case '84532-andromeda': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/84532-andromeda/meta.json'),\n        import('@synthetixio/v3-contracts/84532-andromeda/SpotMarketProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.SpotMarketProxy, abi };\n    }\n    case '42161-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-main/meta.json'),\n        import('@synthetixio/v3-contracts/42161-main/SpotMarketProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.SpotMarketProxy, abi };\n    }\n    case '421614-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/421614-main/meta.json'),\n        import('@synthetixio/v3-contracts/421614-main/SpotMarketProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.SpotMarketProxy, abi };\n    }\n    default: {\n      throw new Error(`Unsupported deployment ${deployment} for SpotMarketProxy`);\n    }\n  }\n}\n","import { importSystemToken } from '@snx-v3/contracts';\nimport { Network, useNetwork } from '@snx-v3/useBlockchain';\nimport { useQuery } from '@tanstack/react-query';\n\nexport function useSystemToken(customNetwork?: Network) {\n  const { network } = useNetwork();\n  const targetNetwork = customNetwork || network;\n\n  return useQuery({\n    queryKey: [`${targetNetwork?.id}-${targetNetwork?.preset}`, 'SystemToken'],\n    enabled: Boolean(targetNetwork),\n    queryFn: async function () {\n      if (!targetNetwork) throw new Error('OMFG');\n      return importSystemToken(targetNetwork.id, targetNetwork.preset);\n    },\n    staleTime: Infinity,\n    // On some chains this is not available, and that is expected\n    throwOnError: false,\n  });\n}\n","export async function importSystemToken(chainId, preset) {\n  if (!preset) {\n    throw new Error(`Missing preset`);\n  }\n  const deployment = `${Number(chainId).toFixed(0)}-${preset}`;\n  switch (deployment) {\n    case '1-main': {\n      const [{ default: systemToken }] = await Promise.all([\n        import('@synthetixio/v3-contracts/1-main/systemToken.json'),\n      ]);\n      return systemToken;\n    }\n    case '11155111-main': {\n      const [{ default: systemToken }] = await Promise.all([\n        import('@synthetixio/v3-contracts/11155111-main/systemToken.json'),\n      ]);\n      return systemToken;\n    }\n    case '10-main': {\n      const [{ default: systemToken }] = await Promise.all([\n        import('@synthetixio/v3-contracts/10-main/systemToken.json'),\n      ]);\n      return systemToken;\n    }\n    case '8453-andromeda': {\n      const [{ default: systemToken }] = await Promise.all([\n        import('@synthetixio/v3-contracts/8453-andromeda/systemToken.json'),\n      ]);\n      return systemToken;\n    }\n    case '84532-andromeda': {\n      const [{ default: systemToken }] = await Promise.all([\n        import('@synthetixio/v3-contracts/84532-andromeda/systemToken.json'),\n      ]);\n      return systemToken;\n    }\n    case '42161-main': {\n      const [{ default: systemToken }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-main/systemToken.json'),\n      ]);\n      return systemToken;\n    }\n    case '421614-main': {\n      const [{ default: systemToken }] = await Promise.all([\n        import('@synthetixio/v3-contracts/421614-main/systemToken.json'),\n      ]);\n      return systemToken;\n    }\n    default: {\n      throw new Error(`Unsupported deployment ${deployment} for SystemToken`);\n    }\n  }\n}\n","import { importUSDProxy } from '@snx-v3/contracts';\nimport { Network, useNetwork } from '@snx-v3/useBlockchain';\nimport { useQuery } from '@tanstack/react-query';\n\nexport function useUSDProxy(customNetwork?: Network) {\n  const { network } = useNetwork();\n  const targetNetwork = customNetwork || network;\n\n  return useQuery({\n    queryKey: [`${targetNetwork?.id}-${targetNetwork?.preset}`, 'USDProxy'],\n    enabled: Boolean(targetNetwork),\n    queryFn: async function () {\n      if (!targetNetwork) throw new Error('OMFG');\n      return importUSDProxy(targetNetwork.id, targetNetwork.preset);\n    },\n    staleTime: Infinity,\n    // On some chains this is not available, and that is expected\n    throwOnError: false,\n  });\n}\n","import { BigNumberish, utils } from 'ethers';\nimport { wei, WeiSource } from '@synthetixio/wei';\n\nexport const formatValue = (value: BigNumberish, decimals = 18) =>\n  parseFloat(utils.formatUnits(value, decimals));\n\nexport const parseUnits = (value: WeiSource, decimals = 18) => wei(value, decimals).toBN();\n\nexport const compareAddress = (add1: string | null = '', add2: string | null = '') =>\n  !!add1 && !!add2 && add1.toLowerCase() === add2.toLowerCase();\n\nexport const prettyString = (text: string, startLength = 6, endLength = 4) => {\n  if (text.length <= startLength + endLength) {\n    return text;\n  }\n  return `${text.substring(0, startLength)}...${text.substring(text.length - endLength)}`;\n};\n","import { Wei } from '@synthetixio/wei';\n\nexport function currency(\n  value: Wei,\n  options?: Intl.NumberFormatOptions,\n  minimumDigitsToShowAfterZeros = 2\n) {\n  try {\n    const stringValue = value.toString();\n    const numberValue = value.toNumber();\n\n    const decimals =\n      numberValue < 0\n        ? -numberValue - Math.floor(-numberValue)\n        : numberValue - Math.floor(numberValue);\n    const zeroDecimals = decimals !== 0 ? -Math.floor(Math.log10(decimals) + 1) : 0;\n\n    const maximumFractionDigits = zeroDecimals + minimumDigitsToShowAfterZeros;\n\n    return isNaN(numberValue)\n      ? stringValue\n      : numberValue.toLocaleString('en-US', {\n          minimumFractionDigits: 0,\n          maximumFractionDigits,\n          ...options,\n        });\n  } catch (error) {\n    return value + '';\n  }\n}\n","export const isBaseAndromeda = (id?: number | string, preset?: string) =>\n  (id?.toString() === '8453' || '84532') && preset === 'andromeda';\n\nexport function getSpotMarketId(collateralSymbol?: string) {\n  switch (collateralSymbol?.toLowerCase()) {\n    case 'usdc':\n    case 'susdc':\n      return USDC_BASE_MARKET;\n\n    case 'statausdc':\n    case 'sstatausdc':\n      return STATA_BASE_MARKET;\n\n    default:\n      return USDC_BASE_MARKET;\n  }\n}\n\nexport const USDC_BASE_MARKET = '1';\nexport const STATA_BASE_MARKET = '3';\n","import { stringToHash } from './stringToHash';\n\nexport function contractsHash(Contracts: ({ address: string } | undefined)[]) {\n  // If any of the contracts are undefined - treat all as undefined.\n  // We only care when we have all contracts ready\n  if (Contracts.some((Contract) => Contract === undefined)) {\n    return '~';\n  }\n  return stringToHash(Contracts.map((Contract) => Contract?.address || '').join());\n}\n","// This is a type guard function that checks if a value is not null and not undefined.\n// This is useful when filtering an array that might have null or undefined values.\nexport const notNil = <T>(x: T | null | undefined): x is T => x !== null && x !== undefined;\n","export function stringToHash(s: string | undefined) {\n  return (s || '').split('').reduce(function (a, b) {\n    a = (a << 5) - a + b.charCodeAt(0);\n    return a & a;\n  }, 0);\n}\n","export type TransactionStatus = 'unsent' | 'prompting' | 'pending' | 'success' | 'error';\n\ntype TxnState = {\n  error: Error | null;\n  modalOpen: boolean;\n  txnStatus: TransactionStatus;\n  txnHash: string | null;\n};\n\nexport const initialState: TxnState = {\n  error: null,\n  modalOpen: false,\n  txnStatus: 'unsent',\n  txnHash: null,\n};\n\nexport type Actions =\n  | { type: 'prompting' }\n  | { type: 'pending'; payload: { txnHash: string } }\n  | { type: 'success' }\n  | { type: 'error'; payload: { error: Error } }\n  | { type: 'settled' };\n\nexport function reducer(state: TxnState, action: Actions): TxnState {\n  switch (action.type) {\n    case 'prompting':\n      return {\n        ...state,\n        txnStatus: 'prompting',\n        modalOpen: true,\n        error: null,\n      };\n\n    case 'pending':\n      return {\n        ...state,\n        txnStatus: 'pending',\n        txnHash: action.payload.txnHash,\n      };\n\n    case 'success':\n      return {\n        ...state,\n        txnStatus: 'success',\n      };\n\n    case 'error':\n      return {\n        ...state,\n        txnStatus: 'error',\n        error: action.payload.error,\n      };\n\n    case 'settled':\n      return {\n        ...state,\n        modalOpen: false,\n        txnStatus: 'unsent',\n        error: null,\n        txnHash: null,\n      };\n\n    default:\n      return state;\n  }\n}\n","import { contractsHash } from '@snx-v3/tsHelpers';\nimport { useNetwork, useProvider } from '@snx-v3/useBlockchain';\nimport { getPriceUpdates, getPythFeedIds } from '@snx-v3/useCollateralPriceUpdates';\nimport { useCollateralTypes } from '@snx-v3/useCollateralTypes';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { useSystemToken } from '@snx-v3/useSystemToken';\nimport { erc7412Call } from '@snx-v3/withERC7412';\nimport { Wei, wei } from '@synthetixio/wei';\nimport { useQuery } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\n\nexport type AccountCollateralType = {\n  tokenAddress: string;\n  availableCollateral: Wei;\n  totalAssigned: Wei;\n  totalDeposited: Wei;\n  totalLocked: Wei;\n  symbol: string;\n  displaySymbol: string;\n};\n\nexport const loadAccountCollateral = async ({\n  accountId,\n  tokenAddresses,\n  provider,\n  CoreProxy,\n}: {\n  accountId: string;\n  tokenAddresses: string[];\n  provider: ethers.providers.BaseProvider;\n  CoreProxy: { address: string; abi: string[] };\n}) => {\n  const CoreProxyContract = new ethers.Contract(CoreProxy.address, CoreProxy.abi, provider);\n\n  const callsP = tokenAddresses.flatMap((tokenAddress) => [\n    CoreProxyContract.populateTransaction.getAccountAvailableCollateral(accountId, tokenAddress),\n    CoreProxyContract.populateTransaction.getAccountCollateral(accountId, tokenAddress),\n  ]);\n  const calls = await Promise.all(callsP);\n  const decoder = (multicallEncoded: string | string[]) => {\n    if (!Array.isArray(multicallEncoded)) throw Error('Expected array');\n    return tokenAddresses.map((tokenAddress, i) => {\n      const [availableCollateral] = CoreProxyContract.interface.decodeFunctionResult(\n        'getAccountAvailableCollateral',\n        multicallEncoded[i * 2]\n      );\n      const { totalAssigned, totalDeposited, totalLocked } =\n        CoreProxyContract.interface.decodeFunctionResult(\n          'getAccountCollateral',\n          multicallEncoded[i * 2 + 1]\n        );\n\n      return {\n        tokenAddress,\n        availableCollateral: wei(availableCollateral),\n        totalAssigned: wei(totalAssigned),\n        totalDeposited: wei(totalDeposited),\n        totalLocked: wei(totalLocked),\n        symbol: '',\n        displaySymbol: '',\n        decimals: 18,\n      };\n    });\n  };\n  return { decoder, calls };\n};\n\nexport function useAccountCollaterals({ accountId }: { accountId?: string }) {\n  const { data: CoreProxy } = useCoreProxy();\n  const { network } = useNetwork();\n  const { data: collateralTypes } = useCollateralTypes();\n\n  const provider = useProvider();\n\n  const { data: systemToken } = useSystemToken();\n\n  return useQuery({\n    queryKey: [\n      `${network?.id}-${network?.preset}`,\n      'AccountCollateral',\n      { accountId },\n      {\n        contractsHash: contractsHash([CoreProxy, systemToken]),\n      },\n    ],\n    enabled: Boolean(\n      network &&\n        provider &&\n        CoreProxy &&\n        accountId &&\n        collateralTypes &&\n        collateralTypes.length > 0 &&\n        systemToken\n    ),\n    queryFn: async function () {\n      if (\n        !(\n          network &&\n          provider &&\n          CoreProxy &&\n          accountId &&\n          collateralTypes &&\n          collateralTypes.length > 0 &&\n          systemToken\n        )\n      )\n        throw 'OMFG';\n\n      const tokenAddresses = collateralTypes\n        .map((c) => c.tokenAddress)\n        .concat([systemToken.address]);\n\n      const { calls, decoder } = await loadAccountCollateral({\n        accountId,\n        tokenAddresses,\n        provider,\n        CoreProxy,\n      });\n      const allCalls = [...calls];\n\n      const priceUpdateTx = (await getPriceUpdates(\n        (await getPythFeedIds(network)) as string[],\n        network\n      ).catch(() => undefined)) as any;\n      if (priceUpdateTx) {\n        allCalls.unshift(priceUpdateTx);\n      }\n\n      const data = await erc7412Call(network, provider, allCalls, decoder, 'useAccountCollateral');\n\n      return data.map((x) => {\n        if (`${systemToken.address}`.toLowerCase() === `${x.tokenAddress}`.toLowerCase()) {\n          return Object.assign(x, {\n            symbol: systemToken.symbol,\n            displaySymbol: systemToken.name,\n            decimals: systemToken.decimals,\n          });\n        }\n        const collateralType = collateralTypes.find(\n          (c) => `${c.tokenAddress}`.toLowerCase() === `${x.tokenAddress}`.toLowerCase()\n        );\n        return Object.assign(x, {\n          symbol: collateralType?.symbol ?? '',\n          displaySymbol: collateralType?.displaySymbol ?? '',\n          decimals: collateralType?.decimals ?? 18,\n        });\n      });\n    },\n  });\n}\n\nexport function useAccountCollateral(accountId?: string, collateralAddress?: string) {\n  const { network } = useNetwork();\n  const { data: accountCollaterals, isPending: isPendingAccountCollaterals } =\n    useAccountCollaterals({ accountId });\n\n  return useQuery({\n    queryKey: [\n      `${network?.id}-${network?.preset}`,\n      'AccountSpecificCollateral',\n      { accountId },\n      { token: collateralAddress },\n      { isPendingAccountCollaterals },\n    ],\n    enabled: Boolean(accountId && collateralAddress && accountCollaterals),\n    queryFn: async function () {\n      if (!(accountId && collateralAddress && accountCollaterals)) throw 'OMFG';\n      const accountCollateral = accountCollaterals.find(\n        ({ tokenAddress }) =>\n          `${tokenAddress}`.toLowerCase() === `${collateralAddress}`.toLowerCase()\n      );\n\n      return accountCollateral || null;\n    },\n  });\n}\n","import { useQuery } from '@tanstack/react-query';\nimport { useWallet, useNetwork, useDefaultProvider } from '@snx-v3/useBlockchain';\nimport { Contract } from 'ethers';\nimport { ZodBigNumber } from '@snx-v3/zod';\nimport { wei } from '@synthetixio/wei';\n\nconst AllowanceSchema = ZodBigNumber.transform((x) => wei(x));\nconst abi = ['function allowance(address, address) view returns (uint256)'];\n\nexport const useAllowance = ({\n  contractAddress,\n  spender,\n}: {\n  contractAddress?: string;\n  spender?: string;\n}) => {\n  const { activeWallet } = useWallet();\n  const { network } = useNetwork();\n  const provider = useDefaultProvider();\n\n  return useQuery({\n    queryKey: [\n      `${network?.id}-${network?.preset}`,\n      'Allowance',\n      { accountAddress: activeWallet?.address },\n      { contractAddress, spender },\n    ],\n    queryFn: async () => {\n      if (!(contractAddress && spender && activeWallet?.address && provider))\n        throw new Error('OMG');\n      const contract = new Contract(contractAddress, abi, provider);\n      const allowance = await contract.allowance(activeWallet.address, spender);\n      return AllowanceSchema.parse(allowance);\n    },\n    enabled: Boolean(activeWallet?.address && contractAddress && spender && provider),\n  });\n};\n","import { initialState, reducer } from '@snx-v3/txnReducer';\nimport { useAllowance } from '@snx-v3/useAllowance';\nimport { useProvider, useSigner } from '@snx-v3/useBlockchain';\nimport { formatGasPriceForTransaction } from '@snx-v3/useGasOptions';\nimport { getGasPrice } from '@snx-v3/useGasPrice';\nimport { useGasSpeed } from '@snx-v3/useGasSpeed';\nimport { useMutation } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\nimport { useReducer } from 'react';\n\nexport const approveAbi = ['function approve(address spender, uint256 amount) returns (bool)'];\n\nexport const useApprove = (\n  {\n    contractAddress,\n    amount,\n    spender,\n  }: {\n    contractAddress?: string;\n    amount: ethers.BigNumberish;\n    spender?: string;\n  },\n  eventHandlers?: {\n    onSuccess?: () => void;\n    onMutate?: () => void;\n    onError?: (e: Error) => void;\n  }\n) => {\n  const [txnState, dispatch] = useReducer(reducer, initialState);\n  const { data: allowance, refetch: refetchAllowance } = useAllowance({ contractAddress, spender });\n\n  const sufficientAllowance = Boolean(allowance?.gte(amount));\n\n  const signer = useSigner();\n  const { gasSpeed } = useGasSpeed();\n  const provider = useProvider();\n\n  const mutation = useMutation({\n    mutationFn: async (infiniteApproval: boolean) => {\n      if (!signer || !contractAddress || !spender || !provider)\n        throw new Error('Signer, contract address or spender is not defined');\n      if (sufficientAllowance) return;\n\n      try {\n        dispatch({ type: 'prompting' });\n\n        const contract = new ethers.Contract(contractAddress, approveAbi, signer);\n        const amountToAppove = infiniteApproval ? ethers.constants.MaxUint256 : amount;\n\n        const gasPricesPromised = getGasPrice({ provider });\n        const gasLimitPromised = contract.estimateGas.approve(spender, amountToAppove);\n\n        const populatedTxnPromised = contract\n          .connect(signer)\n          .populateTransaction.approve(spender, amountToAppove, {\n            gasLimit: gasLimitPromised,\n          });\n\n        const [gasPrices, gasLimit, populatedTxn] = await Promise.all([\n          gasPricesPromised,\n          gasLimitPromised,\n          populatedTxnPromised,\n        ]);\n\n        const gasOptionsForTransaction = formatGasPriceForTransaction({\n          gasLimit,\n          gasPrices,\n          gasSpeed,\n        });\n\n        const txn = await signer.sendTransaction({ ...populatedTxn, ...gasOptionsForTransaction });\n        dispatch({ type: 'pending', payload: { txnHash: txn.hash } });\n\n        await txn.wait();\n        dispatch({ type: 'success' });\n        refetchAllowance();\n      } catch (error: any) {\n        dispatch({ type: 'error', payload: { error } });\n        throw error;\n      }\n    },\n    ...eventHandlers,\n  });\n  return {\n    mutation,\n    txnState,\n    isLoading: mutation.isPending,\n    approve: mutation.mutateAsync,\n    refetchAllowance,\n    requireApproval: !sufficientAllowance,\n  };\n};\n","import { getAprUrl } from '@snx-v3/constants';\nimport { ARBITRUM, BASE_ANDROMEDA, MAINNET, Network, useNetwork } from '@snx-v3/useBlockchain';\nimport { useQuery } from '@tanstack/react-query';\n\nexport function useApr(customNetwork?: Network) {\n  const { network } = useNetwork();\n  const chain = customNetwork || network;\n\n  return useQuery({\n    queryKey: ['apr', chain?.id],\n    queryFn: async () => {\n      try {\n        return await fetchApr(chain?.id);\n      } catch (error) {\n        return;\n      }\n    },\n    staleTime: 60000,\n    enabled: Boolean(chain?.id),\n  });\n}\n\nconst supportedAprNetworks = [BASE_ANDROMEDA.id, ARBITRUM.id, MAINNET.id];\n\nexport async function fetchApr(networkId?: number) {\n  try {\n    const isSupported = networkId && supportedAprNetworks.includes(networkId);\n    if (!isSupported) {\n      throw new Error('Apr endpoint not supported for this network');\n    }\n\n    const response = await fetch(getAprUrl(networkId));\n\n    const data = await response.json();\n\n    const highestAprCollateral = data?.sort(\n      (a: { apr7d: number }, b: { apr7d: number }) => b.apr7d - a.apr7d\n    )[0];\n\n    return {\n      combinedApr: highestAprCollateral.apr7d * 100,\n      cumulativePnl: isSupported ? highestAprCollateral.cumulativePnl : 0,\n      collateralAprs: data,\n    };\n  } catch (error) {\n    console.error(error);\n    return {\n      combinedApr: 0,\n      cumulativePnl: 0,\n      collateralAprs: [],\n    };\n  }\n}\n","import { ethers } from 'ethers';\n\nexport class MagicProvider extends ethers.providers.JsonRpcProvider {\n  // @ts-ignore\n  readonly magicWallet: string;\n  // @ts-ignore\n  readonly chainId: number;\n\n  constructor() {\n    if (!window.$chainId) {\n      throw new Error('Empty window.$chainId');\n    }\n    if (!window.$magicWallet) {\n      throw new Error('Empty window.$magicWallet');\n    }\n    super('http://127.0.0.1:8545', { chainId: window.$chainId, name: 'Anvil' });\n    Object.defineProperty(this, 'magicWallet', {\n      enumerable: true,\n      value: window.$magicWallet,\n      writable: false,\n    });\n    Object.defineProperty(this, 'chainId', {\n      enumerable: true,\n      value: window.$chainId,\n      writable: false,\n    });\n  }\n\n  async listAccounts(): Promise<Array<string>> {\n    return [this.magicWallet];\n  }\n\n  async send(method: string, params: Array<any>): Promise<any> {\n    if (method === 'eth_chainId') {\n      return `0x${Number(this.chainId).toString(16)}`;\n    }\n    if (method === 'eth_accounts') {\n      return [this.magicWallet];\n    }\n    try {\n      const result = await super.send(method, params);\n      // eslint-disable-next-line no-console\n      console.log('MAGIC.send', { method, params, result });\n      return result;\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.log('MAGIC.send ERROR', { method, params, error });\n      throw error;\n    }\n  }\n}\n","import { IconProps } from '@chakra-ui/react';\nimport { INFURA_KEY as DEFAULT_INFURA_KEY } from '@snx-v3/constants';\nimport { importPythERC7412Wrapper } from '@snx-v3/contracts';\nimport {\n  ArbitrumIcon,\n  BaseIcon,\n  EthereumIcon,\n  FailedIcon,\n  LogoIcon,\n  OptimismIcon,\n  SNXChainIcon,\n} from '@snx-v3/icons';\nimport { useQuery } from '@tanstack/react-query';\nimport { useConnectWallet, useSetChain } from '@web3-onboard/react';\nimport { ethers } from 'ethers';\nimport React, { useCallback } from 'react';\nimport { MagicProvider } from './magic';\nimport SynthetixIcon from './SynthetixIcon.svg';\nimport SynthetixLogo from './SynthetixLogo.svg';\n\nexport function getMagicProvider(): ethers.providers.JsonRpcProvider | undefined {\n  if (window.$magicWallet && window.$chainId) {\n    return new MagicProvider();\n  }\n}\n\nexport type Network = {\n  id: number;\n  preset: string;\n  hexId: string;\n  token: string;\n  name: string;\n  rpcUrl: () => string;\n  label: string;\n  isSupported: boolean;\n  publicRpcUrl: string;\n  isTestnet: boolean;\n};\n\nexport const UNSUPPORTED_NETWORK: Network = {\n  id: 0,\n  preset: 'main',\n  hexId: `0x${Number(0).toString(16)}`,\n  token: 'ETH',\n  name: 'unsupported',\n  rpcUrl: () => '',\n  publicRpcUrl: '',\n  label: 'Unsupported',\n  isSupported: false,\n  isTestnet: false,\n};\n\ninterface NetworkIconProps extends IconProps {\n  networkId?: Network['id'];\n  size?: string;\n}\n\nexport const NetworkIcon = ({ networkId, size = '24px', ...props }: NetworkIconProps) => {\n  switch (networkId) {\n    case 1:\n      return <EthereumIcon w={size} h={size} {...props} />;\n    case 10:\n      return <OptimismIcon w={size} h={size} {...props} />;\n    case 11155111:\n      return <EthereumIcon w={size} h={size} {...props} />;\n    case 84531:\n      return <BaseIcon w={size} h={size} {...props} />;\n    case 84532:\n      return <BaseIcon w={size} h={size} {...props} />;\n    case 13370:\n      return <LogoIcon w=\"29px\" h=\"21px\" {...props} />;\n    case 8453:\n      return <BaseIcon w={size} h={size} {...props} />;\n    case 11155420:\n      return <OptimismIcon w={size} h={size} {...props} />;\n    case 421614:\n      return <ArbitrumIcon w={size} h={size} {...props} />;\n    case 42161:\n      return <ArbitrumIcon w={size} h={size} {...props} />;\n    case 2192:\n      return <SNXChainIcon w={size} h={size} {...props} />;\n    case 13001:\n      return <SNXChainIcon w={size} h={size} {...props} />;\n    default: {\n      return <FailedIcon w={size} h={size} {...props} />;\n    }\n  }\n};\n\nexport const BASE_ANDROMEDA: Network = {\n  id: 8453,\n  preset: 'andromeda',\n  hexId: `0x${Number(8453).toString(16)}`,\n  token: 'ETH',\n  name: 'base',\n  rpcUrl: (INFURA_KEY?: string) =>\n    `https://base-mainnet.infura.io/v3/${INFURA_KEY ?? DEFAULT_INFURA_KEY}`,\n  label: 'Base',\n  isSupported: true,\n  publicRpcUrl: 'https://base.publicnode.com',\n  isTestnet: false,\n};\n\nexport const MAINNET: Network = {\n  id: 1,\n  preset: 'main',\n  hexId: `0x${Number(1).toString(16)}`,\n  token: 'ETH',\n  name: 'mainnet',\n  rpcUrl: (INFURA_KEY?: string) =>\n    `https://mainnet.infura.io/v3/${INFURA_KEY ?? DEFAULT_INFURA_KEY}`,\n  label: 'Ethereum',\n  isSupported: true,\n  publicRpcUrl: 'https://ethereum.publicnode.com',\n  isTestnet: false,\n};\n\nexport const OPTIMISM: Network = {\n  id: 10,\n  preset: 'main',\n  hexId: `0x${Number(10).toString(16)}`,\n  token: 'ETH',\n  name: 'optimism-mainnet',\n  rpcUrl: (INFURA_KEY?: string) =>\n    `https://optimism-mainnet.infura.io/v3/${INFURA_KEY ?? DEFAULT_INFURA_KEY}`,\n  label: 'Optimism',\n  isSupported: true,\n  publicRpcUrl: 'https://mainnet.optimism.io',\n  isTestnet: false,\n};\n\nexport const SEPOLIA: Network = {\n  id: 11155111,\n  preset: 'main',\n  hexId: `0x${Number(11155111).toString(16)}`,\n  token: 'ETH',\n  name: 'sepolia',\n  rpcUrl: (INFURA_KEY?: string) =>\n    `https://sepolia.infura.io/v3/${INFURA_KEY ?? DEFAULT_INFURA_KEY}`,\n  label: 'Sepolia Testnet',\n  isSupported: true,\n  publicRpcUrl: 'https://ethereum-sepolia.publicnode.com',\n  isTestnet: true,\n};\n\nexport const BASE_SEPOLIA: Network = {\n  id: 84532,\n  preset: 'andromeda',\n  hexId: `0x${Number(84532).toString(16)}`,\n  token: 'ETH',\n  name: 'base-sepolia',\n  rpcUrl: (INFURA_KEY?: string) =>\n    `https://base-sepolia.infura.io/v3/${INFURA_KEY ?? DEFAULT_INFURA_KEY}`,\n  label: 'Base Sepolia',\n  isSupported: true,\n  publicRpcUrl: 'https://sepolia.base.org',\n  isTestnet: true,\n};\n\nexport const CANNON: Network = {\n  id: 13370,\n  preset: 'main',\n  hexId: `0x${Number(13370).toString(16)}`,\n  token: 'ETH',\n  name: 'cannon',\n  rpcUrl: () => `http://127.0.0.1:8545`,\n  label: 'Cannon',\n  isSupported: false, // hidden by default but if wallet switched to Cannon it will be visible\n  publicRpcUrl: 'http://127.0.0.1:8545',\n  isTestnet: true,\n};\n\nexport const OPTIMISM_SEPOLIA: Network = {\n  id: 11155420,\n  preset: 'main',\n  hexId: `0x${Number(11155420).toString(16)}`,\n  token: 'ETH',\n  name: 'optimism-sepolia',\n  rpcUrl: (INFURA_KEY?: string) =>\n    `https://optimism-sepolia.infura.io/v3/${INFURA_KEY ?? DEFAULT_INFURA_KEY}`,\n  label: 'Optimism Sepolia',\n  isSupported: false,\n  publicRpcUrl: 'https://sepolia.optimism.io/',\n  isTestnet: true,\n};\n\nexport const ARBITRUM_SEPOLIA: Network = {\n  id: 421614,\n  preset: 'main',\n  hexId: `0x${Number(421614).toString(16)}`,\n  token: 'ETH',\n  name: 'arbitrum-sepolia',\n  rpcUrl: (INFURA_KEY?: string) =>\n    `https://arbitrum-sepolia.infura.io/v3/${INFURA_KEY ?? DEFAULT_INFURA_KEY}`,\n  label: 'Arbitrum Sepolia',\n  isSupported: true,\n  publicRpcUrl: 'https://sepolia-rollup.arbitrum.io/rpc',\n  isTestnet: true,\n};\n\nexport const ARBITRUM: Network = {\n  id: 42161,\n  preset: 'main',\n  hexId: `0x${Number(42161).toString(16)}`,\n  token: 'ETH',\n  name: 'arbitrum',\n  rpcUrl: (INFURA_KEY?: string) =>\n    `https://arbitrum-mainnet.infura.io/v3/${INFURA_KEY ?? DEFAULT_INFURA_KEY}`,\n  label: 'Arbitrum',\n  isSupported: true,\n  publicRpcUrl: 'https://arb1.arbitrum.io/rpc',\n  isTestnet: false,\n};\n\nexport const SNAX: Network = {\n  id: 2192,\n  preset: 'main',\n  hexId: `0x${Number(2192).toString(16)}`,\n  token: 'ETH',\n  name: 'SNAX',\n  rpcUrl: () => 'https://mainnet.snaxchain.io/',\n  label: 'Snaxchain',\n  isSupported: true,\n  publicRpcUrl: 'https://mainnet.snaxchain.io/',\n  isTestnet: false,\n};\n\nexport const SNAXTESTNET: Network = {\n  id: 13001,\n  preset: 'main',\n  hexId: `0x${Number(13001).toString(16)}`,\n  token: 'ETH',\n  name: 'SNAX',\n  rpcUrl: () => 'https://testnet.snaxchain.io/',\n  label: 'Snaxchain',\n  isSupported: true,\n  publicRpcUrl: 'https://testnet.snaxchain.io/',\n  isTestnet: true,\n};\n\nexport const NETWORKS: Network[] = [\n  BASE_ANDROMEDA,\n  MAINNET,\n  OPTIMISM,\n  SEPOLIA,\n  BASE_SEPOLIA,\n  CANNON,\n  OPTIMISM_SEPOLIA,\n  ARBITRUM_SEPOLIA,\n  ARBITRUM,\n  SNAX,\n  SNAXTESTNET,\n];\n\nexport async function deploymentHasERC7412(chainId: number, preset: string) {\n  return importPythERC7412Wrapper(chainId, preset).then(\n    () => true,\n    () => false\n  );\n}\n\nexport const DEFAULT_NETWORK =\n  NETWORKS.find(\n    (network) =>\n      `${network.id}-${network.preset}` === window.localStorage.getItem('DEFAULT_NETWORK')\n  ) ?? NETWORKS[1];\n\nexport const appMetadata = {\n  name: 'Synthetix',\n  icon: SynthetixIcon,\n  logo: SynthetixLogo,\n  description: 'Synthetix | The derivatives liquidity protocol.',\n  recommendedInjectedWallets: [\n    { name: 'MetaMask', url: 'https://metamask.io' },\n    { name: 'Brave Wallet', url: 'https://brave.com/wallet' },\n  ],\n  gettingStartedGuide: 'https://synthetix.io',\n  explore: 'https://blog.synthetix.io',\n};\n\nexport function useProviderForChain(customNetwork?: Network) {\n  const { network: activeNetwork } = useNetwork();\n  const network = customNetwork ?? activeNetwork;\n  const isDefaultChain =\n    customNetwork?.id === activeNetwork?.id && customNetwork?.preset === activeNetwork?.preset;\n  const { data: provider } = useQuery({\n    queryKey: [`${network?.id}-${network?.preset}`, 'ProviderForChain', { isDefaultChain }],\n    enabled: Boolean(network),\n    queryFn: () => {\n      if (!network) throw 'OMFG';\n      if (isDefaultChain) {\n        const provider = getMagicProvider();\n        if (provider) {\n          return provider;\n        }\n      }\n      return network ? new ethers.providers.JsonRpcProvider(network.rpcUrl()) : null;\n    },\n  });\n\n  return provider;\n}\n\nexport function useDefaultProvider() {\n  const { network } = useNetwork();\n  return useProviderForChain(network);\n}\n\nexport function useWallet() {\n  const [{ wallet }, connect, disconnect] = useConnectWallet();\n\n  if (!wallet) {\n    return {\n      activeWallet: undefined,\n      walletsInfo: undefined,\n      connect,\n      disconnect,\n    };\n  }\n\n  const activeWallet = wallet?.accounts[0];\n\n  return {\n    activeWallet: activeWallet,\n    walletsInfo: wallet,\n    connect,\n    disconnect,\n  };\n}\n\nexport function useNetwork() {\n  const [{ connectedChain }, setChain] = useSetChain();\n\n  const setNetwork = useCallback(\n    async (networkId: number) => {\n      const newNetwork = NETWORKS.find((n) => n.id === networkId);\n      if (!newNetwork) return;\n      return await setChain({ chainId: newNetwork?.hexId });\n    },\n    [setChain]\n  );\n\n  // Hydrate the network info\n  const network = NETWORKS.find((n) => n.hexId === connectedChain?.id);\n\n  if (!network) {\n    return {\n      network: undefined,\n      setNetwork,\n    };\n  }\n\n  return {\n    network,\n    setNetwork,\n  };\n}\n\nexport function useIsConnected(): boolean {\n  const [{ wallet }] = useConnectWallet();\n  return Boolean(wallet);\n}\n\nexport function useSigner() {\n  const provider = useProvider();\n  const { activeWallet } = useWallet();\n  const { data: signer } = useQuery({\n    queryKey: ['Wallet signer', activeWallet?.address],\n    enabled: Boolean(provider && activeWallet),\n    queryFn: () => {\n      if (!(provider && activeWallet)) throw 'OMFG';\n      return provider.getSigner(activeWallet.address);\n    },\n  });\n  return signer;\n}\n\nexport function useProvider() {\n  const [{ wallet }] = useConnectWallet();\n\n  const { data: provider } = useQuery({\n    queryKey: ['Wallet provider', wallet?.accounts.map((a) => a.address)],\n    enabled: Boolean(wallet),\n    queryFn: () => {\n      if (!wallet) throw 'OMFG';\n      return getMagicProvider() ?? new ethers.providers.Web3Provider(wallet.provider, 'any');\n    },\n  });\n\n  return provider;\n}\n","import { initialState, reducer } from '@snx-v3/txnReducer';\nimport { useNetwork, useProvider, useSigner } from '@snx-v3/useBlockchain';\nimport { useCollateralPriceUpdates } from '@snx-v3/useCollateralPriceUpdates';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { formatGasPriceForTransaction } from '@snx-v3/useGasOptions';\nimport { getGasPrice } from '@snx-v3/useGasPrice';\nimport { useGasSpeed } from '@snx-v3/useGasSpeed';\nimport { withERC7412 } from '@snx-v3/withERC7412';\nimport Wei from '@synthetixio/wei';\nimport { useMutation } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\nimport { useReducer } from 'react';\n\nexport const useBorrow = ({\n  accountId,\n  poolId,\n  collateralTypeAddress,\n  debtChange,\n}: {\n  accountId?: string;\n  poolId?: string;\n  collateralTypeAddress?: string;\n  debtChange: Wei;\n}) => {\n  const [txnState, dispatch] = useReducer(reducer, initialState);\n  const { data: CoreProxy } = useCoreProxy();\n  const { data: priceUpdateTx, refetch: refetchPriceUpdateTx } = useCollateralPriceUpdates();\n\n  const signer = useSigner();\n  const { gasSpeed } = useGasSpeed();\n  const provider = useProvider();\n  const { network } = useNetwork();\n\n  const mutation = useMutation({\n    mutationFn: async () => {\n      if (\n        !(\n          signer &&\n          CoreProxy &&\n          poolId &&\n          accountId &&\n          collateralTypeAddress &&\n          network &&\n          provider\n        )\n      ) {\n        return;\n      }\n\n      if (debtChange.eq(0)) {\n        return;\n      }\n\n      try {\n        dispatch({ type: 'prompting' });\n\n        const CoreProxyContract = new ethers.Contract(CoreProxy.address, CoreProxy.abi, signer);\n        const populatedTxnPromised = CoreProxyContract.populateTransaction.mintUsd(\n          ethers.BigNumber.from(accountId),\n          ethers.BigNumber.from(poolId),\n          collateralTypeAddress,\n          debtChange.abs().toBN()\n        );\n\n        const callsPromise = Promise.all([populatedTxnPromised]);\n        const [calls, gasPrices] = await Promise.all([callsPromise, getGasPrice({ provider })]);\n\n        if (priceUpdateTx) {\n          calls.unshift(priceUpdateTx as any);\n        }\n\n        const walletAddress = await signer.getAddress();\n        const { multicallTxn: erc7412Tx, gasLimit } = await withERC7412(\n          network,\n          calls,\n          'useBorrow',\n          walletAddress\n        );\n\n        const gasOptionsForTransaction = formatGasPriceForTransaction({\n          gasLimit,\n          gasPrices,\n          gasSpeed,\n        });\n\n        const txn = await signer.sendTransaction({ ...erc7412Tx, ...gasOptionsForTransaction });\n\n        dispatch({ type: 'pending', payload: { txnHash: txn.hash } });\n\n        await txn.wait();\n        dispatch({ type: 'success' });\n      } catch (error: any) {\n        dispatch({ type: 'error', payload: { error } });\n        throw error;\n      }\n    },\n    onSuccess: () => {\n      // After mutation withERC7412, we guaranteed to have updated all the prices, dont care about await\n      refetchPriceUpdateTx();\n    },\n  });\n  return {\n    mutation,\n    txnState,\n    settle: () => dispatch({ type: 'settled' }),\n    isLoading: mutation.isPending,\n    exec: mutation.mutateAsync,\n  };\n};\n","import { EvmPriceServiceConnection } from '@pythnetwork/pyth-evm-js';\nimport { offchainMainnetEndpoint } from '@snx-v3/constants';\nimport {\n  importExtras,\n  importMulticall3,\n  importPythERC7412Wrapper,\n  importPythFeeds,\n  importPythVerfier,\n} from '@snx-v3/contracts';\nimport { parseUnits } from '@snx-v3/format';\nimport { Network, useDefaultProvider, useNetwork, useWallet } from '@snx-v3/useBlockchain';\nimport { networksOffline } from '@snx-v3/usePoolsList';\nimport { wei } from '@synthetixio/wei';\nimport { useQuery } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\n\nconst priceService = new EvmPriceServiceConnection(offchainMainnetEndpoint);\n\nfunction getAllPriceIdsEntries(extras: any) {\n  return Array.from(\n    new Set(\n      Object.entries(extras).filter(\n        ([key, value]) =>\n          String(value).length === 66 &&\n          (key.startsWith('pyth_feed_id_') || (key.startsWith('pyth') && key.endsWith('FeedId')))\n      )\n    )\n  );\n}\n\nexport async function getPythFeedIds(network: Network) {\n  return await importPythFeeds(network.id, network.preset);\n}\n\nasync function getPythFeedIdsFromCollateralList(\n  collateralList: {\n    symbol: string;\n  }[]\n) {\n  const extras = await Promise.all(\n    networksOffline.map((network) => importExtras(network.id, network.preset))\n  );\n\n  // Go over extras and find everything that starts with pyth and ends with FeedId, store in array\n  const priceIds = extras.map(getAllPriceIdsEntries).flat();\n\n  const deduped = Array.from(\n    new Set(\n      priceIds\n        .map(([key, priceId]) => {\n          if (key.startsWith('pyth_feed_id_')) {\n            return {\n              symbol: key.replace('pyth_feed_id_', '').toUpperCase(),\n              priceId,\n            };\n          }\n          if (key.startsWith('pyth') && key.endsWith('FeedId')) {\n            return {\n              symbol: key.replace('pyth', '').replace('FeedId', '').toUpperCase(),\n              priceId,\n            };\n          }\n          return { symbol: null, priceId: null };\n        })\n        .filter(({ symbol, priceId }) => symbol && priceId)\n    )\n  );\n\n  // Find the corresponding price feed id for each symbol\n  return collateralList.map((collateral) => {\n    const symbol = collateral.symbol === 'WETH' ? 'ETH' : collateral.symbol;\n    const id = deduped.find((x) => x.symbol?.toUpperCase() === symbol.toUpperCase());\n    return {\n      ...collateral,\n      priceId: id?.priceId,\n    };\n  });\n}\n\nexport const getPriceUpdates = async (priceIds: string[], network: Network) => {\n  if (!priceIds.length) {\n    return null;\n  }\n  const unique = Array.from(new Set(priceIds));\n  const signedOffchainData = await priceService.getPriceFeedsUpdateData(unique);\n  const PythVerfier = await importPythVerfier(network.id, network.preset);\n\n  return {\n    to: PythVerfier.address,\n    data: new ethers.utils.Interface(PythVerfier.abi).encodeFunctionData('updatePriceFeeds', [\n      signedOffchainData,\n    ]),\n    value: unique.length,\n  };\n};\n\ninterface Collaterals {\n  symbol: string;\n  oracleId: string;\n  id: string;\n}\n\nexport const useOfflinePrices = (collaterals?: Collaterals[]) => {\n  return useQuery({\n    queryKey: ['offline-prices', collaterals?.map((collateral) => collateral.id).join('-')],\n    enabled: Boolean(collaterals && collaterals.length > 0),\n    queryFn: async () => {\n      if (!collaterals) {\n        throw 'useOfflinePrices is missing required data';\n      }\n\n      const stables = ['sUSDC', 'USDC'];\n      const filteredCollaterals = collaterals.filter((item) => !stables.includes(item.symbol));\n\n      const returnData: { symbol: string; price: ethers.BigNumberish }[] = [\n        {\n          symbol: 'sUSDC',\n          price: wei(1).toBN(),\n        },\n        {\n          symbol: 'USDC',\n          price: wei(1).toBN(),\n        },\n        {\n          symbol: 'USDx',\n          price: wei(1).toBN(),\n        },\n      ];\n\n      if (!filteredCollaterals.length) {\n        return returnData;\n      }\n\n      const collateralsWithPriceId = await getPythFeedIdsFromCollateralList(filteredCollaterals);\n      const prices = await priceService.getLatestPriceFeeds(\n        collateralsWithPriceId.map((x) => x.priceId) as string[]\n      );\n      prices?.forEach((item) => {\n        const col = collateralsWithPriceId.find(({ priceId }) => priceId === `0x${item.id}`);\n        const price = item.getPriceUnchecked();\n        if (col) {\n          returnData.push({\n            symbol: col.symbol,\n            price: parseUnits(price.price, 18 + price.expo),\n          });\n        }\n      });\n      return returnData;\n    },\n    refetchInterval: 60_000,\n  });\n};\n\nexport const useCollateralPriceUpdates = (customNetwork?: Network) => {\n  const { network: currentNetwork } = useNetwork();\n  const network = customNetwork || currentNetwork;\n  const provider = useDefaultProvider();\n  const { activeWallet } = useWallet();\n  const walletAddress = activeWallet?.address;\n\n  return useQuery({\n    queryKey: [`${network?.id}-${network?.preset}`, 'PriceUpdates', { walletAddress }],\n    enabled: Boolean(network && provider && activeWallet),\n    queryFn: async () => {\n      const stalenessTolerance = 1600;\n      if (!(network && provider && activeWallet)) {\n        throw 'OMG';\n      }\n\n      try {\n        const { address: multicallAddress, abi: multiCallAbi } = await importMulticall3(\n          network.id,\n          network.preset\n        );\n\n        const multicallInterface = new ethers.utils.Interface(multiCallAbi);\n        const pythInterface = new ethers.utils.Interface([\n          'function getLatestPrice(bytes32 priceId, uint256 stalenessTolerance) external view returns (int256)',\n        ]);\n\n        const pythFeedIds = (await getPythFeedIds(network)) as string[];\n        if (window.localStorage.getItem('DEBUG') === 'true') {\n          // eslint-disable-next-line no-console\n          console.log('[useCollateralPriceUpdates]', { pythFeedIds });\n        }\n\n        if (pythFeedIds.length === 0) {\n          return null;\n        }\n\n        const { address } = await importPythERC7412Wrapper(network.id, network.preset);\n\n        const txs = [\n          ...pythFeedIds.map((priceId) => ({\n            target: address,\n            callData: pythInterface.encodeFunctionData('getLatestPrice', [\n              priceId,\n              stalenessTolerance,\n            ]),\n            value: 0,\n            requireSuccess: false,\n          })),\n        ];\n\n        const getPricesTx = multicallInterface.encodeFunctionData('aggregate3Value', [txs]);\n\n        const result = await provider.call({\n          data: getPricesTx,\n          to: multicallAddress,\n        });\n\n        const decodedMultiCall: { success: boolean }[] = multicallInterface.decodeFunctionResult(\n          'aggregate3Value',\n          result || ''\n        )[0];\n\n        const outdatedPriceIds: string[] = [];\n\n        decodedMultiCall.forEach(({ success }, i) => {\n          if (!success) {\n            outdatedPriceIds.push(pythFeedIds[i]);\n          }\n        });\n        if (window.localStorage.getItem('DEBUG') === 'true') {\n          // eslint-disable-next-line no-console\n          console.log('[useCollateralPriceUpdates]', { outdatedPriceIds });\n        }\n\n        if (outdatedPriceIds.length) {\n          const priceUpdateTx = (await getPriceUpdates(outdatedPriceIds, network).catch(\n            () => undefined\n          )) as any;\n          if (priceUpdateTx) {\n            return {\n              ...priceUpdateTx,\n              from: walletAddress,\n            };\n          }\n        }\n\n        return null;\n      } catch (error) {\n        return null;\n      }\n    },\n    refetchInterval: 120_000,\n  });\n};\n","export async function importExtras(chainId, preset) {\n  if (!preset) {\n    throw new Error(`Missing preset`);\n  }\n  const deployment = `${Number(chainId).toFixed(0)}-${preset}`;\n  switch (deployment) {\n    case '1-main': {\n      const [{ default: extras }] = await Promise.all([\n        import('@synthetixio/v3-contracts/1-main/extras.json'),\n      ]);\n      return extras;\n    }\n    case '11155111-main': {\n      const [{ default: extras }] = await Promise.all([\n        import('@synthetixio/v3-contracts/11155111-main/extras.json'),\n      ]);\n      return extras;\n    }\n    case '10-main': {\n      const [{ default: extras }] = await Promise.all([\n        import('@synthetixio/v3-contracts/10-main/extras.json'),\n      ]);\n      return extras;\n    }\n    case '8453-andromeda': {\n      const [{ default: extras }] = await Promise.all([\n        import('@synthetixio/v3-contracts/8453-andromeda/extras.json'),\n      ]);\n      return extras;\n    }\n    case '84532-andromeda': {\n      const [{ default: extras }] = await Promise.all([\n        import('@synthetixio/v3-contracts/84532-andromeda/extras.json'),\n      ]);\n      return extras;\n    }\n    case '42161-main': {\n      const [{ default: extras }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-main/extras.json'),\n      ]);\n      return extras;\n    }\n    case '421614-main': {\n      const [{ default: extras }] = await Promise.all([\n        import('@synthetixio/v3-contracts/421614-main/extras.json'),\n      ]);\n      return extras;\n    }\n    default: {\n      throw new Error(`Unsupported deployment ${deployment} for Extras`);\n    }\n  }\n}\n","import { importCollateralTokens } from '@snx-v3/contracts';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { Network, useNetwork } from '@snx-v3/useBlockchain';\nimport { useSystemToken } from '@snx-v3/useSystemToken';\nimport { wei, Wei } from '@synthetixio/wei';\nimport { useQuery } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\n\nexport type CollateralType = {\n  address: string;\n  symbol: string;\n  displaySymbol: string;\n  name: string;\n  decimals: number;\n  depositingEnabled: boolean;\n  issuanceRatioD18: Wei;\n  liquidationRatioD18: Wei;\n  liquidationRewardD18: Wei;\n  minDelegationD18: Wei;\n  oracleNodeId: string;\n  tokenAddress: string;\n  oracle: {\n    constPrice?: Wei;\n    externalContract?: string;\n    stalenessTolerance?: string;\n    pythFeedId?: string;\n  };\n};\n\nasync function loadCollateralTypes(chainId: number, preset: string) {\n  return (await importCollateralTokens(chainId, preset))\n    .map((config) => ({\n      address: config.address,\n      symbol: config.symbol,\n      displaySymbol: config.symbol,\n      name: config.name,\n      decimals: config.decimals,\n      depositingEnabled: config.depositingEnabled,\n      issuanceRatioD18: wei(config.issuanceRatioD18, 18, true),\n      liquidationRatioD18: wei(config.liquidationRatioD18, 18, true),\n      liquidationRewardD18: wei(config.liquidationRewardD18, 18, true),\n      minDelegationD18: wei(config.minDelegationD18, 18, true),\n      oracleNodeId: config.oracleNodeId,\n      tokenAddress: config.tokenAddress,\n      oracle: {\n        constPrice: config.oracle.constPrice ? wei(config.oracle.constPrice, 18, true) : undefined,\n        externalContract: config.oracle.externalContract,\n        stalenessTolerance: config.oracle.stalenessTolerance,\n        pythFeedId: config.oracle.pythFeedId,\n      },\n    }))\n    .filter(({ depositingEnabled }) => depositingEnabled);\n}\n\nexport function useCollateralTypes(includeDelegationOff = false, customNetwork?: Network) {\n  const { network } = useNetwork();\n  const targetNetwork = customNetwork || network;\n  const { data: systemToken } = useSystemToken(customNetwork);\n\n  return useQuery({\n    enabled: Boolean(targetNetwork?.id && targetNetwork?.preset && systemToken),\n    queryKey: [\n      `${targetNetwork?.id}-${targetNetwork?.preset}`,\n      'CollateralTypes',\n      { systemToken: systemToken?.symbol, includeDelegationOff },\n    ],\n    queryFn: async () => {\n      if (!(targetNetwork?.id && targetNetwork?.preset && systemToken))\n        throw Error('useCollateralTypes should not be enabled when contracts missing');\n\n      const collateralTypes = (await loadCollateralTypes(targetNetwork.id, targetNetwork.preset))\n        .map((collateralType) => {\n          const isBase = isBaseAndromeda(targetNetwork?.id, targetNetwork?.preset);\n          if (isBase && collateralType.symbol === 'sUSDC') {\n            return {\n              ...collateralType,\n              symbol: 'USDC',\n              displaySymbol: 'USDC',\n              name: 'USD Coin',\n            };\n          }\n          if (isBase && collateralType.symbol === 'sStataUSDC') {\n            return {\n              ...collateralType,\n              symbol: 'stataUSDC',\n              displaySymbol: 'stataUSDC',\n              name: 'Static aUSDC',\n            };\n          }\n          return {\n            ...collateralType,\n            displaySymbol: collateralType.displaySymbol ?? collateralType.symbol,\n          };\n        })\n        .filter((collateralType) => collateralType.tokenAddress !== systemToken.address);\n\n      if (includeDelegationOff) {\n        return collateralTypes;\n      }\n\n      // Return collateral types that have minDelegationD18 < MaxUint256\n      // When minDelegationD18 === MaxUint256, delegation is effectively disabled\n      return collateralTypes.filter((collateralType) =>\n        collateralType.minDelegationD18.lt(ethers.constants.MaxUint256)\n      );\n    },\n    // one hour in ms\n    staleTime: 3_600_000,\n    placeholderData: [],\n  });\n}\n\nexport function useCollateralType(collateralSymbol?: string) {\n  const { data: collateralTypes, isFetching: isCollateralTypesFetching } = useCollateralTypes();\n\n  function getCollateralType(collateralSymbol?: string) {\n    if (!collateralTypes || !collateralTypes?.length) {\n      return;\n    }\n\n    if (!collateralSymbol) {\n      return collateralTypes[0];\n    }\n\n    return collateralTypes?.find(\n      (collateral) => `${collateral.symbol}`.toLowerCase() === `${collateralSymbol}`.toLowerCase()\n    );\n  }\n\n  return {\n    isFetching: isCollateralTypesFetching,\n    data: getCollateralType(collateralSymbol),\n  };\n}\n","export async function importCollateralTokens(chainId, preset) {\n  if (!preset) {\n    throw new Error(`Missing preset`);\n  }\n  const deployment = `${Number(chainId).toFixed(0)}-${preset}`;\n  switch (deployment) {\n    case '1-main': {\n      const [{ default: collateralTokens }] = await Promise.all([\n        import('@synthetixio/v3-contracts/1-main/collateralTokens.json'),\n      ]);\n      return collateralTokens;\n    }\n    case '11155111-main': {\n      const [{ default: collateralTokens }] = await Promise.all([\n        import('@synthetixio/v3-contracts/11155111-main/collateralTokens.json'),\n      ]);\n      return collateralTokens;\n    }\n    case '10-main': {\n      const [{ default: collateralTokens }] = await Promise.all([\n        import('@synthetixio/v3-contracts/10-main/collateralTokens.json'),\n      ]);\n      return collateralTokens;\n    }\n    case '8453-andromeda': {\n      const [{ default: collateralTokens }] = await Promise.all([\n        import('@synthetixio/v3-contracts/8453-andromeda/collateralTokens.json'),\n      ]);\n      return collateralTokens;\n    }\n    case '84532-andromeda': {\n      const [{ default: collateralTokens }] = await Promise.all([\n        import('@synthetixio/v3-contracts/84532-andromeda/collateralTokens.json'),\n      ]);\n      return collateralTokens;\n    }\n    case '42161-main': {\n      const [{ default: collateralTokens }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-main/collateralTokens.json'),\n      ]);\n      return collateralTokens;\n    }\n    case '421614-main': {\n      const [{ default: collateralTokens }] = await Promise.all([\n        import('@synthetixio/v3-contracts/421614-main/collateralTokens.json'),\n      ]);\n      return collateralTokens;\n    }\n    default: {\n      throw new Error(`Unsupported deployment ${deployment} for CollateralTokens`);\n    }\n  }\n}\n","import { useAllErrors } from '@snx-v3/useAllErrors';\nimport { useClosePosition } from '@snx-v3/useClosePosition';\nimport { extractErrorData, PYTH_ERRORS } from '@snx-v3/withERC7412';\nimport { ethers } from 'ethers';\nimport { useCallback } from 'react';\n\nconst ERC721_ERRORS = [\n  'error CannotSelfApprove(address addr)',\n  'error InvalidTransferRecipient(address addr)',\n  'error InvalidOwner(address addr)',\n  'error TokenDoesNotExist(uint256 id)',\n  'error TokenAlreadyMinted(uint256 id)',\n];\n\nexport type ContractErrorType = {\n  data: string;\n  name: string;\n  signature: string;\n  args: Record<string, any>;\n};\n\nexport function useContractErrorParser() {\n  const { data: AllErrors } = useAllErrors();\n  const { data: ClosePosition } = useClosePosition();\n\n  return useCallback(\n    (error: any): ContractErrorType | undefined => {\n      if (!AllErrors) {\n        return undefined;\n      }\n      try {\n        const errorData = extractErrorData(error);\n        if (!errorData) {\n          console.error({ error }); // intentional logging as object so we can inspect all properties\n          return undefined;\n        }\n        const AllErrorsInterface = new ethers.utils.Interface([\n          ...AllErrors.abi,\n          ...PYTH_ERRORS,\n          ...ERC721_ERRORS,\n          ...(ClosePosition ? ClosePosition.abi : []),\n        ]);\n\n        const errorParsed = AllErrorsInterface.parseError(errorData);\n        const errorArgs = Object.fromEntries(\n          Object.entries(errorParsed.args)\n            .filter(([key]) => `${parseInt(key)}` !== key)\n            .map(([key, value]) => {\n              if (value instanceof ethers.BigNumber) {\n                // Guess wei\n                const unwei = parseFloat(ethers.utils.formatEther(value.toString()));\n                if (unwei > 0.001) {\n                  // must be wei\n                  return [key, unwei];\n                }\n\n                // Guess date\n                if (\n                  value.toNumber() > new Date(2000, 1, 1).getTime() / 1000 &&\n                  value.toNumber() < new Date(2100, 1, 1).getTime() / 1000\n                ) {\n                  return [key, new Date(value.toNumber() * 1000)];\n                }\n\n                // Just a number\n                return [key, parseFloat(value.toString())];\n              }\n\n              // Not a number\n              return [key, value];\n            })\n        );\n\n        return {\n          data: errorData,\n          name: errorParsed.name,\n          signature: errorParsed.signature,\n          args: errorArgs,\n        };\n      } catch (e) {\n        console.error(e);\n        return undefined;\n      }\n    },\n    [AllErrors, ClosePosition]\n  );\n}\n","import { importAllErrors } from '@snx-v3/contracts';\nimport { Network, useNetwork } from '@snx-v3/useBlockchain';\nimport { useQuery } from '@tanstack/react-query';\n\nexport function useAllErrors(customNetwork?: Network) {\n  const { network } = useNetwork();\n  const targetNetwork = customNetwork || network;\n\n  return useQuery({\n    queryKey: [`${targetNetwork?.id}-${targetNetwork?.preset}`, 'AllErrors'],\n    enabled: Boolean(targetNetwork),\n    queryFn: async function () {\n      if (!targetNetwork) throw new Error('OMFG');\n      return importAllErrors(targetNetwork.id, targetNetwork.preset);\n    },\n    staleTime: Infinity,\n    // On some chains this is not available, and that is expected\n    throwOnError: false,\n  });\n}\n","import { useQuery } from '@tanstack/react-query';\nimport { useWallet, useNetwork, useDefaultProvider } from '@snx-v3/useBlockchain';\nimport { ZodBigNumber } from '@snx-v3/zod';\nimport { wei } from '@synthetixio/wei';\n\nconst BalanceSchema = ZodBigNumber.transform((x) => wei(x));\n\nexport function useEthBalance() {\n  const { activeWallet } = useWallet();\n  const provider = useDefaultProvider();\n  const { network } = useNetwork();\n\n  return useQuery({\n    queryKey: [\n      `${network?.id}-${network?.preset}`,\n      'EthBalance',\n      { accountAddress: activeWallet?.address },\n    ],\n    enabled: Boolean(provider && activeWallet),\n    queryFn: async () => {\n      if (!(provider && activeWallet)) throw 'OMFG';\n      return BalanceSchema.parse(await provider.getBalance(activeWallet.address));\n    },\n  });\n}\n","import type { GasPrices } from '@snx-v3/useGasPrice';\nimport type { BigNumber } from '@ethersproject/bignumber';\nimport { wei } from '@synthetixio/wei';\nimport { GWEI_DECIMALS, GAS_LIMIT_MULTIPLIER } from '@snx-v3/constants';\n\n// Note it looks like gas limit estimation is coming in higher slightly higher than what gets used according to etherscan\n// Will try without a buffer, if we get user report of out of gas we can increase it again.\nconst GAS_LIMIT_BUFFER = wei(GAS_LIMIT_MULTIPLIER, GWEI_DECIMALS);\n\nfunction addGasLimitBuffer(gasLimit?: BigNumber) {\n  return wei(gasLimit ?? 0, GWEI_DECIMALS)\n    .mul(GAS_LIMIT_BUFFER)\n    .toBN();\n}\n\nexport function formatGasPriceForTransaction({\n  gasPrices,\n  gasSpeed,\n  gasLimit,\n}: {\n  gasPrices: GasPrices;\n  gasSpeed: keyof GasPrices;\n  gasLimit: BigNumber;\n}) {\n  const gasPrice = gasPrices[gasSpeed];\n  if ('baseFeePerGas' in gasPrice) {\n    const { baseFeePerGas: _baseFeePerGas, ...gasPriceToReturn } = gasPrice;\n    return { ...gasPriceToReturn, gasLimit: addGasLimitBuffer(gasLimit) };\n  }\n  return { ...gasPrice, gasLimit: addGasLimitBuffer(gasLimit) };\n}\n","// copied from npm package: moving-averages\n// Only grabbed what we needed and added types\nexport const isNumber = (subject: unknown) =>\n  typeof subject === 'number' &&\n  // is not NaN: `NaN === NaN` => `false`\n  subject === subject;\n\nexport const dma = (data: number[], alpha: number, noHead?: boolean): number[] => {\n  const length = data.length;\n\n  if (alpha > 1) {\n    return Array(length);\n  }\n\n  if (alpha === 1) {\n    return data.slice();\n  }\n\n  const noArrayWeight = !Array.isArray(alpha);\n  const ret = [];\n\n  let datum;\n\n  // period `i`\n  let i = 0;\n\n  // `s` is the value of the DWMA at any time period `i`\n  let s = 0;\n\n  // Handles head\n  for (; i < length; i++) {\n    datum = data[i];\n\n    if (isNumber(datum) && (noArrayWeight || isNumber(datum))) {\n      ret[i] = noHead ? 0 : datum;\n\n      s = datum;\n      i++;\n\n      break;\n    }\n  }\n\n  // Dynamic weights: an array of weights\n  // Ref:\n  // https://en.wikipedia.org/wiki/Moving_average#Exponential_moving_average\n  // with a dynamic alpha\n  if (!noArrayWeight) {\n    for (; i < length; i++) {\n      datum = data[i];\n\n      isNumber(datum) && isNumber(alpha[i])\n        ? (s = ret[i] = alpha[i] * datum + (1 - alpha[i]) * s)\n        : (ret[i] = ret[i - 1]);\n    }\n\n    return ret;\n  }\n\n  const o = 1 - alpha;\n\n  // Fixed alpha\n  for (; i < length; i++) {\n    datum = data[i];\n\n    isNumber(datum) ? (s = ret[i] = alpha * datum + o * s) : (ret[i] = ret[i - 1]);\n  }\n\n  return ret;\n};\n\nexport const ema = (data: number[], size: number) => dma(data, 2 / (size + 1));\n","import { Wei } from '@synthetixio/wei';\n\nexport const rewardsFilterOutliers = (\n  blocksRewards: Wei[][],\n  outlierBlocks: number[],\n  rewardIndex: number\n) =>\n  blocksRewards\n    .filter((_, index) => !outlierBlocks.includes(index))\n    .map((reward) => reward[rewardIndex].toNumber());\n\nexport const getOutlierBlocksToRemove = (blocksRewards: Wei[][], index: number) => {\n  const blocks: number[] = [];\n  blocksRewards\n    .map((reward) => reward[index])\n    .forEach((gweiReward, i) => {\n      if (gweiReward.gt(5)) {\n        blocks.push(i);\n      }\n    });\n  return blocks;\n};\n","/**\n * This module is heavily inspired by https://github.com/rainbow-me/fee-suggestions\n * That library have some hardcoded min and max that doesn't make sense for optimism. See: https://github.com/rainbow-me/fee-suggestions/blob/main/src/index.ts#L165\n *\n * So I changed min max a bit\n *\n * That library is also a bit overkill in how it calculates maxFeePerGas per gas. It's using linear regression and sampling curves.\n * Instead of doing that, this module calculates max by taking  (previous baseFeePerGas * 2) + maxPriorityFeePerGas.\n *\n * The calculation for maxPriorityFeePerGas I kept quite complex since that will affect what the user actually pay..\n * It's calculated based on the Exponential Moving Average (EMA) of the block rewards at the 15th, 30th, and 45th percentiles, after removing the outliers.\n *\n * The other differences is that I also rely on our Wei library.\n *\n */\nimport { ethers } from 'ethers';\nimport { ema } from './math';\nimport { getOutlierBlocksToRemove, rewardsFilterOutliers } from './utils';\nimport { wei, Wei } from '@synthetixio/wei';\nimport { GWEI_DECIMALS } from '@snx-v3/constants';\n\ntype Reward = string[];\ntype GasUsedRatio = number[];\ninterface FeeHistoryResponse {\n  baseFeePerGas: string[];\n  gasUsedRatio: GasUsedRatio;\n  oldestBlock: number;\n  reward: Reward[];\n}\n\nconst defaultForLocalProvider = () => {\n  const baseFeePerGas = wei(1, 9).toBN();\n  const maxFeePerGas = wei(5, 9).toBN();\n  const maxPriorityFeePerGas = wei(1, 9).toBN();\n  return {\n    average: {\n      maxPriorityFeePerGas,\n      maxFeePerGas,\n      baseFeePerGas,\n    },\n    fast: {\n      maxPriorityFeePerGas,\n      maxFeePerGas,\n      baseFeePerGas,\n    },\n    fastest: {\n      maxPriorityFeePerGas,\n      maxFeePerGas,\n      baseFeePerGas,\n    },\n  };\n};\nexport const feeSuggestion = async (\n  provider: ethers.providers.JsonRpcProvider,\n  fromBlock = 'latest'\n) => {\n  const feeHistory = await provider\n    .send('eth_feeHistory', [\n      ethers.utils.hexStripZeros(ethers.utils.hexlify(10)),\n      fromBlock,\n      [15, 30, 45],\n    ])\n    .then((feeHistoryResponse: FeeHistoryResponse) => {\n      return {\n        baseFeePerGas: feeHistoryResponse.baseFeePerGas.map((x) => wei(x, GWEI_DECIMALS, true)),\n        reward: feeHistoryResponse.reward.map((x) => x.map((num) => wei(num, GWEI_DECIMALS, true))),\n      };\n    });\n  const blocksRewards = feeHistory.reward;\n  const baseFeePerGas = feeHistory.baseFeePerGas.at(-1);\n\n  if (!blocksRewards.length) {\n    console.error(new Error('Error: block reward was empty'));\n    return defaultForLocalProvider();\n  }\n  if (!baseFeePerGas) {\n    console.error(new Error('Error: currentBaseFee was empty'));\n    return defaultForLocalProvider();\n  }\n\n  const outlierBlocks = getOutlierBlocksToRemove(blocksRewards, 0);\n\n  const blocksRewardsPerc15 = rewardsFilterOutliers(blocksRewards, outlierBlocks, 0);\n  const blocksRewardsPerc30 = rewardsFilterOutliers(blocksRewards, outlierBlocks, 1);\n  const blocksRewardsPerc45 = rewardsFilterOutliers(blocksRewards, outlierBlocks, 2);\n\n  const emaPerc15 = ema(blocksRewardsPerc15, blocksRewardsPerc15.length)[\n    blocksRewardsPerc15.length - 1\n  ];\n  const emaPerc30 = ema(blocksRewardsPerc30, blocksRewardsPerc30.length)[\n    blocksRewardsPerc30.length - 1\n  ];\n  const emaPerc45 = ema(blocksRewardsPerc45, blocksRewardsPerc45.length)[\n    blocksRewardsPerc45.length - 1\n  ];\n\n  if (emaPerc15 === undefined || emaPerc30 === undefined || emaPerc45 === undefined) {\n    throw new Error('Error: ema was undefined');\n  }\n\n  const averageMaxPriorityFee = wei(Math.min(emaPerc15, 1), GWEI_DECIMALS);\n  const fastMaxPriorityFee = wei(Math.min(emaPerc30, 2), GWEI_DECIMALS);\n  const fastestMaxPriorityFee = wei(Math.min(emaPerc45, 4), GWEI_DECIMALS);\n\n  const baseFeeToMax = (base: Wei, prio: Wei) => base.mul(wei(2, GWEI_DECIMALS)).add(prio);\n  return {\n    average: {\n      maxPriorityFeePerGas: averageMaxPriorityFee.toBN(),\n      maxFeePerGas: baseFeeToMax(baseFeePerGas, averageMaxPriorityFee).toBN(),\n      baseFeePerGas: baseFeePerGas.toBN(),\n    },\n    fast: {\n      maxPriorityFeePerGas: fastMaxPriorityFee.toBN(),\n      maxFeePerGas: baseFeeToMax(baseFeePerGas, fastMaxPriorityFee).toBN(),\n      baseFeePerGas: baseFeePerGas.toBN(),\n    },\n    fastest: {\n      maxPriorityFeePerGas: fastestMaxPriorityFee.toBN(),\n      maxFeePerGas: baseFeeToMax(baseFeePerGas, fastestMaxPriorityFee).toBN(),\n      baseFeePerGas: baseFeePerGas.toBN(),\n    },\n  };\n};\n","import { useQuery } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\nimport { useNetwork, useProvider } from '@snx-v3/useBlockchain';\nimport { feeSuggestion } from '@snx-v3/feeSuggestion';\n\nconst getGasPriceFromProvider = async (provider: ethers.providers.JsonRpcProvider) => {\n  try {\n    const gasPrice = await provider.getGasPrice();\n    return {\n      fastest: { gasPrice },\n      fast: { gasPrice },\n      average: { gasPrice },\n    };\n  } catch (e) {\n    throw new Error('Could not retrieve gas price from provider');\n  }\n};\n\nexport const getGasPrice = async ({ provider }: { provider: ethers.providers.JsonRpcProvider }) => {\n  try {\n    const block = await provider.getBlock('latest');\n    if (block.baseFeePerGas) {\n      return feeSuggestion(provider);\n    }\n    // When missing baseFeePerGas we get the Gas Price through the provider\n    return getGasPriceFromProvider(provider);\n  } catch (e) {\n    throw new Error(`Could not fetch and compute network fee. ${e}`);\n  }\n};\n\nexport type GasPrices = Awaited<ReturnType<typeof getGasPrice>>;\n\nexport const useGasPrice = () => {\n  const { network } = useNetwork();\n  const provider = useProvider();\n\n  return useQuery({\n    enabled: Boolean(provider),\n    queryKey: [`${network?.id}-${network?.preset}`, 'GasPrice'],\n    queryFn: () => {\n      if (!provider) throw new Error('useGasPrice should not be enabled');\n      return getGasPrice({ provider });\n    },\n  });\n};\n","import React, {\n  createContext,\n  useState,\n  PropsWithChildren,\n  Dispatch,\n  SetStateAction,\n  useContext,\n} from 'react';\n\nexport type GasSpeed = 'average' | 'fast' | 'fastest';\n\nexport const GasSpeedContext = createContext<{\n  gasSpeed: GasSpeed;\n  setGasSpeed: Dispatch<SetStateAction<GasSpeed>>;\n}>({\n  gasSpeed: 'average',\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  setGasSpeed: () => {},\n});\n\nexport const GasSpeedProvider: React.FC<PropsWithChildren> = ({ children }) => {\n  const [gasSpeed, setGasSpeed] = useState<GasSpeed>('average');\n  return (\n    <GasSpeedContext.Provider value={{ gasSpeed, setGasSpeed }}>\n      {children}\n    </GasSpeedContext.Provider>\n  );\n};\n\nexport const useGasSpeed = () => {\n  return useContext(GasSpeedContext);\n};\n","import { useQuery } from '@tanstack/react-query';\nimport { Network, useNetwork, useProviderForChain } from '@snx-v3/useBlockchain';\nimport { useCollateralTypes } from '@snx-v3/useCollateralTypes';\nimport { useSpotMarketProxy } from '@snx-v3/useSpotMarketProxy';\nimport { USDC_BASE_MARKET, isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { useSystemToken } from '@snx-v3/useSystemToken';\nimport { ethers } from 'ethers';\n\nexport function useGetUSDTokens(customNetwork?: Network) {\n  const { network } = useNetwork();\n\n  const targetNetwork = customNetwork || network;\n  const provider = useProviderForChain(targetNetwork);\n\n  const isBase = isBaseAndromeda(targetNetwork?.id, targetNetwork?.preset);\n\n  const { data: collateralTypes } = useCollateralTypes(false, customNetwork);\n  const { data: SpotMarketProxy } = useSpotMarketProxy(customNetwork);\n  const { data: systemToken } = useSystemToken(customNetwork);\n\n  return useQuery({\n    queryKey: [`${targetNetwork?.id}-${targetNetwork?.preset}`, 'GetUSDTokens'],\n    enabled: Boolean(\n      SpotMarketProxy && provider && targetNetwork && collateralTypes?.length && systemToken\n    ),\n    queryFn: async () => {\n      if (\n        !(SpotMarketProxy && provider && targetNetwork && collateralTypes?.length && systemToken)\n      ) {\n        throw 'OMFG';\n      }\n      const SpotMarketProxyContract = new ethers.Contract(\n        SpotMarketProxy.address,\n        SpotMarketProxy.abi,\n        provider\n      );\n\n      const USDC: string = isBase\n        ? (await SpotMarketProxyContract.getWrapper(USDC_BASE_MARKET))?.wrapCollateralType\n        : undefined;\n\n      return {\n        snxUSD: systemToken.address,\n        sUSD: collateralTypes?.find((type) =>\n          isBase ? type.symbol.toLowerCase() === 'usdc' : type.symbol.toLowerCase() === 'susdc'\n        )?.tokenAddress,\n        USDC,\n      };\n    },\n  });\n}\n\nexport const useGetWrapperToken = (marketId: string, customNetwork?: Network) => {\n  const { network } = useNetwork();\n  const targetNetwork = customNetwork || network;\n  const provider = useProviderForChain(targetNetwork);\n  const isBase = isBaseAndromeda(targetNetwork?.id, targetNetwork?.preset);\n  const { data: SpotMarketProxy } = useSpotMarketProxy(customNetwork);\n\n  return useQuery({\n    queryKey: [`${targetNetwork?.id}-${targetNetwork?.preset}`, 'GetWrapperToken', marketId],\n    enabled: Boolean(targetNetwork && provider && SpotMarketProxy && isBase),\n    queryFn: async () => {\n      if (!(targetNetwork && provider && SpotMarketProxy && isBase)) {\n        throw 'OMFG';\n      }\n      const SpotMarketProxyContract = new ethers.Contract(\n        SpotMarketProxy.address,\n        SpotMarketProxy.abi,\n        provider\n      );\n\n      return isBase\n        ? (await SpotMarketProxyContract.getWrapper(USDC_BASE_MARKET))?.wrapCollateralType\n        : undefined;\n    },\n  });\n};\n","import { useParams as useParamsRouter, useSearchParams } from 'react-router-dom';\nimport { useMemo } from 'react';\n\nexport function searchParamsToObject(searchParams: URLSearchParams) {\n  return Object.fromEntries(Array.from(searchParams));\n}\n\nexport function sortObject(params: Record<string, string>): Record<string, string> {\n  return Object.fromEntries(Object.entries(params).sort(([a], [b]) => a.localeCompare(b)));\n}\n\nexport function cleanObject(params: Record<string, string | undefined>): Record<string, string> {\n  const cleaned = Object.entries(params).filter(([, value]) => value !== undefined) as [\n    [string, string],\n  ];\n  return Object.fromEntries(cleaned);\n}\n\nexport const useParams = (): Record<string, string | undefined> => {\n  const pathParams = useParamsRouter();\n  const [queryParams] = useSearchParams();\n\n  return useMemo(\n    () => sortObject({ ...cleanObject(pathParams), ...searchParamsToObject(queryParams) }),\n    [pathParams, queryParams]\n  );\n};\n","import { contractsHash } from '@snx-v3/tsHelpers';\nimport { Network, useNetwork, useProviderForChain } from '@snx-v3/useBlockchain';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { useQuery } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\n\nexport function usePools(customNetwork?: Network) {\n  const { network } = useNetwork();\n  const targetNetwork = customNetwork || network;\n  const { data: CoreProxy } = useCoreProxy(targetNetwork);\n  const provider = useProviderForChain(targetNetwork);\n\n  return useQuery({\n    enabled: Boolean(provider && CoreProxy),\n    queryKey: [\n      `${targetNetwork?.id}-${targetNetwork?.preset}`,\n      'Pools',\n      { contractsHash: contractsHash([CoreProxy]) },\n    ],\n    queryFn: async () => {\n      if (!(provider && CoreProxy)) throw 'OMFG';\n\n      const CoreProxyContract = new ethers.Contract(CoreProxy.address, CoreProxy.abi, provider);\n\n      const [preferredPoolId, approvedPoolIds] = await Promise.all([\n        CoreProxyContract.getPreferredPool(),\n        CoreProxyContract.getApprovedPools(),\n      ]);\n\n      const incompletePools = [\n        {\n          id: preferredPoolId,\n          isPreferred: true,\n        },\n      ].concat(\n        approvedPoolIds.map((id: ethers.BigNumber) => ({\n          id: id,\n          isPreferred: false,\n        }))\n      );\n\n      const poolNames = await Promise.all(\n        incompletePools.map(async ({ id }) => await CoreProxyContract.getPoolName(id))\n      );\n\n      return incompletePools.map((pool, i) => ({\n        id: `${pool.id}`,\n        name: poolNames[i] || 'Unnamed Pool',\n        isPreferred: pool.isPreferred,\n      }));\n    },\n  });\n}\n\nexport function usePool(poolId?: string, customNetwork?: Network) {\n  const { network } = useNetwork();\n  const targetNetwork = customNetwork || network;\n  const { data: pools } = usePools(targetNetwork);\n\n  return useQuery({\n    queryKey: [`${targetNetwork?.id}-${targetNetwork?.preset}`, 'Pool', { poolId }],\n    enabled: Boolean(pools),\n    queryFn: () => {\n      if (!pools) throw 'OMFG';\n      return pools.find((item) => `${item.id}` === `${poolId}`);\n    },\n  });\n}\n","import { getSubgraphUrl } from '@snx-v3/constants';\nimport { ARBITRUM, BASE_ANDROMEDA, MAINNET, NETWORKS } from '@snx-v3/useBlockchain';\nimport { compactInteger } from 'humanize-plus';\nimport { fetchApr } from '@snx-v3/useApr';\nimport { useQuery } from '@tanstack/react-query';\n\nexport function usePoolsList() {\n  return useQuery({\n    queryKey: ['poolsList'],\n    queryFn: async () => {\n      try {\n        const [pools, aprs] = await Promise.all([fetchPoolsList(), fetchAprs()]);\n\n        const synthetixPools = pools.map((p, i) => ({\n          ...p,\n          apr: aprs[i],\n        }));\n\n        return { synthetixPools };\n      } catch (error) {\n        throw error;\n      }\n    },\n    staleTime: 60000 * 10,\n  });\n}\n\nexport function usePool(networkId: number, poolId: string) {\n  const { data, isPending } = usePoolsList();\n\n  // TODO: In the future if we have multiple pools per network filter by poolId also\n  return {\n    data: data?.synthetixPools.find(\n      (p) => p?.network?.id === networkId && p?.poolInfo?.[0]?.pool?.id === poolId\n    ),\n    isLoading: isPending,\n  };\n}\n\nconst supportedNetworks = [MAINNET.id, BASE_ANDROMEDA.id, ARBITRUM.id];\n\nexport async function fetchTorosPool(address: string) {\n  return fetch('https://api-v2.dhedge.org/graphql', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      query: `\n          query GetFund($address: String!) {\n              fund(address: $address) {\n                totalValue\n                apy {\n                  monthly\n                  weekly\n                }\n              }\n            }`,\n      variables: { address },\n    }),\n  })\n    .then((response) => response.json())\n    .then(({ data }) => {\n      return {\n        tvl: compactInteger(data.fund.totalValue / 1e18, 1),\n        apy: data.fund.apy.weekly,\n      };\n    });\n}\n\nexport const networksOffline = NETWORKS.filter(\n  (n) => supportedNetworks.includes(n.id) && n.isSupported\n).map((n) => n);\n\nasync function fetchAprs() {\n  return Promise.all(networksOffline.map((network) => fetchApr(network.id)));\n}\n\nasync function fetchPoolsList() {\n  const urls = networksOffline.map((network) => getSubgraphUrl(network.name));\n\n  // Fetch all the pools from the subgraphs\n  const responses = await Promise.all(\n    urls.map((url) =>\n      fetch(url, { method: 'POST', body: JSON.stringify({ query: PoolsListData }) }).then((res) =>\n        res.json()\n      )\n    )\n  );\n\n  return responses.map((response, i) => ({\n    network: networksOffline[i],\n    poolInfo: (response?.data?.vaults ?? []) as PoolInfo[],\n  }));\n}\n\nconst gql = (data: TemplateStringsArray) => data[0];\n\nconst PoolsListData = gql`\n  query PoolsListData {\n    vaults(where: { pool: \"1\" }) {\n      collateral_type {\n        id\n        oracle_node_id\n        total_amount_deposited\n      }\n      pool {\n        name\n        id\n      }\n    }\n  }\n`;\n\ninterface PoolInfo {\n  collateral_type: {\n    id: string;\n    oracle_node_id: string;\n    total_amount_deposited: string;\n  };\n  pool: {\n    name: string;\n    id: string;\n  };\n}\n","import { ZEROWEI } from '@snx-v3/constants';\nimport { notNil } from '@snx-v3/tsHelpers';\nimport { initialState, reducer } from '@snx-v3/txnReducer';\nimport { useNetwork, useProvider, useSigner } from '@snx-v3/useBlockchain';\nimport { useCollateralPriceUpdates } from '@snx-v3/useCollateralPriceUpdates';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { formatGasPriceForTransaction } from '@snx-v3/useGasOptions';\nimport { getGasPrice } from '@snx-v3/useGasPrice';\nimport { useGasSpeed } from '@snx-v3/useGasSpeed';\nimport { useSystemToken } from '@snx-v3/useSystemToken';\nimport { withERC7412 } from '@snx-v3/withERC7412';\nimport Wei from '@synthetixio/wei';\nimport { useMutation } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\nimport { useReducer } from 'react';\n\nexport const useRepay = ({\n  accountId,\n  poolId,\n  collateralTypeAddress,\n  debtChange,\n  availableUSDCollateral,\n}: {\n  accountId?: string;\n  poolId?: string;\n  collateralTypeAddress?: string;\n  balance?: Wei;\n  availableUSDCollateral?: Wei;\n  debtChange: Wei;\n}) => {\n  const [txnState, dispatch] = useReducer(reducer, initialState);\n  const { data: CoreProxy } = useCoreProxy();\n  const { data: priceUpdateTx, refetch: refetchPriceUpdateTx } = useCollateralPriceUpdates();\n  const { data: systemToken } = useSystemToken();\n\n  const signer = useSigner();\n  const { network } = useNetwork();\n  const { gasSpeed } = useGasSpeed();\n  const provider = useProvider();\n\n  const mutation = useMutation({\n    mutationFn: async () => {\n      if (!signer || !network || !provider) throw new Error('No signer or network');\n      if (!(CoreProxy && poolId && accountId && collateralTypeAddress && systemToken)) {\n        return;\n      }\n      if (debtChange.eq(0)) {\n        return;\n      }\n\n      const debtChangeAbs = debtChange.abs();\n      const amountToDeposit = debtChangeAbs.sub(availableUSDCollateral || ZEROWEI);\n\n      try {\n        dispatch({ type: 'prompting' });\n\n        const CoreProxyContract = new ethers.Contract(CoreProxy.address, CoreProxy.abi, signer);\n\n        // Only deposit if user doesn't have enough sUSD collateral\n        const deposit = amountToDeposit.lte(0)\n          ? undefined\n          : CoreProxyContract.populateTransaction.deposit(\n              ethers.BigNumber.from(accountId),\n              systemToken.address,\n              amountToDeposit.toBN() // only deposit what's needed\n            );\n\n        const burn = CoreProxyContract.populateTransaction.burnUsd(\n          ethers.BigNumber.from(accountId),\n          ethers.BigNumber.from(poolId),\n          collateralTypeAddress,\n          debtChangeAbs.toBN()\n        );\n\n        const callsPromise = Promise.all([deposit, burn].filter(notNil));\n        const walletAddress = await signer.getAddress();\n\n        const [calls, gasPrices] = await Promise.all([callsPromise, getGasPrice({ provider })]);\n\n        if (priceUpdateTx) {\n          calls.unshift(priceUpdateTx as any);\n        }\n\n        const { multicallTxn: erc7412Tx, gasLimit } = await withERC7412(\n          network,\n          calls,\n          'useRepay',\n          walletAddress\n        );\n\n        const gasOptionsForTransaction = formatGasPriceForTransaction({\n          gasLimit,\n          gasPrices,\n          gasSpeed,\n        });\n\n        const txn = await signer.sendTransaction({ ...erc7412Tx, ...gasOptionsForTransaction });\n        dispatch({ type: 'pending', payload: { txnHash: txn.hash } });\n\n        await txn.wait();\n        dispatch({ type: 'success' });\n      } catch (error: any) {\n        dispatch({ type: 'error', payload: { error } });\n        throw error;\n      }\n    },\n    onSuccess: () => {\n      // After mutation withERC7412, we guaranteed to have updated all the prices, dont care about await\n      refetchPriceUpdateTx();\n    },\n  });\n  return {\n    mutation,\n    txnState,\n    settle: () => dispatch({ type: 'settled' }),\n    isLoading: mutation.isPending,\n    exec: mutation.mutateAsync,\n  };\n};\n","import { Network, useNetwork, useProviderForChain, useWallet } from '@snx-v3/useBlockchain';\nimport { wei } from '@synthetixio/wei';\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\n\nexport const abi = [\n  'function balanceOf(address) view returns (uint256)',\n  'function decimals() view returns (uint8)',\n];\n\nexport const useTokenBalance = (tokenAddress?: string, customNetwork?: Network) => {\n  const { activeWallet } = useWallet();\n  const { network } = useNetwork();\n  const targetNetwork = customNetwork || network;\n  const provider = useProviderForChain(targetNetwork);\n  const walletAddress = activeWallet?.address;\n  return useQuery({\n    enabled: Boolean(walletAddress && tokenAddress && provider && targetNetwork),\n    queryKey: [\n      `${targetNetwork?.id}-${targetNetwork?.preset}`,\n      'TokenBalance',\n      { accountAddress: walletAddress, tokenAddress },\n    ],\n    queryFn: async () => {\n      if (!(walletAddress && tokenAddress && provider && targetNetwork)) {\n        throw 'OMFG';\n      }\n\n      const TokenContract = new ethers.Contract(tokenAddress, abi, provider);\n      const [balance, decimals] = await Promise.all([\n        TokenContract.balanceOf(walletAddress),\n        TokenContract.decimals(),\n      ]);\n      return { balance, decimals };\n    },\n    select: ({ balance, decimals }) => wei(balance, decimals),\n    refetchInterval: 120_000,\n  });\n};\n\nexport const useTokenBalances = (tokenAddresses: string[], customNetwork?: Network) => {\n  const { activeWallet } = useWallet();\n  const { network } = useNetwork();\n  const targetNetwork = customNetwork || network;\n  const provider = useProviderForChain(targetNetwork);\n  const walletAddress = activeWallet?.address;\n\n  const queryClient = useQueryClient();\n  return useQuery({\n    queryKey: [\n      `${targetNetwork?.id}-${targetNetwork?.preset}`,\n      'TokenBalance',\n      {\n        accountAddress: walletAddress,\n        tokenAddresses: tokenAddresses.map((a) => a.slice(2, 6).toLowerCase()).sort(),\n      },\n    ],\n    enabled: Boolean(walletAddress && tokenAddresses.length && provider && targetNetwork),\n\n    queryFn: async () => {\n      if (!(walletAddress && tokenAddresses.length && provider && targetNetwork)) {\n        throw 'OMFG';\n      }\n\n      return await Promise.all(\n        tokenAddresses.map(async (tokenAddress) => {\n          const TokenContract = new ethers.Contract(tokenAddress, abi, provider);\n          const [balance, decimals] = await Promise.all([\n            TokenContract.balanceOf(walletAddress),\n            TokenContract.decimals(),\n          ]);\n          queryClient.setQueryData(\n            [\n              `${targetNetwork?.id}-${targetNetwork?.preset}`,\n              'TokenBalance',\n              {\n                accountAddress: walletAddress,\n                tokenAddresses: tokenAddresses.map((a) => a.slice(2, 6).toLowerCase()).sort(),\n              },\n            ],\n            { balance, decimals }\n          );\n          return { balance, decimals };\n        })\n      );\n    },\n    select: (balances) => balances.map(({ balance, decimals }) => wei(balance, decimals)),\n    refetchInterval: 120_000,\n  });\n};\n","import { initialState, reducer } from '@snx-v3/txnReducer';\nimport { useNetwork, useProvider, useSigner } from '@snx-v3/useBlockchain';\nimport { useCollateralPriceUpdates } from '@snx-v3/useCollateralPriceUpdates';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { formatGasPriceForTransaction } from '@snx-v3/useGasOptions';\nimport { getGasPrice } from '@snx-v3/useGasPrice';\nimport { useGasSpeed } from '@snx-v3/useGasSpeed';\nimport { withERC7412 } from '@snx-v3/withERC7412';\nimport Wei, { wei } from '@synthetixio/wei';\nimport { useMutation } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\nimport { useReducer } from 'react';\n\nexport const useUndelegate = ({\n  accountId,\n  poolId,\n  collateralTypeAddress,\n  collateralChange,\n  currentCollateral,\n}: {\n  accountId?: string;\n  poolId?: string;\n  collateralTypeAddress?: string;\n  currentCollateral: Wei;\n  collateralChange: Wei;\n}) => {\n  const [txnState, dispatch] = useReducer(reducer, initialState);\n  const { data: CoreProxy } = useCoreProxy();\n  const { data: priceUpdateTx, refetch: refetchPriceUpdateTx } = useCollateralPriceUpdates();\n  const signer = useSigner();\n  const { gasSpeed } = useGasSpeed();\n  const provider = useProvider();\n  const { network } = useNetwork();\n\n  const mutation = useMutation({\n    mutationFn: async () => {\n      if (!signer || !network || !provider) throw new Error('No signer or network');\n      if (!(CoreProxy && poolId && collateralTypeAddress)) return;\n      if (collateralChange.eq(0)) return;\n      if (currentCollateral.eq(0)) return;\n      try {\n        dispatch({ type: 'prompting' });\n\n        const CoreProxyContract = new ethers.Contract(CoreProxy.address, CoreProxy.abi, signer);\n        const populatedTxnPromised = CoreProxyContract.populateTransaction.delegateCollateral(\n          ethers.BigNumber.from(accountId),\n          ethers.BigNumber.from(poolId),\n          collateralTypeAddress,\n          currentCollateral.add(collateralChange).toBN(),\n          wei(1).toBN()\n        );\n\n        const walletAddress = await signer.getAddress();\n\n        const callsPromise = Promise.all([populatedTxnPromised]);\n        const [calls, gasPrices] = await Promise.all([callsPromise, getGasPrice({ provider })]);\n        if (priceUpdateTx) {\n          calls.unshift(priceUpdateTx as any);\n        }\n\n        const { multicallTxn: erc7412Tx, gasLimit } = await withERC7412(\n          network,\n          calls,\n          'useUndelegate',\n          walletAddress\n        );\n\n        const gasOptionsForTransaction = formatGasPriceForTransaction({\n          gasLimit,\n          gasPrices,\n          gasSpeed,\n        });\n\n        const txn = await signer.sendTransaction({ ...erc7412Tx, ...gasOptionsForTransaction });\n        dispatch({ type: 'pending', payload: { txnHash: txn.hash } });\n\n        await txn.wait();\n        dispatch({ type: 'success' });\n      } catch (error: any) {\n        dispatch({ type: 'error', payload: { error } });\n        throw error;\n      }\n    },\n    onSuccess: () => {\n      // After mutation withERC7412, we guaranteed to have updated all the prices, dont care about await\n      refetchPriceUpdateTx();\n    },\n  });\n  return {\n    mutation,\n    txnState,\n    settle: () => dispatch({ type: 'settled' }),\n    isLoading: mutation.isPending,\n    exec: mutation.mutateAsync,\n  };\n};\n","import { parseUnits } from '@snx-v3/format';\nimport { USDC_BASE_MARKET } from '@snx-v3/isBaseAndromeda';\nimport { notNil } from '@snx-v3/tsHelpers';\nimport { initialState, reducer } from '@snx-v3/txnReducer';\nimport { useApprove } from '@snx-v3/useApprove';\nimport { useNetwork, useProvider, useSigner } from '@snx-v3/useBlockchain';\nimport { useCollateralPriceUpdates } from '@snx-v3/useCollateralPriceUpdates';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { useDebtRepayer } from '@snx-v3/useDebtRepayer';\nimport { formatGasPriceForTransaction } from '@snx-v3/useGasOptions';\nimport { getGasPrice } from '@snx-v3/useGasPrice';\nimport { useGasSpeed } from '@snx-v3/useGasSpeed';\nimport { useGetUSDTokens } from '@snx-v3/useGetUSDTokens';\nimport { LiquidityPosition } from '@snx-v3/useLiquidityPosition';\nimport { useSpotMarketProxy } from '@snx-v3/useSpotMarketProxy';\nimport { withERC7412 } from '@snx-v3/withERC7412';\nimport Wei, { wei } from '@synthetixio/wei';\nimport { useMutation } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\nimport React from 'react';\n\nexport const useUndelegateBaseAndromeda = ({\n  accountId,\n  poolId,\n  collateralTypeAddress,\n  collateralChange,\n  currentCollateral,\n  liquidityPosition,\n}: {\n  accountId?: string;\n  poolId?: string;\n  collateralTypeAddress?: string;\n  currentCollateral: Wei;\n  collateralChange: Wei;\n  liquidityPosition?: LiquidityPosition;\n}) => {\n  const [txnState, dispatch] = React.useReducer(reducer, initialState);\n  const { data: CoreProxy } = useCoreProxy();\n  const { data: SpotMarketProxy } = useSpotMarketProxy();\n  const { data: priceUpdateTx, refetch: refetchPriceUpdateTx } = useCollateralPriceUpdates();\n\n  const signer = useSigner();\n  const { gasSpeed } = useGasSpeed();\n  const provider = useProvider();\n  const { network } = useNetwork();\n  const { data: usdTokens } = useGetUSDTokens();\n\n  const debtExists = liquidityPosition?.debt.gt(0);\n  const currentDebt = debtExists && liquidityPosition ? liquidityPosition.debt : wei(0);\n\n  const { data: DebtRepayer } = useDebtRepayer();\n  const { approve, requireApproval } = useApprove({\n    contractAddress: usdTokens?.USDC,\n    //slippage for approval\n    amount: parseUnits(currentDebt.toString(), 6).mul(110).div(100),\n    spender: DebtRepayer?.address,\n  });\n\n  const mutation = useMutation({\n    mutationFn: async () => {\n      if (!signer || !network || !provider) throw new Error('No signer or network');\n      if (!(CoreProxy && poolId && collateralTypeAddress && SpotMarketProxy)) return;\n      if (collateralChange.eq(0)) return;\n      if (currentCollateral.eq(0)) return;\n      try {\n        dispatch({ type: 'prompting' });\n\n        if (debtExists && requireApproval) {\n          await approve(false);\n        }\n\n        const transactions: Promise<ethers.PopulatedTransaction>[] = [];\n\n        if (DebtRepayer) {\n          const DebtRepayerContract = new ethers.Contract(\n            DebtRepayer.address,\n            DebtRepayer.abi,\n            signer\n          );\n          const depositDebtToRepay = DebtRepayerContract.populateTransaction.depositDebtToRepay(\n            CoreProxy.address,\n            SpotMarketProxy.address,\n            accountId,\n            poolId,\n            collateralTypeAddress,\n            USDC_BASE_MARKET\n          );\n          transactions.push(depositDebtToRepay);\n        }\n\n        const CoreProxyContract = new ethers.Contract(CoreProxy.address, CoreProxy.abi, signer);\n\n        const burn = CoreProxyContract.populateTransaction.burnUsd(\n          ethers.BigNumber.from(accountId),\n          ethers.BigNumber.from(poolId),\n          collateralTypeAddress,\n          currentDebt.abs().mul(10).toBN()\n        );\n        transactions.push(burn);\n\n        const populatedTxnPromised = CoreProxyContract.populateTransaction.delegateCollateral(\n          ethers.BigNumber.from(accountId),\n          ethers.BigNumber.from(poolId),\n          collateralTypeAddress,\n          currentCollateral.add(collateralChange).toBN(),\n          wei(1).toBN()\n        );\n        transactions.push(populatedTxnPromised);\n\n        const callsPromise: Promise<\n          (ethers.PopulatedTransaction & { requireSuccess?: boolean })[]\n        > = Promise.all([...transactions].filter(notNil));\n\n        const [calls, gasPrices] = await Promise.all([callsPromise, getGasPrice({ provider })]);\n\n        calls[1].requireSuccess = false;\n        if (priceUpdateTx) {\n          calls.unshift(priceUpdateTx as any);\n        }\n\n        const walletAddress = await signer.getAddress();\n\n        const { multicallTxn: erc7412Tx, gasLimit } = await withERC7412(\n          network,\n          calls,\n          'useUndelegateBase',\n          walletAddress\n        );\n\n        const gasOptionsForTransaction = formatGasPriceForTransaction({\n          gasLimit,\n          gasPrices,\n          gasSpeed,\n        });\n\n        const txn = await signer.sendTransaction({ ...erc7412Tx, ...gasOptionsForTransaction });\n        dispatch({ type: 'pending', payload: { txnHash: txn.hash } });\n\n        await txn.wait();\n        dispatch({ type: 'success' });\n      } catch (error: any) {\n        dispatch({ type: 'error', payload: { error } });\n        throw error;\n      }\n    },\n    onSuccess: () => {\n      // After mutation withERC7412, we guaranteed to have updated all the prices, dont care about await\n      refetchPriceUpdateTx();\n    },\n  });\n  return {\n    mutation,\n    txnState,\n    settle: () => dispatch({ type: 'settled' }),\n    isLoading: mutation.isPending,\n    exec: mutation.mutateAsync,\n  };\n};\n","/* eslint-disable no-console */\nimport { EvmPriceServiceConnection } from '@pythnetwork/pyth-evm-js';\nimport { offchainMainnetEndpoint, offchainTestnetEndpoint } from '@snx-v3/constants';\nimport {\n  importAllErrors,\n  importCoreProxy,\n  importMulticall3,\n  importPythERC7412Wrapper,\n  importPythVerfier,\n  importClosePosition,\n  importAccountProxy,\n  importUSDProxy,\n} from '@snx-v3/contracts';\nimport { notNil } from '@snx-v3/tsHelpers';\nimport { Network, deploymentHasERC7412, getMagicProvider } from '@snx-v3/useBlockchain';\nimport { ethers } from 'ethers';\n\nconst IS_DEBUG =\n  window.localStorage.getItem('DEBUG') === 'true' ||\n  window.localStorage.DEBUG?.slice(0, 3) === 'snx';\n\nexport const PYTH_ERRORS = [\n  // Function arguments are invalid (e.g., the arguments lengths mismatch)\n  // Signature: 0xa9cb9e0d\n  'error InvalidArgument()',\n  // Update data is coming from an invalid data source.\n  // Signature: 0xe60dce71\n  'error InvalidUpdateDataSource()',\n  // Update data is invalid (e.g., deserialization error)\n  // Signature: 0xe69ffece\n  'error InvalidUpdateData()',\n  // Insufficient fee is paid to the method.\n  // Signature: 0x025dbdd4\n  'error InsufficientFee()',\n  // There is no fresh update, whereas expected fresh updates.\n  // Signature: 0xde2c57fa\n  'error NoFreshUpdate()',\n  // There is no price feed found within the given range or it does not exists.\n  // Signature: 0x45805f5d\n  'error PriceFeedNotFoundWithinRange()',\n  // Price feed not found or it is not pushed on-chain yet.\n  // Signature: 0x14aebe68\n  'error PriceFeedNotFound()',\n  // Requested price is stale.\n  // Signature: 0x19abf40e\n  'error StalePrice()',\n  // Given message is not a valid Wormhole VAA.\n  // Signature: 0x2acbe915\n  'error InvalidWormholeVaa()',\n  // Governance message is invalid (e.g., deserialization error).\n  // Signature: 0x97363b35\n  'error InvalidGovernanceMessage()',\n  // Governance message is not for this contract.\n  // Signature: 0x63daeb77\n  'error InvalidGovernanceTarget()',\n  // Governance message is coming from an invalid data source.\n  // Signature: 0x360f2d87\n  'error InvalidGovernanceDataSource()',\n  // Governance message is old.\n  // Signature: 0x88d1b847\n  'error OldGovernanceMessage()',\n  // The wormhole address to set in SetWormholeAddress governance is invalid.\n  // Signature: 0x13d3ed82\n  'error InvalidWormholeAddressToSet()',\n];\n\nasync function fetchOffchainData({\n  priceIds,\n  isTestnet,\n}: {\n  priceIds: string[];\n  isTestnet: boolean;\n}) {\n  const priceService = new EvmPriceServiceConnection(\n    isTestnet ? offchainTestnetEndpoint : offchainMainnetEndpoint\n  );\n  const signedOffchainData = await priceService.getPriceFeedsUpdateData(priceIds);\n  return signedOffchainData;\n}\n\nfunction parseError(\n  errorData: any,\n  AllErrors: { address: string; abi: string[] }\n): { name: string; args: any } | undefined {\n  if (`${errorData}`.startsWith('0x08c379a0')) {\n    const content = `0x${errorData.substring(10)}`;\n    // reason: string; for standard revert error string\n    const reason = ethers.utils.defaultAbiCoder.decode(['string'], content);\n    console.error(reason);\n    return {\n      name: `Revert ${reason[0]}`,\n      args: [],\n    };\n  }\n\n  try {\n    const AllErrorsInterface = new ethers.utils.Interface(\n      Array.from(new Set([...AllErrors.abi, ...PYTH_ERRORS]))\n    );\n    return AllErrorsInterface.parseError(errorData);\n  } catch (error) {\n    console.error(`Error parsing failure: ${error}`);\n    return {\n      name: 'Unknown',\n      args: [],\n    };\n  }\n}\n\n// simulate w/ wETH contract because it will have eth balance\n// This is useful when we do read/static calls but still need an balance for the price update\n// TODO: this probably need to be network aware, maybe look into a different solution even.\nexport const getDefaultFromAddress = (chainName: string) => {\n  switch (chainName) {\n    case 'cannon':\n      return '0x4200000000000000000000000000000000000006'; // TODO, unclear what to put here\n    case 'mainnet':\n      return '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2';\n    case 'sepolia':\n      return '0x7b79995e5f793a07bc00c21412e50ecae098e7f9';\n    case 'arbitrum':\n      return '0x82aF49447D8a07e3bd95BD0d56f35241523fBab1';\n    case 'arbitrum-sepolia':\n      return '0x980B62Da83eFf3D4576C647993b0c1D7faf17c73';\n    case 'optimism-mainnet':\n    case 'base':\n    case 'base-sepolia':\n      return '0x4200000000000000000000000000000000000006';\n\n    default:\n      throw new Error(`Unsupported chain ${chainName}`);\n  }\n};\n\nasync function logMulticall({\n  network,\n  calls,\n  label,\n}: {\n  network: Network;\n  calls: (ethers.PopulatedTransaction & { requireSuccess?: boolean })[];\n  label: string;\n}) {\n  const CoryProxyContract = await importCoreProxy(network.id, network.preset);\n  const AccountProxyContract = await importAccountProxy(network.id, network.preset);\n  const USDProxyContract = await importUSDProxy(network.id, network.preset);\n  const ClosePositionContract = await importClosePosition(network.id, network.preset).catch(\n    () => undefined\n  );\n  const PythERC7412Wrapper = await importPythERC7412Wrapper(network.id, network.preset);\n  const PythVerfier = await importPythVerfier(network.id, network.preset);\n  const AllInterface = new ethers.utils.Interface(\n    Array.from(\n      new Set([\n        ...CoryProxyContract.abi,\n        ...AccountProxyContract.abi,\n        ...USDProxyContract.abi,\n        ...(ClosePositionContract ? ClosePositionContract.abi : []),\n        ...PythERC7412Wrapper.abi,\n        ...PythVerfier.abi,\n      ])\n    )\n  );\n  console.log(\n    `[${label}] calls`,\n    calls.map(({ data, value, ...rest }) => {\n      try {\n        // @ts-ignore\n        const { name, args } = AllInterface.parseTransaction({ data, value });\n        if (Object.keys(args).filter(([key]) => `${key}` !== `${parseInt(key)}`).length > 0) {\n          const namedArgs = Object.fromEntries(\n            Object.entries(args).filter(([key]) => `${key}` !== `${parseInt(key)}`)\n          );\n          return { $: name, ...namedArgs };\n        }\n\n        const unnamedArgs = Object.entries(args)\n          .filter(([key]) => `${key}` === `${parseInt(key)}`)\n          .map(([, value]) => value);\n        return { $: name, ...unnamedArgs };\n      } catch {\n        return { $: 'unknown', data, value, ...rest };\n      }\n    })\n  );\n}\n\nexport function extractErrorData(error: Error | any) {\n  return (\n    error?.error?.error?.error?.data ||\n    error?.error?.error?.data ||\n    error?.error?.data?.data ||\n    error?.error?.data ||\n    error?.data?.data ||\n    error?.data\n  );\n}\n\nfunction extractPriceId(parsedError: { name: string; args: string[] }) {\n  try {\n    const [_oracleAddress, oracleQuery] = parsedError.args;\n    const [_updateType, _stalenessTolerance, [priceId]] = ethers.utils.defaultAbiCoder.decode(\n      ['uint8', 'uint64', 'bytes32[]'],\n      oracleQuery\n    );\n    return priceId;\n  } catch {\n    // whatever\n  }\n}\n\nasync function getMulticallTransaction(\n  network: Network,\n  calls: (ethers.PopulatedTransaction & { requireSuccess?: boolean })[],\n  from: string,\n  provider: ethers.providers.JsonRpcProvider\n) {\n  const Multicall3Contract = await importMulticall3(network.id, network.preset);\n  const Multicall3Interface = new ethers.utils.Interface(Multicall3Contract.abi);\n\n  const multicallTxn = {\n    from: from ? from : getDefaultFromAddress(network.name),\n    to: Multicall3Contract.address,\n    data: Multicall3Interface.encodeFunctionData('aggregate3Value', [\n      calls.map((call) => ({\n        target: call.to,\n        callData: call.data,\n        value: call.value ? ethers.BigNumber.from(call.value) : ethers.BigNumber.from(0),\n        requireSuccess: call.requireSuccess ?? true,\n      })),\n    ]),\n    value: calls.reduce(\n      (totalValue, call) => (call.value ? totalValue.add(call.value) : totalValue),\n      ethers.BigNumber.from(0)\n    ),\n  };\n  const gasLimit = await provider.estimateGas(multicallTxn);\n  return { multicallTxn, gasLimit, _calls: calls };\n}\n\n/**\n * If a tx requires ERC7412 pattern, wrap your tx with this function.\n */\nexport const withERC7412 = async (\n  network: Network,\n  calls: (ethers.PopulatedTransaction & { requireSuccess?: boolean })[],\n  label: string,\n  from: string\n) => {\n  // Make sure we're always using JSONRpcProvider, the web3 provider coming from the signer might have bugs causing errors to miss revert data\n  const jsonRpcProvider =\n    getMagicProvider() ?? new ethers.providers.JsonRpcProvider(network.rpcUrl());\n\n  if (!(await deploymentHasERC7412(network.id, network.preset))) {\n    return await getMulticallTransaction(network, calls, from, jsonRpcProvider);\n  }\n\n  const AllErrorsContract = await importAllErrors(network.id, network.preset);\n  const ClosePositionContract = await importClosePosition(network.id, network.preset).catch(\n    () => undefined\n  );\n  if (ClosePositionContract) {\n    ClosePositionContract.abi.forEach((line) => AllErrorsContract.abi.push(line));\n  }\n  const PythVerfier = await importPythVerfier(network.id, network.preset);\n\n  while (true) {\n    try {\n      if (IS_DEBUG) {\n        await logMulticall({ network, calls, label });\n      }\n      return await getMulticallTransaction(network, calls, from, jsonRpcProvider);\n    } catch (error: Error | any) {\n      console.error(error);\n      let errorData = extractErrorData(error);\n      if (!errorData && error.transaction) {\n        try {\n          console.log(\n            'Error is missing revert data, trying provider.call, instead of estimate gas...'\n          );\n          // Some wallets swallows the revert reason when calling estimate gas,try to get the error by using provider.call\n          // provider.call wont actually revert, instead the error data is just returned\n          const lookedUpError = await jsonRpcProvider.call(error.transaction);\n          errorData = lookedUpError;\n        } catch (newError: any) {\n          console.error(newError);\n          console.log('provider.call(error.transaction) failed, trying to extract error');\n          errorData = extractErrorData(error);\n        }\n      }\n      if (!errorData) {\n        throw error;\n      }\n      console.log(`[${label}]`, { errorData });\n\n      const parsedError = parseError(errorData, AllErrorsContract);\n      if (!parsedError) {\n        throw error;\n      }\n      console.log(`[${label}]`, { parsedError });\n\n      // Collect all the price IDs that require updates\n      const missingPriceUpdates = [];\n      if (parsedError.name === 'OracleDataRequired') {\n        missingPriceUpdates.push(extractPriceId(parsedError));\n      }\n      if (parsedError.name === 'Errors') {\n        for (const err of parsedError?.args?.[0] ?? []) {\n          try {\n            const parsedErr = parseError(err, AllErrorsContract);\n            if (parsedErr?.name === 'OracleDataRequired') {\n              missingPriceUpdates.push(extractPriceId(parsedErr));\n            }\n          } catch {\n            // whatever\n          }\n        }\n      }\n      const missingPriceUpdatesUnique = Array.from(new Set(missingPriceUpdates));\n      console.log(`[${label}]`, { missingPriceUpdates: missingPriceUpdatesUnique });\n      if (missingPriceUpdatesUnique.length < 1) {\n        // some other kind of error that's not related to price\n        throw error;\n      }\n\n      const signedOffchainData = await fetchOffchainData({\n        priceIds: missingPriceUpdatesUnique,\n        isTestnet: network.isTestnet,\n      });\n\n      const extraPriceUpdateTxn = {\n        from,\n        to: PythVerfier.address,\n        data: new ethers.utils.Interface(PythVerfier.abi).encodeFunctionData('updatePriceFeeds', [\n          signedOffchainData,\n        ]),\n        value: ethers.BigNumber.from(missingPriceUpdatesUnique.length),\n        requireSuccess: false,\n      };\n      // return [extraPriceUpdateTxn, ...calls.map()];\n      console.log(`[${label}]`, { extraPriceUpdateTxn });\n\n      // Update calls to include price update txn\n      // And carry on with our while(true)\n      calls = [extraPriceUpdateTxn, ...calls];\n    }\n  }\n};\n\n/**\n * This can be used to do reads plus decoding. The return type will be whatever the type of the decode function is. And the arguments passed will have the multicall decoded and price updates removed\n */\nexport async function erc7412Call<T>(\n  network: Network,\n  provider: ethers.providers.Provider,\n  calls: ethers.PopulatedTransaction[],\n  decode: (x: string[] | string) => T,\n  label: string\n) {\n  const Multicall3Contract = await importMulticall3(network.id, network.preset);\n\n  const from = getDefaultFromAddress(network.name);\n\n  const {\n    _calls: newCalls,\n    multicallTxn,\n    gasLimit,\n  } = await withERC7412(\n    network,\n    calls.filter(notNil).map((call) => (call.from ? call : { ...call, from })), // fill missing \"from\"\n    label,\n    from\n  );\n\n  const res = await provider.call({ ...multicallTxn, gasLimit: gasLimit.mul(15).div(10) });\n  if (res === '0x') {\n    throw new Error(`[${label}] Call returned 0x`);\n  }\n\n  if (multicallTxn.to?.toLowerCase() === Multicall3Contract.address.toLowerCase()) {\n    // If this was a multicall, decode and remove price updates.\n    const decodedMultiCall: { returnData: string }[] = new ethers.utils.Interface(\n      Multicall3Contract.abi\n    ).decodeFunctionResult('aggregate3Value', res)[0];\n\n    if (IS_DEBUG) {\n      console.log(`[${label}] multicall`, decodedMultiCall);\n    }\n\n    // Remove the price updates\n    const responseWithoutPriceUpdates: string[] = [];\n    const PythVerfier = await importPythVerfier(network.id, network.preset);\n    decodedMultiCall.forEach(({ returnData }, i) => {\n      if (newCalls?.[i]?.to !== PythVerfier.address) {\n        responseWithoutPriceUpdates.push(returnData);\n      }\n    });\n\n    const decoded = decode(responseWithoutPriceUpdates);\n    if (IS_DEBUG) {\n      console.log(`[${label}] result`, decoded);\n    }\n    return decoded;\n  }\n\n  const decoded = decode(res);\n  if (IS_DEBUG) {\n    console.log(`[${label}] result`, decoded);\n  }\n  return decoded;\n}\n","import { BigNumber } from 'ethers';\nimport { z } from 'zod';\nimport { wei } from '@synthetixio/wei';\n\nexport const ZodBigNumber = z.custom<BigNumber>((val) => BigNumber.isBigNumber(val));\n\nexport const SmallIntSchema = ZodBigNumber.transform((x) => wei(x, 0).toNumber());\nexport const WeiSchema = ZodBigNumber.transform((x) => wei(x));\n","import { Text, Flex } from '@chakra-ui/react';\nimport { FC } from 'react';\nimport Wei from '@synthetixio/wei';\nimport { calculateCRatio } from '@snx-v3/calculations';\nimport { Amount } from '@snx-v3/Amount';\nimport { ZEROWEI } from '@snx-v3/constants';\n\nexport const CRatioChangeStat: FC<{\n  collateralChange: Wei;\n  currentCollateral?: Wei;\n  debtChange: Wei;\n  currentDebt?: Wei;\n  size?: 'sm' | 'lg';\n  collateralPrice?: Wei;\n}> = ({ size, currentCollateral, currentDebt, collateralChange, debtChange, collateralPrice }) => (\n  <Flex alignItems=\"center\" gap={1.5}>\n    <Text\n      color=\"white\"\n      fontSize={size === 'lg' ? '20px' : '12px'}\n      fontWeight={size === 'lg' ? '800' : '700'}\n    >\n      {!currentCollateral || !currentDebt ? (\n        ' N/A'\n      ) : currentCollateral.gt(0) && currentDebt.eq(0) ? (\n        'Infinite'\n      ) : (\n        <Amount\n          value={calculateCRatio(currentDebt, currentCollateral.mul(collateralPrice)).mul(100)}\n          suffix=\"%\"\n        />\n      )}\n    </Text>\n\n    {(!collateralChange?.eq(0) || !debtChange.eq(0)) && (\n      <>\n        <span>&rarr;</span>\n\n        <Text\n          color=\"white\"\n          fontSize={size === 'lg' ? '20px' : '12px'}\n          fontWeight={size === 'lg' ? '800' : '700'}\n        >\n          {(currentCollateral || ZEROWEI).add(collateralChange).gt(0) &&\n          (currentDebt || ZEROWEI).add(debtChange).eq(0) ? (\n            'Infinite'\n          ) : (\n            <Amount\n              value={calculateCRatio(\n                (currentDebt || ZEROWEI).add(debtChange),\n                (currentCollateral || ZEROWEI).add(collateralChange).mul(collateralPrice)\n              ).mul(100)}\n              suffix=\"%\"\n            />\n          )}\n        </Text>\n      </>\n    )}\n  </Flex>\n);\n","import { FC, ReactNode } from 'react';\nimport { Flex, Text } from '@chakra-ui/react';\nimport Wei from '@synthetixio/wei';\nimport { ArrowForwardIcon } from '@chakra-ui/icons';\n\nconst styles = {\n  sm: {\n    fontSize: '12px',\n    fontWeight: '700',\n    lineHeight: '14px',\n  },\n  md: {\n    fontSize: '16px',\n    fontWeight: '400',\n    lineHeight: '16px',\n  },\n  lg: {\n    fontSize: '18px',\n    fontWeight: '800',\n    lineHeight: '32px',\n  },\n};\nexport const ChangeStat: FC<{\n  value: Wei;\n  newValue: Wei;\n  hasChanges: boolean;\n  'data-cy'?: string;\n  formatFn: (val: Wei) => ReactNode;\n  withColor?: boolean;\n  size?: 'sm' | 'md' | 'lg';\n}> = ({ formatFn, value, newValue, hasChanges, 'data-cy': dataCy, withColor, size = 'lg' }) => {\n  return (\n    <Flex\n      gap=\"1\"\n      alignItems=\"center\"\n      color=\"white\"\n      fontSize={styles[size].fontSize}\n      fontWeight={styles[size].fontWeight}\n      lineHeight={styles[size].lineHeight}\n    >\n      <Text\n        data-cy={dataCy}\n        textAlign=\"center\"\n        opacity={value.eq(0) ? '70%' : undefined}\n        color={withColor && value.gt(0) ? 'green.700' : value.lt(0) ? 'red.700' : 'gray.50'}\n        whiteSpace=\"nowrap\"\n      >\n        {formatFn(value)}\n      </Text>\n      {hasChanges && !value.eq(newValue) ? (\n        <>\n          <ArrowForwardIcon />\n          <Text\n            textAlign=\"center\"\n            opacity={newValue.eq(0) ? '70%' : undefined}\n            color={\n              withColor && newValue.gt(0) ? 'green.700' : newValue.lt(0) ? 'red.700' : 'gray.50'\n            }\n            whiteSpace=\"nowrap\"\n          >\n            {formatFn(newValue)}\n          </Text>\n        </>\n      ) : null}\n    </Flex>\n  );\n};\n","import { Alert, Button, Divider, Flex, Heading, Text } from '@chakra-ui/react';\nimport { CheckIcon } from '@snx-v3/Multistep';\nimport { ReactNode } from 'react';\n\nexport function LiquidityPositionUpdated({\n  title,\n  subline,\n  alertText,\n  summary,\n  onClose,\n}: {\n  title?: ReactNode;\n  subline?: ReactNode;\n  alertText?: ReactNode;\n  summary?: ReactNode;\n  onClose: () => void;\n}) {\n  return (\n    <Flex flexDir=\"column\" gap=\"6\" borderColor=\"gray.900\" rounded=\"base\" height=\"fit-content\">\n      {title && (\n        <>\n          <Heading color=\"gray.50\" fontSize=\"20px\" fontWeight={700}>\n            {title}\n          </Heading>\n          <Divider />\n        </>\n      )}\n      {subline && (\n        <Text color=\"white\" fontSize=\"14px\" fontWeight={400}>\n          {subline}\n        </Text>\n      )}\n      <Alert colorScheme=\"green\" rounded=\"base\" borderRadius=\"6px\">\n        <Flex bg=\"green.500\" p=\"1\" rounded=\"full\" mr=\"2\">\n          <CheckIcon w=\"12px\" h=\"12px\" color=\"green.900\" />\n        </Flex>\n        <Text color=\"white\" fontSize=\"16px\" fontWeight={400}>\n          {alertText}\n        </Text>\n      </Alert>\n\n      {summary}\n\n      <Button w=\"100%\" onClick={onClose}>\n        Continue\n      </Button>\n    </Flex>\n  );\n}\n","import { Flex, FlexProps } from '@chakra-ui/react';\nimport { ReactNode } from 'react';\n\ninterface Props extends FlexProps {\n  items: {\n    label: ReactNode;\n    value: ReactNode;\n  }[];\n}\n\nexport const TransactionSummary = ({ items, ...props }: Props) => (\n  <Flex p={3.5} borderRadius=\"4px\" background=\"#1F1F34\" flexDir=\"column\" gap={3} {...props}>\n    {items.map(({ value, label }, i) => (\n      <Flex fontWeight={700} fontSize=\"12px\" key={i} flex={1} width=\"100%\">\n        <Flex alignItems=\"center\" justify=\"flex-start\" textAlign=\"left\" flexGrow={1}>\n          {label}\n        </Flex>\n        <Flex alignItems=\"center\" justify=\"flex-end\" textAlign=\"right\" flexGrow={1}>\n          {value}\n        </Flex>\n      </Flex>\n    ))}\n  </Flex>\n);\n","import {\n  ComponentMultiStyleConfig,\n  ComponentStyleConfig,\n  defineStyle,\n  extendTheme,\n} from '@chakra-ui/react';\nimport { mode } from '@chakra-ui/theme-tools';\n\nconst gradients = {\n  'green-cyan': {\n    500: 'linear(to-tr, green.500, cyan.500)',\n    600: 'linear(to-tr, green.600, cyan.600)',\n    700: 'linear(to-tr, green.700, cyan.800)',\n  },\n\n  grey: {\n    900: 'linear(to-tr, grey.900, blackAlpha.900)',\n  },\n  dark: {\n    500: 'linear(to-tr, #171923, #141414)',\n  },\n\n  'pink-purple': {\n    500: 'linear(to-tr, pink.500, purple.500)',\n    600: 'linear(to-tr, pink.600, purple.600)',\n    700: 'linear(to-tr, pink.700, purple.800)',\n  },\n\n  'pink-blue': {\n    500: 'linear(to-tr, pink.500, blue.500)',\n    600: 'linear(to-tr, pink.600, blue.600)',\n    700: 'linear(to-tr, pink.700, blue.800)',\n  },\n  'pink-cyan': {\n    500: 'linear(to-tr, pink.500, cyan.500)',\n    600: 'linear(to-tr, pink.600, cyan.600)',\n    700: 'linear(to-tr, pink.700, cyan.800)',\n  },\n\n  orange: {\n    500: 'linear(to-tr, orange.500, orange.300)',\n    600: 'linear(to-tr, orange.600, orange.400)',\n    700: 'linear(to-tr, orange.700, orange.500)',\n  },\n};\n\n// adapted from https://github.com/chakra-ui/chakra-ui/blob/main/packages/components/theme/src/components/button.ts#L90\nconst variantSolid = defineStyle((props) => {\n  const { colorScheme: c } = props;\n\n  if (c === 'gray') {\n    const bg = mode(`gray.100`, `whiteAlpha.200`)(props);\n\n    return {\n      borderRadius: 'base',\n      color: mode(`black`, `whiteAlpha.900`)(props),\n      bg,\n      _hover: {\n        bg: mode(`gray.200`, `whiteAlpha.300`)(props),\n        _disabled: {\n          bg,\n        },\n      },\n      _active: { bg: mode(`gray.300`, `whiteAlpha.400`)(props) },\n    };\n  }\n\n  if (c === 'cyan') {\n    return {\n      borderRadius: 'base',\n      bgGradient: gradients['green-cyan'][500],\n      color: 'black',\n      _hover: {\n        bgGradient: gradients['green-cyan'][600],\n        _disabled: {\n          background: gradients['green-cyan'][500],\n        },\n      },\n      _active: {\n        bgGradient: gradients['green-cyan'][700],\n      },\n    };\n  }\n\n  const bg = `${c}.500`;\n  const color = 'white';\n  const hoverBg = `${c}.600`;\n  const activeBg = `${c}.700`;\n  const background = mode(bg, `${c}.600`)(props);\n\n  return {\n    borderRadius: 'base',\n    bg: background,\n    color: mode(color, `white`)(props),\n    _hover: {\n      bg: mode(hoverBg, `${c}.500`)(props),\n      _disabled: {\n        bg: background,\n      },\n    },\n    _active: { bg: mode(activeBg, `${c}.400`)(props) },\n  };\n});\n\nconst Button: ComponentStyleConfig = {\n  defaultProps: {\n    colorScheme: 'cyan',\n  },\n  variants: {\n    solid: variantSolid,\n    outline: (props) => {\n      if (props.colorScheme === 'gray' || props.colorScheme === 'grey') {\n        return {\n          color: 'white',\n          borderColor: 'gray.900',\n          _hover: { bg: 'whiteAlpha.200' },\n          _active: { bg: 'whiteAlpha.400' },\n          borderRadius: 'base',\n        };\n      }\n      return {\n        color: 'cyan.500', // needed for storybook for some reason\n        border: '1px solid', // needed for storybook for some reason\n        borderColor: 'cyan.500', // needed for storybook for some reason\n        _hover: { bg: 'rgb(0, 209, 255, 0.12)' }, // cyan.500 0.12 opacity\n        _active: { bg: 'rgb(0, 209, 255, 0.24)' }, // cyan.500 0.24 opacity\n        borderRadius: 'base',\n      };\n    },\n    ghost: {\n      color: 'cyan.500', // needed for storybook for some reason\n      _hover: { bg: 'rgb(0, 209, 255, 0.12)' }, // cyan.500 0.12 opacity\n      _active: { bg: 'rgb(0, 209, 255, 0.24)' }, // cyan.500 0.24 opacity\n      borderRadius: 'base',\n    },\n  },\n};\n\nconst Menu: ComponentMultiStyleConfig = {\n  parts: ['button', 'list', 'item'],\n  baseStyle: {\n    button: {\n      borderRadius: 'base',\n      color: 'white',\n      span: {\n        display: 'flex',\n        alignItems: 'center',\n        px: 2,\n      },\n      height: '100%',\n    },\n    list: {\n      mt: 2,\n      bgColor: 'navy.900',\n      padding: 0,\n      border: 'none',\n      borderRadius: 'md',\n      py: 0,\n    },\n    item: {\n      bgColor: 'blackAlpha.300',\n      color: 'whiteAlpha.900',\n      p: 3,\n      _hover: {\n        bgColor: 'whiteAlpha.400',\n      },\n      _active: {\n        bgColor: 'navy.900',\n      },\n      _first: {\n        borderTopLeftRadius: 'md',\n        borderTopRightRadius: 'md',\n      },\n      _last: {\n        borderBottomLeftRadius: 'md',\n        borderBottomRightRadius: 'md',\n      },\n      _focus: {\n        bgColor: 'blackAlpha.400',\n      },\n    },\n  },\n};\n\nconst Input: ComponentStyleConfig = {\n  defaultProps: {\n    focusBorderColor: 'cyan.500',\n    errorBorderColor: 'red.500',\n  },\n};\n\nconst Select: ComponentStyleConfig = {\n  defaultProps: {\n    focusBorderColor: 'cyan.500',\n    iconColor: 'cyan.500',\n    errorBorderColor: 'red.500',\n  },\n};\n\nconst NumberInput: ComponentStyleConfig = {\n  defaultProps: {\n    focusBorderColor: 'cyan.500',\n    errorBorderColor: 'red.500',\n  },\n};\n\nconst Textarea: ComponentStyleConfig = {\n  defaultProps: {\n    focusBorderColor: 'cyan.500',\n    colorScheme: 'cyan',\n    errorBorderColor: 'red.500',\n  },\n};\n\nconst Alert: ComponentStyleConfig = {\n  defaultProps: {\n    variant: 'left-accent',\n  },\n  variants: {\n    'left-accent': (props) => {\n      return {\n        container: {\n          bg: `${props.colorScheme}.900`,\n          borderInlineStartColor: `${props.colorScheme}.500`,\n        },\n      };\n    },\n    solid: (props) => {\n      return {\n        icon: { color: 'white' },\n        container: { bg: `${props.colorScheme}.500`, color: 'white' },\n      };\n    },\n  },\n};\n\nconst Skeleton: ComponentStyleConfig = {\n  defaultProps: {\n    startColor: 'gray.900',\n    endColor: 'gray.800',\n  },\n};\n\nconst Checkbox: ComponentStyleConfig = {\n  defaultProps: {\n    colorScheme: 'cyan',\n  },\n  baseStyle: {\n    control: {\n      borderColor: 'cyan.500',\n      _checked: {\n        bg: 'cyan.500',\n        borderColor: 'cyan.500',\n        _hover: {\n          bg: 'cyan.600',\n          borderColor: 'cyan.600',\n        },\n      },\n      _invalid: {\n        borderColor: 'red.500',\n      },\n      _disabled: {\n        _hover: {\n          borderColor: 'transparent',\n        },\n      },\n      _hover: {\n        borderColor: 'cyan.600',\n      },\n    },\n  },\n};\n\nconst Radio: ComponentStyleConfig = {\n  defaultProps: {\n    colorScheme: 'cyan',\n  },\n  baseStyle: {\n    control: {\n      borderColor: 'cyan.500',\n      _checked: {\n        bg: 'cyan.500',\n        borderColor: 'cyan.500',\n        _hover: {\n          bg: 'cyan.600',\n          borderColor: 'cyan.600',\n        },\n      },\n      _invalid: {\n        borderColor: 'red.500',\n      },\n      _disabled: {\n        _hover: {\n          borderColor: 'transparent',\n        },\n      },\n      _hover: {\n        borderColor: 'cyan.600',\n      },\n    },\n  },\n};\n\nconst Badge: ComponentStyleConfig = {\n  defaultProps: {\n    colorScheme: 'cyan',\n  },\n  variants: {\n    subtle: (props) => ({\n      color: `${props.colorScheme}.500`,\n      border: '0px',\n      display: 'flex',\n      alignItems: 'center',\n    }),\n    solid: (props) => ({\n      background: `${props.colorScheme}.500`,\n      color: 'black',\n    }),\n    outline: (props) => ({\n      borderColor: `${props.colorScheme}.500`,\n      color: `${props.colorScheme}.500`,\n      boxShadow: 'unset',\n    }),\n  },\n};\n\nconst Tag: ComponentStyleConfig = {\n  defaultProps: {\n    colorScheme: 'cyan',\n    variant: 'solid',\n  },\n  variants: {\n    solid: (props) => ({\n      container: {\n        background: `${props.colorScheme}.500`,\n        color: 'black',\n      },\n    }),\n  },\n};\n\nconst Accordion: ComponentStyleConfig = {\n  baseStyle: {\n    container: {\n      borderColor: 'gray.900',\n      borderWidth: '1px',\n      borderRadius: 'base',\n    },\n  },\n};\n\nconst Progress: ComponentStyleConfig = {\n  defaultProps: {\n    colorScheme: 'cyan',\n    variant: 'solid',\n    borderRadius: 'full',\n  },\n  variants: {\n    solid: (props) => ({\n      filledTrack: {\n        background: `${props.colorScheme}.500`,\n        borderRadius: 'full',\n      },\n      track: {\n        borderRadius: 'full',\n      },\n    }),\n  },\n};\n\nconst Tabs: ComponentStyleConfig = {\n  defaultProps: {\n    colorScheme: 'cyan',\n  },\n  variants: {\n    'solid-rounded': (props) => ({\n      tab: {\n        _selected: {\n          background: `${props.colorScheme}.500`,\n          color: 'black',\n        },\n        color: `${props.colorScheme}.500`,\n      },\n    }),\n    'soft-rounded': {\n      tab: {\n        _selected: {\n          background: 'whiteAlpha.300',\n          color: 'cyan.500',\n        },\n        color: 'cyan.500',\n      },\n    },\n  },\n};\n\nconst Tooltip: ComponentStyleConfig = {\n  baseStyle: {\n    textAlign: 'center',\n    bg: 'gray.900',\n    color: 'white.500',\n    '--popper-arrow-bg': 'var(--chakra-colors-gray-900)',\n  },\n};\n\nconst Switch: ComponentStyleConfig = {\n  defaultProps: {\n    colorScheme: 'cyan',\n  },\n  baseStyle: {\n    track: {\n      _checked: {\n        background: 'cyan.500',\n      },\n    },\n  },\n};\n\nconst Spinner: ComponentStyleConfig = {\n  baseStyle: {\n    color: 'cyan.500',\n  },\n};\n\nexport const theme = extendTheme({\n  useSystemColorMode: false,\n  initialColorMode: 'dark',\n  colors: {\n    gray: {\n      50: '#F6F6F6',\n      100: '#F1F1F1',\n      200: '#DDDDDF',\n      300: '#C3C3C9',\n      400: '#AAAAB2',\n      500: '#91919B',\n      600: '#7A7A85',\n      700: '#63636E',\n      800: '#4D4D57',\n      900: '#303037',\n    },\n    red: {\n      50: '#FFEDEF',\n      100: '#FFC4CB',\n      200: '#FF9BA7',\n      300: '#FF7384',\n      400: '#FF4A60',\n      500: '#E4364B',\n      600: '#C53030',\n      700: '#9B2C2C',\n      800: '#822727',\n      900: '#63171B',\n    },\n    orange: {\n      50: '#FFF3EB',\n      100: '#FFD8BE',\n      200: '#FFBE92',\n      300: '#FFA365',\n      400: '#FF9A54',\n      500: '#FC8738',\n      600: '#DC732D',\n      700: '#96420A',\n      800: '#743002',\n      900: '#522100',\n    },\n    yellow: {\n      50: '#FFFBEF',\n      100: '#FFF2CA',\n      200: '#FFF5A8',\n      300: '#FFF889',\n      400: '#FFF458',\n      500: '#FAE527',\n      600: '#EAD516',\n      700: '#B5932B',\n      800: '#776017',\n      900: '#55430D',\n    },\n    green: {\n      50: '#EDFFF9',\n      100: '#C3FFEC',\n      200: '#9AE6B4',\n      300: '#72FFD3',\n      400: '#47FAC2',\n      500: '#34EDB3',\n      600: '#2BD39F',\n      700: '#11946B',\n      800: '#077250',\n      900: '#015037',\n    },\n    blue: {\n      50: '#EDF6FF',\n      100: '#C4E2FF',\n      200: '#9CCFFF',\n      300: '#73BBFF',\n      400: '#479EF0',\n      500: '#3182CE',\n      600: '#1F68AC',\n      700: '#11508A',\n      800: '#073968',\n      900: '#012546',\n    },\n    cyan: {\n      50: '#E5FAFF',\n      100: '#B7F2FF',\n      200: '#8AEAFF',\n      300: '#5CE1FF',\n      400: '#2ED9FF',\n      500: '#00D1FF',\n      600: '#00B0D6',\n      700: '#008EAD',\n      800: '#006D85',\n      900: '#004B5C',\n    },\n    purple: {\n      50: '#F0EEFF',\n      100: '#CFC9FF',\n      200: '#AEA4FF',\n      300: '#8D7EFF',\n      400: '#6B59FF',\n      500: '#5744EA',\n      600: '#402FC8',\n      700: '#2D1EA6',\n      800: '#1D1084',\n      900: '#10104E',\n    },\n    pink: {\n      50: '#FDE8FF',\n      100: '#F9B6FF',\n      200: '#F583FF',\n      300: '#F471FF',\n      400: '#EB46FF',\n      500: '#EE2EFF',\n      600: '#BE02CE',\n      700: '#8D0099',\n      800: '#6E0077',\n      900: '#4E0055',\n    },\n    navy: {\n      50: '#522ED1',\n      100: '#401FB7',\n      200: '#3719A6',\n      300: '#2F1298',\n      400: '#1F0777',\n      500: '#150942',\n      600: '#0E052F',\n      700: '#0B0B22',\n      800: '#0A0A25',\n      900: '#06061B',\n    },\n    error: '#FF4A60', // red.400,\n    success: '#34EDB3', //green.500\n    warning: '#FC8738', // orange.500\n  },\n  shadows: {\n    outline: '0 0 0 3px rgba(0, 209, 255, 1)',\n  },\n  fonts: {\n    heading:\n      'Inter, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"',\n    body: 'Inter, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"',\n    display:\n      '\"GT America Condensed\", Inter, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"',\n    mono: '\"GT America Mono\", SFMono-Regular,Menlo,Monaco,Consolas,\"Liberation Mono\",\"Courier New\",monospace',\n  },\n  components: {\n    Popover: {\n      variants: {\n        responsive: {\n          popper: {\n            maxWidth: 'unset',\n            width: 'unset',\n          },\n        },\n      },\n    },\n    Button,\n    Input,\n    Select,\n    NumberInput,\n    Alert,\n    Textarea,\n    Skeleton,\n    Checkbox,\n    Radio,\n    Badge,\n    Tag,\n    Accordion,\n    Progress,\n    Tabs,\n    Tooltip,\n    Switch,\n    Spinner,\n    Menu,\n  },\n  // To be imported and used with the bgGradient prop\n  // See: https://chakra-ui.com/docs/styled-system/gradient#background-gradient-api\n  gradients,\n  textStyles: {\n    'heading-4xl': {\n      fontSize: { base: '60px', lg: '72px' },\n      fontFamily: 'heading',\n      lineHeight: { base: '57.6px', lg: '72px' },\n      fontWeight: 700,\n    },\n    'heading-3xl': {\n      fontSize: { base: '48px', md: '60px' },\n      fontFamily: 'heading',\n      lineHeight: { base: '57.6px', md: '72px', lg: '60px' },\n      fontWeight: 700,\n    },\n    'heading-2xl': {\n      fontSize: { base: '36px', md: '48px' },\n      fontFamily: 'heading',\n      lineHeight: { base: '120%' },\n      fontWeight: 700,\n    },\n    'heading-xl': {\n      fontSize: { base: '30px', lg: '36px' },\n      fontFamily: 'heading',\n      lineHeight: { base: '36px', lg: '120%' },\n      fontWeight: 700,\n    },\n    'heading-lg': {\n      fontSize: { base: '24px', lg: '30px' },\n      fontFamily: 'heading',\n      lineHeight: { base: '28.8px', lg: '36px' },\n      fontWeight: 700,\n    },\n    'heading-md': {\n      fontSize: { base: '20px', lg: '24px' },\n      fontFamily: 'heading',\n      lineHeight: '24px',\n      fontWeight: 700,\n    },\n    'heading-sm': {\n      fontSize: '16px',\n      fontFamily: 'heading',\n      lineHeight: '19.2px',\n      fontWeight: 700,\n    },\n    'heading-xs': {\n      fontSize: '14px',\n      fontFamily: 'heading',\n      lineHeight: '16.8px',\n      fontWeight: 700,\n    },\n  },\n  sizes: {\n    px: '1px',\n    0.5: '0.125rem',\n    1: '0.25rem',\n    1.5: '0.375rem',\n    2: '0.5rem',\n    2.5: '0.625rem',\n    3: '0.75rem',\n    3.5: '0.875rem',\n    4: '1rem',\n    5: '1.25rem',\n    6: '1.5rem',\n    7: '1.75rem',\n    8: '2rem',\n    9: '2.25rem',\n    10: '2.5rem',\n    12: '3rem',\n    14: '3.5rem',\n    16: '4rem',\n    20: '5rem',\n    24: '6rem',\n    28: '7rem',\n    32: '8rem',\n    36: '9rem',\n    40: '10rem',\n    44: '11rem',\n    48: '12rem',\n    52: '13rem',\n    56: '14rem',\n    60: '15rem',\n    64: '16rem',\n    72: '18rem',\n    80: '20rem',\n    96: '24rem',\n    max: 'max-content',\n    min: 'min-content',\n    full: '100%',\n    '3xs': '14rem',\n    '2xs': '16rem',\n    xs: '20rem',\n    sm: '24rem',\n    md: '28rem',\n    lg: '32rem',\n    xl: '36rem',\n    '2xl': '42rem',\n    '3xl': '48rem',\n    '4xl': '56rem',\n    '5xl': '64rem',\n    '6xl': '72rem',\n    '7xl': '80rem',\n    '8xl': '90rem',\n    container: {\n      sm: '640px',\n      md: '768px',\n      lg: '1024px',\n      xl: '1280px',\n    },\n  },\n  styles: {\n    global: {\n      body: {\n        bg: 'navy.900',\n      },\n    },\n  },\n});\n","import { Global } from '@emotion/react';\n\nexport const Fonts = () => (\n  <Global\n    styles={`\n      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@200..700&display=swap');\n      @font-face {\n        font-family: 'GT America Condensed';\n        font-style: normal;\n        font-display: swap;\n        font-weight: 700;\n        src: local('GT America Condensed'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Bold.woff2') format('woff2'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Bold.woff') format('woff'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Bold.otf') format('opentype');\n      }\n      @font-face {\n        font-family: 'GT America Condensed';\n        font-style: italic;\n        font-display: swap;\n        font-weight: 700;\n        src: local('GT America Condensed'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Bold%20Italic.woff2')\n            format('woff2'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Bold%20Italic.woff')\n            format('woff'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Bold%20Italic.otf')\n            format('opentype');\n      }\n      @font-face {\n        font-family: 'GT America Condensed';\n        font-style: normal;\n        font-display: swap;\n        font-weight: 100;\n        src: local('GT America Condensed'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Thin.woff2') format('woff2'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Thin.woff') format('woff'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Thin.otf') format('opentype');\n      }\n      @font-face {\n        font-family: 'GT America Condensed';\n        font-style: italic;\n        font-display: swap;\n        font-weight: 100;\n        src: local('GT America Condensed'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Thin%20Italic.woff2')\n            format('woff2'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Thin%20Italic.woff')\n            format('woff'),\n          url('https://fonts.synthetix.io/GT%20America%20Condensed%20Thin%20Italic.otf')\n            format('opentype');\n      }\n      @font-face {\n        font-family: 'GT America Mono';\n        font-style: normal;\n        font-display: swap;\n        font-weight: 700;\n        src: local('GT America Mono'),\n          url('https://fonts.synthetix.io/GT%20America%20Mono%20Bold.woff2') format('woff2'),\n          url('https://fonts.synthetix.io/GT%20America%20Mono%20Bold.woff') format('woff'),\n          url('https://fonts.synthetix.io/GT%20America%20Mono%20Bold.otf') format('opentype');\n      }\n      @font-face {\n        font-family: 'Lustra Text';\n        font-style: normal;\n        font-display: swap;\n        font-weight: 400;\n        src: local('Lustra Text'),\n          url('https://fonts.synthetix.io/Lustra%20Text%20Thin.otf') format('opentype');\n      }\n    `}\n  />\n);\n","import { useState } from 'react';\nimport {\n  Modal,\n  ModalOverlay,\n  ModalContent,\n  ModalHeader,\n  ModalBody,\n  Text,\n  Button,\n  Box,\n  Link,\n  ListItem,\n  UnorderedList,\n} from '@chakra-ui/react';\nimport { Link as ReactRouterLink } from 'react-router-dom';\nimport { theme } from '@snx-v3/theme';\nimport { SESSION_STORAGE_KEYS } from '@snx-v3/constants';\n\ninterface TermsModalProps {\n  defaultOpen: boolean;\n}\n\nexport const TermsModal = ({ defaultOpen = true }: TermsModalProps) => {\n  const [isOpen, setOpen] = useState(defaultOpen);\n  const [enabled, setEnabled] = useState(false);\n\n  const onSubmit = () => {\n    if (enabled) {\n      localStorage.setItem(SESSION_STORAGE_KEYS.TERMS_CONDITIONS_ACCEPTED, JSON.stringify(true));\n      setOpen(false);\n    }\n  };\n\n  return (\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    <Modal isOpen={isOpen} onClose={() => {}}>\n      <ModalOverlay />\n      <ModalContent\n        bgGradient={theme.gradients['dark'][500]}\n        pt=\"10\"\n        pb=\"3\"\n        borderWidth=\"1px\"\n        borderColor=\"gray.900\"\n        data-cy=\"transaction modal\"\n      >\n        <ModalHeader py={0} textAlign=\"center\">\n          Synthetix Terms of Service\n        </ModalHeader>\n        <ModalBody fontSize=\"xs\" color=\"gray.600\">\n          <Text fontSize=\"sm\">\n            By clicking “I Agree” below, you agree to be bound by the terms of this Agreement. As\n            such, you fully understand that:\n          </Text>\n          <Box\n            onScroll={(e) => {\n              const div = e.currentTarget;\n              const scrollTopWithTolerance = div.scrollTop + 10;\n              if (scrollTopWithTolerance >= div.scrollHeight - div.offsetHeight) {\n                setEnabled(true);\n              } else {\n                setEnabled(false);\n              }\n            }}\n            as=\"div\"\n            my={2}\n            py={3}\n            height=\"350px\"\n            overflow=\"auto\"\n            overflowX=\"scroll\"\n            sx={{\n              '::-webkit-scrollbar': {\n                display: 'block',\n              },\n              '::-webkit-scrollbar-track': {\n                backgroundColor: 'transparent',\n              },\n              '::-webkit-scrollbar-track-piece': {\n                backgroundColor: 'transparent',\n              },\n              '::-webkit-scrollbar-corner': {\n                backgroundColor: 'transparent',\n              },\n            }}\n          >\n            <UnorderedList>\n              <Text fontSize=\"14px\">\n                <ListItem>\n                  <Link\n                    href=\"https://synthetix.io/\"\n                    target=\"_blank\"\n                    color=\"cyan.500\"\n                    _focusVisible={{ outline: 'none' }}\n                  >\n                    Synthetix{' '}\n                  </Link>\n                  is a blockchain-based decentralized finance project. You are participating at your\n                  own risk.\n                </ListItem>\n                <ListItem mt={2}>\n                  Synthetix is offered for use “as is” and without any guarantees regarding\n                  security. The protocol is made up of immutable code and can be accessed through a\n                  variety of user interfaces.\n                </ListItem>\n                <ListItem mt={2}>\n                  No central entity operates the Synthetix protocol. Decisions related to the\n                  protocol are governed by a dispersed group of participants who collectively govern\n                  and maintain the protocol.\n                </ListItem>\n                <ListItem mt={2}>\n                  Synthetix DAO does not unilaterally offer, maintain, operate, administer, or\n                  control any trading interfaces. The only user interfaces maintained by Synthetix\n                  DAO are the governance and liquidity interfaces herein.\n                </ListItem>\n                <ListItem mt={2}>\n                  You can participate in the governance process by staking SNX tokens in accordance\n                  with the rules and parameters summarized{' '}\n                  <Link\n                    href=\"https://governance.synthetix.io/\"\n                    target=\"_blank\"\n                    color=\"cyan.500\"\n                    _focusVisible={{ outline: 'none' }}\n                  >\n                    here\n                  </Link>\n                  , and/or joining the{' '}\n                  <Link\n                    color=\"cyan.500\"\n                    target=\"_blank\"\n                    href=\"https://discord.com/invite/synthetix\"\n                    _focusVisible={{ outline: 'none' }}\n                  >\n                    Synthetix Discord\n                  </Link>{' '}\n                  and contributing to the conversation.\n                </ListItem>\n                <ListItem mt={2}>\n                  The rules and parameters associated with the Synthetix protocol and Synthetix DAO\n                  governance are subject to change at any time.\n                </ListItem>\n                <ListItem mt={2}>\n                  Your use of Synthetix is conditioned upon your acceptance to be bound by the\n                  Synthetix Term of Use, which can be found{' '}\n                  <Link\n                    as={ReactRouterLink}\n                    to=\"/terms\"\n                    target=\"_blank\"\n                    color=\"cyan.500\"\n                    _focusVisible={{ outline: 'none' }}\n                  >\n                    here\n                  </Link>\n                  .\n                </ListItem>\n                <ListItem mt={2}>\n                  The laws that apply to your use of Synthetix may vary based upon the jurisdiction\n                  in which you are located. We strongly encourage you to speak with legal counsel in\n                  your jurisdiction if you have any questions regarding your use of Synthetix.\n                </ListItem>\n                <ListItem mt={2}>\n                  By entering into this agreement, you are not agreeing to enter into a partnership.\n                  You understand that Synthetix is a decentralized protocol provided on an “as is”\n                  basis.\n                </ListItem>\n                <ListItem mt={2}>\n                  You hereby release all present and future claims against Synthetix DAO related to\n                  your use of the protocol, the SNX token, SNX DAO governance, and any other facet\n                  of the protocol.\n                </ListItem>\n                <ListItem mt={2}>\n                  You agree to indemnify and hold harmless SNX DAO and its affiliates for any costs\n                  arising out of or relating to your use of the Synthetix protocol.\n                </ListItem>\n                <ListItem mt={2}>\n                  You are not accessing the protocol from Burma (Myanmar), Cuba, Iran, Sudan, Syria,\n                  the Western Balkans, Belarus, Côte d’Ivoire, Democratic Republic of the Congo,\n                  Iraq, Lebanon, Liberia, Libya, North Korea, Russia, certain sanctioned areas of\n                  Ukraine, Somalia, Venezuela, Yemen, or Zimbabwe (collectively, “Prohibited\n                  Jurisdictions”), or any other jurisdiction listed as a Specially Designated\n                  National by the United States Office of Foreign Asset Control (“OFAC”).\n                </ListItem>\n              </Text>\n            </UnorderedList>\n          </Box>\n        </ModalBody>\n        <Button\n          variant=\"outline\"\n          _focusVisible={{ outline: 'none' }}\n          my={4}\n          mx={6}\n          onClick={onSubmit}\n          isDisabled={!enabled}\n        >\n          I agree\n        </Button>\n      </ModalContent>\n    </Modal>\n  );\n};\n","import { useState } from 'react';\n\nexport const set = (key: string, value: any) => {\n  if (typeof window !== 'undefined') {\n    window.localStorage.setItem(key, JSON.stringify(value));\n  }\n};\n\nexport function get<T>(key: string): T | null {\n  if (typeof window !== 'undefined') {\n    const item = window.localStorage.getItem(key);\n    try {\n      if (item != null) {\n        return JSON.parse(item);\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  }\n  return null;\n}\n\nexport function useLocalStorage<T>(key: string, initialValue: T) {\n  const [storedValue, setStoredValue] = useState<T>(() => {\n    const item = get<T>(key);\n    return item != null ? item : initialValue;\n  });\n\n  const setValue = (value: T) => {\n    const valueToStore = value instanceof Function ? value(storedValue) : value;\n    setStoredValue(valueToStore);\n    set(key, valueToStore);\n  };\n\n  return [storedValue, setValue] as const;\n}\n","import { importAccountProxy } from '@snx-v3/contracts';\nimport { Network, useNetwork } from '@snx-v3/useBlockchain';\nimport { useQuery } from '@tanstack/react-query';\n\nexport function useAccountProxy(customNetwork?: Network) {\n  const { network } = useNetwork();\n  const targetNetwork = customNetwork || network;\n\n  return useQuery({\n    queryKey: [`${targetNetwork?.id}-${targetNetwork?.preset}`, 'AccountProxy'],\n    enabled: Boolean(targetNetwork),\n    queryFn: async function () {\n      if (!targetNetwork) throw new Error('OMFG');\n      return importAccountProxy(targetNetwork.id, targetNetwork.preset);\n    },\n    staleTime: Infinity,\n    // On some chains this is not available, and that is expected\n    throwOnError: false,\n  });\n}\n","import { importMulticall3 } from '@snx-v3/contracts';\nimport { Network, useNetwork } from '@snx-v3/useBlockchain';\nimport { useQuery } from '@tanstack/react-query';\n\nexport function useMulticall3(customNetwork?: Network) {\n  const { network } = useNetwork();\n  const targetNetwork = customNetwork || network;\n\n  return useQuery({\n    queryKey: [`${targetNetwork?.id}-${targetNetwork?.preset}`, 'Multicall3'],\n    enabled: Boolean(targetNetwork),\n    queryFn: async function () {\n      if (!targetNetwork) throw new Error('OMFG');\n      return importMulticall3(targetNetwork.id, targetNetwork.preset);\n    },\n    staleTime: Infinity,\n    // On some chains this is not available, and that is expected\n    throwOnError: false,\n  });\n}\n","import { useAccountProxy } from '@snx-v3/useAccountProxy';\nimport { useNetwork, useWallet } from '@snx-v3/useBlockchain';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { useMulticall3 } from '@snx-v3/useMulticall3';\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\nimport { BigNumber } from 'ethers';\nimport { useProvider, useSigner } from '@snx-v3/useBlockchain';\nimport { contractsHash } from '@snx-v3/tsHelpers';\nimport { ethers } from 'ethers';\n\nexport function useAccounts() {\n  const { activeWallet } = useWallet();\n  const { network } = useNetwork();\n  const provider = useProvider();\n  const { data: AccountProxy } = useAccountProxy();\n  const { data: Multicall3 } = useMulticall3();\n  const walletAddress = activeWallet?.address;\n\n  return useQuery({\n    queryKey: [\n      `${network?.id}-${network?.preset}`,\n      'Accounts',\n      { walletAddress },\n      { contractsHash: contractsHash([AccountProxy, Multicall3]) },\n    ],\n    enabled: Boolean(provider && walletAddress && AccountProxy && Multicall3),\n    queryFn: async function () {\n      if (!(provider && walletAddress && AccountProxy && Multicall3)) throw 'OMFG';\n\n      const AccountProxyContract = new ethers.Contract(\n        AccountProxy.address,\n        AccountProxy.abi,\n        provider\n      );\n      const Multicall3Contract = new ethers.Contract(Multicall3.address, Multicall3.abi, provider);\n\n      const numberOfAccountTokens = await AccountProxyContract.balanceOf(activeWallet.address);\n\n      if (numberOfAccountTokens.eq(0)) {\n        // No accounts created yet\n        return [];\n      }\n      const accountIndexes = Array.from(Array(numberOfAccountTokens.toNumber()).keys());\n\n      const calls = accountIndexes.map((index) => ({\n        target: AccountProxy.address,\n        callData: AccountProxyContract.interface.encodeFunctionData('tokenOfOwnerByIndex', [\n          activeWallet.address,\n          index,\n        ]),\n      }));\n      const { returnData } = await Multicall3Contract.callStatic.aggregate(calls);\n\n      const accounts = (returnData as string[]).map(\n        (data) =>\n          AccountProxyContract.interface.decodeFunctionResult('tokenOfOwnerByIndex', data)[0]\n      ) as BigNumber[];\n\n      return accounts.map((accountId) => accountId.toString());\n    },\n    placeholderData: [],\n  });\n}\n\nexport function useCreateAccount() {\n  const { data: CoreProxy } = useCoreProxy();\n  const signer = useSigner();\n  const { network } = useNetwork();\n  const client = useQueryClient();\n  return {\n    enabled: Boolean(network && CoreProxy),\n    mutation: useMutation({\n      mutationFn: async function () {\n        try {\n          if (!(CoreProxy && signer)) throw 'OMFG';\n\n          const CoreProxyContract = new ethers.Contract(CoreProxy.address, CoreProxy.abi, signer);\n          const tx = await CoreProxyContract['createAccount()']();\n          const res = await tx.wait();\n\n          await client.invalidateQueries({\n            queryKey: [`${network?.id}-${network?.preset}`, 'Accounts'],\n          });\n\n          let newAccountId: string | undefined;\n\n          res.logs.forEach((log: any) => {\n            if (log.topics[0] === CoreProxyContract.interface.getEventTopic('AccountCreated')) {\n              const accountId = CoreProxyContract.interface.decodeEventLog(\n                'AccountCreated',\n                log.data,\n                log.topics\n              )?.accountId;\n              newAccountId = accountId?.toString();\n            }\n          });\n\n          return [newAccountId];\n        } catch (error) {\n          console.error(error);\n          throw error;\n        }\n      },\n    }),\n  };\n}\n","import { useEffect, useState } from 'react';\nimport {\n  Badge,\n  Button,\n  Divider,\n  Flex,\n  IconButton,\n  Link,\n  Menu,\n  MenuButton,\n  MenuItem,\n  MenuList,\n  MenuOptionGroup,\n  Switch,\n  Text,\n} from '@chakra-ui/react';\nimport { WalletIcon } from '@snx-v3/icons';\nimport { NetworkIcon, useNetwork, useWallet, NETWORKS } from '@snx-v3/useBlockchain';\nimport { prettyString } from '@snx-v3/format';\nimport { useLocalStorage } from '@snx-v3/useLocalStorage';\nimport { LOCAL_STORAGE_KEYS } from '@snx-v3/constants';\nimport { CopyIcon, SettingsIcon } from '@chakra-ui/icons';\nimport { useAccounts, useCreateAccount } from '@snx-v3/useAccounts';\nimport { useLocation, useNavigate, useSearchParams } from 'react-router-dom';\nimport { Tooltip } from '@snx-v3/Tooltip';\n\nconst mainnets = NETWORKS.filter(({ isSupported, isTestnet }) => isSupported && !isTestnet);\nconst testnets = NETWORKS.filter(({ isSupported, isTestnet }) => isSupported && isTestnet);\n\nexport function NetworkController() {\n  const [toolTipLabel, setTooltipLabel] = useState('Copy');\n  const { activeWallet, walletsInfo, connect, disconnect } = useWallet();\n  const { network: activeNetwork, setNetwork } = useNetwork();\n  const {\n    data: accounts,\n    isPending: isAccountsLoading,\n    isFetching: isAccountsFetching,\n  } = useAccounts();\n  const createAccount = useCreateAccount();\n  const [showTestnets, setShowTestnets] = useLocalStorage(LOCAL_STORAGE_KEYS.SHOW_TESTNETS, false);\n  const [queryParams] = useSearchParams();\n  const navigate = useNavigate();\n  const { pathname } = useLocation();\n\n  useEffect(() => {\n    if (!isAccountsLoading && !isAccountsFetching) {\n      if (!!accounts?.length) {\n        const accountId = queryParams.get('accountId');\n\n        if (accountId && !accounts?.includes(accountId)) {\n          queryParams.set('accountId', accounts[0]);\n          navigate({ pathname, search: queryParams.toString() }, { replace: true });\n        }\n      } else {\n        const accountId = queryParams.get('accountId');\n        if (!!accountId) {\n          queryParams.delete('accountId');\n          navigate({ pathname, search: queryParams.toString() }, { replace: true });\n        }\n      }\n    }\n  }, [accounts, isAccountsLoading, isAccountsFetching, queryParams, navigate, pathname]);\n\n  useEffect(() => {\n    // Check if wallet preference is stored in local storage\n    if (!walletsInfo) {\n      const defaultWallet = localStorage.getItem('connectedWallets');\n\n      if (defaultWallet) {\n        connect({\n          autoSelect: { disableModals: true, label: JSON.parse(defaultWallet) },\n        });\n      }\n    }\n\n    if (walletsInfo) {\n      // store in local storage\n      localStorage.setItem('connectedWallets', JSON.stringify(walletsInfo.label));\n    }\n  }, [walletsInfo, connect, navigate, pathname]);\n\n  useEffect(() => {\n    const accountId = queryParams.get('accountId');\n\n    if (!accountId && !!accounts?.length) {\n      const lastUsedAccount = localStorage.getItem('accountId');\n      if (lastUsedAccount && accounts.find((account) => String(account) === lastUsedAccount)) {\n        queryParams.set('accountId', lastUsedAccount);\n      } else {\n        queryParams.set('accountId', accounts[0]);\n      }\n      navigate({ pathname, search: queryParams.toString() }, { replace: true });\n    }\n  }, [accounts, navigate, pathname, queryParams]);\n\n  useEffect(() => {\n    const accountId = queryParams.get('accountId');\n\n    if (accountId) {\n      localStorage.setItem('accountId', accountId);\n    }\n  }, [queryParams]);\n\n  const onDisconnect = () => {\n    if (walletsInfo) {\n      disconnect(walletsInfo);\n      localStorage.removeItem('connectedWallets');\n    }\n  };\n\n  const notConnected = !activeWallet;\n  const notSupported = activeWallet && !activeNetwork;\n\n  return (\n    <Flex>\n      <Menu>\n        <MenuButton\n          as={Button}\n          variant=\"outline\"\n          colorScheme=\"gray\"\n          sx={{ '> span': { display: 'flex', alignItems: 'center' } }}\n          mr={1}\n          px={3}\n        >\n          <NetworkIcon\n            filter={activeNetwork?.isTestnet ? 'grayscale(1)' : ''}\n            networkId={notConnected ? 8453 : notSupported ? 0 : activeNetwork?.id}\n          />\n        </MenuButton>\n        <MenuList border=\"1px\" borderColor=\"gray.900\">\n          {mainnets.map(({ id, preset, label }) => (\n            <MenuItem\n              key={`${id}-${preset}`}\n              onClick={() => setNetwork(id)}\n              isDisabled={window.$chainId ? window.$chainId !== id : false}\n            >\n              <NetworkIcon networkId={id} size=\"20px\" />\n              <Text variant=\"nav\" ml={2}>\n                {label}\n              </Text>\n            </MenuItem>\n          ))}\n\n          {showTestnets && <Divider color=\"gray.900\" />}\n\n          <MenuOptionGroup>\n            <Flex py={4} px={3} alignItems=\"center\" justifyContent=\"space-between\">\n              <Text fontSize=\"14px\" fontFamily=\"heading\" lineHeight=\"20px\">\n                Show Testnets\n              </Text>\n              <Switch\n                mr={2}\n                size=\"sm\"\n                color=\"gray.900\"\n                colorScheme=\"gray\"\n                isChecked={showTestnets}\n                onChange={() => setShowTestnets(!showTestnets)}\n              />\n            </Flex>\n          </MenuOptionGroup>\n\n          {(showTestnets ? testnets : []).map(({ id, preset, label }) => (\n            <MenuItem\n              key={`${id}-${preset}`}\n              onClick={() => setNetwork(id)}\n              isDisabled={window.$chainId ? window.$chainId !== id : false}\n            >\n              <NetworkIcon filter=\"grayscale(1)\" networkId={id} size=\"20px\" />\n              <Text variant=\"nav\" ml={2}>\n                {label}\n              </Text>\n            </MenuItem>\n          ))}\n        </MenuList>\n      </Menu>\n      {activeWallet ? (\n        <Menu placement=\"bottom-end\">\n          <MenuButton\n            as={Button}\n            variant=\"outline\"\n            colorScheme=\"gray\"\n            ml={2}\n            height={10}\n            py=\"6px\"\n            px=\"9.5px\"\n            whiteSpace=\"nowrap\"\n            data-cy=\"wallet button\"\n          >\n            <WalletIcon color=\"white\" />\n            <Text\n              as=\"span\"\n              ml={1}\n              color=\"white\"\n              fontWeight={700}\n              fontSize=\"xs\"\n              userSelect=\"none\"\n              data-cy=\"short wallet address\"\n            >\n              {activeWallet.ens?.name || prettyString(activeWallet.address)}\n            </Text>\n          </MenuButton>\n          <MenuList>\n            <Flex\n              border=\"1px solid\"\n              rounded=\"base\"\n              borderColor=\"gray.900\"\n              w=\"370px\"\n              _hover={{ bg: 'navy.700' }}\n              backgroundColor=\"navy.700\"\n              opacity={1}\n              p=\"4\"\n            >\n              <Flex flexDir=\"column\" w=\"100%\" gap=\"2\">\n                <Flex justifyContent=\"space-between\">\n                  <Text fontSize=\"14px\" color=\"gray.500\">\n                    Connected with {walletsInfo?.label}\n                  </Text>\n                  <Button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      onDisconnect();\n                    }}\n                    size=\"xs\"\n                    variant=\"outline\"\n                    colorScheme=\"gray\"\n                    color=\"white\"\n                  >\n                    Disconnect\n                  </Button>\n                </Flex>\n                <Text fontWeight={700} color=\"white\" fontSize=\"16px\">\n                  {prettyString(activeWallet.address)}{' '}\n                  <Tooltip label={toolTipLabel} closeOnClick={false}>\n                    <CopyIcon\n                      ml=\"2\"\n                      onClick={() => {\n                        navigator.clipboard.writeText(activeWallet.address);\n                        setTooltipLabel('Copied');\n                        setTimeout(() => {\n                          setTooltipLabel('Copy');\n                        }, 10000);\n                      }}\n                    />\n                  </Tooltip>\n                </Text>\n                <Flex\n                  flexDir=\"column\"\n                  p=\"2\"\n                  border=\"1px solid\"\n                  borderColor=\"gray.900\"\n                  rounded=\"base\"\n                  gap=\"2\"\n                >\n                  <Flex w=\"100%\" justifyContent=\"space-between\">\n                    <Text fontWeight={400} fontSize=\"14px\">\n                      Account(s)\n                    </Text>\n                    <Link href=\"/#/account/settings\">\n                      <IconButton\n                        variant=\"outline\"\n                        colorScheme=\"gray\"\n                        size=\"xs\"\n                        icon={<SettingsIcon />}\n                        aria-label=\"account settings\"\n                      />\n                    </Link>\n                  </Flex>\n                  <Flex data-cy=\"accounts list\" flexDir=\"column\">\n                    {accounts?.map((account) => (\n                      <Text\n                        key={account}\n                        display=\"flex\"\n                        alignItems=\"center\"\n                        color=\"white\"\n                        fontWeight={700}\n                        fontSize=\"16px\"\n                        cursor=\"pointer\"\n                        p=\"3\"\n                        data-cy=\"account id\"\n                        data-account-id={account}\n                        _hover={{ bg: 'whiteAlpha.300' }}\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          queryParams.set('accountId', account);\n                          navigate({ pathname, search: queryParams.toString() });\n                        }}\n                      >\n                        #{prettyString(account, 4, 4)}\n                        {queryParams.get('accountId') === account && (\n                          <Badge ml={2} colorScheme=\"cyan\" variant=\"outline\">\n                            Connected\n                          </Badge>\n                        )}\n                      </Text>\n                    ))}\n                  </Flex>\n\n                  <Button\n                    onClick={(e) => {\n                      e.preventDefault();\n                      e.stopPropagation();\n                      createAccount.mutation.mutate();\n                    }}\n                    isDisabled={!createAccount.enabled || createAccount.mutation.isPending}\n                    size=\"xs\"\n                    variant=\"outline\"\n                    colorScheme=\"gray\"\n                    color=\"white\"\n                    leftIcon={\n                      <svg\n                        width=\"8\"\n                        height=\"8\"\n                        viewBox=\"0 0 8 8\"\n                        fill=\"none\"\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                      >\n                        <path\n                          d=\"M3.5 3.5V0.5H4.5V3.5H7.5V4.5H4.5V7.5H3.5V4.5H0.5V3.5H3.5Z\"\n                          fill=\"white\"\n                        />\n                      </svg>\n                    }\n                    w=\"130px\"\n                    data-cy=\"create new account button\"\n                  >\n                    Create Account\n                  </Button>\n                </Flex>\n              </Flex>\n            </Flex>\n          </MenuList>\n        </Menu>\n      ) : (\n        <Button\n          data-cy=\"connect wallet button\"\n          onClick={() => connect()}\n          type=\"button\"\n          size=\"sm\"\n          ml={2}\n          py={5}\n        >\n          Connect Wallet\n        </Button>\n      )}\n    </Flex>\n  );\n}\n","import { Image, ImageProps } from '@chakra-ui/react';\n\ninterface TokenIconProps extends ImageProps {\n  symbol?: string;\n  width?: number;\n  height?: number;\n}\n\nexport const TokenIcon = ({ symbol, width = 30, height = 30, ...props }: TokenIconProps) => {\n  return symbol ? (\n    <Image\n      src={`https://synthetixio.github.io/synthetix-assets/collateral/${symbol?.toUpperCase()}.svg`}\n      fallback={\n        <Image\n          src={`https://synthetixio.github.io/synthetix-assets/synths/${symbol}.svg`}\n          fallbackSrc=\"https://synthetixio.github.io/synthetix-assets/collateral/UNKNOWN.svg\"\n          alt={symbol}\n          style={{ width, height }}\n          {...props}\n        />\n      }\n      alt={symbol}\n      style={{ width, height }}\n      {...props}\n    />\n  ) : (\n    <Image\n      src=\"https://synthetixio.github.io/synthetix-assets/collateral/UNKNOWN.svg\"\n      fallbackSrc=\"https://synthetixio.github.io/synthetix-assets/collateral/UNKNOWN.svg\"\n      alt={symbol}\n      style={{ width, height }}\n      {...props}\n    />\n  );\n};\n","import { Input, InputProps } from '@chakra-ui/react';\nimport { ChangeEvent, useCallback, useEffect, useRef, useState } from 'react';\nimport { Wei, wei } from '@synthetixio/wei';\n\nexport interface NumberInputProps extends InputProps {\n  'data-cy'?: string;\n  'data-max'?: string;\n}\n\nexport const NUMBER_REGEX = /^([0-9]*[.])?[0-9]{0,18}$/;\n\nfunction cleanupNumber(value: Wei) {\n  // Cleanup trailing precision zeroes\n  const float = parseFloat(value.toString());\n  if (float === value.toNumber()) {\n    return `${float}`;\n  }\n  return value.toString();\n}\n\nexport function NumberInput({\n  value,\n  onChange,\n  min,\n  max,\n  InputProps,\n  disabled,\n}: {\n  onChange?: (value: Wei) => void;\n  value: Wei;\n  min?: Wei;\n  max?: Wei;\n  InputProps?: NumberInputProps;\n  disabled?: boolean;\n}) {\n  const [inputValue, setInputValue] = useState(value.gt(0) ? value.toString() : '');\n\n  const onInputChange = useCallback(\n    (e: ChangeEvent<HTMLInputElement>) => {\n      // Define max length here\n      if (e.target.value.length > 24) return;\n\n      let _value = e.target.value;\n\n      if (!isNaN(Number(e.target.value))) {\n        if (!!min && min.gt(Number(e.target.value))) {\n          _value = min.toNumber().toString();\n        }\n      }\n\n      setInputValue(_value);\n      if (!onChange) {\n        // Could be a read-only input\n        return;\n      }\n      if (!NUMBER_REGEX.test(`${_value}`)) {\n        return;\n      }\n      let nextValue = value;\n      try {\n        nextValue = wei(_value || 0);\n      } catch (_err) {\n        // whatever\n      }\n      if (!value.eq(nextValue)) {\n        onChange(nextValue);\n      }\n    },\n    [min, onChange, value]\n  );\n\n  const ref = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    if (!NUMBER_REGEX.test(`${inputValue}`)) {\n      ref.current.setCustomValidity('Invalid number');\n      return;\n    }\n    if (value && value.eq(0)) {\n      ref.current.setCustomValidity('Value required');\n      return;\n    }\n    if (min && min.gte(0) && value && value.lt(min)) {\n      ref.current.setCustomValidity(`Value smaller than minimum of ${cleanupNumber(min)}`);\n      return;\n    }\n    if (max && max.gte(0) && value && value.gt(max)) {\n      ref.current.setCustomValidity(`Value greater than maximum of ${cleanupNumber(max)}`);\n      return;\n    }\n    ref.current.setCustomValidity('');\n  }, [inputValue, min, max, value]);\n\n  useEffect(() => {\n    if (value.eq(0)) {\n      return setInputValue('');\n    }\n    return setInputValue(cleanupNumber(value));\n  }, [value]);\n\n  return (\n    <Input\n      ref={ref}\n      flex=\"1\"\n      type=\"number\"\n      step=\"any\"\n      border=\"none\"\n      borderWidth=\"0px\"\n      textAlign=\"end\"\n      p={0}\n      outline=\"none\"\n      fontFamily=\"heading\"\n      fontSize=\"xl\"\n      fontWeight=\"700\"\n      lineHeight=\"2xl\"\n      color=\"white\"\n      height=\"unset\"\n      autoFocus={true}\n      placeholder=\"00.00\"\n      _focus={{ boxShadow: 'none !important' }}\n      _placeholder={{ color: 'whiteAlpha.700' }}\n      _disabled={{ color: 'white' }}\n      value={inputValue}\n      onChange={onInputChange}\n      disabled={disabled}\n      {...InputProps}\n      maxLength={10}\n    />\n  );\n}\n","import { Flex, FlexProps } from '@chakra-ui/react';\n\nexport const BorderBox = (props: FlexProps) => (\n  <Flex bg=\"navy.700\" borderWidth=\"1px\" borderColor=\"gray.900\" borderRadius=\"base\" {...props} />\n);\n","import { importV2x } from '@snx-v3/contracts';\nimport { Network, useNetwork } from '@snx-v3/useBlockchain';\nimport { useQuery } from '@tanstack/react-query';\n\nexport function useV2xSynthetix(customNetwork?: Network) {\n  const { network } = useNetwork();\n  const targetNetwork = customNetwork || network;\n\n  return useQuery({\n    queryKey: [`${targetNetwork?.id}-${targetNetwork?.preset}`, 'V2xSynthetix'],\n    enabled: Boolean(targetNetwork),\n    queryFn: async function () {\n      if (!targetNetwork) throw new Error('OMFG');\n      return importV2x(targetNetwork.id, targetNetwork.preset);\n    },\n    staleTime: Infinity,\n    // On some chains this is not available, and that is expected\n    throwOnError: false,\n  });\n}\n","export async function importV2x(chainId, preset) {\n  if (!preset) {\n    throw new Error(`Missing preset`);\n  }\n  const deployment = `${Number(chainId).toFixed(0)}-${preset}`;\n  switch (deployment) {\n    case '1-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/1-main/meta.json'),\n        import('@synthetixio/v3-contracts/1-main/V2x.readable.json'),\n      ]);\n      return { address: meta.contracts.V2x, abi };\n    }\n    case '11155111-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/11155111-main/meta.json'),\n        import('@synthetixio/v3-contracts/11155111-main/V2x.readable.json'),\n      ]);\n      return { address: meta.contracts.V2x, abi };\n    }\n    /*case '10-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/10-main/meta.json'),\n        import('@synthetixio/v3-contracts/10-main/V2x.readable.json'),\n      ]);\n      return { address: meta.contracts.V2x, abi };\n\t\t}*/\n    default: {\n      throw new Error(`Unsupported deployment ${deployment} for V2x`);\n    }\n  }\n}\n","import { contractsHash } from '@snx-v3/tsHelpers';\nimport { Network, useProviderForChain } from '@snx-v3/useBlockchain';\nimport { useV2xSynthetix } from '@snx-v3/useV2xSynthetix';\nimport { useQuery } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\n\nexport function useV2sUSD(network: Network) {\n  const { data: V2xSynthetix } = useV2xSynthetix(network);\n  const provider = useProviderForChain(network);\n\n  return useQuery({\n    queryKey: [\n      `${network?.id}-${network?.preset}`,\n      'V2 sUSD',\n\n      { contractsHash: contractsHash([V2xSynthetix]) },\n    ],\n    enabled: Boolean(provider && V2xSynthetix),\n    queryFn: async function () {\n      if (!(provider && V2xSynthetix)) throw 'OMFG';\n      const V2xSynthetixContract = new ethers.Contract(\n        V2xSynthetix.address,\n        V2xSynthetix.abi,\n        provider\n      );\n\n      return (await V2xSynthetixContract.synths(\n        ethers.utils.formatBytes32String('sUSD')\n      )) as string;\n    },\n  });\n}\n","import React, { useEffect, useState } from 'react';\nimport {\n  VStack,\n  Text,\n  Button,\n  Flex,\n  Collapse,\n  Alert,\n  AlertIcon,\n  AlertDescription,\n} from '@chakra-ui/react';\nimport { NumberInput } from '@snx-v3/NumberInput';\nimport { Network } from '@snx-v3/useBlockchain';\nimport { useTokenBalance } from '@snx-v3/useTokenBalance';\nimport Wei from '@synthetixio/wei';\nimport { ZEROWEI } from '@snx-v3/constants';\nimport { Amount } from '@snx-v3/Amount';\nimport { BorderBox } from '@snx-v3/BorderBox';\nimport { TokenIcon } from '../TokenIcon';\nimport { useUSDProxy } from '@snx-v3/useUSDProxy';\nimport { useV2sUSD } from '@snx-v3/useV2sUSD';\n\nexport const StepIntro = ({\n  onClose,\n  onConfirm,\n  setAmount,\n  amount,\n  network,\n}: {\n  onClose: () => void;\n  onConfirm: () => void;\n  setAmount: (val: Wei) => void;\n  amount: Wei;\n  network: Network;\n}) => {\n  const [loaded, setLoaded] = useState(false);\n  const { data: v2_sUSD } = useV2sUSD(network);\n  const { data: v2_balance } = useTokenBalance(v2_sUSD, network);\n  const { data: v3_sUSD } = useUSDProxy(network);\n  const { data: v3_balance } = useTokenBalance(v3_sUSD?.address, network);\n\n  useEffect(() => {\n    if (v2_balance && amount.eq(0) && !loaded) {\n      setAmount(v2_balance);\n      setLoaded(true);\n    }\n  }, [amount, loaded, setAmount, v2_balance]);\n\n  return (\n    <VStack gap={2.5}>\n      <Text width=\"100%\" textAlign=\"left\" fontSize=\"14px\">\n        Convert your sUSD on Ethereum Mainnet to V3 compatible sUSD. You will need V3 compatible\n        sUSD to interact with the new Synthetix products.\n      </Text>\n\n      <BorderBox width=\"100%\" display=\"flex\" flexDirection=\"column\" p={3}>\n        <Flex alignItems=\"center\">\n          <Flex flexDir=\"column\" gap=\"1\">\n            <Flex flexDir=\"column\" gap=\"1\">\n              <BorderBox\n                display=\"flex\"\n                justifyContent=\"center\"\n                alignItems=\"center\"\n                py={1.5}\n                px={2.5}\n                width=\"fit-content\"\n              >\n                <Text display=\"flex\" gap={2} alignItems=\"center\" fontWeight=\"600\">\n                  <TokenIcon symbol=\"susd\" width={16} height={16} />\n                  V2 sUSD\n                </Text>\n              </BorderBox>\n              <Flex fontSize=\"xs\" color=\"whiteAlpha.700\" gap=\"1\">\n                Balance: <Amount value={v2_balance} />\n                <Text\n                  as=\"span\"\n                  cursor=\"pointer\"\n                  onClick={() => {\n                    if (!v2_balance) {\n                      return;\n                    }\n                    setAmount(v2_balance);\n                  }}\n                  color={v2_balance?.eq(amount) ? 'gray.600' : 'cyan.500'}\n                  fontWeight={700}\n                >\n                  &nbsp;Max\n                </Text>\n              </Flex>\n            </Flex>\n          </Flex>\n          <Flex flexDir=\"column\" flexGrow={1}>\n            <NumberInput\n              InputProps={{\n                isRequired: true,\n                'data-max': v2_balance?.toString(),\n                type: 'number',\n                min: 0,\n              }}\n              value={amount}\n              onChange={(val) => setAmount(val)}\n              min={ZEROWEI}\n            />\n          </Flex>\n        </Flex>\n      </BorderBox>\n\n      <BorderBox width=\"100%\" display=\"flex\" flexDirection=\"column\" p={3}>\n        <Flex alignItems=\"center\">\n          <Flex flexDir=\"column\" gap=\"1\">\n            <BorderBox\n              display=\"flex\"\n              justifyContent=\"center\"\n              alignItems=\"center\"\n              py={1.5}\n              px={2.5}\n              width=\"fit-content\"\n            >\n              <Text display=\"flex\" gap={2} alignItems=\"center\" fontWeight=\"600\">\n                <TokenIcon symbol=\"susd\" width={16} height={16} />\n                V3 sUSD\n              </Text>\n            </BorderBox>\n            <Flex fontSize=\"xs\" color=\"whiteAlpha.700\" gap=\"1\">\n              Balance: <Amount value={v3_balance} />\n            </Flex>\n          </Flex>\n          <Flex flexDir=\"column\" flexGrow={1}>\n            <NumberInput disabled value={amount} />\n          </Flex>\n        </Flex>\n      </BorderBox>\n\n      <Collapse in={v2_balance?.lt(amount)} animateOpacity>\n        <Alert borderRadius=\"6px\" status=\"error\">\n          <AlertIcon />\n          <AlertDescription>You cannot convert more than your v2 sUSD balance</AlertDescription>\n        </Alert>\n      </Collapse>\n\n      <Button\n        isDisabled={v2_balance?.lt(amount) || amount.lte(0)}\n        mt={3}\n        width=\"100%\"\n        onClick={onConfirm}\n      >\n        Convert\n      </Button>\n      <Button variant=\"outline\" colorScheme=\"gray\" onClick={onClose} width=\"100%\">\n        Later\n      </Button>\n    </VStack>\n  );\n};\n","import { importLegacyMarket } from '@snx-v3/contracts';\nimport { Network, useNetwork } from '@snx-v3/useBlockchain';\nimport { useQuery } from '@tanstack/react-query';\n\nexport function useLegacyMarket(customNetwork?: Network) {\n  const { network } = useNetwork();\n  const targetNetwork = customNetwork || network;\n\n  return useQuery({\n    queryKey: [`${targetNetwork?.id}-${targetNetwork?.preset}`, 'LegacyMarket'],\n    enabled: Boolean(targetNetwork),\n    queryFn: async function () {\n      if (!targetNetwork) throw new Error('OMFG');\n      return importLegacyMarket(targetNetwork.id, targetNetwork.preset);\n    },\n    staleTime: Infinity,\n    // On some chains this is not available, and that is expected\n    throwOnError: false,\n  });\n}\n","export async function importLegacyMarket(chainId, preset) {\n  if (!preset) {\n    throw new Error(`Missing preset`);\n  }\n  const deployment = `${Number(chainId).toFixed(0)}-${preset}`;\n  switch (deployment) {\n    case '1-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/1-main/meta.json'),\n        import('@synthetixio/v3-contracts/1-main/LegacyMarketProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.LegacyMarketProxy, abi };\n    }\n    case '11155111-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/11155111-main/meta.json'),\n        import('@synthetixio/v3-contracts/11155111-main/LegacyMarketProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.LegacyMarketProxy, abi };\n    }\n    /*case '10-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/10-main/meta.json'),\n        import('@synthetixio/v3-contracts/10-main/LegacyMarketProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.LegacyMarketProxy, abi };\n\t\t}*/\n    default: {\n      throw new Error(`Unsupported deployment ${deployment} for Extras`);\n    }\n  }\n}\n","import { Hex } from 'viem';\n\nexport function parseTxError(error: any): Hex | undefined {\n  try {\n    if (error.cause?.data) {\n      return error.cause?.data;\n    }\n    if (error.cause?.cause?.data) {\n      return error.cause?.cause?.data;\n    }\n    if (error.cause?.cause?.cause?.data) {\n      return error.cause?.cause?.cause?.data;\n    }\n    if (error.cause?.cause?.error?.data) {\n      return error.cause?.cause?.error?.data;\n    }\n    if (error.cause?.cause?.cause?.error?.data) {\n      return error.cause?.cause?.cause?.error?.data;\n    }\n    if (error?.error?.error?.data) {\n      return error?.error?.error?.data;\n    }\n  } catch (err) {\n    console.error('exception error parser:', err);\n  }\n}\n","import React from 'react';\nimport { VStack, Text, Button, Alert, Flex } from '@chakra-ui/react';\nimport { ArrowUpIcon, CheckIcon } from '@chakra-ui/icons';\nimport { TransactionSummary } from '../TransactionSummary/TransactionSummary';\nimport Wei from '@synthetixio/wei';\nimport { currency } from '@snx-v3/format';\nimport { ChangeStat } from '../ChangeStat';\n\nexport const StepSuccess = ({\n  onConfirm,\n  v2Balance,\n  v3Balance,\n  amount,\n}: {\n  onConfirm: () => void;\n  v2Balance: Wei;\n  v3Balance: Wei;\n  amount: Wei;\n}) => {\n  return (\n    <VStack spacing={6}>\n      <Text width=\"100%\" textAlign=\"left\" fontSize=\"14px\">\n        Your <b>V2 sUSD</b> has been converted to <b>V3 sUSD</b>\n      </Text>\n\n      <Alert rounded=\"base\" colorScheme=\"green\" borderRadius=\"6px\">\n        <Flex bg=\"green.500\" p=\"1\" rounded=\"full\" mr=\"3.5\">\n          <CheckIcon w=\"12px\" h=\"12px\" color=\"green.900\" />\n        </Flex>\n        <Text fontSize=\"16px\">\n          <b>sUSD</b> successfully converted\n        </Text>\n      </Alert>\n\n      <TransactionSummary\n        width=\"100%\"\n        items={[\n          {\n            label: 'Total V2 sUSD',\n            value: (\n              <ChangeStat\n                value={v2Balance}\n                newValue={v2Balance.sub(amount)}\n                formatFn={(val: Wei) => currency(val)}\n                hasChanges\n                size=\"sm\"\n              />\n            ),\n          },\n          {\n            label: 'Total V3 sUSD',\n            value: (\n              <ChangeStat\n                value={v3Balance}\n                newValue={v3Balance.add(amount)}\n                formatFn={(val: Wei) => currency(val)}\n                hasChanges\n                size=\"sm\"\n              />\n            ),\n          },\n        ]}\n      />\n\n      <Button mb={-2} width=\"100%\" onClick={onConfirm}>\n        Continue\n      </Button>\n\n      <Button\n        display=\"flex\"\n        alignItems=\"center\"\n        gap={1}\n        variant=\"outline\"\n        colorScheme=\"gray\"\n        width=\"100%\"\n      >\n        Deposit sUSD to Curve\n        <ArrowUpIcon transform=\"rotate(45deg)\" />\n      </Button>\n    </VStack>\n  );\n};\n","import { Button, Text, useToast, VStack } from '@chakra-ui/react';\nimport { Amount } from '@snx-v3/Amount';\nimport { ZEROWEI } from '@snx-v3/constants';\nimport { ContractError } from '@snx-v3/ContractError';\nimport { Multistep } from '@snx-v3/Multistep';\nimport { useApprove } from '@snx-v3/useApprove';\nimport { Network } from '@snx-v3/useBlockchain';\nimport { useContractErrorParser } from '@snx-v3/useContractErrorParser';\nimport { useLegacyMarket } from '@snx-v3/useLegacyMarket';\nimport { useMigrateUSD } from '@snx-v3/useMigrateUSD';\nimport { useTokenBalance } from '@snx-v3/useTokenBalance';\nimport { useUSDProxy } from '@snx-v3/useUSDProxy';\nimport { useV2sUSD } from '@snx-v3/useV2sUSD';\nimport { Wei } from '@synthetixio/wei';\nimport { useCallback, useState } from 'react';\nimport { StepSuccess } from './StepSuccess';\n\nexport function MigrateUSDTransaction({\n  onSuccess,\n  amount,\n  network,\n  onBack,\n}: {\n  amount: Wei;\n  network: Network;\n  onSuccess: () => void;\n  onBack: () => void;\n}) {\n  const { data: legacyMarket } = useLegacyMarket();\n\n  const { data: v2_sUSD } = useV2sUSD(network);\n  const { data: v2_balance } = useTokenBalance(v2_sUSD, network);\n  const { data: v3_sUSD } = useUSDProxy(network);\n  const { data: v3_balance } = useTokenBalance(v3_sUSD?.address, network);\n\n  const [infiniteApproval, setInfiniteApproval] = useState(false);\n  const [txState, setTxState] = useState({\n    step: 1,\n    status: 'idle',\n  });\n  const [txSummary, setTxSummary] = useState({\n    amount: ZEROWEI,\n    v2Balance: ZEROWEI,\n    v3Balance: ZEROWEI,\n  });\n\n  const { approve, refetchAllowance, requireApproval } = useApprove({\n    contractAddress: v2_sUSD,\n    amount: amount.toBN(),\n    spender: legacyMarket?.address,\n  });\n\n  const toast = useToast({ isClosable: true, duration: 9000 });\n\n  const { migrate, isSuccess } = useMigrateUSD({\n    amount,\n  });\n\n  const errorParser = useContractErrorParser();\n  const onSubmit = useCallback(async () => {\n    try {\n      if (txState.step > 2) {\n        onSuccess();\n        return;\n      }\n\n      if (txState.step === 1 && requireApproval) {\n        setTxState({\n          step: 1,\n          status: 'pending',\n        });\n\n        await approve(infiniteApproval);\n        refetchAllowance();\n      }\n\n      setTxState({\n        step: 2,\n        status: 'pending',\n      });\n\n      setTxSummary({\n        amount,\n        v2Balance: v2_balance || ZEROWEI,\n        v3Balance: v3_balance || ZEROWEI,\n      });\n      await migrate();\n\n      setTxState({\n        step: 2,\n        status: 'success',\n      });\n\n      toast.closeAll();\n      toast({\n        title: 'Success',\n        description: 'Migration executed.',\n        status: 'success',\n        duration: 5000,\n        variant: 'left-accent',\n      });\n    } catch (error) {\n      const contractError = errorParser(error);\n      if (contractError) {\n        console.error(new Error(contractError.name), contractError);\n      }\n      setTxState((state) => ({\n        step: state.step,\n        status: 'error',\n      }));\n      toast.closeAll();\n      toast({\n        title: 'Migration failed',\n        description: contractError ? (\n          <ContractError contractError={contractError} />\n        ) : (\n          'Please try again.'\n        ),\n        status: 'error',\n        variant: 'left-accent',\n        duration: 3_600_000,\n      });\n    }\n  }, [\n    amount,\n    approve,\n    errorParser,\n    infiniteApproval,\n    migrate,\n    onSuccess,\n    refetchAllowance,\n    requireApproval,\n    toast,\n    txState.step,\n    v2_balance,\n    v3_balance,\n  ]);\n\n  if (isSuccess) {\n    return <StepSuccess {...txSummary} onConfirm={onSuccess} />;\n  }\n\n  return (\n    <VStack spacing={0}>\n      <Multistep\n        width=\"100%\"\n        step={1}\n        title=\"Approve sUSD transfer\"\n        status={{\n          failed: txState.step === 1 && txState.status === 'error',\n          success: txState.step > 1,\n          loading: txState.step === 1 && txState.status === 'pending',\n        }}\n        checkboxLabel=\"Approve unlimited sUSD transfers to Synthetix\"\n        checkboxProps={{\n          isChecked: infiniteApproval,\n          onChange: (e) => setInfiniteApproval(e.target.checked),\n        }}\n        mt={0}\n      />\n\n      <Multistep\n        width=\"100%\"\n        step={2}\n        title=\"Convert sUSD\"\n        mb={4}\n        mt={4}\n        subtitle={\n          <Text>\n            This will convert <Amount value={amount} suffix={` v2 sUSD`} /> to v3 sUSD\n          </Text>\n        }\n        status={{\n          failed: txState.step === 2 && txState.status === 'error',\n          success: txState.step === 2 && txState.status === 'sucess',\n          loading: txState.step === 2 && txState.status === 'pending',\n        }}\n      />\n\n      <Button isDisabled={txState.status === 'pending'} onClick={onSubmit} width=\"100%\" mb={2}>\n        {(() => {\n          switch (true) {\n            case txState.status === 'error':\n              return 'Retry';\n            case txState.status === 'pending':\n              return 'Processing...';\n            case txState.step === 2 && txState.status === 'sucess':\n              return 'Done';\n            default:\n              return 'Execute Transaction';\n          }\n        })()}\n      </Button>\n\n      {txState.status !== 'pending' && (\n        <Button variant=\"outline\" colorScheme=\"gray\" width=\"100%\" onClick={onBack}>\n          Back\n        </Button>\n      )}\n    </VStack>\n  );\n}\n","import { useDefaultProvider, useNetwork, useSigner } from '@snx-v3/useBlockchain';\nimport { useLegacyMarket } from '@snx-v3/useLegacyMarket';\nimport { useCallback, useState } from 'react';\nimport { getGasPrice } from '@snx-v3/useGasPrice';\nimport { formatGasPriceForTransaction } from '@snx-v3/useGasOptions';\nimport { ZEROWEI } from '@snx-v3/constants';\nimport Wei, { wei } from '@synthetixio/wei';\nimport { useGasSpeed } from '@snx-v3/useGasSpeed';\nimport { parseTxError } from '@snx-v3/parser';\nimport { useQueryClient } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\n\nexport function useMigrateUSD({ amount }: { amount: Wei }) {\n  const [isLoading, setIsLoading] = useState(false);\n  const [isSuccess, setIsSuccess] = useState(false);\n  const signer = useSigner();\n  const { data: LegacyMarket } = useLegacyMarket();\n  const { gasSpeed } = useGasSpeed();\n  const provider = useDefaultProvider();\n  const queryClient = useQueryClient();\n  const { network } = useNetwork();\n\n  const migrate = useCallback(async () => {\n    try {\n      if (!(LegacyMarket && signer)) {\n        throw 'OMFG';\n      }\n      setIsLoading(true);\n      setIsSuccess(false);\n      const gasPrices = await getGasPrice({ provider: signer.provider });\n\n      const LegacyMarketContract = new ethers.Contract(\n        LegacyMarket.address,\n        LegacyMarket.abi,\n        signer\n      );\n\n      const transaction = await LegacyMarketContract.populateTransaction.convertUSD(amount.toBN());\n      const gasLimit = await provider?.estimateGas(transaction);\n\n      const gasOptionsForTransaction = formatGasPriceForTransaction({\n        gasLimit: wei(gasLimit || ZEROWEI).toBN(),\n        gasPrices,\n        gasSpeed,\n      });\n\n      const txn = await signer.sendTransaction({ ...transaction, ...gasOptionsForTransaction });\n\n      await txn.wait();\n\n      setIsLoading(false);\n      setIsSuccess(true);\n\n      queryClient.invalidateQueries({\n        queryKey: [`${network?.id}-${network?.preset}`, 'TokenBalance'],\n      });\n    } catch (error) {\n      if (LegacyMarket) {\n        try {\n          const LegacyMarketInterface = new ethers.utils.Interface(LegacyMarket.abi);\n          const parsedError = parseTxError(error);\n          const errorResult = LegacyMarketInterface.parseError(parsedError as string);\n          console.error('error:', errorResult);\n        } catch {\n          // whatever\n        }\n      }\n      setIsLoading(false);\n      throw error;\n    }\n  }, [amount, gasSpeed, LegacyMarket, network?.id, network?.preset, provider, queryClient, signer]);\n\n  return {\n    migrate,\n    isLoading,\n    isSuccess,\n  };\n}\n","import React from 'react';\nimport { VStack, Text, Button, Alert, Flex, Image } from '@chakra-ui/react';\nimport { CheckIcon } from '@chakra-ui/icons';\nimport { Network } from '@snx-v3/useBlockchain';\n\nexport const StepSuccessFinal = ({\n  onConfirm,\n  network,\n}: {\n  onConfirm: () => void;\n  network: Network;\n}) => {\n  return (\n    <VStack spacing={6}>\n      <Text width=\"100%\" textAlign=\"left\" fontSize=\"14px\">\n        Your migration to Synthetix V3 on {network.name} has been successfully Completed.\n      </Text>\n\n      <Flex width=\"100%\" alignItems=\"center\" justifyContent=\"center\" flex={1}>\n        <Image maxWidth=\"455px\" width=\"100%\" src=\"/Migrate Launch.png\" alt=\"Synthetix V3 Launch\" />\n      </Flex>\n\n      <Alert borderRadius=\"6px\" colorScheme=\"green\">\n        <Flex bg=\"green.500\" p=\"1\" rounded=\"full\" mr=\"3.5\">\n          <CheckIcon w=\"12px\" h=\"12px\" color=\"green.900\" />\n        </Flex>\n        <Text fontSize=\"16px\">Migration successfully Completed</Text>\n      </Alert>\n\n      <VStack width=\"100%\" spacing={4}>\n        <Button width=\"100%\" onClick={onConfirm}>\n          See Position on V3\n        </Button>\n      </VStack>\n    </VStack>\n  );\n};\n","import {\n  CloseButton,\n  Divider,\n  Flex,\n  Heading,\n  Modal,\n  ModalBody,\n  ModalContent,\n  ModalOverlay,\n} from '@chakra-ui/react';\nimport { FC, useCallback, useEffect, useState } from 'react';\nimport { StepIntro } from './StepIntro';\nimport { ZEROWEI } from '@snx-v3/constants';\nimport { MigrateUSDTransaction } from './MigrateUSDTransaction';\nimport { Network } from '@snx-v3/useBlockchain';\nimport { StepSuccessFinal } from '../Migration/StepSuccessFinal';\nimport { generatePath, useLocation, useNavigate } from 'react-router-dom';\n\ninterface Props {\n  onClose: () => void;\n  isOpen: boolean;\n  network: Network;\n  type: 'migration' | 'convert';\n  accountId?: string;\n}\n\nexport const MigrateUSDModal: FC<Props> = ({ onClose, isOpen, network, type, accountId }) => {\n  const [step, setStep] = useState(0);\n  const [amount, setAmount] = useState(ZEROWEI);\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (!isOpen) {\n      setStep(0);\n      setAmount(ZEROWEI);\n    }\n  }, [isOpen]);\n\n  const handleConfirm = useCallback(() => {\n    if (accountId) {\n      const queryParams = new URLSearchParams(location.search);\n\n      queryParams.set('accountId', accountId);\n\n      navigate(\n        {\n          pathname: generatePath('/dashboard'),\n          search: queryParams.toString(),\n        },\n        { replace: true }\n      );\n    }\n    onClose();\n  }, [accountId, location.search, navigate, onClose]);\n\n  return (\n    <Modal size=\"lg\" isOpen={isOpen} onClose={onClose} closeOnOverlayClick={false}>\n      <ModalOverlay />\n      <ModalContent mt=\"100px\" borderWidth=\"1px\" borderColor=\"gray.900\" bg=\"navy.900\" color=\"white\">\n        <Flex justifyContent=\"space-between\" p={6} alignItems=\"center\">\n          <Heading fontSize=\"20px\">\n            {step === 2 ? 'Migration successful' : 'Convert your sUSD to V3 on Mainnet'}\n          </Heading>\n          <CloseButton onClick={onClose} color=\"gray\" />\n        </Flex>\n        <Flex width=\"100%\" px={6}>\n          <Divider colorScheme=\"gray\" />\n        </Flex>\n        <ModalBody p={6} pt={2}>\n          {isOpen && (\n            <>\n              {step === 0 && (\n                <StepIntro\n                  amount={amount}\n                  setAmount={setAmount}\n                  onClose={onClose}\n                  onConfirm={() => setStep(1)}\n                  network={network}\n                />\n              )}\n              {step === 1 && (\n                <MigrateUSDTransaction\n                  network={network}\n                  onSuccess={() => {\n                    if (type === 'migration') {\n                      setStep(2);\n                    } else {\n                      onClose();\n                    }\n                  }}\n                  onBack={() => setStep(0)}\n                  amount={amount}\n                />\n              )}\n              {step === 2 && <StepSuccessFinal network={network} onConfirm={handleConfirm} />}\n            </>\n          )}\n        </ModalBody>\n      </ModalContent>\n    </Modal>\n  );\n};\n","import { Button } from '@chakra-ui/react';\nimport { Network, useNetwork, useWallet } from '@snx-v3/useBlockchain';\nimport { useParams } from '@snx-v3/useParams';\nimport { useEffect, useState } from 'react';\nimport { TokenIcon } from '../TokenIcon';\nimport { MigrateUSDModal } from './MigrateUSDModal';\n\nexport function MigrateUSDButton({ network }: { network: Network }) {\n  const [isOpen, setIsOpen] = useState(false);\n  const { network: currentNetwork } = useNetwork();\n  const params = useParams();\n  const { activeWallet } = useWallet();\n\n  useEffect(() => {\n    if (params.convert?.toLowerCase() === 'snxusd') {\n      setIsOpen(true);\n    }\n  }, [params.convert]);\n\n  if (!activeWallet || currentNetwork?.id !== network.id) {\n    return null;\n  }\n\n  return (\n    <>\n      <MigrateUSDModal\n        type=\"convert\"\n        network={network}\n        onClose={() => setIsOpen(false)}\n        isOpen={isOpen}\n      />\n      <Button\n        variant=\"outline\"\n        colorScheme=\"gray\"\n        px={3}\n        gap={2}\n        display=\"flex\"\n        alignItems=\"center\"\n        fontSize=\"14px\"\n        onClick={() => setIsOpen(true)}\n      >\n        <TokenIcon width={24} height={24} symbol=\"susd\" />\n        Convert sUSD\n      </Button>\n    </>\n  );\n}\n","import { Box, Container, Flex, Link, useDisclosure } from '@chakra-ui/react';\nimport { NavLink as RouterLink, useLocation } from 'react-router-dom';\nimport { NetworkController } from './NetworkController';\nimport { useEffect } from 'react';\nimport { Logo, LogoIcon } from '@snx-v3/icons';\nimport { MigrateUSDButton } from '../../components/MigrateUSD/MigrateUSDButton';\nimport { MAINNET, SEPOLIA, useNetwork } from '@snx-v3/useBlockchain';\n\nexport default function Header() {\n  const { network } = useNetwork();\n  const { onClose } = useDisclosure();\n  const location = useLocation();\n\n  useEffect(() => {\n    onClose();\n  }, [location, onClose]);\n\n  return (\n    <>\n      <Flex\n        bg=\"navy.700\"\n        mb=\"4\"\n        py=\"3\"\n        borderBottomWidth=\"1px\"\n        borderBottomColor=\"gray.900\"\n        px=\"10\"\n      >\n        <Container maxW=\"1236px\" as={Flex} justifyContent=\"space-between\" alignItems=\"center\">\n          <Flex\n            display={{ base: 'none', md: 'inline-block' }}\n            flexDirection=\"row\"\n            justifyContent=\"space-between\"\n          >\n            <Link\n              to={{\n                pathname: '/',\n                search: location.search,\n              }}\n              as={RouterLink}\n              py={4}\n            >\n              <Logo />\n            </Link>\n            <Link\n              ml={6}\n              as={RouterLink}\n              to={{\n                pathname: '/dashboard',\n                search: location.search,\n              }}\n              fontWeight={700}\n              fontSize=\"14px\"\n              display=\"inline\"\n              px={3}\n              py={2.5}\n              textDecoration=\"none\"\n              color=\"gray.500\"\n              _hover={{ textDecoration: 'none' }}\n              _activeLink={{ color: 'white' }}\n            >\n              Dashboard\n            </Link>\n            <Link\n              ml={2.5}\n              as={RouterLink}\n              to={{\n                pathname: '/pools',\n                search: location.search,\n              }}\n              fontWeight={700}\n              fontSize=\"14px\"\n              display=\"inline\"\n              textDecoration=\"none\"\n              px={3}\n              py={2.5}\n              color=\"gray.500\"\n              _hover={{ textDecoration: 'none' }}\n              _activeLink={{ color: 'white' }}\n            >\n              Pools\n            </Link>\n          </Flex>\n          <Box display={{ md: 'none' }}>\n            <Link to=\"/\" as={RouterLink} py={4} pr={2}>\n              <LogoIcon />\n            </Link>\n          </Box>\n          <Flex gap={3} flexWrap=\"wrap-reverse\" justifyContent=\"center\" alignItems=\"center\">\n            {/* Hide balance */}\n            {/* <Balance isBase={isBase} balance={balance} /> */}\n            {network && [MAINNET.id, SEPOLIA.id].includes(network.id) ? (\n              <MigrateUSDButton network={network} />\n            ) : null}\n            <NetworkController />\n          </Flex>\n        </Container>\n      </Flex>\n    </>\n  );\n}\n","import { Container, Flex, Link } from '@chakra-ui/react';\nimport { DiscordIcon, GithubIcon, Logo, WarpcastIcon, XIcon, YoutubeIcon } from '@snx-v3/icons';\n\nexport const Footer = () => {\n  return (\n    <Flex borderTop=\"1px solid\" borderTopColor=\"gray.900\" bg=\"navy.700\">\n      <Container\n        maxW=\"1236px\"\n        as={Flex}\n        height=\"72px\"\n        alignItems=\"center\"\n        justifyContent=\"space-between\"\n      >\n        <Logo withText={false} />\n        <Flex alignItems=\"center\">\n          <Link href=\"https://discord.com/invite/synthetix\" target=\"_blank\">\n            <DiscordIcon w=\"24px\" h=\"24px\" mr={2} />\n          </Link>\n          <Link href=\"https://x.com/synthetix_io\" target=\"_blank\">\n            <XIcon w=\"24px\" h=\"24px\" mr={2} />\n          </Link>\n          <Link href=\"https://github.com/Synthetixio/\" target=\"_blank\">\n            <GithubIcon w=\"24px\" h=\"24px\" mr={2} />\n          </Link>\n          <Link href=\"https://warpcast.com/~/channel/synthetix\" target=\"_blank\">\n            <WarpcastIcon w=\"24px\" h=\"24px\" mr={2} />\n          </Link>\n          <Link href=\"https://www.youtube.com/@synthetix.v3\" target=\"_blank\">\n            <YoutubeIcon w=\"24px\" h=\"24px\" />\n          </Link>\n        </Flex>\n      </Container>\n    </Flex>\n  );\n};\n","import { FC } from 'react';\nimport { Box, Container, Flex } from '@chakra-ui/react';\nimport { Outlet } from 'react-router-dom';\nimport Header from './Header';\nimport { Footer } from './Footer';\n\nexport const DefaultLayout: FC = () => (\n  <Box\n    as=\"main\"\n    minHeight=\"100vh\"\n    color=\"rgba(255,255,255,0.85)\"\n    display=\"flex\"\n    flexDirection=\"column\"\n    bg=\"navy.900\"\n  >\n    <Flex flex=\"1\" flexDirection=\"column\">\n      <Header />\n      <Container display=\"flex\" flexDir=\"column\" maxW=\"1236px\" flex=\"1\">\n        <Outlet />\n      </Container>\n      <Footer />\n    </Flex>\n  </Box>\n);\n","import { Flex, Heading, Link } from '@chakra-ui/react';\nimport Head from 'react-helmet';\nimport { useTranslation } from 'react-i18next';\nimport { Link as NavLink } from 'react-router-dom';\n\nexport const NotFoundPage = () => {\n  const { t } = useTranslation();\n\n  return (\n    <>\n      <Head>\n        <title>{t('not-found.page-title')}</title>\n      </Head>\n      <Flex\n        height=\"100%\"\n        direction=\"column\"\n        position=\"relative\"\n        alignItems=\"center\"\n        justifyContent=\"center\"\n        flex=\"1\"\n      >\n        <Heading fontSize=\"5xl\">Not found</Heading>\n\n        <NavLink to=\"/\">\n          <Link color=\"cyan.500\">Return to Home</Link>\n        </NavLink>\n      </Flex>\n    </>\n  );\n};\n","import { Alert, AlertIcon, AlertProps, Text } from '@chakra-ui/react';\nimport Wei from '@synthetixio/wei';\n\ninterface CollateralAlertProps extends AlertProps {\n  tokenBalance: Wei;\n}\n\nexport const CollateralAlert = ({ tokenBalance, ...props }: CollateralAlertProps) => {\n  return (\n    <Alert borderLeftColor=\"cyan.500\" borderRadius=\"6px\" {...props}>\n      <AlertIcon color=\"cyan.500\" />\n      <Text color=\"white\" fontFamily=\"heading\" fontSize=\"16px\" lineHeight=\"24px\">\n        You have a {tokenBalance.toString(2)} SNX active staking position on V2.\n        <Text as=\"span\" color=\"cyan.500\" cursor=\"pointer\">\n          &nbsp;Migrate to V3\n        </Text>\n      </Text>\n    </Alert>\n  );\n};\n","import {\n  Modal,\n  ModalOverlay,\n  ModalContent,\n  ModalHeader,\n  Text,\n  Divider,\n  Button,\n} from '@chakra-ui/react';\nimport { Link } from 'react-router-dom';\n\nexport const UnsupportedCollateralAlert = ({ isOpen }: { isOpen: boolean }) => {\n  return (\n    <Modal isOpen={isOpen} onClose={() => {}}>\n      <ModalOverlay />\n      <ModalContent p={6} borderWidth=\"1px\" borderColor=\"gray.900\" mt=\"17.5%\" bg=\"navy.700\">\n        <ModalHeader p={0}>Collateral Not Supported</ModalHeader>\n        <Divider my={6} />\n        <Text color=\"white\" fontFamily=\"heading\" fontSize=\"14px\" lineHeight=\"20px\">\n          This collateral is not supported on this network. Go back to your dashboard to see your\n          active positions on this network.\n        </Text>\n        <Button\n          as={Link}\n          mt={6}\n          to={{\n            pathname: '/dashboard',\n            search: location.search,\n          }}\n        >\n          Back to Dashboard\n        </Button>\n      </ModalContent>\n    </Modal>\n  );\n};\n","import { importSynthTokens } from '@snx-v3/contracts';\nimport { Network, useNetwork } from '@snx-v3/useBlockchain';\nimport { useQuery } from '@tanstack/react-query';\n\nexport function useSynthTokens(customNetwork?: Network) {\n  const { network } = useNetwork();\n  const targetNetwork = customNetwork || network;\n\n  return useQuery({\n    queryKey: [`${targetNetwork?.id}-${targetNetwork?.preset}`, 'SynthTokens'],\n    enabled: Boolean(targetNetwork),\n    queryFn: async function () {\n      if (!targetNetwork) throw new Error('OMFG');\n      return importSynthTokens(targetNetwork.id, targetNetwork.preset);\n    },\n    staleTime: Infinity,\n    // On some chains this is not available, and that is expected\n    throwOnError: false,\n  });\n}\n","export async function importSynthTokens(chainId, preset) {\n  if (!preset) {\n    throw new Error(`Missing preset`);\n  }\n  const deployment = `${Number(chainId).toFixed(0)}-${preset}`;\n  switch (deployment) {\n    case '1-main': {\n      const [{ default: synthTokens }] = await Promise.all([\n        import('@synthetixio/v3-contracts/1-main/synthTokens.json'),\n      ]);\n      return synthTokens;\n    }\n    case '11155111-main': {\n      const [{ default: synthTokens }] = await Promise.all([\n        import('@synthetixio/v3-contracts/11155111-main/synthTokens.json'),\n      ]);\n      return synthTokens;\n    }\n    case '10-main': {\n      const [{ default: synthTokens }] = await Promise.all([\n        import('@synthetixio/v3-contracts/10-main/synthTokens.json'),\n      ]);\n      return synthTokens;\n    }\n    case '8453-andromeda': {\n      const [{ default: synthTokens }] = await Promise.all([\n        import('@synthetixio/v3-contracts/8453-andromeda/synthTokens.json'),\n      ]);\n      return synthTokens;\n    }\n    case '84532-andromeda': {\n      const [{ default: synthTokens }] = await Promise.all([\n        import('@synthetixio/v3-contracts/84532-andromeda/synthTokens.json'),\n      ]);\n      return synthTokens;\n    }\n    case '42161-main': {\n      const [{ default: synthTokens }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-main/synthTokens.json'),\n      ]);\n      return synthTokens;\n    }\n    case '421614-main': {\n      const [{ default: synthTokens }] = await Promise.all([\n        import('@synthetixio/v3-contracts/421614-main/synthTokens.json'),\n      ]);\n      return synthTokens;\n    }\n    default: {\n      throw new Error(`Unsupported deployment ${deployment} for SynthTokens`);\n    }\n  }\n}\n","import { importRewardsDistributors } from '@snx-v3/contracts';\nimport { Network, useNetwork } from '@snx-v3/useBlockchain';\nimport { useQuery } from '@tanstack/react-query';\n\nexport function useRewardsDistributors(customNetwork?: Network) {\n  const { network } = useNetwork();\n  const targetNetwork = customNetwork || network;\n\n  return useQuery({\n    queryKey: [`${targetNetwork?.id}-${targetNetwork?.preset}`, 'RewardsDistributors'],\n    enabled: Boolean(targetNetwork),\n    queryFn: async function () {\n      if (!targetNetwork) throw new Error('OMFG');\n      return importRewardsDistributors(targetNetwork.id, targetNetwork.preset);\n    },\n    staleTime: Infinity,\n    // On some chains this is not available, and that is expected\n    throwOnError: false,\n  });\n}\n","export async function importRewardsDistributors(chainId, preset) {\n  if (!preset) {\n    throw new Error(`Missing preset`);\n  }\n  const deployment = `${Number(chainId).toFixed(0)}-${preset}`;\n  switch (deployment) {\n    case '1-main': {\n      const [{ default: rewardsDistributors }] = await Promise.all([\n        import('@synthetixio/v3-contracts/1-main/rewardsDistributors.json'),\n      ]);\n      return rewardsDistributors;\n    }\n    case '11155111-main': {\n      const [{ default: rewardsDistributors }] = await Promise.all([\n        import('@synthetixio/v3-contracts/11155111-main/rewardsDistributors.json'),\n      ]);\n      return rewardsDistributors;\n    }\n    case '10-main': {\n      const [{ default: rewardsDistributors }] = await Promise.all([\n        import('@synthetixio/v3-contracts/10-main/rewardsDistributors.json'),\n      ]);\n      return rewardsDistributors;\n    }\n    case '8453-andromeda': {\n      const [{ default: rewardsDistributors }] = await Promise.all([\n        import('@synthetixio/v3-contracts/8453-andromeda/rewardsDistributors.json'),\n      ]);\n      return rewardsDistributors;\n    }\n    case '84532-andromeda': {\n      const [{ default: rewardsDistributors }] = await Promise.all([\n        import('@synthetixio/v3-contracts/84532-andromeda/rewardsDistributors.json'),\n      ]);\n      return rewardsDistributors;\n    }\n    case '42161-main': {\n      const [{ default: rewardsDistributors }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-main/rewardsDistributors.json'),\n      ]);\n      return rewardsDistributors;\n    }\n    case '421614-main': {\n      const [{ default: rewardsDistributors }] = await Promise.all([\n        import('@synthetixio/v3-contracts/421614-main/rewardsDistributors.json'),\n      ]);\n      return rewardsDistributors;\n    }\n    default: {\n      throw new Error(`Unsupported deployment ${deployment} for RewardsDistributors`);\n    }\n  }\n}\n","import { getSubgraphUrl } from '@snx-v3/constants';\nimport { useNetwork, useProvider } from '@snx-v3/useBlockchain';\nimport { useCollateralType } from '@snx-v3/useCollateralTypes';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { useMulticall3 } from '@snx-v3/useMulticall3';\nimport { useRewardsDistributors } from '@snx-v3/useRewardsDistributors';\nimport { useSynthTokens } from '@snx-v3/useSynthTokens';\nimport { Wei, wei } from '@synthetixio/wei';\nimport { useQuery } from '@tanstack/react-query';\nimport { z } from 'zod';\nimport { contractsHash } from '@snx-v3/tsHelpers';\nimport { ethers } from 'ethers';\n\nconst RewardsResponseSchema = z.array(\n  z.object({\n    address: z.string(),\n    name: z.string(),\n    symbol: z.string(),\n    payoutTokenAddress: z.string(),\n    displaySymbol: z.string().optional(),\n    distributorAddress: z.string(),\n    decimals: z.number(),\n    claimableAmount: z.instanceof(Wei),\n    lifetimeClaimed: z.number(),\n  })\n);\n\nexport type RewardsResponseType = z.infer<typeof RewardsResponseSchema>;\n\nconst RewardsDataDocument = `\n  query RewardsData($accountId: String!, $distributor: String!) {\n    rewardsClaimeds(where: { distributor: $distributor, account: $accountId }) {\n      id\n      amount\n    }\n  }\n`;\n\nconst RewardsDistributionsDocument = `\n  query RewardsDistributions($distributor: String!) {\n    rewardsDistributions(where: { distributor: $distributor}) {\n      collateral_type\n      amount\n      duration\n      start\n      created_at\n    }\n  }\n`;\n\nexport function useRewards({\n  poolId,\n  collateralSymbol,\n  accountId,\n}: {\n  poolId?: string;\n  collateralSymbol?: string;\n  accountId?: string;\n}) {\n  const { data: collateralType } = useCollateralType(collateralSymbol);\n  const collateralAddress = collateralType?.tokenAddress;\n  const { network } = useNetwork();\n  const provider = useProvider();\n  const { data: synthTokens } = useSynthTokens();\n\n  const { data: Multicall3 } = useMulticall3(network);\n  const { data: CoreProxy } = useCoreProxy(network);\n  const { data: rewardsDistributors } = useRewardsDistributors(network);\n\n  // We need to filter the distributors, so we only query for this particular collateral type\n  // Also include all pool level distributors\n  const filteredDistributors =\n    rewardsDistributors && collateralAddress\n      ? rewardsDistributors\n          .filter((distributor) => distributor.isRegistered)\n          .filter(\n            (distributor) =>\n              !distributor.collateralType ||\n              (distributor.collateralType &&\n                distributor.collateralType.address.toLowerCase() ===\n                  collateralAddress.toLowerCase())\n          )\n      : [];\n\n  return useQuery({\n    enabled: Boolean(\n      network &&\n        CoreProxy &&\n        Multicall3 &&\n        rewardsDistributors &&\n        poolId &&\n        collateralAddress &&\n        accountId &&\n        synthTokens\n    ),\n    queryKey: [\n      `${network?.id}-${network?.preset}`,\n      'Rewards',\n      { accountId },\n      { collateralAddress },\n      {\n        contractsHash: contractsHash([\n          CoreProxy,\n          Multicall3,\n          ...filteredDistributors,\n          ...(synthTokens ?? []),\n        ]),\n      },\n    ],\n    queryFn: async () => {\n      if (\n        !(\n          network &&\n          CoreProxy &&\n          Multicall3 &&\n          filteredDistributors &&\n          poolId &&\n          collateralAddress &&\n          accountId\n        )\n      ) {\n        throw new Error('OMG');\n      }\n\n      if (filteredDistributors.length === 0) return [];\n\n      try {\n        const returnData = await Promise.all([\n          // Historical data for account id / distributor address pair\n          ...filteredDistributors.map((distributor) =>\n            fetch(getSubgraphUrl(network?.name), {\n              method: 'POST',\n              body: JSON.stringify({\n                query: RewardsDataDocument,\n                variables: { accountId, distributor: distributor.address.toLowerCase() },\n              }),\n            }).then((res) => res.json())\n          ),\n          // Metadata for each distributor\n          ...filteredDistributors.map((distributor) =>\n            fetch(getSubgraphUrl(network?.name), {\n              method: 'POST',\n              body: JSON.stringify({\n                query: RewardsDistributionsDocument,\n                variables: { distributor: distributor.address.toLowerCase() },\n              }),\n            }).then((res) => res.json())\n          ),\n        ]);\n\n        const historicalData = returnData.slice(0, filteredDistributors.length);\n        const metaData = returnData.slice(filteredDistributors.length);\n\n        const CoreProxyContract = new ethers.Contract(CoreProxy.address, CoreProxy.abi, provider);\n\n        // Get claimable amount for each distributor\n        const calls = filteredDistributors.map(({ address }: { address: string }) =>\n          CoreProxyContract.populateTransaction.getAvailableRewards(\n            ethers.BigNumber.from(accountId),\n            ethers.BigNumber.from(poolId),\n            collateralAddress.toLowerCase(),\n            address.toLowerCase()\n          )\n        );\n\n        const txs = await Promise.all(calls);\n\n        const multicallData = txs.map((tx) => ({\n          target: CoreProxy.address,\n          callData: tx.data,\n        }));\n\n        const Multicall3Contract = new ethers.Contract(\n          Multicall3.address,\n          Multicall3.abi,\n          provider\n        );\n        const data = await Multicall3Contract.callStatic.aggregate(multicallData);\n\n        const amounts = data.returnData.map((data: string) => {\n          const amount = CoreProxyContract.interface.decodeFunctionResult(\n            'getAvailableRewards',\n            data\n          )[0];\n          return wei(amount);\n        });\n\n        const results: RewardsResponseType = filteredDistributors.map((item: any, i: number) => {\n          // Amount claimable for this distributor\n          const claimableAmount = amounts[i];\n          const historicalClaims = historicalData[i]?.data?.rewardsClaimeds;\n          const distributions = metaData[i]?.data?.rewardsDistributions;\n          const symbol = item.payoutToken.symbol;\n          const synthToken = synthTokens?.find(\n            (synth) => synth.address.toUpperCase() === item.payoutToken.address?.toUpperCase()\n          );\n          const displaySymbol = synthToken ? synthToken?.symbol.slice(1) : symbol;\n\n          if (!distributions || !distributions.length) {\n            return {\n              address: item.address,\n              name: item.name,\n              symbol,\n              displaySymbol,\n              distributorAddress: item.address,\n              decimals: item.payoutToken.decimals,\n              payoutTokenAddress: item.payoutToken.address,\n              claimableAmount: wei(0),\n              lifetimeClaimed: historicalClaims\n                ? historicalClaims\n                    .reduce(\n                      (acc: Wei, item: { amount: string }) => acc.add(wei(item.amount, 18, true)),\n                      wei(0)\n                    )\n                    .toNumber()\n                : 0,\n            };\n          }\n\n          return {\n            address: item.address,\n            name: item.name,\n            symbol,\n            displaySymbol,\n            distributorAddress: item.address,\n            decimals: item.payoutToken.decimals,\n            payoutTokenAddress: item.payoutToken.address,\n            claimableAmount,\n            lifetimeClaimed: historicalClaims\n              .reduce(\n                (acc: Wei, item: { amount: string }) => acc.add(wei(item.amount, 18, true)),\n                wei(0)\n              )\n              .toNumber(),\n          };\n        });\n\n        const sortedBalances = results.sort(\n          (a, b) => b.claimableAmount.toNumber() - a.claimableAmount.toNumber()\n        );\n\n        return RewardsResponseSchema.parse(sortedBalances);\n      } catch (error) {\n        console.error(error);\n        return [];\n      }\n    },\n  });\n}\n","export function etherscanLink({\n  chain,\n  address,\n  isTx = false,\n}: {\n  chain: string;\n  address: string;\n  isTx?: boolean;\n}): string {\n  switch (chain) {\n    case 'sepolia':\n      return `https://sepolia.etherscan.io/${isTx ? 'tx' : 'address'}/${address}`;\n    case 'arbitrum':\n      return `https://arbiscan.io/${isTx ? 'tx' : 'address'}/${address}`;\n    case 'optimism':\n      return `https://optimistic.etherscan.io/${isTx ? 'tx' : 'address'}/${address}`;\n    case 'base':\n      return `https://basescan.org/${isTx ? 'tx' : 'address'}/${address}`;\n    case 'base-sepolia':\n      return `https://sepolia.basescan.org/${isTx ? 'tx' : 'address'}/${address}`;\n    case 'mainnet':\n    default:\n      return `https://etherscan.io/${isTx ? 'tx' : 'address'}/${address}`;\n  }\n}\n","import { Alert, AlertIcon, Text } from '@chakra-ui/react';\n\nexport function WithdrawIncrease() {\n  return (\n    <Alert borderRadius=\"6px\" status=\"warning\" mb=\"6\">\n      <AlertIcon />\n      <Text>This action will reset the withdrawal waiting period to 24 hours</Text>\n    </Alert>\n  );\n}\n","import { CheckIcon } from '@chakra-ui/icons';\nimport {\n  Button,\n  CircularProgress,\n  Divider,\n  Flex,\n  Link,\n  Modal,\n  ModalBody,\n  ModalContent,\n  ModalOverlay,\n  Text,\n} from '@chakra-ui/react';\nimport { Amount } from '@snx-v3/Amount';\nimport { etherscanLink } from '@snx-v3/etherscanLink';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { WithdrawIncrease } from '@snx-v3/WithdrawIncrease';\nimport { wei } from '@synthetixio/wei';\nimport { useEffect, useState } from 'react';\n\ninterface AllRewardsModalInterface {\n  rewards: { collateralSymbol?: string; amount?: number }[];\n  txnStatus?: string;\n  txnHash: string | null;\n}\n\nexport const AllRewardsModal = ({ rewards, txnStatus, txnHash }: AllRewardsModalInterface) => {\n  const [isOpen, setIsOpen] = useState(false);\n\n  const { network } = useNetwork();\n\n  useEffect(() => {\n    if (txnStatus === 'prompting') {\n      setIsOpen(true);\n    }\n    if (txnStatus === 'error') {\n      setIsOpen(false);\n    }\n    if (txnStatus === 'success') {\n      setTimeout(() => {\n        setIsOpen(false);\n      }, 1200);\n    }\n  }, [txnStatus]);\n\n  return (\n    <Modal isOpen={isOpen} onClose={() => setIsOpen(false)}>\n      <ModalOverlay bg=\"#06061B80\" />\n      <ModalContent\n        bg=\"navy.700\"\n        mt=\"10%\"\n        borderWidth=\"1px\"\n        borderColor=\"gray.900\"\n        minWidth=\"384px\"\n      >\n        <ModalBody p={6}>\n          <Text color=\"gray.50\" fontSize=\"20px\" fontWeight={700}>\n            Claiming Rewards\n          </Text>\n\n          <Divider my={4} />\n\n          <Flex\n            position=\"relative\"\n            alignItems=\"center\"\n            gap={4}\n            mb={6}\n            rounded=\"lg\"\n            mt=\"6\"\n            p=\"4\"\n            border=\"2px solid\"\n            transitionProperty=\"border-color\"\n            transitionDuration=\"normal\"\n            borderColor={txnStatus === 'success' ? 'green.500' : 'gray.900'}\n          >\n            <Flex\n              justifyContent=\"center\"\n              alignItems=\"center\"\n              borderRadius=\"100px\"\n              bg={txnStatus === 'success' ? 'green.600' : 'gray.900'}\n              width=\"40px\"\n              height=\"40px\"\n              p={3}\n            >\n              {txnStatus === 'success' ? (\n                <CheckIcon color=\"white\" />\n              ) : (\n                <CircularProgress size=\"25px\" isIndeterminate color=\"gray.700\" />\n              )}\n            </Flex>\n            <Flex\n              flexDirection=\"column\"\n              alignItems=\"space-between\"\n              justifyContent=\"space-between\"\n              ml={2}\n            >\n              {rewards.map(({ collateralSymbol, amount }) => (\n                <Text\n                  key={collateralSymbol}\n                  fontSize=\"14px\"\n                  fontWeight={700}\n                  lineHeight=\"20px\"\n                  color=\"white\"\n                >\n                  <Amount\n                    value={wei(amount)}\n                    prefix=\"Claiming \"\n                    suffix={collateralSymbol ? ` ${collateralSymbol}` : undefined}\n                  />\n                </Text>\n              ))}\n              <Text fontSize=\"12px\" lineHeight=\"16px\" color=\"gray.500\">\n                Claim your rewards\n              </Text>\n            </Flex>\n          </Flex>\n          <WithdrawIncrease />\n          {txnStatus === 'success' && (\n            <Button\n              mt={5}\n              variant=\"solid\"\n              justifyContent=\"center\"\n              px={3}\n              py={3}\n              width=\"100%\"\n              textAlign=\"center\"\n            >\n              Done\n            </Button>\n          )}\n          {txnHash && (\n            <Flex\n              justifyContent=\"center\"\n              px={3}\n              py={3}\n              mt={6}\n              mb={1}\n              borderTop=\"1px solid\"\n              borderTopColor=\"gray.900\"\n            >\n              <Link\n                variant=\"outline\"\n                href={etherscanLink({ chain: network?.name || '', address: txnHash, isTx: true })}\n                fontFamily=\"heading\"\n                color=\"cyan.500\"\n                fontWeight={700}\n                lineHeight=\"20px\"\n                fontSize=\"14px\"\n                target=\"_blank\"\n                mt={3}\n              >\n                View Transaction\n              </Link>\n            </Flex>\n          )}\n        </ModalBody>\n      </ModalContent>\n    </Modal>\n  );\n};\n","import { Skeleton, SkeletonCircle, Td, Text, Tr } from '@chakra-ui/react';\n\nexport const RewardsLoading = () => (\n  <>\n    <Tr borderBottom=\"1px solid #2D2D38\">\n      <Td pl=\"16px\" border=\"none\">\n        <SkeletonCircle startColor=\"whiteAlpha.500\" endColor=\"whiteAlpha.200\" h=\"30px\" w=\"30px\" />\n      </Td>\n      <Td pl=\"16px\" border=\"none\">\n        <Skeleton startColor=\"whiteAlpha.500\" endColor=\"whiteAlpha.200\" height=\"30px\">\n          <Text mr={4}>Loading</Text>\n        </Skeleton>\n      </Td>\n      <Td textAlign=\"end\" pr=\"0px\" border=\"none\">\n        <Skeleton startColor=\"whiteAlpha.500\" endColor=\"whiteAlpha.200\" height=\"30px\">\n          <Text>Loading</Text>\n        </Skeleton>\n      </Td>\n    </Tr>\n    <Tr borderBottom=\"1px solid #2D2D38\">\n      <Td pl=\"16px\" border=\"none\">\n        <SkeletonCircle startColor=\"whiteAlpha.200\" endColor=\"whiteAlpha.500\" h=\"30px\" w=\"30px\" />\n      </Td>\n      <Td pl=\"16px\" border=\"none\">\n        <Skeleton startColor=\"whiteAlpha.200\" endColor=\"whiteAlpha.500\" height=\"30px\">\n          <Text mr={4}>Loading</Text>\n        </Skeleton>\n      </Td>\n      <Td textAlign=\"end\" pr=\"0px\" border=\"none\">\n        <Skeleton startColor=\"whiteAlpha.200\" endColor=\"whiteAlpha.500\" height=\"30px\">\n          <Text>Loading</Text>\n        </Skeleton>\n      </Td>\n    </Tr>\n    <Tr borderBottom=\"1px solid #2D2D38\">\n      <Td pl=\"16px\" border=\"none\">\n        <SkeletonCircle startColor=\"whiteAlpha.500\" endColor=\"whiteAlpha.200\" h=\"30px\" w=\"30px\" />\n      </Td>\n      <Td pl=\"16px\" border=\"none\">\n        <Skeleton startColor=\"whiteAlpha.500\" endColor=\"whiteAlpha.200\" height=\"30px\">\n          <Text mr={4}>Loading</Text>\n        </Skeleton>\n      </Td>\n      <Td textAlign=\"end\" pr=\"0px\" border=\"none\">\n        <Skeleton startColor=\"whiteAlpha.500\" endColor=\"whiteAlpha.200\" height=\"30px\">\n          <Text>Loading</Text>\n        </Skeleton>\n      </Td>\n    </Tr>\n  </>\n);\n","export const truncateAddress = (address: string, first = 5, last = 5) => {\n  if (address.length <= first + last) {\n    return address;\n  }\n  return `${address.slice(0, first)}...${address.slice(-last)}`;\n};\n\nexport const parseFloatWithCommas = (numberWithCommas: string) =>\n  parseFloat(numberWithCommas.replaceAll(',', ''));\n","import { Fade, Flex, Link, Td, Text, Tr } from '@chakra-ui/react';\nimport { Amount } from '@snx-v3/Amount';\nimport { etherscanLink } from '@snx-v3/etherscanLink';\nimport { truncateAddress } from '@snx-v3/formatters';\nimport { Tooltip } from '@snx-v3/Tooltip';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport Wei, { wei } from '@synthetixio/wei';\nimport { TokenIcon } from '../TokenIcon';\n\ninterface RewardsRowInterface {\n  displaySymbol?: string;\n  claimableAmount: Wei; // The immediate amount claimable as read from the contracts\n  lifetimeClaimed: number;\n  distributorAddress: string;\n}\n\nexport const RewardsRow = ({\n  displaySymbol,\n  claimableAmount,\n  lifetimeClaimed,\n  distributorAddress,\n}: RewardsRowInterface) => {\n  const { network } = useNetwork();\n\n  return (\n    <>\n      <Tr>\n        <Td display=\"flex\" alignItems=\"center\" px={4} py={3} border=\"none\" w=\"100%\">\n          <Fade in>\n            <TokenIcon height={30} width={30} symbol={displaySymbol} />\n          </Fade>\n          <Fade in>\n            <Flex flexDirection=\"column\" ml=\"12px\">\n              <Link\n                href={etherscanLink({\n                  chain: network?.name || 'mainnet',\n                  address: distributorAddress,\n                })}\n                target=\"_blank\"\n              >\n                <Tooltip label={`Distributed by ${truncateAddress(distributorAddress)}`}>\n                  <Text\n                    color=\"gray.50\"\n                    fontSize=\"14px\"\n                    fontFamily=\"heading\"\n                    fontWeight={500}\n                    lineHeight=\"20px\"\n                  >\n                    {displaySymbol}\n                  </Text>\n                </Tooltip>\n              </Link>\n            </Flex>\n          </Fade>\n        </Td>\n        <Td alignItems=\"center\" px={4} py={3} border=\"none\">\n          <Fade in>\n            <Text\n              color=\"gray.50\"\n              fontSize=\"14px\"\n              fontFamily=\"heading\"\n              fontWeight={500}\n              lineHeight=\"20px\"\n            >\n              <Amount value={claimableAmount} showTooltip />\n            </Text>\n            {lifetimeClaimed > 0 && (\n              <Text color=\"gray.500\" fontSize=\"12px\" fontFamily=\"heading\" lineHeight=\"16px\">\n                <Tooltip label=\"Total claimed over lifetime\">Lifetime: &nbsp;</Tooltip>\n                <Amount value={wei(lifetimeClaimed)} />\n              </Text>\n            )}\n          </Fade>\n        </Td>\n      </Tr>\n    </>\n  );\n};\n","import { InfoIcon } from '@chakra-ui/icons';\nimport {\n  Button,\n  Flex,\n  Table,\n  TableContainer,\n  Tbody,\n  Td,\n  Text,\n  Th,\n  Thead,\n  Tr,\n} from '@chakra-ui/react';\nimport { BorderBox } from '@snx-v3/BorderBox';\nimport { Tooltip } from '@snx-v3/Tooltip';\nimport { useClaimAllRewards } from '@snx-v3/useClaimAllRewards';\nimport { useCollateralType } from '@snx-v3/useCollateralTypes';\nimport { useParams } from '@snx-v3/useParams';\nimport { useRewards } from '@snx-v3/useRewards';\nimport React from 'react';\nimport { AllRewardsModal } from './AllRewardsModal';\nimport { RewardsLoading } from './RewardsLoading';\nimport { RewardsRow } from './RewardsRow';\n\nexport function Rewards() {\n  const params = useParams();\n  const { data: collateralType } = useCollateralType(params.collateralSymbol);\n  const { isPending, data: rewards } = useRewards({\n    poolId: params.poolId,\n    collateralSymbol: params.collateralSymbol,\n    accountId: params.accountId,\n  });\n\n  const allRewards = React.useMemo(\n    () =>\n      rewards\n        ?.map(({ distributorAddress, payoutTokenAddress, claimableAmount }) => ({\n          poolId: params.poolId || '',\n          collateralAddress: collateralType?.tokenAddress || '',\n          accountId: params.accountId,\n          distributorAddress: distributorAddress,\n          amount: claimableAmount,\n          payoutTokenAddress,\n        }))\n        .filter(({ amount }) => amount.gt(0)) || [],\n    [params.accountId, collateralType?.tokenAddress, params.poolId, rewards]\n  );\n\n  const { exec: claimAll, txnState } = useClaimAllRewards(allRewards);\n\n  return (\n    <BorderBox bg=\"navy.700\" py={4} px={4} flexDir=\"column\">\n      <AllRewardsModal\n        rewards={(rewards || [])\n          ?.filter((r) => r.claimableAmount.gt(0))\n          .map(({ claimableAmount, displaySymbol }) => ({\n            collateralSymbol: displaySymbol,\n            amount: claimableAmount.toNumber(),\n          }))}\n        txnStatus={txnState.txnStatus}\n        txnHash={txnState.txnHash}\n      />\n      <Flex alignItems=\"center\" justifyContent=\"space-between\">\n        <Text color=\"gray.500\" fontFamily=\"heading\" lineHeight=\"4\" fontSize=\"xs\" mb=\"8px\">\n          Rewards\n        </Text>\n        <Button\n          size=\"sm\"\n          variant=\"solid\"\n          isDisabled={!allRewards.length}\n          _disabled={{\n            bg: 'gray.900',\n            backgroundImage: 'none',\n            color: 'gray.500',\n            opacity: 0.5,\n            cursor: 'not-allowed',\n          }}\n          onClick={() => claimAll()}\n        >\n          Claim\n        </Button>\n      </Flex>\n\n      <TableContainer width=\"100%\" mb=\"8px\">\n        <Table>\n          <Thead>\n            <Tr borderBottom=\"1px solid #2D2D38\">\n              <Th\n                textTransform=\"unset\"\n                color=\"gray.600\"\n                border=\"none\"\n                fontFamily=\"heading\"\n                fontSize=\"12px\"\n                lineHeight=\"16px\"\n                letterSpacing={0.6}\n                fontWeight={700}\n                px={4}\n                py={3}\n              >\n                Rewards type\n                <Tooltip label=\"Total rewards active for the Pool\">\n                  <InfoIcon ml={1} mb=\"1px\" />\n                </Tooltip>\n              </Th>\n              <Th\n                textTransform=\"unset\"\n                color=\"gray.600\"\n                border=\"none\"\n                fontFamily=\"heading\"\n                fontSize=\"12px\"\n                lineHeight=\"16px\"\n                letterSpacing={0.6}\n                fontWeight={700}\n                px={4}\n                py={3}\n              >\n                Earnings\n              </Th>\n            </Tr>\n          </Thead>\n          <Tbody>\n            {!params.accountId ? (\n              <Tr>\n                <Td display=\"flex\" alignItems=\"left\" px={4} border=\"none\" w=\"100%\">\n                  <Text color=\"gray.500\" fontFamily=\"heading\" fontSize=\"xs\">\n                    Create a Position to see your earnings\n                  </Text>\n                </Td>\n              </Tr>\n            ) : null}\n\n            {params.accountId && isPending ? <RewardsLoading /> : null}\n\n            {params.accountId && !isPending && rewards && rewards.length === 0 ? (\n              <Tr>\n                <Td display=\"flex\" alignItems=\"left\" px={4} border=\"none\" w=\"100%\">\n                  <Text color=\"gray.500\" fontFamily=\"heading\" fontSize=\"xs\">\n                    No Rewards Available\n                  </Text>\n                </Td>\n              </Tr>\n            ) : null}\n\n            {params.accountId && !isPending && rewards && rewards.length > 0\n              ? rewards?.map((item) => (\n                  <RewardsRow\n                    key={item.address}\n                    displaySymbol={item.displaySymbol}\n                    claimableAmount={item.claimableAmount}\n                    lifetimeClaimed={item.lifetimeClaimed}\n                    distributorAddress={item.distributorAddress}\n                  />\n                ))\n              : null}\n          </Tbody>\n        </Table>\n      </TableContainer>\n    </BorderBox>\n  );\n}\n","import { useToast } from '@chakra-ui/react';\nimport { ContractError } from '@snx-v3/ContractError';\nimport { notNil } from '@snx-v3/tsHelpers';\nimport { initialState, reducer } from '@snx-v3/txnReducer';\nimport { useNetwork, useProvider, useSigner } from '@snx-v3/useBlockchain';\nimport { useCollateralPriceUpdates } from '@snx-v3/useCollateralPriceUpdates';\nimport { useContractErrorParser } from '@snx-v3/useContractErrorParser';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { formatGasPriceForTransaction } from '@snx-v3/useGasOptions';\nimport { getGasPrice } from '@snx-v3/useGasPrice';\nimport { useGasSpeed } from '@snx-v3/useGasSpeed';\nimport { useSpotMarketProxy } from '@snx-v3/useSpotMarketProxy';\nimport { useSynthTokens } from '@snx-v3/useSynthTokens';\nimport { withERC7412 } from '@snx-v3/withERC7412';\nimport Wei from '@synthetixio/wei';\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\nimport React from 'react';\n\nexport function useClaimAllRewards(\n  rewards: {\n    poolId?: string;\n    collateralAddress?: string;\n    accountId?: string;\n    distributorAddress?: string;\n    amount?: Wei;\n    payoutTokenAddress?: string;\n  }[]\n) {\n  const toast = useToast({ isClosable: true, duration: 9000 });\n\n  const { network } = useNetwork();\n  const { data: SpotMarketProxy } = useSpotMarketProxy();\n  const signer = useSigner();\n  const { data: CoreProxy } = useCoreProxy();\n  const [txnState, dispatch] = React.useReducer(reducer, initialState);\n  const client = useQueryClient();\n  const provider = useProvider();\n  const { gasSpeed } = useGasSpeed();\n  const { data: synthTokens } = useSynthTokens();\n  const { data: priceUpdateTx, refetch: refetchPriceUpdateTx } = useCollateralPriceUpdates();\n\n  const errorParser = useContractErrorParser();\n\n  const mutation = useMutation({\n    mutationFn: async function () {\n      try {\n        if (!signer || !network || !provider) throw new Error('No signer or network');\n        if (!rewards.filter(({ amount }) => amount?.gt(0)).length) return;\n        if (!CoreProxy) throw new Error('CoreProxy undefined');\n        if (!SpotMarketProxy) throw new Error('SpotMarketProxy undefined');\n        if (!synthTokens) throw new Error('synthTokens undefined');\n\n        dispatch({ type: 'prompting' });\n\n        const transactions: (Promise<ethers.PopulatedTransaction> | undefined)[] = [];\n\n        const CoreProxyContract = new ethers.Contract(CoreProxy.address, CoreProxy.abi, signer);\n        const SpotMarketProxyContract = new ethers.Contract(\n          SpotMarketProxy.address,\n          SpotMarketProxy.abi,\n          signer\n        );\n\n        rewards.forEach(\n          ({\n            poolId,\n            collateralAddress,\n            accountId,\n            distributorAddress,\n            amount,\n            payoutTokenAddress,\n          }) => {\n            transactions.push(\n              CoreProxyContract.populateTransaction.claimRewards(\n                ethers.BigNumber.from(accountId),\n                ethers.BigNumber.from(poolId),\n                collateralAddress,\n                distributorAddress\n              )\n            );\n\n            const synthToken = synthTokens.find(\n              (synth) => synth.address.toUpperCase() === payoutTokenAddress?.toUpperCase()\n            );\n            if (synthToken && amount && amount.gt(0)) {\n              transactions.push(\n                SpotMarketProxyContract.populateTransaction.unwrap(\n                  synthToken.synthMarketId,\n                  amount.toBN(),\n                  amount.toBN().sub(amount?.toBN().div(100))\n                )\n              );\n            }\n          }\n        );\n        const callsPromise = Promise.all(transactions.filter(notNil));\n        const walletAddress = await signer.getAddress();\n\n        const [calls, gasPrices] = await Promise.all([callsPromise, getGasPrice({ provider })]);\n\n        if (priceUpdateTx) {\n          calls.unshift(priceUpdateTx as any);\n        }\n\n        const { multicallTxn: erc7412Tx, gasLimit } = await withERC7412(\n          network,\n          calls,\n          'useClaimAllRewards',\n          walletAddress\n        );\n\n        const gasOptionsForTransaction = formatGasPriceForTransaction({\n          gasLimit,\n          gasPrices,\n          gasSpeed,\n        });\n        const tx = await signer.sendTransaction({ ...erc7412Tx, ...gasOptionsForTransaction });\n\n        dispatch({ type: 'pending', payload: { txnHash: tx.hash } });\n\n        const res = await tx.wait();\n\n        let claimedAmount: ethers.BigNumber | undefined;\n\n        res.logs.forEach((log: any) => {\n          if (log.topics[0] === CoreProxyContract.interface.getEventTopic('RewardsClaimed')) {\n            const { amount } = CoreProxyContract.interface.decodeEventLog(\n              'RewardsClaimed',\n              log.data,\n              log.topics\n            );\n            claimedAmount = amount;\n          }\n        });\n\n        dispatch({ type: 'success' });\n        client.invalidateQueries({\n          queryKey: [`${network?.id}-${network?.preset}`, 'Rewards'],\n        });\n\n        toast.closeAll();\n        toast({\n          title: 'Success',\n          description: 'Your rewards has been claimed.',\n          status: 'success',\n          duration: 5000,\n          variant: 'left-accent',\n        });\n\n        return claimedAmount;\n      } catch (error: any) {\n        const contractError = errorParser(error);\n        if (contractError) {\n          console.error(new Error(contractError.name), contractError);\n        }\n\n        dispatch({ type: 'error', payload: { error } });\n\n        toast.closeAll();\n        toast({\n          title: 'Claiming failed',\n          description: contractError ? (\n            <ContractError contractError={contractError} />\n          ) : (\n            'Please try again.'\n          ),\n          status: 'error',\n          variant: 'left-accent',\n          duration: 3_600_000,\n        });\n      }\n    },\n    onSuccess: () => {\n      // After mutation withERC7412, we guaranteed to have updated all the prices, dont care about await\n      refetchPriceUpdateTx();\n    },\n  });\n\n  return {\n    mutation,\n    txnState,\n    settle: () => dispatch({ type: 'settled' }),\n    isLoading: mutation.isPending,\n    exec: mutation.mutateAsync,\n  };\n}\n","import { Skeleton, SkeletonCircle, SkeletonProps } from '@chakra-ui/react';\n\ninterface SynthSkeletonProps extends SkeletonProps {\n  children: React.ReactNode;\n}\n\nexport const SynthSkeleton = ({ children, ...props }: SynthSkeletonProps) => {\n  return (\n    <Skeleton startColor=\"gray.700\" endColor=\"navy.800\" {...props}>\n      {children}\n    </Skeleton>\n  );\n};\n\nexport const SynthCircle = ({ children, ...props }: SkeletonProps) => {\n  return (\n    <SkeletonCircle startColor=\"gray.700\" endColor=\"navy.800\" {...props}>\n      {children}\n    </SkeletonCircle>\n  );\n};\n","import { InfoIcon } from '@chakra-ui/icons';\nimport { Flex, Text, Fade } from '@chakra-ui/react';\nimport { SynthSkeleton as Skeleton } from '../SynthSkeleton';\nimport { ReactNode } from 'react';\nimport { Tooltip } from '@snx-v3/Tooltip';\n\ninterface StatBoxProps {\n  isLoading: boolean;\n  title: string;\n  label?: string | ReactNode;\n  value?: ReactNode;\n}\n\nexport const StatBox = ({ isLoading, title, label, value }: StatBoxProps) => {\n  return (\n    <Flex\n      bg=\"navy.700\"\n      border=\"1px solid\"\n      borderColor=\"gray.900\"\n      rounded=\"base\"\n      flexDir=\"column\"\n      alignItems=\"center\"\n      justifyContent=\"space-between\"\n      minWidth=\"200px\"\n      flex={1}\n      height=\"88px\"\n      px={6}\n      py={4}\n    >\n      <Flex alignItems=\"center\" mb={1}>\n        <Text fontSize=\"14px\" color=\"gray.500\" mr={1}>\n          {title}\n        </Text>\n        {label && (\n          <Tooltip label={label} p={3} mt={1}>\n            <InfoIcon w=\"10px\" h=\"10px\" />\n          </Tooltip>\n        )}\n      </Flex>\n      <Flex w=\"100%\" justifyContent=\"center\" height=\"36px\" alignItems=\"center\">\n        <Skeleton\n          isLoaded={!isLoading}\n          height=\"24px\"\n          minWidth={isLoading ? '40%' : 'initial'}\n          startColor=\"gray.700\"\n          endColor=\"navy.800\"\n        >\n          <Fade in>\n            <Text\n              fontSize=\"24px\"\n              lineHeight=\"24px\"\n              fontWeight={800}\n              data-cy=\"stats box\"\n              data-title={title}\n            >\n              {value || '$0.00'}\n            </Text>\n          </Fade>\n        </Skeleton>\n      </Flex>\n    </Flex>\n  );\n};\n","import { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { stringToHash, contractsHash } from '@snx-v3/tsHelpers';\nimport {\n  Network,\n  useDefaultProvider,\n  useNetwork,\n  useProviderForChain,\n} from '@snx-v3/useBlockchain';\nimport { getPriceUpdates, getPythFeedIds } from '@snx-v3/useCollateralPriceUpdates';\nimport { useCollateralTypes } from '@snx-v3/useCollateralTypes';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { useGetUSDTokens } from '@snx-v3/useGetUSDTokens';\nimport { erc7412Call } from '@snx-v3/withERC7412';\nimport { ZodBigNumber } from '@snx-v3/zod';\nimport Wei, { wei } from '@synthetixio/wei';\nimport { useQuery } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\n\nconst PriceSchema = ZodBigNumber.transform((x) => wei(x));\n\nexport async function loadPrices({\n  CoreProxyContract,\n  collateralAddresses,\n}: {\n  CoreProxyContract: ethers.Contract;\n  collateralAddresses: string[];\n}) {\n  const calls = await Promise.all(\n    collateralAddresses.map((address) => {\n      return CoreProxyContract.populateTransaction.getCollateralPrice(address);\n    })\n  );\n  if (calls.length === 0) return { calls: [], decoder: () => [] };\n\n  const decoder = (multicallEncoded: string | string[]) => {\n    if (Array.isArray(multicallEncoded)) {\n      return multicallEncoded.map((encoded) => {\n        const pricesEncoded = CoreProxyContract.interface.decodeFunctionResult(\n          'getCollateralPrice',\n          encoded\n        )[0];\n\n        return PriceSchema.parse(pricesEncoded);\n      });\n    } else {\n      const pricesEncoded = CoreProxyContract.interface.decodeFunctionResult(\n        'getCollateralPrice',\n        multicallEncoded\n      )[0];\n      return PriceSchema.parse(pricesEncoded);\n    }\n  };\n  return { calls, decoder };\n}\n\nexport const useCollateralPrices = (customNetwork?: Network) => {\n  const { network } = useNetwork();\n  const { data: CoreProxy } = useCoreProxy(customNetwork);\n  const { data: collateralData } = useCollateralTypes(false, customNetwork);\n  const { data: usdTokens } = useGetUSDTokens(customNetwork);\n\n  const targetNetwork = customNetwork || network;\n  const isBase = isBaseAndromeda(targetNetwork?.id, targetNetwork?.preset);\n\n  const collateralAddresses =\n    isBase && usdTokens?.sUSD\n      ? collateralData?.map((x) => x.tokenAddress).concat(usdTokens.sUSD)\n      : collateralData?.map((x) => x.tokenAddress);\n\n  const connectedProvider = useDefaultProvider();\n  const offlineProvider = useProviderForChain(customNetwork);\n\n  const provider = customNetwork ? offlineProvider : connectedProvider;\n\n  return useQuery({\n    enabled: Boolean(CoreProxy && collateralAddresses && collateralAddresses?.length > 0),\n    queryKey: [\n      `${targetNetwork?.id}-${targetNetwork?.preset}`,\n      'CollateralPrices',\n      {\n        collaterals: stringToHash(collateralAddresses?.sort().join()),\n        contractsHash: contractsHash([CoreProxy]),\n      },\n    ],\n    queryFn: async () => {\n      if (\n        !CoreProxy ||\n        !collateralAddresses ||\n        collateralAddresses.length == 0 ||\n        !targetNetwork ||\n        !provider\n      ) {\n        throw 'useCollateralPrices missing required data';\n      }\n\n      const CoreProxyContract = new ethers.Contract(CoreProxy.address, CoreProxy.abi, provider);\n      const { calls, decoder } = await loadPrices({\n        CoreProxyContract,\n        collateralAddresses,\n      });\n\n      const allCalls = [...calls];\n\n      const priceUpdateTx = (await getPriceUpdates(\n        (await getPythFeedIds(targetNetwork)) as string[],\n        targetNetwork\n      ).catch(() => undefined)) as any;\n      if (priceUpdateTx) {\n        allCalls.unshift(priceUpdateTx);\n      }\n\n      const prices = await erc7412Call(\n        targetNetwork,\n        provider,\n        allCalls,\n        decoder,\n        'useCollateralPrices'\n      );\n\n      return collateralAddresses.reduce((acc: Record<string, Wei | undefined>, address, i) => {\n        if (Array.isArray(prices)) {\n          acc[address] = prices[i];\n        } else {\n          acc[address] = prices;\n        }\n        return acc;\n      }, {});\n    },\n  });\n};\n","export function keyBy<T extends Record<K, PropertyKey>, K extends keyof T>(key: K, array: T[]) {\n  return array.reduce(\n    (acc, item) => {\n      const keyValue = item[key];\n      acc[keyValue] = item;\n      return acc;\n    },\n    {} as Record<T[K], T>\n  );\n}\n","import { contractsHash } from '@snx-v3/tsHelpers';\nimport { AccountCollateralType, loadAccountCollateral } from '@snx-v3/useAccountCollateral';\nimport { useNetwork, useProviderForChain } from '@snx-v3/useBlockchain';\nimport { loadPrices } from '@snx-v3/useCollateralPrices';\nimport { getPriceUpdates, getPythFeedIds } from '@snx-v3/useCollateralPriceUpdates';\nimport { useCollateralTypes } from '@snx-v3/useCollateralTypes';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { useSystemToken } from '@snx-v3/useSystemToken';\nimport { erc7412Call } from '@snx-v3/withERC7412';\nimport { ZodBigNumber } from '@snx-v3/zod';\nimport Wei, { wei } from '@synthetixio/wei';\nimport { useQuery } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\nimport { z } from 'zod';\n\nconst PositionCollateralSchema = z.object({\n  value: ZodBigNumber.transform((x) => wei(x)).optional(),\n  amount: ZodBigNumber.transform((x) => wei(x)),\n});\n\nconst DebtSchema = ZodBigNumber.transform((x) => wei(x));\n\nexport const loadPosition = async ({\n  CoreProxyContract,\n  accountId,\n  poolId,\n  tokenAddress,\n}: {\n  CoreProxyContract: ethers.Contract;\n  accountId: string;\n  poolId: string;\n  tokenAddress: string;\n}) => {\n  const calls = await Promise.all([\n    CoreProxyContract.populateTransaction.getPositionCollateral(accountId, poolId, tokenAddress),\n    CoreProxyContract.populateTransaction.getPositionDebt(accountId, poolId, tokenAddress),\n  ]);\n\n  const decoder = (multicallEncoded: string | string[]) => {\n    if (Array.isArray(multicallEncoded) && multicallEncoded.length === 2) {\n      const decodedCollateral = CoreProxyContract.interface.decodeFunctionResult(\n        'getPositionCollateral',\n        multicallEncoded[0]\n      );\n      const decodedDebt = CoreProxyContract.interface.decodeFunctionResult(\n        'getPositionDebt',\n        multicallEncoded[1]\n      )[0];\n      return {\n        debt: DebtSchema.parse(decodedDebt),\n        collateral: PositionCollateralSchema.parse({ ...decodedCollateral }),\n      };\n    }\n    throw Error('Expected array with two items');\n  };\n\n  return { calls, decoder };\n};\n\nexport type LiquidityPosition = {\n  collateralAmount: Wei;\n  collateralPrice: Wei;\n  collateralValue: Wei;\n  debt: Wei;\n  accountCollateral: AccountCollateralType;\n  usdCollateral: AccountCollateralType;\n  tokenAddress: string;\n  accountId: string;\n};\n\nexport const useLiquidityPosition = ({\n  tokenAddress,\n  accountId,\n  poolId,\n}: {\n  tokenAddress?: string;\n  accountId?: string;\n  poolId?: string;\n}) => {\n  const { data: CoreProxy } = useCoreProxy();\n  const { data: systemToken } = useSystemToken();\n  const { network } = useNetwork();\n  const provider = useProviderForChain(network);\n  const { data: collateralTypes } = useCollateralTypes(true);\n\n  return useQuery({\n    queryKey: [\n      `${network?.id}-${network?.preset}`,\n      'LiquidityPosition',\n      { accountId },\n      {\n        pool: poolId,\n        token: tokenAddress,\n      },\n      { contractsHash: contractsHash([CoreProxy, systemToken]) },\n    ],\n    enabled: Boolean(\n      CoreProxy && accountId && poolId && tokenAddress && systemToken && network && provider\n    ),\n    queryFn: async () => {\n      if (\n        !(CoreProxy && accountId && poolId && tokenAddress && systemToken && network && provider)\n      ) {\n        throw Error('useLiquidityPosition not ready');\n      }\n      const CoreProxyContract = new ethers.Contract(CoreProxy.address, CoreProxy.abi, provider);\n      const { calls: priceCalls, decoder: priceDecoder } = await loadPrices({\n        collateralAddresses: [tokenAddress],\n        CoreProxyContract,\n      });\n\n      const { calls: positionCalls, decoder: positionDecoder } = await loadPosition({\n        CoreProxyContract,\n        accountId,\n        poolId,\n        tokenAddress,\n      });\n\n      const { calls: accountCollateralCalls, decoder: accountCollateralDecoder } =\n        await loadAccountCollateral({\n          accountId,\n          tokenAddresses: [tokenAddress, systemToken.address],\n          provider,\n          CoreProxy,\n        });\n\n      const allCalls = priceCalls.concat(positionCalls).concat(accountCollateralCalls);\n\n      const priceUpdateTx = (await getPriceUpdates(\n        (await getPythFeedIds(network)) as string[],\n        network\n      ).catch(() => undefined)) as any;\n      if (priceUpdateTx) {\n        allCalls.unshift(priceUpdateTx);\n      }\n\n      return await erc7412Call(\n        network,\n        provider,\n        allCalls,\n        (encoded) => {\n          if (!Array.isArray(encoded)) throw Error('Expected array');\n\n          const startOfPrice = 0;\n          const endOfPrice = priceCalls.length;\n          const startOfPosition = endOfPrice;\n          const endOfPosition = startOfPosition + positionCalls.length;\n\n          const startOfAccountCollateral = endOfPosition;\n          const collateralPrice = priceDecoder(encoded.slice(startOfPrice, endOfPrice));\n          const decodedPosition = positionDecoder(encoded.slice(startOfPosition, endOfPosition));\n          const [accountCollateral, usdCollateral] = accountCollateralDecoder(\n            encoded.slice(startOfAccountCollateral)\n          );\n\n          const collateralType = collateralTypes?.find(\n            (x) => x.tokenAddress.toLowerCase() === accountCollateral.tokenAddress.toLowerCase()\n          );\n          if (collateralType) {\n            accountCollateral.symbol = collateralType.symbol;\n            accountCollateral.displaySymbol = collateralType.displaySymbol;\n            accountCollateral.decimals = collateralType.decimals;\n          }\n\n          return {\n            collateralPrice: Array.isArray(collateralPrice) ? collateralPrice[0] : collateralPrice,\n            collateralAmount: decodedPosition.collateral.amount,\n            collateralValue: decodedPosition.collateral.amount.mul(collateralPrice),\n            debt: decodedPosition.debt,\n            tokenAddress,\n            accountCollateral,\n            usdCollateral,\n            accountId,\n          };\n        },\n        `useLiquidityPosition`\n      );\n    },\n  });\n};\n","import { calculateCRatio } from '@snx-v3/calculations';\nimport { keyBy, stringToHash, contractsHash } from '@snx-v3/tsHelpers';\nimport { useNetwork, useProviderForChain } from '@snx-v3/useBlockchain';\nimport { loadPrices } from '@snx-v3/useCollateralPrices';\nimport { getPriceUpdates, getPythFeedIds } from '@snx-v3/useCollateralPriceUpdates';\nimport { CollateralType, useCollateralTypes } from '@snx-v3/useCollateralTypes';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { loadPosition } from '@snx-v3/useLiquidityPosition';\nimport { usePools } from '@snx-v3/usePools';\nimport { erc7412Call } from '@snx-v3/withERC7412';\nimport Wei, { wei } from '@synthetixio/wei';\nimport { useQuery } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\n\nexport type LiquidityPositionType = {\n  id: `${string}-${string}`;\n  accountId: string;\n  poolId: string;\n  isPreferred: boolean;\n  poolName: string;\n  collateralAmount: Wei;\n  collateralPrice: Wei;\n  collateralValue: Wei;\n  collateralType: CollateralType;\n  availableCollateral: Wei;\n  cRatio: Wei;\n  debt: Wei;\n};\n\nfunction toPairs<T>(array: T[]): [T, T][] {\n  return Array.from(\n    { length: array.length / 2 },\n    (_, i) => [array[i * 2], array[i * 2 + 1]] as [T, T]\n  );\n}\n\nexport const useLiquidityPositions = ({ accountId }: { accountId?: string }) => {\n  const { data: CoreProxy } = useCoreProxy();\n  const { data: pools } = usePools();\n  const { data: collateralTypes } = useCollateralTypes();\n\n  const { network } = useNetwork();\n  const provider = useProviderForChain(network!);\n\n  return useQuery({\n    queryKey: [\n      `${network?.id}-${network?.preset}`,\n      'LiquidityPositions',\n      { accountId },\n      {\n        pools: stringToHash((pools ? pools.map((pool) => pool.id).sort() : []).join()),\n        contractsHash: contractsHash([CoreProxy, ...(collateralTypes || [])]),\n      },\n    ],\n    staleTime: 60_000 * 5,\n    enabled: Boolean(network && provider && CoreProxy && accountId && collateralTypes && pools),\n    queryFn: async () => {\n      if (!(network && provider && CoreProxy && accountId && collateralTypes && pools))\n        throw 'OMFG';\n\n      const CoreProxyContract = new ethers.Contract(CoreProxy.address, CoreProxy.abi, provider);\n\n      const positionCallsAndDataNested = await Promise.all(\n        pools.map(async ({ id: poolId, name: poolName, isPreferred }) =>\n          Promise.all(\n            collateralTypes.map(async (collateralType) => {\n              const { calls, decoder } = await loadPosition({\n                CoreProxyContract,\n                accountId,\n                poolId,\n                tokenAddress: collateralType.tokenAddress,\n              });\n              return { calls, decoder, poolName, collateralType, poolId, isPreferred };\n            })\n          )\n        )\n      );\n\n      const positionCallsAndData = positionCallsAndDataNested.flat();\n\n      const { calls: priceCalls, decoder: priceDecoder } = await loadPrices({\n        collateralAddresses: collateralTypes.map((x) => x.tokenAddress),\n        CoreProxyContract,\n      });\n\n      const positionCalls = positionCallsAndData.map((x) => x.calls).flat();\n\n      const availableCollateralCalls = await Promise.all(\n        collateralTypes.map(\n          (collateralType) =>\n            CoreProxyContract.populateTransaction.getAccountAvailableCollateral(\n              accountId,\n              collateralType.tokenAddress\n            ),\n          []\n        )\n      );\n\n      const allCalls = priceCalls.concat(positionCalls).concat(availableCollateralCalls);\n      const singlePositionDecoder = positionCallsAndData.at(0)?.decoder;\n\n      const priceUpdateTx = (await getPriceUpdates(\n        (await getPythFeedIds(network)) as string[],\n        network\n      ).catch(() => undefined)) as any;\n      if (priceUpdateTx) {\n        allCalls.unshift(priceUpdateTx);\n      }\n\n      return await erc7412Call(\n        network,\n        provider!,\n        allCalls,\n        (encoded) => {\n          if (!Array.isArray(encoded)) throw Error('Expected array');\n          if (!singlePositionDecoder) return {};\n\n          const prices = priceDecoder(encoded.slice(0, priceCalls.length));\n          const pricesByAddress = keyBy(\n            'address',\n            Array.isArray(prices)\n              ? prices.map((price, i) => ({\n                  price,\n                  address: collateralTypes[i].tokenAddress,\n                }))\n              : [{ price: prices, address: collateralTypes[0].tokenAddress }]\n          );\n\n          const pairedPositionsEncoded = toPairs(\n            encoded.slice(priceCalls.length, priceCalls.length + positionCalls.length)\n          );\n          const positionData = pairedPositionsEncoded.map((x) => singlePositionDecoder(x));\n\n          const availableCollaterals = encoded\n            .slice(priceCalls.length + positionCalls.length)\n            .map((encode) =>\n              CoreProxyContract.interface.decodeFunctionResult(\n                'getAccountAvailableCollateral',\n                encode\n              )\n            );\n          const availableCollateralByAddress = keyBy(\n            'address',\n            Array.isArray(availableCollaterals)\n              ? availableCollaterals.map((availableCollateral, i) => ({\n                  availableCollateral: wei(availableCollateral[0]),\n                  address: collateralTypes[i].tokenAddress,\n                }))\n              : [\n                  {\n                    availableCollateral: wei(availableCollaterals[0]),\n                    address: collateralTypes[0].tokenAddress,\n                  },\n                ]\n          );\n\n          const positions = positionData.map(({ debt, collateral }, index) => {\n            const { poolName, collateralType, poolId, isPreferred } = positionCallsAndData[index];\n            // Value will be removed from the collateral call in next release, so to prepare for that calculate it manually\n            const collateralAmount = collateral.amount;\n            const collateralPrice = pricesByAddress?.[collateralType.tokenAddress].price;\n            const collateralValue = collateralPrice\n              ? collateralAmount.mul(collateralPrice)\n              : wei(0);\n            const availableCollateral =\n              availableCollateralByAddress?.[collateralType.tokenAddress].availableCollateral;\n            const cRatio = calculateCRatio(debt, collateralValue);\n\n            return {\n              id: `${poolId}-${collateralType.symbol}` as const,\n              accountId,\n              poolId,\n              poolName,\n              collateralPrice,\n              collateralAmount,\n              collateralValue,\n              collateralType,\n              cRatio,\n              debt,\n              isPreferred,\n              availableCollateral,\n            };\n          });\n          return keyBy('id', positions);\n        },\n        'useLiquidityPositions'\n      );\n    },\n  });\n};\n","import { Flex, Text } from '@chakra-ui/react';\nimport { Amount } from '@snx-v3/Amount';\nimport { ZEROWEI } from '@snx-v3/constants';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { useAccountCollaterals } from '@snx-v3/useAccountCollateral';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { useCollateralPrices } from '@snx-v3/useCollateralPrices';\nimport { useCollateralTypes } from '@snx-v3/useCollateralTypes';\nimport { useGetUSDTokens } from '@snx-v3/useGetUSDTokens';\nimport { useLiquidityPositions } from '@snx-v3/useLiquidityPositions';\nimport { useParams } from '@snx-v3/useParams';\nimport { useSystemToken } from '@snx-v3/useSystemToken';\nimport { useTokenBalances } from '@snx-v3/useTokenBalance';\nimport { wei } from '@synthetixio/wei';\nimport { useMemo } from 'react';\nimport {\n  calculateAssets,\n  calculateTotalAssetsAvailable,\n  calculateTotalAssetsLocked,\n} from '../../utils/assets';\nimport { calculateDebt } from '../../utils/positions';\nimport { StatBox } from './StatBox';\n\nexport const StatsList = () => {\n  const params = useParams();\n  const { network } = useNetwork();\n\n  const { data: usdTokens } = useGetUSDTokens();\n\n  const { data: liquidityPositions, isPending: isPendingLiquidityPositions } =\n    useLiquidityPositions({\n      accountId: params.accountId,\n    });\n  const { data: collateralTypes, isPending: isPendingCollateralTypes } = useCollateralTypes();\n\n  const { data: accountCollaterals, isPending: isPendingAccountCollaterals } =\n    useAccountCollaterals({ accountId: params.accountId });\n\n  const collateralAddresses =\n    isBaseAndromeda(network?.id, network?.preset) && usdTokens?.USDC\n      ? accountCollaterals?.map((collateral) => collateral.tokenAddress).concat(usdTokens.USDC) ||\n        []\n      : accountCollaterals?.map((collateral) => collateral.tokenAddress) || [];\n\n  const { data: userTokenBalances, isPending: isPendingTokenBalances } = useTokenBalances(\n    collateralAddresses.filter(Boolean)\n  );\n\n  const associatedUserBalances = userTokenBalances?.map((balance, index) => {\n    return {\n      balance,\n      tokenAddress: collateralAddresses[index],\n    };\n  });\n\n  const { data: collateralPrices, isPending: isPendingCollateralPrices } = useCollateralPrices();\n\n  const isBase = isBaseAndromeda(network?.id, network?.preset);\n\n  const { data: systemToken } = useSystemToken();\n  const assets = useMemo(\n    () =>\n      calculateAssets(\n        accountCollaterals,\n        associatedUserBalances,\n        collateralPrices,\n        collateralTypes,\n        isBase,\n        usdTokens?.USDC,\n        systemToken\n      ),\n    [\n      accountCollaterals,\n      associatedUserBalances,\n      collateralPrices,\n      collateralTypes,\n      isBase,\n      usdTokens?.USDC,\n      systemToken,\n    ]\n  );\n\n  const debt = calculateDebt(liquidityPositions);\n  const totalAssets = calculateTotalAssetsAvailable(assets);\n  const totalLocked = calculateTotalAssetsLocked(assets);\n\n  const isPending =\n    isPendingAccountCollaterals ||\n    isPendingTokenBalances ||\n    isPendingCollateralPrices ||\n    isPendingLiquidityPositions ||\n    isPendingCollateralTypes;\n\n  return (\n    <Flex flexWrap=\"wrap\" w=\"100%\" gap=\"4\" mt={6}>\n      <StatBox\n        title=\"Available to Lock\"\n        isLoading={Boolean(params.accountId && isPending)}\n        value={<Amount prefix=\"$\" value={wei(totalAssets || '0')} />}\n        label={\n          <>\n            <Text textAlign=\"left\">\n              Total assets that can be Locked, including:\n              <br /> - Unlocked assets not yet withdrawn\n              <br /> - Available assets in your wallet\n            </Text>\n          </>\n        }\n      />\n      <StatBox\n        title=\"Total Locked\"\n        isLoading={Boolean(params.accountId && isPending)}\n        value={<Amount prefix=\"$\" value={wei(totalLocked || '0')} />}\n        label={\n          <>\n            <Text textAlign=\"left\">All assets locked in Positions </Text>\n          </>\n        }\n      />\n      <StatBox\n        title={`Total ${isBase ? 'PNL' : 'Debt'}`}\n        isLoading={Boolean(params.accountId && isPending)}\n        value={<Amount prefix=\"$\" value={debt?.abs() || ZEROWEI} />}\n        label={\n          <>\n            <Text textAlign=\"left\">\n              Aggregated {isBase ? 'PNL' : 'Debt'} of all your open Positions\n            </Text>\n          </>\n        }\n      />\n    </Flex>\n  );\n};\n","import { AccountCollateralType } from '@snx-v3/useAccountCollateral';\nimport { CollateralType } from '@snx-v3/useCollateralTypes';\nimport Wei, { wei } from '@synthetixio/wei';\nimport { ONEWEI, ZEROWEI } from '@snx-v3/constants';\n\nexport interface Asset {\n  collateral: AccountCollateralType;\n  balance: Wei;\n  price: Wei | undefined;\n}\n\nexport function calculateAssets(\n  accountCollaterals?: AccountCollateralType[],\n  associatedUserBalances?:\n    | {\n        balance: Wei;\n        tokenAddress: string;\n      }[]\n    | undefined,\n  collateralPrices?: Record<string, Wei | undefined>,\n  collateralTypes?: CollateralType[],\n  isBase?: boolean,\n  USDCAddress?: string,\n  systemToken?: { address: string }\n): Asset[] | undefined {\n  if (!(accountCollaterals && associatedUserBalances && collateralPrices && systemToken)) return;\n\n  const filteredAccountCollaterals = accountCollaterals?.filter(\n    (item) => item.tokenAddress !== systemToken.address\n  );\n\n  // Empty state\n  if (collateralTypes && !filteredAccountCollaterals) {\n    // Because we are mapping over collateral types we need to convert sUSDC symbol to USDC\n    return collateralTypes.map((collateral) => {\n      if (isBase && collateral.symbol === 'USDC') {\n        return {\n          collateral: {\n            ...collateral,\n            availableCollateral: ZEROWEI,\n            totalDeposited: ZEROWEI,\n            totalAssigned: ZEROWEI,\n            totalLocked: ZEROWEI,\n          },\n          balance: associatedUserBalances\n            ? associatedUserBalances.find(\n                (balance) => balance.tokenAddress === collateral.tokenAddress\n              )?.balance || ZEROWEI\n            : ZEROWEI,\n          price: ONEWEI,\n        };\n      }\n\n      return {\n        collateral: {\n          tokenAddress: collateral.tokenAddress,\n          symbol: collateral.symbol,\n          displaySymbol: collateral.displaySymbol,\n          availableCollateral: ZEROWEI,\n          totalDeposited: ZEROWEI,\n          totalAssigned: ZEROWEI,\n          totalLocked: ZEROWEI,\n        },\n        balance: ZEROWEI,\n        price: ZEROWEI,\n      };\n    });\n  }\n\n  if (associatedUserBalances && collateralPrices) {\n    return filteredAccountCollaterals?.map((collateral) => {\n      let balance =\n        associatedUserBalances.find(\n          (item) => item.tokenAddress.toLowerCase() === collateral.tokenAddress.toLowerCase()\n        )?.balance || wei(0);\n      const price = collateralPrices[collateral.tokenAddress] ?? ONEWEI;\n\n      // ANDROMEDA CASE\n      if (isBase && collateral.symbol === 'USDC') {\n        // We also want to show the USDC balance, not the sUSDC balance\n        balance =\n          associatedUserBalances.find((balance) => balance.tokenAddress === USDCAddress)?.balance ||\n          wei(0);\n      }\n\n      return {\n        collateral,\n        balance,\n        price,\n      };\n    });\n  }\n}\n\nexport function calculateTotalAssets(assets?: Asset[]) {\n  return assets\n    ?.map((asset) => {\n      const assigned = asset.collateral.totalAssigned.mul(asset.price);\n      const deposited = asset.collateral.totalDeposited.mul(asset.price);\n      const wallet = asset.balance.mul(asset.price);\n      // if already assigned to pool, we dont add it\n      return assigned !== deposited ? assigned.add(wallet) : assigned.add(wallet).add(deposited);\n    })\n    .reduce((prev, cur) => prev.add(cur), ZEROWEI)\n    .toNumber()\n    .toFixed(2);\n}\n\nexport function calculateTotalAssetsLocked(assets?: Asset[]) {\n  return assets\n    ?.map((asset) => asset.collateral.totalAssigned.mul(asset.price))\n    .reduce((prev, cur) => prev.add(cur), ZEROWEI)\n    .toNumber()\n    .toFixed(2);\n}\n\nexport function calculateTotalAssetsAvailable(assets?: Asset[]) {\n  return assets\n    ?.map((asset) => asset.collateral.availableCollateral.add(asset.balance).mul(asset.price))\n    .reduce((prev, cur) => prev.add(cur), ZEROWEI)\n    .toNumber()\n    .toFixed(2);\n}\n","import { LiquidityPositionType } from '@snx-v3/useLiquidityPositions';\nimport Wei from '@synthetixio/wei';\n\ntype DebtPositions = Record<`${string}-${string}`, LiquidityPositionType>;\n\nexport function calculateDebt(positions?: DebtPositions) {\n  return (\n    positions && Object.values(positions).reduce((prev, cur) => prev.add(cur.debt), new Wei(0))\n  );\n}\n\nexport function calculatePositions(positionsByKey?: DebtPositions, isBase = false) {\n  const positionsIds = !!positionsByKey\n    ? (Object.keys(positionsByKey) as `${string}-${string}`[])\n    : [];\n\n  if (!positionsByKey) return [];\n\n  return positionsIds.map((id) => {\n    const position = positionsByKey[id];\n\n    if (isBase && position.collateralType.symbol === 'sUSDC') {\n      position.collateralType.symbol = 'USDC';\n      position.collateralType.displaySymbol = 'USDC';\n      position.collateralType.name = 'USD Coin';\n    }\n\n    return position;\n  });\n}\n","import { importOracleManagerProxy } from '@snx-v3/contracts';\nimport { Network, useNetwork, useProviderForChain } from '@snx-v3/useBlockchain';\nimport { erc7412Call, getDefaultFromAddress } from '@snx-v3/withERC7412';\nimport { Wei } from '@synthetixio/wei';\nimport { useQuery } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\n\nexport async function fetchOraclePrice({\n  targetNetwork,\n  provider,\n  nodeId,\n}: {\n  targetNetwork: Network;\n  provider: ethers.providers.BaseProvider;\n  nodeId: string;\n}) {\n  const OracleManagerProxyContract = await importOracleManagerProxy(\n    targetNetwork.id,\n    targetNetwork.preset\n  );\n  const OracleManagerProxy = new ethers.Contract(\n    OracleManagerProxyContract.address,\n    OracleManagerProxyContract.abi,\n    provider\n  );\n\n  const processCall = await OracleManagerProxy.populateTransaction.process(nodeId);\n  processCall.from = getDefaultFromAddress(targetNetwork?.name || '');\n  const calls = [processCall];\n\n  return await erc7412Call(\n    targetNetwork,\n    provider,\n    calls,\n    (txs) => {\n      const result = OracleManagerProxy.interface.decodeFunctionResult(\n        'process',\n        Array.isArray(txs) ? txs[0] : txs\n      );\n      if (result?.node) {\n        return {\n          price: new Wei(result.node.price),\n          timestamp: new Date(Number(result.node.timestamp.mul(1000).toString())),\n        };\n      } else {\n        return {\n          price: new Wei(result.price),\n          timestamp: new Date(Number(result.timestamp.mul(1000).toString())),\n        };\n      }\n    },\n    'useOraclePrice'\n  );\n}\n\nexport function useOraclePrice(nodeId?: string, customNetwork?: Network) {\n  const { network } = useNetwork();\n  const targetNetwork = customNetwork || network;\n  const provider = useProviderForChain(targetNetwork);\n\n  return useQuery({\n    refetchInterval: 120_000,\n    enabled: Boolean(targetNetwork && provider && nodeId),\n    queryKey: [`${targetNetwork?.id}-${targetNetwork?.preset}`, 'oracle-price', { nodeId }],\n    queryFn: async () => {\n      if (!(targetNetwork && provider && nodeId)) {\n        throw new Error('OMG');\n      }\n      return fetchOraclePrice({\n        targetNetwork,\n        provider,\n        nodeId,\n      });\n    },\n  });\n}\n","export async function importOracleManagerProxy(chainId, preset) {\n  if (!preset) {\n    throw new Error(`Missing preset`);\n  }\n  const deployment = `${Number(chainId).toFixed(0)}-${preset}`;\n  switch (deployment) {\n    case '1-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/1-main/meta.json'),\n        import('@synthetixio/v3-contracts/1-main/OracleManagerProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.OracleManagerProxy, abi };\n    }\n    case '11155111-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/11155111-main/meta.json'),\n        import('@synthetixio/v3-contracts/11155111-main/OracleManagerProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.OracleManagerProxy, abi };\n    }\n    case '10-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/10-main/meta.json'),\n        import('@synthetixio/v3-contracts/10-main/OracleManagerProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.OracleManagerProxy, abi };\n    }\n    case '8453-andromeda': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/8453-andromeda/meta.json'),\n        import('@synthetixio/v3-contracts/8453-andromeda/OracleManagerProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.OracleManagerProxy, abi };\n    }\n    case '84532-andromeda': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/84532-andromeda/meta.json'),\n        import('@synthetixio/v3-contracts/84532-andromeda/OracleManagerProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.OracleManagerProxy, abi };\n    }\n    case '42161-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/42161-main/meta.json'),\n        import('@synthetixio/v3-contracts/42161-main/OracleManagerProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.OracleManagerProxy, abi };\n    }\n    case '421614-main': {\n      const [{ default: meta }, { default: abi }] = await Promise.all([\n        import('@synthetixio/v3-contracts/421614-main/meta.json'),\n        import('@synthetixio/v3-contracts/421614-main/OracleManagerProxy.readable.json'),\n      ]);\n      return { address: meta.contracts.OracleManagerProxy, abi };\n    }\n    default: {\n      throw new Error(`Unsupported deployment ${deployment} for OracleManagerProxy`);\n    }\n  }\n}\n","import { useOfflinePrices } from '@snx-v3/useCollateralPriceUpdates';\nimport { useCollateralTypes } from '@snx-v3/useCollateralTypes';\nimport { useMemo } from 'react';\nimport { ZEROWEI } from '@snx-v3/constants';\nimport { wei } from '@synthetixio/wei';\nimport { useOraclePrice } from '@snx-v3/useOraclePrice';\n\n// TODO: Update this hook to use a multicall through the oracle manager proxy\nexport const useTokenPrice = (symbol?: string) => {\n  const { data: collateralTypes } = useCollateralTypes(true);\n\n  const pythCollateralPrices = collateralTypes?.filter((item) => item.symbol !== 'stataUSDC');\n  const omCollateralPrices = collateralTypes?.filter((item) => item.symbol === 'stataUSDC');\n\n  const { data: collateralPrices } = useOfflinePrices(\n    (pythCollateralPrices || []).map((item) => ({\n      id: item.tokenAddress,\n      oracleId: item.oracleNodeId,\n      symbol: item.symbol,\n    }))\n  );\n\n  const { data: omPrices } = useOraclePrice(omCollateralPrices?.[0]?.oracleNodeId);\n\n  return useMemo(() => {\n    if (!collateralTypes || !collateralPrices) {\n      return ZEROWEI;\n    }\n\n    const collateralPrice = collateralPrices\n      .concat(omPrices ? [{ symbol: 'stataUSDC', price: omPrices.price.toString() }] : [])\n      .find((price) => `${price?.symbol}`.toUpperCase() === `${symbol}`.toUpperCase());\n\n    return collateralPrice?.price ? wei(collateralPrice?.price) : ZEROWEI;\n  }, [collateralPrices, collateralTypes, symbol, omPrices]);\n};\n","import { contractsHash } from '@snx-v3/tsHelpers';\nimport { useNetwork, useProvider } from '@snx-v3/useBlockchain';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { useQuery } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\n\nexport function useAccountCollateralUnlockDate({ accountId }: { accountId?: string }) {\n  const { data: CoreProxy } = useCoreProxy();\n  const { network } = useNetwork();\n  const provider = useProvider();\n\n  return useQuery({\n    queryKey: [\n      `${network?.id}-${network?.preset}`,\n      'AccountCollateralUnlockDate',\n      { accountId },\n      { contractsHash: contractsHash([CoreProxy]) },\n    ],\n    enabled: Boolean(provider && CoreProxy && accountId),\n    queryFn: async function () {\n      if (!(provider && CoreProxy && accountId)) throw 'OMFG';\n      const CoreProxyContract = new ethers.Contract(CoreProxy.address, CoreProxy.abi, provider);\n      const [lastInteraction, accountTimeoutWithdraw] = await Promise.all([\n        CoreProxyContract.getAccountLastInteraction(accountId),\n        CoreProxyContract.getConfigUint(ethers.utils.formatBytes32String('accountTimeoutWithdraw')),\n      ]);\n      const collateralUnlock = lastInteraction.add(accountTimeoutWithdraw);\n      return new Date(collateralUnlock.toNumber() * 1000);\n    },\n  });\n}\n","import { useEffect } from 'react';\nimport { useAccountCollateralUnlockDate } from '@snx-v3/useAccountCollateralUnlockDate';\nimport { useTimer } from 'react-timer-hook';\n\nexport function useWithdrawTimer(accountId: string | undefined) {\n  const { data: accountCollateralUnlockDate, isLoading: isLoadingDate } =\n    useAccountCollateralUnlockDate({\n      accountId,\n    });\n  const { minutes, hours, seconds, isRunning, restart } = useTimer({\n    expiryTimestamp: new Date(),\n    autoStart: false,\n  });\n\n  useEffect(() => {\n    if (accountCollateralUnlockDate && !isLoadingDate) {\n      restart(accountCollateralUnlockDate, true);\n    }\n  }, [accountCollateralUnlockDate, isLoadingDate, restart]);\n\n  return {\n    minutes,\n    hours,\n    seconds,\n    isRunning: isRunning && !![minutes, hours, seconds].find((a) => a > 0),\n    accountCollateralUnlockDate,\n  };\n}\n","export const getHealthVariant = ({\n  targetCratio,\n  liquidationCratio,\n  cRatio,\n}: {\n  liquidationCratio: number | undefined;\n  targetCratio: number | undefined;\n  cRatio: number | undefined;\n}) => {\n  if (!liquidationCratio || !targetCratio || !cRatio) {\n    return 'success';\n  }\n  if (cRatio <= 0) {\n    return 'success';\n  }\n  if (cRatio < liquidationCratio) {\n    return 'error';\n  }\n  if (cRatio < targetCratio) {\n    return 'warning';\n  }\n  return 'success';\n};\n\nexport const ratioIsMaxUInt = (ratio: number) => ratio >= Number.MAX_SAFE_INTEGER;\n\nexport const getProgressSize = ({\n  targetCratio,\n  liquidationCratio,\n  cRatio,\n}: {\n  liquidationCratio: number | undefined;\n  targetCratio: number | undefined;\n  cRatio: number | undefined;\n}) => {\n  if (!liquidationCratio || !targetCratio || !cRatio) {\n    return 0;\n  }\n\n  if (cRatio < 0) {\n    return 0;\n  }\n\n  if (cRatio >= targetCratio) {\n    return 75 + (25 * (cRatio - targetCratio)) / liquidationCratio;\n  }\n\n  if (cRatio >= liquidationCratio) {\n    return 25 + (50 * (cRatio - liquidationCratio)) / (targetCratio - liquidationCratio);\n  }\n\n  return (25 * cRatio) / liquidationCratio;\n};\n","import { FC } from 'react';\nimport { ratioIsMaxUInt } from './CRatioBar.utils';\nimport { Amount } from '@snx-v3/Amount';\nimport { wei } from '@synthetixio/wei';\n\nexport const CRatioAmount: FC<{\n  value: number;\n}> = ({ value }) => {\n  if (!value || value < 0) {\n    return <>N/A</>;\n  }\n\n  if (ratioIsMaxUInt(value)) {\n    return <>Infinite</>;\n  }\n\n  return <Amount value={wei(value)} suffix=\"%\" />;\n};\n","import { Badge } from '@chakra-ui/react';\nimport { FC } from 'react';\nimport { getHealthVariant } from './CRatioBar.utils';\n\nconst badgeColors = {\n  success: {\n    colorScheme: 'green',\n    bg: 'green.900',\n    label: 'HEALTHY',\n  },\n  error: {\n    colorScheme: 'red',\n    bg: 'red.900',\n    label: 'Unhealthy',\n  },\n  warning: {\n    colorScheme: 'orange',\n    bg: 'orange.900',\n    label: 'MANAGE',\n  },\n};\n\nexport const CRatioBadge: FC<{\n  liquidationCratio: number;\n  targetCratio: number;\n  cRatio: number;\n}> = ({ liquidationCratio, targetCratio, cRatio }) => {\n  const variant = getHealthVariant({\n    targetCratio,\n    liquidationCratio,\n    cRatio,\n  });\n  return (\n    <Badge\n      colorScheme={badgeColors[variant].colorScheme}\n      border=\"1px solid\"\n      bg={badgeColors[variant].bg}\n    >\n      {badgeColors[variant].label}\n    </Badge>\n  );\n};\n","import { Text, TextProps } from '@chakra-ui/react';\nimport { Amount } from '@snx-v3/Amount';\nimport Wei from '@synthetixio/wei';\nimport { FC } from 'react';\n\ninterface Props extends TextProps {\n  debt: Wei;\n  showPNL?: boolean;\n}\n\nexport const DebtAmount: FC<Props> = ({ debt, showPNL, ...props }) => {\n  const amount = showPNL ? debt.mul(-1) : debt;\n\n  return (\n    <Text {...props} color={debt.eq(0) ? 'white.500' : debt.lt(0) ? 'green.500' : 'red.500'}>\n      <Amount prefix={`${amount.gte(0) ? '' : '-'}$`} value={amount.abs()} />\n    </Text>\n  );\n};\n","import { TimeIcon } from '@chakra-ui/icons';\nimport { Box, Button, Collapse, Fade, Flex, Td, Text, Tooltip, Tr } from '@chakra-ui/react';\nimport { Amount } from '@snx-v3/Amount';\nimport { LiquidityPositionType } from '@snx-v3/useLiquidityPositions';\nimport { useRewards } from '@snx-v3/useRewards';\nimport { useTokenPrice } from '@snx-v3/useTokenPrice';\nimport { useWithdrawTimer } from '@snx-v3/useWithdrawTimer';\nimport { useMemo } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport { CRatioAmount } from '../../CRatioBar/CRatioAmount';\nimport { CRatioBadge } from '../../CRatioBar/CRatioBadge';\nimport { TokenIcon } from '../../TokenIcon';\nimport { DebtAmount } from './DebtAmount';\n\ninterface PositionRow extends LiquidityPositionType {\n  final: boolean;\n  isBase: boolean;\n  apr?: number;\n  systemTokenSymbol?: string;\n}\n\nexport function PositionRow({\n  poolId,\n  collateralType,\n  debt,\n  final,\n  cRatio,\n  isBase,\n  apr,\n  collateralAmount,\n  availableCollateral,\n  accountId,\n}: PositionRow) {\n  const { data: rewardsData } = useRewards({\n    poolId,\n    collateralSymbol: collateralType?.symbol,\n    accountId,\n  });\n  const collateralPrice = useTokenPrice(collateralType.symbol);\n  const [queryParams] = useSearchParams();\n  const navigate = useNavigate();\n  const { minutes, hours, isRunning } = useWithdrawTimer(accountId);\n\n  const handleNavigate = (actions: string) => {\n    queryParams.set('manageAction', actions);\n    navigate({\n      pathname: `/positions/${collateralType.symbol}/${poolId}`,\n      search: queryParams.toString(),\n    });\n  };\n\n  const hasRewards = useMemo(\n    () => (rewardsData || []).reduce((curr, acc) => curr + acc.claimableAmount.toNumber(), 0) > 0,\n    [rewardsData]\n  );\n\n  return (\n    <Tr borderBottomWidth={final ? 'none' : '1px'}>\n      <Td border=\"none\">\n        <Fade in>\n          <Flex\n            alignItems=\"center\"\n            _hover={{ textDecoration: 'underline', cursor: 'pointer' }}\n            onClick={() => handleNavigate(debt.gt(0) ? 'repay' : 'claim')}\n          >\n            <TokenIcon symbol={collateralType.symbol} />\n            <Flex flexDirection=\"column\" ml={3}>\n              <Text\n                color=\"white\"\n                fontWeight={700}\n                lineHeight=\"1.25rem\"\n                fontFamily=\"heading\"\n                fontSize=\"sm\"\n              >\n                {collateralType.symbol}\n              </Text>\n              <Text color=\"gray.500\" fontFamily=\"heading\" fontSize=\"0.75rem\" lineHeight=\"1rem\">\n                {collateralType.displaySymbol}\n              </Text>\n            </Flex>\n          </Flex>\n        </Fade>\n      </Td>\n      <Td border=\"none\">\n        <Flex flexDirection=\"column\" alignItems=\"flex-end\">\n          <Text color=\"white\" lineHeight=\"1.25rem\" fontFamily=\"heading\" fontSize=\"sm\">\n            {collateralPrice.gt(0) && (\n              <Amount prefix=\"$\" value={collateralAmount.mul(collateralPrice)} />\n            )}\n          </Text>\n          <Text color=\"gray.500\" fontFamily=\"heading\" fontSize=\"0.75rem\" lineHeight=\"1rem\">\n            <Amount value={collateralAmount} suffix={` ${collateralType.symbol.toString()}`} />\n          </Text>\n        </Flex>\n      </Td>\n      <Td border=\"none\">\n        <Flex flexDirection=\"column\" alignItems=\"flex-end\">\n          <Text\n            display=\"flex\"\n            alignItems=\"center\"\n            color=\"white\"\n            lineHeight=\"1.25rem\"\n            fontFamily=\"heading\"\n            fontSize=\"sm\"\n            gap={1.5}\n          >\n            {collateralPrice.gt(0) && (\n              <Amount prefix=\"$\" value={availableCollateral.mul(collateralPrice)} />\n            )}\n\n            {availableCollateral.gt(0) && isRunning && (\n              <Tooltip label={`Withdrawal available in ${hours}H${minutes}M`}>\n                <TimeIcon />\n              </Tooltip>\n            )}\n          </Text>\n          <Box color=\"gray.500\" fontFamily=\"heading\" fontSize=\"0.75rem\" lineHeight=\"1rem\">\n            {availableCollateral.gt(0) && !isRunning ? (\n              <Text\n                color=\"cyan.500\"\n                fontFamily=\"heading\"\n                fontSize=\"0.75rem\"\n                lineHeight=\"1rem\"\n                cursor=\"pointer\"\n                onClick={() => handleNavigate('withdraw')}\n              >\n                Withdraw\n              </Text>\n            ) : (\n              <Amount value={availableCollateral} suffix={` ${collateralType.symbol.toString()}`} />\n            )}\n          </Box>\n        </Flex>\n      </Td>\n      <Td border=\"none\">\n        <Fade in>\n          <Flex flexDirection=\"column\" alignItems=\"flex-end\">\n            <Text color=\"white\" lineHeight=\"1.25rem\" fontFamily=\"heading\" fontSize=\"sm\">\n              {apr && apr > 0 ? apr.toFixed(2).concat('%') : '-'}\n            </Text>\n            {hasRewards && (\n              <Text\n                color=\"cyan.500\"\n                fontFamily=\"heading\"\n                fontSize=\"0.75rem\"\n                lineHeight=\"1rem\"\n                cursor=\"pointer\"\n                onClick={() => handleNavigate('deposit')}\n              >\n                Claim Rewards\n              </Text>\n            )}\n          </Flex>\n        </Fade>\n      </Td>\n\n      <Td border=\"none\">\n        <Flex flexDirection=\"column\" alignItems=\"flex-end\">\n          <DebtAmount\n            debt={debt}\n            showPNL={isBase}\n            lineHeight=\"1.25rem\"\n            fontFamily=\"heading\"\n            fontSize=\"sm\"\n          />\n          <Collapse in={!debt.eq(0)}>\n            <Text\n              color=\"cyan.500\"\n              fontFamily=\"heading\"\n              fontSize=\"0.75rem\"\n              lineHeight=\"1rem\"\n              cursor=\"pointer\"\n              onClick={() => handleNavigate(debt.gt(0) ? 'repay' : 'claim')}\n            >\n              {debt.gt(0) ? 'Repay Debt' : 'Claim Credit'}\n            </Text>\n          </Collapse>\n        </Flex>\n      </Td>\n      {!isBase && (\n        <Td border=\"none\">\n          <Fade in>\n            <Flex flexDirection=\"column\" alignItems=\"flex-end\">\n              <Text color=\"white\" fontSize=\"sm\" lineHeight=\"1.25rem\" fontFamily=\"heading\">\n                <CRatioAmount value={cRatio.toNumber() * 100} />\n              </Text>\n              <CRatioBadge\n                cRatio={cRatio.toNumber() * 100}\n                liquidationCratio={(collateralType?.liquidationRatioD18?.toNumber() || 0) * 100}\n                targetCratio={(collateralType?.issuanceRatioD18.toNumber() || 0) * 100}\n              />\n            </Flex>\n          </Fade>\n        </Td>\n      )}\n      <Td border=\"none\" pr={0}>\n        <Flex justifyContent=\"flex-end\">\n          <Button\n            fontSize=\"sm\"\n            lineHeight=\"1.25rem\"\n            height=\"2rem\"\n            fontWeight={700}\n            pt=\"5px\"\n            pb=\"5px\"\n            pl=\"12px\"\n            pr=\"12px\"\n            borderWidth=\"1px\"\n            borderColor=\"gray.900\"\n            borderRadius=\"4px\"\n            onClick={() => handleNavigate('deposit')}\n          >\n            Manage\n          </Button>\n        </Flex>\n      </Td>\n    </Tr>\n  );\n}\n","import { Badge, Button, Flex, Td, Text, Tr } from '@chakra-ui/react';\nimport { SynthSkeleton as Skeleton, SynthCircle as SkeletonCircle } from '../../';\nimport { TokenIcon } from '../../';\n\nexport function PositionsRowLoading() {\n  const rows = Array.from({ length: 2 }, (_, i) => i);\n  return (\n    <>\n      {rows.map((row) => {\n        return (\n          <Tr borderBottomWidth={row === 1 ? 'none' : '1px'} key={row}>\n            <Td border=\"none\">\n              <Flex alignItems=\"center\">\n                <SkeletonCircle>\n                  <TokenIcon symbol=\"SNX\" />\n                </SkeletonCircle>\n                <Flex flexDirection=\"column\" ml={3}>\n                  <Skeleton height=\"1rem\" mb={1} width=\"70%\">\n                    <Text color=\"white\" fontWeight={700} lineHeight=\"1.25rem\" fontFamily=\"heading\">\n                      sUSDC\n                    </Text>\n                  </Skeleton>\n                  <Skeleton height=\"0.75rem\">\n                    <Text\n                      color=\"gray.500\"\n                      fontFamily=\"heading\"\n                      fontSize=\"0.75rem\"\n                      lineHeight=\"1rem\"\n                    >\n                      Synthetic USDC\n                    </Text>\n                  </Skeleton>\n                </Flex>\n              </Flex>\n            </Td>\n\n            <Td border=\"none\">\n              <Flex flexDirection=\"column\" alignItems=\"flex-end\">\n                <Skeleton height=\"1rem\" mb={1}>\n                  <Text color=\"white\" fontWeight={700} lineHeight=\"1.25rem\" fontFamily=\"heading\">\n                    $100,000\n                  </Text>\n                </Skeleton>\n                <Skeleton height=\"0.75rem\">\n                  <Text color=\"gray.500\" fontFamily=\"heading\" fontSize=\"0.75rem\" lineHeight=\"1rem\">\n                    200 SNX\n                  </Text>\n                </Skeleton>\n              </Flex>\n            </Td>\n\n            <Td border=\"none\">\n              <Flex flexDirection=\"column\" alignItems=\"flex-end\">\n                <Skeleton height=\"1rem\" mb={1}>\n                  <Text color=\"white\" fontWeight={700} lineHeight=\"1.25rem\" fontFamily=\"heading\">\n                    $100,000\n                  </Text>\n                </Skeleton>\n                <Skeleton height=\"0.75rem\">\n                  <Text color=\"gray.500\" fontFamily=\"heading\" fontSize=\"0.75rem\" lineHeight=\"1rem\">\n                    200 SNX\n                  </Text>\n                </Skeleton>\n              </Flex>\n            </Td>\n            <Td border=\"none\">\n              <Flex flexDirection=\"column\" alignItems=\"flex-end\">\n                <Skeleton height=\"1rem\" mb={1} width=\"70%\">\n                  <Text color=\"white\" fontWeight={700} lineHeight=\"1.25rem\" fontFamily=\"heading\">\n                    $20,000\n                  </Text>\n                </Skeleton>\n                <Skeleton height=\"0.75rem\">\n                  <Text color=\"cyan.500\" fontFamily=\"heading\" fontSize=\"0.75rem\" lineHeight=\"1rem\">\n                    Claim Credit\n                  </Text>\n                </Skeleton>\n              </Flex>\n            </Td>\n            <Td border=\"none\">\n              <Flex flexDirection=\"column\" alignItems=\"flex-end\">\n                <Skeleton height=\"1rem\" mb={1}>\n                  <Text color=\"white\" fontWeight={700} lineHeight=\"1.25rem\" fontFamily=\"heading\">\n                    5000%\n                  </Text>\n                </Skeleton>\n                <Skeleton height=\"0.75rem\">\n                  <Badge colorScheme=\"green\" border=\"1px solid\" bg=\"green.900\">\n                    HEALTHY\n                  </Badge>\n                </Skeleton>\n              </Flex>\n            </Td>\n            <Td border=\"none\">\n              <Flex flexDirection=\"column\">\n                <Skeleton height=\"1.75rem\">\n                  <Button\n                    fontSize=\"0.75rem\"\n                    lineHeight=\"1rem\"\n                    height=\"1.75rem\"\n                    fontWeight={700}\n                    borderWidth=\"1px\"\n                    borderColor=\"gray.900\"\n                    borderRadius=\"4px\"\n                    disabled\n                  >\n                    Manage\n                  </Button>\n                </Skeleton>\n              </Flex>\n            </Td>\n          </Tr>\n        );\n      })}\n    </>\n  );\n}\n","import { Button, Fade, Flex, Heading, Table, TableContainer, Tbody } from '@chakra-ui/react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { NetworkIcon, useNetwork, useWallet } from '@snx-v3/useBlockchain';\nimport { LiquidityPositionType } from '@snx-v3/useLiquidityPositions';\nimport {\n  PositionsNotConnected,\n  PositionRow,\n  PositionTableHeader,\n  PositionsRowLoading,\n  PositionsEmpty,\n  TableDivider,\n} from './';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\n\ninterface PositionsTableInterface {\n  isLoading: boolean;\n  positions?: LiquidityPositionType[];\n  apr?: any[];\n  systemToken?: {\n    symbol?: string;\n    name?: string;\n    address?: string;\n  };\n}\n\nexport const PositionsTable = ({\n  isLoading,\n  positions,\n  apr,\n  systemToken,\n}: PositionsTableInterface) => {\n  const navigate = useNavigate();\n  const { activeWallet } = useWallet();\n  const { network } = useNetwork();\n  const isBase = isBaseAndromeda(network?.id, network?.preset);\n\n  return (\n    <TableContainer\n      maxW=\"100%\"\n      mt={4}\n      borderColor=\"gray.900\"\n      borderWidth=\"1px\"\n      borderRadius=\"5px\"\n      p={6}\n      sx={{\n        borderCollapse: 'separate !important',\n        borderSpacing: 0,\n      }}\n      bg=\"navy.700\"\n    >\n      {!activeWallet?.address ? (\n        <PositionsNotConnected />\n      ) : positions?.length === 0 && !isLoading ? (\n        <PositionsEmpty />\n      ) : (\n        <>\n          <Flex alignItems=\"center\" justifyContent=\"space-between\">\n            <Heading\n              _hover={{ cursor: 'pointer', opacity: 0.9 }}\n              onClick={() => navigate(`/pools/${network?.id}/1`)}\n              fontSize=\"18px\"\n              fontWeight={700}\n              lineHeight=\"28px\"\n              color=\"gray.50\"\n            >\n              Spartan Council Pool\n              {network && (\n                <Flex alignItems=\"center\" fontSize=\"12px\" color=\"gray.500\" gap={1}>\n                  <Flex\n                    alignItems=\"center\"\n                    fontSize=\"12px\"\n                    fontWeight=\"500\"\n                    color=\"gray.500\"\n                    gap={1}\n                  >\n                    <NetworkIcon size=\"14px\" networkId={network.id} mr={1} />\n                    {network.label} Network\n                  </Flex>\n                </Flex>\n              )}\n            </Heading>\n            <Fade in>\n              <Button\n                as={Link}\n                mt={{ base: 2, md: 0 }}\n                size=\"sm\"\n                to={{\n                  pathname: `/pools/${network?.id}/1`,\n                  search: location.search,\n                }}\n                variant=\"outline\"\n                colorScheme=\"gray\"\n                color=\"white\"\n              >\n                Details\n              </Button>\n            </Fade>\n          </Flex>\n          <Table variant=\"simple\">\n            <PositionTableHeader isBase={isBase} />\n            <Tbody>\n              <TableDivider />\n              {isLoading ? (\n                <PositionsRowLoading />\n              ) : (\n                <>\n                  {positions?.map((position, index) => {\n                    const positionApr = apr?.find(\n                      (apr) =>\n                        apr.collateralType.toLowerCase() ===\n                        position.collateralType.tokenAddress.toLowerCase()\n                    );\n\n                    return (\n                      <PositionRow\n                        key={position.poolName.concat(index.toString())}\n                        {...position}\n                        final={index === positions.length - 1}\n                        isBase={isBase}\n                        apr={positionApr?.apr7d * 100}\n                        systemTokenSymbol={systemToken?.symbol}\n                      />\n                    );\n                  })}\n                </>\n              )}\n            </Tbody>\n          </Table>\n        </>\n      )}\n    </TableContainer>\n  );\n};\n","import { InfoIcon } from '@chakra-ui/icons';\nimport { Thead, Tr, Th, Flex, Text } from '@chakra-ui/react';\nimport { Tooltip } from '@snx-v3/Tooltip';\n\nexport function PositionTableHeader({ isBase }: { isBase: boolean }) {\n  return (\n    <Thead>\n      <Tr>\n        <Th\n          py={5}\n          textTransform=\"unset\"\n          color=\"gray.600\"\n          border=\"none\"\n          fontFamily=\"heading\"\n          fontSize=\"12px\"\n          lineHeight=\"16px\"\n        >\n          Collateral\n        </Th>\n        <Th textAlign=\"right\" border=\"none\" textTransform=\"unset\" py={5}>\n          <Flex justifyContent=\"flex-end\" alignItems=\"center\">\n            <Text color=\"gray.600\" fontFamily=\"heading\" fontSize=\"12px\" lineHeight=\"16px\" mr={1}>\n              Locked\n            </Text>\n            <Tooltip\n              label={\n                <Text textAlign=\"left\">\n                  Unlocked assets can be locked into a position at any time or withdrawn after 24h\n                  since last activity\n                </Text>\n              }\n            >\n              <InfoIcon w=\"10px\" h=\"10px\" />\n            </Tooltip>\n          </Flex>\n        </Th>\n        <Th textAlign=\"right\" border=\"none\" textTransform=\"unset\" py={5}>\n          <Text color=\"gray.600\" fontFamily=\"heading\" fontSize=\"12px\" lineHeight=\"16px\" mr={1}>\n            Unlocked\n          </Text>\n        </Th>\n        <Th border=\"none\" textTransform=\"unset\" py={5}>\n          <Flex justifyContent=\"flex-end\" alignItems=\"center\">\n            <Text color=\"gray.600\" fontFamily=\"heading\" fontSize=\"12px\" lineHeight=\"16px\" mr={1}>\n              APR\n            </Text>\n            <Tooltip\n              label={\n                <Flex flexDirection=\"column\" alignItems=\"start\">\n                  <Text textAlign=\"left\" fontSize=\"14px\">\n                    APR is averaged over the trailing 7 days and is comprised of both performance\n                    and rewards\n                  </Text>\n                </Flex>\n              }\n            >\n              <InfoIcon w=\"10px\" h=\"10px\" />\n            </Tooltip>\n          </Flex>\n        </Th>\n        <Th border=\"none\" textTransform=\"unset\" py={5}>\n          <Flex justifyContent=\"flex-end\" alignItems=\"center\">\n            <Text color=\"gray.600\" fontFamily=\"heading\" fontSize=\"12px\" lineHeight=\"16px\" mr={1}>\n              {isBase ? 'PNL' : 'Debt'}\n            </Text>\n            <Tooltip\n              label={\n                isBase ? (\n                  \"Your portion of the pool's total debt, which fluctuates based on trader performance and market conditions\"\n                ) : (\n                  <Text textAlign=\"left\">\n                    Debt consists of:\n                    <br />\n                    - Your portion of the pool&apos;s total debt, which fluctuates based on trader\n                    performance and market conditions\n                    <br />- The amount you&apos;ve borrowed against your collateral without\n                    incurring interest\n                  </Text>\n                )\n              }\n            >\n              <InfoIcon w=\"10px\" h=\"10px\" />\n            </Tooltip>\n          </Flex>\n        </Th>\n        {!isBase && (\n          <Th border=\"none\" textTransform=\"unset\" py={5}>\n            <Flex justifyContent=\"flex-end\" alignItems=\"center\">\n              <Text color=\"gray.600\" fontFamily=\"heading\" fontSize=\"12px\" lineHeight=\"16px\" mr={1}>\n                C-Ratio\n              </Text>\n              <Tooltip\n                label={\n                  <Flex flexDirection=\"column\" alignItems=\"start\">\n                    <Text textAlign=\"left\" fontSize=\"14px\">\n                      C-ratio is a dynamic number that represents a ratio between your locked\n                      collateral and your debt\n                    </Text>\n                  </Flex>\n                }\n              >\n                <InfoIcon w=\"10px\" h=\"10px\" />\n              </Tooltip>\n            </Flex>\n          </Th>\n        )}\n        <Th\n          py={5}\n          textTransform=\"unset\"\n          color=\"gray.600\"\n          border=\"none\"\n          fontFamily=\"heading\"\n          fontSize=\"12px\"\n          lineHeight=\"16px\"\n        >\n          {' '}\n        </Th>\n      </Tr>\n    </Thead>\n  );\n}\n","import { Flex, Button, Text } from '@chakra-ui/react';\nimport { useWallet } from '@snx-v3/useBlockchain';\n\nexport const PositionsNotConnected = () => {\n  const { connect } = useWallet();\n  return (\n    <Flex w=\"100%\" justifyContent=\"space-between\" alignItems=\"center\">\n      <Text color=\"gray.500\" fontWeight={500} fontSize=\"14px\" lineHeight=\"14px\" my=\"4\" pl=\"3\">\n        Please connect wallet to view active positions\n      </Text>\n      <Button\n        size=\"sm\"\n        data-cy=\"connect wallet button\"\n        onClick={() => {\n          connect();\n        }}\n      >\n        Connect Wallet\n      </Button>\n    </Flex>\n  );\n};\n","import { Flex, Button, Text } from '@chakra-ui/react';\nimport { Link } from 'react-router-dom';\n\nexport const PositionsEmpty = () => {\n  return (\n    <Flex justifyContent=\"space-between\" alignItems=\"baseline\" w=\"100%\">\n      <Text color=\"gray.500\" fontWeight={500} fontSize=\"14px\" my=\"4\" pl=\"3\">\n        You can open a new position by browsing the different Pools and choosing a vault for\n        collateral type\n      </Text>\n      <Link to=\"/pools\">\n        <Button size=\"sm\" data-cy=\"all pools button\">\n          Explore all Pools\n        </Button>\n      </Link>\n    </Flex>\n  );\n};\n","import { Tr, Td } from '@chakra-ui/react';\n\nexport const TableDivider = () => {\n  return (\n    <Tr border=\"none\" borderTop=\"1px\" borderTopColor=\"gray.900\" width=\"100%\" height=\"0px\">\n      <Td height=\"0px\" border=\"none\" px={0} pt={0} pb={4} />\n      <Td height=\"0px\" border=\"none\" px={0} pt={0} pb={4} />\n      <Td height=\"0px\" border=\"none\" px={0} pt={0} pb={4} />\n      <Td height=\"0px\" border=\"none\" px={0} pt={0} pb={4} />\n      <Td height=\"0px\" border=\"none\" px={0} pt={0} pb={4} />\n      <Td height=\"0px\" border=\"none\" px={0} pt={0} pb={4} />\n      <Td height=\"0px\" border=\"none\" px={0} pt={0} pb={4} />\n      <Td height=\"0px\" border=\"none\" px={0} pt={0} pb={4} />\n    </Tr>\n  );\n};\n","import { Flex, Heading } from '@chakra-ui/react';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { useApr } from '@snx-v3/useApr';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { useLiquidityPositions } from '@snx-v3/useLiquidityPositions';\nimport { useParams } from '@snx-v3/useParams';\nimport { useSystemToken } from '@snx-v3/useSystemToken';\nimport { calculatePositions } from '../../utils/positions';\nimport { PositionsTable } from './PositionsTable';\n\nexport const PositionsList = () => {\n  const params = useParams();\n  const { network } = useNetwork();\n\n  const { data: liquidityPositions, isPending: isPendingLiquidityPositions } =\n    useLiquidityPositions({ accountId: params.accountId });\n\n  const { data: apr } = useApr();\n  const { data: systemToken, isPending: isPendingSystemToken } = useSystemToken();\n\n  const isBase = isBaseAndromeda(network?.id, network?.preset);\n  const positions = calculatePositions(liquidityPositions, isBase);\n\n  const parsedPositions = positions.filter(\n    (position) => position.collateralAmount?.gt(0) || position.availableCollateral?.gt(0)\n  );\n\n  const isPending = isPendingLiquidityPositions || isPendingSystemToken;\n\n  return (\n    <Flex flexDir=\"column\">\n      <Heading fontSize=\"1.25rem\" fontFamily=\"heading\" lineHeight=\"1.75rem\" mt={4}>\n        Positions\n      </Heading>\n      <PositionsTable\n        isLoading={Boolean(params.accountId && isPending)}\n        positions={parsedPositions}\n        apr={apr?.collateralAprs}\n        systemToken={systemToken}\n      />\n    </Flex>\n  );\n};\n","import { calculateCRatio } from '@snx-v3/calculations';\nimport { Wei, wei } from '@synthetixio/wei';\n\nexport const validatePosition = ({\n  issuanceRatioD18,\n  collateralAmount,\n  collateralPrice,\n  debt,\n  collateralChange,\n  debtChange,\n}: {\n  issuanceRatioD18?: Wei;\n  collateralAmount?: Wei;\n  collateralPrice?: Wei;\n  debt?: Wei;\n  collateralChange: Wei;\n  debtChange: Wei;\n}) => {\n  const targetCRatio = issuanceRatioD18 ? issuanceRatioD18 : wei(1);\n  const newDebt = wei(debt || 0).add(debtChange);\n  const newCollateralAmount = wei(collateralAmount || 0).add(collateralChange);\n  const newCollateralValue = newCollateralAmount.mul(collateralPrice || 0);\n\n  const newCRatio = calculateCRatio(newDebt, newCollateralValue);\n\n  const maybeMaxDebt = wei(newCollateralAmount)\n    .mul(collateralPrice || 0)\n    .div(targetCRatio)\n    .sub(debt || 0);\n\n  const maxDebt = maybeMaxDebt.gte(0) ? maybeMaxDebt : wei(0);\n\n  const isValid =\n    (debtChange.lte(0) && collateralChange.gte(0)) ||\n    ((newCRatio.gte(targetCRatio) || newCRatio.lte(0)) &&\n      (newDebt.lte(0) || newCollateralAmount.gt(0)));\n\n  return {\n    isValid,\n    hasChanges: !collateralChange.eq(0) || !debtChange.eq(0),\n    newCRatio,\n    newDebt,\n    newCollateralAmount,\n    maxDebt,\n  };\n};\n","import { Alert, AlertIcon, Button, Collapse, Flex, Text } from '@chakra-ui/react';\nimport { Amount } from '@snx-v3/Amount';\nimport { BorderBox } from '@snx-v3/BorderBox';\nimport { DollarCircle } from '@snx-v3/icons';\nimport { SUSDCIcon } from '@snx-v3/icons/SUSDCIcon';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { ManagePositionContext } from '@snx-v3/ManagePositionContext';\nimport { NumberInput } from '@snx-v3/NumberInput';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { useCollateralType } from '@snx-v3/useCollateralTypes';\nimport { LiquidityPosition } from '@snx-v3/useLiquidityPosition';\nimport { useParams } from '@snx-v3/useParams';\nimport { useSystemToken } from '@snx-v3/useSystemToken';\nimport { validatePosition } from '@snx-v3/validatePosition';\nimport { wei } from '@synthetixio/wei';\nimport { useContext } from 'react';\nimport { ZEROWEI } from '@snx-v3/constants';\n\nexport const Borrow = ({ liquidityPosition }: { liquidityPosition?: LiquidityPosition }) => {\n  const params = useParams();\n  const { network } = useNetwork();\n  const { data: systemToken } = useSystemToken();\n\n  const isBase = isBaseAndromeda(network?.id, network?.preset);\n\n  const { debtChange, collateralChange, setDebtChange } = useContext(ManagePositionContext);\n\n  const { data: collateralType } = useCollateralType(params.collateralSymbol);\n\n  const { maxDebt: actualMaxDebt } = validatePosition({\n    issuanceRatioD18: collateralType?.issuanceRatioD18,\n    collateralAmount: liquidityPosition?.collateralAmount,\n    collateralPrice: liquidityPosition?.collateralPrice,\n    debt: liquidityPosition?.debt,\n    collateralChange: collateralChange,\n    debtChange: debtChange,\n  });\n\n  const maxDebt = wei(actualMaxDebt.toBN().sub(1));\n  const symbol = isBase ? params.collateralSymbol : systemToken?.symbol;\n\n  return (\n    <Flex flexDirection=\"column\">\n      <Text fontSize=\"md\" fontWeight=\"700\" mb=\"2\">\n        {isBase ? 'Claim' : 'Borrow'}\n      </Text>\n\n      <BorderBox display=\"flex\" p={3} mb=\"6\">\n        <Text display=\"flex\" gap={2} alignItems=\"center\" fontWeight=\"600\" mx=\"2\">\n          {isBase ? <SUSDCIcon /> : <DollarCircle />}\n          {symbol}\n        </Text>\n        <Flex flexDirection=\"column\" justifyContent=\"flex-end\" flexGrow={1}>\n          <NumberInput\n            InputProps={{\n              isRequired: true,\n              'data-cy': 'borrow amount input',\n              'data-max': maxDebt.toString(),\n              type: 'number',\n              min: 0,\n            }}\n            value={debtChange}\n            onChange={(val) => setDebtChange(val)}\n            max={maxDebt}\n            min={ZEROWEI}\n          />\n          <Flex flexDirection=\"column\" alignItems=\"flex-end\" fontSize=\"xs\" color=\"whiteAlpha.700\">\n            <Flex\n              gap=\"1\"\n              cursor=\"pointer\"\n              onClick={() => {\n                if (!maxDebt) {\n                  return;\n                }\n                setDebtChange(maxDebt);\n              }}\n            >\n              <Text>Max:</Text>\n              <Amount value={maxDebt} /> {isBase ? 'USDC' : systemToken?.symbol}\n            </Flex>\n          </Flex>\n        </Flex>\n      </BorderBox>\n\n      <Collapse in={debtChange.gt(0)} animateOpacity>\n        <Alert borderRadius=\"6px\" colorScheme=\"orange\" mb=\"6\">\n          <AlertIcon />\n          <Text>\n            As a security precaution, borrowed assets can only be withdrawn to your wallet after 24\n            hs since your previous account activity.\n          </Text>\n        </Alert>\n      </Collapse>\n\n      <Button isDisabled={debtChange.lte(0)} data-cy=\"borrow submit\" type=\"submit\">\n        {debtChange.lte(0) ? 'Enter Amount' : isBase ? 'Claim' : 'Borrow'}\n      </Button>\n    </Flex>\n  );\n};\n","import { useQuery } from '@tanstack/react-query';\nimport { useNetwork, useProvider, useWallet } from '@snx-v3/useBlockchain';\nimport { Wei, wei } from '@synthetixio/wei';\nimport { ethers } from 'ethers';\nimport { useCollateralType } from '@snx-v3/useCollateralTypes';\n\nexport function useTransferableSynthetix() {\n  const { network } = useNetwork();\n  const { activeWallet } = useWallet();\n  const provider = useProvider();\n  const { data: snxCollateral } = useCollateralType('SNX');\n\n  const accountAddress = activeWallet?.address;\n  const snxAddress = snxCollateral?.tokenAddress;\n\n  return useQuery({\n    enabled: Boolean(provider && accountAddress && snxAddress),\n    queryKey: [\n      `${network?.id}-${network?.preset}`,\n      'TransferableSynthetix',\n      { address: activeWallet?.address },\n    ],\n    queryFn: async function (): Promise<{ transferable: Wei; collateral?: Wei }> {\n      if (!(provider && accountAddress && snxAddress)) {\n        throw 'useTransferableSynthetix should not be enabled';\n      }\n      const contract = new ethers.Contract(\n        snxAddress,\n        [\n          'function balanceOf(address owner) view returns (uint256)',\n          'function transferableSynthetix(address account) view returns (uint256 transferable)',\n          'function collateral(address account) view returns (uint256 collateral)',\n        ],\n        provider\n      );\n      try {\n        // Cannon case\n        if (network?.name === 'cannon') {\n          const balanceOf = await contract.balanceOf(accountAddress);\n          return {\n            transferable: wei(balanceOf),\n          };\n        }\n\n        // Normal case for SNX case\n        const [transferableSynthetix, collateral] = await Promise.all([\n          contract.transferableSynthetix(accountAddress),\n          contract.collateral(accountAddress),\n        ]);\n\n        return {\n          transferable: wei(transferableSynthetix),\n          collateral: wei(collateral),\n        };\n      } catch (e) {\n        console.error(e);\n        throw e;\n      }\n    },\n  });\n}\n","export function numberWithCommas(value: string, decimals?: number) {\n  const parts = value.split('.');\n  parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n  const joinedParts = parts.join('.');\n  return decimals ? joinedParts.substring(0, joinedParts.indexOf('.') + decimals + 1) : joinedParts;\n}\n\nexport const formatNumberToUsd = (value: number, options?: Intl.NumberFormatOptions) => {\n  return new Intl.NumberFormat('en-EN', {\n    style: 'currency',\n    currency: 'USD',\n    ...options,\n  }).format(Number(value));\n};\n\nexport const formatNumber = (value: number, options?: Intl.NumberFormatOptions) => {\n  return new Intl.NumberFormat('en-EN', {\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2,\n    ...options,\n  }).format(Number(value));\n};\n\nexport const formatPercent = (value: number, options?: Intl.NumberFormatOptions) => {\n  return new Intl.NumberFormat('en-EN', {\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 2,\n    style: 'percent',\n    ...options,\n  }).format(Number(value));\n};\n","import {\n  Alert,\n  AlertDescription,\n  AlertIcon,\n  Button,\n  Collapse,\n  Flex,\n  Text,\n  Tooltip,\n} from '@chakra-ui/react';\nimport { Amount } from '@snx-v3/Amount';\nimport { BorderBox } from '@snx-v3/BorderBox';\nimport { ManagePositionContext } from '@snx-v3/ManagePositionContext';\nimport { NumberInput } from '@snx-v3/NumberInput';\nimport { useCollateralType } from '@snx-v3/useCollateralTypes';\nimport { useEthBalance } from '@snx-v3/useEthBalance';\nimport Wei from '@synthetixio/wei';\nimport { FC, useContext, useMemo } from 'react';\nimport { useParams } from '@snx-v3/useParams';\nimport { AccountCollateralType } from '@snx-v3/useAccountCollateral';\nimport { useTransferableSynthetix } from '@snx-v3/useTransferableSynthetix';\nimport { CollateralAlert, TokenIcon } from '../';\nimport { ChangeStat } from '../ChangeStat';\nimport { useTokenBalance } from '@snx-v3/useTokenBalance';\nimport { LiquidityPosition } from '@snx-v3/useLiquidityPosition';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { getSpotMarketId, isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { useGetWrapperToken } from '@snx-v3/useGetUSDTokens';\nimport { WithdrawIncrease } from '@snx-v3/WithdrawIncrease';\nimport { formatNumber } from '@snx-v3/formatters';\nimport { ZEROWEI } from '@snx-v3/constants';\nimport { useTokenPrice } from '@snx-v3/useTokenPrice';\nimport { TransactionSummary } from '../TransactionSummary/TransactionSummary';\nimport { currency } from '@snx-v3/format';\nimport { CRatioChangeStat } from '../CRatioBar/CRatioChangeStat';\n\nexport const DepositUi: FC<{\n  accountCollateral: AccountCollateralType;\n  collateralChange: Wei;\n  ethBalance?: Wei;\n  snxBalance?: {\n    transferable: Wei;\n    collateral?: Wei;\n  };\n  tokenBalance?: Wei;\n  displaySymbol: string;\n  symbol: string;\n  setCollateralChange: (val: Wei) => void;\n  minDelegation: Wei;\n  currentCollateral: Wei;\n  currentDebt: Wei;\n  collateralPrice: Wei;\n  isBase: boolean;\n}> = ({\n  accountCollateral,\n  collateralChange,\n  setCollateralChange,\n  displaySymbol,\n  symbol,\n  tokenBalance,\n  ethBalance,\n  snxBalance,\n  minDelegation,\n  currentCollateral,\n  currentDebt,\n  collateralPrice,\n  isBase,\n}) => {\n  const price = useTokenPrice(symbol);\n\n  const combinedTokenBalance = useMemo(() => {\n    if (symbol === 'SNX') {\n      return snxBalance?.transferable || ZEROWEI;\n    }\n    if (symbol !== 'WETH') {\n      return tokenBalance || ZEROWEI;\n    }\n    if (!tokenBalance || !ethBalance) {\n      return ZEROWEI;\n    }\n    return tokenBalance.add(ethBalance);\n  }, [symbol, tokenBalance, ethBalance, snxBalance?.transferable]);\n\n  const maxAmount = useMemo(\n    () => combinedTokenBalance?.add(accountCollateral.availableCollateral.toString()),\n    [accountCollateral.availableCollateral, combinedTokenBalance]\n  );\n\n  const txSummaryItems = useMemo(() => {\n    const items = [\n      {\n        label: 'Locked ' + symbol,\n        value: (\n          <ChangeStat\n            value={currentCollateral}\n            newValue={currentCollateral.add(collateralChange)}\n            formatFn={(val: Wei) => currency(val)}\n            hasChanges={collateralChange.abs().gt(0)}\n            size=\"sm\"\n          />\n        ),\n      },\n    ];\n\n    if (isBase) {\n      return items;\n    }\n\n    return [\n      ...items,\n      {\n        label: 'C-ratio',\n        value: (\n          <CRatioChangeStat\n            currentCollateral={currentCollateral}\n            currentDebt={currentDebt}\n            collateralChange={collateralChange}\n            collateralPrice={collateralPrice}\n            debtChange={ZEROWEI}\n            size=\"sm\"\n          />\n        ),\n      },\n    ];\n  }, [collateralChange, collateralPrice, currentCollateral, currentDebt, isBase, symbol]);\n\n  const overAvailableBalance = collateralChange.abs().gt(maxAmount);\n\n  return (\n    <Flex flexDirection=\"column\">\n      <Text color=\"gray./50\" fontSize=\"sm\" fontWeight=\"700\" mb=\"3\">\n        Deposit & Lock Collateral\n      </Text>\n      <BorderBox display=\"flex\" p={3} mb=\"6\">\n        <Flex alignItems=\"flex-start\" flexDir=\"column\" gap=\"1\">\n          <BorderBox display=\"flex\" py={1.5} px={2.5}>\n            <Text display=\"flex\" gap={2} alignItems=\"center\" fontWeight=\"600\">\n              <TokenIcon symbol={symbol} width={16} height={16} />\n              {displaySymbol}\n            </Text>\n          </BorderBox>\n          <Tooltip\n            label={\n              <Flex\n                flexDirection=\"column\"\n                alignItems=\"flex-start\"\n                fontSize=\"xs\"\n                color=\"whiteAlpha.700\"\n              >\n                <Flex gap=\"1\">\n                  <Text>Unlocked Balance:</Text>\n                  <Amount value={accountCollateral?.availableCollateral} />\n                </Flex>\n                <Flex gap=\"1\">\n                  <Text>Wallet Balance:</Text>\n                  <Amount value={symbol === 'SNX' ? snxBalance?.transferable : tokenBalance} />\n                </Flex>\n                {symbol === 'WETH' ? (\n                  <Flex gap=\"1\">\n                    <Text>ETH Balance:</Text>\n                    <Amount value={ethBalance} />\n                  </Flex>\n                ) : null}\n              </Flex>\n            }\n          >\n            <Text fontSize=\"12px\" data-cy=\"balance amount\">\n              Balance: <Amount value={maxAmount} />\n              {maxAmount?.gt(0) && (\n                <Text\n                  as=\"span\"\n                  cursor=\"pointer\"\n                  onClick={() => {\n                    if (!maxAmount) {\n                      return;\n                    }\n                    setCollateralChange(maxAmount);\n                  }}\n                  color=\"cyan.500\"\n                  fontWeight={700}\n                >\n                  &nbsp;Max\n                </Text>\n              )}\n            </Text>\n          </Tooltip>\n        </Flex>\n        <Flex flexDir=\"column\" flexGrow={1}>\n          <NumberInput\n            InputProps={{\n              'data-cy': 'deposit amount input',\n              'data-max': maxAmount?.toString(),\n              min: 0,\n            }}\n            value={collateralChange}\n            onChange={(value) => {\n              setCollateralChange(value);\n            }}\n            max={maxAmount}\n            min={ZEROWEI}\n          />\n          <Flex fontSize=\"xs\" color=\"whiteAlpha.700\" alignSelf=\"flex-end\" gap=\"1\">\n            {price.gt(0) && <Amount prefix=\"$\" value={collateralChange.abs().mul(price)} />}\n          </Flex>\n        </Flex>\n      </BorderBox>\n      {snxBalance?.collateral && snxBalance?.collateral.gt(0) && symbol === 'SNX' && (\n        <CollateralAlert mb=\"6\" tokenBalance={snxBalance.collateral} />\n      )}\n      <Collapse in={collateralChange.gt(0) && !overAvailableBalance} animateOpacity>\n        <WithdrawIncrease />\n      </Collapse>\n\n      <Collapse\n        in={collateralChange.gt(0) && collateralChange.add(currentCollateral).lt(minDelegation)}\n        animateOpacity\n      >\n        <Alert mb={6} status=\"error\" borderRadius=\"6px\">\n          <AlertIcon />\n          <AlertDescription>\n            Your deposit must be {formatNumber(parseFloat(minDelegation.toString()))} {symbol} or\n            higher\n          </AlertDescription>\n        </Alert>\n      </Collapse>\n      <Collapse in={overAvailableBalance} animateOpacity>\n        <Alert mb={6} status=\"error\" borderRadius=\"6px\">\n          <AlertIcon />\n          <AlertDescription>\n            You cannot Deposit & Lock more Collateral than your Balance amount\n          </AlertDescription>\n        </Alert>\n      </Collapse>\n\n      <Collapse\n        in={\n          collateralChange.abs().gt(0) &&\n          !overAvailableBalance &&\n          collateralChange.add(currentCollateral).gte(minDelegation)\n        }\n        animateOpacity\n      >\n        <TransactionSummary mb={6} items={txSummaryItems} />\n      </Collapse>\n      <Button\n        data-cy=\"deposit submit\"\n        type=\"submit\"\n        isDisabled={\n          collateralChange.lte(0) ||\n          combinedTokenBalance === undefined ||\n          collateralChange.add(currentCollateral).lt(minDelegation) ||\n          overAvailableBalance\n        }\n      >\n        {collateralChange.lte(0) ? 'Enter Amount' : 'Deposit & Lock Collateral'}\n      </Button>\n    </Flex>\n  );\n};\n\nexport const Deposit = ({ liquidityPosition }: { liquidityPosition?: LiquidityPosition }) => {\n  const { collateralChange, setCollateralChange } = useContext(ManagePositionContext);\n  const { network } = useNetwork();\n\n  const { collateralSymbol } = useParams();\n\n  const { data: collateralType } = useCollateralType(collateralSymbol);\n  const { data: transferrableSnx } = useTransferableSynthetix();\n  const isBase = isBaseAndromeda(network?.id, network?.preset);\n  const { data: wrapperToken } = useGetWrapperToken(getSpotMarketId(collateralSymbol));\n\n  // TODO: This will need refactoring\n  const balanceAddress = isBase ? wrapperToken : collateralType?.tokenAddress;\n\n  const { data: tokenBalance } = useTokenBalance(balanceAddress);\n\n  const { data: ethBalance } = useEthBalance();\n\n  if (!collateralType || !liquidityPosition?.accountCollateral) {\n    return null;\n  }\n\n  return (\n    <DepositUi\n      accountCollateral={liquidityPosition.accountCollateral}\n      displaySymbol={collateralType?.displaySymbol || ''}\n      tokenBalance={tokenBalance}\n      snxBalance={transferrableSnx}\n      ethBalance={ethBalance}\n      symbol={collateralType?.symbol || ''}\n      setCollateralChange={setCollateralChange}\n      collateralChange={collateralChange}\n      minDelegation={collateralType.minDelegationD18}\n      currentCollateral={liquidityPosition?.collateralAmount ?? ZEROWEI}\n      currentDebt={liquidityPosition?.debt ?? ZEROWEI}\n      collateralPrice={liquidityPosition?.collateralPrice ?? ZEROWEI}\n      isBase={isBase}\n    />\n  );\n};\n","import { Alert, AlertIcon, Button, Collapse, Flex, Text } from '@chakra-ui/react';\nimport { Amount } from '@snx-v3/Amount';\nimport { BorderBox } from '@snx-v3/BorderBox';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { ManagePositionContext } from '@snx-v3/ManagePositionContext';\nimport { NumberInput } from '@snx-v3/NumberInput';\nimport { useAccountCollateral } from '@snx-v3/useAccountCollateral';\nimport { useAccountCollateralUnlockDate } from '@snx-v3/useAccountCollateralUnlockDate';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { useCollateralType } from '@snx-v3/useCollateralTypes';\nimport { LiquidityPosition } from '@snx-v3/useLiquidityPosition';\nimport { useSystemToken } from '@snx-v3/useSystemToken';\nimport { useTokenPrice } from '@snx-v3/useTokenPrice';\nimport { useWithdrawTimer } from '@snx-v3/useWithdrawTimer';\nimport { useContext, useMemo } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { ZEROWEI } from '@snx-v3/constants';\nimport { TokenIcon } from '../TokenIcon';\n\nexport const Withdraw = ({\n  liquidityPosition,\n  isDebtWithdrawal = false,\n}: {\n  liquidityPosition?: LiquidityPosition;\n  isDebtWithdrawal?: boolean;\n}) => {\n  const { setWithdrawAmount, withdrawAmount } = useContext(ManagePositionContext);\n  const accountId = liquidityPosition?.accountId;\n  const params = useParams();\n  const { data: collateralType } = useCollateralType(params.collateralSymbol);\n  const { network } = useNetwork();\n  const isBase = isBaseAndromeda(network?.id, network?.preset);\n\n  const { data: systemToken } = useSystemToken();\n  const { data: systemTokenBalance } = useAccountCollateral(accountId, systemToken?.address);\n\n  const maxWithdrawable = useMemo(() => {\n    if (isBase) {\n      return (liquidityPosition?.accountCollateral.availableCollateral || ZEROWEI).add(\n        systemTokenBalance?.availableCollateral || ZEROWEI\n      );\n    }\n    if (isDebtWithdrawal) {\n      return systemTokenBalance?.availableCollateral || ZEROWEI;\n    }\n    return liquidityPosition?.accountCollateral.availableCollateral || ZEROWEI;\n  }, [\n    isBase,\n    isDebtWithdrawal,\n    liquidityPosition?.accountCollateral.availableCollateral,\n    systemTokenBalance?.availableCollateral,\n  ]);\n\n  const { data: accountCollateralUnlockDate, isLoading: isLoadingDate } =\n    useAccountCollateralUnlockDate({\n      accountId,\n    });\n\n  const symbol = isDebtWithdrawal ? systemToken?.symbol : collateralType?.symbol;\n  const price = useTokenPrice(symbol);\n  const { minutes, hours, isRunning } = useWithdrawTimer(accountId);\n  const unlockDate = !isLoadingDate ? accountCollateralUnlockDate : null;\n\n  return (\n    <Flex flexDirection=\"column\">\n      <Text color=\"gray./50\" fontSize=\"sm\" fontWeight=\"700\" mb=\"3\">\n        Withdraw {!isDebtWithdrawal ? 'Collateral' : ''}\n      </Text>\n      <BorderBox display=\"flex\" p={3} mb=\"6\">\n        <Flex alignItems=\"flex-start\" flexDir=\"column\" gap=\"1\">\n          <BorderBox display=\"flex\" py={1.5} px={2.5}>\n            <Text display=\"flex\" gap={2} fontSize=\"16px\" alignItems=\"center\" fontWeight=\"600\">\n              <TokenIcon symbol={symbol} width={16} height={16} />\n              {symbol}\n            </Text>\n          </BorderBox>\n          <Flex fontSize=\"12px\" gap=\"1\">\n            <Text>{isDebtWithdrawal ? 'Max Withdraw:' : 'Unlocked:'}</Text>\n            <Amount value={maxWithdrawable} />\n            {maxWithdrawable.gt(0) && (\n              <Text\n                cursor=\"pointer\"\n                onClick={() => {\n                  if (!maxWithdrawable) {\n                    return;\n                  }\n                  setWithdrawAmount(maxWithdrawable);\n                }}\n                color=\"cyan.500\"\n                fontWeight={700}\n              >\n                Max\n              </Text>\n            )}\n          </Flex>\n        </Flex>\n        <Flex flexDir=\"column\" flexGrow={1}>\n          <NumberInput\n            InputProps={{\n              isRequired: true,\n              'data-cy': 'withdraw amount input',\n              'data-max': maxWithdrawable.toString(),\n              type: 'number',\n              min: 0,\n            }}\n            value={withdrawAmount}\n            onChange={(val) => setWithdrawAmount(val)}\n            max={maxWithdrawable}\n            min={ZEROWEI}\n          />\n          <Flex fontSize=\"xs\" color=\"whiteAlpha.700\" alignSelf=\"flex-end\" gap=\"1\">\n            {price.gt(0) && <Amount prefix=\"$\" value={withdrawAmount.abs().mul(price)} />}\n          </Flex>\n        </Flex>\n      </BorderBox>\n\n      <Collapse in={maxWithdrawable.gt(0) && isRunning} animateOpacity>\n        <Alert status=\"warning\" mb=\"6\" borderRadius=\"6px\">\n          <AlertIcon />\n          <Text>\n            You will be able to withdraw assets in {hours}H{minutes}M. Any account activity will\n            reset this timer to 24H.\n          </Text>\n        </Alert>\n      </Collapse>\n\n      <Collapse in={maxWithdrawable.gt(0) && !isRunning} animateOpacity>\n        <Alert status=\"success\" mb=\"6\" borderRadius=\"6px\">\n          <AlertIcon />\n          <Text>\n            You can now withdraw <Amount value={maxWithdrawable} suffix={` ${symbol}`} />\n          </Text>\n        </Alert>\n      </Collapse>\n\n      <Collapse in={withdrawAmount.gt(maxWithdrawable)} animateOpacity>\n        <Alert colorScheme=\"red\" mb=\"6\" borderRadius=\"6px\">\n          <AlertIcon />\n          <Text>\n            You cannot Withdraw more {!isDebtWithdrawal ? 'Collateral' : ''} than your Unlocked\n            Balance\n          </Text>\n        </Alert>\n      </Collapse>\n\n      <Button\n        isDisabled={\n          withdrawAmount.lte(0) || isRunning || !unlockDate || withdrawAmount.gt(maxWithdrawable)\n        }\n        data-cy=\"claim submit\"\n        type=\"submit\"\n      >\n        {withdrawAmount.gt(0) ? 'Withdraw' : 'Enter Amount'}\n      </Button>\n    </Flex>\n  );\n};\n","export const COLLATERALACTIONS = [\n  {\n    title: 'Deposit & Lock',\n    link: 'deposit',\n    icon: (fill: 'white' | 'cyan') => (\n      <svg\n        width=\"37\"\n        height=\"36\"\n        viewBox=\"0 0 37 36\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          fillRule=\"evenodd\"\n          clipRule=\"evenodd\"\n          d=\"M6.875 18C6.875 15.7218 8.72183 13.875 11 13.875H26C28.2782 13.875 30.125 15.7218 30.125 18V27C30.125 29.2782 28.2782 31.125 26 31.125H11C8.72183 31.125 6.875 29.2782 6.875 27V18ZM11 16.125C9.96447 16.125 9.125 16.9645 9.125 18V27C9.125 28.0355 9.96447 28.875 11 28.875H26C27.0355 28.875 27.875 28.0355 27.875 27V18C27.875 16.9645 27.0355 16.125 26 16.125H11Z\"\n          fill={fill === 'cyan' ? '#00D1FF' : 'white'}\n        />\n        <path\n          fillRule=\"evenodd\"\n          clipRule=\"evenodd\"\n          d=\"M11.375 12C11.375 8.06497 14.565 4.875 18.5 4.875C22.435 4.875 25.625 8.06497 25.625 12V16.125H11.375V12ZM18.5 7.125C15.8076 7.125 13.625 9.30761 13.625 12V13.875H23.375V12C23.375 9.30761 21.1924 7.125 18.5 7.125Z\"\n          fill={fill === 'cyan' ? '#00D1FF' : 'white'}\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'Unlock',\n    link: 'undelegate',\n    icon: (fill: 'white' | 'cyan') => (\n      <svg\n        width=\"32\"\n        height=\"28\"\n        viewBox=\"0 0 32 28\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          fillRule=\"evenodd\"\n          clipRule=\"evenodd\"\n          d=\"M0.375 14C0.375 11.7218 2.22183 9.875 4.5 9.875H19.5C21.7782 9.875 23.625 11.7218 23.625 14V23C23.625 25.2782 21.7782 27.125 19.5 27.125H4.5C2.22183 27.125 0.375 25.2782 0.375 23V14ZM4.5 12.125C3.46447 12.125 2.625 12.9645 2.625 14V23C2.625 24.0355 3.46447 24.875 4.5 24.875H19.5C20.5355 24.875 21.375 24.0355 21.375 23V14C21.375 12.9645 20.5355 12.125 19.5 12.125H4.5Z\"\n          fill={fill === 'cyan' ? '#00D1FF' : 'white'}\n        />\n        <path\n          fillRule=\"evenodd\"\n          clipRule=\"evenodd\"\n          d=\"M16.875 8C16.875 4.06497 20.065 0.875 24 0.875C27.935 0.875 31.125 4.06497 31.125 8V11H28.875V8C28.875 5.30761 26.6924 3.125 24 3.125C21.3076 3.125 19.125 5.30761 19.125 8V11H16.875V8Z\"\n          fill={fill === 'cyan' ? '#00D1FF' : 'white'}\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'Withdraw',\n    link: 'withdraw',\n    icon: (fill: 'white' | 'cyan') => (\n      <svg\n        width=\"37\"\n        height=\"36\"\n        viewBox=\"0 0 37 36\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          d=\"M6.60986 29.7349C6.60986 29.942 6.77776 30.1099 6.98486 30.1099L28.7349 30.1099C28.942 30.1099 29.1099 29.942 29.1099 29.7349L29.1099 21.1099L31.3599 21.1099L31.3599 29.7349C31.3599 31.1846 30.1846 32.3599 28.7349 32.3599L6.98486 32.3599C5.53512 32.3599 4.35986 31.1846 4.35986 29.7349L4.35986 21.1099L6.60986 21.1099L6.60986 22.2348L6.60986 29.7349Z\"\n          fill={fill === 'cyan' ? '#00D1FF' : 'white'}\n        />\n        <path\n          d=\"M18.9849 26.7349L16.7349 26.7349L16.7349 7.94653L12.3555 12.3259L10.8728 10.6273L17.8599 3.64019L24.8469 10.6273L23.3643 12.3259L18.9849 7.94653L18.9849 26.7349Z\"\n          fill={fill === 'cyan' ? '#00D1FF' : 'white'}\n        />\n      </svg>\n    ),\n  },\n];\n\nexport const DEBTACTIONS = (isBase: boolean) => {\n  const actions = [\n    {\n      title: isBase ? 'Claim' : 'Claim/Borrow',\n      link: 'claim',\n      icon: (fill: 'white' | 'cyan') => (\n        <svg\n          width=\"37\"\n          height=\"36\"\n          viewBox=\"0 0 37 36\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <g clipPath=\"url(#clip0_11314_79978)\">\n            <path\n              fillRule=\"evenodd\"\n              clipRule=\"evenodd\"\n              d=\"M16.0903 8.50714C9.39782 8.50714 3.97247 13.9325 3.97247 20.625C3.97247 27.3175 9.39782 32.7429 16.0903 32.7429C22.7828 32.7429 28.2082 27.3175 28.2082 20.625C28.2082 13.9325 22.7828 8.50714 16.0903 8.50714ZM1.46533 20.625C1.46533 12.5478 8.01317 6 16.0903 6C24.1675 6 30.7153 12.5478 30.7153 20.625C30.7153 28.7022 24.1675 35.25 16.0903 35.25C8.01317 35.25 1.46533 28.7022 1.46533 20.625Z\"\n              fill={fill === 'cyan' ? '#00D1FF' : 'white'}\n            />\n            <path\n              fillRule=\"evenodd\"\n              clipRule=\"evenodd\"\n              d=\"M14.5792 17.9742C14.589 17.5066 14.7225 17.3161 14.8124 17.2254C14.931 17.1058 15.1602 16.9772 15.5845 16.9097C16.4687 16.769 17.6646 16.9739 18.6515 17.2338L19.8638 17.553L20.5023 15.1286L19.29 14.8093C18.2491 14.5351 16.6222 14.2059 15.1905 14.4337C14.4569 14.5505 13.6548 14.8318 13.0317 15.4605C12.3834 16.1147 12.0715 16.9997 12.0715 18.0296V18.0771L12.0751 18.1244C12.1655 19.316 12.8745 20.108 13.6098 20.6288C14.284 21.1062 15.1197 21.4539 15.7947 21.7348C15.8202 21.7454 15.8454 21.7559 15.8704 21.7664C16.6329 22.084 17.1988 22.3286 17.591 22.6158C17.9362 22.8687 17.9707 23.0216 17.9707 23.1567C17.9707 23.6803 17.8165 23.8884 17.6957 23.9976C17.5342 24.1438 17.2307 24.2862 16.7131 24.3507C15.6587 24.482 14.289 24.2239 13.2807 23.9538L12.0698 23.6296L11.4212 26.0513L12.6321 26.3756C13.6977 26.661 15.462 27.0331 17.023 26.8386C17.8131 26.7402 18.6878 26.4808 19.3774 25.8572C20.1078 25.1967 20.4778 24.2672 20.4778 23.1567C20.4778 21.9459 19.8008 21.1267 19.0724 20.5932C18.4094 20.1076 17.5679 19.7573 16.8907 19.4754C16.8718 19.4675 16.8531 19.4597 16.8345 19.452C16.0731 19.1348 15.4848 18.8844 15.0588 18.5828C14.6976 18.3269 14.602 18.1399 14.5792 17.9742Z\"\n              fill={fill === 'cyan' ? '#00D1FF' : 'white'}\n            />\n            <path\n              fillRule=\"evenodd\"\n              clipRule=\"evenodd\"\n              d=\"M16.0903 25.0125C16.7827 25.0125 17.3439 25.5737 17.3439 26.2661V29.4H14.8368V26.2661C14.8368 25.5737 15.398 25.0125 16.0903 25.0125Z\"\n              fill={fill === 'cyan' ? '#00D1FF' : 'white'}\n            />\n            <path\n              fillRule=\"evenodd\"\n              clipRule=\"evenodd\"\n              d=\"M17.3439 11.85V14.9839C17.3439 15.6763 16.7827 16.2375 16.0903 16.2375C15.398 16.2375 14.8368 15.6763 14.8368 14.9839V11.85H17.3439Z\"\n              fill={fill === 'cyan' ? '#00D1FF' : 'white'}\n            />\n            <path\n              d=\"M30.5 4.5V1.5H33.5V4.5H36.5V7.5H33.5V10.5H30.5V7.5H27.5V4.5H30.5Z\"\n              fill={fill === 'cyan' ? '#00D1FF' : 'white'}\n            />\n          </g>\n          <defs>\n            <clipPath id=\"clip0_11314_79978\">\n              <rect\n                width=\"36\"\n                height=\"36\"\n                fill={fill === 'cyan' ? '#00D1FF' : 'white'}\n                transform=\"translate(0.5)\"\n              />\n            </clipPath>\n          </defs>\n        </svg>\n      ),\n    },\n    {\n      title: 'Repay Debt',\n      link: 'repay',\n      icon: (fill: 'white' | 'cyan') => (\n        <svg\n          width=\"37\"\n          height=\"36\"\n          viewBox=\"0 0 37 36\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <g clipPath=\"url(#clip0_11314_79981)\">\n            <path\n              fillRule=\"evenodd\"\n              clipRule=\"evenodd\"\n              d=\"M16.0903 8.50714C9.39782 8.50714 3.97247 13.9325 3.97247 20.625C3.97247 27.3175 9.39782 32.7429 16.0903 32.7429C22.7828 32.7429 28.2082 27.3175 28.2082 20.625C28.2082 13.9325 22.7828 8.50714 16.0903 8.50714ZM1.46533 20.625C1.46533 12.5478 8.01317 6 16.0903 6C24.1675 6 30.7153 12.5478 30.7153 20.625C30.7153 28.7022 24.1675 35.25 16.0903 35.25C8.01317 35.25 1.46533 28.7022 1.46533 20.625Z\"\n              fill={fill === 'cyan' ? '#00D1FF' : 'white'}\n            />\n            <path\n              fillRule=\"evenodd\"\n              clipRule=\"evenodd\"\n              d=\"M14.5792 17.9742C14.589 17.5066 14.7225 17.3161 14.8124 17.2254C14.931 17.1058 15.1602 16.9772 15.5845 16.9097C16.4687 16.769 17.6646 16.9739 18.6515 17.2338L19.8638 17.553L20.5023 15.1286L19.29 14.8093C18.2491 14.5351 16.6222 14.2059 15.1905 14.4337C14.4569 14.5505 13.6548 14.8318 13.0317 15.4605C12.3834 16.1147 12.0715 16.9997 12.0715 18.0296V18.0771L12.0751 18.1244C12.1655 19.316 12.8745 20.108 13.6098 20.6288C14.284 21.1062 15.1197 21.4539 15.7947 21.7348C15.8202 21.7454 15.8454 21.7559 15.8704 21.7664C16.6329 22.084 17.1988 22.3286 17.591 22.6158C17.9362 22.8687 17.9707 23.0216 17.9707 23.1567C17.9707 23.6803 17.8165 23.8884 17.6957 23.9976C17.5342 24.1438 17.2307 24.2862 16.7131 24.3507C15.6587 24.482 14.289 24.2239 13.2807 23.9538L12.0698 23.6296L11.4212 26.0513L12.6321 26.3756C13.6977 26.661 15.462 27.0331 17.023 26.8386C17.8131 26.7402 18.6878 26.4808 19.3774 25.8572C20.1078 25.1967 20.4778 24.2672 20.4778 23.1567C20.4778 21.9459 19.8008 21.1267 19.0724 20.5932C18.4094 20.1076 17.5679 19.7573 16.8907 19.4754C16.8718 19.4675 16.8531 19.4597 16.8345 19.452C16.0731 19.1348 15.4848 18.8844 15.0588 18.5828C14.6976 18.3269 14.602 18.1399 14.5792 17.9742Z\"\n              fill={fill === 'cyan' ? '#00D1FF' : 'white'}\n            />\n            <path\n              fillRule=\"evenodd\"\n              clipRule=\"evenodd\"\n              d=\"M16.0903 25.0125C16.7827 25.0125 17.3439 25.5737 17.3439 26.2661V29.4H14.8368V26.2661C14.8368 25.5737 15.398 25.0125 16.0903 25.0125Z\"\n              fill={fill === 'cyan' ? '#00D1FF' : 'white'}\n            />\n            <path\n              fillRule=\"evenodd\"\n              clipRule=\"evenodd\"\n              d=\"M17.3439 11.85V14.9839C17.3439 15.6763 16.7827 16.2375 16.0903 16.2375C15.398 16.2375 14.8368 15.6763 14.8368 14.9839V11.85H17.3439Z\"\n              fill={fill === 'cyan' ? '#00D1FF' : 'white'}\n            />\n            <path\n              d=\"M30.5 4.5H33.5H36.5V7.5H33.5H30.5H27.5V4.5H30.5Z\"\n              fill={fill === 'cyan' ? '#00D1FF' : 'white'}\n            />\n          </g>\n          <defs>\n            <clipPath id=\"clip0_11314_79981\">\n              <rect\n                width=\"36\"\n                height=\"36\"\n                fill={fill === 'cyan' ? '#00D1FF' : 'white'}\n                transform=\"translate(0.5)\"\n              />\n            </clipPath>\n          </defs>\n        </svg>\n      ),\n    },\n  ];\n\n  if (isBase) {\n    return actions;\n  }\n\n  return [\n    ...actions,\n    {\n      title: 'Withdraw',\n      link: 'withdraw-debt',\n      icon: (fill: 'white' | 'cyan') => (\n        <svg\n          width=\"37\"\n          height=\"36\"\n          viewBox=\"0 0 37 36\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            d=\"M6.60986 29.7349C6.60986 29.942 6.77776 30.1099 6.98486 30.1099L28.7349 30.1099C28.942 30.1099 29.1099 29.942 29.1099 29.7349L29.1099 21.1099L31.3599 21.1099L31.3599 29.7349C31.3599 31.1846 30.1846 32.3599 28.7349 32.3599L6.98486 32.3599C5.53512 32.3599 4.35986 31.1846 4.35986 29.7349L4.35986 21.1099L6.60986 21.1099L6.60986 22.2348L6.60986 29.7349Z\"\n            fill={fill === 'cyan' ? '#00D1FF' : 'white'}\n          />\n          <path\n            d=\"M18.9849 26.7349L16.7349 26.7349L16.7349 7.94653L12.3555 12.3259L10.8728 10.6273L17.8599 3.64019L24.8469 10.6273L23.3643 12.3259L18.9849 7.94653L18.9849 26.7349Z\"\n            fill={fill === 'cyan' ? '#00D1FF' : 'white'}\n          />\n        </svg>\n      ),\n    },\n  ];\n};\n","import {\n  Box,\n  Divider,\n  Flex,\n  Skeleton,\n  Tab,\n  TabList,\n  TabPanel,\n  TabPanels,\n  Tabs,\n  Text,\n} from '@chakra-ui/react';\nimport { calculateCRatio } from '@snx-v3/calculations';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { ManagePositionContext } from '@snx-v3/ManagePositionContext';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { useCollateralType } from '@snx-v3/useCollateralTypes';\nimport { LiquidityPosition } from '@snx-v3/useLiquidityPosition';\nimport { useParams } from '@snx-v3/useParams';\nimport { validatePosition } from '@snx-v3/validatePosition';\nimport { safeImport } from '@synthetixio/safe-import';\nimport { wei } from '@synthetixio/wei';\nimport { FormEvent, lazy, Suspense, useCallback, useContext, useEffect, useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { z } from 'zod';\nimport { Borrow, Claim, Deposit, Repay, Undelegate } from '../';\nimport { Withdraw } from '../Withdraw/Withdraw';\nimport { COLLATERALACTIONS, DEBTACTIONS } from './actions';\n\nconst RepayModal = lazy(() => safeImport(() => import('@snx-v3/RepayModal')));\nconst BorrowModal = lazy(() => safeImport(() => import('@snx-v3/BorrowModal')));\nconst ClaimModal = lazy(() => safeImport(() => import('@snx-v3/ClaimModal')));\nconst DepositModal = lazy(() => safeImport(() => import('@snx-v3/DepositModal')));\nconst UndelegateModal = lazy(() => safeImport(() => import('@snx-v3/UndelegateModal')));\nconst WithdrawModal = lazy(() => safeImport(() => import('@snx-v3/WithdrawModal')));\n\nconst validActions = [\n  'borrow',\n  'deposit',\n  'repay',\n  'claim',\n  'undelegate',\n  'withdraw',\n  'withdraw-debt',\n] as const;\nconst ManageActionSchema = z.enum(validActions);\nexport type ManageAction = z.infer<typeof ManageActionSchema>;\n\nconst getInitialTab = (manageAction?: ManageAction) => {\n  if (!manageAction || COLLATERALACTIONS.find((aciton) => aciton.link === manageAction)) {\n    return 'collateral';\n  }\n\n  return 'debt';\n};\n\nexport const ManageAction = ({\n  liquidityPosition,\n  setTxnModalOpen,\n  txnModalOpen,\n}: {\n  liquidityPosition?: LiquidityPosition;\n  setTxnModalOpen: (action?: ManageAction) => void;\n  txnModalOpen?: ManageAction;\n}) => {\n  const params = useParams();\n  const { network } = useNetwork();\n\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const { debtChange, collateralChange, setCollateralChange, setDebtChange, setWithdrawAmount } =\n    useContext(ManagePositionContext);\n\n  const { data: collateralType } = useCollateralType(params.collateralSymbol);\n  const isBase = isBaseAndromeda(network?.id, network?.preset);\n\n  const { isValid } = validatePosition({\n    issuanceRatioD18: collateralType?.issuanceRatioD18,\n    collateralAmount: liquidityPosition?.collateralAmount,\n    collateralPrice: liquidityPosition?.collateralPrice,\n    debt: liquidityPosition?.debt,\n    collateralChange,\n    debtChange,\n  });\n\n  const parsedActionParam = ManageActionSchema.safeParse(params.manageAction);\n  const parsedAction = parsedActionParam.success ? parsedActionParam.data : undefined;\n\n  const isFormValid = isBase ? true : isValid;\n\n  const onSubmit = useCallback(\n    (e: FormEvent) => {\n      e.preventDefault();\n      const form = e.target as HTMLFormElement;\n      if (!form.reportValidity() || !isFormValid) {\n        return;\n      }\n      setTxnModalOpen(parsedAction);\n    },\n    [isFormValid, parsedAction, setTxnModalOpen]\n  );\n\n  useEffect(() => {\n    // This is just for initial state, if we have a manage action selected return\n    const queryParams = new URLSearchParams(location.search);\n\n    if (queryParams.get('manageAction')) {\n      return;\n    }\n    if (!liquidityPosition) return;\n    if (!collateralType) return;\n\n    const cRatio = calculateCRatio(liquidityPosition.debt, liquidityPosition.collateralValue);\n    const canBorrow =\n      !isBase && (liquidityPosition.debt.eq(0) || cRatio.gt(collateralType.issuanceRatioD18));\n\n    if (canBorrow) {\n      queryParams.set('manageAction', 'borrow');\n      navigate({ pathname: location.pathname, search: queryParams.toString() }, { replace: true });\n      return;\n    }\n\n    const cRatioIsCloseToLiqRatio = cRatio.mul(0.9).lt(collateralType.liquidationRatioD18);\n\n    if (cRatioIsCloseToLiqRatio) {\n      queryParams.set('manageAction', isBase ? 'deposit' : 'repay');\n      navigate({ pathname: location.pathname, search: queryParams.toString() }, { replace: true });\n      return;\n    }\n\n    queryParams.set('manageAction', 'deposit');\n    navigate({ pathname: location.pathname, search: queryParams.toString() }, { replace: true });\n  }, [collateralType, isBase, liquidityPosition, location.pathname, location.search, navigate]);\n\n  const setActiveAction = (action: string) => {\n    setCollateralChange(wei(0));\n    setDebtChange(wei(0));\n    const queryParams = new URLSearchParams(location.search);\n    queryParams.set('manageAction', action);\n    navigate({ pathname: location.pathname, search: queryParams.toString() }, { replace: true });\n  };\n  const manageAction = parsedAction;\n\n  const [tab, setTab] = useState(getInitialTab(manageAction));\n  const debtActions = DEBTACTIONS(isBase);\n\n  useEffect(() => {\n    setTab(getInitialTab(manageAction));\n  }, [manageAction]);\n\n  return (\n    <>\n      {!txnModalOpen ? (\n        <Box as=\"form\" onSubmit={onSubmit}>\n          <Tabs isFitted index={tab === 'collateral' ? 0 : 1}>\n            <TabList>\n              <Tab\n                color={tab === 'collateral' ? 'white' : 'gray.500'}\n                fontWeight={700}\n                fontSize={['12px', '16px']}\n                onClick={() => {\n                  if (tab !== 'collateral') {\n                    setActiveAction(COLLATERALACTIONS[0].link);\n                  }\n                }}\n                whiteSpace=\"nowrap\"\n              >\n                Manage Collateral\n              </Tab>\n              <Tab\n                color={tab === 'debt' ? 'white' : 'gray.500'}\n                fontWeight={700}\n                fontSize={['12px', '16px']}\n                onClick={() => {\n                  if (tab !== 'debt') {\n                    setActiveAction(debtActions[0].link);\n                  }\n                }}\n                whiteSpace=\"nowrap\"\n              >\n                {`Manage ${isBase ? 'PnL' : 'Debt'}`}\n              </Tab>\n            </TabList>\n\n            <TabPanels>\n              <TabPanel px=\"0\">\n                <Flex flexDir={['column', 'row']} gap={4}>\n                  {COLLATERALACTIONS.map((action) => (\n                    <Flex\n                      h=\"84px\"\n                      minH={['90px', '84px']}\n                      justifyContent=\"center\"\n                      key={action.title.concat('-tab-actions')}\n                      border=\"1px solid\"\n                      flexDir=\"column\"\n                      alignItems=\"center\"\n                      borderColor={manageAction === action.link ? 'cyan.500' : 'gray.900'}\n                      rounded=\"base\"\n                      cursor=\"pointer\"\n                      onClick={() => setActiveAction(action.link)}\n                      flex=\"1\"\n                      minWidth={['100%', 'auto']}\n                    >\n                      {action.icon(manageAction === action.link ? 'cyan' : 'white')}\n                      <Text\n                        fontSize=\"14px\"\n                        fontWeight={700}\n                        mt=\"2\"\n                        color={manageAction === action.link ? 'cyan.500' : 'white'}\n                        textAlign=\"center\"\n                        lineHeight=\"1.1\"\n                      >\n                        {action.title}\n                      </Text>\n                    </Flex>\n                  ))}\n                </Flex>\n              </TabPanel>\n              <TabPanel px=\"0\">\n                <Flex flexDir={['column', 'row']} gap={4}>\n                  {debtActions.map((action) => (\n                    <Flex\n                      flex=\"1\"\n                      h=\"84px\"\n                      minH={['90px', '84px']}\n                      justifyContent=\"center\"\n                      key={action.title.concat('-tab-actions')}\n                      border=\"1px solid\"\n                      flexDir=\"column\"\n                      alignItems=\"center\"\n                      borderColor={manageAction === action.link ? 'cyan.500' : 'gray.900'}\n                      rounded=\"base\"\n                      cursor=\"pointer\"\n                      onClick={() => setActiveAction(action.link)}\n                      minWidth={['100%', 'auto']}\n                    >\n                      {action.icon(manageAction === action.link ? 'cyan' : 'white')}\n                      <Text\n                        fontSize=\"14px\"\n                        fontWeight={700}\n                        mt=\"2\"\n                        color={manageAction === action.link ? 'cyan.500' : 'white'}\n                        textAlign=\"center\"\n                        lineHeight=\"1.1\"\n                      >\n                        {action.title}\n                      </Text>\n                    </Flex>\n                  ))}\n                </Flex>\n              </TabPanel>\n            </TabPanels>\n          </Tabs>\n\n          <Flex direction=\"column\">\n            {manageAction === 'borrow' ? <Borrow liquidityPosition={liquidityPosition} /> : null}\n            {manageAction === 'claim' ? <Claim liquidityPosition={liquidityPosition} /> : null}\n            {manageAction === 'withdraw' ? (\n              <Withdraw liquidityPosition={liquidityPosition} />\n            ) : null}\n            {manageAction === 'withdraw-debt' ? (\n              <Withdraw liquidityPosition={liquidityPosition} isDebtWithdrawal />\n            ) : null}\n            {manageAction === 'deposit' ? <Deposit liquidityPosition={liquidityPosition} /> : null}\n            {manageAction === 'repay' ? <Repay liquidityPosition={liquidityPosition} /> : null}\n            {manageAction === 'undelegate' ? (\n              <Undelegate liquidityPosition={liquidityPosition} />\n            ) : null}\n          </Flex>\n        </Box>\n      ) : null}\n\n      <Suspense\n        fallback={\n          <Flex gap={4} flexDirection=\"column\">\n            <Skeleton maxW=\"232px\" width=\"100%\" height=\"20px\" />\n            <Divider my={4} />\n            <Skeleton width=\"100%\" height=\"20px\" />\n            <Skeleton width=\"100%\" height=\"20px\" />\n          </Flex>\n        }\n      >\n        {txnModalOpen === 'repay' ? (\n          <RepayModal\n            availableCollateral={liquidityPosition?.usdCollateral.availableCollateral}\n            onClose={() => {\n              setCollateralChange(wei(0));\n              setDebtChange(wei(0));\n              setTxnModalOpen(undefined);\n            }}\n            isOpen={txnModalOpen === 'repay'}\n          />\n        ) : null}\n        {txnModalOpen === 'borrow' ? (\n          <BorrowModal\n            onClose={() => {\n              setCollateralChange(wei(0));\n              setDebtChange(wei(0));\n              setTxnModalOpen(undefined);\n            }}\n            isOpen={txnModalOpen === 'borrow'}\n          />\n        ) : null}\n        {txnModalOpen === 'claim' ? (\n          <ClaimModal\n            onClose={() => {\n              setCollateralChange(wei(0));\n              setDebtChange(wei(0));\n              setTxnModalOpen(undefined);\n            }}\n            isOpen={txnModalOpen === 'claim'}\n            liquidityPosition={liquidityPosition}\n          />\n        ) : null}\n        {txnModalOpen === 'deposit' ? (\n          <DepositModal\n            onClose={() => {\n              setCollateralChange(wei(0));\n              setDebtChange(wei(0));\n              setTxnModalOpen(undefined);\n            }}\n            isOpen={txnModalOpen === 'deposit'}\n            liquidityPosition={liquidityPosition}\n          />\n        ) : null}\n        {txnModalOpen === 'undelegate' ? (\n          <UndelegateModal\n            liquidityPosition={liquidityPosition}\n            onClose={() => {\n              setCollateralChange(wei(0));\n              setDebtChange(wei(0));\n              setTxnModalOpen(undefined);\n            }}\n            isOpen={txnModalOpen === 'undelegate'}\n          />\n        ) : null}\n        {txnModalOpen === 'withdraw' ? (\n          <WithdrawModal\n            liquidityPosition={liquidityPosition}\n            onClose={() => {\n              setCollateralChange(wei(0));\n              setDebtChange(wei(0));\n              setWithdrawAmount(wei(0));\n              setTxnModalOpen(undefined);\n            }}\n            isOpen={txnModalOpen === 'withdraw'}\n            account\n          />\n        ) : null}\n\n        {txnModalOpen === 'withdraw-debt' ? (\n          <WithdrawModal\n            liquidityPosition={liquidityPosition}\n            onClose={() => {\n              setCollateralChange(wei(0));\n              setDebtChange(wei(0));\n              setWithdrawAmount(wei(0));\n              setTxnModalOpen(undefined);\n            }}\n            isOpen={txnModalOpen === 'withdraw-debt'}\n            account\n            isDebtWithdrawal\n          />\n        ) : null}\n      </Suspense>\n    </>\n  );\n};\n","import { InfoIcon } from '@chakra-ui/icons';\nimport { Box, Tooltip, Text } from '@chakra-ui/react';\nimport { FC } from 'react';\n\nexport const LineWithText: FC<{\n  left: string;\n  text: string;\n  tooltipText: string;\n}> = ({ left, text, tooltipText }) => {\n  return (\n    <>\n      <Box\n        position=\"absolute\"\n        height=\"40%\"\n        transform=\"translateX(-50%)\"\n        left={left}\n        top={0}\n        bottom={0}\n        margin=\"auto\"\n      >\n        <Text\n          color=\"gray.700\"\n          whiteSpace=\"nowrap\"\n          fontSize=\"xx-small\"\n          transform=\"translateY(calc(-100% - 10px) )\"\n        >\n          {text}{' '}\n          <Tooltip label={tooltipText} hasArrow>\n            <InfoIcon />\n          </Tooltip>\n        </Text>\n      </Box>\n      <Box\n        position=\"absolute\"\n        height=\"40%\"\n        width=\"1px\"\n        bg=\"gray.900\"\n        left={left}\n        top={0}\n        bottom={0}\n        margin=\"auto\"\n      />\n    </>\n  );\n};\n","import { InfoIcon, TriangleDownIcon, TriangleUpIcon } from '@chakra-ui/icons';\nimport { Box, Flex, Progress, Text, Tooltip } from '@chakra-ui/react';\nimport { FC } from 'react';\nimport { CRatioAmount } from './CRatioAmount';\nimport { CRatioBadge } from './CRatioBadge';\nimport { getHealthVariant, getProgressSize, ratioIsMaxUInt } from './CRatioBar.utils';\nimport { LineWithText } from './LineWithText';\n\nexport const CRatioBarUi: FC<{\n  liquidationCratio: number;\n  targetCratio: number;\n  currentCRatio: number;\n  newCratio?: number;\n  hasChanges: boolean;\n}> = ({ targetCratio, liquidationCratio, currentCRatio, newCratio, hasChanges }) => {\n  const variant = hasChanges\n    ? getHealthVariant({\n        targetCratio: targetCratio,\n        liquidationCratio: liquidationCratio,\n        cRatio: newCratio,\n      })\n    : getHealthVariant({\n        targetCratio: targetCratio,\n        liquidationCratio: liquidationCratio,\n        cRatio: currentCRatio,\n      });\n\n  const newBarSize = getProgressSize({\n    cRatio: newCratio,\n    targetCratio: targetCratio,\n    liquidationCratio: liquidationCratio,\n  });\n\n  const currentBarSize = getProgressSize({\n    cRatio: currentCRatio,\n    targetCratio: targetCratio,\n    liquidationCratio: liquidationCratio,\n  });\n\n  return (\n    <Flex flexDir=\"column\" gap=\"2\">\n      <Text color=\"gray.500\" fontSize=\"xs\">\n        C-Ratio{' '}\n        <Tooltip\n          textAlign=\"left\"\n          label=\"C-ratio is a dynamic number that represents a ratio between your locked collateral and your debt\"\n          p=\"3\"\n        >\n          <InfoIcon w=\"10px\" h=\"10px\" />\n        </Tooltip>\n      </Text>\n      <Flex\n        color=\"white\"\n        fontWeight={800}\n        fontSize=\"20px\"\n        flexDir={['column', 'row']}\n        alignItems=\"center\"\n        gap={2}\n      >\n        <CRatioAmount value={currentCRatio} />\n\n        {hasChanges ? (\n          <>\n            <span>&rarr;</span>\n            <Text>\n              {!newCratio || newCratio < 0\n                ? 'N/A'\n                : ratioIsMaxUInt(newCratio)\n                  ? 'Infinite'\n                  : `${newCratio.toFixed(2)} %`}\n            </Text>\n          </>\n        ) : null}\n\n        {(hasChanges ? newCratio || 0 : currentCRatio) !== 0 ? (\n          <CRatioBadge\n            cRatio={hasChanges ? newCratio || 0 : currentCRatio}\n            liquidationCratio={liquidationCratio}\n            targetCratio={targetCratio}\n          />\n        ) : null}\n      </Flex>\n\n      <Box position=\"relative\" height=\"100px\" width=\"full\" overflowX=\"hidden\">\n        <>\n          <LineWithText\n            left=\"25%\"\n            text={\n              liquidationCratio ? `Liquidation < ${liquidationCratio.toFixed(0)}%` : 'Liquidation'\n            }\n            tooltipText=\"Point at which your Position gets liquidated\"\n          />\n          <LineWithText\n            left=\"75%\"\n            text={\n              targetCratio\n                ? `Borrowing Ratio ${\n                    ratioIsMaxUInt(targetCratio) ? 'Infinite' : targetCratio.toFixed(0)\n                  }%`\n                : 'Borrowing Ratio'\n            }\n            tooltipText=\"Min point at which you can borrow assets\"\n          />\n        </>\n\n        <Box top={0} bottom={0} height=\"12px\" position=\"absolute\" margin=\"auto\" width=\"100%\">\n          <Progress\n            variant={\n              currentBarSize < newBarSize && !(currentBarSize >= 100 && newBarSize > 100)\n                ? `update-${variant}`\n                : variant\n            }\n            top={0}\n            bottom={0}\n            height=\"12px\"\n            position=\"absolute\"\n            margin=\"auto\"\n            left=\"0\"\n            width=\"100%\"\n            value={Math.min(newBarSize, currentBarSize)}\n          />\n          <Progress\n            variant={currentBarSize >= newBarSize ? `update-${variant}` : variant}\n            top={0}\n            bottom={0}\n            height=\"12px\"\n            position=\"absolute\"\n            margin=\"auto\"\n            width=\"100%\"\n            left={`${Math.min(newBarSize, currentBarSize)}%`}\n            display={newCratio === 0 ? 'none' : 'block'}\n            value={Math.abs(newBarSize - currentBarSize)}\n          />\n        </Box>\n\n        <Box\n          bg={variant}\n          height=\"12px\"\n          position=\"absolute\"\n          left={`${newBarSize}%`}\n          top={0}\n          bottom={0}\n          margin=\"auto\"\n          display={newCratio === 0 ? 'none' : 'block'}\n        >\n          {currentCRatio > 0 ? (\n            <>\n              <TriangleDownIcon\n                position=\"absolute\"\n                right={0}\n                top={0}\n                transform=\"translate(50%,-100%)\"\n                color={variant}\n              />\n              <TriangleUpIcon\n                position=\"absolute\"\n                right={0}\n                bottom={0}\n                transform=\"translate(50%,100%)\"\n                color={variant}\n              />\n            </>\n          ) : null}\n        </Box>\n      </Box>\n    </Flex>\n  );\n};\n\nexport const CRatioBar: FC<{\n  liquidationCratio?: number;\n  targetCratio?: number;\n  currentCRatio?: number;\n  newCratio?: number;\n  hasChanges: boolean;\n}> = ({ newCratio, currentCRatio, targetCratio, liquidationCratio, hasChanges }) => {\n  return (\n    <CRatioBarUi\n      liquidationCratio={liquidationCratio || 100}\n      targetCratio={targetCratio || 100}\n      currentCRatio={currentCRatio || 0}\n      newCratio={newCratio}\n      hasChanges={hasChanges}\n    />\n  );\n};\n","import { Flex, Text } from '@chakra-ui/react';\nimport { BorderBox } from '@snx-v3/BorderBox';\nimport { ZEROWEI } from '@snx-v3/constants';\nimport { currency } from '@snx-v3/format';\nimport { CollateralType } from '@snx-v3/useCollateralTypes';\nimport { LiquidityPosition } from '@snx-v3/useLiquidityPosition';\nimport Wei from '@synthetixio/wei';\nimport { ChangeStat } from '../ChangeStat';\n\nexport function CollateralStats({\n  liquidityPosition,\n  collateralType,\n  newCollateralAmount,\n  hasChanges,\n}: {\n  liquidityPosition?: LiquidityPosition;\n  collateralType?: CollateralType;\n  newCollateralAmount: Wei;\n  collateralValue: Wei;\n  hasChanges: boolean;\n}) {\n  return (\n    <BorderBox p={4} flex=\"1\" flexDirection=\"row\" bg=\"navy.700\">\n      <Flex\n        opacity={!liquidityPosition && !hasChanges ? '40%' : '100%'}\n        flexDirection=\"column\"\n        width=\"100%\"\n      >\n        <Flex alignItems=\"center\" mb=\"4px\">\n          <Text color=\"gray.500\" fontSize=\"xs\" fontFamily=\"heading\" lineHeight=\"16px\">\n            Collateral\n          </Text>\n        </Flex>\n        <Flex width=\"100%\">\n          {liquidityPosition && collateralType ? (\n            <Flex direction=\"column\">\n              <ChangeStat\n                value={liquidityPosition.collateralAmount}\n                newValue={newCollateralAmount}\n                formatFn={(val: Wei) => (\n                  <>\n                    {currency(val)} {collateralType.displaySymbol}\n                  </>\n                )}\n                hasChanges={hasChanges}\n                data-cy=\"manage stats collateral\"\n              />\n              <ChangeStat\n                value={liquidityPosition.collateralAmount.mul(liquidityPosition.collateralPrice)}\n                newValue={newCollateralAmount.mul(liquidityPosition.collateralPrice)}\n                formatFn={(val: Wei) =>\n                  currency(val, {\n                    currency: 'USD',\n                    style: 'currency',\n                  })\n                }\n                size=\"md\"\n                hasChanges={hasChanges}\n                data-cy=\"manage stats collateral\"\n              />\n            </Flex>\n          ) : null}\n\n          {!(liquidityPosition && collateralType) ? (\n            <Flex direction=\"column\">\n              <ChangeStat\n                value={ZEROWEI}\n                newValue={newCollateralAmount}\n                formatFn={(val: Wei) => (\n                  <>\n                    {currency(val)} {collateralType?.displaySymbol}\n                  </>\n                )}\n                hasChanges={hasChanges}\n              />\n              <Text fontWeight=\"400\" color=\"white\" fontSize=\"16px\">\n                {currency(ZEROWEI, {\n                  currency: 'USD',\n                  style: 'currency',\n                })}\n              </Text>\n            </Flex>\n          ) : null}\n        </Flex>\n      </Flex>\n    </BorderBox>\n  );\n}\n","import { InfoIcon } from '@chakra-ui/icons';\nimport { Flex, Text, Tooltip } from '@chakra-ui/react';\nimport { BorderBox } from '@snx-v3/BorderBox';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { type Wei } from '@synthetixio/wei';\nimport { ChangeStat } from '../ChangeStat';\nimport { DebtAmount } from '../Positions/PositionsTable/DebtAmount';\n\nexport function DebtStats({\n  debt,\n  newDebt,\n  hasChanges,\n}: {\n  debt: Wei;\n  newDebt: Wei;\n  hasChanges: boolean;\n}) {\n  const { network } = useNetwork();\n  const isBase = isBaseAndromeda(network?.id, network?.preset);\n  return (\n    <BorderBox p={4} flex=\"1\" flexDirection=\"row\" bg=\"navy.700\">\n      <Flex flexDirection=\"column\" width=\"100%\">\n        <Flex alignItems=\"center\" mb=\"4px\">\n          <Text color=\"gray.500\" fontSize=\"xs\" fontFamily=\"heading\" lineHeight=\"16px\">\n            Debt\n          </Text>\n          <Tooltip\n            label={\n              isBase ? (\n                \"Your portion of the pool's total debt, which fluctuates based on trader performance and market conditions\"\n              ) : (\n                <Text>\n                  Debt consists of:\n                  <br />\n                  - Your portion of the pool&apos;s total debt, which fluctuates based on trader\n                  performance and market conditions\n                  <br />- The amount you&apos;ve borrowed against your collateral without incurring\n                  interest\n                </Text>\n              )\n            }\n            textAlign=\"start\"\n            py={2}\n            px={3}\n          >\n            <Flex height=\"12px\" width=\"12px\" ml=\"4px\" alignItems=\"center\" justifyContent=\"center\">\n              <InfoIcon color=\"gray.500\" height=\"10px\" width=\"10px\" />\n            </Flex>\n          </Tooltip>\n        </Flex>\n        <Flex width=\"100%\">\n          <ChangeStat\n            value={debt}\n            newValue={newDebt}\n            formatFn={(val: Wei) => <DebtAmount debt={val} as=\"span\" />}\n            hasChanges={hasChanges}\n          />\n        </Flex>\n      </Flex>\n    </BorderBox>\n  );\n}\n","import { InfoIcon } from '@chakra-ui/icons';\nimport { Flex, Text } from '@chakra-ui/react';\nimport { BorderBox } from '@snx-v3/BorderBox';\nimport { currency } from '@snx-v3/format';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { Tooltip } from '@snx-v3/Tooltip';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { type Wei } from '@synthetixio/wei';\nimport { ChangeStat } from '../ChangeStat';\n\nexport function PnlStats({\n  debt,\n  newDebt,\n  hasChanges,\n}: {\n  debt: Wei;\n  newDebt: Wei;\n  hasChanges: boolean;\n}) {\n  const { network } = useNetwork();\n  const isBase = isBaseAndromeda(network?.id, network?.preset);\n  return (\n    <BorderBox p={4} flex=\"1\" flexDirection=\"row\" bg=\"navy.700\" justifyContent=\"space-between\">\n      <Flex flexDirection=\"column\" width=\"100%\">\n        <Flex alignItems=\"center\" mb=\"4px\">\n          <Text color=\"gray.500\" fontSize=\"xs\" fontFamily=\"heading\" lineHeight=\"16px\">\n            PnL\n          </Text>\n          <Tooltip\n            label={\n              isBase ? (\n                \"Your portion of the pool's total debt, which fluctuates based on trader performance and market conditions\"\n              ) : (\n                <Text>\n                  Debt consists of:\n                  <br />\n                  - Your portion of the pool&apos;s total debt, which fluctuates based on trader\n                  performance and market conditions\n                  <br />- The amount you&apos;ve borrowed against your collateral without incurring\n                  interest\n                </Text>\n              )\n            }\n            textAlign=\"start\"\n            py={2}\n            px={3}\n          >\n            <Flex height=\"12px\" width=\"12px\" ml=\"4px\" alignItems=\"center\" justifyContent=\"center\">\n              <InfoIcon color=\"white\" height=\"9px\" width=\"9px\" />\n            </Flex>\n          </Tooltip>\n        </Flex>\n        <Flex width=\"100%\">\n          <ChangeStat\n            value={debt.mul(-1)}\n            newValue={newDebt.mul(-1)}\n            formatFn={(val: Wei) =>\n              currency(val, {\n                currency: 'USD',\n                style: 'currency',\n                maximumFractionDigits: 4,\n              })\n            }\n            withColor\n            hasChanges={hasChanges}\n          />\n        </Flex>\n      </Flex>\n    </BorderBox>\n  );\n}\n","import { Flex, Text } from '@chakra-ui/react';\nimport { BorderBox } from '@snx-v3/BorderBox';\nimport { calculateCRatio } from '@snx-v3/calculations';\nimport { ZEROWEI } from '@snx-v3/constants';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { ManagePositionContext } from '@snx-v3/ManagePositionContext';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { CollateralType, useCollateralType } from '@snx-v3/useCollateralTypes';\nimport { LiquidityPosition } from '@snx-v3/useLiquidityPosition';\nimport { useParams } from '@snx-v3/useParams';\nimport { validatePosition } from '@snx-v3/validatePosition';\nimport Wei, { wei } from '@synthetixio/wei';\nimport { FC, useContext } from 'react';\nimport { CRatioBar } from '../CRatioBar/CRatioBar';\nimport { CollateralStats } from './CollateralStats';\nimport { DebtStats } from './DebtStats';\nimport { PnlStats } from './PnlStats';\n\nexport const ManageStatsUi: FC<{\n  liquidityPosition?: LiquidityPosition;\n  collateralType?: CollateralType;\n  newCollateralAmount: Wei;\n  newDebt: Wei;\n  newCratio: Wei;\n  collateralValue: Wei;\n  debt: Wei;\n  cRatio: Wei;\n  hasChanges: boolean;\n}> = ({\n  liquidityPosition,\n  collateralType,\n  collateralValue,\n  cRatio,\n  newCollateralAmount,\n  newCratio,\n  newDebt,\n  hasChanges,\n  debt,\n}) => {\n  const { network } = useNetwork();\n\n  return (\n    <Flex direction=\"column\" gap={4}>\n      <Text color=\"white\" fontSize=\"lg\" fontFamily=\"heading\" fontWeight=\"bold\" lineHeight=\"16px\">\n        Overview\n      </Text>\n      <Flex flexWrap=\"wrap\" direction={['column', 'row']} gap={4}>\n        <CollateralStats\n          liquidityPosition={liquidityPosition}\n          collateralType={collateralType}\n          newCollateralAmount={newCollateralAmount}\n          collateralValue={collateralValue}\n          hasChanges={hasChanges}\n        />\n        {isBaseAndromeda(network?.id, network?.preset) ? (\n          <PnlStats\n            debt={liquidityPosition ? liquidityPosition.debt : ZEROWEI}\n            newDebt={newDebt}\n            hasChanges={hasChanges}\n          />\n        ) : (\n          <DebtStats\n            debt={liquidityPosition ? liquidityPosition.debt : ZEROWEI}\n            newDebt={newDebt}\n            hasChanges={hasChanges}\n          />\n        )}\n      </Flex>\n      {!isBaseAndromeda(network?.id, network?.preset) ? (\n        <BorderBox py={4} px={6} flexDirection=\"column\" bg=\"navy.700\">\n          <CRatioBar\n            hasChanges={hasChanges}\n            currentCRatio={\n              collateralValue.gt(0) && debt.eq(0)\n                ? Number.MAX_SAFE_INTEGER\n                : cRatio.toNumber() * 100\n            }\n            liquidationCratio={(collateralType?.liquidationRatioD18?.toNumber() || 0) * 100}\n            newCratio={\n              newCollateralAmount.gt(0) && newDebt.eq(0)\n                ? Number.MAX_SAFE_INTEGER\n                : newCratio.toNumber() * 100\n            }\n            targetCratio={(collateralType?.issuanceRatioD18.toNumber() || 0) * 100}\n          />\n        </BorderBox>\n      ) : null}\n    </Flex>\n  );\n};\n\nexport const ManageStats = ({ liquidityPosition }: { liquidityPosition?: LiquidityPosition }) => {\n  const { collateralSymbol } = useParams();\n  const { debtChange, collateralChange } = useContext(ManagePositionContext);\n\n  const { data: collateralType } = useCollateralType(collateralSymbol);\n\n  const collateralValue = liquidityPosition?.collateralValue || wei(0);\n\n  const cRatio = calculateCRatio(liquidityPosition?.debt || wei(0), collateralValue);\n\n  const { newCRatio, newCollateralAmount, newDebt, hasChanges } = validatePosition({\n    issuanceRatioD18: collateralType?.issuanceRatioD18,\n    collateralAmount: liquidityPosition?.collateralAmount,\n    collateralPrice: liquidityPosition?.collateralPrice,\n    debt: liquidityPosition?.debt,\n    collateralChange: collateralChange,\n    debtChange: debtChange,\n  });\n\n  return (\n    <ManageStatsUi\n      hasChanges={hasChanges}\n      newCratio={newCRatio}\n      newDebt={newDebt}\n      newCollateralAmount={newCollateralAmount}\n      liquidityPosition={liquidityPosition}\n      collateralType={collateralType}\n      cRatio={cRatio}\n      collateralValue={collateralValue}\n      debt={liquidityPosition?.debt || ZEROWEI}\n    />\n  );\n};\n","import React from 'react';\nimport {\n  Flex,\n  Spacer,\n  VStack,\n  Heading,\n  Text,\n  ListItem,\n  Button,\n  Image,\n  ListIcon,\n  List,\n  Link,\n} from '@chakra-ui/react';\nimport { CheckIcon } from '@chakra-ui/icons';\n\nexport const StepIntro = ({\n  onClose,\n  onConfirm,\n}: {\n  onClose: () => void;\n  onConfirm: () => void;\n}) => {\n  return (\n    <VStack spacing={2} align=\"start\">\n      <Flex>\n        <VStack gap={6} flex={1} align=\"start\" fontWeight=\"400\" fontSize=\"14px\">\n          <Heading size=\"sm\">Synthetix V3 is now live!</Heading>\n\n          <Text>\n            Migrate to Synthetix V3 to <b>earn fees from both V2 and V3 </b>markets and much more:\n          </Text>\n\n          <List spacing={2}>\n            <ListItem>\n              <ListIcon as={CheckIcon} color=\"cyan.500\" />\n              V2 Legacy Market Fees\n            </ListItem>\n            <ListItem>\n              <ListIcon as={CheckIcon} color=\"cyan.500\" />\n              V3 SC Pool Fees\n            </ListItem>\n            <ListItem>\n              <ListIcon as={CheckIcon} color=\"cyan.500\" />\n              LP Incentives\n            </ListItem>\n            <ListItem>\n              <ListIcon as={CheckIcon} color=\"cyan.500\" />\n              Improved LP experience\n            </ListItem>\n          </List>\n          <Text fontSize=\"sm\">\n            Learn more about{' '}\n            <Link\n              target=\"_blank\"\n              color=\"cyan.500\"\n              href=\"https://docs.synthetix.io/v/synthetix-v3-user-documentation/liquidity-providers-aka-staking/providing-liquidity-and-earning-rewards/staking-snx-on-eth-mainnet-v3-via-migration-to-legacy-market\"\n            >\n              Synthetix V3 migration process\n            </Link>\n          </Text>\n        </VStack>\n        <Flex alignItems=\"center\" justifyContent=\"center\" flex={1}>\n          <Image width=\"165px\" src=\"/synthetix-rocket.png\" alt=\"Synthetix V3 Launch\" />\n        </Flex>\n      </Flex>\n\n      <Spacer />\n      <Spacer />\n      <Spacer />\n      <Spacer />\n\n      <Button width=\"100%\" onClick={onConfirm}>\n        Start Migration\n      </Button>\n      <Button variant=\"outline\" colorScheme=\"gray\" width=\"100%\" onClick={onClose}>\n        Later\n      </Button>\n    </VStack>\n  );\n};\n","import React from 'react';\nimport { VStack, Alert, Text, Button, AlertIcon, Link, Flex } from '@chakra-ui/react';\n\nexport const StepExplain = ({\n  onClose,\n  onConfirm,\n}: {\n  onClose: () => void;\n  onConfirm: () => void;\n}) => {\n  return (\n    <VStack spacing={2} align=\"start\">\n      <Text fontWeight=\"700\">Migrating to Synthetix V3 consists of:</Text>\n      <Flex mt={2.5} flexDir=\"column\" gap={2.5} fontSize=\"14px\" fontWeight=\"400\">\n        <Flex alignItems=\"center\" gap={2.5}>\n          <Flex width={4}>\n            <svg\n              width=\"12\"\n              height=\"12\"\n              viewBox=\"0 0 12 12\"\n              fill=\"none\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M8.66602 3.33464C8.66602 4.80739 7.47211 6.0013 5.99935 6.0013C4.52659 6.0013 3.33268 4.80739 3.33268 3.33464C3.33268 1.86188 4.52659 0.667969 5.99935 0.667969C7.47211 0.667969 8.66602 1.86188 8.66602 3.33464ZM7.66602 3.33464C7.66602 4.27782 6.90541 5.01653 5.99935 5.01653C5.09329 5.01653 4.33268 4.27782 4.33268 3.33464C4.33268 2.39145 5.09329 1.65274 5.99935 1.65274C6.90541 1.65274 7.66602 2.39145 7.66602 3.33464Z\"\n                fill=\"white\"\n              />\n              <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M5.99935 6.66797C3.05383 6.66797 0.666016 8.06086 0.666016 9.77908V10.3499C0.666016 10.8937 1.11373 11.3346 1.66602 11.3346H10.3327C10.885 11.3346 11.3327 10.8937 11.3327 10.3499V9.77908C11.3327 8.06086 8.94487 6.66797 5.99935 6.66797ZM1.66602 9.77908C1.66602 9.40806 1.92996 8.89769 2.73776 8.42647C3.52361 7.96806 4.67444 7.65274 5.99935 7.65274C7.32426 7.65274 8.47509 7.96806 9.26093 8.42647C10.0687 8.89769 10.3327 9.40806 10.3327 9.77908V10.3499H1.66602V9.77908Z\"\n                fill=\"white\"\n              />\n            </svg>\n          </Flex>\n          <Text flex={1}>Creation of an Account on Synthetix V3</Text>\n        </Flex>\n        <Flex alignItems=\"center\" gap={2.5}>\n          <Flex width={4}>\n            <svg\n              width=\"16\"\n              height=\"16\"\n              viewBox=\"0 0 16 16\"\n              fill=\"none\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M12.5701 3.50845C11.9243 2.86259 10.8771 2.86259 10.2313 3.50845C9.58542 4.1543 9.58542 5.20144 10.2313 5.8473C10.8771 6.49315 11.9243 6.49315 12.5701 5.8473C13.216 5.20144 13.216 4.1543 12.5701 3.50845ZM10.9384 4.21555C11.1937 3.96022 11.6077 3.96022 11.863 4.21555C12.1184 4.47089 12.1184 4.88486 11.863 5.14019C11.6077 5.39552 11.1937 5.39552 10.9384 5.14019C10.6831 4.88486 10.6831 4.47089 10.9384 4.21555Z\"\n                fill=\"white\"\n              />\n              <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M14.4058 1.67272C14.2735 1.54042 14.1066 1.46073 13.9626 1.40881C13.8117 1.35441 13.6425 1.31534 13.4696 1.28623C13.1236 1.22799 12.7119 1.20147 12.2952 1.19264C10.2345 1.14896 8.39798 2.27302 7.20433 3.86456L6.48635 4.82186L6.43706 4.92045L3.84686 3.81037C3.65893 3.72983 3.44091 3.77182 3.29634 3.91639L1.0527 6.16003C0.857434 6.3553 0.857434 6.67188 1.0527 6.86714L1.52372 7.33816C2.18804 8.00248 3.23127 8.05696 3.95773 7.50159L4.71241 7.80346L4.31617 8.1997C4.12091 8.39496 4.12091 8.71155 4.31617 8.90681L4.37057 8.9612L3.50031 9.83146C3.30505 10.0267 3.30505 10.3433 3.50031 10.5386C3.69558 10.7338 4.01216 10.7338 4.20742 10.5386L5.07767 9.66831L6.41025 11.0009L5.54001 11.8711C5.34474 12.0664 5.34474 12.383 5.54001 12.5782C5.73527 12.7735 6.05185 12.7735 6.24711 12.5782L7.11736 11.708L7.17172 11.7624C7.36698 11.9576 7.68356 11.9576 7.87883 11.7624L8.27507 11.3661L8.57696 12.1208C8.02159 12.8473 8.07606 13.8905 8.74038 14.5548L9.21141 15.0259C9.40667 15.2211 9.72325 15.2211 9.91851 15.0259L12.1622 12.7822C12.3067 12.6377 12.3487 12.4196 12.2682 12.2317L11.1581 9.6415L11.2567 9.5922L12.214 8.87423C13.8055 7.68057 14.9296 5.84407 14.8859 3.78334C14.8771 3.36665 14.8506 2.95499 14.7923 2.60896C14.7632 2.43601 14.7241 2.26687 14.6697 2.11599C14.6178 1.97199 14.5381 1.80503 14.4058 1.67272ZM12.274 2.19241C12.6699 2.2008 13.0267 2.22574 13.3036 2.27236C13.4422 2.29568 13.5481 2.3224 13.6234 2.34953C13.6631 2.36383 13.6859 2.37534 13.6971 2.38149C13.7032 2.39263 13.7147 2.4155 13.729 2.45518C13.7562 2.53041 13.7829 2.6364 13.8062 2.77495C13.8528 3.05189 13.8778 3.40864 13.8861 3.80452C13.9215 5.4747 13.0078 7.02884 11.614 8.07423L10.7288 8.7381L8.64387 9.78058L6.29798 7.43468L7.34045 5.34972L8.00433 4.46456C9.04972 3.07071 10.6038 2.15702 12.274 2.19241ZM3.76408 4.86286L5.98907 5.81643L5.39713 7.00031L4.1224 6.49042C3.88643 6.39603 3.61693 6.45135 3.43722 6.63106C3.10409 6.96419 2.56396 6.96419 2.23083 6.63106L2.11336 6.51359L3.76408 4.86286ZM10.2621 10.0895L9.07823 10.6814L9.58813 11.9562C9.68251 12.1921 9.62719 12.4616 9.44749 12.6413C9.11435 12.9745 9.11435 13.5146 9.44749 13.8477L9.56496 13.9652L11.2157 12.3145L10.2621 10.0895ZM5.68956 8.24052L5.37683 8.55325L7.52527 10.7017L7.83801 10.389L5.68956 8.24052Z\"\n                fill=\"white\"\n              />\n              <path\n                d=\"M5.22726 11.5584C5.42252 11.3631 5.42252 11.0466 5.22726 10.8513C5.032 10.656 4.71542 10.656 4.52015 10.8513L3.50031 11.8711C3.30505 12.0664 3.30505 12.383 3.50031 12.5782C3.69558 12.7735 4.01216 12.7735 4.20742 12.5782L5.22726 11.5584Z\"\n                fill=\"white\"\n              />\n            </svg>\n          </Flex>\n          <Text flex={1}>\n            Migration of your SNX Collateral (including escrowed SNX) and your debt to a New\n            Liquidity Position on the Liquidity App\n          </Text>\n        </Flex>\n        <Flex alignItems=\"center\" gap={2.5}>\n          <Flex width={4}>\n            <svg\n              width=\"12\"\n              height=\"12\"\n              viewBox=\"0 0 12 12\"\n              fill=\"none\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M0.833984 6.0013C0.833984 4.98878 1.6548 4.16797 2.66732 4.16797H9.33398C10.3465 4.16797 11.1673 4.98878 11.1673 6.0013V10.0013C11.1673 11.0138 10.3465 11.8346 9.33398 11.8346H2.66732C1.6548 11.8346 0.833984 11.0138 0.833984 10.0013V6.0013ZM2.66732 5.16797C2.20708 5.16797 1.83398 5.54106 1.83398 6.0013V10.0013C1.83398 10.4615 2.20708 10.8346 2.66732 10.8346H9.33398C9.79422 10.8346 10.1673 10.4615 10.1673 10.0013V6.0013C10.1673 5.54106 9.79422 5.16797 9.33398 5.16797H2.66732Z\"\n                fill=\"white\"\n              />\n              <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M2.83398 3.33464C2.83398 1.58573 4.25175 0.167969 6.00065 0.167969C7.74955 0.167969 9.16732 1.58573 9.16732 3.33464V5.16797H2.83398V3.33464ZM6.00065 1.16797C4.80403 1.16797 3.83398 2.13802 3.83398 3.33464V4.16797H8.16732V3.33464C8.16732 2.13802 7.19727 1.16797 6.00065 1.16797Z\"\n                fill=\"white\"\n              />\n            </svg>\n          </Flex>\n          <Text flex={1}>Lock of funds for 7 days</Text>\n        </Flex>\n        <Flex alignItems=\"center\" gap={2.5}>\n          <Flex width={4}>\n            <svg\n              width=\"10\"\n              height=\"11\"\n              viewBox=\"0 0 10 11\"\n              fill=\"none\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M3.43675 4.45617L2.13565 3.15508L9.26758 3.15508L9.26758 2.42138L2.13565 2.42138L3.43675 1.12028L2.91803 0.601562L0.731365 2.78823L2.91803 4.9749L3.43675 4.45617ZM6.56219 6.08028L7.86329 7.38138L0.731363 7.38138L0.731363 8.11508L7.86329 8.11508L6.56219 9.41617L7.08091 9.9349L9.26758 7.74823L7.08091 5.56156L6.56219 6.08028Z\"\n                fill=\"white\"\n              />\n              <path\n                d=\"M2.13565 3.15508L2.13565 2.95508L1.65281 2.95508L1.99423 3.2965L2.13565 3.15508ZM3.43675 4.45617L3.57817 4.5976L3.7196 4.45617L3.57817 4.31475L3.43675 4.45617ZM9.26758 3.15508L9.26758 3.35508L9.46758 3.35508L9.46758 3.15508L9.26758 3.15508ZM9.26758 2.42138L9.46758 2.42138L9.46758 2.22138L9.26758 2.22138L9.26758 2.42138ZM2.13565 2.42138L1.99423 2.27996L1.65281 2.62138L2.13565 2.62138L2.13565 2.42138ZM3.43675 1.12028L3.57817 1.2617L3.7196 1.12028L3.57817 0.978862L3.43675 1.12028ZM2.91803 0.601562L3.05945 0.460141L2.91803 0.31872L2.77661 0.460141L2.91803 0.601562ZM0.731365 2.78823L0.589943 2.64681L0.448522 2.78823L0.589943 2.92965L0.731365 2.78823ZM2.91803 4.9749L2.77661 5.11632L2.91803 5.25774L3.05945 5.11632L2.91803 4.9749ZM7.86329 7.38138L7.86329 7.58138L8.34613 7.58138L8.00471 7.23996L7.86329 7.38138ZM6.56219 6.08028L6.42077 5.93886L6.27935 6.08028L6.42077 6.22171L6.56219 6.08028ZM0.731363 7.38138L0.731364 7.18138L0.531363 7.18138L0.531363 7.38138L0.731363 7.38138ZM0.731363 8.11508L0.531363 8.11508L0.531363 8.31508L0.731363 8.31508L0.731363 8.11508ZM7.86329 8.11508L8.00471 8.2565L8.34613 7.91508L7.86329 7.91508L7.86329 8.11508ZM6.56219 9.41617L6.42077 9.27475L6.27935 9.41617L6.42077 9.5576L6.56219 9.41617ZM7.08091 9.9349L6.93949 10.0763L7.08091 10.2177L7.22233 10.0763L7.08091 9.9349ZM9.26758 7.74823L9.409 7.88965L9.55042 7.74823L9.409 7.60681L9.26758 7.74823ZM7.08091 5.56156L7.22233 5.42014L7.08091 5.27872L6.93949 5.42014L7.08091 5.56156ZM1.99423 3.2965L3.29533 4.5976L3.57817 4.31475L2.27707 3.01365L1.99423 3.2965ZM9.26758 2.95508L2.13565 2.95508L2.13565 3.35508L9.26758 3.35508L9.26758 2.95508ZM9.06758 2.42138L9.06758 3.15508L9.46758 3.15508L9.46758 2.42138L9.06758 2.42138ZM2.13565 2.62138L9.26758 2.62138L9.26758 2.22138L2.13565 2.22138L2.13565 2.62138ZM3.29533 0.978862L1.99423 2.27996L2.27707 2.5628L3.57817 1.2617L3.29533 0.978862ZM2.77661 0.742984L3.29533 1.2617L3.57817 0.978862L3.05945 0.460141L2.77661 0.742984ZM0.872786 2.92965L3.05945 0.742984L2.77661 0.460141L0.589943 2.64681L0.872786 2.92965ZM3.05945 4.83347L0.872786 2.64681L0.589943 2.92965L2.77661 5.11632L3.05945 4.83347ZM3.29533 4.31475L2.77661 4.83347L3.05945 5.11632L3.57817 4.5976L3.29533 4.31475ZM8.00471 7.23996L6.70361 5.93886L6.42077 6.22171L7.72187 7.5228L8.00471 7.23996ZM0.731363 7.58138L7.86329 7.58138L7.86329 7.18138L0.731364 7.18138L0.731363 7.58138ZM0.931364 8.11508L0.931364 7.38138L0.531363 7.38138L0.531363 8.11508L0.931364 8.11508ZM7.86329 7.91508L0.731364 7.91507L0.731363 8.31508L7.86329 8.31508L7.86329 7.91508ZM6.70361 9.5576L8.00471 8.2565L7.72187 7.97366L6.42077 9.27475L6.70361 9.5576ZM7.22233 9.79347L6.70361 9.27475L6.42077 9.5576L6.93949 10.0763L7.22233 9.79347ZM9.12616 7.60681L6.93949 9.79347L7.22233 10.0763L9.409 7.88965L9.12616 7.60681ZM6.93949 5.70298L9.12616 7.88965L9.409 7.60681L7.22233 5.42014L6.93949 5.70298ZM6.70361 6.22171L7.22233 5.70298L6.93949 5.42014L6.42077 5.93886L6.70361 6.22171Z\"\n                fill=\"white\"\n              />\n            </svg>\n          </Flex>\n          <Text flex={1}>\n            (optional) Conversion of your sUSD into V3 compatible sUSD. You can\n            <Link\n              color=\"cyan.500\"\n              target=\"_blank\"\n              href={`${window.location.origin}/#/?convert=snxusd`}\n            >\n              &nbsp;convert your sUSD&nbsp;\n            </Link>\n            at anytime\n          </Text>\n        </Flex>\n      </Flex>\n\n      <Alert my={6} status=\"info\" borderRadius=\"6px\">\n        <AlertIcon />\n        <Text fontSize=\"14px\">\n          Migration to V3 is currently only available on <b>Ethereum Mainnet</b>. Learn more about\n          <Link\n            color=\"cyan.500\"\n            href=\"https://blog.synthetix.io/synthetix-v3-migration-treasury-council-initiates-transition/\"\n            isExternal\n          >\n            &nbsp;migrating to V3.\n          </Link>\n        </Text>\n      </Alert>\n\n      <Button width=\"100%\" onClick={onConfirm}>\n        Continue\n      </Button>\n      <Button width=\"100%\" variant=\"outline\" colorScheme=\"gray\" onClick={onClose}>\n        Back\n      </Button>\n    </VStack>\n  );\n};\n","import { useQuery } from '@tanstack/react-query';\nimport { Network, useWallet, useProviderForChain } from '@snx-v3/useBlockchain';\nimport { useV2xSynthetix } from '@snx-v3/useV2xSynthetix';\nimport { wei } from '@synthetixio/wei';\nimport { useMulticall3 } from '@snx-v3/useMulticall3';\nimport { contractsHash } from '@snx-v3/tsHelpers';\nimport { ethers } from 'ethers';\n\nexport function useV2Position(network: Network) {\n  const { activeWallet } = useWallet();\n  const provider = useProviderForChain(network);\n  const { data: Multicall3 } = useMulticall3(network);\n  const { data: V2xSynthetix } = useV2xSynthetix(network);\n  const walletAddress = activeWallet?.address;\n\n  return useQuery({\n    queryKey: [\n      `${network?.id}-${network?.preset}`,\n      'V2Position',\n      { walletAddress },\n      { contractsHash: contractsHash([V2xSynthetix, Multicall3]) },\n    ],\n    enabled: Boolean(provider && walletAddress && V2xSynthetix && Multicall3),\n    queryFn: async function () {\n      if (!(provider && walletAddress && V2xSynthetix && Multicall3)) throw 'OMFG';\n      const V2xSynthetixInterface = new ethers.utils.Interface(V2xSynthetix.abi);\n\n      const calls = [\n        {\n          target: V2xSynthetix.address,\n          callData: V2xSynthetixInterface.encodeFunctionData('collateral', [walletAddress]),\n        },\n        {\n          target: V2xSynthetix.address,\n          callData: V2xSynthetixInterface.encodeFunctionData('balanceOf', [walletAddress]),\n        },\n\n        {\n          target: V2xSynthetix.address,\n          callData: V2xSynthetixInterface.encodeFunctionData('debtBalanceOf', [\n            walletAddress,\n            ethers.utils.formatBytes32String('sUSD'),\n          ]),\n        },\n        {\n          target: V2xSynthetix.address,\n          callData: V2xSynthetixInterface.encodeFunctionData('collateralisationRatio', [\n            walletAddress,\n          ]),\n        },\n        {\n          target: V2xSynthetix.address,\n          callData: V2xSynthetixInterface.encodeFunctionData('transferableSynthetix', [\n            walletAddress,\n          ]),\n        },\n      ];\n\n      const Multicall3Contract = new ethers.Contract(Multicall3.address, Multicall3.abi, provider);\n      const { returnData } = await Multicall3Contract.callStatic.aggregate(calls);\n\n      const [collateral, balance, debt, cratio, transferableSynthetix] = [\n        wei(V2xSynthetixInterface.decodeFunctionResult('collateral', returnData[0])[0]),\n        wei(V2xSynthetixInterface.decodeFunctionResult('collateral', returnData[1])[0]),\n        wei(V2xSynthetixInterface.decodeFunctionResult('collateral', returnData[2])[0]),\n        wei(V2xSynthetixInterface.decodeFunctionResult('collateral', returnData[3])[0]),\n        wei(V2xSynthetixInterface.decodeFunctionResult('collateral', returnData[4])[0]),\n      ];\n\n      return {\n        collateral,\n        balance,\n        debt,\n        cratio,\n        transferableSynthetix,\n      };\n    },\n  });\n}\n","import React, { useState } from 'react';\nimport { VStack, Text, Button, Alert, Flex, Tooltip } from '@chakra-ui/react';\nimport { CheckIcon, CopyIcon } from '@chakra-ui/icons';\nimport { TransactionSummary } from '../TransactionSummary/TransactionSummary';\n\nexport const StepSuccess = ({\n  onConfirm,\n  collateral,\n  cRatio,\n  accountId,\n}: {\n  onConfirm: () => void;\n  cRatio: string;\n  collateral: string;\n  accountId: string;\n}) => {\n  const [toolTipLabel, setTooltipLabel] = useState('Copy');\n  return (\n    <VStack spacing={6}>\n      <Text width=\"100%\" textAlign=\"left\" fontSize=\"14px\">\n        Your <b>Collateral</b> has been migrated to Synthetix V3 System\n      </Text>\n\n      <Alert rounded=\"base\" colorScheme=\"green\" borderRadius=\"6px\">\n        <Flex bg=\"green.500\" p=\"1\" rounded=\"full\" mr=\"3.5\">\n          <CheckIcon w=\"12px\" h=\"12px\" color=\"green.900\" />\n        </Flex>\n        <Text fontSize=\"16px\">\n          <b>Collateral</b> successfully migrated\n        </Text>\n      </Alert>\n\n      <TransactionSummary\n        width=\"100%\"\n        items={[\n          {\n            label: 'Total Collateral',\n            value: collateral,\n          },\n          {\n            label: 'C-ratio',\n            value: `${cRatio}%`,\n          },\n          {\n            label: 'Account Id',\n            value: (\n              <>\n                {`#${accountId}`}\n                <Tooltip label={toolTipLabel} closeOnClick={false}>\n                  <CopyIcon\n                    ml=\"2\"\n                    onClick={() => {\n                      navigator.clipboard.writeText(accountId);\n                      setTooltipLabel('Copied');\n                      setTimeout(() => {\n                        setTooltipLabel('Copy');\n                      }, 10000);\n                    }}\n                    cursor=\"pointer\"\n                  />\n                </Tooltip>\n              </>\n            ),\n          },\n        ]}\n      />\n\n      <Button width=\"100%\" onClick={onConfirm}>\n        Continue\n      </Button>\n    </VStack>\n  );\n};\n","import React, { useCallback, useState } from 'react';\nimport {\n  VStack,\n  Text,\n  Heading,\n  Box,\n  HStack,\n  Tooltip,\n  Checkbox,\n  Button,\n  Spinner,\n  Link,\n  Flex,\n  Collapse,\n  AlertIcon,\n  Alert,\n  AlertDescription,\n} from '@chakra-ui/react';\nimport { wei } from '@synthetixio/wei';\nimport { useV2Position } from '@snx-v3/useV2Position';\nimport { Network } from '@snx-v3/useBlockchain';\nimport { InfoIcon } from '@chakra-ui/icons';\nimport { useMigrate } from '@snx-v3/useMigrate';\nimport { StepSuccess } from './StepSuccess';\nimport { formatEther } from 'ethers/lib/utils';\nimport { Amount } from '@snx-v3/Amount';\nimport { CRatioBadge } from '../CRatioBar/CRatioBadge';\nimport { useRates } from '@snx-v3/useRates';\nimport { ZEROWEI } from '@snx-v3/constants';\nimport { useCollateralType } from '@snx-v3/useCollateralTypes';\n\nexport const StepSummary = ({\n  onClose,\n  network,\n  onConfirm,\n}: {\n  onClose: () => void;\n  onConfirm: (accountId: string) => void;\n  network: Network;\n}) => {\n  const { data: snxCollateral } = useCollateralType('SNX');\n  const [isUnderstanding, setIsUnderstanding] = useState(false);\n  const { data } = useV2Position(network);\n  const { migrate, transaction, isLoading, isSuccess, accountId } = useMigrate();\n\n  const { data: rates } = useRates();\n  const snxPrice = rates?.snx || ZEROWEI;\n  const ethPrice = rates?.eth || ZEROWEI;\n\n  const [txSummary, setTxSummary] = useState({\n    collateral: '0',\n    cRatio: '0',\n    accountId: '',\n  });\n\n  const cRatio = data?.cratio.eq(0)\n    ? '0'\n    : wei(1)\n        .div(data?.cratio || wei(1))\n        .mul(100)\n        .toString(2);\n\n  const handleSubmit = useCallback(() => {\n    setTxSummary({\n      cRatio,\n      collateral: data?.collateral?.toString(2) || '0',\n      accountId,\n    });\n\n    migrate();\n  }, [accountId, cRatio, data?.collateral, migrate]);\n\n  if (isSuccess) {\n    return (\n      <StepSuccess\n        onConfirm={() => onConfirm(txSummary.accountId)}\n        cRatio={txSummary.cRatio}\n        collateral={txSummary.collateral}\n        accountId={txSummary.accountId}\n      />\n    );\n  }\n\n  return (\n    <VStack spacing={2.5} align=\"start\" fontSize=\"12px\">\n      <Heading size=\"sm\">Summary of your migration</Heading>\n\n      <Box p={3.5} borderRadius=\"4px\" background=\"#1F1F34\" width=\"100%\">\n        <HStack fontWeight=\"700\" justifyContent=\"space-between\">\n          <Text>C-Ratio</Text>\n          <HStack>\n            <Text>{cRatio}%</Text>\n            <CRatioBadge cRatio={Number(cRatio)} liquidationCratio={105} targetCratio={500} />\n            {/* <Tag colorScheme=\"green\">HEALTHY</Tag> */}\n          </HStack>\n        </HStack>\n      </Box>\n\n      <Text fontSize=\"12px\" fontWeight=\"400\" color=\"gray\" as=\"i\">\n        Warning: if your c-ratio is below V3 liquidation ratio (105%), your account will be{' '}\n        <Link\n          target=\"_blank\"\n          color=\"cyan.500\"\n          href=\"https://docs.synthetix.io/v/v3/for-liquidity-integrators/liquidity-positions/position-liquidations\"\n        >\n          liquidated\n        </Link>{' '}\n        during the migration. We recommend to commence this migration only if you have a healthy\n        c-ratio.\n      </Text>\n\n      <Box p={3.5} borderRadius=\"4px\" background=\"#1F1F34\" width=\"100%\">\n        <VStack align=\"stretch\" spacing={3}>\n          <HStack fontWeight=\"700\" justifyContent=\"space-between\">\n            <Text>\n              SNX Collateral{' '}\n              <Tooltip\n                hasArrow\n                textAlign=\"left\"\n                label=\"Your SNX Collateral will not appear on your wallet anymore as it will be deposited in your Account. You can see the details on your Dashboard.\"\n              >\n                <InfoIcon />\n              </Tooltip>\n            </Text>\n            <Text>\n              {data?.collateral?.toString(2)} SNX\n              {snxPrice?.gt(0) && <>&nbsp;(${snxPrice.mul(data?.collateral).toString(2)})</>}\n            </Text>\n          </HStack>\n          <HStack color=\"gray\" justifyContent=\"space-between\">\n            <Text>Balance</Text>\n            <Text>\n              {data?.balance?.toString(2)} SNX\n              {snxPrice?.gt(0) && <>&nbsp;(${snxPrice.mul(data?.balance).toString(2)})</>}\n            </Text>\n          </HStack>\n          <HStack color=\"gray\" justifyContent=\"space-between\">\n            <Text>\n              Escrowed{' '}\n              <Tooltip\n                hasArrow\n                textAlign=\"left\"\n                label=\"Escrowed SNX will be locked in the V3 system until the escrowed date. It can still be delegated but not withdrawn.\"\n              >\n                <InfoIcon />\n              </Tooltip>\n            </Text>\n            <Text>\n              {data?.collateral?.sub(data?.balance)?.toString(2)} SNX\n              {snxPrice?.gt(0) && (\n                <>&nbsp;(${snxPrice.mul(data?.collateral?.sub(data?.balance)).toString(2)})</>\n              )}\n            </Text>\n          </HStack>\n          <HStack fontWeight=\"700\" justifyContent=\"space-between\">\n            <Text>\n              Debt{' '}\n              <Tooltip\n                hasArrow\n                label={\n                  <Text textAlign=\"left\">\n                    Your debt amount will be the same on V3. Debt is however now determined by the\n                    collateral deposited.\n                  </Text>\n                }\n              >\n                <InfoIcon />\n              </Tooltip>\n            </Text>\n            <Text>${data?.debt?.toString(2)}</Text>\n          </HStack>\n        </VStack>\n      </Box>\n\n      <Checkbox size=\"sm\" onChange={(e) => setIsUnderstanding(e.currentTarget.checked)}>\n        I understand that this action cannot be undone\n      </Checkbox>\n\n      <Box mb={3.5} p={3.5} borderRadius=\"4px\" background=\"#1F1F34\" width=\"100%\">\n        <HStack justifyContent=\"space-between\">\n          <Text>Estimated Gas</Text>\n\n          {transaction !== undefined && (\n            <>\n              {transaction?.gasLimit.gt(0) ? (\n                <Text>\n                  <Amount\n                    value={wei(\n                      formatEther(\n                        transaction?.gasLimit.mul(transaction.gasPrice || 1).toString() || 0\n                      )\n                    )}\n                    suffix=\" ETH\"\n                  />\n\n                  {ethPrice?.gt(0) && (\n                    <>\n                      &nbsp;($\n                      {ethPrice\n                        .mul(\n                          formatEther(\n                            transaction?.gasLimit.mul(transaction.gasPrice || 1).toString() || 0\n                          )\n                        )\n                        .toString(2)}\n                      )\n                    </>\n                  )}\n                </Text>\n              ) : (\n                <Text color=\"red\">Transaction error occured, please seek support</Text>\n              )}\n            </>\n          )}\n        </HStack>\n      </Box>\n\n      <Collapse in={data?.balance.lt(snxCollateral?.minDelegationD18)} animateOpacity>\n        <Alert mb={3.5} status=\"error\" borderRadius=\"6px\">\n          <AlertIcon />\n          <AlertDescription fontSize=\"16px\">\n            The minimal locked amount on V3 is <Amount value={snxCollateral?.minDelegationD18} />{' '}\n            SNX. You can manually unstake your V2 SNX on the{' '}\n            <Link\n              textDecoration=\"underline\"\n              href=\"https://staking.synthetix.io/staking/burn\"\n              target=\"_blank\"\n            >\n              Staking App\n            </Link>\n          </AlertDescription>\n        </Alert>\n      </Collapse>\n\n      {!isLoading ? (\n        <>\n          <Button\n            width=\"100%\"\n            isDisabled={!(transaction?.gasLimit && transaction?.gasLimit.gt(0) && isUnderstanding)}\n            onClick={handleSubmit}\n          >\n            Migrate\n          </Button>\n          <Button variant=\"outline\" colorScheme=\"gray\" onClick={onClose} width=\"100%\">\n            Cancel\n          </Button>\n        </>\n      ) : (\n        <Flex\n          fontSize=\"14px\"\n          fontWeight={700}\n          alignItems=\"center\"\n          justifyContent=\"center\"\n          width=\"100%\"\n          gap={2}\n          p={3}\n          color=\"cyan.500\"\n        >\n          <Spinner />\n          Loading\n        </Flex>\n      )}\n    </VStack>\n  );\n};\n","import { ZEROWEI } from '@snx-v3/constants';\nimport { parseTxError } from '@snx-v3/parser';\nimport { contractsHash } from '@snx-v3/tsHelpers';\nimport { useDefaultProvider, useNetwork, useSigner } from '@snx-v3/useBlockchain';\nimport { formatGasPriceForTransaction } from '@snx-v3/useGasOptions';\nimport { getGasPrice } from '@snx-v3/useGasPrice';\nimport { useGasSpeed } from '@snx-v3/useGasSpeed';\nimport { useLegacyMarket } from '@snx-v3/useLegacyMarket';\nimport { wei } from '@synthetixio/wei';\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\nimport { useCallback, useMemo, useState } from 'react';\n\nexport function useMigrate() {\n  const [isLoading, setIsLoading] = useState(false);\n  const [isSuccess, setIsSuccess] = useState(false);\n  const { network } = useNetwork();\n  const provider = useDefaultProvider();\n  const signer = useSigner();\n  const { data: LegacyMarket } = useLegacyMarket();\n  const { gasSpeed } = useGasSpeed();\n  const queryClient = useQueryClient();\n\n  const accountId = useMemo(() => Math.floor(Math.random() * 1000000000000).toString(), []);\n\n  const { data: transaction } = useQuery({\n    queryKey: [\n      `${network?.id}-${network?.preset}`,\n      'MigrateTxn',\n      { contractsHash: contractsHash([LegacyMarket]) },\n    ],\n    enabled: Boolean(signer && LegacyMarket),\n    queryFn: async function () {\n      if (!(LegacyMarket && signer)) throw 'OMFG';\n\n      const LegacyMarketContract = new ethers.Contract(\n        LegacyMarket.address,\n        LegacyMarket.abi,\n        signer\n      );\n\n      const signerAddress = await signer.getAddress();\n      const populateTransaction = await LegacyMarketContract.populateTransaction.migrate(\n        accountId,\n        { from: signerAddress }\n      );\n      try {\n        const [gasLimit, feeData] = await Promise.all([\n          await provider?.estimateGas(populateTransaction),\n          await provider?.getFeeData(),\n        ]);\n\n        const gasPrices = await getGasPrice({ provider: signer.provider });\n        const gasOptionsForTransaction = formatGasPriceForTransaction({\n          gasLimit: wei(gasLimit || ZEROWEI).toBN(),\n          gasPrices,\n          gasSpeed,\n        });\n\n        return {\n          ...populateTransaction,\n          gasLimit: gasOptionsForTransaction.gasLimit,\n          gasPrice: feeData?.gasPrice,\n        };\n      } catch (error) {\n        if (LegacyMarket) {\n          try {\n            const LegacyMarketInterface = new ethers.utils.Interface(LegacyMarket.abi);\n            const parsedError = parseTxError(error);\n            const errorResult = LegacyMarketInterface.parseError(parsedError as string);\n            console.error('error:', errorResult);\n          } catch {\n            // whatever\n          }\n        }\n        return null;\n      }\n    },\n  });\n\n  const migrate = useCallback(async () => {\n    try {\n      if (!(LegacyMarket && signer && transaction)) throw 'OMFG';\n      setIsLoading(true);\n      setIsSuccess(false);\n      const gasPrices = await getGasPrice({ provider: signer.provider });\n      const signerAddress = await signer.getAddress();\n\n      const LegacyMarketContract = new ethers.Contract(\n        LegacyMarket.address,\n        LegacyMarket.abi,\n        signer\n      );\n\n      const populateTransaction = await LegacyMarketContract.populateTransaction.migrate(\n        accountId,\n        { from: signerAddress }\n      );\n      const gasLimit = await provider?.estimateGas(populateTransaction);\n\n      const gasOptionsForTransaction = formatGasPriceForTransaction({\n        gasLimit: wei(gasLimit || ZEROWEI).toBN(),\n        gasPrices,\n        gasSpeed,\n      });\n\n      const txn = await LegacyMarketContract.migrate(accountId, {\n        ...gasOptionsForTransaction,\n      });\n      await txn.wait();\n\n      setIsLoading(false);\n      setIsSuccess(true);\n\n      queryClient.invalidateQueries({\n        queryKey: [`${network?.id}-${network?.preset}`, 'Accounts'],\n      });\n    } catch (error) {\n      setIsLoading(false);\n      throw error;\n    }\n  }, [\n    accountId,\n    gasSpeed,\n    LegacyMarket,\n    network?.id,\n    network?.preset,\n    provider,\n    queryClient,\n    signer,\n    transaction,\n  ]);\n\n  return {\n    migrate,\n    transaction,\n    isLoading,\n    isSuccess,\n    accountId,\n  };\n}\n","import { useQuery } from '@tanstack/react-query';\nimport { MAINNET, useProviderForChain } from '@snx-v3/useBlockchain';\nimport { Contract } from 'ethers';\nimport { formatBytes32String } from 'ethers/lib/utils';\nimport { wei } from '@synthetixio/wei';\n\nexport function useRates() {\n  const mainnetProvider = useProviderForChain(MAINNET);\n\n  return useQuery({\n    queryKey: ['rates-mainnet'],\n    enabled: Boolean(mainnetProvider),\n    queryFn: async function () {\n      if (!mainnetProvider) {\n        throw 'Mainnet provider missing';\n      }\n      const { address, abi } = await import(\n        '@synthetixio/contracts/build/mainnet/deployment/ExchangeRates'\n      );\n      const ExchangeRates = new Contract(address, abi, mainnetProvider);\n\n      const result = await ExchangeRates.ratesForCurrencies([\n        formatBytes32String('SNX'),\n        formatBytes32String('ETH'),\n      ]);\n      return {\n        snx: wei(result[0] || 0),\n        eth: wei(result[1] || 0),\n      };\n    },\n    staleTime: 60_000,\n    refetchInterval: 60_000,\n  });\n}\n","import {\n  CloseButton,\n  Divider,\n  Flex,\n  Heading,\n  Modal,\n  ModalBody,\n  ModalContent,\n  ModalOverlay,\n  Text,\n} from '@chakra-ui/react';\nimport { FC, useEffect, useState } from 'react';\nimport { Network } from '@snx-v3/useBlockchain';\nimport { StepIntro } from './StepIntro';\nimport { StepExplain } from './StepExplain';\nimport { StepSummary } from './StepSummary';\nimport { useQueryClient } from '@tanstack/react-query';\ninterface Props {\n  network: Network;\n  onClose: () => void;\n  onSuccess: (accountId: string) => void;\n  isOpen: boolean;\n}\n\nexport const MigrationDialog: FC<Props> = ({ network, onClose, isOpen, onSuccess }) => {\n  const queryClient = useQueryClient();\n  const [step, setStep] = useState(0);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setStep(0);\n    }\n  }, [isOpen]);\n\n  return (\n    <Modal size=\"lg\" isOpen={isOpen} onClose={onClose} closeOnOverlayClick={false}>\n      <ModalOverlay />\n      <ModalContent mt=\"100px\" borderWidth=\"1px\" borderColor=\"gray.900\" bg=\"navy.900\" color=\"white\">\n        <Flex justifyContent=\"space-between\" p={6} alignItems=\"center\">\n          <Heading fontSize=\"20px\">\n            Migrate to Synthetix V3 on{' '}\n            <Text as=\"span\" textTransform=\"capitalize\">\n              {network.name}\n            </Text>\n          </Heading>\n          <CloseButton onClick={onClose} color=\"gray\" />\n        </Flex>\n        <Flex width=\"100%\" px={6}>\n          <Divider borderColor=\"gray.900\" mb={6} colorScheme=\"gray\" />\n        </Flex>\n        <ModalBody pt={0} pb={6}>\n          {step === 0 && <StepIntro onConfirm={() => setStep(1)} onClose={onClose} />}\n          {step === 1 && <StepExplain onConfirm={() => setStep(2)} onClose={() => setStep(0)} />}\n          {step === 2 && (\n            <StepSummary\n              onConfirm={(accountId) => {\n                queryClient.invalidateQueries({\n                  queryKey: [`${network?.id}-${network?.preset}`, 'V2Position'],\n                });\n\n                onSuccess(accountId);\n                onClose();\n              }}\n              onClose={onClose}\n              network={network}\n            />\n          )}\n        </ModalBody>\n      </ModalContent>\n    </Modal>\n  );\n};\n","import {\n  Alert,\n  AlertIcon,\n  Button,\n  Divider,\n  Fade,\n  Flex,\n  Heading,\n  Image,\n  Link,\n  Text,\n} from '@chakra-ui/react';\nimport { FC, useCallback, useEffect, useState } from 'react';\nimport { Network, useNetwork, useWallet } from '@snx-v3/useBlockchain';\nimport { Amount } from '@snx-v3/Amount';\nimport { MigrationDialog } from './MigrationDialog';\nimport { MigrateUSDModal } from '../MigrateUSD/MigrateUSDModal';\nimport { useV2Position } from '@snx-v3/useV2Position';\nimport { useLocation, useNavigate } from 'react-router-dom';\n\ninterface Props {\n  network: Network;\n  type?: 'banner' | 'alert';\n}\n\nexport const MigrationBanner: FC<Props> = ({ network, type = 'banner' }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [accountId, setAccountId] = useState('');\n  const [isUSDModalOpen, setIsUSDModalOpen] = useState(false);\n  const { data } = useV2Position(network);\n  const { network: currentNetwork, setNetwork } = useNetwork();\n  const { connect, activeWallet } = useWallet();\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  const onClick = useCallback(async () => {\n    try {\n      if (!activeWallet) {\n        connect();\n        return;\n      }\n\n      if (!currentNetwork || currentNetwork.id !== network.id) {\n        if (!(await setNetwork(network.id))) {\n          return;\n        }\n      }\n\n      setIsOpen(true);\n    } catch (error) {}\n  }, [activeWallet, connect, currentNetwork, network.id, setNetwork]);\n\n  useEffect(() => {\n    const queryParams = new URLSearchParams(location.search);\n\n    const convert = queryParams.get('migrate');\n\n    if (convert && convert.toLowerCase() === 'snx') {\n      setIsOpen(true);\n\n      const queryParams = new URLSearchParams(location.search);\n      queryParams.delete('migrate');\n      navigate({\n        pathname: location.pathname,\n        search: queryParams.toString(),\n      });\n    }\n  }, [location.pathname, location.search, navigate]);\n\n  return (\n    <>\n      <MigrationDialog\n        onSuccess={(accountId) => {\n          setAccountId(accountId);\n          setIsUSDModalOpen(true);\n        }}\n        network={network}\n        onClose={() => setIsOpen(false)}\n        isOpen={isOpen}\n      />\n      <MigrateUSDModal\n        network={network}\n        onClose={() => setIsUSDModalOpen(false)}\n        isOpen={isUSDModalOpen}\n        type=\"migration\"\n        accountId={accountId}\n      />\n\n      {!!data && data?.collateral.gt(0) && data.debt.gt(0) && (\n        <Fade in>\n          {type === 'banner' && (\n            <>\n              <Divider my={4} />\n\n              <Flex justifyContent={['center', 'space-between']} w=\"100%\" flexWrap=\"wrap\" gap={4}>\n                <Image src=\"/Rocket.png\" />\n\n                <Flex mt={1} flex={1} alignItems=\"flex-start\" flexDir=\"column\" gap={6}>\n                  <Heading fontSize=\"20px\" fontWeight={700} color=\"white\">\n                    You have a <Amount value={data?.collateral} /> SNX position on Synthetix V2 on{' '}\n                    <Text as=\"span\" textTransform=\"capitalize\">\n                      {network.name}\n                    </Text>\n                  </Heading>\n                  <Text maxW=\"484px\" fontSize=\"14px\" color=\"gray.500\">\n                    Migrate your SNX to Synthetix V3 to earn fees from both V2 and V3 markets and\n                    much more.\n                  </Text>\n                </Flex>\n\n                <Flex mt=\"auto\" alignItems=\"flex-center\" gap={2}>\n                  <Button\n                    fontSize=\"sm\"\n                    fontWeight={700}\n                    colorScheme=\"gray\"\n                    variant=\"outline\"\n                    onClick={onClick}\n                  >\n                    {!activeWallet\n                      ? 'Connect'\n                      : currentNetwork?.id !== network.id\n                        ? 'Switch Network'\n                        : 'Migrate to V3'}\n                  </Button>\n                  <Link\n                    href=\"https://blog.synthetix.io/synthetix-v3-migration-treasury-council-initiates-transition/\"\n                    target=\"_blank\"\n                    rel=\"noopener\"\n                  >\n                    <Button fontSize=\"sm\" fontWeight={700} variant=\"outline\" colorScheme=\"gray\">\n                      Learn More\n                    </Button>\n                  </Link>\n                </Flex>\n              </Flex>\n            </>\n          )}\n\n          {type === 'alert' && (\n            <Alert mb={6} borderLeftColor=\"cyan.500\" borderRadius=\"6px\">\n              <AlertIcon color=\"cyan.500\" />\n              <Text color=\"white\" fontFamily=\"heading\" fontSize=\"16px\" lineHeight=\"24px\">\n                You have a <Amount value={data?.collateral} /> SNX active staking position on V2 on{' '}\n                <Text as=\"span\" textTransform=\"capitalize\">\n                  {network.name}\n                </Text>\n                .\n                <Text onClick={onClick} as=\"span\" color=\"cyan.500\" cursor=\"pointer\">\n                  &nbsp;Migrate to V3\n                </Text>\n              </Text>\n            </Alert>\n          )}\n        </Fade>\n      )}\n    </>\n  );\n};\n","import { ArrowBackIcon } from '@chakra-ui/icons';\nimport {\n  Alert,\n  AlertDescription,\n  AlertIcon,\n  Button,\n  Collapse,\n  Divider,\n  Flex,\n  Link,\n  ListItem,\n  Text,\n  Tooltip,\n  UnorderedList,\n} from '@chakra-ui/react';\nimport { Amount } from '@snx-v3/Amount';\nimport { BorderBox } from '@snx-v3/BorderBox';\nimport { ZEROWEI } from '@snx-v3/constants';\nimport { formatNumber } from '@snx-v3/formatters';\nimport { getSpotMarketId, isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { ManagePositionContext } from '@snx-v3/ManagePositionContext';\nimport { NumberInput } from '@snx-v3/NumberInput';\nimport { MAINNET, SEPOLIA, useNetwork } from '@snx-v3/useBlockchain';\nimport { useCollateralType } from '@snx-v3/useCollateralTypes';\nimport { useEthBalance } from '@snx-v3/useEthBalance';\nimport { useGetWrapperToken } from '@snx-v3/useGetUSDTokens';\nimport { LiquidityPosition } from '@snx-v3/useLiquidityPosition';\nimport { useParams } from '@snx-v3/useParams';\nimport { useTokenBalance } from '@snx-v3/useTokenBalance';\nimport { useTokenPrice } from '@snx-v3/useTokenPrice';\nimport { useTransferableSynthetix } from '@snx-v3/useTransferableSynthetix';\nimport { WithdrawIncrease } from '@snx-v3/WithdrawIncrease';\nimport Wei from '@synthetixio/wei';\nimport { FC, useContext, useMemo, useState } from 'react';\nimport { TokenIcon } from '..';\nimport { MigrationBanner } from '../Migration/MigrationBanner';\n\nexport const InitialDepositUi: FC<{\n  collateralChange: Wei;\n  ethBalance?: Wei;\n  snxBalance?: {\n    transferable: Wei;\n    collateral?: Wei;\n  };\n  tokenBalance?: Wei;\n  displaySymbol: string;\n  symbol: string;\n  setCollateralChange: (val: Wei) => void;\n  onSubmit: () => void;\n  minDelegation: Wei;\n  hasAccount: boolean;\n  availableCollateral: Wei;\n}> = ({\n  collateralChange,\n  setCollateralChange,\n  displaySymbol,\n  symbol,\n  tokenBalance,\n  ethBalance,\n  snxBalance,\n  onSubmit,\n  minDelegation,\n  hasAccount,\n  availableCollateral,\n}) => {\n  const [step, setStep] = useState(0);\n\n  const price = useTokenPrice(symbol);\n  const { network } = useNetwork();\n\n  const combinedTokenBalance = useMemo(() => {\n    if (symbol === 'SNX') {\n      return snxBalance?.transferable || ZEROWEI;\n    }\n    if (symbol !== 'WETH') {\n      return tokenBalance || ZEROWEI;\n    }\n    if (!tokenBalance || !ethBalance) {\n      return ZEROWEI;\n    }\n    return tokenBalance.add(ethBalance);\n  }, [symbol, tokenBalance, ethBalance, snxBalance?.transferable]);\n\n  const maxAmount = useMemo(() => {\n    return combinedTokenBalance?.add(availableCollateral);\n  }, [availableCollateral, combinedTokenBalance]);\n\n  const overAvailableBalance = collateralChange.gt(maxAmount);\n\n  return (\n    <Flex flexDirection=\"column\">\n      <Text color=\"gray.50\" fontSize=\"20px\" fontWeight={700}>\n        {step > 0 && <ArrowBackIcon cursor=\"pointer\" onClick={() => setStep(0)} mr={2} />}\n        Open Liquidity Position\n      </Text>\n      <Divider my={5} bg=\"gray.900\" />\n      {step === 0 && (\n        <>\n          <Text color=\"gray.50\" fontSize=\"sm\" fontWeight=\"700\" mb={2}>\n            Deposit & Lock Collateral\n          </Text>\n          <BorderBox display=\"flex\" flexDirection=\"column\" p={3} mb=\"6\">\n            <Flex alignItems=\"center\">\n              <Flex alignItems=\"flex-start\" flexDir=\"column\" gap=\"1\">\n                <BorderBox\n                  display=\"flex\"\n                  justifyContent=\"center\"\n                  alignItems=\"center\"\n                  py={1.5}\n                  px={2.5}\n                  width=\"fit-content\"\n                >\n                  <Text display=\"flex\" gap={2} alignItems=\"center\" fontWeight=\"600\">\n                    <TokenIcon symbol={symbol} width={16} height={16} />\n                    {displaySymbol}\n                  </Text>\n                </BorderBox>\n                <Tooltip\n                  label={\n                    <Flex\n                      flexDirection=\"column\"\n                      alignItems=\"flex-start\"\n                      fontSize=\"xs\"\n                      color=\"whiteAlpha.700\"\n                    >\n                      <Flex gap=\"1\">\n                        <Text>Unlocked Balance:</Text>\n                        <Amount value={availableCollateral} />\n                      </Flex>\n                      <Flex gap=\"1\">\n                        <Text>Wallet Balance:</Text>\n                        <Amount\n                          value={symbol === 'SNX' ? snxBalance?.transferable : tokenBalance}\n                        />\n                      </Flex>\n                      {symbol === 'WETH' ? (\n                        <Flex gap=\"1\">\n                          <Text>ETH Balance:</Text>\n                          <Amount value={ethBalance} />\n                        </Flex>\n                      ) : null}\n                    </Flex>\n                  }\n                >\n                  <Text fontSize=\"12px\" data-cy=\"balance amount\">\n                    Balance: <Amount value={maxAmount} />\n                    <Text\n                      as=\"span\"\n                      cursor=\"pointer\"\n                      onClick={() => {\n                        if (!maxAmount) {\n                          return;\n                        }\n                        setCollateralChange(maxAmount);\n                      }}\n                      color=\"cyan.500\"\n                      fontWeight={700}\n                    >\n                      &nbsp;Max\n                    </Text>\n                  </Text>\n                </Tooltip>\n              </Flex>\n              <Flex flexDir=\"column\" flexGrow={1}>\n                <NumberInput\n                  InputProps={{\n                    'data-cy': 'deposit amount input',\n                    'data-max': combinedTokenBalance?.toString(),\n                    type: 'number',\n                    min: 0,\n                  }}\n                  value={collateralChange}\n                  onChange={(value) => {\n                    setCollateralChange(value);\n                  }}\n                  max={combinedTokenBalance}\n                  min={ZEROWEI}\n                />\n                <Flex fontSize=\"xs\" color=\"whiteAlpha.700\" alignSelf=\"flex-end\" gap=\"1\">\n                  {price.gt(0) && <Amount prefix=\"$\" value={collateralChange.abs().mul(price)} />}\n                </Flex>\n              </Flex>\n            </Flex>\n          </BorderBox>\n          {symbol === 'SNX' && network && [MAINNET.id, SEPOLIA.id].includes(network.id) && (\n            <MigrationBanner network={network} type=\"alert\" />\n          )}\n          <Collapse\n            in={\n              collateralChange.gt(0) && !overAvailableBalance && collateralChange.gte(minDelegation)\n            }\n            animateOpacity\n          >\n            <WithdrawIncrease />\n          </Collapse>\n          <Collapse\n            in={\n              collateralChange.gt(0) && collateralChange.lt(minDelegation) && !overAvailableBalance\n            }\n            animateOpacity\n          >\n            <Alert mb={6} status=\"error\" borderRadius=\"6px\">\n              <AlertIcon />\n              <AlertDescription>\n                Your deposit must be {formatNumber(parseFloat(minDelegation.toString()))} {symbol}{' '}\n                or higher\n              </AlertDescription>\n            </Alert>\n          </Collapse>\n          <Collapse in={overAvailableBalance} animateOpacity>\n            <Alert mb={6} status=\"error\" borderRadius=\"6px\">\n              <AlertIcon />\n              <AlertDescription>\n                You cannot Deposit & Lock more Collateral than your Balance amount\n              </AlertDescription>\n            </Alert>\n          </Collapse>\n          <Button\n            data-cy=\"deposit submit\"\n            onClick={() => {\n              if (hasAccount) {\n                onSubmit();\n              } else {\n                setStep(1);\n              }\n            }}\n            isDisabled={\n              collateralChange.lte(0) ||\n              combinedTokenBalance === undefined ||\n              collateralChange.lt(minDelegation) ||\n              overAvailableBalance\n            }\n          >\n            {collateralChange.lte(0) ? 'Enter Amount' : 'Deposit & Lock'}\n          </Button>\n        </>\n      )}\n      {step === 1 && (\n        <>\n          <Text>\n            In order to open a position on Synthetix Liquidity, you need an Account. It’s a one time\n            action needed that you won’t have to reproduce for the next positions. Accounts are\n            represented as ERC-721 compliant tokens (NFTs). Read more about it in the{' '}\n            <Link\n              href=\"https://docs.synthetix.io/v/synthetix-v3-user-documentation\"\n              target=\"_blank\"\n              color=\"cyan.500\"\n            >\n              Synthetix V3 Documentation\n            </Link>\n          </Text>\n          <br />\n          <UnorderedList>\n            <ListItem>Transferable like any NFT</ListItem>\n            <br />\n            <ListItem>Improve security by delegating permissions</ListItem>\n            <br />\n            <ListItem>Simplify collaborative liquidity positions management</ListItem>\n          </UnorderedList>\n          <Button\n            onClick={() => {\n              onSubmit();\n              setStep(0);\n            }}\n            mt={8}\n          >\n            Accept & Continue\n          </Button>\n        </>\n      )}\n    </Flex>\n  );\n};\n\nexport const InitialDeposit: FC<{\n  submit: () => void;\n  hasAccount: boolean;\n  liquidityPosition?: LiquidityPosition;\n}> = ({ submit, hasAccount, liquidityPosition }) => {\n  const { collateralChange, setCollateralChange } = useContext(ManagePositionContext);\n  const { network } = useNetwork();\n  const params = useParams();\n  const { data: collateralType } = useCollateralType(params.collateralSymbol);\n\n  const { data: transferrableSnx } = useTransferableSynthetix();\n\n  const { data: wrapperToken } = useGetWrapperToken(getSpotMarketId(params.collateralSymbol));\n  // TODO: This will need refactoring\n  const balanceAddress = isBaseAndromeda(network?.id, network?.preset)\n    ? wrapperToken\n    : collateralType?.tokenAddress;\n\n  const { data: tokenBalance } = useTokenBalance(balanceAddress);\n\n  const { data: ethBalance } = useEthBalance();\n\n  if (!collateralType) return null;\n\n  return (\n    <InitialDepositUi\n      displaySymbol={collateralType?.displaySymbol || ''}\n      tokenBalance={tokenBalance}\n      snxBalance={transferrableSnx}\n      ethBalance={ethBalance}\n      symbol={collateralType?.symbol || ''}\n      minDelegation={collateralType.minDelegationD18}\n      setCollateralChange={setCollateralChange}\n      collateralChange={collateralChange}\n      onSubmit={submit}\n      hasAccount={hasAccount}\n      availableCollateral={liquidityPosition?.accountCollateral.availableCollateral || ZEROWEI}\n    />\n  );\n};\n","import { Flex, Heading, Text } from '@chakra-ui/react';\nimport { FC } from 'react';\nimport { useCollateralDisplayName } from '../../pages';\nimport { NetworkIcon, useNetwork } from '@snx-v3/useBlockchain';\nimport { useNavigate } from 'react-router-dom';\nimport { TokenIcon } from '../TokenIcon';\n\nexport const PositionTitle: FC<{\n  collateralSymbol?: string;\n  poolName?: string;\n  isOpen?: boolean;\n  poolId?: string;\n}> = ({ collateralSymbol, poolName, isOpen, poolId }) => {\n  const collateralDisplayName = useCollateralDisplayName(collateralSymbol);\n  const { network } = useNetwork();\n  const navigate = useNavigate();\n\n  return (\n    <Flex alignItems=\"center\">\n      <Flex\n        bg=\"linear-gradient(180deg, #08021E 0%, #1F0777 100%)\"\n        justifyContent=\"center\"\n        alignItems=\"center\"\n        borderRadius=\"100%\"\n        display=\"flex\"\n      >\n        <TokenIcon\n          symbol={collateralDisplayName || ''}\n          height={42}\n          width={42}\n          fill=\"#0B0B22\"\n          color=\"#00D1FF\"\n        />\n      </Flex>\n      <Flex direction=\"column\" gap={0.5}>\n        <Heading\n          ml={4}\n          fontWeight={700}\n          fontSize={['18px', '20px', '24px']}\n          color=\"gray.50\"\n          display=\"flex\"\n          alignItems=\"center\"\n        >\n          {isOpen ? 'Open ' : ''} {collateralDisplayName} Liquidity Position\n        </Heading>\n        <Heading\n          ml={4}\n          fontWeight={700}\n          fontSize={['12px', '16px']}\n          color=\"gray.50\"\n          display=\"flex\"\n          alignItems=\"center\"\n          _hover={{ cursor: 'pointer' }}\n          onClick={() => navigate(`/pools/${network?.id}/${poolId}`)}\n        >\n          {poolName && <Text mr={2}>{poolName}</Text>}\n          <Flex\n            mt={0.25}\n            alignItems=\"center\"\n            fontSize={['10px', '12px']}\n            color=\"gray.500\"\n            fontWeight=\"500\"\n          >\n            <NetworkIcon size=\"14px\" networkId={network?.id} mr={1} />\n            <Text mt={0.5}>{network?.label} Network</Text>\n          </Flex>\n        </Heading>\n      </Flex>\n    </Flex>\n  );\n};\n","import { Box, Flex } from '@chakra-ui/react';\nimport { BorderBox } from '@snx-v3/BorderBox';\nimport { ZEROWEI } from '@snx-v3/constants';\nimport DepositModal from '@snx-v3/DepositModal';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { ManagePositionContext } from '@snx-v3/ManagePositionContext';\nimport { useAccounts } from '@snx-v3/useAccounts';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { useCollateralType } from '@snx-v3/useCollateralTypes';\nimport { LiquidityPosition } from '@snx-v3/useLiquidityPosition';\nimport { useParams } from '@snx-v3/useParams';\nimport { FC, useContext, useState } from 'react';\nimport { CRatioBar } from '../CRatioBar/CRatioBar';\nimport { InitialDeposit } from '../InitialDeposit';\nimport { Rewards } from '../Rewards';\nimport { CollateralStats } from './CollateralStats';\nimport { DebtStats } from './DebtStats';\nimport { PnlStats } from './PnlStats';\nimport { PositionTitle } from './PositionTitle';\n\nexport const NoPosition: FC<{\n  poolName?: string;\n  liquidityPosition?: LiquidityPosition;\n}> = ({ liquidityPosition, poolName }) => {\n  const { collateralSymbol, accountId } = useParams();\n  const { data: collateralType } = useCollateralType(collateralSymbol);\n\n  const { refetch } = useAccounts();\n  const { collateralChange, setCollateralChange, setDebtChange } =\n    useContext(ManagePositionContext);\n  const [txnModalOpen, setTxnModalOpen] = useState<'deposit' | null>(null);\n  const { network } = useNetwork();\n\n  return (\n    <Box mb={12} mt={8}>\n      <Box px={[0, 6]}>\n        <PositionTitle collateralSymbol={collateralSymbol} poolName={poolName} isOpen />\n      </Box>\n      <Flex mt={6} flexDirection={['column', 'column', 'row']} gap={4}>\n        <BorderBox gap={4} flex={1} p={6} flexDirection=\"column\" bg=\"navy.700\" height=\"fit-content\">\n          <Flex direction={['column', 'row']} gap={4}>\n            <CollateralStats\n              liquidityPosition={liquidityPosition}\n              collateralType={collateralType}\n              newCollateralAmount={collateralChange}\n              collateralValue={ZEROWEI}\n              hasChanges={collateralChange.gt(0)}\n            />\n            {isBaseAndromeda(network?.id, network?.preset) ? (\n              <PnlStats\n                debt={liquidityPosition ? liquidityPosition.debt : ZEROWEI}\n                newDebt={ZEROWEI}\n                hasChanges={false}\n              />\n            ) : (\n              <DebtStats\n                debt={liquidityPosition ? liquidityPosition.debt : ZEROWEI}\n                newDebt={ZEROWEI}\n                hasChanges={false}\n              />\n            )}\n          </Flex>\n\n          {!isBaseAndromeda(network?.id, network?.preset) && (\n            <BorderBox py={4} px={6} flexDirection=\"column\" bg=\"navy.700\">\n              <CRatioBar\n                hasChanges={collateralChange.gt(0)}\n                currentCRatio={0}\n                liquidationCratio={(collateralType?.liquidationRatioD18?.toNumber() || 0) * 100}\n                newCratio={collateralChange.gt(0) ? Number.MAX_SAFE_INTEGER : 0}\n                targetCratio={(collateralType?.issuanceRatioD18.toNumber() || 0) * 100}\n              />\n            </BorderBox>\n          )}\n          <Rewards />\n        </BorderBox>\n        <BorderBox\n          flex={1}\n          maxW={['100%', '100%', '501px']}\n          p={6}\n          flexDirection=\"column\"\n          bg=\"navy.700\"\n          height=\"fit-content\"\n        >\n          {!txnModalOpen && (\n            <InitialDeposit\n              submit={() => {\n                setTxnModalOpen('deposit');\n              }}\n              hasAccount={!!accountId}\n              liquidityPosition={liquidityPosition}\n            />\n          )}\n\n          {txnModalOpen === 'deposit' ? (\n            <DepositModal\n              liquidityPosition={liquidityPosition}\n              onClose={() => {\n                setCollateralChange(ZEROWEI);\n                setDebtChange(ZEROWEI);\n                setTxnModalOpen(null);\n                refetch();\n              }}\n              isOpen={txnModalOpen === 'deposit'}\n              title=\"Open Liquidity Position\"\n            />\n          ) : null}\n        </BorderBox>\n      </Flex>\n    </Box>\n  );\n};\n","import { Button, Flex, Link, Text } from '@chakra-ui/react';\nimport { Amount } from '@snx-v3/Amount';\nimport { BorderBox } from '@snx-v3/BorderBox';\nimport { ZEROWEI } from '@snx-v3/constants';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { ManagePositionContext } from '@snx-v3/ManagePositionContext';\nimport { NumberInput } from '@snx-v3/NumberInput';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { LiquidityPosition } from '@snx-v3/useLiquidityPosition';\nimport { useSystemToken } from '@snx-v3/useSystemToken';\nimport { useTokenBalance } from '@snx-v3/useTokenBalance';\nimport { useTokenPrice } from '@snx-v3/useTokenPrice';\nimport { wei } from '@synthetixio/wei';\nimport { useContext } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { TokenIcon } from '../TokenIcon';\nimport { RepayAllDebt } from './';\n\nexport const Repay = ({ liquidityPosition }: { liquidityPosition?: LiquidityPosition }) => {\n  const { debtChange, setDebtChange } = useContext(ManagePositionContext);\n  const { network } = useNetwork();\n  const { collateralSymbol } = useParams();\n\n  const isBase = isBaseAndromeda(network?.id, network?.preset);\n  const availableUSDCollateral = liquidityPosition?.usdCollateral.availableCollateral;\n  const { data: systemToken } = useSystemToken();\n  const { data: balance } = useTokenBalance(systemToken?.address);\n\n  const symbol = isBase ? collateralSymbol : systemToken?.symbol;\n\n  const price = useTokenPrice(symbol);\n\n  if (liquidityPosition?.debt.gt(0.01) && isBaseAndromeda(network?.id, network?.preset)) {\n    return <RepayAllDebt liquidityPosition={liquidityPosition} />;\n  }\n\n  const debtExists = liquidityPosition?.debt.gt(0);\n  const snxUSDBalance = balance?.gt(0.01) ? balance : wei(0);\n  const currentDebt = debtExists ? liquidityPosition?.debt : wei(0);\n  const max = debtExists ? liquidityPosition?.debt : ZEROWEI;\n\n  return (\n    <Flex flexDirection=\"column\">\n      <Text color=\"gray./50\" fontSize=\"sm\" fontWeight=\"700\" mb=\"3\">\n        Repay Debt\n      </Text>\n      <BorderBox display=\"flex\" p={3} mb=\"6\">\n        <Flex alignItems=\"flex-start\" flexDir=\"column\" gap=\"1\">\n          <BorderBox display=\"flex\" py={1.5} px={2.5}>\n            <Text display=\"flex\" gap={2} fontSize=\"16px\" alignItems=\"center\" fontWeight=\"600\">\n              <TokenIcon symbol={symbol} width={16} height={16} />\n              {symbol}\n            </Text>\n          </BorderBox>\n          <Flex fontSize=\"12px\" gap=\"1\">\n            <Flex gap=\"1\" mr=\"3\" cursor=\"pointer\">\n              <Text display=\"flex\" alignItems=\"center\">\n                <Amount prefix=\"Debt: $\" value={currentDebt} data-cy=\"current debt\" />\n                {currentDebt?.gt(0) && (\n                  <>\n                    &nbsp;\n                    <Link\n                      onClick={(e) => {\n                        e.preventDefault();\n                        if (!currentDebt) {\n                          return;\n                        }\n                        setDebtChange(currentDebt.neg());\n                      }}\n                      color=\"cyan.500\"\n                      fontWeight={700}\n                    >\n                      Max\n                    </Link>\n                  </>\n                )}\n              </Text>\n            </Flex>\n          </Flex>\n        </Flex>\n        <Flex flexDirection=\"column\" flexGrow={1}>\n          <NumberInput\n            InputProps={{\n              isRequired: true,\n              'data-cy': 'repay amount input',\n              'data-max': max?.toString(),\n              type: 'number',\n              min: 0,\n            }}\n            value={debtChange.abs()}\n            onChange={(val) => setDebtChange(val.mul(-1))}\n            max={max}\n            min={ZEROWEI}\n          />\n          <Flex fontSize=\"xs\" color=\"whiteAlpha.700\" alignSelf=\"flex-end\" gap=\"1\">\n            {price.gt(0) && <Amount prefix=\"$\" value={debtChange.abs().mul(price)} />}\n          </Flex>\n        </Flex>\n      </BorderBox>\n      <Button\n        data-cy=\"repay submit\"\n        type=\"submit\"\n        isDisabled={\n          !(max && snxUSDBalance && currentDebt && availableUSDCollateral) || debtChange.gte(0)\n        }\n      >\n        {debtChange.gte(0) ? 'Enter Amount' : 'Repay'}\n      </Button>\n    </Flex>\n  );\n};\n","import { USDC_BASE_MARKET } from '@snx-v3/isBaseAndromeda';\nimport { initialState, reducer } from '@snx-v3/txnReducer';\nimport { useNetwork, useProvider, useSigner } from '@snx-v3/useBlockchain';\nimport { useCollateralPriceUpdates } from '@snx-v3/useCollateralPriceUpdates';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { useDebtRepayer } from '@snx-v3/useDebtRepayer';\nimport { formatGasPriceForTransaction } from '@snx-v3/useGasOptions';\nimport { getGasPrice } from '@snx-v3/useGasPrice';\nimport { useGasSpeed } from '@snx-v3/useGasSpeed';\nimport { useSpotMarketProxy } from '@snx-v3/useSpotMarketProxy';\nimport { withERC7412 } from '@snx-v3/withERC7412';\nimport Wei from '@synthetixio/wei';\nimport { useMutation } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\nimport React from 'react';\n\nexport const useClearDebt = ({\n  accountId,\n  poolId,\n  collateralTypeAddress,\n  availableUSDCollateral,\n  debt,\n}: {\n  accountId?: string;\n  poolId?: string;\n  collateralTypeAddress?: string;\n  availableUSDCollateral?: Wei;\n  debt?: Wei;\n}) => {\n  const [txnState, dispatch] = React.useReducer(reducer, initialState);\n  const { data: CoreProxy } = useCoreProxy();\n  const { data: SpotMarketProxy } = useSpotMarketProxy();\n  const { data: priceUpdateTx, refetch: refetchPriceUpdateTx } = useCollateralPriceUpdates();\n\n  const signer = useSigner();\n  const { network } = useNetwork();\n  const { gasSpeed } = useGasSpeed();\n  const provider = useProvider();\n\n  const { data: DebtRepayer } = useDebtRepayer();\n\n  const mutation = useMutation({\n    mutationFn: async () => {\n      if (!signer || !network || !provider) throw new Error('No signer or network');\n      if (!(CoreProxy && poolId && accountId && collateralTypeAddress && SpotMarketProxy)) {\n        return;\n      }\n\n      if (!availableUSDCollateral) return;\n\n      try {\n        dispatch({ type: 'prompting' });\n\n        const transactions = [];\n\n        if (DebtRepayer) {\n          const DebtRepayerContract = new ethers.Contract(\n            DebtRepayer.address,\n            DebtRepayer.abi,\n            signer\n          );\n          const depositDebtToRepay = DebtRepayerContract.populateTransaction.depositDebtToRepay(\n            CoreProxy.address,\n            SpotMarketProxy.address,\n            accountId,\n            poolId,\n            collateralTypeAddress,\n            USDC_BASE_MARKET\n          );\n          transactions.push(depositDebtToRepay);\n        }\n\n        const CoreProxyContract = new ethers.Contract(CoreProxy.address, CoreProxy.abi, signer);\n\n        const burn = CoreProxyContract.populateTransaction.burnUsd(\n          ethers.BigNumber.from(accountId),\n          ethers.BigNumber.from(poolId),\n          collateralTypeAddress,\n          debt?.mul(110).div(100).toBN().toString() || '0'\n        );\n        transactions.push(burn);\n\n        const callsPromise = Promise.all(transactions);\n\n        const [calls, gasPrices] = await Promise.all([callsPromise, getGasPrice({ provider })]);\n\n        if (priceUpdateTx) {\n          calls.unshift(priceUpdateTx as any);\n        }\n        const walletAddress = await signer.getAddress();\n        const { multicallTxn: erc7412Tx, gasLimit } = await withERC7412(\n          network,\n          calls,\n          'useRepay',\n          walletAddress\n        );\n\n        const gasOptionsForTransaction = formatGasPriceForTransaction({\n          gasLimit,\n          gasPrices,\n          gasSpeed,\n        });\n\n        const txn = await signer.sendTransaction({ ...erc7412Tx, ...gasOptionsForTransaction });\n        dispatch({ type: 'pending', payload: { txnHash: txn.hash } });\n\n        await txn.wait();\n        dispatch({ type: 'success' });\n      } catch (error: any) {\n        dispatch({ type: 'error', payload: { error } });\n        throw error;\n      }\n    },\n    onSuccess: () => {\n      // After mutation withERC7412, we guaranteed to have updated all the prices, dont care about await\n      refetchPriceUpdateTx();\n    },\n  });\n  return {\n    mutation,\n    txnState,\n    settle: () => dispatch({ type: 'settled' }),\n    isLoading: mutation.isPending,\n    exec: mutation.mutateAsync,\n  };\n};\n","import { Button, Flex, Text } from '@chakra-ui/react';\nimport { Amount } from '@snx-v3/Amount';\nimport { parseUnits } from '@snx-v3/format';\nimport { getSpotMarketId, isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { useApprove } from '@snx-v3/useApprove';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { useClearDebt } from '@snx-v3/useClearDebt';\nimport { useDebtRepayer } from '@snx-v3/useDebtRepayer';\nimport { useGetWrapperToken } from '@snx-v3/useGetUSDTokens';\nimport { LiquidityPosition } from '@snx-v3/useLiquidityPosition';\nimport { useSystemToken } from '@snx-v3/useSystemToken';\nimport { useTokenBalance } from '@snx-v3/useTokenBalance';\nimport { wei } from '@synthetixio/wei';\nimport { useQueryClient } from '@tanstack/react-query';\nimport { useCallback, useMemo } from 'react';\nimport { useParams, useSearchParams } from 'react-router-dom';\n\nexport const RepayAllDebt = ({ liquidityPosition }: { liquidityPosition: LiquidityPosition }) => {\n  const { network } = useNetwork();\n  const isBase = isBaseAndromeda(network?.id, network?.preset);\n  const params = useParams();\n  const [searchParams] = useSearchParams();\n\n  const queryClient = useQueryClient();\n\n  const debtExists = liquidityPosition.debt.gt(0.01);\n  const currentDebt = debtExists ? liquidityPosition.debt : wei(0);\n  const { data: systemToken } = useSystemToken();\n  const { data: wrapperToken } = useGetWrapperToken(getSpotMarketId(params.collateralSymbol));\n\n  const { data: tokenBalance } = useTokenBalance(\n    isBase ? wrapperToken : liquidityPosition.tokenAddress\n  );\n\n  const sufficientBalance = useMemo(\n    () => Number(tokenBalance?.toString()) >= currentDebt.toNumber(),\n    [currentDebt, tokenBalance]\n  );\n\n  const {\n    exec: execRepay,\n    settle: settleRepay,\n    isLoading,\n  } = useClearDebt({\n    accountId: searchParams.get('accountId') || '',\n    poolId: params.poolId,\n    collateralTypeAddress: liquidityPosition?.tokenAddress,\n    availableUSDCollateral: liquidityPosition.accountCollateral.availableCollateral,\n    debt: currentDebt,\n  });\n\n  const { data: DebtRepayer } = useDebtRepayer();\n  const {\n    approve,\n    requireApproval,\n    isLoading: approvalLoading,\n  } = useApprove({\n    contractAddress: wrapperToken,\n    //slippage for approval\n    amount: parseUnits(currentDebt.toString(), 6).mul(110).div(100),\n    spender: DebtRepayer?.address,\n  });\n\n  const submit = useCallback(async () => {\n    try {\n      if (requireApproval) {\n        await approve(false);\n      }\n      await execRepay();\n\n      await Promise.all([\n        queryClient.invalidateQueries({\n          queryKey: [`${network?.id}-${network?.preset}`, 'TokenBalance'],\n        }),\n        queryClient.invalidateQueries({\n          queryKey: [`${network?.id}-${network?.preset}`, 'Allowance'],\n        }),\n        queryClient.invalidateQueries({\n          queryKey: [`${network?.id}-${network?.preset}`, 'LiquidityPosition'],\n        }),\n        queryClient.invalidateQueries({\n          queryKey: [`${network?.id}-${network?.preset}`, 'AccountCollateralUnlockDate'],\n        }),\n      ]);\n\n      settleRepay();\n    } catch (error) {}\n  }, [approve, execRepay, network?.id, network?.preset, queryClient, requireApproval, settleRepay]);\n\n  return (\n    <Flex flexDirection=\"column\">\n      <Text fontSize=\"md\" fontWeight=\"700\" mb=\"0.5\">\n        Repay {isBase ? params.collateralSymbol : systemToken?.symbol}\n      </Text>\n      <Text fontSize=\"sm\" color=\"gray.400\" mb=\"4\">\n        Your account currently has a positive debt. This amount must be paid to initiate collateral\n        withdrawal.\n      </Text>\n      <Button\n        isDisabled={!sufficientBalance}\n        isLoading={isLoading || approvalLoading}\n        onClick={submit}\n        data-cy=\"repay\"\n      >\n        Repay USDC $<Amount value={currentDebt} data-cy=\"current debt\" />\n        {sufficientBalance ? '' : '(Insufficient Balance)'}\n      </Button>\n    </Flex>\n  );\n};\n","import { contractsHash } from '@snx-v3/tsHelpers';\nimport { useNetwork, useProvider } from '@snx-v3/useBlockchain';\nimport { getPriceUpdates, getPythFeedIds } from '@snx-v3/useCollateralPriceUpdates';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { erc7412Call } from '@snx-v3/withERC7412';\nimport { SmallIntSchema, WeiSchema } from '@snx-v3/zod';\nimport { useQuery } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\nimport { z } from 'zod';\n\nexport const MarketConfigurationSchema = z.object({\n  id: SmallIntSchema,\n  weight: WeiSchema,\n  maxDebtShareValue: WeiSchema,\n  isLocked: z.boolean(),\n});\n\nexport const PoolConfigurationSchema = z.object({\n  id: z.number(),\n  markets: MarketConfigurationSchema.array(),\n  isAnyMarketLocked: z.boolean(),\n});\n\nconst isLockedSchema = z.boolean();\n\nexport const usePoolConfiguration = (poolId?: string) => {\n  const { network } = useNetwork();\n  const { data: CoreProxy } = useCoreProxy();\n  const provider = useProvider();\n\n  return useQuery({\n    enabled: Boolean(CoreProxy && poolId && network && provider),\n    queryKey: [\n      `${network?.id}-${network?.preset}`,\n      'PoolConfiguration',\n      { poolId },\n      {\n        contractsHash: contractsHash([CoreProxy]),\n      },\n    ],\n    queryFn: async () => {\n      if (!(CoreProxy && poolId && network && provider)) throw 'OMFG';\n      const CoreProxyContract = new ethers.Contract(CoreProxy.address, CoreProxy.abi, provider);\n\n      const marketsData: {\n        marketId: ethers.BigNumber;\n        maxDebtShareValueD18: ethers.BigNumber;\n        weightD18: ethers.BigNumber;\n      }[] = await CoreProxyContract.getPoolConfiguration(ethers.BigNumber.from(poolId));\n      const markets = marketsData.map(({ marketId, maxDebtShareValueD18, weightD18 }) => ({\n        id: marketId,\n        weight: maxDebtShareValueD18,\n        maxDebtShareValue: weightD18,\n      }));\n\n      const allCalls = await Promise.all(\n        markets.map((m) => CoreProxyContract.populateTransaction.isMarketCapacityLocked(m.id))\n      );\n\n      const priceUpdateTx = (await getPriceUpdates(\n        (await getPythFeedIds(network)) as string[],\n        network\n      ).catch(() => undefined)) as any;\n      if (priceUpdateTx) {\n        allCalls.unshift(priceUpdateTx);\n      }\n\n      const decoded = await erc7412Call(\n        network,\n        provider,\n        allCalls,\n        (encoded) => {\n          const result = Array.isArray(encoded) ? encoded : [encoded];\n          return result.map((x) =>\n            isLockedSchema.parse(\n              CoreProxyContract.interface.decodeFunctionResult('isMarketCapacityLocked', x)[0]\n            )\n          );\n        },\n        'isMarketCapacityLocked'\n      );\n\n      return PoolConfigurationSchema.parse({\n        id: parseInt(poolId),\n        markets: markets.map((market, i) => ({\n          ...market,\n          isLocked: decoded[i],\n        })),\n        isAnyMarketLocked: decoded.some(Boolean),\n      });\n    },\n  });\n};\n","import {\n  Alert,\n  AlertDescription,\n  AlertIcon,\n  AlertTitle,\n  Button,\n  Collapse,\n  Flex,\n  Text,\n} from '@chakra-ui/react';\nimport { Amount } from '@snx-v3/Amount';\nimport { BorderBox } from '@snx-v3/BorderBox';\nimport { ManagePositionContext } from '@snx-v3/ManagePositionContext';\nimport { NumberInput } from '@snx-v3/NumberInput';\nimport { useCollateralType } from '@snx-v3/useCollateralTypes';\nimport { LiquidityPosition } from '@snx-v3/useLiquidityPosition';\nimport { validatePosition } from '@snx-v3/validatePosition';\nimport { usePoolConfiguration } from '@snx-v3/usePoolConfiguration';\nimport Wei, { wei } from '@synthetixio/wei';\nimport React, { FC, useCallback, useContext, useMemo } from 'react';\nimport { useParams } from '@snx-v3/useParams';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { TokenIcon } from '../TokenIcon';\nimport { useTokenPrice } from '@snx-v3/useTokenPrice';\nimport { ZEROWEI } from '@snx-v3/constants';\nimport { CRatioChangeStat } from '../CRatioBar/CRatioChangeStat';\nimport { ChangeStat } from '../ChangeStat';\nimport { currency } from '@snx-v3/format';\nimport { TransactionSummary } from '../TransactionSummary/TransactionSummary';\nimport { useWithdrawTimer } from '@snx-v3/useWithdrawTimer';\nimport { useAccountCollateral } from '@snx-v3/useAccountCollateral';\nimport { useSystemToken } from '@snx-v3/useSystemToken';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\n\nexport const UndelegateUi: FC<{\n  collateralChange: Wei;\n  currentCollateral?: Wei;\n  minDelegation?: Wei;\n  currentDebt?: Wei;\n  max?: Wei;\n  collateralPrice?: Wei;\n  displaySymbol: string;\n  symbol: string;\n  setCollateralChange: (val: Wei) => void;\n  isAnyMarketLocked?: boolean;\n  isLoadingRequiredData: boolean;\n  isBase: boolean;\n  accountId: string | undefined;\n  maxWithdrawable?: Wei;\n  navigate: (action: string) => void;\n}> = ({\n  collateralChange,\n  setCollateralChange,\n  max,\n  displaySymbol,\n  symbol,\n  currentCollateral,\n  minDelegation,\n  isLoadingRequiredData,\n  isAnyMarketLocked,\n  isBase,\n  currentDebt,\n  collateralPrice,\n  accountId,\n  maxWithdrawable,\n  navigate,\n}) => {\n  const price = useTokenPrice(symbol);\n\n  const onMaxClick = useCallback(() => {\n    if (!max) {\n      return;\n    }\n    setCollateralChange(max.mul(-1));\n  }, [max, setCollateralChange]);\n\n  const { minutes, hours, isRunning } = useWithdrawTimer(accountId);\n\n  const leftoverCollateral = currentCollateral?.add(collateralChange) || wei(0);\n  const isValidLeftover =\n    leftoverCollateral.gte(minDelegation || wei(0)) || leftoverCollateral.eq(0);\n\n  const isInputDisabled = isAnyMarketLocked === true;\n  const overAvailableBalance = collateralChange.abs().gt(max);\n  const isSubmitDisabled =\n    isLoadingRequiredData ||\n    isAnyMarketLocked === true ||\n    collateralChange.gte(0) ||\n    !isValidLeftover ||\n    overAvailableBalance ||\n    (currentDebt?.gt(0) && isBase);\n\n  const txSummaryItems = useMemo(() => {\n    const items = [\n      {\n        label: 'Locked ' + symbol,\n        value: (\n          <ChangeStat\n            value={currentCollateral || ZEROWEI}\n            newValue={leftoverCollateral}\n            formatFn={(val: Wei) => currency(val)}\n            hasChanges={collateralChange.abs().gt(0)}\n            size=\"sm\"\n          />\n        ),\n      },\n    ];\n\n    if (isBase) {\n      return items;\n    }\n\n    return [\n      ...items,\n      {\n        label: 'C-ratio',\n        value: (\n          <CRatioChangeStat\n            currentCollateral={currentCollateral}\n            currentDebt={currentDebt}\n            collateralChange={collateralChange}\n            collateralPrice={collateralPrice}\n            debtChange={ZEROWEI}\n            size=\"sm\"\n          />\n        ),\n      },\n    ];\n  }, [\n    collateralChange,\n    collateralPrice,\n    currentCollateral,\n    currentDebt,\n    isBase,\n    leftoverCollateral,\n    symbol,\n  ]);\n\n  return (\n    <Flex flexDirection=\"column\">\n      <Text color=\"gray./50\" fontSize=\"sm\" fontWeight=\"700\" mb=\"3\">\n        Unlock Collateral\n      </Text>\n      <BorderBox display=\"flex\" p={3} mb=\"6\">\n        <Flex alignItems=\"flex-start\" flexDir=\"column\" gap=\"1\">\n          <BorderBox display=\"flex\" py={1.5} px={2.5}>\n            <Text display=\"flex\" gap={2} alignItems=\"center\" fontWeight=\"600\">\n              <TokenIcon symbol={symbol} width={16} height={16} />\n              {displaySymbol}\n            </Text>\n          </BorderBox>\n          <Flex gap=\"1\" fontSize=\"12px\">\n            <Text display=\"flex\" alignItems=\"center\" gap={1}>\n              Locked:\n            </Text>\n            <Amount value={max} data-cy=\"available to unlock\" />\n            {max?.gt(0) && (\n              <Text\n                as=\"span\"\n                cursor=\"pointer\"\n                onClick={onMaxClick}\n                color=\"cyan.500\"\n                fontWeight={700}\n              >\n                Max\n              </Text>\n            )}\n          </Flex>\n        </Flex>\n        <Flex flexDir=\"column\" flexGrow={1}>\n          <NumberInput\n            InputProps={{\n              isDisabled: isInputDisabled,\n              isRequired: true,\n              'data-cy': 'undelegate amount input',\n              'data-max': max?.toString(),\n              type: 'number',\n              min: 0,\n            }}\n            value={collateralChange.abs()}\n            onChange={(val) => setCollateralChange(val.mul(-1))}\n            max={max}\n            min={ZEROWEI}\n          />\n          <Flex fontSize=\"xs\" color=\"whiteAlpha.700\" alignSelf=\"flex-end\" gap=\"1\">\n            {price.gt(0) && <Amount prefix=\"$\" value={collateralChange.abs().mul(price)} />}\n          </Flex>\n        </Flex>\n      </BorderBox>\n      <Collapse in={isInputDisabled} animateOpacity>\n        <Alert mb={6} status=\"warning\" borderRadius=\"6px\">\n          <AlertIcon />\n          <Flex direction=\"column\">\n            <AlertTitle>Credit capacity reached</AlertTitle>\n            <AlertDescription>\n              One of the markets has reached its credit capacity and is currently in a locked state.\n              You cannot unlock collateral from the pool at this time.\n            </AlertDescription>\n          </Flex>\n        </Alert>\n      </Collapse>\n\n      <Collapse in={!isValidLeftover && !collateralChange.eq(0)} animateOpacity>\n        <Alert mb={6} status=\"info\" borderRadius=\"6px\">\n          <AlertIcon />\n          <Flex direction=\"column\">\n            <AlertTitle>\n              The minimal locked amount is <Amount value={minDelegation} suffix={` ${symbol}`} />\n            </AlertTitle>\n            <AlertDescription>\n              You can close your position by removing all the collateral.\n            </AlertDescription>\n          </Flex>\n        </Alert>\n      </Collapse>\n\n      <Collapse in={collateralChange.abs().gt(0) && isValidLeftover && isRunning} animateOpacity>\n        <Alert status=\"warning\" mb=\"6\">\n          <AlertIcon />\n          <Text>\n            You will be able to withdraw assets in {hours}H{minutes}M. Any account activity will\n            reset this timer to 24H.\n          </Text>\n        </Alert>\n      </Collapse>\n\n      <Collapse\n        in={collateralChange.abs().gt(0) && isValidLeftover && !isRunning && maxWithdrawable?.gt(0)}\n        animateOpacity\n      >\n        <Alert status=\"info\" mb=\"6\" borderRadius=\"6px\">\n          <AlertIcon />\n          <Text>\n            You already have <Amount value={maxWithdrawable} suffix={` ${symbol}`} /> unlocked.\n            &nbsp;\n            <Text\n              onClick={() => navigate('withdraw')}\n              cursor=\"pointer\"\n              as=\"span\"\n              textDecoration=\"underline\"\n            >\n              Withdraw\n            </Text>{' '}\n            before unlocking again as it will restart the 24h withdrawal timeout.\n          </Text>\n        </Alert>\n      </Collapse>\n\n      <Collapse in={currentDebt?.gt(0) && isBase} animateOpacity>\n        <Alert status=\"error\" mb=\"6\" borderRadius=\"6px\">\n          <AlertIcon />\n          <Text>\n            To Unlock this amount, you need to &nbsp;\n            <Text\n              onClick={() => navigate('repay')}\n              cursor=\"pointer\"\n              as=\"span\"\n              textDecoration=\"underline\"\n            >\n              repay <Amount value={currentDebt} suffix={` ${symbol}`} />\n            </Text>{' '}\n            to your position\n          </Text>\n        </Alert>\n      </Collapse>\n\n      <Collapse in={collateralChange.abs().gt(0)} animateOpacity>\n        <TransactionSummary mb={6} items={txSummaryItems} />\n      </Collapse>\n\n      <Button data-cy=\"undelegate submit\" type=\"submit\" isDisabled={isSubmitDisabled}>\n        {collateralChange.gte(0) ? 'Enter Amount' : 'Unlock Collateral'}\n      </Button>\n    </Flex>\n  );\n};\n\nexport const Undelegate = ({ liquidityPosition }: { liquidityPosition?: LiquidityPosition }) => {\n  const { collateralChange, debtChange, setCollateralChange } = useContext(ManagePositionContext);\n  const { poolId, accountId, collateralSymbol } = useParams();\n  const { data: collateralType } = useCollateralType(collateralSymbol);\n\n  const poolConfiguration = usePoolConfiguration(poolId);\n  const { network } = useNetwork();\n\n  const collateralPrice = liquidityPosition?.collateralPrice;\n\n  const { newDebt } = validatePosition({\n    issuanceRatioD18: collateralType?.issuanceRatioD18,\n    collateralAmount: liquidityPosition?.collateralAmount,\n    collateralPrice,\n    debt: liquidityPosition?.debt,\n    collateralChange: collateralChange,\n    debtChange: debtChange,\n  });\n\n  const isBase = isBaseAndromeda(network?.id, network?.preset);\n  const { data: systemToken } = useSystemToken();\n  const { data: systemTokenBalance } = useAccountCollateral(accountId, systemToken?.address);\n\n  const [queryParams] = useSearchParams();\n  const navigate = useNavigate();\n  const handleNavigate = (actions: string) => {\n    queryParams.set('manageAction', actions);\n    navigate({\n      pathname: `/positions/${collateralType?.symbol}/${poolId}`,\n      search: queryParams.toString(),\n    });\n  };\n\n  const maxWithdrawable = useMemo(() => {\n    if (isBase) {\n      return (liquidityPosition?.accountCollateral.availableCollateral || ZEROWEI).add(\n        systemTokenBalance?.availableCollateral || ZEROWEI\n      );\n    }\n    return liquidityPosition?.accountCollateral.availableCollateral || ZEROWEI;\n  }, [\n    isBase,\n    liquidityPosition?.accountCollateral.availableCollateral,\n    systemTokenBalance?.availableCollateral,\n  ]);\n\n  // To get the max withdrawable collateral we look at the new debt and the issuance ratio.\n  // This gives us the amount in dollar. We then divide by the collateral price.\n  // To avoid the transaction failing due to small price deviations, we also apply a 2% buffer by multiplying with 0.98\n  const max = (() => {\n    if (!liquidityPosition || !collateralType) {\n      return undefined;\n    }\n    const { collateralAmount, collateralValue } = liquidityPosition;\n\n    if (isBase) {\n      return collateralAmount;\n    }\n\n    // if debt is negative it's actually credit, which means we can undelegate all collateral\n    if (newDebt.lte(0)) return collateralAmount;\n\n    const minCollateralRequired = newDebt.mul(collateralType.liquidationRatioD18);\n\n    if (collateralValue.lt(minCollateralRequired))\n      // If you're below issuance ratio, you can't withdraw anything\n      return wei(0);\n\n    const maxWithdrawable = collateralValue.sub(minCollateralRequired).mul(0.98);\n\n    return Wei.min(collateralAmount, maxWithdrawable);\n  })();\n\n  if (!collateralType) {\n    return null;\n  }\n\n  return (\n    <UndelegateUi\n      displaySymbol={collateralType.displaySymbol}\n      symbol={collateralType.symbol}\n      minDelegation={collateralType.minDelegationD18}\n      setCollateralChange={setCollateralChange}\n      collateralChange={collateralChange}\n      currentCollateral={liquidityPosition?.collateralAmount}\n      currentDebt={liquidityPosition?.debt}\n      max={max}\n      isLoadingRequiredData={poolConfiguration.isLoading || !max}\n      isAnyMarketLocked={poolConfiguration.data?.isAnyMarketLocked}\n      isBase={isBase}\n      collateralPrice={liquidityPosition?.collateralPrice}\n      accountId={accountId}\n      maxWithdrawable={maxWithdrawable}\n      navigate={handleNavigate}\n    />\n  );\n};\n","import { Network, useNetwork, useProviderForChain } from '@snx-v3/useBlockchain';\nimport { getPriceUpdates, getPythFeedIds } from '@snx-v3/useCollateralPriceUpdates';\nimport { useCollateralTypes } from '@snx-v3/useCollateralTypes';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { erc7412Call } from '@snx-v3/withERC7412';\nimport { ZodBigNumber } from '@snx-v3/zod';\nimport { wei } from '@synthetixio/wei';\nimport { useQuery } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\nimport { z } from 'zod';\n\nconst VaultCollateralSchema = z\n  .object({ value: ZodBigNumber, amount: ZodBigNumber })\n  .transform(({ value, amount }) => ({ value: wei(value), amount: wei(amount) }));\nconst VaultDebtSchema = ZodBigNumber.transform((x) => wei(x));\n\nexport const useVaultsData = (poolId?: number, customNetwork?: Network) => {\n  const { network } = useNetwork();\n  const targetNetwork = customNetwork || network;\n\n  const { data: collateralTypes } = useCollateralTypes(false, customNetwork);\n  const { data: CoreProxy } = useCoreProxy(customNetwork);\n\n  const provider = useProviderForChain(targetNetwork);\n\n  return useQuery({\n    queryKey: [\n      `${targetNetwork?.id}-${targetNetwork?.preset}`,\n      'VaultCollaterals',\n      {\n        pool: poolId,\n        tokens: collateralTypes ? collateralTypes?.map((x) => x.tokenAddress).sort() : [],\n      },\n    ],\n    enabled: Boolean(CoreProxy && collateralTypes && poolId && targetNetwork && provider),\n    queryFn: async () => {\n      if (!(CoreProxy && collateralTypes && poolId && targetNetwork && provider)) {\n        throw Error('useVaultsData should not be enabled when missing data');\n      }\n\n      const CoreProxyContract = new ethers.Contract(CoreProxy.address, CoreProxy.abi, provider);\n      const collateralCallsP = Promise.all(\n        collateralTypes.map((collateralType) =>\n          CoreProxyContract.populateTransaction.getVaultCollateral(\n            poolId,\n            collateralType.tokenAddress\n          )\n        )\n      );\n\n      const debtCallsP = Promise.all(\n        collateralTypes.map((collateralType) =>\n          CoreProxyContract.populateTransaction.getVaultDebt(poolId, collateralType.tokenAddress)\n        )\n      );\n\n      const allCalls = await Promise.all([collateralCallsP, debtCallsP]);\n\n      const priceUpdateTx = (await getPriceUpdates(\n        (await getPythFeedIds(targetNetwork)) as string[],\n        targetNetwork\n      ).catch(() => undefined)) as any;\n      if (priceUpdateTx) {\n        allCalls.unshift(priceUpdateTx);\n      }\n\n      return await erc7412Call(\n        targetNetwork,\n        provider,\n        allCalls.flat(),\n        (multicallResult) => {\n          if (!Array.isArray(multicallResult)) throw Error('Expected array');\n\n          const collateralResult = multicallResult.slice(0, collateralTypes.length);\n          const debtResult = multicallResult.slice(collateralTypes.length);\n\n          return collateralResult.map((bytes: string, i: number) => {\n            const debtBytes =\n              debtResult[i] || '0x0000000000000000000000000000000000000000000000000000000000000000';\n\n            const CoreProxyInterface = new ethers.utils.Interface(CoreProxy.abi);\n\n            const decodedDebt = CoreProxyInterface.decodeFunctionResult('getVaultDebt', debtBytes);\n            const decodedCollateral = CoreProxyInterface.decodeFunctionResult(\n              'getVaultCollateral',\n              bytes\n            );\n            const collateral = VaultCollateralSchema.parse({ ...decodedCollateral });\n            const debt = VaultDebtSchema.parse(decodedDebt[0]);\n            return {\n              debt,\n              collateral,\n              collateralType: collateralTypes[i],\n            };\n          });\n        },\n        'useVaultsData'\n      );\n    },\n  });\n};\n\nexport type VaultsDataType = ReturnType<typeof useVaultsData>['data'];\n","import {\n  Button,\n  Fade,\n  Flex,\n  Skeleton,\n  Table,\n  TableContainer,\n  Tbody,\n  Td,\n  Text,\n  Th,\n  Thead,\n  Tr,\n} from '@chakra-ui/react';\nimport { BorderBox } from '@snx-v3/BorderBox';\nimport { calculateCRatio } from '@snx-v3/calculations';\nimport { formatNumber, formatNumberToUsd, formatPercent } from '@snx-v3/formatters';\nimport { Sparkles } from '@snx-v3/icons';\nimport { Tooltip } from '@snx-v3/Tooltip';\nimport { useApr } from '@snx-v3/useApr';\nimport { ARBITRUM, NETWORKS, useNetwork, useWallet } from '@snx-v3/useBlockchain';\nimport { useParams } from '@snx-v3/useParams';\nimport { useVaultsData, VaultsDataType } from '@snx-v3/useVaultsData';\nimport { wei } from '@synthetixio/wei';\nimport React from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport { TokenIcon } from '../TokenIcon';\n\nexport const calculateVaultTotals = (vaultsData: VaultsDataType) => {\n  const zeroValues = { collateral: { value: wei(0), amount: wei(0) }, debt: wei(0) };\n  if (!vaultsData) return zeroValues;\n\n  return vaultsData.reduce((acc, { collateral, debt }) => {\n    acc.collateral = {\n      value: acc.collateral.value.add(collateral.value),\n      amount: acc.collateral.amount.add(collateral.amount),\n    };\n    acc.debt = acc.debt.add(debt);\n    return acc;\n  }, zeroValues);\n};\n\nexport function formatApr(apr?: number, networkId?: number) {\n  if (!networkId || !apr || apr <= 0) return '-';\n\n  return `${apr.toFixed(2)}%`;\n}\n\nexport const CollateralSection = () => {\n  const { poolId, networkId } = useParams();\n  const network = NETWORKS.find((n) => n.id === Number(networkId));\n  const { data: vaultsData, isPending: isVaultsLoading } = useVaultsData(Number(poolId), network);\n  const { data: aprData, isPending: isAprLoading } = useApr(network);\n  const navigate = useNavigate();\n  const [queryParams] = useSearchParams();\n  const { network: currentNetwork, setNetwork } = useNetwork();\n  const { connect } = useWallet();\n  const { collateral: totalCollateral, debt: totalDebt } = calculateVaultTotals(vaultsData);\n  const isInTotalProfit = totalDebt.lt(0);\n\n  return (\n    <Flex\n      bg=\"navy.700\"\n      borderWidth=\"1px\"\n      borderColor=\"gray.900\"\n      borderRadius=\"base\"\n      padding={6}\n      flexDirection=\"column\"\n      data-cy=\"pool collateral types\"\n    >\n      <Text fontWeight={700} fontSize=\"xl\">\n        Pool Collateralization\n      </Text>\n      <BorderBox padding={4} mt={4} flexDirection=\"column\">\n        {/* Total TVL */}\n        <Flex justifyContent=\"space-between\" mb={2}>\n          <Text\n            display=\"flex\"\n            alignItems=\"center\"\n            fontWeight={700}\n            fontSize=\"md\"\n            gap={1}\n            color=\"white\"\n          >\n            Total TVL\n          </Text>\n          <Skeleton\n            startColor=\"whiteAlpha.500\"\n            endColor=\"whiteAlpha.200\"\n            borderRadius={4}\n            isLoaded={Boolean(!isVaultsLoading && vaultsData)}\n            placeholder=\"$147,654,901.78\"\n            width=\"163px\"\n            height=\"26px\"\n          >\n            <Fade in>\n              <Text fontWeight={700} fontSize=\"xl\" color=\"white\" data-cy=\"pool tvl\" textAlign=\"end\">\n                {formatNumberToUsd(totalCollateral.value.toNumber(), { maximumFractionDigits: 0 })}\n              </Text>\n            </Fade>\n          </Skeleton>\n        </Flex>\n        {/* Total Debt */}\n        <Flex justifyContent=\"space-between\" mb={2}>\n          <Text\n            display=\"flex\"\n            alignItems=\"center\"\n            fontWeight={700}\n            fontSize=\"md\"\n            gap={1}\n            color=\"white\"\n          >\n            Total Debt/Profit\n          </Text>\n          <Skeleton\n            startColor=\"whiteAlpha.500\"\n            endColor=\"whiteAlpha.200\"\n            borderRadius={4}\n            isLoaded={Boolean(!isVaultsLoading && vaultsData)}\n            placeholder=\"$147,654,901.78\"\n            width=\"163px\"\n            height=\"26px\"\n          >\n            <Fade in>\n              <Text\n                fontWeight={700}\n                fontSize=\"xl\"\n                data-cy=\"pool total debt\"\n                textAlign=\"end\"\n                color={isInTotalProfit ? 'green.500' : 'white'}\n              >\n                {isInTotalProfit ? '+' : '-'}\n                {formatNumberToUsd(totalDebt.abs().toNumber(), { maximumFractionDigits: 0 })}\n              </Text>\n            </Fade>\n          </Skeleton>\n        </Flex>\n        {/* APR */}\n        <Flex justifyContent=\"space-between\">\n          <Text\n            display=\"flex\"\n            alignItems=\"center\"\n            fontWeight={700}\n            fontSize=\"md\"\n            gap={1}\n            color=\"white\"\n          >\n            APR\n          </Text>\n          <Skeleton\n            startColor=\"whiteAlpha.500\"\n            endColor=\"whiteAlpha.200\"\n            borderRadius={4}\n            isLoaded={!isAprLoading}\n            width=\"163px\"\n            height=\"26px\"\n          >\n            <Fade in>\n              <Tooltip label=\"APR is averaged over the trailing 7 days and is comprised of both performance and rewards\">\n                <Text fontWeight={700} fontSize=\"xl\" color=\"white\" textAlign=\"end\">\n                  {network?.id === ARBITRUM.id ? 'Up to ' : ''}\n                  {formatApr(aprData?.combinedApr, network?.id)}\n                </Text>\n              </Tooltip>\n            </Fade>\n          </Skeleton>\n        </Flex>\n      </BorderBox>\n      <TableContainer\n        maxW=\"100%\"\n        mt={4}\n        borderRadius=\"5px\"\n        sx={{\n          borderCollapse: 'separate !important',\n          borderSpacing: 0,\n        }}\n      >\n        <Table>\n          <Thead>\n            <Tr>\n              <Th\n                borderBottom=\"none\"\n                fontFamily=\"heading\"\n                fontSize=\"12px\"\n                fontWeight={700}\n                lineHeight=\"16px\"\n                letterSpacing={0.6}\n                color=\"gray.600\"\n                textTransform=\"none\"\n              >\n                Asset\n              </Th>\n              <Th\n                borderBottom=\"none\"\n                fontFamily=\"heading\"\n                fontSize=\"12px\"\n                fontWeight={700}\n                lineHeight=\"16px\"\n                letterSpacing={0.6}\n                color=\"gray.600\"\n                textTransform=\"none\"\n              >\n                TVL\n              </Th>\n              <Th\n                borderBottom=\"none\"\n                fontFamily=\"heading\"\n                fontSize=\"12px\"\n                fontWeight={700}\n                lineHeight=\"16px\"\n                letterSpacing={0.6}\n                color=\"gray.600\"\n                textTransform=\"none\"\n              >\n                Debt/Profit\n              </Th>\n              <Th\n                borderBottom=\"none\"\n                fontFamily=\"heading\"\n                fontSize=\"12px\"\n                fontWeight={700}\n                lineHeight=\"16px\"\n                letterSpacing={0.6}\n                color=\"gray.600\"\n                textTransform=\"none\"\n              >\n                APR\n              </Th>\n              <Th\n                borderBottom=\"none\"\n                fontFamily=\"heading\"\n                fontSize=\"12px\"\n                fontWeight={700}\n                lineHeight=\"16px\"\n                letterSpacing={0.6}\n                color=\"gray.600\"\n                textTransform=\"none\"\n              >\n                {' '}\n              </Th>\n            </Tr>\n          </Thead>\n          <Tbody>\n            {(isAprLoading || isVaultsLoading || !vaultsData) && (\n              <React.Fragment>\n                {[1, 2, 3].map((index) => (\n                  <Tr\n                    key={index}\n                    textAlign=\"left\"\n                    borderBottomColor=\"gray.900\"\n                    borderBottomWidth=\"1px\"\n                  >\n                    <Th borderBottom=\"none\">\n                      <Skeleton\n                        startColor=\"whiteAlpha.500\"\n                        endColor=\"whiteAlpha.200\"\n                        borderRadius={4}\n                        height=\"26px\"\n                        width=\"92px\"\n                      />\n                    </Th>\n                    <Th borderBottom=\"none\">\n                      <Skeleton\n                        startColor=\"whiteAlpha.500\"\n                        endColor=\"whiteAlpha.200\"\n                        borderRadius={4}\n                        height=\"26px\"\n                        width=\"92px\"\n                      />\n                    </Th>\n                    <Th borderBottom=\"none\">\n                      <Skeleton\n                        startColor=\"whiteAlpha.500\"\n                        endColor=\"whiteAlpha.200\"\n                        borderRadius={4}\n                        height=\"26px\"\n                        width=\"92px\"\n                      />\n                    </Th>\n                    <Th borderBottom=\"none\">\n                      <Skeleton\n                        startColor=\"whiteAlpha.500\"\n                        endColor=\"whiteAlpha.200\"\n                        borderRadius={4}\n                        height=\"26px\"\n                        width=\"92px\"\n                      />\n                    </Th>\n                    <Th borderBottom=\"none\">\n                      <Skeleton\n                        startColor=\"whiteAlpha.500\"\n                        endColor=\"whiteAlpha.200\"\n                        borderRadius={4}\n                        height=\"26px\"\n                        width=\"92px\"\n                      />\n                    </Th>\n                  </Tr>\n                ))}\n              </React.Fragment>\n            )}\n            {vaultsData?.map((vaultCollateral, i) => {\n              // Calculate c-ratio\n              const cRatio = calculateCRatio(\n                vaultCollateral.debt,\n                vaultCollateral.collateral.value\n              );\n\n              const collateralApr = aprData?.collateralAprs.find(\n                (collateralAprData: { collateralType: string }) =>\n                  collateralAprData.collateralType.toLowerCase() ===\n                  vaultCollateral.collateralType.tokenAddress.toLowerCase()\n              );\n\n              const { apr28d, apr28dRewards, apr28dPnl } = collateralApr || {\n                apr28d: 0,\n                apr28dRewards: 0,\n                apr28dPnl: 0,\n              };\n\n              const isInProfit = vaultCollateral.debt.lt(0);\n\n              const borderTopWidth = i === 0 ? '1px' : '0px';\n\n              return (\n                <Tr\n                  key={vaultCollateral.collateralType.tokenAddress}\n                  borderTopWidth={borderTopWidth}\n                  borderTopColor=\"gray.900\"\n                  borderBottomWidth=\"1px\"\n                  borderBottomColor=\"gray.900\"\n                >\n                  <Td borderBottom=\"none\" py={1}>\n                    <Fade in>\n                      <Flex alignItems=\"center\" gap={2}>\n                        <TokenIcon symbol={vaultCollateral.collateralType.symbol} w={30} h={30} />\n                        <Flex>\n                          <Flex direction=\"column\">\n                            <Text fontWeight={700} lineHeight=\"20px\" fontSize=\"14px\" color=\"white\">\n                              {vaultCollateral.collateralType.displaySymbol}\n                            </Text>\n                            <Text\n                              fontFamily=\"heading\"\n                              fontSize=\"12px\"\n                              lineHeight=\"16px\"\n                              color=\"gray.500\"\n                            >\n                              {vaultCollateral.collateralType.name}\n                            </Text>\n                          </Flex>\n                        </Flex>\n                      </Flex>\n                    </Fade>\n                  </Td>\n                  <Td borderBottom=\"none\">\n                    <Fade in>\n                      <Flex direction=\"column\">\n                        <Text\n                          fontSize=\"14px\"\n                          fontWeight={500}\n                          color=\"white\"\n                          lineHeight=\"20px\"\n                          fontFamily=\"heading\"\n                          data-cy=\"collateral value\"\n                        >\n                          {formatNumberToUsd(vaultCollateral.collateral.value.toNumber(), {\n                            maximumFractionDigits: 0,\n                            minimumFractionDigits: 0,\n                          })}\n                        </Text>\n                        <Text\n                          fontSize=\"12px\"\n                          color=\"gray.500\"\n                          lineHeight=\"16px\"\n                          fontFamily=\"heading\"\n                          data-cy=\"collateral value\"\n                        >\n                          {formatNumber(vaultCollateral.collateral.amount.toNumber(), {\n                            maximumFractionDigits: 0,\n                            minimumFractionDigits: 0,\n                          })}{' '}\n                          {vaultCollateral.collateralType.symbol}\n                        </Text>\n                      </Flex>\n                    </Fade>\n                  </Td>\n                  <Td borderBottom=\"none\">\n                    <Fade in>\n                      <Tooltip\n                        label={\n                          isInProfit\n                            ? `This vault has a profit of ${formatNumberToUsd(\n                                vaultCollateral.debt.abs().toNumber(),\n                                {\n                                  maximumFractionDigits: 0,\n                                  minimumFractionDigits: 0,\n                                }\n                              )}`\n                            : ''\n                        }\n                      >\n                        <Flex direction=\"column\">\n                          <Text\n                            fontSize=\"14px\"\n                            color={isInProfit ? 'green.500' : 'white'}\n                            data-cy=\"collateral debt\"\n                            fontWeight={500}\n                          >\n                            {isInProfit ? '+' : '-'}\n                            {formatNumberToUsd(vaultCollateral.debt.abs().toNumber(), {\n                              maximumFractionDigits: 0,\n                              minimumFractionDigits: 0,\n                            })}\n                          </Text>\n                          <Text\n                            fontFamily=\"heading\"\n                            fontSize=\"12px\"\n                            lineHeight=\"14px\"\n                            color=\"gray.500\"\n                          >\n                            C-ratio: {cRatio.lte(0) ? 'Infinite' : formatPercent(cRatio.toNumber())}\n                          </Text>\n                        </Flex>\n                      </Tooltip>\n                    </Fade>\n                  </Td>\n                  <Td borderBottom=\"none\">\n                    <Fade in>\n                      <Tooltip\n                        label={\n                          <Flex direction=\"column\">\n                            <Flex justifyContent=\"space-between\">\n                              <Text fontWeight={700} mr={2}>\n                                Total APR:\n                              </Text>\n                              <Text fontWeight={700}>{formatApr(apr28d * 100, network?.id)}</Text>\n                            </Flex>\n                            <Flex justifyContent=\"space-between\">\n                              <Text mr={2}>Performance:</Text>\n                              <Text>{formatApr(apr28dPnl * 100, network?.id)}</Text>\n                            </Flex>\n                            <Flex justifyContent=\"space-between\">\n                              <Text mr={2}>Rewards: </Text>\n                              <Text>{formatApr(apr28dRewards * 100, network?.id)}</Text>\n                            </Flex>\n                          </Flex>\n                        }\n                      >\n                        <Flex alignItems=\"center\">\n                          <Text\n                            fontSize=\"sm\"\n                            fontWeight={500}\n                            color=\"white\"\n                            data-cy=\"collateral apr\"\n                          >\n                            {formatApr(apr28d * 100, network?.id)}\n                          </Text>\n                          <Sparkles w=\"14px\" h=\"14px\" mb={1} ml=\"0.5px\" mt=\"1px\" />\n                        </Flex>\n                      </Tooltip>\n                    </Fade>\n                  </Td>\n                  <Td borderBottom=\"none\" textAlign=\"end\">\n                    <Fade in>\n                      <Button\n                        onClick={async (e) => {\n                          try {\n                            e.stopPropagation();\n\n                            if (!currentNetwork) {\n                              connect();\n                              return;\n                            }\n\n                            if (network && currentNetwork.id !== network.id) {\n                              if (!(await setNetwork(network.id))) {\n                                return;\n                              }\n                            }\n\n                            queryParams.set('manageAction', 'deposit');\n                            navigate({\n                              pathname: `/positions/${vaultCollateral.collateralType.symbol}/${poolId}`,\n                              search: queryParams.toString(),\n                            });\n                          } catch (error) {}\n                        }}\n                        height=\"32px\"\n                        py=\"10px\"\n                        px=\"12px\"\n                        whiteSpace=\"nowrap\"\n                        borderRadius=\"4px\"\n                        fontFamily=\"heading\"\n                        fontWeight={700}\n                        fontSize=\"14px\"\n                        lineHeight=\"20px\"\n                      >\n                        Deposit\n                      </Button>\n                    </Fade>\n                  </Td>\n                </Tr>\n              );\n            })}\n          </Tbody>\n        </Table>\n      </TableContainer>\n    </Flex>\n  );\n};\n","import { Flex, Text, Tooltip } from '@chakra-ui/react';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { Network } from '@snx-v3/useBlockchain';\nimport { CollateralType } from '@snx-v3/useCollateralTypes';\nimport autoCompoundSvg from './auto-compound.svg';\nimport interestFreeLoanSvg from './interest-free-loan.svg';\nimport yieldOnYieldSvg from './yield-on-yield.svg';\n\nexport const Specifics: React.FC<{\n  network?: Network;\n  isToros?: boolean;\n  collateralType?:\n    | CollateralType\n    | {\n        address: string;\n        symbol: string;\n      };\n}> = ({ network, isToros, collateralType }) => {\n  const isBase = isBaseAndromeda(network?.id, network?.preset);\n\n  if (isToros) {\n    return (\n      <Flex alignItems=\"center\" gap={2}>\n        {collateralType?.symbol?.toUpperCase() === 'wstETH'.toUpperCase() && (\n          <Tooltip textAlign=\"left\" label=\"Yield on yield\" hasArrow>\n            <img src={yieldOnYieldSvg} alt=\"Yield on yield\" />\n          </Tooltip>\n        )}\n        <Tooltip textAlign=\"left\" label=\"Auto compounding rewards\" hasArrow>\n          <img src={autoCompoundSvg} alt=\"Auto compounding rewards\" />\n        </Tooltip>\n      </Flex>\n    );\n  }\n\n  if (isBase) {\n    if (collateralType?.symbol?.toUpperCase() === 'stataUSDC'.toUpperCase()) {\n      return (\n        <Tooltip textAlign=\"left\" label=\"Yield on yield\" hasArrow>\n          <img src={yieldOnYieldSvg} alt=\"Yield on yield\" />\n        </Tooltip>\n      );\n    }\n\n    return (\n      <Text fontFamily=\"heading\" fontSize=\"14px\" lineHeight=\"20px\" fontWeight={500} color=\"white\">\n        N/A\n      </Text>\n    );\n  }\n\n  return (\n    <Tooltip textAlign=\"left\" label=\"Interest free loan\" hasArrow>\n      <img src={interestFreeLoanSvg} alt=\"Interest free loan\" />\n    </Tooltip>\n  );\n};\n","import { Flex, Button, Text, Fade } from '@chakra-ui/react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport {\n  MAINNET,\n  Network,\n  NetworkIcon,\n  SEPOLIA,\n  useNetwork,\n  useWallet,\n} from '@snx-v3/useBlockchain';\nimport { wei } from '@synthetixio/wei';\nimport { BigNumberish } from 'ethers';\nimport { TokenIcon } from '../../TokenIcon';\nimport { CollateralType } from '@snx-v3/useCollateralTypes';\nimport { Sparkles } from '@snx-v3/icons';\nimport { formatNumber, formatNumberToUsd } from '@snx-v3/formatters';\nimport { formatApr } from '../CollateralSection';\nimport { Tooltip } from '@snx-v3/Tooltip';\nimport { useTokenBalance } from '@snx-v3/useTokenBalance';\nimport { getSpotMarketId, isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { useGetWrapperToken } from '@snx-v3/useGetUSDTokens';\nimport { ZEROWEI } from '@snx-v3/constants';\nimport { MigrationBanner } from '../../Migration/MigrationBanner';\nimport { Specifics } from './Specifics';\n\ninterface CollateralTypeWithDeposited extends CollateralType {\n  collateralDeposited: string;\n}\n\nexport interface Props {\n  collateralType: CollateralTypeWithDeposited;\n  pool: {\n    name: string;\n    id: string;\n  };\n  network: Network;\n  collateralPrices?: {\n    symbol: string;\n    price: BigNumberish;\n  }[];\n  apr: {\n    combinedApr: number;\n    cumulativePnl: number;\n    collateralAprs: any[];\n  };\n}\n\nexport const PoolRow = ({ pool, network, apr, collateralType, collateralPrices }: Props) => {\n  const { data: wrapperToken } = useGetWrapperToken(\n    getSpotMarketId(collateralType.symbol),\n    network\n  );\n  const isBase = isBaseAndromeda(network?.id, network?.preset);\n  // TODO: This will need refactoring\n  const balanceAddress = isBase ? wrapperToken : collateralType?.tokenAddress;\n\n  const { data: balance } = useTokenBalance(balanceAddress, network);\n  const navigate = useNavigate();\n  const [queryParams] = useSearchParams();\n\n  const { network: currentNetwork, setNetwork } = useNetwork();\n  const { connect } = useWallet();\n\n  const price = wei(\n    collateralPrices?.find(\n      (price) => price.symbol.toUpperCase() === collateralType.symbol.toUpperCase()\n    )?.price || ZEROWEI\n  );\n\n  const collateralApr = apr.collateralAprs.find(\n    (apr) => apr.collateralType === collateralType.tokenAddress.toLowerCase()\n  ) || { apr7d: 0, apr7dRewards: 0, apr7dPnl: 0 };\n\n  const { apr7d, apr7dRewards, apr7dPnl } = collateralApr;\n\n  const onClick = async () => {\n    try {\n      if (!currentNetwork) {\n        connect();\n        return;\n      }\n\n      if (currentNetwork.id !== network.id) {\n        if (!(await setNetwork(network.id))) {\n          return;\n        }\n      }\n\n      queryParams.set('manageAction', 'deposit');\n      navigate({\n        pathname: `/positions/${collateralType.symbol}/${pool.id}`,\n        search: queryParams.toString(),\n      });\n    } catch (error) {}\n  };\n\n  const buttonText = !currentNetwork ? 'Connect Wallet' : 'Deposit';\n\n  return (\n    <Fade in>\n      <Flex\n        flexDir=\"column\"\n        w=\"100%\"\n        border=\"1px solid\"\n        borderColor=\"gray.900\"\n        rounded=\"base\"\n        bg=\"navy.700\"\n        px={3}\n        py={4}\n      >\n        <Flex px={4} flexDir=\"row\" w=\"100%\" gap={4}>\n          <Flex width=\"190px\" alignItems=\"center\" _hover={{ cursor: 'pointer' }} onClick={onClick}>\n            <Flex position=\"relative\">\n              <TokenIcon w={40} h={40} symbol={collateralType.symbol} />\n              <NetworkIcon\n                position=\"absolute\"\n                right={0}\n                bottom={0}\n                networkId={network.id}\n                size=\"14px\"\n              />\n            </Flex>\n            <Flex flexDirection=\"column\" ml={3} mr=\"auto\">\n              <Text\n                fontSize=\"14px\"\n                color=\"white\"\n                fontWeight={700}\n                lineHeight=\"1.25rem\"\n                fontFamily=\"heading\"\n              >\n                {collateralType.symbol}\n              </Text>\n              <Text\n                textTransform=\"capitalize\"\n                fontSize=\"xs\"\n                color=\"gray.500\"\n                fontFamily=\"heading\"\n                lineHeight=\"1rem\"\n              >\n                {network.name} Network\n              </Text>\n            </Flex>\n          </Flex>\n          <Flex width=\"220px\" direction=\"column\" alignItems=\"flex-end\">\n            <Text\n              fontFamily=\"heading\"\n              fontSize=\"14px\"\n              fontWeight={500}\n              lineHeight=\"28px\"\n              color=\"white\"\n            >\n              {balance ? formatNumberToUsd(balance.mul(price).toNumber()) : '-'}\n            </Text>\n            <Text color=\"gray.500\" fontFamily=\"heading\" fontSize=\"12px\" lineHeight=\"16px\">\n              {balance ? formatNumber(balance.toNumber()) : ''} {collateralType.symbol}\n            </Text>\n          </Flex>\n          <Flex width=\"189px\" flexDir=\"column\" justifyContent=\"cetner\" alignItems=\"flex-end\">\n            <Text\n              fontFamily=\"heading\"\n              fontSize=\"14px\"\n              fontWeight={500}\n              lineHeight=\"28px\"\n              color=\"white\"\n            >\n              SC Pool\n            </Text>\n            <Text color=\"gray.500\" fontFamily=\"heading\" fontSize=\"12px\" lineHeight=\"16px\">\n              Spartan Council\n            </Text>\n          </Flex>\n          <Flex width=\"144px\" alignItems=\"center\" justifyContent=\"flex-end\">\n            <Text\n              fontFamily=\"heading\"\n              fontSize=\"14px\"\n              lineHeight=\"20px\"\n              fontWeight={500}\n              color=\"white\"\n              textAlign=\"right\"\n            >\n              {price\n                ? formatNumberToUsd(\n                    wei(collateralType.collateralDeposited, Number(collateralType.decimals), true)\n                      .mul(price)\n                      .toNumber()\n                  )\n                : 0}\n            </Text>\n          </Flex>\n          <Flex width=\"144px\" alignItems=\"center\" justifyContent=\"flex-end\">\n            <Text\n              fontFamily=\"heading\"\n              fontSize=\"14px\"\n              lineHeight=\"20px\"\n              fontWeight={500}\n              color=\"white\"\n            >\n              {formatApr(apr7d * 100, network?.id)}\n              <Tooltip\n                label={\n                  <Flex direction=\"column\">\n                    <Flex justifyContent=\"space-between\">\n                      <Text fontWeight={700} mr={2}>\n                        Total APR:\n                      </Text>\n                      <Text fontWeight={700}>{formatApr(apr7d * 100, network?.id)}</Text>\n                    </Flex>\n                    <Flex justifyContent=\"space-between\">\n                      <Text mr={2}>Performance:</Text>\n                      <Text>{formatApr(apr7dPnl * 100, network?.id)}</Text>\n                    </Flex>\n                    <Flex justifyContent=\"space-between\">\n                      <Text mr={2}>Rewards: </Text>\n                      <Text>{formatApr(apr7dRewards * 100, network?.id)}</Text>\n                    </Flex>\n                  </Flex>\n                }\n              >\n                <Flex as=\"span\" display=\"inline\">\n                  <Sparkles w=\"14px\" h=\"14px\" mb={1} ml=\"0.5px\" mt=\"1px\" />\n                </Flex>\n              </Tooltip>\n            </Text>\n          </Flex>\n          <Flex alignItems=\"center\" justifyContent=\"flex-end\" width=\"121px\" textAlign=\"right\">\n            <Specifics network={network} collateralType={collateralType} />\n          </Flex>\n          <Flex minW=\"159px\" flex=\"1\" justifyContent=\"flex-end\">\n            <Button\n              onClick={onClick}\n              size=\"sm\"\n              height=\"32px\"\n              py=\"10px\"\n              px={2}\n              whiteSpace=\"nowrap\"\n              borderRadius=\"4px\"\n              fontFamily=\"heading\"\n              fontWeight={700}\n              fontSize=\"14px\"\n              lineHeight=\"20px\"\n            >\n              {buttonText}\n            </Button>\n          </Flex>\n        </Flex>\n\n        {[MAINNET.id, SEPOLIA.id].includes(network.id) && (\n          <MigrationBanner network={network} type=\"banner\" />\n        )}\n      </Flex>\n    </Fade>\n  );\n};\n","import { Network } from '@snx-v3/useBlockchain';\nimport { BigNumberish } from 'ethers';\nimport { CollateralType } from '@snx-v3/useCollateralTypes';\nimport { PoolRow } from './PoolRow';\n\ninterface CollateralTypeWithDeposited extends CollateralType {\n  collateralDeposited: string;\n}\n\nexport interface PoolCardProps {\n  pool: {\n    name: string;\n    id: string;\n  };\n  network: Network;\n  collateralTypes?: CollateralTypeWithDeposited[];\n  collateralPrices?: {\n    symbol: string;\n    price: BigNumberish;\n  }[];\n  apr: {\n    combinedApr: number;\n    cumulativePnl: number;\n    collateralAprs: any[];\n  };\n  rewardsPayoutTokens?: string[];\n}\n\nexport const PoolCard = ({\n  pool,\n  network,\n  apr,\n  collateralTypes,\n  collateralPrices,\n}: PoolCardProps) => {\n  return (\n    <>\n      {collateralTypes?.map((collateralType) => {\n        return (\n          <PoolRow\n            key={collateralType.tokenAddress + network.id}\n            pool={pool}\n            network={network}\n            apr={apr}\n            collateralType={collateralType}\n            collateralPrices={collateralPrices}\n          />\n        );\n      })}\n    </>\n  );\n};\n","import { Dispatch } from 'react';\nimport { Flex, Button } from '@chakra-ui/react';\nimport { PoolsFilterAction } from './PoolsList';\nimport { NETWORKS, NetworkIcon } from '@snx-v3/useBlockchain';\n\ninterface ChainFilterProps {\n  activeChains: number[];\n  dispatch: Dispatch<PoolsFilterAction>;\n}\n\n// TODO: Remove filter when mainnet and optimism are supported\nconst mainnets = NETWORKS.filter(({ isSupported, isTestnet }) => isSupported && !isTestnet).filter(\n  ({ id }) => id !== 10\n);\n\nexport const ChainFilter = ({ activeChains, dispatch }: ChainFilterProps) => {\n  const isAllActive = activeChains.length === 0;\n\n  return (\n    <Flex justifyContent=\"center\">\n      <Flex\n        variant=\"unstyled\"\n        bg={isAllActive ? 'whiteAlpha.300' : 'transparent'}\n        onClick={() => dispatch({ type: 'RESET_CHAIN' })}\n        color=\"gray.50\"\n        as={Button}\n        px=\"16px\"\n        py=\"6px\"\n        fontWeight={600}\n        borderRadius=\"9999px\"\n        mr={1.5}\n        fontSize=\"sm\"\n      >\n        All Networks\n      </Flex>\n      {mainnets.map((chain) => {\n        const isActive = activeChains.includes(chain.id);\n\n        const toggle = () => {\n          if (isActive) {\n            dispatch({ type: 'REMOVE_CHAIN', payload: { chain: chain.id } });\n          } else {\n            dispatch({ type: 'ADD_CHAIN', payload: { chain: chain.id } });\n          }\n        };\n\n        return (\n          <Flex\n            key={chain.id}\n            onClick={toggle}\n            variant=\"unstyled\"\n            bg={isActive ? 'whiteAlpha.300' : 'transparent'}\n            justifyContent=\"center\"\n            display=\"flex\"\n            mr={1.5}\n            as={Button}\n            px=\"16px\"\n            py=\"6px\"\n            fontWeight={600}\n            borderRadius=\"9999px\"\n          >\n            <NetworkIcon size=\"18px\" networkId={chain.id} />\n          </Flex>\n        );\n      })}\n    </Flex>\n  );\n};\n","import { Dispatch } from 'react';\nimport { Flex, Button } from '@chakra-ui/react';\nimport { TokenIcon } from '../TokenIcon';\nimport { PoolsFilterAction } from './PoolsList';\n\nconst supportedCollateralTypes = ['WETH', 'SNX', 'USDC', 'ARB', 'wstETH'];\n\ninterface CollateralFilterProps {\n  activeCollaterals: string[];\n  dispatch: Dispatch<PoolsFilterAction>;\n}\n\nexport const CollateralFilter = ({ activeCollaterals, dispatch }: CollateralFilterProps) => {\n  const isAllActive = activeCollaterals.length === 0;\n\n  return (\n    <Flex justifyContent=\"center\">\n      <Flex\n        variant=\"unstyled\"\n        bg={isAllActive ? 'whiteAlpha.300' : 'transparent'}\n        onClick={() => dispatch({ type: 'RESET_COLLATERAL' })}\n        color=\"gray.50\"\n        as={Button}\n        px=\"16px\"\n        py=\"6px\"\n        fontWeight={600}\n        borderRadius=\"9999px\"\n        mr={1.5}\n        fontSize=\"sm\"\n      >\n        All Collaterals\n      </Flex>\n      {supportedCollateralTypes.map((collateral) => {\n        const isActive = activeCollaterals.includes(collateral);\n\n        const toggle = () => {\n          if (isActive) {\n            dispatch({ type: 'REMOVE_COLLATERAL', payload: { collateral } });\n          } else {\n            dispatch({ type: 'ADD_COLLATERAL', payload: { collateral } });\n          }\n        };\n\n        return (\n          <Flex\n            key={collateral}\n            onClick={toggle}\n            variant=\"unstyled\"\n            bg={isActive ? 'whiteAlpha.300' : 'transparent'}\n            justifyContent=\"center\"\n            display=\"flex\"\n            mr={1.5}\n            as={Button}\n            px=\"16px\"\n            py=\"6px\"\n            fontWeight={600}\n            borderRadius=\"9999px\"\n          >\n            <TokenIcon width={18} height={18} symbol={collateral} />\n          </Flex>\n        );\n      })}\n    </Flex>\n  );\n};\n","import { Flex, Text, Button, Link, Fade, Icon, IconProps } from '@chakra-ui/react';\nimport { ARBITRUM, BASE_ANDROMEDA, NetworkIcon } from '@snx-v3/useBlockchain';\nimport { TokenIcon } from '../../TokenIcon';\nimport { useTokenBalance } from '@snx-v3/useTokenBalance';\nimport { formatNumberToUsd } from '@snx-v3/formatters';\nimport { formatNumber } from 'humanize-plus';\nimport { Specifics } from './Specifics';\nimport { useQuery } from '@tanstack/react-query';\nimport { fetchTorosPool } from '@snx-v3/usePoolsList';\n\ninterface TorosPoolCardProps {\n  token: 'USDC' | 'wstETH';\n}\n\nconst vaults = {\n  USDC: {\n    pool: '0xc1e02884af4a283ca25ab63c45360d220d69da52',\n    address: '0x833589fcd6edb6e08f4c7c32d4f71b54bda02913',\n    network: BASE_ANDROMEDA,\n    link: 'https://toros.finance/synthetix-usdc-andromeda-yield',\n  },\n  wstETH: {\n    pool: '0xe9b5260d99d283ff887859c569baf8ad1bd12aac',\n    address: '0x5979d7b546e38e414f7e9822514be443a4800529',\n    network: ARBITRUM,\n    link: 'https://toros.finance/synthetix-eth-yield',\n  },\n};\n\nexport function TorosPoolCard({ token }: TorosPoolCardProps) {\n  const vault = vaults[token];\n\n  const { data: balance } = useTokenBalance(vault.address, vault.network);\n  const { data } = useQuery({\n    queryKey: ['toros-pool', token],\n    queryFn: () => fetchTorosPool(vault.pool),\n  });\n\n  return (\n    <Fade in>\n      <Flex\n        flexDir=\"row\"\n        w=\"100%\"\n        border=\"1px solid\"\n        borderColor=\"gray.900\"\n        rounded=\"base\"\n        bg=\"navy.700\"\n        gap={4}\n        px={7}\n        py={4}\n      >\n        <Flex width=\"190px\" alignItems=\"center\">\n          <Flex position=\"relative\">\n            <TokenIcon w={40} h={40} symbol={token} />\n            <NetworkIcon\n              position=\"absolute\"\n              right={0}\n              bottom={0}\n              networkId={vault.network.id}\n              size=\"14px\"\n            />\n          </Flex>\n          <Flex flexDirection=\"column\" ml={3} mr=\"auto\">\n            <Text\n              fontSize=\"14px\"\n              color=\"white\"\n              fontWeight={700}\n              lineHeight=\"1.25rem\"\n              fontFamily=\"heading\"\n            >\n              {token}\n            </Text>\n            <Text\n              textTransform=\"capitalize\"\n              fontSize=\"xs\"\n              color=\"gray.500\"\n              fontFamily=\"heading\"\n              lineHeight=\"1rem\"\n            >\n              {vault.network.name} Network\n            </Text>\n          </Flex>\n        </Flex>\n        <Flex width=\"220px\" direction=\"column\" alignItems=\"flex-end\">\n          <Text\n            fontFamily=\"heading\"\n            fontSize=\"14px\"\n            fontWeight={500}\n            lineHeight=\"28px\"\n            color=\"white\"\n          >\n            {balance ? formatNumberToUsd(balance.toNumber()) : '-'}\n          </Text>\n          <Text color=\"gray.500\" fontFamily=\"heading\" fontSize=\"12px\" lineHeight=\"16px\">\n            {balance ? formatNumber(balance.toNumber()) : ''} {token}\n          </Text>\n        </Flex>\n        <Flex width=\"189px\" flexDir=\"column\" justifyContent=\"cetner\" alignItems=\"flex-end\">\n          <Text\n            fontFamily=\"heading\"\n            fontSize=\"14px\"\n            fontWeight={500}\n            lineHeight=\"28px\"\n            color=\"white\"\n          >\n            Toros Yield Vault\n          </Text>\n          <Text color=\"gray.500\" fontFamily=\"heading\" fontSize=\"12px\" lineHeight=\"16px\">\n            Toros\n          </Text>\n        </Flex>\n        <Flex width=\"144px\" alignItems=\"center\" justifyContent=\"flex-end\">\n          <Text\n            fontFamily=\"heading\"\n            fontSize=\"14px\"\n            lineHeight=\"20px\"\n            fontWeight={500}\n            color=\"white\"\n            textAlign=\"right\"\n          >\n            ${data?.tvl}\n          </Text>\n        </Flex>\n        <Flex width=\"144px\" alignItems=\"center\" justifyContent=\"flex-end\">\n          <Text\n            fontFamily=\"heading\"\n            fontSize=\"14px\"\n            lineHeight=\"20px\"\n            fontWeight={500}\n            color=\"white\"\n          >\n            {data?.apy}%\n          </Text>\n        </Flex>\n        <Flex alignItems=\"center\" justifyContent=\"flex-end\" width=\"121px\" textAlign=\"right\">\n          <Specifics isToros collateralType={{ address: vault.address, symbol: token }} />\n        </Flex>\n        <Flex flex={1} minWidth=\"159px\" alignItems=\"center\" justifyContent=\"flex-end\">\n          <Link\n            href={vault.link}\n            rel=\"noopener\"\n            target=\"_blank\"\n            _hover={{ textDecoration: 'none' }}\n          >\n            <Button\n              size=\"sm\"\n              height=\"32px\"\n              py=\"10px\"\n              px={2}\n              whiteSpace=\"nowrap\"\n              borderRadius=\"4px\"\n              fontFamily=\"heading\"\n              fontWeight={700}\n              fontSize=\"14px\"\n              lineHeight=\"20px\"\n            >\n              Deposit\n              <LinkOffIcon ml={1} />\n            </Button>\n          </Link>\n        </Flex>\n      </Flex>\n    </Fade>\n  );\n}\n\nconst LinkOffIcon = ({ ...props }: IconProps) => (\n  <Icon width=\"14px\" height=\"14px\" viewBox=\"0 0 14 14\" fill=\"none\" {...props}>\n    <g clipPath=\"url(#clip0_13614_19286)\">\n      <path\n        d=\"M9.07955 4.47121L4.65447 4.47121L4.65447 3.30472L11.071 3.30472L11.071 9.72124L9.90451 9.72124L9.90451 5.29617L4.11719 11.325L3.29224 10.5L9.07955 4.47121Z\"\n        fill=\"currentColor\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0_13614_19286\">\n        <rect width=\"14\" height=\"14\" fill=\"white\" />\n      </clipPath>\n    </defs>\n  </Icon>\n);\n","import { Flex, Skeleton } from '@chakra-ui/react';\n\nexport const PoolCardsLoading = () => (\n  <>\n    {Array.from(Array(6).keys()).map((i) => (\n      <Flex\n        w=\"100%\"\n        border=\"1px solid\"\n        borderColor=\"gray.900\"\n        rounded=\"base\"\n        bg=\"navy.700\"\n        gap={4}\n        py={6}\n        px={4}\n        key={i}\n      >\n        <Flex alignItems=\"center\" justifyContent=\"flex-start\" width=\"190px\" gap={3}>\n          <Skeleton width=\"40px\" height=\"40px\" rounded=\"full\" />\n          <Flex flex={1} flexDirection=\"column\" gap={1}>\n            <Skeleton height={6} />\n            <Skeleton height={3.5} />\n          </Flex>\n        </Flex>\n        <Flex justifyContent=\"flex-end\" alignItems=\"center\" width=\"220px\">\n          <Skeleton height={6} width=\"92px\" />\n        </Flex>\n        <Flex justifyContent=\"flex-end\" alignItems=\"center\" width=\"189px\">\n          <Skeleton height={6} width=\"92px\" />\n        </Flex>\n        <Flex justifyContent=\"flex-end\" alignItems=\"center\" width=\"144px\">\n          <Skeleton height={6} width=\"92px\" />\n        </Flex>\n        <Flex justifyContent=\"flex-end\" alignItems=\"center\" width=\"144px\">\n          <Skeleton height={6} width=\"92px\" />\n        </Flex>\n        <Flex justifyContent=\"flex-end\" alignItems=\"center\" width=\"121px\">\n          <Skeleton height={6} width=\"53px\" />\n        </Flex>\n        <Flex justifyContent=\"flex-end\" alignItems=\"center\" minW=\"159px\" flex=\"1\">\n          <Skeleton height={6} width=\"139px\" />\n        </Flex>\n      </Flex>\n    ))}\n  </>\n);\n","import { Icon, IconProps } from '@chakra-ui/react';\n\nexport const Balloon = ({ ...props }: IconProps) => (\n  <Icon width=\"242px\" height=\"294px\" viewBox=\"0 0 242 294\" fill=\"none\" {...props}>\n    <path\n      d=\"M35.5978 98.5483C53.9696 117.348 91.5399 175.897 98.468 215.303\"\n      stroke=\"white\"\n      strokeWidth=\"1.5\"\n    />\n    <path\n      d=\"M51.7158 58.1003C67.1932 95.8157 92.3605 137.627 95.7502 212.037\"\n      stroke=\"white\"\n      strokeWidth=\"1.5\"\n    />\n    <path\n      d=\"M91.4891 51.3845C94.7773 92.4947 101.899 151.755 93.6153 220.766\"\n      stroke=\"white\"\n      strokeWidth=\"1.5\"\n    />\n    <path\n      d=\"M117.383 100.944C113.854 128.734 113.664 172.383 87.1345 216.569\"\n      stroke=\"white\"\n      strokeWidth=\"1.5\"\n    />\n    <path\n      d=\"M36.1586 97.9597C54.5304 116.759 92.1006 175.309 99.0288 214.715\"\n      stroke=\"#C9C9D9\"\n      strokeWidth=\"1.5\"\n    />\n    <path\n      d=\"M118.229 100.917C114.7 128.707 114.51 172.356 87.9809 216.542\"\n      stroke=\"#C9C9D9\"\n      strokeWidth=\"1.5\"\n    />\n    <path\n      d=\"M52.4117 57.5923C67.889 95.3077 93.0564 137.119 96.446 211.529\"\n      stroke=\"#C9C9D9\"\n      strokeWidth=\"1.5\"\n    />\n    <path\n      d=\"M92.2393 51.2368C95.5276 92.347 102.65 151.608 94.3656 220.618\"\n      stroke=\"#C9C9D9\"\n      strokeWidth=\"1.5\"\n    />\n    <path\n      d=\"M125.029 216.256L168.984 241.78L168.973 245.837L125.05 271.379L118.049 271.364L74.088 245.836L74.0802 241.788L118.042 216.258L125.029 216.256Z\"\n      fill=\"#6B59FF\"\n    />\n    <rect\n      width=\"44.1452\"\n      height=\"44.1452\"\n      transform=\"matrix(0.864779 0.502153 -0.864779 0.502153 121.393 221.28)\"\n      fill=\"#00B0D6\"\n    />\n    <path\n      d=\"M87.2931 245.809L121.424 225.977L121.424 230.667L91.3375 248.161L87.2931 245.809Z\"\n      fill=\"#008EAD\"\n    />\n    <path\n      d=\"M121.393 225.995L155.533 245.81L151.479 248.145L121.393 230.689L121.393 225.995Z\"\n      fill=\"#008EAD\"\n    />\n    <path\n      d=\"M83.2195 243.449L121.397 221.28L121.397 223.743L85.3475 244.688L83.2195 243.449Z\"\n      fill=\"#2D1EA6\"\n    />\n    <path\n      d=\"M121.393 221.28L159.567 243.447L157.459 244.689L121.393 223.747L121.393 221.28Z\"\n      fill=\"#402FC8\"\n    />\n    <path\n      d=\"M85.1845 244.579L121.401 223.531L121.401 225.994L87.2849 245.816L85.1845 244.579Z\"\n      fill=\"#2D1EA6\"\n    />\n    <path\n      d=\"M121.393 223.531L157.65 244.565L155.51 245.809L121.393 225.998L121.393 223.531Z\"\n      fill=\"#402FC8\"\n    />\n    <mask id=\"path-17-inside-1_14871_157174\" fill=\"white\">\n      <path d=\"M74.0897 245.837L118.042 271.358L118.042 293.445L74.0897 267.923L74.0897 245.837Z\" />\n    </mask>\n    <path\n      d=\"M74.0897 245.837L118.042 271.358L118.042 293.445L74.0897 267.923L74.0897 245.837Z\"\n      fill=\"#402FC8\"\n    />\n    <path\n      d=\"M117.609 271.107L117.609 293.194L118.474 293.696L118.474 271.61L117.609 271.107Z\"\n      fill=\"#AEA4FF\"\n      mask=\"url(#path-17-inside-1_14871_157174)\"\n    />\n    <mask id=\"path-19-inside-2_14871_157174\" fill=\"white\">\n      <path d=\"M125.023 271.359L168.974 245.837L168.974 267.924L125.023 293.445L125.023 271.359Z\" />\n    </mask>\n    <path\n      d=\"M125.023 271.359L168.974 245.837L168.974 267.924L125.023 293.445L125.023 271.359Z\"\n      fill=\"#2D1EA6\"\n    />\n    <path\n      d=\"M125.455 293.194L125.455 271.108L124.59 271.61L124.59 293.696L125.455 293.194Z\"\n      fill=\"#AEA4FF\"\n      mask=\"url(#path-19-inside-2_14871_157174)\"\n    />\n    <mask id=\"path-21-inside-3_14871_157174\" fill=\"white\">\n      <path d=\"M118.039 271.371H125.027V293.445H118.039V271.371Z\" />\n    </mask>\n    <path d=\"M118.039 271.371H125.027V293.445H118.039V271.371Z\" fill=\"#2D1EA6\" />\n    <path\n      d=\"M118.039 271.371V270.871H117.539V271.371H118.039ZM125.027 271.371H125.527V270.871H125.027V271.371ZM118.039 271.871H125.027V270.871H118.039V271.871ZM124.527 271.371V293.445H125.527V271.371H124.527ZM118.539 293.445V271.371H117.539V293.445H118.539Z\"\n      fill=\"#AEA4FF\"\n      mask=\"url(#path-21-inside-3_14871_157174)\"\n    />\n    <path\n      d=\"M142.396 265.149L140.962 265.977L140.962 279.389L142.396 278.561L142.396 265.149Z\"\n      fill=\"#06061B\"\n    />\n    <path\n      d=\"M143.831 264.317L142.396 265.146L142.396 278.561L143.831 279.389L143.831 264.317Z\"\n      fill=\"#402FC8\"\n    />\n    <path\n      d=\"M143.83 279.39L140.96 281.05L140.961 279.39L142.395 278.561L143.83 279.39Z\"\n      fill=\"#6B59FF\"\n    />\n    <path\n      d=\"M146.704 262.66L145.269 263.489L145.269 276.901L146.704 276.073L146.704 262.66Z\"\n      fill=\"#06061B\"\n    />\n    <path\n      d=\"M148.138 261.828L146.703 262.657L146.703 276.073L148.138 276.901L148.138 261.828Z\"\n      fill=\"#402FC8\"\n    />\n    <path\n      d=\"M148.137 276.901L145.267 278.562L145.268 276.901L146.702 276.073L148.137 276.901Z\"\n      fill=\"#6B59FF\"\n    />\n    <path\n      d=\"M151.009 260.172L149.574 261L149.574 274.412L151.009 273.584L151.009 260.172Z\"\n      fill=\"#06061B\"\n    />\n    <path\n      d=\"M152.443 259.34L151.008 260.169L151.008 273.584L152.443 274.412L152.443 259.34Z\"\n      fill=\"#402FC8\"\n    />\n    <path\n      d=\"M152.442 274.413L149.573 276.073L149.573 274.413L151.008 273.584L152.442 274.413Z\"\n      fill=\"#6B59FF\"\n    />\n    <path\n      d=\"M155.314 257.683L153.879 258.512L153.879 271.924L155.314 271.096L155.314 257.683Z\"\n      fill=\"#06061B\"\n    />\n    <path\n      d=\"M156.748 256.851L155.314 257.68L155.314 271.096L156.748 271.924L156.748 256.851Z\"\n      fill=\"#402FC8\"\n    />\n    <path\n      d=\"M156.747 271.924L153.878 273.585L153.878 271.924L155.313 271.096L156.747 271.924Z\"\n      fill=\"#6B59FF\"\n    />\n    <path d=\"M74.0921 245.839L118.046 271.374H125.014L168.974 245.838\" stroke=\"#AEA4FF\" />\n    <path\n      d=\"M121.533 261.713L166.418 235.65L166.418 243.578L121.533 269.641L121.533 261.713Z\"\n      fill=\"#C9C9D9\"\n    />\n    <path\n      d=\"M76.6477 235.531L121.533 261.594L121.533 269.641L76.6477 243.578L76.6477 235.531Z\"\n      fill=\"#E2E2F0\"\n    />\n    <path\n      d=\"M125.029 187.193L168.984 212.716L168.973 216.774L125.05 242.316L118.049 242.3L74.088 216.773L74.0802 212.724L118.042 187.195L125.029 187.193Z\"\n      fill=\"#6B59FF\"\n    />\n    <rect\n      width=\"44.1452\"\n      height=\"44.1452\"\n      transform=\"matrix(0.864779 0.502153 -0.864779 0.502153 121.393 192.216)\"\n      fill=\"#00D1FF\"\n    />\n    <path\n      d=\"M87.2931 216.746L121.424 196.913L121.424 201.604L91.3375 219.097L87.2931 216.746Z\"\n      fill=\"#008EAD\"\n    />\n    <path\n      d=\"M121.393 196.932L155.533 216.746L151.479 219.082L121.393 201.625L121.393 196.932Z\"\n      fill=\"#008EAD\"\n    />\n    <path\n      d=\"M83.2195 214.385L121.397 192.216L121.397 194.68L85.3475 215.624L83.2195 214.385Z\"\n      fill=\"#2D1EA6\"\n    />\n    <path\n      d=\"M121.393 192.216L159.567 214.383L157.459 215.626L121.393 194.683L121.393 192.216Z\"\n      fill=\"#402FC8\"\n    />\n    <path\n      d=\"M85.1845 215.516L121.401 194.467L121.401 196.93L87.2849 216.752L85.1845 215.516Z\"\n      fill=\"#2D1EA6\"\n    />\n    <path\n      d=\"M121.393 194.468L157.65 215.502L155.51 216.746L121.393 196.935L121.393 194.468Z\"\n      fill=\"#402FC8\"\n    />\n    <mask id=\"path-46-inside-4_14871_157174\" fill=\"white\">\n      <path d=\"M74.0897 216.773L118.042 242.295L118.042 264.382L74.0897 238.86L74.0897 216.773Z\" />\n    </mask>\n    <path\n      d=\"M74.0897 216.773L118.042 242.295L118.042 264.382L74.0897 238.86L74.0897 216.773Z\"\n      fill=\"#402FC8\"\n    />\n    <path\n      d=\"M117.609 242.044L117.609 264.13L118.474 264.633L118.474 242.546L117.609 242.044Z\"\n      fill=\"#AEA4FF\"\n      mask=\"url(#path-46-inside-4_14871_157174)\"\n    />\n    <mask id=\"path-48-inside-5_14871_157174\" fill=\"white\">\n      <path d=\"M125.023 242.295L168.974 216.774L168.974 238.86L125.023 264.382L125.023 242.295Z\" />\n    </mask>\n    <path\n      d=\"M125.023 242.295L168.974 216.774L168.974 238.86L125.023 264.382L125.023 242.295Z\"\n      fill=\"#2D1EA6\"\n    />\n    <path\n      d=\"M125.455 264.131L125.455 242.044L124.59 242.546L124.59 264.633L125.455 264.131Z\"\n      fill=\"#AEA4FF\"\n      mask=\"url(#path-48-inside-5_14871_157174)\"\n    />\n    <mask id=\"path-50-inside-6_14871_157174\" fill=\"white\">\n      <path d=\"M118.039 242.307H125.027V264.382H118.039V242.307Z\" />\n    </mask>\n    <path d=\"M118.039 242.307H125.027V264.382H118.039V242.307Z\" fill=\"#2D1EA6\" />\n    <path\n      d=\"M118.039 242.307V241.807H117.539V242.307H118.039ZM125.027 242.307H125.527V241.807H125.027V242.307ZM118.039 242.807H125.027V241.807H118.039V242.807ZM124.527 242.307V264.382H125.527V242.307H124.527ZM118.539 264.382V242.307H117.539V264.382H118.539Z\"\n      fill=\"#AEA4FF\"\n      mask=\"url(#path-50-inside-6_14871_157174)\"\n    />\n    <path d=\"M74.0921 216.776L118.046 242.31H125.014L168.974 216.775\" stroke=\"#AEA4FF\" />\n    <path\n      d=\"M153.163 239.714L149.356 237.516L149.356 239.519L153.163 241.717L153.163 239.714Z\"\n      fill=\"#E2E2F0\"\n    />\n    <path\n      d=\"M142.551 245.872L138.745 243.674L138.745 245.677L142.551 247.875L142.551 245.872Z\"\n      fill=\"#E2E2F0\"\n    />\n    <path\n      d=\"M144.596 244.692L142.552 245.872L138.746 243.674L140.79 242.494L144.596 244.692Z\"\n      fill=\"#FEFEFF\"\n    />\n    <path\n      d=\"M155.195 238.55L153.162 239.724L149.356 237.526L151.389 236.353L155.195 238.55Z\"\n      fill=\"#FEFEFF\"\n    />\n    <path\n      d=\"M155.208 238.563L142.549 245.872L142.549 247.894L155.208 240.586L155.208 238.563Z\"\n      fill=\"#C9C9D9\"\n    />\n    <path\n      d=\"M155.214 238.56L142.551 245.871L140.186 244.506L152.849 237.195L155.214 238.56Z\"\n      fill=\"#FEFEFF\"\n    />\n    <path\n      d=\"M120.924 138.238C129.139 157.525 148.205 203.913 144.403 242.749\"\n      stroke=\"white\"\n      strokeWidth=\"1.5\"\n    />\n    <path\n      d=\"M121.512 137.516C129.726 156.803 148.792 203.191 144.991 242.026\"\n      stroke=\"#C9C9D9\"\n      strokeWidth=\"1.5\"\n    />\n    <path\n      d=\"M205.82 97.4355C179.333 130.637 153.721 194.747 146.117 242.106\"\n      stroke=\"white\"\n      strokeWidth=\"1.5\"\n    />\n    <path\n      d=\"M206.306 98.1211C179.874 131.32 154.313 195.425 146.725 242.78\"\n      stroke=\"#C9C9D9\"\n      strokeWidth=\"1.5\"\n    />\n    <path\n      d=\"M182.309 111.502C166.048 141.342 150.323 198.962 145.655 241.526\"\n      stroke=\"white\"\n      strokeWidth=\"1.5\"\n    />\n    <path\n      d=\"M182.898 112.201C166.637 142.042 150.912 199.661 146.244 242.225\"\n      stroke=\"#C9C9D9\"\n      strokeWidth=\"1.5\"\n    />\n    <path\n      d=\"M198.946 51.5159C135.775 104.355 147.359 193.927 144.901 242.205\"\n      stroke=\"white\"\n      strokeWidth=\"1.5\"\n    />\n    <path\n      d=\"M199.781 51.4807C136.61 104.319 148.194 193.892 145.736 242.17\"\n      stroke=\"#C9C9D9\"\n      strokeWidth=\"1.5\"\n    />\n    <path\n      d=\"M174.533 30.1777L173.854 36.575L175.185 41.876L172.745 43.2919L171.466 40.6093L170.915 38.2281L170.54 36.2234L171.466 31.8229L174.533 30.1777Z\"\n      fill=\"#FEFEFF\"\n    />\n    <path\n      d=\"M234.234 74.8176C239.761 63.3438 229.095 53.7159 224.713 52.8425C222.443 45.1597 218.376 42.6613 216.557 42.3267C213.002 27.5427 201.65 25.8931 200.559 32.5614C194.25 21.3759 187.567 23.5273 187.315 29.5831C181.554 23.3398 171.893 24.0898 174.818 36.7916L222.33 69.6932L229.478 77.5694L234.234 74.8176Z\"\n      fill=\"#FEFEFF\"\n    />\n    <path d=\"M172.304 29.1663L176.995 26.4646L175.784 29.1574L172.304 29.1663Z\" fill=\"#FEFEFF\" />\n    <path d=\"M184.517 27.9732L189.208 25.2715L187.997 27.9643L184.517 27.9732Z\" fill=\"#FEFEFF\" />\n    <path d=\"M197.765 32.2154L202.456 29.5137L201.245 32.2065L197.765 32.2154Z\" fill=\"#FEFEFF\" />\n    <path\n      fillRule=\"evenodd\"\n      clipRule=\"evenodd\"\n      d=\"M175.13 41.9072L230.339 73.7824C230.642 72.9418 230.791 71.8492 230.791 70.528C229.835 65.3978 227.096 61.3545 223.791 58.0503C222.251 57.1613 220.931 56.7546 219.877 56.8368C219.881 56.7078 219.883 56.5745 219.883 56.437C219.177 55.5737 218.629 54.1485 218.043 52.626C217.124 50.2373 216.113 47.6091 214.256 46.537C212.964 45.7912 211.997 45.5545 211.312 45.7983C211.322 45.5973 211.327 45.3899 211.327 45.1762C211.327 41.9214 208.874 39.0744 206.722 36.5775C205.972 35.7078 205.259 34.8806 204.699 34.0934C200.899 31.8992 198.503 32.804 198.503 37.1924C198.503 37.2362 198.503 37.28 198.504 37.3239L196.146 38.6918C196.038 38.3899 195.933 38.0735 195.824 37.7452C195.124 35.6363 194.259 33.0317 191.58 30.5709C188.065 28.5415 186.226 28.9241 186.226 32.9828C186.226 33.5311 186.278 34.0954 186.377 34.6664L184.031 36.0288C182.99 34.0786 181.986 32.4106 179.981 31.2531C175.42 28.62 173.301 29.6001 173.301 34.8663C173.301 37.133 173.986 39.6104 175.13 41.9072Z\"\n      fill=\"#E2E2F0\"\n    />\n    <path\n      d=\"M230.09 73.6617L229.924 74.9156L228.742 75.598L172.756 43.2745L175.12 41.9097L230.09 73.6617Z\"\n      fill=\"#FEFEFF\"\n    />\n    <path\n      fillRule=\"evenodd\"\n      clipRule=\"evenodd\"\n      d=\"M172.011 44.3916L229.478 77.5699C230.753 76.5168 231.519 74.6672 231.519 72.169C231.519 66.4468 227.502 59.4886 222.546 56.6275C221.653 56.112 220.791 55.7647 219.977 55.5752C219.391 51.7703 216.746 47.6275 213.572 45.7952C212.969 45.4469 212.385 45.2041 211.83 45.0609C211.169 40.2433 207.822 34.9354 203.791 32.6084C199.934 30.3812 196.701 31.6072 195.852 35.2718C194.517 32.3924 192.358 29.7767 189.923 28.3706C185.954 26.0791 182.72 27.8491 182.586 32.3163C181.563 31.308 180.463 30.4453 179.317 29.7834C173.911 26.6622 169.528 29.1925 169.528 35.4349C169.528 38.3239 170.467 41.5017 172.011 44.3916Z\"\n      fill=\"#E2E2F0\"\n    />\n    <path\n      d=\"M155.208 238.562L142.547 245.872L140.182 244.506L152.843 237.197L155.208 238.562Z\"\n      fill=\"#FEFEFF\"\n    />\n    <path\n      d=\"M48.7564 14.2131L48.0777 20.6098L49.4084 25.9103L46.9688 27.3261L45.6899 24.6437L45.1389 22.2628L44.7635 20.2582L45.6899 15.8581L48.7564 14.2131Z\"\n      fill=\"#FEFEFF\"\n    />\n    <path\n      d=\"M108.469 58.8484C113.995 47.3756 103.33 37.7486 98.948 36.8753C96.6782 29.1932 92.6117 26.695 90.7932 26.3604C87.238 11.5778 75.8879 9.92841 74.7963 16.5961C68.4882 5.41162 61.8056 7.56277 61.5542 13.618C55.7928 7.37532 46.1331 8.12529 49.058 20.8259L96.5656 53.7244L103.713 61.5999L108.469 58.8484Z\"\n      fill=\"#FEFEFF\"\n    />\n    <path d=\"M46.5424 13.2022L51.2334 10.5007L50.0225 13.1933L46.5424 13.2022Z\" fill=\"#FEFEFF\" />\n    <path d=\"M58.7401 12.0076L63.4311 9.30615L62.2202 11.9987L58.7401 12.0076Z\" fill=\"#FEFEFF\" />\n    <path d=\"M71.9872 16.2505L76.6782 13.5491L75.4673 16.2416L71.9872 16.2505Z\" fill=\"#FEFEFF\" />\n    <path\n      fillRule=\"evenodd\"\n      clipRule=\"evenodd\"\n      d=\"M49.3423 25.9443L104.548 57.8174C104.852 56.9765 105.001 55.883 105.001 54.5603C104.045 49.4305 101.306 45.3876 98.0023 42.0838C96.4571 41.1917 95.1328 40.7853 94.0772 40.8712C94.0815 40.7414 94.0836 40.6073 94.0836 40.4688C93.3776 39.6057 92.8292 38.1805 92.2435 36.6582C91.3244 34.2697 90.3133 31.6418 88.4565 30.5698C87.1726 29.8286 86.2098 29.5903 85.5257 29.8268C85.5356 29.6278 85.5406 29.4225 85.5406 29.2111C85.5406 25.9565 83.0872 23.1098 80.9355 20.6132C80.1861 19.7436 79.4732 18.9164 78.9134 18.1293C75.1132 15.9353 72.7172 16.84 72.7172 21.2281C72.7172 21.2707 72.7175 21.3134 72.7181 21.3562L72.7175 21.3558L70.3614 22.7225C70.2546 22.4217 70.15 22.1067 70.0415 21.7797L70.0415 21.7797C69.3414 19.671 68.4767 17.0666 65.7972 14.606C62.2826 12.5769 60.4442 12.9594 60.4442 17.0177C60.4442 17.5646 60.496 18.1275 60.5942 18.6971L58.2411 20.0635C57.2003 18.1138 56.1963 16.4462 54.1919 15.289C49.6317 12.6561 47.5125 13.6361 47.5125 18.9018C47.5125 21.169 48.1978 23.6471 49.3423 25.9443Z\"\n      fill=\"#E2E2F0\"\n    />\n    <path\n      d=\"M104.313 57.693L104.147 58.9468L102.965 59.6291L46.984 27.3086L49.3477 25.9439L104.313 57.693Z\"\n      fill=\"#FEFEFF\"\n    />\n    <path\n      fillRule=\"evenodd\"\n      clipRule=\"evenodd\"\n      d=\"M46.2452 28.4261L103.708 61.6024C104.985 60.5499 105.752 58.6994 105.752 56.1992C105.752 50.4776 101.736 43.5201 96.7804 40.6593C95.8854 40.1425 95.021 39.7948 94.2053 39.6056C93.6185 35.8015 90.9745 31.6602 87.8017 29.8283C87.1965 29.4789 86.6104 29.2357 86.0543 29.0927C85.3931 24.276 82.046 18.9695 78.0165 16.643C74.1606 14.4168 70.9297 15.641 70.079 19.302C68.7435 16.424 66.5859 13.8099 64.1514 12.4044C60.1835 10.1136 56.9509 11.8824 56.8151 16.3475C55.7936 15.3403 54.6942 14.4784 53.5489 13.8172C48.1433 10.6962 43.7612 13.2262 43.7612 19.4681C43.7612 22.3575 44.7003 25.5359 46.2452 28.4261Z\"\n      fill=\"#E2E2F0\"\n    />\n    <path\n      d=\"M120.852 17.0082C111.091 13.6038 97.9605 15.5897 92.6154 17.0082L120.852 24.9519V17.0082Z\"\n      fill=\"#CFC9FF\"\n    />\n    <path\n      d=\"M120.851 17.0082C130.611 13.6038 143.742 15.5897 149.087 17.0082L120.851 24.9519V17.0082Z\"\n      fill=\"#10104E\"\n    />\n    <path\n      d=\"M68.909 27.0796L51.4791 47.7899L120.85 23.6752C91.4285 10.0575 73.9637 20.2708 68.909 27.0796Z\"\n      fill=\"#AEA4FF\"\n    />\n    <path\n      d=\"M172.789 27.0796L190.219 47.7899L120.848 23.6752C150.27 10.0575 167.734 20.2708 172.789 27.0796Z\"\n      fill=\"#1D1084\"\n    />\n    <path\n      d=\"M190.219 47.7899L172.789 27.0796C167.734 20.2708 150.27 10.0575 120.848 23.6752\"\n      stroke=\"#AEA4FF\"\n    />\n    <path\n      d=\"M181.379 52.0454L206.389 80.4156L181.379 108.786L121 120.537L60.621 108.786L35.6112 80.4156L60.621 52.0454L121 40.2941L181.379 52.0454Z\"\n      fill=\"#156800\"\n    />\n    <path d=\"M120.849 120.417L120.849 23.6753\" stroke=\"white\" />\n    <path\n      fillRule=\"evenodd\"\n      clipRule=\"evenodd\"\n      d=\"M120.845 23.6763C88.7742 23.6763 37.8788 39.8472 35.613 80.4166L35.6157 80.4196L35.5957 98.4081C41.1312 95.5975 56.7965 102.256 60.6077 126.777L60.5355 108.784L58.1177 106.032L60.5378 108.787L120.845 23.6763Z\"\n      fill=\"#8D7EFF\"\n    />\n    <path\n      d=\"M35.5978 98.4081L35.0978 98.4075L35.0969 99.2232L35.8241 98.8539L35.5978 98.4081ZM120.847 23.1763C104.743 23.1763 83.9179 27.2334 66.8182 36.3922C49.7151 45.5528 36.2621 59.8659 35.1158 80.3887L36.1143 80.4444C37.2339 60.3979 50.3615 46.3409 67.2903 37.2737C84.2226 28.2046 104.881 24.1763 120.847 24.1763V23.1763ZM35.8241 98.8539C37.0607 98.226 38.9407 98.0965 41.177 98.69C43.4017 99.2803 45.9317 100.576 48.4242 102.722C53.4041 107.01 58.2252 114.69 60.1157 126.854L61.1038 126.7C59.1832 114.343 54.266 106.433 49.0767 101.964C46.4844 99.732 43.822 98.3572 41.4335 97.7234C39.0566 97.0926 36.9026 97.1848 35.3714 97.9622L35.8241 98.8539ZM36.0978 98.4086L36.1178 80.4181L35.1178 80.417L35.0978 98.4075L36.0978 98.4086Z\"\n      fill=\"#AEA4FF\"\n    />\n    <path\n      fillRule=\"evenodd\"\n      clipRule=\"evenodd\"\n      d=\"M120.859 23.6763C100.812 32.9368 61.5942 65.2385 60.5512 108.787L120.859 120.56V23.6763ZM60.6132 126.752C69.3539 119.96 99.9127 113.848 120.99 138.516L120.854 120.56L60.5424 108.785L60.6132 126.752Z\"\n      fill=\"#6B59FF\"\n    />\n    <path\n      fillRule=\"evenodd\"\n      clipRule=\"evenodd\"\n      d=\"M120.853 23.6765C152.924 23.6765 203.819 39.8475 206.085 80.4168L181.16 108.787L120.853 23.6765ZM181.382 126.762C183.433 115.91 191.984 94.0802 206.389 98.3929L206.092 80.4143L181.164 108.787L181.382 126.762Z\"\n      fill=\"#2D1EA6\"\n    />\n    <path\n      fillRule=\"evenodd\"\n      clipRule=\"evenodd\"\n      d=\"M120.844 23.6765C140.891 32.937 180.108 65.2388 181.151 108.787L120.844 120.561V23.6765ZM120.999 138.501C129.93 128.3 155.534 111.235 181.375 126.761L181.161 108.786L120.853 120.559L120.999 138.501Z\"\n      fill=\"#3726C2\"\n    />\n    <path\n      d=\"M120.651 23.2224C110.558 27.8847 95.6841 38.3213 83.1989 53.0503C70.7116 67.782 60.5784 86.8505 60.0532 108.775L61.0529 108.799C61.5709 87.1747 71.5679 68.3183 83.9618 53.6969C96.3578 39.0729 111.116 28.7283 121.07 24.1302L120.651 23.2224ZM61.1155 126.749L61.0444 108.783L60.0444 108.787L60.1155 126.753L61.1155 126.749Z\"\n      fill=\"#AEA4FF\"\n    />\n    <path\n      d=\"M120.634 24.1304C130.588 28.7286 145.347 39.0732 157.743 53.6972C170.137 68.3185 180.134 87.175 180.652 108.799L181.651 108.775C181.126 86.8507 170.993 67.7822 158.506 53.0506C146.021 38.3215 131.147 27.885 121.054 23.2226L120.634 24.1304ZM180.652 108.792L180.866 126.767L181.866 126.755L181.651 108.78L180.652 108.792Z\"\n      fill=\"#AEA4FF\"\n    />\n    <path d=\"M120.819 27.2769L121.025 138.512\" stroke=\"#AEA4FF\" />\n    <path\n      d=\"M120.851 24.1763C136.818 24.1763 157.476 28.2046 174.408 37.2737C191.337 46.3409 204.465 60.3979 205.584 80.4444L206.583 80.3887C205.436 59.8659 191.983 45.5528 174.88 36.3922C157.781 27.2334 136.955 23.1763 120.851 23.1763V24.1763ZM205.583 80.4223L205.881 98.4009L206.88 98.3844L206.583 80.4058L205.583 80.4223Z\"\n      fill=\"#AEA4FF\"\n    />\n    <path\n      d=\"M113.914 23.937L115.936 26.2316L120.82 27.1821L125.703 26.2316L127.726 23.937L125.703 21.6424L120.82 20.692L115.936 21.6424L113.914 23.937Z\"\n      fill=\"#6B59FF\"\n      stroke=\"#AEA4FF\"\n    />\n    <path d=\"M60.7169 126.719C69.4481 119.7 99.9736 113.384 121.028 138.878\" stroke=\"#AEA4FF\" />\n    <path\n      d=\"M121.203 139.2C125.631 133.968 134.216 126.953 144.898 123.25C155.562 119.554 168.297 119.163 181.101 127.122L181.629 126.273C168.52 118.124 155.461 118.531 144.57 122.306C133.697 126.074 124.967 133.204 120.439 138.554L121.203 139.2Z\"\n      fill=\"#AEA4FF\"\n    />\n    <path\n      d=\"M181.865 126.851C182.882 121.283 185.52 113.082 189.674 106.845C191.75 103.728 194.184 101.134 196.951 99.5899C199.703 98.0548 202.799 97.5486 206.26 98.6207L206.556 97.6654C202.814 96.5065 199.436 97.0585 196.464 98.7166C193.508 100.366 190.967 103.1 188.842 106.291C184.592 112.672 181.915 121.011 180.882 126.671L181.865 126.851Z\"\n      fill=\"#AEA4FF\"\n    />\n    <path\n      d=\"M148.213 102.493L147.647 107.824L148.756 112.241L146.723 113.421L145.657 111.186L145.198 109.201L144.885 107.531L145.657 103.864L148.213 102.493Z\"\n      fill=\"#FEFEFF\"\n    />\n    <path\n      d=\"M197.968 139.691C202.574 130.13 193.685 122.107 190.034 121.379C188.142 114.977 184.753 112.895 183.238 112.616C180.275 100.297 170.816 98.922 169.906 104.479C164.649 95.1578 159.08 96.9505 158.871 101.997C154.069 96.7943 146.019 97.4193 148.456 108.004L188.048 135.421L194.005 141.984L197.968 139.691Z\"\n      fill=\"#FEFEFF\"\n    />\n    <path d=\"M146.36 101.65L150.269 99.3984L149.26 101.642L146.36 101.65Z\" fill=\"#FEFEFF\" />\n    <path d=\"M156.536 100.655L160.446 98.4038L159.437 100.648L156.536 100.655Z\" fill=\"#FEFEFF\" />\n    <path d=\"M167.572 104.19L171.481 101.939L170.472 104.183L167.572 104.19Z\" fill=\"#FEFEFF\" />\n    <path\n      fillRule=\"evenodd\"\n      clipRule=\"evenodd\"\n      d=\"M148.715 112.272L194.716 138.83C194.968 138.13 195.093 137.219 195.093 136.118C194.296 131.843 192.013 128.473 189.26 125.72C187.976 124.979 186.876 124.64 185.997 124.709C186.001 124.601 186.002 124.489 186.002 124.374C185.414 123.655 184.957 122.467 184.469 121.198C183.703 119.208 182.86 117.018 181.313 116.124C180.241 115.505 179.437 115.307 178.867 115.506C178.875 115.34 178.879 115.168 178.879 114.991C178.879 112.279 176.835 109.906 175.042 107.826C174.417 107.101 173.823 106.412 173.356 105.756C170.189 103.927 168.193 104.681 168.193 108.338C168.193 108.374 168.193 108.41 168.193 108.447L166.224 109.589C166.134 109.337 166.047 109.073 165.956 108.799C165.372 107.042 164.652 104.871 162.419 102.82C159.49 101.129 157.958 101.448 157.958 104.83C157.958 105.288 158.001 105.759 158.083 106.235L156.13 107.369C155.263 105.744 154.426 104.354 152.755 103.389C148.955 101.195 147.189 102.012 147.189 106.4C147.189 108.29 147.761 110.357 148.715 112.272Z\"\n      fill=\"#E2E2F0\"\n    />\n    <path\n      d=\"M194.51 138.728L194.371 139.773L193.386 140.342L146.733 113.407L148.703 112.269L194.51 138.728Z\"\n      fill=\"#FEFEFF\"\n    />\n    <path\n      fillRule=\"evenodd\"\n      clipRule=\"evenodd\"\n      d=\"M146.115 114.337L194.002 141.985C195.064 141.107 195.702 139.566 195.702 137.484C195.702 132.716 192.355 126.918 188.225 124.534C187.482 124.105 186.765 123.816 186.088 123.657C185.599 120.487 183.396 117.034 180.751 115.507C180.248 115.217 179.761 115.015 179.299 114.895C178.749 110.881 175.959 106.458 172.6 104.519C169.385 102.662 166.691 103.685 165.984 106.74C164.871 104.34 163.072 102.159 161.042 100.987C157.735 99.0777 155.04 100.553 154.928 104.277C154.076 103.436 153.159 102.716 152.203 102.165C147.698 99.5638 144.046 101.672 144.046 106.874C144.046 109.281 144.828 111.929 146.115 114.337Z\"\n      fill=\"#E2E2F0\"\n    />\n    <path\n      d=\"M15.3343 54.8779L14.8818 59.1424L15.7689 62.6761L14.1425 63.6199L13.2899 61.8317L12.9226 60.2444L12.6724 58.908L13.2899 55.9746L15.3343 54.8779Z\"\n      fill=\"#FEFEFF\"\n    />\n    <path\n      d=\"M55.1391 84.6344C58.8233 76.9859 51.713 70.5679 48.7919 69.9857C47.2787 64.8643 44.5678 63.1989 43.3554 62.9758C40.9853 53.1207 33.4185 52.0211 32.6908 56.4663C28.4854 49.0099 24.0303 50.444 23.8627 54.4809C20.0218 50.3191 13.582 50.819 15.532 59.2861L47.2037 81.2184L51.9684 86.4688L55.1391 84.6344Z\"\n      fill=\"#FEFEFF\"\n    />\n    <path d=\"M13.8534 54.2036L16.9808 52.4026L16.1735 54.1976L13.8534 54.2036Z\" fill=\"#FEFEFF\" />\n    <path d=\"M21.99 53.4074L25.1174 51.6064L24.3101 53.4015L21.99 53.4074Z\" fill=\"#FEFEFF\" />\n    <path d=\"M30.8207 56.2358L33.9481 54.4348L33.1408 56.2298L30.8207 56.2358Z\" fill=\"#FEFEFF\" />\n    <path\n      fillRule=\"evenodd\"\n      clipRule=\"evenodd\"\n      d=\"M15.7329 62.7006L52.5359 83.9488C52.7385 83.388 52.8385 82.6585 52.8385 81.7759C52.2009 78.3561 50.3751 75.6609 48.1725 73.4583C47.143 72.8639 46.2606 72.593 45.5571 72.6498C45.5599 72.5633 45.5614 72.4738 45.5614 72.3814C45.0907 71.806 44.7251 70.8559 44.3346 69.841C43.7219 68.2487 43.0478 66.4968 41.8099 65.7821C40.9523 65.2869 40.3095 65.1284 39.8533 65.2877C39.8599 65.1547 39.8632 65.0175 39.8632 64.8762C39.8632 62.7065 38.2276 60.8087 36.7932 59.1443C36.2935 58.5646 35.8183 58.0131 35.4451 57.4884C32.9116 56.0257 31.3143 56.6288 31.3143 59.5542C31.3143 59.5827 31.3145 59.6112 31.3149 59.6398L29.7434 60.5514C29.6721 60.3508 29.6023 60.1405 29.5299 59.9224L29.5298 59.9222C29.0631 58.5164 28.4866 56.7802 26.7003 55.1397C24.3572 53.787 23.1317 54.042 23.1317 56.7475C23.1317 57.1124 23.1662 57.4879 23.2317 57.8679L21.6644 58.7781C20.9705 57.4781 20.3012 56.3663 18.9648 55.5948C15.9247 53.8395 14.5118 54.4929 14.5118 58.0033C14.5118 59.5156 14.9692 61.1685 15.7329 62.7006Z\"\n      fill=\"#E2E2F0\"\n    />\n    <path\n      d=\"M52.3682 83.8642L52.2572 84.7L51.4693 85.1549L14.1488 63.6079L15.7246 62.6981L52.3682 83.8642Z\"\n      fill=\"#FEFEFF\"\n    />\n    <path\n      fillRule=\"evenodd\"\n      clipRule=\"evenodd\"\n      d=\"M13.6572 64.3522L51.9658 86.4697C52.817 85.768 53.3281 84.5344 53.3281 82.8679C53.3281 79.0535 50.6502 74.4152 47.3468 72.5079C46.7496 72.1632 46.1729 71.9313 45.6287 71.8052C45.2375 69.2691 43.4749 66.508 41.3596 65.2867C40.9574 65.0545 40.5679 64.8927 40.1982 64.7972C39.7576 61.586 37.5261 58.0479 34.8396 56.4968C32.2686 55.0124 30.1143 55.8291 29.5476 58.2707C28.6574 56.3516 27.2187 54.6085 25.5955 53.6713C22.95 52.144 20.7948 53.3235 20.7046 56.3007C20.0234 55.6289 19.2903 55.0541 18.5264 54.6131C14.9227 52.5325 12.0013 54.2192 12.0013 58.3804C12.0013 60.3066 12.6273 62.4255 13.6572 64.3522Z\"\n      fill=\"#E2E2F0\"\n    />\n  </Icon>\n);\n","import { useReducer, useMemo } from 'react';\nimport { Flex, Heading, Text, Divider } from '@chakra-ui/react';\nimport { ChainFilter, CollateralFilter, PoolCard } from './';\nimport { TorosPoolCard } from './PoolCards/TorosPoolCard';\nimport { usePoolsList } from '@snx-v3/usePoolsList';\nimport { PoolCardsLoading } from './PoolCards/PoolCardsLoading';\nimport { useOfflinePrices } from '@snx-v3/useCollateralPriceUpdates';\nimport { CollateralType, useCollateralTypes } from '@snx-v3/useCollateralTypes';\nimport { ARBITRUM, BASE_ANDROMEDA, MAINNET } from '@snx-v3/useBlockchain';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { useRewardsDistributors } from '@snx-v3/useRewardsDistributors';\nimport { useOraclePrice } from '@snx-v3/useOraclePrice';\nimport { Balloon } from './Balloon';\n\nexport const PoolsList = () => {\n  const [state, dispatch] = useReducer(poolsReducer, { collaterals: [], chains: [] });\n  const { data, isLoading: isPoolsListLoading } = usePoolsList();\n\n  const { data: BaseCollateralTypes, isLoading: isBaseCollateralLoading } = useCollateralTypes(\n    false,\n    BASE_ANDROMEDA\n  );\n\n  const { data: ArbitrumCollateralTypes, isLoading: isArbCollateralLoading } = useCollateralTypes(\n    false,\n    ARBITRUM\n  );\n\n  const { data: MainnetCollateralTypes, isLoading: isMainCollateralLoading } = useCollateralTypes(\n    false,\n    MAINNET\n  );\n\n  const allCollaterals: CollateralType[] = useMemo(() => {\n    if (!BaseCollateralTypes || !ArbitrumCollateralTypes || !MainnetCollateralTypes) {\n      return [];\n    }\n\n    // We want to filter out assets that don't have a pyth price feed\n\n    return BaseCollateralTypes.concat(ArbitrumCollateralTypes)\n      .concat(MainnetCollateralTypes)\n      .filter((item) => item.displaySymbol !== 'stataUSDC');\n  }, [ArbitrumCollateralTypes, BaseCollateralTypes, MainnetCollateralTypes]);\n\n  const { data: collateralPrices, isLoading: isLoadingCollateralPrices } = useOfflinePrices(\n    allCollaterals.map((item) => ({\n      id: item.tokenAddress,\n      oracleId: item.oracleNodeId,\n      symbol: item.symbol,\n    }))\n  );\n\n  // Fetch stata price from oracle manager\n  const stata = BaseCollateralTypes?.find((item) => item.symbol === 'stataUSDC');\n\n  const { data: stataPrice, isLoading: isStataPriceLoading } = useOraclePrice(\n    stata?.oracleNodeId,\n    BASE_ANDROMEDA\n  );\n\n  // Arb Rewards\n  const { data: ArbitrumRewards, isLoading: isArbitrumRewardsLoading } =\n    useRewardsDistributors(ARBITRUM);\n\n  // Base Rewards\n  const { data: BaseRewards, isLoading: isBaseRewardsLoading } =\n    useRewardsDistributors(BASE_ANDROMEDA);\n\n  // Mainnet Rewards\n  const { data: MainRewards, isLoading: isMainRewardsLoading } = useRewardsDistributors(MAINNET);\n\n  const { collaterals, chains } = state;\n\n  const isLoading =\n    isPoolsListLoading ||\n    isLoadingCollateralPrices ||\n    isBaseCollateralLoading ||\n    isArbCollateralLoading ||\n    isMainCollateralLoading ||\n    isArbitrumRewardsLoading ||\n    isBaseRewardsLoading ||\n    isMainRewardsLoading ||\n    isStataPriceLoading;\n\n  const filteredPools = useMemo(() => {\n    return (\n      data?.synthetixPools\n        .map(({ network, poolInfo, apr }) => {\n          const collateralDeposited = poolInfo.map(({ collateral_type }) => ({\n            collateralDeposited: collateral_type.total_amount_deposited,\n            tokenAddress: collateral_type.id,\n          }));\n\n          let collaterals: typeof ArbitrumCollateralTypes = [];\n          let rewardsDistributors: any = {};\n\n          if (network.id === ARBITRUM.id) {\n            collaterals = ArbitrumCollateralTypes;\n            rewardsDistributors = ArbitrumRewards;\n          } else if (network.id === BASE_ANDROMEDA.id) {\n            collaterals = BaseCollateralTypes;\n            rewardsDistributors = BaseRewards;\n          } else if (network.id === MAINNET.id) {\n            collaterals = MainnetCollateralTypes;\n            rewardsDistributors = MainRewards;\n          }\n\n          const collateralTypes = collaterals?.map((item) => ({\n            ...item,\n            collateralDeposited:\n              collateralDeposited.find(\n                ({ tokenAddress }) => tokenAddress.toLowerCase() === item.tokenAddress.toLowerCase()\n              )?.collateralDeposited || '0',\n          }));\n\n          return {\n            network,\n            poolInfo,\n            apr,\n            collateralDeposited,\n            collateralTypes,\n            rewardsDistributors,\n          };\n        })\n        .filter((pool) => {\n          const { network, collateralTypes } = pool;\n          if (chains.length > 0 && !chains.includes(network.id)) {\n            return false;\n          }\n\n          const isCollateralFiltered = collateralTypes?.some((collateralType) =>\n            collaterals.length\n              ? !!collaterals.find((collateral) => {\n                  if (\n                    isBaseAndromeda(network.id, network.preset) &&\n                    collateralType.symbol.toUpperCase() === 'SUSDC'\n                  ) {\n                    return collateral.toUpperCase() === 'USDC';\n                  }\n                  return collateral.toUpperCase() === collateralType.symbol.toUpperCase();\n                })\n              : true\n          );\n\n          if (!isCollateralFiltered) {\n            return false;\n          }\n\n          return true;\n        }) || []\n    );\n  }, [\n    data?.synthetixPools,\n    ArbitrumCollateralTypes,\n    ArbitrumRewards,\n    BaseCollateralTypes,\n    BaseRewards,\n    MainnetCollateralTypes,\n    MainRewards,\n    chains,\n    collaterals,\n  ]);\n\n  const allCollateralPrices = useMemo(() => {\n    if (stata && stataPrice) {\n      return collateralPrices?.concat({ symbol: 'stataUSDC', price: stataPrice?.price.toBN() });\n    }\n  }, [stata, collateralPrices, stataPrice]);\n\n  return (\n    <Flex mt={6} flexDirection=\"column\">\n      <Heading fontWeight={700} fontSize={24}>\n        Pools\n      </Heading>\n      <Flex flexWrap=\"wrap\" gap={4} justifyContent=\"space-between\" my={6}>\n        <ChainFilter activeChains={state.chains} dispatch={dispatch} />\n        <CollateralFilter activeCollaterals={state.collaterals} dispatch={dispatch} />\n      </Flex>\n      <Flex minW=\"1200px\" overflowX=\"auto\" direction=\"column\" gap={4}>\n        <Divider width=\"100%\" />\n        <Flex gap={4} px={4} py={3}>\n          <Text\n            color=\"gray.600\"\n            fontFamily=\"heading\"\n            fontSize=\"12px\"\n            lineHeight=\"16px\"\n            letterSpacing={0.6}\n            fontWeight={700}\n            width=\"190px\"\n          >\n            Collateral/Network\n          </Text>\n\n          <Text\n            color=\"gray.600\"\n            fontFamily=\"heading\"\n            fontSize=\"12px\"\n            lineHeight=\"16px\"\n            letterSpacing={0.6}\n            fontWeight={700}\n            width=\"220px\"\n            textAlign=\"right\"\n          >\n            Wallet Balance\n          </Text>\n\n          <Text\n            color=\"gray.600\"\n            fontFamily=\"heading\"\n            fontSize=\"12px\"\n            lineHeight=\"16px\"\n            letterSpacing={0.6}\n            fontWeight={700}\n            width=\"189px\"\n            textAlign=\"right\"\n          >\n            Pool / Owner\n          </Text>\n\n          <Text\n            color=\"gray.600\"\n            fontFamily=\"heading\"\n            fontSize=\"12px\"\n            lineHeight=\"16px\"\n            letterSpacing={0.6}\n            fontWeight={700}\n            width=\"144px\"\n            textAlign=\"right\"\n          >\n            TVL\n          </Text>\n\n          <Text\n            color=\"gray.600\"\n            fontFamily=\"heading\"\n            fontSize=\"12px\"\n            lineHeight=\"16px\"\n            letterSpacing={0.6}\n            fontWeight={700}\n            width=\"144px\"\n            textAlign=\"right\"\n          >\n            APY/APR\n          </Text>\n          <Text\n            color=\"gray.600\"\n            fontFamily=\"heading\"\n            fontSize=\"12px\"\n            lineHeight=\"16px\"\n            letterSpacing={0.6}\n            fontWeight={700}\n            width=\"121px\"\n            textAlign=\"right\"\n          >\n            Specifics\n          </Text>\n          <Flex minW=\"159px\" flex=\"1\" />\n        </Flex>\n        {isLoading && !filteredPools?.length ? <PoolCardsLoading /> : null}\n        {(!chains.length || chains.includes(BASE_ANDROMEDA.id)) &&\n        (!collaterals.length || collaterals.includes('USDC')) ? (\n          <TorosPoolCard token=\"USDC\" />\n        ) : null}\n        {(!chains.length || chains.includes(ARBITRUM.id)) &&\n        (!collaterals.length || collaterals.includes('wstETH')) ? (\n          <TorosPoolCard token=\"wstETH\" />\n        ) : null}\n        {filteredPools?.length > 0\n          ? filteredPools.map(\n              ({ network, poolInfo, apr, collateralTypes, rewardsDistributors }) => {\n                const filteredCollateralTypes = collateralTypes?.filter((collateralType) => {\n                  if (!collaterals.length) {\n                    return true;\n                  }\n\n                  return collaterals.includes(collateralType.symbol);\n                });\n\n                const rewardsPayoutTokens = [\n                  ...new Set(\n                    rewardsDistributors?.map(({ payoutToken }: any) =>\n                      payoutToken.symbol.toUpperCase()\n                    )\n                  ),\n                ] as string[];\n\n                return (\n                  <PoolCard\n                    key={network.hexId}\n                    collateralTypes={filteredCollateralTypes}\n                    collateralPrices={allCollateralPrices}\n                    apr={apr}\n                    network={network}\n                    pool={poolInfo?.[0]?.pool}\n                    rewardsPayoutTokens={rewardsPayoutTokens}\n                  />\n                );\n              }\n            )\n          : null}\n\n        {!isLoading && !filteredPools?.length && (\n          <Flex flexDir=\"column\" alignItems=\"center\">\n            <Balloon mb={12} mt={6} />\n            <Text mb={2} color=\"gray.500\">\n              No results found, select a different network or collateral\n            </Text>\n\n            <Text\n              onClick={() => {\n                dispatch({ type: 'RESET_CHAIN' });\n                dispatch({ type: 'RESET_COLLATERAL' });\n              }}\n              cursor=\"pointer\"\n              fontWeight={700}\n              color=\"cyan.500\"\n            >\n              Clear Filters\n            </Text>\n          </Flex>\n        )}\n      </Flex>\n    </Flex>\n  );\n};\n\ninterface PoolsFilterState {\n  collaterals: string[];\n  chains: number[];\n}\n\nexport interface PoolsFilterAction {\n  type:\n    | 'ADD_COLLATERAL'\n    | 'REMOVE_COLLATERAL'\n    | 'ADD_CHAIN'\n    | 'REMOVE_CHAIN'\n    | 'RESET_COLLATERAL'\n    | 'RESET_CHAIN';\n  payload?: {\n    collateral?: string;\n    chain?: number;\n  };\n}\n\nfunction poolsReducer(state: PoolsFilterState, action: PoolsFilterAction): PoolsFilterState {\n  switch (action.type) {\n    case 'ADD_COLLATERAL':\n      if (action.payload?.collateral) {\n        return {\n          ...state,\n          // Only one collateral active at once\n          collaterals: [action.payload.collateral],\n        };\n      }\n\n    case 'REMOVE_COLLATERAL':\n      return {\n        ...state,\n        collaterals: state.collaterals.filter((item) => item !== action.payload?.collateral),\n      };\n\n    case 'ADD_CHAIN':\n      if (action.payload?.chain) {\n        // Only one chain active at once\n        return {\n          ...state,\n          chains: [action.payload.chain],\n        };\n      }\n\n    case 'REMOVE_CHAIN':\n      return {\n        ...state,\n        chains: state.chains.filter((item) => item !== action.payload?.chain),\n      };\n\n    case 'RESET_COLLATERAL':\n      return {\n        collaterals: [],\n        chains: state.chains,\n      };\n\n    case 'RESET_CHAIN':\n      return {\n        collaterals: state.collaterals,\n        chains: [],\n      };\n\n    default:\n      return state;\n  }\n}\n","import { Flex, Heading, Skeleton, FlexProps, Tag, Text } from '@chakra-ui/react';\nimport { MAINNET, ARBITRUM, Network, NetworkIcon } from '@snx-v3/useBlockchain';\n\ninterface PoolHeaderProps extends FlexProps {\n  name?: string;\n  network: Network;\n}\n\nexport const PoolHeader = ({ name, network, ...props }: PoolHeaderProps) => {\n  return (\n    <>\n      <Flex mt={2} flexWrap=\"wrap\" gap={4} alignItems=\"center\" {...props}>\n        <Skeleton isLoaded={!!name}>\n          <Heading fontWeight={700} fontSize=\"3xl\">\n            {name ? name : 'Unknown Pool'}\n          </Heading>\n        </Skeleton>\n        {[MAINNET.id, ARBITRUM.id].includes(network?.id) && (\n          <Tag size=\"sm\" bg=\"purple.500\" mr=\"auto\" color=\"white\" height=\"fit-content\">\n            Borrow Interest-Free\n          </Tag>\n        )}\n      </Flex>\n      <Flex mt={2}>\n        <NetworkIcon w=\"14px\" h=\"14px\" networkId={network?.id} />\n        <Text ml={1} fontSize=\"xs\" color=\"gray.500\" fontFamily=\"heading\" lineHeight=\"16px\">\n          {network?.name.charAt(0).toUpperCase() + network?.name.slice(1)} Network\n        </Text>\n      </Flex>\n    </>\n  );\n};\n","import { Alert, AlertIcon, Box, Button, Collapse, Flex, Text } from '@chakra-ui/react';\nimport { Amount } from '@snx-v3/Amount';\nimport { BorderBox } from '@snx-v3/BorderBox';\nimport { NumberInput } from '@snx-v3/NumberInput';\nimport { ManagePositionContext } from '@snx-v3/ManagePositionContext';\nimport { FC, useContext, useMemo } from 'react';\nimport { LiquidityPosition } from '@snx-v3/useLiquidityPosition';\nimport Wei, { wei } from '@synthetixio/wei';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { ZEROWEI } from '@snx-v3/constants';\nimport { useSystemToken } from '@snx-v3/useSystemToken';\nimport { TokenIcon } from '../TokenIcon';\nimport { validatePosition } from '@snx-v3/validatePosition';\nimport { useCollateralType } from '@snx-v3/useCollateralTypes';\nimport { useParams } from 'react-router-dom';\nimport { useTokenPrice } from '@snx-v3/useTokenPrice';\n\nconst ClaimUi: FC<{\n  maxClaimble: Wei;\n  maxDebt: Wei;\n  debtChange: Wei;\n  setDebtChange: (val: Wei) => void;\n  collateralSymbol: string;\n}> = ({ collateralSymbol, maxDebt, debtChange, setDebtChange, maxClaimble }) => {\n  const { network } = useNetwork();\n  const isBase = isBaseAndromeda(network?.id, network?.preset);\n  const { data: systemToken } = useSystemToken();\n  const max = useMemo(() => maxClaimble.add(maxDebt), [maxClaimble, maxDebt]);\n  const symbol = isBase ? collateralSymbol : systemToken?.symbol;\n  const price = useTokenPrice(symbol);\n\n  return (\n    <Flex flexDirection=\"column\">\n      <Text color=\"gray./50\" fontSize=\"sm\" fontWeight=\"700\" mb=\"3\">\n        Claim{isBase ? ' Profit' : '/Borrow'}\n      </Text>\n      <BorderBox display=\"flex\" p={3} mb=\"6\">\n        <Flex alignItems=\"flex-start\" flexDir=\"column\" gap=\"1\">\n          <BorderBox display=\"flex\" py={1.5} px={2.5}>\n            <Text display=\"flex\" gap={2} fontSize=\"16px\" alignItems=\"center\" fontWeight=\"600\">\n              <TokenIcon symbol={symbol} width={16} height={16} />\n              {symbol}\n            </Text>\n          </BorderBox>\n          <Flex fontSize=\"12px\" gap=\"1\">\n            <Text>Credit:</Text>\n            <Amount value={maxClaimble} />\n            {maxClaimble?.gt(0) && (\n              <Text\n                cursor=\"pointer\"\n                onClick={() => {\n                  if (!maxClaimble) {\n                    return;\n                  }\n                  setDebtChange(maxClaimble);\n                }}\n                color=\"cyan.500\"\n                fontWeight={700}\n              >\n                &nbsp;Max\n              </Text>\n            )}\n          </Flex>\n        </Flex>\n        <Flex flexDir=\"column\" flexGrow={1}>\n          <NumberInput\n            InputProps={{\n              isRequired: true,\n              'data-cy': 'claim amount input',\n              'data-max': maxClaimble.toString(),\n              type: 'number',\n              min: 0,\n            }}\n            value={debtChange}\n            onChange={(val) => setDebtChange(val)}\n            max={max}\n            min={ZEROWEI}\n          />\n          <Flex fontSize=\"xs\" color=\"whiteAlpha.700\" alignSelf=\"flex-end\" gap=\"1\">\n            {price.gt(0) && <Amount prefix=\"$\" value={debtChange.abs().mul(price)} />}\n          </Flex>\n        </Flex>\n      </BorderBox>\n      <Collapse in={debtChange.lte(0) && maxClaimble.gt(0)} animateOpacity>\n        <Alert colorScheme=\"green\" mb=\"6\" borderRadius=\"6px\">\n          <AlertIcon />\n          <Text>\n            Positive market performance has credited your position. Claim up to{' '}\n            <Box\n              onClick={() => {\n                if (!maxClaimble) {\n                  return;\n                }\n                setDebtChange(maxClaimble);\n              }}\n              cursor=\"pointer\"\n              as=\"span\"\n              textDecoration=\"underline\"\n            >\n              <Amount value={maxClaimble} prefix=\"$\" />\n            </Box>\n            &nbsp;without accruing debt.\n          </Text>\n        </Alert>\n      </Collapse>\n      <Collapse in={debtChange.gt(0)} animateOpacity>\n        <Alert status=\"warning\" mb=\"6\" borderRadius=\"6px\">\n          <AlertIcon />\n          <Text>\n            Assets will be available to withdraw 24 hours after your last interaction with this\n            position.\n          </Text>\n        </Alert>\n      </Collapse>\n      <Collapse in={debtChange.lte(0) && !isBase && maxDebt.gt(0)} animateOpacity>\n        <Alert colorScheme=\"blue\" mb=\"6\" borderRadius=\"6px\">\n          <AlertIcon />\n          <Text>\n            You can take an interest-free loan up to &nbsp;\n            <Box\n              onClick={() => {\n                if (!maxDebt) {\n                  return;\n                }\n                setDebtChange(maxDebt.add(maxClaimble));\n              }}\n              cursor=\"pointer\"\n              as=\"span\"\n              textDecoration=\"underline\"\n            >\n              <Amount value={maxDebt} prefix=\"$\" />\n            </Box>\n          </Text>\n        </Alert>\n      </Collapse>\n      <Collapse\n        in={!debtChange.gt(max) && debtChange.gt(0) && debtChange.gt(maxClaimble) && !isBase}\n        animateOpacity\n      >\n        <Alert colorScheme=\"info\" mb=\"6\" borderRadius=\"6px\">\n          <AlertIcon />\n          <Text>\n            You are about to take a <Amount value={debtChange.sub(maxClaimble)} prefix=\"$\" />{' '}\n            interest-free loan\n          </Text>\n        </Alert>\n      </Collapse>\n      <Button\n        isDisabled={debtChange.lte(0) || debtChange.gt(max)}\n        data-cy=\"claim submit\"\n        type=\"submit\"\n      >\n        {debtChange.lte(0)\n          ? 'Enter Amount'\n          : debtChange.gt(maxClaimble) && !isBase\n            ? 'Borrow'\n            : 'Claim Profit'}\n      </Button>\n    </Flex>\n  );\n};\n\nexport const Claim = ({ liquidityPosition }: { liquidityPosition?: LiquidityPosition }) => {\n  const { network } = useNetwork();\n  const { debtChange, collateralChange, setDebtChange } = useContext(ManagePositionContext);\n  const { collateralSymbol } = useParams();\n\n  const maxClaimble = useMemo(() => {\n    if (!liquidityPosition || liquidityPosition?.debt.gte(0)) {\n      return ZEROWEI;\n    } else {\n      return wei(liquidityPosition.debt.abs().toBN().mul(99).div(100));\n    }\n  }, [liquidityPosition]);\n\n  const { data: collateralType } = useCollateralType(collateralSymbol);\n\n  const { maxDebt } = validatePosition({\n    issuanceRatioD18: collateralType?.issuanceRatioD18,\n    collateralAmount: liquidityPosition?.collateralAmount,\n    collateralPrice: liquidityPosition?.collateralPrice,\n    debt: liquidityPosition?.debt,\n    collateralChange: collateralChange,\n    debtChange: debtChange,\n  });\n\n  return (\n    <ClaimUi\n      setDebtChange={setDebtChange}\n      debtChange={debtChange}\n      maxClaimble={maxClaimble}\n      maxDebt={isBaseAndromeda(network?.id, network?.preset) ? ZEROWEI : maxDebt.mul(99).div(100)}\n      collateralSymbol={collateralSymbol!}\n    />\n  );\n};\n","import { Alert, AlertIcon, Button, Flex, Heading } from '@chakra-ui/react';\nimport { useAccounts } from '@snx-v3/useAccounts';\nimport { useWallet } from '@snx-v3/useBlockchain';\nimport { useParams } from '@snx-v3/useParams';\nimport { FC, useEffect, useState } from 'react';\n\nexport const WatchAccountBanner: FC = () => {\n  const [isLoaded, setIsLoaded] = useState(false);\n  const { activeWallet, connect } = useWallet();\n  const { accountId } = useParams();\n  const {\n    data: accounts,\n    isPending: isAccountsLoading,\n    isFetching: isAccountsFetching,\n  } = useAccounts();\n\n  useEffect(() => {\n    setTimeout(() => {\n      setIsLoaded(true);\n    }, 200);\n  }, []);\n\n  if (!isLoaded) {\n    return null;\n  }\n\n  if (!activeWallet) {\n    return (\n      <Alert colorScheme=\"blue\" my=\"4\" borderRadius=\"6px\">\n        <AlertIcon />\n        <Flex flex={1} gap={4} alignItems=\"center\" justifyContent=\"space-between\">\n          <div>\n            {accountId && (\n              <Heading fontSize=\"16px\">You are currently watching Account #{accountId}</Heading>\n            )}\n            <Heading fontSize=\"14px\">\n              Please connect your wallet to open, manage or view positions.\n            </Heading>\n          </div>\n          <Button onClick={() => connect()}>Connect Wallet</Button>\n        </Flex>\n      </Alert>\n    );\n  }\n\n  if (!accountId) {\n    return null;\n  }\n\n  if (\n    !isAccountsFetching &&\n    !isAccountsLoading &&\n    !!accounts?.length &&\n    !accounts.find((a) => a === accountId)\n  ) {\n    return (\n      <Alert colorScheme=\"blue\" my=\"4\" borderRadius=\"6px\">\n        <AlertIcon />\n        <Flex>\n          <Heading fontSize=\"16px\">You are currently watching Account #{accountId}</Heading>\n        </Flex>\n      </Alert>\n    );\n  }\n\n  return null;\n};\n","import { Flex, Heading } from '@chakra-ui/react';\nimport { Helmet } from 'react-helmet';\nimport { PositionsList, StatsList } from '../components';\nimport { WatchAccountBanner } from '../components/WatchAccountBanner/WatchAccountBanner';\nimport { MAINNET, SEPOLIA, useNetwork } from '@snx-v3/useBlockchain';\nimport { MigrationBanner } from '../components/Migration/MigrationBanner';\n\nexport function Dashboard() {\n  const { network } = useNetwork();\n  return (\n    <>\n      <Helmet>\n        <title>Synthetix Liquidity V3</title>\n        <meta name=\"description\" content=\"Synthetix V3 - Dashboard\" />\n      </Helmet>\n      <Flex pt={{ base: 2, sm: 10 }} flexDir=\"column\" mb={16}>\n        {network && [MAINNET.id, SEPOLIA.id].includes(network.id) && (\n          <MigrationBanner network={network} type=\"alert\" />\n        )}\n        <Heading color=\"gray.50\" fontSize=\"1.5rem\">\n          Dashboard\n        </Heading>\n        <WatchAccountBanner />\n        <StatsList />\n        <PositionsList />\n      </Flex>\n    </>\n  );\n}\n","import { Flex, Heading, Text } from '@chakra-ui/react';\nimport { Helmet } from 'react-helmet';\nimport { PoolsList } from '../components/Pools/PoolsList';\n\nexport function Home() {\n  return (\n    <>\n      <Helmet>\n        <title>Synthetix Liquidity V3</title>\n        <meta name=\"description\" content=\"Synthetix V3 - Dashboard\" />\n      </Helmet>\n      <Flex overflow=\"auto\" flexDir=\"column\" mb={16}>\n        <Heading\n          mt={[6, 10]}\n          color=\"gray.50\"\n          maxWidth=\"20rem\"\n          fontSize={['2rem', '3rem']}\n          lineHeight=\"120%\"\n        >\n          The Liquidity Layer of DeFi\n        </Heading>\n        <Text color=\"gray.500\" fontSize=\"1rem\" lineHeight={6} fontFamily=\"heading\" mt=\"1rem\">\n          Provide liquidity for the next generation of permissionless protocols\n        </Text>\n        <PoolsList />\n      </Flex>\n    </>\n  );\n}\n","import { getSubgraphUrl } from '@snx-v3/constants';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport Wei, { wei } from '@synthetixio/wei';\nimport { useQuery } from '@tanstack/react-query';\nimport { z } from 'zod';\n\nconst GraphBigIntSchema = z.string().transform((src) => wei(src, 18, true));\nconst GraphBigDecimalSchema = z.string().transform((src) => wei(src, 18, true));\n\nconst calculateMarketPnl = (netIssuance: Wei, reportedDebt: Wei) =>\n  reportedDebt.add(netIssuance).mul(-1);\n\nexport const MarketSnapshotByWeekSchema = z\n  .object({\n    id: z.string(),\n    usd_deposited: GraphBigDecimalSchema,\n    usd_withdrawn: GraphBigDecimalSchema,\n    net_issuance: GraphBigDecimalSchema, // withdrawn - deposited\n    reported_debt: GraphBigDecimalSchema,\n    updated_at: z.string(),\n    updates_in_period: z.string(),\n  })\n  .transform((market) => ({\n    ...market,\n    pnl: calculateMarketPnl(market.net_issuance, market.reported_debt),\n  }));\n\nconst MarketSchema = z\n  .object({\n    id: z.string(),\n    address: z.string(),\n    usd_deposited: GraphBigDecimalSchema,\n    usd_withdrawn: GraphBigDecimalSchema,\n    net_issuance: GraphBigDecimalSchema, // withdrawn - deposited\n    reported_debt: GraphBigDecimalSchema,\n    updated_at: z.string(),\n    market_snapshots_by_week: z.array(MarketSnapshotByWeekSchema),\n  })\n  .transform((market) => ({\n    ...market,\n    pnl: calculateMarketPnl(market.net_issuance, market.reported_debt),\n  }));\n\nconst MarketConfigurationSchema = z.object({\n  id: z.string(), //PoolId-MarketId\n  market: MarketSchema,\n  weight: GraphBigIntSchema,\n  max_debt_share_value: GraphBigDecimalSchema,\n});\n\nconst RewardDistributorSchema = z.object({\n  id: z.string(),\n  total_distributed: z.string(),\n  rewards_distributions: z\n    .array(\n      z.object({\n        amount: z.string(),\n        duration: z.string(),\n        created_at: z.string(),\n      })\n    )\n    .default([]),\n});\n\nexport const PoolSchema = z.object({\n  id: z.string(),\n  name: z.union([z.string(), z.null()]).transform((name) => (name ? name : 'Unnamed Pool')),\n  total_weight: z.union([z.null(), GraphBigIntSchema]),\n  configurations: z.array(MarketConfigurationSchema),\n  registered_distributors: z.array(RewardDistributorSchema).default([]),\n});\n\nexport type PoolType = z.infer<typeof PoolSchema>;\n\nexport const PoolDataResultSchema = z.object({\n  data: z.object({\n    pool: z.union([PoolSchema, z.null()]),\n  }),\n});\n\nconst gql = (data: TemplateStringsArray) => data[0];\n\nconst PoolsDataDocument = gql`\n  query pool($id: String) {\n    pool(id: $id) {\n      id\n      name\n      registered_distributors(where: { isActive: true }) {\n        id\n        total_distributed\n        rewards_distributions(orderBy: created_at, orderDirection: desc) {\n          amount\n          duration\n          created_at\n        }\n      }\n      total_weight\n      configurations {\n        id\n        weight\n        max_debt_share_value\n        market {\n          id\n          address\n          usd_deposited\n          usd_withdrawn\n          net_issuance\n          reported_debt\n          updated_at\n          market_snapshots_by_week(first: 2, orderBy: updated_at, orderDirection: desc) {\n            id\n            usd_deposited\n            usd_withdrawn\n            net_issuance\n            reported_debt\n            updated_at\n            updates_in_period\n          }\n        }\n      }\n    }\n  }\n`;\n\nconst getPoolData = async (chainName: string, id: string) => {\n  const url = getSubgraphUrl(chainName);\n\n  const res = await fetch(url, {\n    method: 'POST',\n    body: JSON.stringify({ query: PoolsDataDocument, variables: { id } }),\n  });\n\n  const json = await res.json();\n\n  if (json.errors) {\n    const { message } = json.errors[0];\n    throw new Error(message);\n  }\n\n  return PoolDataResultSchema.parse(json);\n};\n\nexport const usePoolData = (poolId?: string, networkName?: string) => {\n  const { network } = useNetwork();\n  const chainName = networkName || network?.name;\n\n  return useQuery({\n    enabled: Boolean(poolId && parseInt(poolId) > 0 && chainName),\n    queryKey: [`${network?.id}-${network?.preset}`, 'PoolData', { pool: poolId }],\n    queryFn: async () => {\n      if (!poolId || !chainName) throw Error('No poolId or chainName');\n      const poolData = await getPoolData(chainName, poolId);\n\n      if (!poolData.data.pool) {\n        throw Error(`Pool ${poolId} not found`);\n      }\n\n      return poolData.data.pool;\n    },\n  });\n};\n","import { importPythFeeds } from '@snx-v3/contracts';\nimport { Network, useNetwork } from '@snx-v3/useBlockchain';\nimport { useQuery } from '@tanstack/react-query';\n\nexport function usePythFeeds(customNetwork?: Network) {\n  const { network } = useNetwork();\n  const targetNetwork = customNetwork || network;\n\n  return useQuery({\n    queryKey: [`${targetNetwork?.id}-${targetNetwork?.preset}`, 'PythFeeds'],\n    enabled: Boolean(targetNetwork),\n    queryFn: async function () {\n      if (!targetNetwork) throw new Error('OMFG');\n      return importPythFeeds(targetNetwork.id, targetNetwork.preset);\n    },\n    staleTime: Infinity,\n    // On some chains this is not available, and that is expected\n    throwOnError: false,\n  });\n}\n","import { importPythVerfier } from '@snx-v3/contracts';\nimport { Network, useNetwork } from '@snx-v3/useBlockchain';\nimport { useQuery } from '@tanstack/react-query';\n\nexport function usePythVerifier(customNetwork?: Network) {\n  const { network } = useNetwork();\n  const targetNetwork = customNetwork || network;\n\n  return useQuery({\n    queryKey: [`${targetNetwork?.id}-${targetNetwork?.preset}`, 'PythVerifier'],\n    enabled: Boolean(targetNetwork),\n    queryFn: async function () {\n      if (!targetNetwork) throw new Error('OMFG');\n      return importPythVerfier(targetNetwork.id, targetNetwork.preset);\n    },\n    staleTime: Infinity,\n    // On some chains this is not available, and that is expected\n    throwOnError: false,\n  });\n}\n","import debug from 'debug';\nimport { ethers } from 'ethers';\n\nconst log = debug('snx:fetchPositionDebt');\n\nexport async function fetchPositionDebt({\n  provider,\n  CoreProxy,\n  accountId,\n  poolId,\n  collateralTypeTokenAddress,\n}: {\n  provider: ethers.providers.BaseProvider;\n  CoreProxy: { address: string; abi: string[] };\n  accountId: ethers.BigNumberish;\n  poolId: ethers.BigNumberish;\n  collateralTypeTokenAddress: string;\n}) {\n  const CoreProxyContract = new ethers.Contract(CoreProxy.address, CoreProxy.abi, provider);\n  const positionDebt = await CoreProxyContract.callStatic.getPositionDebt(\n    accountId,\n    poolId,\n    collateralTypeTokenAddress\n  );\n  log('positionDebt: %O', positionDebt);\n  return positionDebt;\n}\n","import debug from 'debug';\nimport { ethers } from 'ethers';\n\nconst log = debug('snx:fetchPositionDebtWithPriceUpdate');\n\nexport async function fetchPositionDebtWithPriceUpdate({\n  provider,\n  CoreProxy,\n  Multicall3,\n  accountId,\n  poolId,\n  collateralTypeTokenAddress,\n  priceUpdateTxn,\n}: {\n  provider: ethers.providers.BaseProvider;\n  CoreProxy: { address: string; abi: string[] };\n  Multicall3: { address: string; abi: string[] };\n  accountId: ethers.BigNumberish;\n  poolId: ethers.BigNumberish;\n  collateralTypeTokenAddress: string;\n  priceUpdateTxn: {\n    target: string;\n    callData: string;\n    value: ethers.BigNumberish;\n    requireSuccess: boolean;\n  };\n}) {\n  // const CoreProxyInterface = new ethers.Contract(CoreProxyContract.address, CoreProxyContract.abi, provider);\n  const CoreProxyInterface = new ethers.utils.Interface(CoreProxy.abi);\n  const MulticallInterface = new ethers.utils.Interface(Multicall3.abi);\n\n  await new Promise((ok) => setTimeout(ok, 500));\n\n  const getPositionDebtTxn = {\n    target: CoreProxy.address,\n    callData: CoreProxyInterface.encodeFunctionData('getPositionDebt', [\n      accountId,\n      poolId,\n      collateralTypeTokenAddress,\n    ]),\n    value: 0,\n    requireSuccess: true,\n  };\n  // const Multicall = new ethers.Contract(MulticallContract.address, MulticallContract.abi, provider);\n\n  const response = await provider.call({\n    to: Multicall3.address,\n    data: MulticallInterface.encodeFunctionData('aggregate3Value', [\n      [priceUpdateTxn, getPositionDebtTxn],\n    ]),\n    value: priceUpdateTxn.value,\n  });\n  log('response: %O', response);\n\n  if (response) {\n    const decodedMulticall = MulticallInterface.decodeFunctionResult('aggregate3Value', response);\n    log('decodedMulticall: %O', decodedMulticall);\n    if (decodedMulticall?.returnData?.[1]?.returnData) {\n      const getPositionDebtTxnData = decodedMulticall.returnData[1].returnData;\n      log('getPositionDebtTxnData: %O', getPositionDebtTxnData);\n      const positionDebt = CoreProxyInterface.decodeFunctionResult(\n        'getPositionDebt',\n        getPositionDebtTxnData\n      );\n      log('positionDebt: %O', positionDebt);\n      return positionDebt.debt;\n    }\n    console.error({ decodedMulticall });\n    throw new Error('Unexpected multicall response');\n  }\n  throw new Error('Empty multicall response');\n}\n","import { EvmPriceServiceConnection } from '@pythnetwork/pyth-evm-js';\nimport { ethers } from 'ethers';\nimport { offchainMainnetEndpoint } from '@snx-v3/constants';\n\nexport async function fetchPriceUpdateTxn({\n  PythVerfier,\n  pythFeeds,\n}: {\n  PythVerfier: { address: string; abi: string[] };\n  pythFeeds: string[];\n}) {\n  if (!pythFeeds.length) {\n    return {\n      target: PythVerfier.address,\n      callData: ethers.constants.HashZero,\n      value: ethers.BigNumber.from(0),\n      requireSuccess: false,\n    };\n  }\n  const PythVerifierInterface = new ethers.utils.Interface(PythVerfier.abi);\n  const priceService = new EvmPriceServiceConnection(offchainMainnetEndpoint);\n  const signedOffchainData = await priceService.getPriceFeedsUpdateData(pythFeeds);\n  const priceUpdateTxn = {\n    target: PythVerfier.address,\n    callData: PythVerifierInterface.encodeFunctionData('updatePriceFeeds', [signedOffchainData]),\n    value: ethers.BigNumber.from(pythFeeds.length),\n    requireSuccess: false,\n  };\n  return priceUpdateTxn;\n}\n","import debug from 'debug';\nimport { ethers } from 'ethers';\n\nconst log = debug('snx:fetchAccountCollateral');\n\nexport async function fetchAccountCollateral({\n  provider,\n  CoreProxyContract,\n  accountId,\n  collateralTypeTokenAddress,\n}: {\n  provider: ethers.providers.BaseProvider;\n  CoreProxyContract: { address: string; abi: string[] };\n  accountId: ethers.BigNumberish;\n  collateralTypeTokenAddress: string;\n}) {\n  const CoreProxy = new ethers.Contract(CoreProxyContract.address, CoreProxyContract.abi, provider);\n  const accountCollateral = await CoreProxy.getAccountCollateral(\n    accountId,\n    collateralTypeTokenAddress\n  );\n  log('accountCollateral: %O', accountCollateral);\n  return {\n    totalAssigned: accountCollateral.totalAssigned,\n    totalDeposited: accountCollateral.totalDeposited,\n    totalLocked: accountCollateral.totalLocked,\n  };\n}\n","import debug from 'debug';\nimport { ethers } from 'ethers';\n\nconst log = debug('snx:fetchAccountCollateralWithPriceUpdate');\n\nexport async function fetchAccountCollateralWithPriceUpdate({\n  provider,\n  CoreProxyContract,\n  MulticallContract,\n  accountId,\n  collateralTypeTokenAddress,\n  priceUpdateTxn,\n}: {\n  provider: ethers.providers.BaseProvider;\n  CoreProxyContract: { address: string; abi: string[] };\n  MulticallContract: { address: string; abi: string[] };\n  accountId: ethers.BigNumberish;\n  collateralTypeTokenAddress: string;\n  priceUpdateTxn: {\n    target: string;\n    callData: string;\n    value: ethers.BigNumberish;\n    requireSuccess: boolean;\n  };\n}) {\n  const CoreProxyInterface = new ethers.utils.Interface(CoreProxyContract.abi);\n  const MulticallInterface = new ethers.utils.Interface(MulticallContract.abi);\n\n  const getAccountCollateralTxn = {\n    target: CoreProxyContract.address,\n    callData: CoreProxyInterface.encodeFunctionData('getAccountCollateral', [\n      accountId,\n      collateralTypeTokenAddress,\n    ]),\n    value: 0,\n    requireSuccess: true,\n  };\n\n  const response = await provider.call({\n    to: MulticallContract.address,\n    data: MulticallInterface.encodeFunctionData('aggregate3Value', [\n      [priceUpdateTxn, getAccountCollateralTxn],\n    ]),\n    value: priceUpdateTxn.value,\n  });\n  log('response: %O', response);\n\n  if (response) {\n    const decodedMulticall = MulticallInterface.decodeFunctionResult('aggregate3Value', response);\n    log('decodedMulticall: %O', decodedMulticall);\n    if (decodedMulticall?.returnData?.[1]?.returnData) {\n      const getAccountCollateralTxnData = decodedMulticall.returnData[1].returnData;\n      log('getAccountCollateralTxnData: %O', getAccountCollateralTxnData);\n      const accountCollateral = CoreProxyInterface.decodeFunctionResult(\n        'getAccountCollateral',\n        getAccountCollateralTxnData\n      );\n      log('accountCollateral: %O', accountCollateral);\n      return {\n        totalAssigned: accountCollateral.totalAssigned,\n        totalDeposited: accountCollateral.totalDeposited,\n        totalLocked: accountCollateral.totalLocked,\n      };\n    }\n    console.error({ decodedMulticall });\n    throw new Error('Unexpected multicall response');\n  }\n  throw new Error('Empty multicall response');\n}\n","import { useContractErrorParser } from '@snx-v3/useContractErrorParser';\nexport const useErrorParser = useContractErrorParser;\n","import { useNetwork } from '@snx-v3/useBlockchain';\n\nexport function useSynthetix() {\n  const { network } = useNetwork();\n\n  return {\n    chainId: network?.id,\n    preset: network?.preset,\n  };\n}\n","import { useProvider } from '@snx-v3/useBlockchain';\nimport { usePythFeeds } from '@snx-v3/usePythFeeds';\nimport { usePythVerifier } from '@snx-v3/usePythVerifier';\nimport { useQuery } from '@tanstack/react-query';\nimport debug from 'debug';\nimport { ethers } from 'ethers';\nimport { fetchPriceUpdateTxn } from './fetchPriceUpdateTxn';\nimport { useErrorParser } from './useErrorParser';\nimport { useSynthetix } from './useSynthetix';\n\nconst log = debug('snx:usePriceUpdateTxn');\n\nexport function usePriceUpdateTxn() {\n  const { chainId, preset } = useSynthetix();\n  const errorParser = useErrorParser();\n  const { data: pythFeeds } = usePythFeeds();\n  const { data: PythVerfier } = usePythVerifier();\n  const provider = useProvider();\n\n  return useQuery({\n    enabled: Boolean(chainId && preset && provider && pythFeeds && PythVerfier),\n    queryKey: [chainId, preset, 'PriceUpdateTxn'],\n    queryFn: async (): Promise<{\n      target: string;\n      callData: string;\n      value: ethers.BigNumber;\n      requireSuccess: boolean;\n    }> => {\n      if (!(chainId && preset && provider && pythFeeds && PythVerfier)) {\n        throw 'OMFG';\n      }\n      log({ chainId, preset, priceIds: pythFeeds, PythVerfier });\n      const priceUpdateTxn = await fetchPriceUpdateTxn({ pythFeeds, PythVerfier });\n      log('priceUpdateTxn: %O', priceUpdateTxn);\n      return priceUpdateTxn;\n    },\n    throwOnError: (error) => {\n      // TODO: show toast\n      errorParser(error);\n      return false;\n    },\n    // considering real staleness tolerance at 3_600s,\n    // refetching price updates every 10m should be way more than enough\n    staleTime: 10 * 60 * 1000,\n    refetchInterval: 10 * 60 * 1000,\n  });\n}\n","import { useQuery } from '@tanstack/react-query';\nimport debug from 'debug';\nimport { ethers } from 'ethers';\nimport { fetchAccountCollateral } from './fetchAccountCollateral';\nimport { fetchAccountCollateralWithPriceUpdate } from './fetchAccountCollateralWithPriceUpdate';\nimport { useErrorParser } from './useErrorParser';\nimport { usePriceUpdateTxn } from './usePriceUpdateTxn';\nimport { useSynthetix } from './useSynthetix';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { useMulticall3 } from '@snx-v3/useMulticall3';\n\nconst log = debug('snx:useAccountCollateral');\n\nexport function useAccountCollateral({\n  provider,\n  accountId,\n  collateralTypeTokenAddress,\n}: {\n  provider?: ethers.providers.BaseProvider;\n  accountId?: ethers.BigNumberish;\n  collateralTypeTokenAddress?: string;\n}) {\n  const { chainId, preset } = useSynthetix();\n  const errorParser = useErrorParser();\n\n  const { data: CoreProxy } = useCoreProxy();\n  const { data: Multicall3 } = useMulticall3();\n\n  const { data: priceUpdateTxn } = usePriceUpdateTxn();\n\n  return useQuery({\n    enabled: Boolean(\n      chainId &&\n        preset &&\n        provider &&\n        CoreProxy?.address &&\n        Multicall3?.address &&\n        accountId &&\n        collateralTypeTokenAddress &&\n        priceUpdateTxn\n    ),\n    queryKey: [\n      chainId,\n      preset,\n      'AccountCollateral',\n      { CoreProxy: CoreProxy?.address, Multicall: Multicall3?.address },\n      {\n        accountId: accountId ? ethers.BigNumber.from(accountId).toHexString() : undefined,\n        collateralTypeTokenAddress,\n      },\n    ],\n    queryFn: async () => {\n      if (\n        !(\n          chainId &&\n          preset &&\n          provider &&\n          CoreProxy?.address &&\n          Multicall3?.address &&\n          accountId &&\n          collateralTypeTokenAddress &&\n          priceUpdateTxn\n        )\n      ) {\n        throw 'OMFG';\n      }\n\n      log({\n        chainId,\n        preset,\n        CoreProxyContract: CoreProxy,\n        MulticallContract: Multicall3,\n        accountId,\n        collateralTypeTokenAddress,\n        priceUpdateTxn,\n      });\n\n      if (priceUpdateTxn.value) {\n        log('-> fetchAccountCollateralWithPriceUpdate');\n        return fetchAccountCollateralWithPriceUpdate({\n          provider,\n          CoreProxyContract: CoreProxy,\n          MulticallContract: Multicall3,\n          accountId,\n          collateralTypeTokenAddress,\n          priceUpdateTxn,\n        });\n      }\n\n      log('-> fetchAccountCollateral');\n      return fetchAccountCollateral({\n        provider,\n        CoreProxyContract: CoreProxy,\n        accountId,\n        collateralTypeTokenAddress,\n      });\n    },\n    throwOnError: (error) => {\n      // TODO: show toast\n      errorParser(error);\n      return false;\n    },\n    select: (accountCollateral) => ({\n      totalAssigned: ethers.BigNumber.from(accountCollateral.totalAssigned),\n      totalDeposited: ethers.BigNumber.from(accountCollateral.totalDeposited),\n      totalLocked: ethers.BigNumber.from(accountCollateral.totalLocked),\n    }),\n    retry: 5,\n    retryDelay: (attempt) => 2 ** attempt * 1000,\n  });\n}\n","import { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { useMulticall3 } from '@snx-v3/useMulticall3';\nimport { useQuery } from '@tanstack/react-query';\nimport debug from 'debug';\nimport { ethers } from 'ethers';\nimport { fetchPositionDebt } from './fetchPositionDebt';\nimport { fetchPositionDebtWithPriceUpdate } from './fetchPositionDebtWithPriceUpdate';\nimport { useErrorParser } from './useErrorParser';\nimport { usePriceUpdateTxn } from './usePriceUpdateTxn';\nimport { useSynthetix } from './useSynthetix';\n\nconst log = debug('snx:usePositionDebt');\n\nexport function usePositionDebt({\n  provider,\n  accountId,\n  poolId,\n  collateralTypeTokenAddress,\n}: {\n  provider?: ethers.providers.BaseProvider;\n  accountId?: ethers.BigNumberish;\n  poolId?: ethers.BigNumberish;\n  collateralTypeTokenAddress?: string;\n}) {\n  const { chainId, preset } = useSynthetix();\n  const errorParser = useErrorParser();\n\n  const { data: priceUpdateTxn } = usePriceUpdateTxn();\n\n  const { data: CoreProxy } = useCoreProxy();\n  const { data: Multicall3 } = useMulticall3();\n\n  return useQuery<ethers.BigNumber>({\n    enabled: Boolean(\n      chainId &&\n        preset &&\n        provider &&\n        CoreProxy?.address &&\n        Multicall3?.address &&\n        accountId &&\n        poolId &&\n        collateralTypeTokenAddress &&\n        priceUpdateTxn\n    ),\n    queryKey: [\n      chainId,\n      preset,\n      'PositionDebt',\n      { CoreProxy: CoreProxy?.address, Multicall: Multicall3?.address },\n      {\n        accountId: accountId ? ethers.BigNumber.from(accountId).toHexString() : undefined,\n        collateralTypeTokenAddress,\n      },\n    ],\n    queryFn: async () => {\n      if (\n        !(\n          chainId &&\n          preset &&\n          provider &&\n          CoreProxy?.address &&\n          Multicall3?.address &&\n          accountId &&\n          poolId &&\n          collateralTypeTokenAddress &&\n          priceUpdateTxn\n        )\n      ) {\n        throw 'OMFG';\n      }\n\n      log({\n        chainId,\n        preset,\n        CoreProxyContract: CoreProxy,\n        MulticallContract: Multicall3,\n        accountId,\n        poolId,\n        collateralTypeTokenAddress,\n        priceUpdateTxn,\n      });\n\n      if (priceUpdateTxn.value) {\n        log('-> fetchPositionDebtWithPriceUpdate');\n        return fetchPositionDebtWithPriceUpdate({\n          provider,\n          CoreProxy,\n          Multicall3,\n          accountId,\n          poolId,\n          collateralTypeTokenAddress,\n          priceUpdateTxn,\n        });\n      }\n      log('-> fetchPositionDebt');\n      return fetchPositionDebt({\n        provider,\n        CoreProxy,\n        accountId,\n        poolId,\n        collateralTypeTokenAddress,\n      });\n    },\n    throwOnError: (error) => {\n      // TODO: show toast\n      errorParser(error);\n      return false;\n    },\n    select: (positionDebt) => ethers.BigNumber.from(positionDebt),\n    retry: 5,\n    retryDelay: (attempt) => 2 ** attempt * 1000,\n  });\n}\n","import { ArrowBackIcon } from '@chakra-ui/icons';\nimport { Button, Divider, Flex, Link, Text, useToast } from '@chakra-ui/react';\nimport { Amount } from '@snx-v3/Amount';\nimport { ZEROWEI } from '@snx-v3/constants';\nimport { ContractError } from '@snx-v3/ContractError';\nimport { ManagePositionContext } from '@snx-v3/ManagePositionContext';\nimport { Multistep } from '@snx-v3/Multistep';\nimport { useAccountProxy } from '@snx-v3/useAccountProxy';\nimport { useNetwork, useProvider, useSigner } from '@snx-v3/useBlockchain';\nimport { useClosePosition } from '@snx-v3/useClosePosition';\nimport { useCollateralPriceUpdates } from '@snx-v3/useCollateralPriceUpdates';\nimport { useCollateralType } from '@snx-v3/useCollateralTypes';\nimport { useContractErrorParser } from '@snx-v3/useContractErrorParser';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { formatGasPriceForTransaction } from '@snx-v3/useGasOptions';\nimport { getGasPrice } from '@snx-v3/useGasPrice';\nimport { useGasSpeed } from '@snx-v3/useGasSpeed';\nimport { useMulticall3 } from '@snx-v3/useMulticall3';\nimport { useParams } from '@snx-v3/useParams';\nimport { usePythFeeds } from '@snx-v3/usePythFeeds';\nimport { usePythVerifier } from '@snx-v3/usePythVerifier';\nimport { useSystemToken } from '@snx-v3/useSystemToken';\nimport { withERC7412 } from '@snx-v3/withERC7412';\nimport { wei } from '@synthetixio/wei';\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport debug from 'debug';\nimport { ethers } from 'ethers';\nimport React from 'react';\nimport { LiquidityPositionUpdated } from '../Manage/LiquidityPositionUpdated';\nimport { fetchPositionDebt } from './fetchPositionDebt';\nimport { fetchPositionDebtWithPriceUpdate } from './fetchPositionDebtWithPriceUpdate';\nimport { fetchPriceUpdateTxn } from './fetchPriceUpdateTxn';\nimport { useAccountCollateral } from './useAccountCollateral';\nimport { usePositionDebt } from './usePositionDebt';\n\nconst log = debug('snx:ClosePositionOneStep');\n\nexport function ClosePositionOneStep({\n  onClose,\n  onBack,\n}: {\n  onClose: () => void;\n  onBack: () => void;\n}) {\n  const params = useParams();\n  const { data: collateralType } = useCollateralType(params.collateralSymbol);\n\n  const { setCollateralChange, setDebtChange } = React.useContext(ManagePositionContext);\n  const toast = useToast({ isClosable: true, duration: 9000 });\n\n  const [txState, setTxState] = React.useState({ step: 0, status: 'idle' });\n\n  const queryClient = useQueryClient();\n  const errorParser = useContractErrorParser();\n\n  const { data: CoreProxy } = useCoreProxy();\n  const { data: Multicall3 } = useMulticall3();\n  const { data: AccountProxy } = useAccountProxy();\n  const { data: ClosePosition } = useClosePosition();\n  const { data: PythVerfier } = usePythVerifier();\n  const { data: pythFeeds } = usePythFeeds();\n  const { data: systemToken } = useSystemToken();\n\n  const { data: priceUpdateTx, refetch: refetchPriceUpdateTx } = useCollateralPriceUpdates();\n\n  const { gasSpeed } = useGasSpeed();\n  const { network } = useNetwork();\n  const signer = useSigner();\n  const provider = useProvider();\n\n  const { data: positionDebt } = usePositionDebt({\n    provider,\n    accountId: params.accountId,\n    poolId: params.poolId,\n    collateralTypeTokenAddress: collateralType?.tokenAddress,\n  });\n\n  const { data: accountCollateral } = useAccountCollateral({\n    provider,\n    accountId: params.accountId,\n    collateralTypeTokenAddress: collateralType?.tokenAddress,\n  });\n\n  const { mutate: execClosePosition } = useMutation({\n    mutationFn: async function () {\n      log('params: %O', params);\n      log('collateralType: %O', collateralType);\n      log('accountCollateral: %O', accountCollateral);\n      log('positionDebt: %O', positionDebt);\n\n      setTxState({ step: 1, status: 'pending' });\n      if (\n        !(\n          network &&\n          provider &&\n          signer &&\n          CoreProxy &&\n          Multicall3 &&\n          AccountProxy &&\n          ClosePosition &&\n          PythVerfier &&\n          pythFeeds &&\n          params.poolId &&\n          params.accountId &&\n          systemToken?.address &&\n          collateralType?.tokenAddress &&\n          positionDebt\n        )\n      ) {\n        throw new Error('Not ready');\n      }\n\n      const ClosePositionContract = new ethers.Contract(\n        ClosePosition.address,\n        ClosePosition.abi,\n        signer\n      );\n      const AccountProxyContract = new ethers.Contract(\n        AccountProxy.address,\n        AccountProxy.abi,\n        signer\n      );\n      const TokenContract = new ethers.Contract(\n        systemToken?.address,\n        ['function approve(address spender, uint256 amount) returns (bool)'],\n        signer\n      );\n\n      const freshPriceUpdateTxn = await fetchPriceUpdateTxn({ PythVerfier, pythFeeds });\n      log('freshPriceUpdateTxn: %O', freshPriceUpdateTxn);\n\n      const freshPositionDebt = freshPriceUpdateTxn.value\n        ? await fetchPositionDebtWithPriceUpdate({\n            provider,\n            CoreProxy,\n            Multicall3,\n            accountId: params.accountId,\n            poolId: params.poolId,\n            collateralTypeTokenAddress: collateralType.tokenAddress,\n            priceUpdateTxn: freshPriceUpdateTxn,\n          })\n        : await fetchPositionDebt({\n            provider,\n            CoreProxy,\n            accountId: params.accountId,\n            poolId: params.poolId,\n            collateralTypeTokenAddress: collateralType.tokenAddress,\n          });\n      log('freshPositionDebt: %O', freshPositionDebt);\n\n      const adjustedAllowance = freshPositionDebt.lt(1)\n        ? // For the case when debt fluctuates from negative/zero to slightly positive\n          ethers.utils.parseEther('1.00')\n        : // Add extra buffer for debt fluctuations\n          freshPositionDebt.mul(120).div(100);\n      log('adjustedAllowance: %O', adjustedAllowance);\n\n      // \"function approve(address to, uint256 tokenId)\",\n\n      const approveAccountTx = AccountProxyContract.populateTransaction.approve(\n        ClosePosition.address,\n        params.accountId\n      );\n      const approveUsdTx = TokenContract.populateTransaction.approve(\n        ClosePosition.address,\n        adjustedAllowance\n      );\n      const closePositionTx = ClosePositionContract.populateTransaction.closePosition(\n        CoreProxy.address,\n        AccountProxy.address,\n        params.accountId,\n        params.poolId,\n        collateralType.tokenAddress\n      );\n      const callsPromise = Promise.all([approveAccountTx, approveUsdTx, closePositionTx]);\n      const [calls, gasPrices] = await Promise.all([callsPromise, getGasPrice({ provider })]);\n      if (priceUpdateTx) {\n        calls.unshift(priceUpdateTx as any);\n      }\n\n      const walletAddress = await signer.getAddress();\n      const { multicallTxn: erc7412Tx, gasLimit } = await withERC7412(\n        network,\n        calls,\n        'useClosePosition',\n        walletAddress\n      );\n\n      const gasOptionsForTransaction = formatGasPriceForTransaction({\n        gasLimit,\n        gasPrices,\n        gasSpeed,\n      });\n\n      const txn = await signer.sendTransaction({ ...erc7412Tx, ...gasOptionsForTransaction });\n      console.log('[closePosition] txn hash', txn.hash); // eslint-disable-line no-console\n      log('txn %O', txn);\n      const receipt = await txn.wait();\n      log('receipt %O', receipt);\n    },\n\n    onSuccess: async () => {\n      setTxState({ step: 1, status: 'success' });\n      setCollateralChange(ZEROWEI);\n      setDebtChange(ZEROWEI);\n\n      queryClient.invalidateQueries({\n        queryKey: [`${network?.id}-${network?.preset}`, 'LiquidityPosition'],\n      });\n      queryClient.invalidateQueries({\n        queryKey: [`${network?.id}-${network?.preset}`, 'LiquidityPositions'],\n      });\n      queryClient.invalidateQueries({\n        queryKey: [`${network?.id}-${network?.preset}`, 'Allowance'],\n      });\n      queryClient.invalidateQueries({\n        queryKey: [`${network?.id}-${network?.preset}`, 'AccountSpecificCollateral'],\n      });\n      queryClient.invalidateQueries({\n        queryKey: [`${network?.id}-${network?.preset}`, 'TokenBalance'],\n      });\n      queryClient.invalidateQueries({\n        queryKey: [`${network?.id}-${network?.preset}`, 'AccountCollateralUnlockDate'],\n      });\n\n      queryClient.invalidateQueries({\n        queryKey: [network?.id, network?.preset, 'PriceUpdateTxn'],\n      });\n      queryClient.invalidateQueries({\n        queryKey: [network?.id, network?.preset, 'PositionDebt'],\n      });\n      queryClient.invalidateQueries({\n        queryKey: [network?.id, network?.preset, 'AccountCollateral'],\n      });\n      queryClient.invalidateQueries({\n        queryKey: [network?.id, network?.preset, 'AccountAvailableCollateral'],\n      });\n\n      // After mutation withERC7412, we guaranteed to have updated all the prices, dont care about await\n      refetchPriceUpdateTx();\n    },\n\n    onError: (error) => {\n      setTxState({ step: 1, status: 'error' });\n\n      const contractError = errorParser(error);\n\n      if (contractError) {\n        console.error(new Error(contractError.name), contractError);\n      }\n      toast.closeAll();\n      toast({\n        title: 'Transaction failed',\n        variant: 'left-accent',\n        description: contractError ? (\n          <ContractError contractError={contractError} />\n        ) : (\n          'Please try again.'\n        ),\n        status: 'error',\n        duration: 3_600_000,\n      });\n      throw Error('Transaction failed', { cause: error });\n    },\n  });\n\n  if (txState.status === 'success') {\n    return (\n      <LiquidityPositionUpdated\n        onClose={onClose}\n        title=\"Position successfully Closed\"\n        subline={\n          <>\n            Your position has been successfully closed, read more about it in the{' '}\n            <Link\n              href=\"https://docs.synthetix.io/v/synthetix-v3-user-documentation\"\n              target=\"_blank\"\n              color=\"cyan.500\"\n            >\n              Synthetix V3 Documentation\n            </Link>\n          </>\n        }\n        alertText={<>Position successfully Closed</>}\n      />\n    );\n  }\n\n  return (\n    <Flex flexDirection=\"column\" data-cy=\"close position multistep\">\n      <Text color=\"gray.50\" fontSize=\"20px\" fontWeight={700}>\n        <ArrowBackIcon cursor=\"pointer\" onClick={onBack} mr={2} />\n        Close Position\n      </Text>\n      <Divider mt={6} bg=\"gray.900\" />\n      <Multistep\n        step={1}\n        title=\"Close position\"\n        subtitle={\n          <>\n            <Text>Approve close position on behalf</Text>\n            {positionDebt && positionDebt.gt(0) ? (\n              <Text>\n                <Amount\n                  prefix=\"Repay \"\n                  value={wei(positionDebt)}\n                  suffix={` ${systemToken ? systemToken.symbol : ''} of debt`}\n                />\n              </Text>\n            ) : null}\n            {positionDebt && positionDebt.lt(0) ? (\n              <Text>\n                <Amount\n                  prefix=\"Claim \"\n                  value={wei(positionDebt.abs())}\n                  suffix={` ${systemToken ? systemToken.symbol : ''}`}\n                />\n              </Text>\n            ) : null}\n            <Amount\n              prefix=\"Unlock \"\n              value={accountCollateral ? wei(accountCollateral.totalAssigned) : ZEROWEI}\n              suffix={` ${collateralType ? collateralType.symbol : ''} from the pool`}\n            />\n          </>\n        }\n        status={{\n          failed: txState.status === 'error',\n          success: txState.status === 'success',\n          loading: txState.status === 'pending',\n        }}\n      />\n      <Button\n        data-cy=\"close position confirm button\"\n        isLoading={txState.status === 'pending'}\n        isDisabled={!(accountCollateral && accountCollateral.totalAssigned.gt(0))}\n        onClick={() => execClosePosition()}\n        mt=\"6\"\n      >\n        {txState.status === 'error' ? 'Retry' : null}\n        {txState.status === 'pending' ? 'Processing...' : null}\n        {txState.status === 'idle' ? 'Execute Transaction' : null}\n      </Button>\n    </Flex>\n  );\n}\n","import { ArrowBackIcon } from '@chakra-ui/icons';\nimport { Button, Divider, Flex, Link, Skeleton, Text, useToast } from '@chakra-ui/react';\nimport { Amount } from '@snx-v3/Amount';\nimport { ZEROWEI } from '@snx-v3/constants';\nimport { ContractError } from '@snx-v3/ContractError';\nimport { parseUnits } from '@snx-v3/format';\nimport { getSpotMarketId, isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { ManagePositionContext } from '@snx-v3/ManagePositionContext';\nimport { Multistep } from '@snx-v3/Multistep';\nimport { useApprove } from '@snx-v3/useApprove';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { useBorrow } from '@snx-v3/useBorrow';\nimport { CollateralType } from '@snx-v3/useCollateralTypes';\nimport { useContractErrorParser } from '@snx-v3/useContractErrorParser';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { useDebtRepayer } from '@snx-v3/useDebtRepayer';\nimport { useClosePosition } from '@snx-v3/useClosePosition';\nimport { useGetWrapperToken } from '@snx-v3/useGetUSDTokens';\nimport { LiquidityPosition } from '@snx-v3/useLiquidityPosition';\nimport { useRepay } from '@snx-v3/useRepay';\nimport { useSystemToken } from '@snx-v3/useSystemToken';\nimport { useTokenBalance } from '@snx-v3/useTokenBalance';\nimport { useUndelegate } from '@snx-v3/useUndelegate';\nimport { useUndelegateBaseAndromeda } from '@snx-v3/useUndelegateBaseAndromeda';\nimport { useQueryClient } from '@tanstack/react-query';\nimport { FC, ReactNode, useCallback, useContext, useEffect, useState } from 'react';\nimport { LiquidityPositionUpdated } from '../Manage/LiquidityPositionUpdated';\n\nexport const ClosePositionTransactions: FC<{\n  onClose: () => void;\n  onBack: () => void;\n  poolId: string | undefined;\n  liquidityPosition: LiquidityPosition | undefined;\n  collateralType: CollateralType;\n}> = ({ collateralType, liquidityPosition, poolId, onClose, onBack }) => {\n  const [steps, setSteps] = useState<\n    {\n      title: ReactNode;\n      subtitle?: ReactNode;\n      cb: () => Promise<any>;\n    }[]\n  >([]);\n  const { setCollateralChange, setDebtChange } = useContext(ManagePositionContext);\n  const { data: systemToken } = useSystemToken();\n  const { data: balance } = useTokenBalance(systemToken?.address);\n  const { data: CoreProxy } = useCoreProxy();\n  const { network } = useNetwork();\n  const toast = useToast({ isClosable: true, duration: 9000 });\n  const isBase = isBaseAndromeda(network?.id, network?.preset);\n\n  const debtSymbol = isBase ? collateralType.symbol : systemToken?.symbol;\n  const collateralSymbol = collateralType.displaySymbol;\n\n  const [txState, setTxState] = useState({\n    step: 0,\n    status: 'idle',\n  });\n\n  const { data: wrapperToken } = useGetWrapperToken(\n    getSpotMarketId(liquidityPosition?.accountCollateral.symbol)\n  );\n\n  const collateralAddress = isBaseAndromeda(network?.id, network?.preset)\n    ? wrapperToken\n    : systemToken?.address;\n  const queryClient = useQueryClient();\n  const availableUSDCollateral = liquidityPosition?.usdCollateral.availableCollateral || ZEROWEI;\n  const amountToDeposit = (liquidityPosition?.debt || ZEROWEI).abs().sub(availableUSDCollateral);\n  const errorParser = useContractErrorParser();\n\n  //repay approval\n  const { approve, requireApproval } = useApprove({\n    contractAddress: collateralAddress,\n    amount: amountToDeposit.gt(0) ? amountToDeposit.toBN() : '0',\n    spender: CoreProxy?.address,\n  });\n  const { exec: execRepay } = useRepay({\n    accountId: liquidityPosition?.accountId,\n    poolId: poolId,\n    collateralTypeAddress: collateralType?.tokenAddress,\n    debtChange: liquidityPosition?.debt.mul(-1) || ZEROWEI,\n    availableUSDCollateral,\n    balance,\n  });\n  const { exec: undelegate } = useUndelegate({\n    accountId: liquidityPosition?.accountId,\n    poolId: poolId,\n    collateralTypeAddress: liquidityPosition?.tokenAddress,\n    collateralChange: liquidityPosition?.collateralAmount.mul(-1) || ZEROWEI,\n    currentCollateral: liquidityPosition?.collateralAmount || ZEROWEI,\n  });\n\n  const { data: DebtRepayer } = useDebtRepayer();\n  const { data: ClosePositionContract } = useClosePosition();\n\n  // repay approval for base\n  const {\n    approve: approveUSDC,\n    requireApproval: requireApprovalUSDC,\n    isLoading,\n  } = useApprove({\n    contractAddress: wrapperToken,\n    // slippage for approval\n    amount: parseUnits(liquidityPosition?.debt.abs().toString(), 6)\n      .mul(110)\n      .div(100),\n    spender: DebtRepayer?.address,\n  });\n\n  const { exec: undelegateBaseAndromeda } = useUndelegateBaseAndromeda({\n    accountId: liquidityPosition?.accountId,\n    poolId: poolId,\n    collateralTypeAddress: liquidityPosition?.tokenAddress,\n    collateralChange: liquidityPosition?.collateralAmount.mul(-1) || ZEROWEI,\n    currentCollateral: liquidityPosition?.collateralAmount || ZEROWEI,\n    liquidityPosition,\n  });\n\n  //claim\n  const { exec: execBorrow } = useBorrow({\n    accountId: liquidityPosition?.accountId,\n    poolId: poolId,\n    collateralTypeAddress: collateralType?.tokenAddress,\n    debtChange: liquidityPosition?.debt.mul(-1) || ZEROWEI,\n  });\n\n  const getSteps = useCallback(() => {\n    const transactions: {\n      title: ReactNode;\n      subtitle?: ReactNode;\n      cb: () => Promise<any>;\n    }[] = [];\n\n    if (ClosePositionContract) {\n      // TODO: one step close\n      // console.log(`ClosePositionContract`, ClosePositionContract);\n    }\n\n    if (!isBase) {\n      if (liquidityPosition?.debt.gt(0)) {\n        if (requireApproval) {\n          transactions.push({\n            title: `Approve ${systemToken?.symbol} transfer`,\n            cb: () => approve(false),\n          });\n        }\n        transactions.push({\n          title: 'Repay',\n          subtitle: (\n            <Amount\n              prefix=\"Repay \"\n              value={liquidityPosition?.debt.abs()}\n              suffix={` ${systemToken?.symbol}`}\n            />\n          ),\n          cb: () => execRepay(),\n        });\n      } else if (liquidityPosition?.debt.lt(0)) {\n        transactions.push({\n          title: 'Claim',\n          subtitle: (\n            <Amount\n              prefix=\"Claim \"\n              value={liquidityPosition?.debt.abs()}\n              suffix={` ${systemToken?.symbol}`}\n            />\n          ),\n          cb: () => execBorrow(),\n        });\n      }\n\n      transactions.push({\n        title: 'Unlock collateral',\n        subtitle: (\n          <Amount\n            value={liquidityPosition?.collateralAmount || ZEROWEI}\n            suffix={` ${collateralSymbol} will be unlocked from the pool.`}\n          />\n        ),\n        cb: () => undelegate(),\n      });\n    } else {\n      if (liquidityPosition?.debt.gt(-0.00001)) {\n        if (requireApprovalUSDC) {\n          transactions.push({\n            title: `Approve ${debtSymbol} transfer`,\n            cb: () => approveUSDC(false),\n          });\n        }\n      }\n\n      transactions.push({\n        title: 'Unlock collateral',\n        subtitle: (\n          <Amount\n            value={liquidityPosition?.collateralAmount || ZEROWEI}\n            suffix={` ${collateralSymbol} will be unlocked from the pool.`}\n          />\n        ),\n        cb: () => undelegateBaseAndromeda(),\n      });\n\n      if (liquidityPosition?.debt.lt(0)) {\n        transactions.push({\n          title: 'Claim',\n          subtitle: (\n            <Amount\n              prefix=\"Claim \"\n              value={liquidityPosition?.debt.abs()}\n              suffix={` ${debtSymbol}`}\n            />\n          ),\n          cb: () => execBorrow(),\n        });\n      }\n    }\n\n    return transactions;\n  }, [\n    ClosePositionContract,\n    approve,\n    approveUSDC,\n    collateralSymbol,\n    debtSymbol,\n    execBorrow,\n    execRepay,\n    isBase,\n    liquidityPosition?.collateralAmount,\n    liquidityPosition?.debt,\n    requireApproval,\n    requireApprovalUSDC,\n    systemToken?.symbol,\n    undelegate,\n    undelegateBaseAndromeda,\n  ]);\n\n  useEffect(() => {\n    if (!steps.length && !isLoading) {\n      setTxState({\n        step: 0,\n        status: 'idle',\n      });\n      setSteps(getSteps());\n    }\n  }, [getSteps, isLoading, steps.length]);\n\n  const isSuccess = txState.step >= steps.length;\n\n  const handleSubmit = useCallback(async () => {\n    try {\n      let i = txState.step > -1 ? txState.step : 0;\n\n      for (; i < steps.length; i++) {\n        setTxState({\n          step: i,\n          status: 'pending',\n        });\n\n        await steps[i].cb();\n      }\n\n      setTxState({\n        step: steps.length,\n        status: 'success',\n      });\n\n      queryClient.invalidateQueries({\n        queryKey: [`${network?.id}-${network?.preset}`, 'LiquidityPosition'],\n      });\n      queryClient.invalidateQueries({\n        queryKey: [`${network?.id}-${network?.preset}`, 'LiquidityPositions'],\n      });\n      queryClient.invalidateQueries({\n        queryKey: [`${network?.id}-${network?.preset}`, 'Allowance'],\n      });\n      queryClient.invalidateQueries({\n        queryKey: [`${network?.id}-${network?.preset}`, 'AccountSpecificCollateral'],\n      });\n      queryClient.invalidateQueries({\n        queryKey: [`${network?.id}-${network?.preset}`, 'TokenBalance'],\n      });\n      queryClient.invalidateQueries({\n        queryKey: [`${network?.id}-${network?.preset}`, 'AccountCollateralUnlockDate'],\n      });\n\n      setCollateralChange(ZEROWEI);\n      setDebtChange(ZEROWEI);\n    } catch (error) {\n      setTxState((state) => ({\n        step: state.step,\n        status: 'error',\n      }));\n\n      const contractError = errorParser(error);\n\n      if (contractError) {\n        console.error(new Error(contractError.name), contractError);\n      }\n      toast.closeAll();\n      toast({\n        title: 'Transaction failed',\n        variant: 'left-accent',\n        description: contractError ? (\n          <ContractError contractError={contractError} />\n        ) : (\n          'Please try again.'\n        ),\n        status: 'error',\n        duration: 3_600_000,\n      });\n      throw Error('Transaction failed', { cause: error });\n    }\n  }, [\n    txState.step,\n    steps,\n    queryClient,\n    network?.id,\n    network?.preset,\n    setCollateralChange,\n    setDebtChange,\n    errorParser,\n    toast,\n  ]);\n\n  if (isSuccess) {\n    return (\n      <LiquidityPositionUpdated\n        onClose={onClose}\n        title=\"Position successfully Closed\"\n        subline={\n          <>\n            Your position has been successfully closed, read more about it in the{' '}\n            <Link\n              href=\"https://docs.synthetix.io/v/synthetix-v3-user-documentation\"\n              target=\"_blank\"\n              color=\"cyan.500\"\n            >\n              Synthetix V3 Documentation\n            </Link>\n          </>\n        }\n        alertText={<>Position successfully Closed</>}\n      />\n    );\n  }\n\n  return (\n    <Flex flexDirection=\"column\" data-cy=\"close position multistep\">\n      <Text color=\"gray.50\" fontSize=\"20px\" fontWeight={700}>\n        <ArrowBackIcon cursor=\"pointer\" onClick={onBack} mr={2} />\n        Close Position\n      </Text>\n\n      <Divider mt={6} bg=\"gray.900\" />\n\n      {isLoading && !steps.length && <Skeleton width=\"100%\" height=\"78px\" mt=\"6\" />}\n      {steps.map((step, i) => (\n        <Multistep\n          key={i}\n          step={i + 1}\n          title={step.title}\n          subtitle={step.subtitle}\n          status={{\n            failed: txState.step === i && txState.status === 'error',\n            success: txState.step > i,\n            loading: txState.step === i && txState.status === 'pending',\n          }}\n        />\n      ))}\n\n      <Button\n        data-cy=\"close position confirm button\"\n        isLoading={txState.status === 'pending'}\n        onClick={handleSubmit}\n        mt=\"6\"\n      >\n        {(() => {\n          switch (true) {\n            case txState.status === 'error':\n              return 'Retry';\n            case txState.status === 'pending':\n              return 'Processing...';\n            default:\n              return 'Execute Transaction';\n          }\n        })()}\n      </Button>\n    </Flex>\n  );\n};\n","import { useQuery } from '@tanstack/react-query';\nimport debug from 'debug';\nimport { ethers } from 'ethers';\nimport { fetchAccountAvailableCollateral } from './fetchAccountAvailableCollateral';\nimport { useErrorParser } from './useErrorParser';\nimport { useSynthetix } from './useSynthetix';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\n\nconst log = debug('snx:useAccountAvailableCollateral');\n\nexport function useAccountAvailableCollateral({\n  provider,\n  accountId,\n  collateralTypeTokenAddress,\n}: {\n  provider?: ethers.providers.BaseProvider;\n  accountId?: ethers.BigNumberish;\n  collateralTypeTokenAddress?: string;\n}) {\n  const { chainId, preset } = useSynthetix();\n  const errorParser = useErrorParser();\n\n  const { data: CoreProxy } = useCoreProxy();\n\n  return useQuery<ethers.BigNumber>({\n    enabled: Boolean(\n      chainId && preset && provider && CoreProxy?.address && accountId && collateralTypeTokenAddress\n    ),\n    queryKey: [\n      chainId,\n      preset,\n      'AccountAvailableCollateral',\n      { CoreProxy: CoreProxy?.address },\n      {\n        accountId: accountId ? ethers.BigNumber.from(accountId).toHexString() : undefined,\n        collateralTypeTokenAddress,\n      },\n    ],\n    queryFn: async () => {\n      if (\n        !(\n          chainId &&\n          preset &&\n          provider &&\n          CoreProxy?.address &&\n          accountId &&\n          collateralTypeTokenAddress\n        )\n      ) {\n        throw 'OMFG';\n      }\n\n      log({ chainId, preset, CoreProxy, accountId, collateralTypeTokenAddress });\n\n      const accountAvailableCollateral = await fetchAccountAvailableCollateral({\n        provider,\n        CoreProxy,\n        accountId,\n        collateralTypeTokenAddress,\n      });\n      log('accountAvailableCollateral: %O', accountAvailableCollateral);\n      return accountAvailableCollateral;\n    },\n    throwOnError: (error) => {\n      // TODO: show toast\n      errorParser(error);\n      return false;\n    },\n    select: (accountAvailableCollateral) => ethers.BigNumber.from(accountAvailableCollateral),\n  });\n}\n","import { ethers } from 'ethers';\n\nexport async function fetchAccountAvailableCollateral({\n  provider,\n  CoreProxy,\n  accountId,\n  collateralTypeTokenAddress,\n}: {\n  provider: ethers.providers.BaseProvider;\n  CoreProxy: { address: string; abi: string[] };\n  accountId: ethers.BigNumberish;\n  collateralTypeTokenAddress: string;\n}) {\n  const CoreProxyContract = new ethers.Contract(CoreProxy.address, CoreProxy.abi, provider);\n  const accountAvailableCollateral = await CoreProxyContract.getAccountAvailableCollateral(\n    accountId,\n    collateralTypeTokenAddress\n  );\n  return accountAvailableCollateral;\n}\n","import { ArrowBackIcon } from '@chakra-ui/icons';\nimport {\n  Alert,\n  AlertDescription,\n  AlertIcon,\n  Button,\n  Collapse,\n  Divider,\n  Flex,\n  Text,\n} from '@chakra-ui/react';\nimport { Amount } from '@snx-v3/Amount';\nimport { BorderBox } from '@snx-v3/BorderBox';\nimport { ZEROWEI } from '@snx-v3/constants';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { ManagePositionContext } from '@snx-v3/ManagePositionContext';\nimport { NumberInput } from '@snx-v3/NumberInput';\nimport { useNetwork, useProvider } from '@snx-v3/useBlockchain';\nimport { useClosePosition } from '@snx-v3/useClosePosition';\nimport { useCollateralType } from '@snx-v3/useCollateralTypes';\nimport { LiquidityPosition } from '@snx-v3/useLiquidityPosition';\nimport { useParams } from '@snx-v3/useParams';\nimport { useSystemToken } from '@snx-v3/useSystemToken';\nimport { useTokenBalance } from '@snx-v3/useTokenBalance';\nimport { useTokenPrice } from '@snx-v3/useTokenPrice';\nimport Wei from '@synthetixio/wei';\nimport React from 'react';\nimport { TokenIcon } from '../TokenIcon';\nimport { ClosePositionOneStep } from './ClosePositionOneStep';\nimport { ClosePositionTransactions } from './ClosePositionTransactions';\nimport { useAccountAvailableCollateral } from './useAccountAvailableCollateral';\nimport { usePositionDebt } from './usePositionDebt';\n\nfunction ClosePositionUi({\n  onSubmit,\n  debt,\n  collateralAmount,\n  collateralSymbol,\n  onClose,\n  debtSymbol,\n}: {\n  debt: Wei;\n  collateralAmount: Wei;\n  onClose: () => void;\n  onSubmit: () => void;\n  debtSymbol?: string;\n  collateralSymbol: string;\n}) {\n  const params = useParams();\n  const { data: collateralType } = useCollateralType(params.collateralSymbol);\n  const { data: systemToken } = useSystemToken();\n  const provider = useProvider();\n  const { data: positionDebt, isPending: isPendingPositionDebt } = usePositionDebt({\n    provider,\n    accountId: params.accountId,\n    poolId: params.poolId,\n    collateralTypeTokenAddress: collateralType?.tokenAddress,\n  });\n  const { data: systemTokenBalance, isPending: isPendingSystemTokenBalance } = useTokenBalance(\n    systemToken?.address\n  );\n  const { data: accountAvailableCollateral, isPending: isPendingAccountAvailableCollateral } =\n    useAccountAvailableCollateral({\n      provider,\n      accountId: params.accountId,\n      collateralTypeTokenAddress: systemToken?.address,\n    });\n\n  const debtPrice = useTokenPrice(debtSymbol);\n  const collateralPrice = useTokenPrice(collateralSymbol);\n\n  const { data: ClosePositionDeployment } = useClosePosition();\n\n  return (\n    <Flex flexDirection=\"column\">\n      <Text color=\"gray.50\" fontSize=\"20px\" fontWeight={700}>\n        <ArrowBackIcon cursor=\"pointer\" onClick={onClose} mr={2} />\n        Close Position\n      </Text>\n\n      <Divider my={5} bg=\"gray.900\" />\n\n      <Text color=\"gray.50\" fontSize=\"sm\" fontWeight=\"700\" mb={2}>\n        {debt.gt(0) ? 'Repay Debt' : 'Claim Profit'}\n      </Text>\n      <BorderBox display=\"flex\" flexDirection=\"column\" p={3} mb=\"6\">\n        <Flex alignItems=\"center\">\n          <Flex alignItems=\"flex-start\" flexDir=\"column\" gap={1}>\n            <BorderBox display=\"flex\" justifyContent=\"center\" alignItems=\"center\" py={1.5} px={2.5}>\n              <Text display=\"flex\" gap={2} alignItems=\"center\" fontWeight=\"600\">\n                <TokenIcon symbol={debtSymbol} width={16} height={16} />\n                {debtSymbol}\n              </Text>\n            </BorderBox>\n            <Flex fontSize=\"12px\" gap=\"1\" mr=\"3\">\n              <Amount prefix={debt.gt(0) ? 'Debt: ' : 'Max Claim: '} value={debt.abs()} />\n              <Text ml={0.5} color=\"gray.600\" fontWeight={700}>\n                Max\n              </Text>\n            </Flex>\n          </Flex>\n          <Flex flexGrow={1} flexDir=\"column\">\n            <NumberInput value={debt.abs()} disabled />\n            <Flex fontSize=\"xs\" color=\"whiteAlpha.700\" alignSelf=\"flex-end\" gap=\"1\">\n              {debtPrice.gt(0) && <Amount prefix=\"$\" value={debt.abs().mul(debtPrice)} />}\n            </Flex>\n          </Flex>\n        </Flex>\n      </BorderBox>\n\n      <Text color=\"gray.50\" fontSize=\"sm\" fontWeight=\"700\" mb={2}>\n        Unlock Collateral\n      </Text>\n      <BorderBox display=\"flex\" flexDirection=\"column\" p={3} mb=\"6\">\n        <Flex alignItems=\"center\">\n          <Flex alignItems=\"flex-start\" flexDir=\"column\" gap={1}>\n            <BorderBox display=\"flex\" justifyContent=\"center\" alignItems=\"center\" py={1.5} px={2.5}>\n              <Text display=\"flex\" gap={2} alignItems=\"center\" fontWeight=\"600\">\n                <TokenIcon symbol={collateralSymbol} width={16} height={16} />\n                {collateralSymbol}\n              </Text>\n            </BorderBox>\n            <Flex fontSize=\"12px\" gap=\"1\" mr=\"3\">\n              <Amount prefix=\"Locked: \" value={collateralAmount} />\n              <Text ml={0.5} color=\"gray.600\" fontWeight={700}>\n                Max\n              </Text>\n            </Flex>\n          </Flex>\n          <Flex flexGrow={1} flexDir=\"column\">\n            <NumberInput value={collateralAmount} disabled />\n            <Flex fontSize=\"xs\" color=\"whiteAlpha.700\" alignSelf=\"flex-end\" gap=\"1\">\n              {collateralPrice.gt(0) && (\n                <Amount prefix=\"$\" value={collateralAmount.abs().mul(collateralPrice)} />\n              )}\n            </Flex>\n          </Flex>\n        </Flex>\n      </BorderBox>\n\n      <Collapse\n        in={\n          // Deployments that do not have ClosePosition contract available should skip this check\n          ClosePositionDeployment &&\n          systemTokenBalance &&\n          positionDebt &&\n          accountAvailableCollateral &&\n          !systemTokenBalance.add(accountAvailableCollateral).gte(positionDebt)\n        }\n        animateOpacity\n      >\n        <Alert mb={6} status=\"error\" borderRadius=\"6px\">\n          <AlertIcon />\n          <AlertDescription>\n            <Text>You do not have enough {systemToken?.symbol} to repay debt</Text>\n            <Text>\n              <Amount\n                prefix=\"Available: \"\n                value={\n                  systemTokenBalance &&\n                  accountAvailableCollateral &&\n                  systemTokenBalance.add(accountAvailableCollateral)\n                }\n                suffix={` ${systemToken?.symbol}`}\n              />\n            </Text>\n          </AlertDescription>\n        </Alert>\n      </Collapse>\n\n      <Button\n        data-cy=\"close position submit\"\n        onClick={onSubmit}\n        type=\"submit\"\n        isDisabled={\n          // Deployments that do not have ClosePosition contract available should skip this check\n          ClosePositionDeployment &&\n          !(\n            !isPendingPositionDebt &&\n            !isPendingSystemTokenBalance &&\n            !isPendingAccountAvailableCollateral &&\n            systemTokenBalance &&\n            accountAvailableCollateral &&\n            positionDebt &&\n            systemTokenBalance.add(accountAvailableCollateral).gte(positionDebt)\n          )\n        }\n      >\n        Close Position\n      </Button>\n    </Flex>\n  );\n}\n\nexport const ClosePosition = ({\n  liquidityPosition,\n  onClose,\n}: {\n  liquidityPosition?: LiquidityPosition;\n  onClose: () => void;\n}) => {\n  const [transactionStep, setTransactions] = React.useState(false);\n  const { setCollateralChange, setDebtChange } = React.useContext(ManagePositionContext);\n  const params = useParams();\n  const { data: collateralType } = useCollateralType(params.collateralSymbol);\n  const { network } = useNetwork();\n  const isBase = isBaseAndromeda(network?.id, network?.preset);\n  const { data: systemToken } = useSystemToken();\n\n  React.useEffect(() => {\n    if (liquidityPosition) {\n      setDebtChange(liquidityPosition.debt.mul(-1));\n      setCollateralChange(liquidityPosition.collateralAmount.mul(-1));\n    }\n\n    return () => {\n      setDebtChange(ZEROWEI);\n      setCollateralChange(ZEROWEI);\n    };\n  }, [liquidityPosition, setCollateralChange, setDebtChange]);\n\n  const { data: ClosePositionDeployment } = useClosePosition();\n\n  if (!collateralType) {\n    return null;\n  }\n\n  return (\n    <>\n      {!transactionStep ? (\n        <ClosePositionUi\n          debt={liquidityPosition?.debt || ZEROWEI}\n          collateralAmount={liquidityPosition?.collateralAmount || ZEROWEI}\n          onClose={onClose}\n          debtSymbol={isBase ? params.collateralSymbol : systemToken?.symbol}\n          collateralSymbol={collateralType.displaySymbol}\n          onSubmit={() => setTransactions(true)}\n        />\n      ) : null}\n      {transactionStep && !ClosePositionDeployment ? (\n        <ClosePositionTransactions\n          onBack={() => setTransactions(false)}\n          onClose={onClose}\n          collateralType={collateralType}\n          liquidityPosition={liquidityPosition}\n          poolId={params.poolId}\n        />\n      ) : null}\n      {transactionStep && ClosePositionDeployment ? (\n        <ClosePositionOneStep onBack={() => setTransactions(false)} onClose={onClose} />\n      ) : null}\n    </>\n  );\n};\n","import { Box, Divider, Flex, Skeleton } from '@chakra-ui/react';\nimport { FC } from 'react';\nimport { PositionTitle } from './PositionTitle';\nimport { BorderBox } from '@snx-v3/BorderBox';\n\nexport const ManageLoading: FC<{\n  collateralSymbol?: string;\n  poolName?: string;\n}> = ({ collateralSymbol, poolName }) => {\n  return (\n    <Box mb={12} mt={8}>\n      <Box px={[0, 6]}>\n        <PositionTitle collateralSymbol={collateralSymbol} poolName={poolName} isOpen />\n      </Box>\n      <Flex mt={6} flexDirection={['column', 'column', 'row']} gap={4}>\n        <BorderBox gap={4} flex={1} p={6} flexDirection=\"column\" bg=\"navy.700\" height=\"fit-content\">\n          <Skeleton maxW=\"100px\" width=\"100%\" height=\"20px\" />\n          <Flex gap={4}>\n            <BorderBox display=\"flex\" flexDir=\"column\" gap={2} p={4} flex={1} height=\"152px\">\n              <Skeleton width=\"100px\" height=\"20px\" />\n              <Skeleton width=\"100%\" height=\"28px\" />\n            </BorderBox>\n            <BorderBox display=\"flex\" flexDir=\"column\" gap={2} p={4} flex={1} height=\"152px\">\n              <Skeleton width=\"100px\" height=\"20px\" />\n              <Skeleton width=\"100%\" height=\"28px\" />\n            </BorderBox>\n          </Flex>\n\n          <BorderBox display=\"flex\" flexDir=\"column\" gap={2} p={4} flex={1} height=\"130px\">\n            <Skeleton width=\"100px\" height=\"20px\" />\n            <Skeleton width=\"100%\" height=\"28px\" maxW=\"300px\" />\n          </BorderBox>\n\n          <BorderBox display=\"flex\" flexDir=\"column\" gap={2} p={4} flex={1} height=\"130px\">\n            <Skeleton width=\"100px\" height=\"20px\" />\n            <Skeleton width=\"100%\" height=\"28px\" maxW=\"300px\" />\n          </BorderBox>\n        </BorderBox>\n\n        <BorderBox\n          flex={1}\n          maxW={['100%', '100%', '501px']}\n          p={6}\n          flexDirection=\"column\"\n          bg=\"navy.700\"\n          height=\"fit-content\"\n        >\n          <Skeleton maxW=\"232px\" width=\"100%\" height=\"20px\" />\n          <Divider my={6} />\n          <Skeleton maxW=\"232px\" width=\"100%\" height=\"20px\" />\n          <Skeleton mt={4} width=\"100%\" height=\"79px\" />\n          <Skeleton mt={6} width=\"100%\" height=\"48px\" />\n        </BorderBox>\n      </Flex>\n    </Box>\n  );\n};\n","import { InfoIcon } from '@chakra-ui/icons';\nimport { Box, Flex, Text } from '@chakra-ui/react';\nimport { BorderBox } from '@snx-v3/BorderBox';\nimport { isBaseAndromeda } from '@snx-v3/isBaseAndromeda';\nimport { ManagePositionProvider } from '@snx-v3/ManagePositionContext';\nimport { Tooltip } from '@snx-v3/Tooltip';\nimport { Network, useNetwork, useWallet } from '@snx-v3/useBlockchain';\nimport { CollateralType, useCollateralType, useCollateralTypes } from '@snx-v3/useCollateralTypes';\nimport { LiquidityPosition, useLiquidityPosition } from '@snx-v3/useLiquidityPosition';\nimport { useParams } from '@snx-v3/useParams';\nimport { usePoolData } from '@snx-v3/usePoolData';\nimport { usePool } from '@snx-v3/usePoolsList';\nimport { FC, useMemo, useState } from 'react';\nimport {\n  ManageAction,\n  ManageStats,\n  NoPosition,\n  Rewards,\n  UnsupportedCollateralAlert,\n} from '../components';\nimport { ClosePosition } from '../components/ClosePosition/ClosePosition';\nimport { ManageLoading } from '../components/Manage/ManageLoading';\nimport { PositionTitle } from '../components/Manage/PositionTitle';\nimport { WatchAccountBanner } from '../components/WatchAccountBanner/WatchAccountBanner';\n\nfunction useNormalisedCollateralSymbol(collateralSymbol?: string) {\n  const { network } = useNetwork();\n\n  return useMemo(() => {\n    if (collateralSymbol !== 'USDC') {\n      return collateralSymbol;\n    }\n    if (!network?.id && network?.preset) {\n      return undefined;\n    }\n    return isBaseAndromeda(network?.id, network?.preset) && collateralSymbol === 'USDC'\n      ? 'sUSDC'\n      : collateralSymbol;\n  }, [network?.id, network?.preset, collateralSymbol]);\n}\n\nexport function useCollateralDisplayName(collateralSymbol?: string) {\n  const { network } = useNetwork();\n\n  return useMemo(() => {\n    if (!network?.id && network?.preset) {\n      return undefined;\n    }\n\n    if (!isBaseAndromeda(network?.id, network?.preset)) {\n      return collateralSymbol;\n    }\n\n    if (collateralSymbol?.toLowerCase() === 'susdc') {\n      return 'USDC';\n    }\n    if (collateralSymbol?.toLowerCase() === 'sstatausdc') {\n      return 'sStataUSDC';\n    }\n\n    return collateralSymbol;\n  }, [network?.id, network?.preset, collateralSymbol]);\n}\n\nexport const ManageUi: FC<{\n  collateralType?: CollateralType;\n  liquidityPosition?: LiquidityPosition;\n  network?: Network;\n  collateralSymbol?: string;\n  poolName?: string;\n  poolId?: string;\n}> = ({ collateralType, liquidityPosition, network, collateralSymbol, poolName, poolId }) => {\n  const [closePosition, setClosePosition] = useState(false);\n\n  const { data: poolData } = usePool(Number(network?.id), String(poolId));\n\n  const [txnModalOpen, setTxnModalOpen] = useState<ManageAction | undefined>(undefined);\n  const positionApr = poolData?.apr?.collateralAprs?.find(\n    (item: any) => item.collateralType.toLowerCase() === collateralType?.tokenAddress.toLowerCase()\n  );\n\n  return (\n    <Box mb={12} mt={8}>\n      <Flex\n        flexDir={['column', 'row']}\n        flexWrap=\"wrap\"\n        px={[0, 6]}\n        alignItems=\"center\"\n        justifyContent=\"space-between\"\n        mb=\"8px\"\n        gap={4}\n      >\n        <PositionTitle\n          collateralSymbol={collateralSymbol}\n          poolName={poolName}\n          isOpen={false}\n          poolId={poolId}\n        />\n        {poolData && (\n          <Flex alignItems={['center', 'flex-end']} direction=\"column\">\n            <Tooltip label=\"APR is averaged over the trailing 7 days and is comprised of both performance and rewards\">\n              <Text\n                fontFamily=\"heading\"\n                fontSize=\"sm\"\n                lineHeight={5}\n                fontWeight=\"medium\"\n                color=\"gray.500\"\n              >\n                Estimated APR\n                <InfoIcon ml={1} mb=\"2px\" w=\"10px\" h=\"10px\" />\n              </Text>\n            </Tooltip>\n            <Text fontWeight=\"bold\" fontSize=\"20px\" color=\"white\" lineHeight=\"36px\">\n              {poolData && positionApr?.apr7d > 0\n                ? `${(positionApr.apr7d * 100).toFixed(2)?.concat('%')}`\n                : '-'}\n            </Text>\n          </Flex>\n        )}\n      </Flex>\n      <Flex mt={6} flexDirection={['column', 'column', 'row']} gap={4}>\n        <BorderBox gap={4} flex={1} p={6} flexDirection=\"column\" bg=\"navy.700\" height=\"fit-content\">\n          <ManageStats liquidityPosition={liquidityPosition} />\n          <Rewards />\n        </BorderBox>\n        {!closePosition ? (\n          <Flex\n            maxWidth={['100%', '100%', '501px']}\n            width=\"100%\"\n            flex={1}\n            alignSelf=\"flex-start\"\n            flexDirection=\"column\"\n          >\n            <BorderBox flex={1} p={6} flexDirection=\"column\" bg=\"navy.700\" height=\"fit-content\">\n              <ManageAction\n                liquidityPosition={liquidityPosition}\n                setTxnModalOpen={setTxnModalOpen}\n                txnModalOpen={txnModalOpen}\n              />\n            </BorderBox>\n            {liquidityPosition?.collateralAmount.gt(0) && !txnModalOpen && (\n              <Text\n                textAlign=\"center\"\n                cursor=\"pointer\"\n                onClick={() => setClosePosition(true)}\n                color=\"cyan.500\"\n                fontWeight={700}\n                mt=\"5\"\n                data-cy=\"close position\"\n              >\n                Close Position\n              </Text>\n            )}\n          </Flex>\n        ) : null}\n\n        {closePosition ? (\n          <BorderBox\n            flex={1}\n            maxW={['100%', '100%', '501px']}\n            p={6}\n            flexDirection=\"column\"\n            bg=\"navy.700\"\n            height=\"fit-content\"\n          >\n            <ClosePosition\n              liquidityPosition={liquidityPosition}\n              onClose={() => setClosePosition(false)}\n            />\n          </BorderBox>\n        ) : null}\n      </Flex>\n    </Box>\n  );\n};\n\nexport const Manage = () => {\n  const params = useParams();\n  const collateralSymbol = useNormalisedCollateralSymbol(params.collateralSymbol);\n\n  const { network } = useNetwork();\n  const { activeWallet } = useWallet();\n\n  const { data: collateralType } = useCollateralType(params.collateralSymbol);\n  const { data: poolData } = usePoolData(params.poolId);\n\n  const { data: liquidityPosition, isPending: isPendingLiquidityPosition } = useLiquidityPosition({\n    tokenAddress: collateralType?.tokenAddress,\n    accountId: params.accountId,\n    poolId: params.poolId,\n  });\n\n  const collateralDisplayName = useCollateralDisplayName(collateralSymbol);\n  const { data: collateralTypes, isPending: isPendingCollaterals } = useCollateralTypes();\n\n  const notSupported =\n    !isPendingCollaterals &&\n    poolData &&\n    collateralTypes?.length &&\n    collateralDisplayName &&\n    !collateralTypes.some((item) =>\n      [item.symbol.toUpperCase(), item.displaySymbol.toUpperCase()].includes(\n        collateralDisplayName.toUpperCase()\n      )\n    );\n\n  const hasPosition = liquidityPosition && liquidityPosition.collateralAmount.gt(0);\n  const hasAvailableCollateral =\n    liquidityPosition && liquidityPosition.accountCollateral.availableCollateral.gt(0);\n\n  return (\n    <ManagePositionProvider>\n      <WatchAccountBanner />\n      {activeWallet ? (\n        <>\n          <UnsupportedCollateralAlert isOpen={Boolean(notSupported)} />\n\n          {!params.accountId && isPendingLiquidityPosition ? (\n            <NoPosition liquidityPosition={liquidityPosition} />\n          ) : null}\n\n          {params.accountId && isPendingLiquidityPosition ? (\n            <ManageLoading poolName={poolData?.name} collateralSymbol={collateralSymbol} />\n          ) : null}\n\n          {params.accountId &&\n          !isPendingLiquidityPosition &&\n          !hasPosition &&\n          !hasAvailableCollateral ? (\n            <NoPosition liquidityPosition={liquidityPosition} />\n          ) : null}\n\n          {params.accountId &&\n          !isPendingLiquidityPosition &&\n          (hasPosition || hasAvailableCollateral) ? (\n            <ManageUi\n              poolName={poolData?.name}\n              poolId={params.poolId}\n              liquidityPosition={liquidityPosition}\n              network={network}\n              collateralSymbol={collateralSymbol}\n              collateralType={collateralType}\n            />\n          ) : null}\n        </>\n      ) : null}\n    </ManagePositionProvider>\n  );\n};\n","import { Link as ReactRouterLink, useLocation } from 'react-router-dom';\nimport { Link, LinkProps } from '@chakra-ui/react';\nimport { ArrowBackIcon } from '@chakra-ui/icons';\n\nexport const HomeLink = ({ ...props }: LinkProps) => {\n  const location = useLocation();\n\n  return (\n    <Link\n      px={3}\n      py={2}\n      width=\"fit-content\"\n      display=\"flex\"\n      alignItems=\"center\"\n      variant=\"outline\"\n      lineHeight=\"20px\"\n      color=\"white\"\n      borderRadius=\"4px\"\n      as={ReactRouterLink}\n      borderWidth=\"1px\"\n      borderColor=\"gray.900\"\n      _hover={{ textTransform: 'none', opacity: 0.9 }}\n      to={{\n        pathname: '/',\n        search: location.search,\n      }}\n      fontSize=\"sm\"\n      fontWeight={700}\n      mb={2}\n      {...props}\n    >\n      <ArrowBackIcon mr={1} /> All Pools\n    </Link>\n  );\n};\n","import { Box, Divider, Flex } from '@chakra-ui/react';\nimport { Helmet } from 'react-helmet';\nimport { PoolHeader, CollateralSection } from '../components';\nimport { useParams } from '@snx-v3/useParams';\nimport { HomeLink } from '@snx-v3/HomeLink';\nimport { usePool } from '@snx-v3/usePoolsList';\nimport { MAINNET, NETWORKS } from '@snx-v3/useBlockchain';\n\nexport const Pool = () => {\n  const { poolId, networkId } = useParams();\n\n  const { data: pool } = usePool(Number(networkId), String(poolId));\n  const network = NETWORKS.find((n) => n.id === Number(networkId));\n\n  const { poolInfo } = pool || {};\n\n  const title = poolInfo ? `Pool #${poolInfo[0].pool.id} / ${poolInfo[0].pool.name}` : 'Pool';\n\n  return (\n    <>\n      <Helmet>\n        <title>{title}</title>\n        <meta name=\"description\" content={title} />\n      </Helmet>\n      <>\n        <HomeLink mt={4} />\n        <PoolHeader mt={3} name={poolInfo && poolInfo[0].pool.name} network={network || MAINNET} />\n        <Divider my={6} bg=\"gray.900\" />\n        <Flex gap={4} mb={16}>\n          <Box w=\"100%\">\n            <CollateralSection />\n          </Box>\n        </Flex>\n      </>\n    </>\n  );\n};\n","import { Box } from '@chakra-ui/react';\nimport { PoolsList } from '../components/Pools/PoolsList';\n\nexport function Pools() {\n  return (\n    <Box mb={20} w=\"100%\">\n      <PoolsList />\n    </Box>\n  );\n}\n","import { useSigner } from '@snx-v3/useBlockchain';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { useMulticall3 } from '@snx-v3/useMulticall3';\nimport { useMutation } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\n\ntype Permissions = Array<string>;\nconst getPermissionDiff = (\n  existing: Permissions,\n  selected: Permissions\n): {\n  grants: Permissions;\n  revokes: Permissions;\n} => {\n  let grants: Permissions = [],\n    revokes: Permissions = [];\n  existing.concat(selected).forEach((permission) => {\n    if (!existing.includes(permission)) {\n      grants = [...grants, permission];\n    }\n    if (!selected.includes(permission)) {\n      revokes = [...revokes, permission];\n    }\n  });\n  return { grants, revokes };\n};\n\nexport const useManagePermissions = ({\n  accountId,\n  target,\n  existing = [],\n  selected = [],\n}: {\n  accountId: string;\n  target: string;\n  existing: Permissions;\n  selected: Permissions;\n}) => {\n  const { data: CoreProxy } = useCoreProxy();\n  const { data: Multicall3 } = useMulticall3();\n  const signer = useSigner();\n\n  return useMutation({\n    mutationFn: async () => {\n      if (!(CoreProxy && Multicall3 && signer)) {\n        throw 'OMFG';\n      }\n\n      const { grants, revokes } = getPermissionDiff(existing, selected);\n\n      try {\n        const CoreProxyInterface = new ethers.utils.Interface(CoreProxy.abi);\n\n        const grantCalls = grants.map((permission) => ({\n          target: CoreProxy.address,\n          callData: CoreProxyInterface.encodeFunctionData('grantPermission', [\n            accountId,\n            ethers.utils.formatBytes32String(permission),\n            target,\n          ]),\n          allowFailure: false,\n          requireSuccess: true,\n        }));\n\n        const revokeCalls = revokes.map((permission) => ({\n          target: CoreProxy.address,\n          callData: CoreProxyInterface.encodeFunctionData('revokePermission', [\n            accountId,\n            ethers.utils.formatBytes32String(permission),\n            target,\n          ]),\n          allowFailure: false,\n          requireSuccess: true,\n        }));\n\n        const Multicall3Contract = new ethers.Contract(Multicall3.address, Multicall3.abi, signer);\n        const tx = await Multicall3Contract.aggregate3([...grantCalls, ...revokeCalls]);\n        await tx.wait();\n      } catch (error: any) {\n        throw error;\n      }\n    },\n  });\n};\n","import { CopyIcon, ExternalLinkIcon } from '@chakra-ui/icons';\nimport { Flex, Tooltip } from '@chakra-ui/react';\nimport { etherscanLink } from '@snx-v3/etherscanLink';\nimport { prettyString } from '@snx-v3/format';\nimport { useNetwork } from '@snx-v3/useBlockchain';\nimport { FC, useMemo } from 'react';\n\ninterface AddressProps {\n  address: string;\n}\n\nexport const Address: FC<AddressProps> = ({ address }) => {\n  const { network } = useNetwork();\n  const link = useMemo(\n    () =>\n      etherscanLink({\n        chain: network?.name || '',\n        address,\n      }),\n    [address, network?.name]\n  );\n  return (\n    <Flex alignItems=\"center\" gap={2}>\n      <Tooltip label={address}>{prettyString(address)}</Tooltip>\n      <CopyIcon\n        onClick={() => {\n          navigator.clipboard.writeText(address);\n        }}\n        cursor=\"pointer\"\n        _hover={{\n          color: 'cyan',\n        }}\n      />\n      <a target=\"_blank\" href={link} rel=\"noreferrer\">\n        <ExternalLinkIcon\n          _hover={{\n            color: 'cyan',\n          }}\n        />\n      </a>\n    </Flex>\n  );\n};\n","export const permissionsList = ['ADMIN', 'BURN', 'DELEGATE', 'MINT', 'REWARDS', 'WITHDRAW'];\n","import { contractsHash } from '@snx-v3/tsHelpers';\nimport { useAccountProxy } from '@snx-v3/useAccountProxy';\nimport { useNetwork, useProvider } from '@snx-v3/useBlockchain';\nimport { useCoreProxy } from '@snx-v3/useCoreProxy';\nimport { useQuery } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\n\nexport function useAccountPermissions(accountId: string | undefined) {\n  const { data: CoreProxy } = useCoreProxy();\n  const { network } = useNetwork();\n  const provider = useProvider();\n\n  return useQuery({\n    queryKey: [\n      `${network?.id}-${network?.preset}`,\n      'AccountPermissions',\n      { accountId },\n      { contractsHash: contractsHash([CoreProxy]) },\n    ],\n    enabled: Boolean(provider && CoreProxy && accountId),\n    queryFn: async function () {\n      if (!(provider && CoreProxy && accountId)) throw 'OMFG';\n      const CoreProxyContract = new ethers.Contract(CoreProxy.address, CoreProxy.abi, provider);\n      const permissions = await CoreProxyContract.getAccountPermissions(accountId);\n      return permissions.reduce(\n        (\n          acc: { [key: string]: string[] },\n          { user, permissions }: { user: string; permissions: string[] }\n        ) => ({\n          ...acc,\n          [user.toLowerCase()]: permissions.map((r: string) => ethers.utils.parseBytes32String(r)),\n        }),\n        {}\n      );\n    },\n  });\n}\n\nexport function useAccountOwner(accountId: string | undefined) {\n  const { data: AccountProxy } = useAccountProxy();\n  const { network } = useNetwork();\n  const provider = useProvider();\n\n  return useQuery({\n    queryKey: [\n      `${network?.id}-${network?.preset}`,\n      'AccountOwner',\n      { accountId },\n      { contractsHash: contractsHash([AccountProxy]) },\n    ],\n    enabled: Boolean(provider && AccountProxy && accountId),\n    queryFn: async function () {\n      if (!(provider && AccountProxy && accountId)) throw 'OMFG';\n      const AccountProxyContract = new ethers.Contract(\n        AccountProxy.address,\n        AccountProxy.abi,\n        provider\n      );\n      return (await AccountProxyContract.ownerOf(accountId)) as string;\n    },\n  });\n}\n","/* eslint-disable react/no-unescaped-entities */\nimport { Text, Tooltip } from '@chakra-ui/react';\nimport { InfoIcon } from '@chakra-ui/icons';\n\nexport default function PermissionsInfo() {\n  return (\n    <Tooltip\n      label={\n        <>\n          <Text fontWeight={600} textAlign=\"left\">\n            ADMIN: Full control over the account, except for transferring ownership <br />\n            WITHDRAW: Ability to withdraw collateral from the account\n            <br />\n            REWARDS: Ability to claim rewards on behalf of the account\n            <br />\n            MINT: Ability to mint snxUSD using the account's collateral\n            <br />\n            DELEGATE: Ability to delegate the account's collateral to pools\n          </Text>\n        </>\n      }\n    >\n      <InfoIcon ml={1.5} w=\"10px\" h=\"10px\" />\n    </Tooltip>\n  );\n}\n","import {\n  Badge,\n  Button,\n  Divider,\n  Flex,\n  Input,\n  Modal,\n  ModalBody,\n  ModalCloseButton,\n  ModalContent,\n  ModalFooter,\n  ModalHeader,\n  ModalOverlay,\n  Spinner,\n  Text,\n} from '@chakra-ui/react';\nimport { useEffect, useMemo, useState } from 'react';\nimport { permissionsList } from './AccountPermissions';\nimport { utils } from 'ethers';\nimport { useManagePermissions } from '@snx-v3/useManagePermissions';\nimport { useAccountOwner, useAccountPermissions } from '@snx-v3/useAccountPermissions';\nimport PermissionsInfo from './PermissionsInfo';\n\nexport function PermissionModal({\n  accountId,\n  isOpen,\n  onClose,\n  refetch,\n  existingPermissions,\n  target,\n}: {\n  accountId: string;\n  target?: string;\n  existingPermissions?: string[];\n  isOpen: boolean;\n  onClose: () => void;\n  refetch: () => void;\n}) {\n  const [address, setAddress] = useState(target || '');\n  const [selectedPermissions, setSelectedPermissions] = useState<string[]>([\n    ...(existingPermissions || []),\n  ]);\n  const { mutateAsync: submit, isPending } = useManagePermissions({\n    target: address,\n    accountId,\n    existing: existingPermissions || [],\n    selected: selectedPermissions,\n  });\n\n  const { data: permissionData } = useAccountPermissions(accountId);\n  const { data: accountOwner } = useAccountOwner(accountId);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setSelectedPermissions([...(existingPermissions || [])]);\n    }\n  }, [existingPermissions, isOpen]);\n\n  const isAddressValid = useMemo(() => {\n    return (\n      utils.isAddress(address) &&\n      accountOwner?.toLowerCase() !== address.toLowerCase() &&\n      (!!target || (permissionData && !permissionData[address.toLowerCase()]))\n    );\n  }, [accountOwner, address, permissionData, target]);\n\n  const isFormValid = useMemo(() => {\n    return selectedPermissions.length > 0 && isAddressValid;\n  }, [isAddressValid, selectedPermissions.length]);\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose}>\n      <ModalOverlay />\n      <ModalContent py={2} border=\"1px solid\" rounded=\"base\" borderColor=\"gray.900\" bg=\"navy.700\">\n        <ModalHeader>{target ? 'Edit' : 'New'} Permission</ModalHeader>\n        <ModalCloseButton />\n        <ModalBody>\n          <Divider />\n          <Flex pt={6} flexDir=\"column\" gap=\"5\">\n            {!target && (\n              <>\n                <Text fontWeight={600} fontSize=\"14px\" color=\"white\">\n                  Address\n                </Text>\n                <Input\n                  bg=\"navy.900\"\n                  onChange={(e) => {\n                    setAddress(e.target.value.trim());\n                  }}\n                  value={address}\n                  isInvalid={!isAddressValid && !!address}\n                />\n              </>\n            )}\n            <Text fontWeight={600} color=\"white\" fontSize=\"14px\">\n              Select Permissions <PermissionsInfo />\n            </Text>\n            <Flex justifyContent=\"space-evenly\">\n              {permissionsList.map((permission) => {\n                const isActive = selectedPermissions.includes(permission);\n                return (\n                  <Badge\n                    onClick={() =>\n                      setSelectedPermissions((state) => {\n                        if (state.includes(permission)) {\n                          return state.filter((s) => s !== permission);\n                        }\n                        return [...state, permission];\n                      })\n                    }\n                    variant=\"outline\"\n                    key={permission}\n                    color={isActive ? 'cyan' : 'gray'}\n                    textTransform=\"capitalize\"\n                    cursor=\"pointer\"\n                    bg=\"gray.900\"\n                    colorScheme={isActive ? 'cyan' : 'gray'}\n                  >\n                    {permission}\n                  </Badge>\n                );\n              })}\n            </Flex>\n          </Flex>\n        </ModalBody>\n        <ModalFooter justifyContent=\"center\">\n          {isPending ? (\n            <Spinner color=\"cyan\" />\n          ) : (\n            <Button\n              w=\"100%\"\n              onClick={() => {\n                submit().then(() => {\n                  setAddress('');\n                  setSelectedPermissions([]);\n                  refetch();\n                  onClose();\n                });\n              }}\n              isDisabled={!isFormValid}\n            >\n              {target ? 'Update ' : 'Add new '} permissions\n            </Button>\n          )}\n        </ModalFooter>\n      </ModalContent>\n    </Modal>\n  );\n}\n","import { DeleteIcon, EditIcon } from '@chakra-ui/icons';\nimport { Badge, Td, Tr, Text, Flex, IconButton, useDisclosure } from '@chakra-ui/react';\nimport { FC, useEffect } from 'react';\nimport { useManagePermissions } from '@snx-v3/useManagePermissions';\nimport { Address } from '../Address';\nimport { PermissionModal } from './PermissionModal';\nimport { permissionsList } from './AccountPermissions';\n\ninterface Props {\n  address: string;\n  currentPermissions: Array<string>;\n  accountId: string;\n  refetch: () => void;\n  isOwner: boolean;\n}\n\nexport const PermissionRow: FC<Props> = ({\n  address,\n  currentPermissions,\n  accountId,\n  refetch,\n  isOwner,\n}) => {\n  const {\n    isOpen: isPermissionOpen,\n    onClose: onPermissionClose,\n    onOpen: onPermissionOpen,\n  } = useDisclosure();\n\n  const {\n    mutate: removePermissions,\n    isPending,\n    isSuccess,\n  } = useManagePermissions({\n    accountId,\n    target: address,\n    selected: [],\n    existing: currentPermissions,\n  });\n\n  useEffect(() => {\n    if (isSuccess) {\n      refetch();\n      onPermissionClose();\n    }\n  }, [isSuccess, onPermissionClose, refetch]);\n\n  return (\n    <Tr>\n      <Td width={240} borderBottomColor=\"gray.900\" py=\"4\">\n        <Text fontWeight={400} color=\"white\" fontSize=\"16px\">\n          <Address address={address} />\n        </Text>\n      </Td>\n      <Td borderBottomColor=\"gray.900\">\n        <Flex py={2} flexWrap=\"wrap\" gap={3}>\n          {permissionsList.map((permission) => {\n            const isActive = currentPermissions.includes(permission);\n            return (\n              <Badge\n                color={isActive ? 'cyan' : 'gray'}\n                colorScheme={isActive ? 'cyan' : 'gray'}\n                variant=\"outline\"\n                bg={isActive ? 'cyan.900' : 'gray.900'}\n                size=\"sm\"\n                textTransform=\"capitalize\"\n                key={permission.concat('permission-row')}\n              >\n                {permission}\n              </Badge>\n            );\n          })}\n        </Flex>\n      </Td>\n\n      <Td borderBottomColor=\"gray.900\" textAlign=\"end\">\n        {isOwner && (\n          <>\n            <PermissionModal\n              isOpen={isPermissionOpen}\n              onClose={onPermissionClose}\n              accountId={accountId}\n              refetch={refetch}\n              existingPermissions={currentPermissions}\n              target={address}\n            />\n            <IconButton\n              onClick={onPermissionOpen}\n              size=\"sm\"\n              aria-label=\"edit\"\n              variant=\"outline\"\n              colorScheme=\"gray\"\n              icon={<EditIcon />}\n              mr=\"2\"\n            />\n            <IconButton\n              variant=\"outline\"\n              isLoading={isPending}\n              colorScheme=\"gray\"\n              onClick={() => {\n                removePermissions();\n              }}\n              size=\"sm\"\n              aria-label=\"delete\"\n              icon={<DeleteIcon />}\n            />\n          </>\n        )}\n      </Td>\n    </Tr>\n  );\n};\n","import {\n  Alert,\n  AlertDescription,\n  AlertIcon,\n  Button,\n  Divider,\n  Flex,\n  Input,\n  Modal,\n  ModalBody,\n  ModalCloseButton,\n  ModalContent,\n  ModalFooter,\n  ModalHeader,\n  ModalOverlay,\n  Spinner,\n  Text,\n} from '@chakra-ui/react';\nimport { prettyString } from '@snx-v3/format';\nimport { useTransferAccountId } from '@snx-v3/useTransferAccountId';\nimport { utils } from 'ethers';\nimport { useMemo, useState } from 'react';\n\nexport function TransferOwnershipModal({\n  isOpen,\n  onClose,\n  accountId,\n  refetch,\n  owner,\n}: {\n  isOpen: boolean;\n  onClose: () => void;\n  accountId: string;\n  owner: string;\n  refetch: () => void;\n}) {\n  const [to, setTo] = useState('');\n  const { isPending, mutateAsync: submit } = useTransferAccountId(to, accountId);\n\n  const isTargetValid = useMemo(\n    () => !!utils.isAddress(to) && to.toLowerCase() !== owner.toLowerCase(),\n    [owner, to]\n  );\n  return (\n    <Modal isOpen={isOpen} onClose={onClose}>\n      <ModalOverlay />\n      <ModalContent pb={1} border=\"1px solid\" rounded=\"base\" borderColor=\"gray.900\" bg=\"navy.700\">\n        <ModalHeader>Transfer Ownership</ModalHeader>\n        <ModalCloseButton />\n        <ModalBody>\n          <Divider />\n          <Text fontSize=\"18px\" fontWeight={700} mt=\"4\">\n            Account #{prettyString(accountId, 4, 4)}\n          </Text>\n          <Text fontSize=\"14px\" color=\"white\" mt=\"2\">\n            Will be transfered from:\n          </Text>\n          <Input mt=\"2\" bg=\"navy.900\" disabled value={owner} />\n          <Text fontSize=\"14px\" color=\"white\" mt=\"2\">\n            Will be transfered to:\n          </Text>\n          <Input\n            mt=\"2\"\n            bg=\"navy.900\"\n            onChange={(e) => {\n              setTo(e.target.value.trim());\n            }}\n            value={to}\n          />\n        </ModalBody>\n        <ModalFooter display=\"flex\" flexDirection=\"column\" gap={4} justifyContent=\"center\">\n          <Alert status=\"warning\" borderRadius=\"6px\">\n            <AlertIcon />\n            <Flex direction=\"column\">\n              <AlertDescription>This action cannot be undone</AlertDescription>\n            </Flex>\n          </Alert>\n\n          {isPending ? (\n            <Spinner color=\"cyan\" />\n          ) : (\n            <Button\n              w=\"100%\"\n              onClick={() =>\n                submit().then(() => {\n                  setTo('');\n                  refetch();\n                  onClose();\n                })\n              }\n              isDisabled={!isTargetValid}\n            >\n              Confirm\n            </Button>\n          )}\n        </ModalFooter>\n      </ModalContent>\n    </Modal>\n  );\n}\n","import { useAccountProxy } from '@snx-v3/useAccountProxy';\nimport { useSigner, useWallet } from '@snx-v3/useBlockchain';\nimport { useMutation } from '@tanstack/react-query';\nimport { ethers } from 'ethers';\n\nexport function useTransferAccountId(to: string, accountId: string) {\n  const { data: AccountProxy } = useAccountProxy();\n  const { activeWallet } = useWallet();\n  const signer = useSigner();\n  const walletAddress = activeWallet?.address;\n\n  return useMutation({\n    mutationFn: async () => {\n      if (!AccountProxy) throw new Error('AccountProxy not defined');\n      if (!(walletAddress && signer)) throw new Error('Wallet is not connected');\n      const AccountProxyContract = new ethers.Contract(\n        AccountProxy.address,\n        AccountProxy.abi,\n        signer\n      );\n      const tx = await AccountProxyContract.transferFrom(walletAddress, to, accountId);\n      const response = await tx.wait();\n      return response;\n    },\n  });\n}\n","import { Skeleton, Td, Text, Tr } from '@chakra-ui/react';\nimport { prettyString } from '@snx-v3/format';\nimport { ethers } from 'ethers';\n\nexport function PermissionTableLoading() {\n  const rows = Array.from({ length: 2 }, (_, i) => i);\n  return (\n    <>\n      {rows.map((row) => {\n        return (\n          <Tr borderBottomWidth={row === 1 ? 'none' : '1px'} key={row}>\n            <Td borderBottomColor=\"gray.900\" py=\"4\" width=\"200px\">\n              <Skeleton>\n                <Text fontWeight={400} color=\"white\" fontSize=\"16px\">\n                  {prettyString(ethers.constants.AddressZero)}{' '}\n                </Text>\n              </Skeleton>\n            </Td>\n            <Td borderBottomColor=\"gray.900\" py=\"4\">\n              <Skeleton>-</Skeleton>\n            </Td>\n            <Td borderBottomColor=\"gray.900\" py=\"4\">\n              <Skeleton>-</Skeleton>\n            </Td>\n          </Tr>\n        );\n      })}\n    </>\n  );\n}\n","/* eslint-disable react/no-unescaped-entities */\nimport {\n  Badge,\n  Button,\n  Flex,\n  Heading,\n  Skeleton,\n  Table,\n  TableContainer,\n  Tbody,\n  Td,\n  Text,\n  Th,\n  Thead,\n  Tr,\n  useDisclosure,\n} from '@chakra-ui/react';\nimport { PermissionRow } from './PermissionRow';\nimport { useAccountOwner, useAccountPermissions } from '@snx-v3/useAccountPermissions';\nimport { prettyString } from '@snx-v3/format';\nimport { useWallet } from '@snx-v3/useBlockchain';\nimport { PermissionModal } from './PermissionModal';\nimport { TransferOwnershipModal } from './TransferOwnershipModal';\nimport { PermissionTableLoading } from './PermissionTableLoading';\nimport { useMemo } from 'react';\nimport { Address } from '../Address';\nimport PermissionsInfo from './PermissionsInfo';\n\nexport default function PermissionTable({\n  accountId,\n  refetchAccounts,\n}: {\n  accountId: string;\n  refetchAccounts: () => void;\n}) {\n  const {\n    isOpen: isPermissionOpen,\n    onClose: onPermissionClose,\n    onOpen: onPermissionOpen,\n  } = useDisclosure();\n  const {\n    isOpen: isTransferOpen,\n    onClose: onTransferClose,\n    onOpen: onTransferOpen,\n  } = useDisclosure();\n\n  const { activeWallet } = useWallet();\n  const { data: permissions, isLoading, refetch } = useAccountPermissions(accountId);\n  const {\n    data: accountOwner,\n    isLoading: loadingOwner,\n    refetch: refetchAccountOwner,\n  } = useAccountOwner(accountId);\n\n  const isOwner = useMemo(\n    () => !!(accountOwner && accountOwner?.toLowerCase() === activeWallet?.address.toLowerCase()),\n    [accountOwner, activeWallet?.address]\n  );\n  return (\n    <>\n      <TableContainer\n        flexGrow=\"2\"\n        borderColor=\"gray.900\"\n        borderWidth=\"1px\"\n        borderRadius=\"5px\"\n        p={6}\n        sx={{\n          borderCollapse: 'separate',\n          borderSpacing: 0,\n        }}\n        bg=\"navy.700\"\n      >\n        <Flex mb=\"2\" w=\"100%\" justifyContent=\"space-between\">\n          <Heading size=\"md\" mb=\"1\">\n            Account #{prettyString(accountId, 4, 4)}\n          </Heading>\n          {isOwner && (\n            <Button\n              size=\"xs\"\n              onClick={() => {\n                onPermissionOpen();\n              }}\n            >\n              + New Permission\n            </Button>\n          )}\n        </Flex>\n        <Table variant=\"simple\">\n          <Thead>\n            <Tr>\n              <Th\n                py={5}\n                textTransform=\"unset\"\n                color=\"gray.600\"\n                fontFamily=\"heading\"\n                fontSize=\"12px\"\n                lineHeight=\"16px\"\n                borderBottomColor=\"gray.900\"\n              >\n                Address\n              </Th>\n              <Th\n                py={5}\n                textTransform=\"unset\"\n                color=\"gray.600\"\n                fontFamily=\"heading\"\n                fontSize=\"12px\"\n                lineHeight=\"16px\"\n                borderBottomColor=\"gray.900\"\n              >\n                Permissions\n                <PermissionsInfo />\n              </Th>\n              <Th\n                py={5}\n                textTransform=\"unset\"\n                color=\"gray.600\"\n                fontFamily=\"heading\"\n                fontSize=\"12px\"\n                lineHeight=\"16px\"\n                borderBottomColor=\"gray.900\"\n              ></Th>\n            </Tr>\n          </Thead>\n\n          <Tbody>\n            <Tr>\n              <Td width={240} py={5} borderBottomColor=\"gray.900\">\n                <Skeleton isLoaded={!loadingOwner}>\n                  {accountOwner && (\n                    <Text fontWeight={400} color=\"white\" fontSize=\"16px\">\n                      <Address address={accountOwner} />\n                    </Text>\n                  )}\n                </Skeleton>\n              </Td>\n              <Td py={5} borderBottomColor=\"gray.900\">\n                <Badge\n                  color=\"cyan\"\n                  variant=\"outline\"\n                  bg=\"cyan.900\"\n                  size=\"sm\"\n                  textTransform=\"capitalize\"\n                >\n                  OWNER\n                </Badge>\n              </Td>\n              <Td py={5} borderBottomColor=\"gray.900\" textAlign=\"end\">\n                {isOwner && (\n                  <Button\n                    size=\"xs\"\n                    variant=\"outline\"\n                    colorScheme=\"gray\"\n                    color=\"white\"\n                    onClick={() => {\n                      onTransferOpen();\n                    }}\n                  >\n                    Transfer Ownership\n                  </Button>\n                )}\n              </Td>\n            </Tr>\n\n            {isLoading && <PermissionTableLoading />}\n\n            {!isLoading &&\n              permissions &&\n              Object.keys(permissions)\n                .filter((target) => permissions[target]?.length > 0)\n                .map((target) => (\n                  <PermissionRow\n                    key={target}\n                    address={target}\n                    currentPermissions={permissions[target]}\n                    accountId={accountId}\n                    refetch={refetch}\n                    isOwner={isOwner}\n                  />\n                ))}\n          </Tbody>\n        </Table>\n      </TableContainer>\n\n      <PermissionModal\n        isOpen={isPermissionOpen}\n        onClose={onPermissionClose}\n        accountId={accountId}\n        refetch={refetch}\n      />\n      {accountOwner && (\n        <TransferOwnershipModal\n          isOpen={isTransferOpen}\n          onClose={onTransferClose}\n          accountId={accountId}\n          owner={accountOwner}\n          refetch={() => {\n            refetch();\n            refetchAccountOwner();\n            refetchAccounts();\n          }}\n        />\n      )}\n    </>\n  );\n}\n","export const DelegationIcon = () => {\n  return (\n    <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M29.3662 7.14593C29.8933 6.89158 30.5156 6.97433 30.9627 7.35822L42.9627 17.6613C43.3047 17.9549 43.5024 18.3898 43.5024 18.8485C43.5024 19.3072 43.3047 19.7421 42.9627 20.0358L30.9627 30.3388C30.5156 30.7227 29.8933 30.8054 29.3662 30.5511C28.8391 30.2967 28.5024 29.7512 28.5024 29.1515V25.5455H18.0024C17.174 25.5455 16.5024 24.8536 16.5024 24C16.5024 23.1465 17.174 22.4546 18.0024 22.4546H30.0024C30.8309 22.4546 31.5024 23.1465 31.5024 24V25.8519L39.6594 18.8485L31.5024 11.8451V13.697C31.5024 14.5505 30.8309 15.2424 30.0024 15.2424H18.0024C17.174 15.2424 16.5024 14.5505 16.5024 13.697C16.5024 12.8435 17.174 12.1515 18.0024 12.1515H28.5024V8.54547C28.5024 7.94581 28.8391 7.40028 29.3662 7.14593Z\"\n        fill=\"white\"\n      />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M18.6362 40.8541C18.1092 41.1084 17.4868 41.0257 17.0397 40.6418L5.03972 30.3387C4.69774 30.0451 4.5 29.6102 4.5 29.1515C4.5 28.6928 4.69774 28.2579 5.03972 27.9642L17.0397 17.6612C17.4869 17.2773 18.1092 17.1946 18.6362 17.4489C19.1633 17.7033 19.5 18.2488 19.5 18.8485L19.5 22.4545L30 22.4545C30.8284 22.4545 31.5 23.1464 31.5 24C31.5 24.8535 30.8284 25.5454 30 25.5454L18 25.5454C17.1716 25.5454 16.5 24.8535 16.5 24L16.5 22.1481L8.34308 29.1515L16.5 36.1549L16.5 34.303C16.5 33.4495 17.1716 32.7576 18 32.7576L30 32.7576C30.8284 32.7576 31.5 33.4495 31.5 34.303C31.5 35.1565 30.8284 35.8485 30 35.8485L19.5 35.8485L19.5 39.4545C19.5 40.0542 19.1633 40.5997 18.6362 40.8541Z\"\n        fill=\"white\"\n      />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M9.3584 13.6973C9.3584 12.8438 10.03 12.1519 10.8584 12.1519H12.5727C13.4011 12.1519 14.0727 12.8438 14.0727 13.6973C14.0727 14.5508 13.4011 15.2428 12.5727 15.2428H10.8584C10.03 15.2428 9.3584 14.5508 9.3584 13.6973Z\"\n        fill=\"white\"\n      />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M38.644 34.3027C38.644 35.1562 37.9725 35.8481 37.144 35.8481L35.4298 35.8481C34.6013 35.8481 33.9298 35.1562 33.9298 34.3027C33.9298 33.4492 34.6013 32.7572 35.4298 32.7572L37.144 32.7572C37.9725 32.7572 38.644 33.4492 38.644 34.3027Z\"\n        fill=\"white\"\n      />\n    </svg>\n  );\n};\n","import { Button, Flex, Heading, Link, Text } from '@chakra-ui/react';\nimport { useAccounts } from '@snx-v3/useAccounts';\nimport PermissionTable from './PermissionTable';\nimport { DelegationIcon } from './DelegationIcon';\n\nexport default function Permissions() {\n  const { data: accounts, refetch: refetchAccounts } = useAccounts();\n\n  return (\n    <Flex flexDir=\"column\" gap=\"7\">\n      <Flex flexDir=\"column\" gap={7}>\n        {accounts?.map((account) => (\n          <PermissionTable key={account} accountId={account} refetchAccounts={refetchAccounts} />\n        ))}\n      </Flex>\n      <Flex\n        flexGrow=\"1\"\n        h=\"fit-content\"\n        border=\"1px solid\"\n        borderColor=\"gray.900\"\n        rounded=\"base\"\n        flexDir=\"column\"\n        width=\"100%\"\n        p=\"6\"\n        bg=\"navy.700\"\n      >\n        <DelegationIcon />\n        <Heading fontSize=\"14px\" mt=\"6\">\n          Delegate Permissions\n        </Heading>\n        <Text color=\"gray.500\" fontSize=\"12px\" mb=\"6\">\n          Delegation enables a wallet to execute functions on behalf of another wallet/account:\n          lock, borrow, withdraw, claim, but not transfer. Manage addresses and their powers below.\n        </Text>\n        <Link\n          href=\"https://docs.synthetix.io/v/synthetix-v3-user-documentation/protocol-design/vaults#account-permissions\"\n          rel=\"noopener\"\n          target=\"_blank\"\n        >\n          <Button variant=\"outline\" color=\"white\" colorScheme=\"gray\" size=\"xs\">\n            Learn More\n          </Button>\n        </Link>\n      </Flex>\n    </Flex>\n  );\n}\n","import { Helmet } from 'react-helmet';\nimport { Flex, Heading } from '@chakra-ui/react';\nimport Permissions from '../../components/Permissions/Permissions';\nimport { useIsConnected } from '@snx-v3/useBlockchain';\nimport { useNavigate } from 'react-router-dom';\nimport { useEffect } from 'react';\nimport { useAccounts } from '@snx-v3/useAccounts';\n\nexport function Settings() {\n  const navigate = useNavigate();\n  const isConnected = useIsConnected();\n  const {\n    data: accounts,\n    isPending: isAccountsLoading,\n    isFetching: isAccountsFetching,\n  } = useAccounts();\n\n  useEffect(() => {\n    if (!isConnected) {\n      navigate('/');\n    }\n  }, [isConnected, navigate]);\n\n  useEffect(() => {\n    if (!isAccountsLoading && !isAccountsFetching && !accounts?.length) {\n      navigate('/');\n    }\n  }, [accounts?.length, isAccountsFetching, isAccountsLoading, isConnected, navigate]);\n\n  return (\n    <>\n      <Helmet>\n        <title>Account Settings</title>\n        <meta name=\"description\" content=\"Account Settings\" />\n      </Helmet>\n      <Flex flexDir=\"column\" mb={16}>\n        <Heading\n          mt={{\n            base: 2,\n            sm: 8,\n          }}\n          mb={6}\n          color=\"gray.50\"\n          fontSize=\"1.5rem\"\n          data-cy=\"account settings\"\n        >\n          Account Settings\n        </Heading>\n        <Permissions />\n      </Flex>\n    </>\n  );\n}\n","import { Suspense } from 'react';\nimport { Route, Routes } from 'react-router-dom';\nimport { Spinner } from '@chakra-ui/react';\nimport { DefaultLayout } from './layouts/Default';\nimport { Home, Manage, NotFoundPage, Dashboard, Pool, Pools } from './pages';\nimport { Settings } from './pages/Account/Settings';\n\nexport const Router = () => {\n  return (\n    <Suspense fallback={<Spinner />}>\n      <Routes>\n        <Route element={<DefaultLayout />}>\n          <Route path=\"/account/settings\" element={<Settings />} />\n          <Route path=\"/positions/:collateralSymbol/:poolId\" element={<Manage />} />\n          <Route path=\"/pools\" element={<Pools />} />\n          <Route path=\"/pools/:networkId/:poolId\" element={<Pool />} />\n          <Route path=\"/dashboard\" element={<Dashboard />} />\n          <Route path=\"/\" element={<Home />} />\n          <Route path=\"*\" element={<NotFoundPage />} />\n        </Route>\n      </Routes>\n    </Suspense>\n  );\n};\n","import { NETWORKS, appMetadata } from '@snx-v3/useBlockchain';\nimport injectedModule, { ProviderLabel } from '@web3-onboard/injected-wallets';\nimport trezorModule from '@web3-onboard/trezor';\nimport ledgerModule from '@web3-onboard/ledger';\nimport walletConnectModule from '@web3-onboard/walletconnect';\nimport gnosisModule from '@web3-onboard/gnosis';\nimport coinbaseModule from '@web3-onboard/coinbase';\nimport { init } from '@web3-onboard/react';\nimport type { ChainWithDecimalId } from '@web3-onboard/common';\n\n// Filter networks to only supported ones\nexport const chains: ChainWithDecimalId[] = Object.values(\n  NETWORKS.reduce((result, network) => {\n    if (!network.isSupported) {\n      return result;\n    }\n    if (network.id in result) {\n      // We cannot have duplicate chains, but we can have multiple deployments per chain\n      return result;\n    }\n    return Object.assign(result, {\n      [network.id]: {\n        id: network.id,\n        token: network.token,\n        label: network.label,\n        rpcUrl: network.rpcUrl(),\n        publicRpcUrl: network.publicRpcUrl,\n      },\n    });\n  }, {})\n);\n\nexport const onboard = init({\n  wallets:\n    (window.localStorage.DEBUG === 'true' || window.localStorage.DEBUG?.slice(0, 3) === 'snx') &&\n    window.$magicWallet\n      ? [injectedModule()]\n      : [\n          coinbaseModule(),\n          injectedModule({ displayUnavailable: [ProviderLabel.MetaMask, ProviderLabel.Trust] }),\n          trezorModule({\n            appUrl: 'https://liquidity.synthetix.eth.limo',\n            email: 'info@synthetix.io',\n          }),\n          ledgerModule({\n            projectId: 'd6eac005846a1c3be1f8eea3a294eed9',\n            walletConnectVersion: 2,\n          }),\n          walletConnectModule({\n            version: 2,\n            projectId: 'd6eac005846a1c3be1f8eea3a294eed9',\n            dappUrl: 'liquidity.synthetix.eth.limo',\n          }),\n          gnosisModule(),\n        ],\n  chains,\n  appMetadata: {\n    ...appMetadata,\n    name: 'Synthetix Liquidity',\n  },\n  accountCenter: {\n    desktop: {\n      enabled: false,\n    },\n    mobile: {\n      enabled: false,\n    },\n  },\n  notify: {\n    enabled: false,\n  },\n});\n","import { useEffect } from 'react';\nimport { HashRouter } from 'react-router-dom';\nimport { ChakraProvider, extendTheme, useColorMode } from '@chakra-ui/react';\nimport { Fonts, theme } from '@snx-v3/theme';\nimport { DEFAULT_QUERY_STALE_TIME } from '@snx-v3/constants';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { ReactQueryDevtools } from '@tanstack/react-query-devtools';\nimport { GasSpeedProvider } from '@snx-v3/useGasSpeed';\nimport { TermsModal } from '@snx-v3/TermsModal';\nimport { SESSION_STORAGE_KEYS } from '@snx-v3/constants';\nimport { Router } from './Router';\nimport { Web3OnboardProvider } from '@web3-onboard/react';\nimport Head from 'react-helmet';\nimport { onboard } from './utils/onboard';\nimport { Progress } from './utils/theme';\n\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      retry: false,\n      refetchInterval: false, //  if queries needs refetching we should be explicit about it, given erc7412\n      staleTime: DEFAULT_QUERY_STALE_TIME,\n      refetchOnWindowFocus: false,\n      throwOnError: (e) => {\n        console.error(e);\n        return false;\n      },\n    },\n    mutations: {\n      retry: false,\n      throwOnError: (e) => {\n        console.error(e);\n        return false;\n      },\n    },\n  },\n});\n\nconst extendedTheme = extendTheme({\n  ...theme,\n  components: {\n    ...theme.components,\n    Progress,\n  },\n});\n\nfunction ColorMode() {\n  const { colorMode, toggleColorMode } = useColorMode();\n\n  useEffect(() => {\n    if (colorMode === 'light') {\n      toggleColorMode();\n    }\n  }, [colorMode, toggleColorMode]);\n  return null;\n}\n\nexport const App = () => {\n  const TERMS_CONDITIONS_ACCEPTED =\n    localStorage.getItem(SESSION_STORAGE_KEYS.TERMS_CONDITIONS_ACCEPTED) === 'true';\n\n  return (\n    <>\n      <Head>\n        {/* open graph */}\n        <meta property=\"og:url\" content=\"https://liquidity.synthetix.eth.limo/\" />\n        <meta property=\"og:type\" content=\"website\" />\n        <meta property=\"og:title\" content=\"Synthetix | Liquidity\" />\n        <meta\n          property=\"og:description\"\n          content=\"The Liquidity Layer of DeFi. Provide liquidity for the next generation of permissionless protocols\"\n        />\n        <meta property=\"og:image\" content=\"https://liquidity.synthetix.eth.limo/Liquidity.jpg\" />\n        <meta property=\"og:image:alt\" content=\"Synthetix | Liquidity\" />\n        <meta property=\"og:site_name\" content=\"\" />\n        {/* twitter */}\n        <meta name=\"twitter:card\" content=\"summary_large_image\" />\n        <meta name=\"twitter:site\" content=\"@synthetix_io\" />\n        <meta name=\"twitter:creator\" content=\"@synthetix_io\" />\n        <meta name=\"twitter:image\" content=\"https://liquidity.synthetix.eth.limo/Liquidity.jpg\" />\n        <meta name=\"twitter:url\" content=\"https://liquidity.synthetix.eth.limo/\" />\n      </Head>\n      <QueryClientProvider client={queryClient}>\n        <Web3OnboardProvider web3Onboard={onboard}>\n          <ChakraProvider theme={extendedTheme}>\n            <ColorMode />\n            <Fonts />\n            <GasSpeedProvider>\n              <HashRouter>\n                <TermsModal\n                  defaultOpen={process.env.NODE_ENV !== 'development' && !TERMS_CONDITIONS_ACCEPTED}\n                />\n                <Router />\n              </HashRouter>\n            </GasSpeedProvider>\n            <ReactQueryDevtools />\n          </ChakraProvider>\n        </Web3OnboardProvider>\n      </QueryClientProvider>\n    </>\n  );\n};\n","import { ComponentMultiStyleConfig } from '@chakra-ui/react';\n\nexport const Progress: ComponentMultiStyleConfig = {\n  parts: ['filledTrack', 'track'],\n  baseStyle: {\n    track: {\n      overflow: 'unset',\n      bg: 'whiteAlpha.100',\n    },\n  },\n  variants: {\n    error: (props) => ({\n      filledTrack: {\n        bg: 'error',\n        boxShadow: `0px 0px 15px ${props.theme.colors.error}`,\n      },\n    }),\n    warning: (props) => ({\n      filledTrack: {\n        bg: 'warning',\n        boxShadow: `0px 0px 15px ${props.theme.colors.warning}`,\n      },\n    }),\n    success: (props) => ({\n      filledTrack: {\n        bg: 'success',\n        boxShadow: `0px 0px 15px ${props.theme.colors.success}`,\n      },\n    }),\n    'update-error': () => ({\n      filledTrack: {\n        bg: 'red.700',\n      },\n    }),\n    'update-warning': () => ({\n      filledTrack: {\n        bg: 'orange.700',\n      },\n    }),\n    'update-success': () => ({\n      filledTrack: {\n        bg: 'green.700',\n      },\n    }),\n    white: {\n      filledTrack: {\n        bg: 'white',\n        borderRadius: 'full',\n      },\n    },\n  },\n};\n","import ReactDOM from 'react-dom/client';\nimport { App } from './App';\n\nconst container = document.querySelector('#app');\n\ndeclare global {\n  var $ethers: any; // eslint-disable-line no-var\n  var $magicWallet: `0x${string}`; // eslint-disable-line no-var\n  var $chainId: number; // eslint-disable-line no-var\n  var ethereum: any; // eslint-disable-line no-var\n}\n\nexport async function bootstrap() {\n  if (!container) {\n    throw new Error('Container #app does not exist');\n  }\n  if (window.localStorage.DEBUG === 'true' || window.localStorage.DEBUG?.slice(0, 3) === 'snx') {\n    const { Wei } = await import('@synthetixio/wei');\n    const { ethers } = await import('ethers');\n\n    function number(obj: any) {\n      if (obj.eq(ethers.constants.MaxUint256)) {\n        return 'MaxUint256';\n      }\n      if (obj.eq(ethers.constants.MaxInt256)) {\n        return 'MaxInt256';\n      }\n      if (obj.abs().gt(1e10)) {\n        // Assuming everything bigger than 1e10 is a wei\n        return `wei ${parseFloat(ethers.utils.formatEther(`${obj}`))}`;\n      }\n      return parseFloat(obj.toString());\n    }\n    // @ts-ignore\n    window.devtoolsFormatters = window.devtoolsFormatters ?? [];\n    // @ts-ignore\n    window.devtoolsFormatters.push({\n      header: function (obj: any) {\n        if (obj instanceof ethers.BigNumber) {\n          return [\n            'div',\n            { style: 'color: #6ff' },\n            ['span', {}, 'BigNumber('],\n            ['span', { style: 'color: #ff3' }, number(obj)],\n            ['span', {}, ' '],\n            ['span', { style: 'color: #3f3' }, obj.toHexString()],\n            ['span', {}, ')'],\n          ];\n        }\n        if (obj instanceof Wei) {\n          return [\n            'div',\n            { style: 'color: #6ff' },\n            ['span', {}, 'Wei('],\n            ['span', { style: 'color: #ff3' }, number(ethers.BigNumber.from(obj.toBN()))],\n            ['span', {}, ' '],\n            ['span', { style: 'color: #3f3' }, obj.toBN().toHexString()],\n            ['span', {}, ')'],\n          ];\n        }\n        return null;\n      },\n      hasBody: function () {\n        return false;\n      },\n    });\n\n    window.$magicWallet = window.localStorage.MAGIC_WALLET;\n    if (ethers.utils.isAddress(window.$magicWallet)) {\n      const rpcProvider = new ethers.providers.JsonRpcProvider('http://127.0.0.1:8545');\n      const network = await rpcProvider.getNetwork();\n      window.$chainId = network.chainId;\n\n      const { getMagicProvider } = await import('@snx-v3/useBlockchain');\n      const magicProvider = getMagicProvider();\n      window.ethereum = magicProvider\n        ? new Proxy(magicProvider, {\n            get(target: any, prop: any) {\n              // console.log('MAGIC_WALLET', prop, { target: target[prop] });\n              switch (prop) {\n                case 'chainId':\n                  return `0x${Number(window.$chainId).toString(16)}`;\n                case 'isMetaMask':\n                  return true;\n                case 'getSigner':\n                  return () => {\n                    return magicProvider.getSigner(window.$magicWallet);\n                  };\n                case 'request':\n                  return async ({ method, params }: { method: string; params: any }) => {\n                    switch (method) {\n                      case 'eth_accounts':\n                      case 'eth_requestAccounts':\n                        return [window.$magicWallet];\n                      case 'eth_chainId':\n                        return `0x${Number(window.$chainId).toString(16)}`;\n                      case 'eth_sendTransaction':\n                      default: {\n                        try {\n                          const result = await magicProvider.send(method, params);\n                          console.log('MAGIC_WALLET', { method, params, result }); // eslint-disable-line no-console\n                          return result;\n                        } catch (error) {\n                          console.log('MAGIC_WALLET', { method, params, error }); // eslint-disable-line no-console\n                          throw error;\n                        }\n                      }\n                    }\n                  };\n                default:\n                  return target[prop];\n              }\n            },\n          })\n        : undefined;\n    }\n  }\n\n  const root = ReactDOM.createRoot(container);\n  root.render(<App />);\n}\n","const { safeLazy } = require('./safeLazy');\nconst { safeImport } = require('./safeImport');\nmodule.exports = {\n  safeLazy,\n  safeImport,\n};\n","const { lazy } = require('react');\nconst { safeImport } = require('./safeImport');\n\nfunction safeLazy(importer) {\n  return lazy(() => safeImport(importer));\n}\n\nmodule.exports = {\n  safeLazy,\n};\n"],"names":["Amount","value","prefix","suffix","testid","showTooltip","formattedValue","preciseValue","isMaxUint","useMemo","eq","currency","cleanNumber","wei","replaceAll","constants","lte","toString","_jsx","Tooltip","label","_Fragment","children","_jsxs","isDisabled","defaultOpen","window","localStorage","CONTRACT_ERROR_OPEN","ContractError","contractError","isOpen","setIsOpen","React","Button","variant","onClick","color","fontWeight","fontStyle","Collapse","in","animateOpacity","Text","fontSize","name","whiteSpace","pl","Object","entries","args","map","key","val","Date","format","join","minimalWETHABI","Events","State","FailedSteps","ServiceNames","initialContext","wrapAmount","error","requireApproval","infiniteApproval","DepositMachine","createMachine","id","initial","predictableActionArguments","context","on","target","actions","assign","_","_context","event","states","cond","gt","invoke","src","onError","data","step","wrap","onDone","approve","deposit","c","DepositModalUi","collateralChange","onClose","collateralType","setInfiniteApproval","onSubmit","state","availableCollateral","poolName","title","txSummary","isProcessing","matches","isWETH","symbol","stepNumbers","LiquidityPositionUpdated","subline","Link","href","alertText","summary","ArrowBackIcon","cursor","mr","Divider","my","Multistep","subtitle","as","status","failed","disabled","success","loading","checkboxLabel","undefined","checkboxProps","isChecked","onChange","e","checked","gte","sub","width","mt","Boolean","DepositModal","liquidityPosition","setCollateralChange","useContext","ManagePositionContext","currentCollateral","collateralAmount","ZEROWEI","accountCollateral","setTxSummary","useState","currentDebt","navigate","useNavigate","collateralSymbol","poolId","accountId","useParams","queryClient","useQueryClient","network","useNetwork","CoreProxy","useCoreProxy","SpotMarketProxy","useSpotMarketProxy","useCollateralType","isBase","isBaseAndromeda","preset","wrapperToken","useGetWrapperToken","getSpotMarketId","collateralAddress","tokenAddress","collateralNeeded","useApprove","contractAddress","amount","utils","decimals","spender","address","toast","useToast","isClosable","duration","newAccountId","Math","floor","random","exec","wrapEth","wethBalance","useWrapEth","signer","useSigner","ethCollateral","ethBalance","refetch","refetchETHBalance","useEthBalance","refetchWETHBalance","useTokenBalance","mutateAsync","isPending","useMutation","mutationFn","async","contract","Contract","txn","toBN","wait","useCallback","lt","Error","isLoading","pool","usePool","execDeposit","useDeposit","collateralTypeAddress","txnState","dispatch","useReducer","reducer","initialState","priceUpdateTx","refetchPriceUpdateTx","useCollateralPriceUpdates","gasSpeed","useGasSpeed","provider","useProvider","mutation","type","walletAddress","getAddress","CoreProxyContract","ethers","abi","createAccount","populateTransaction","from","parseUnits","delegate","delegateCollateral","add","callsPromise","Promise","all","filter","notNil","calls","gasPrices","getGasPrice","unshift","multicallTxn","erc7412Tx","gasLimit","withERC7412","gasOptionsForTransaction","formatGasPriceForTransaction","sendTransaction","payload","txnHash","hash","onSuccess","settle","Number","depositBaseAndromeda","useDepositBaseAndromeda","usdTokens","useGetUSDTokens","sUSD","SpotMarketProxyContract","spotMarketId","amountD18","synthAddress","SynthContract","approveAbi","synthApproval","errorParser","useContractErrorParser","send","useMachine","services","console","closeAll","description","message","cause","debt","invalidateQueries","queryKey","resolve","wrapAmountString","isSuccessOrDeposit","useEffect","location","useLocation","handleClose","pathname","generatePath","search","txSummaryItems","items","ChangeStat","newValue","formatFn","hasChanges","abs","size","CRatioChangeStat","collateralPrice","debtChange","TransactionSummary","CheckIcon","createIcon","viewBox","path","fill","points","CloseIcon","d","StepIcon","Spinner","height","Box","__css","display","textAlign","statusColor","Step","Flex","minWidth","minHeight","justifyContent","alignItems","bg","rounded","transitionProperty","transitionDuration","StepCheckbox","props","Checkbox","opacity","position","gap","p","border","borderColor","direction","ChakraTooltip","hasArrow","borderRadius","SUSDCIcon","Icon","clipPath","Logo","withText","EthereumIcon","fillOpacity","OptimismIcon","DollarCircle","fillRule","clipRule","ArbitrumIcon","cx","cy","r","FailedIcon","w","h","x","y","filterUnits","colorInterpolationFilters","floodOpacity","result","values","stdDeviation","mode","in2","WalletIcon","LogoIcon","BaseIcon","DiscordIcon","XIcon","transform","GithubIcon","WarpcastIcon","YoutubeIcon","Sparkles","SNXChainIcon","createContext","withdrawAmount","setDebtChange","setWithdrawAmount","ManagePositionProvider","Provider","calculateCRatio","collateralValue","div","LOCAL_STORAGE_KEYS","SHOW_TESTNETS","Wei","ONEWEI","GWEI_DECIMALS","GAS_LIMIT_MULTIPLIER","DEFAULT_QUERY_STALE_TIME","INFURA_KEY","getSubgraphUrl","networkName","getAprUrl","networkId","SESSION_STORAGE_KEYS","TERMS_CONDITIONS_ACCEPTED","offchainMainnetEndpoint","offchainTestnetEndpoint","importAccountProxy","chainId","deployment","toFixed","default","meta","contracts","AccountProxy","importAllErrors","importClosePosition","importCoreProxy","importMulticall3","TrustedMulticallForwarder","optimism","multicall3","importPythERC7412Wrapper","PythERC7412Wrapper","importPythFeeds","pythFeeds","importPythVerfier","importUSDProxy","USDProxy","useClosePosition","customNetwork","targetNetwork","useQuery","enabled","queryFn","staleTime","Infinity","throwOnError","useDebtRepayer","importDebtRepayer","importSpotMarketProxy","useSystemToken","systemToken","importSystemToken","useUSDProxy","prettyString","text","startLength","endLength","length","substring","options","minimumDigitsToShowAfterZeros","stringValue","numberValue","toNumber","maximumFractionDigits","log10","isNaN","toLocaleString","minimumFractionDigits","toLowerCase","USDC_BASE_MARKET","STATA_BASE_MARKET","contractsHash","Contracts","some","stringToHash","s","split","reduce","a","b","charCodeAt","modalOpen","txnStatus","action","loadAccountCollateral","tokenAddresses","callsP","flatMap","getAccountAvailableCollateral","getAccountCollateral","decoder","multicallEncoded","Array","isArray","i","interface","decodeFunctionResult","totalAssigned","totalDeposited","totalLocked","displaySymbol","useAccountCollaterals","collateralTypes","useCollateralTypes","concat","allCalls","getPriceUpdates","getPythFeedIds","catch","erc7412Call","find","useAccountCollateral","accountCollaterals","isPendingAccountCollaterals","token","AllowanceSchema","ZodBigNumber","eventHandlers","allowance","refetchAllowance","useAllowance","activeWallet","useWallet","useDefaultProvider","accountAddress","parse","sufficientAllowance","amountToAppove","gasPricesPromised","gasLimitPromised","estimateGas","populatedTxnPromised","connect","populatedTxn","useApr","chain","fetchApr","supportedAprNetworks","BASE_ANDROMEDA","ARBITRUM","MAINNET","isSupported","includes","response","fetch","json","highestAprCollateral","sort","apr7d","combinedApr","cumulativePnl","collateralAprs","MagicProvider","constructor","$chainId","$magicWallet","super","defineProperty","this","enumerable","writable","magicWallet","method","params","log","getMagicProvider","NetworkIcon","hexId","rpcUrl","DEFAULT_INFURA_KEY","publicRpcUrl","isTestnet","OPTIMISM","SEPOLIA","BASE_SEPOLIA","CANNON","OPTIMISM_SEPOLIA","ARBITRUM_SEPOLIA","SNAX","SNAXTESTNET","NETWORKS","deploymentHasERC7412","then","getItem","appMetadata","icon","logo","recommendedInjectedWallets","url","gettingStartedGuide","explore","useProviderForChain","activeNetwork","isDefaultChain","wallet","disconnect","useConnectWallet","walletsInfo","accounts","connectedChain","setChain","useSetChain","setNetwork","newNetwork","n","useIsConnected","getSigner","useBorrow","mintUsd","priceService","EvmPriceServiceConnection","getAllPriceIdsEntries","extras","Set","String","startsWith","endsWith","getPythFeedIdsFromCollateralList","collateralList","priceIds","networksOffline","importExtras","flat","deduped","priceId","replace","toUpperCase","collateral","unique","signedOffchainData","getPriceFeedsUpdateData","PythVerfier","to","encodeFunctionData","useOfflinePrices","collaterals","stables","filteredCollaterals","item","returnData","price","collateralsWithPriceId","prices","getLatestPriceFeeds","forEach","col","getPriceUnchecked","push","expo","refetchInterval","currentNetwork","multicallAddress","multiCallAbi","multicallInterface","pythInterface","pythFeedIds","txs","callData","requireSuccess","getPricesTx","call","decodedMultiCall","outdatedPriceIds","loadCollateralTypes","collateralTokens","importCollateralTokens","config","depositingEnabled","issuanceRatioD18","liquidationRatioD18","liquidationRewardD18","minDelegationD18","oracleNodeId","oracle","constPrice","externalContract","stalenessTolerance","pythFeedId","includeDelegationOff","placeholderData","isFetching","isCollateralTypesFetching","getCollateralType","ERC721_ERRORS","AllErrors","useAllErrors","ClosePosition","errorData","extractErrorData","errorParsed","PYTH_ERRORS","parseError","errorArgs","fromEntries","parseInt","unwei","parseFloat","getTime","signature","BalanceSchema","getBalance","GAS_LIMIT_BUFFER","addGasLimitBuffer","mul","gasPrice","baseFeePerGas","_baseFeePerGas","gasPriceToReturn","isNumber","subject","ema","dma","alpha","noHead","slice","noArrayWeight","ret","datum","o","rewardsFilterOutliers","blocksRewards","outlierBlocks","rewardIndex","index","reward","defaultForLocalProvider","maxFeePerGas","maxPriorityFeePerGas","average","fast","fastest","getBlock","fromBlock","feeHistory","feeHistoryResponse","num","at","getOutlierBlocksToRemove","blocks","gweiReward","blocksRewardsPerc15","blocksRewardsPerc30","blocksRewardsPerc45","emaPerc15","emaPerc30","emaPerc45","averageMaxPriorityFee","min","fastMaxPriorityFee","fastestMaxPriorityFee","baseFeeToMax","base","prio","feeSuggestion","getGasPriceFromProvider","GasSpeedContext","setGasSpeed","GasSpeedProvider","USDC","getWrapper","wrapCollateralType","snxUSD","marketId","cleanObject","cleaned","pathParams","useParamsRouter","queryParams","useSearchParams","sortObject","searchParams","localeCompare","usePools","preferredPoolId","approvedPoolIds","getPreferredPool","getApprovedPools","incompletePools","isPreferred","poolNames","getPoolName","pools","usePoolsList","aprs","fetchPoolsList","fetchAprs","synthetixPools","apr","poolInfo","supportedNetworks","fetchTorosPool","headers","body","JSON","stringify","query","variables","tvl","compactInteger","fund","totalValue","apy","weekly","urls","PoolsListData","res","vaults","useRepay","availableUSDCollateral","debtChangeAbs","amountToDeposit","burn","burnUsd","TokenContract","balance","balanceOf","select","useTokenBalances","setQueryData","balances","useUndelegate","useUndelegateBaseAndromeda","debtExists","DebtRepayer","transactions","depositDebtToRepay","IS_DEBUG","DEBUG","fetchOffchainData","content","reason","decode","getDefaultFromAddress","chainName","logMulticall","CoryProxyContract","AccountProxyContract","USDProxyContract","ClosePositionContract","AllInterface","rest","parseTransaction","keys","$","unnamedArgs","extractPriceId","parsedError","_oracleAddress","oracleQuery","_updateType","_stalenessTolerance","getMulticallTransaction","Multicall3Contract","Multicall3Interface","_calls","jsonRpcProvider","AllErrorsContract","line","transaction","newError","missingPriceUpdates","err","parsedErr","missingPriceUpdatesUnique","extraPriceUpdateTxn","newCalls","responseWithoutPriceUpdates","decoded","z","custom","BigNumber","isBigNumber","SmallIntSchema","WeiSchema","styles","sm","lineHeight","md","lg","dataCy","withColor","ArrowForwardIcon","flexDir","Heading","Alert","colorScheme","background","flex","justify","flexGrow","gradients","grey","dark","orange","defaultProps","variants","solid","defineStyle","_hover","_disabled","_active","bgGradient","hoverBg","activeBg","outline","ghost","theme","extendTheme","useSystemColorMode","initialColorMode","colors","gray","red","yellow","green","blue","cyan","purple","pink","navy","warning","shadows","fonts","heading","mono","components","Popover","responsive","popper","maxWidth","Input","focusBorderColor","errorBorderColor","Select","iconColor","NumberInput","container","borderInlineStartColor","Textarea","Skeleton","startColor","endColor","baseStyle","control","_checked","_invalid","Radio","Badge","subtle","boxShadow","Tag","Accordion","borderWidth","Progress","filledTrack","track","Tabs","tab","_selected","Switch","Menu","parts","button","span","px","list","bgColor","padding","py","_first","borderTopLeftRadius","borderTopRightRadius","_last","borderBottomLeftRadius","borderBottomRightRadius","_focus","textStyles","fontFamily","sizes","max","full","xs","xl","global","Fonts","Global","TermsModal","setOpen","setEnabled","Modal","ModalOverlay","ModalContent","pt","pb","ModalHeader","ModalBody","onScroll","currentTarget","scrollTop","scrollHeight","offsetHeight","overflow","overflowX","sx","backgroundColor","UnorderedList","ListItem","_focusVisible","ReactRouterLink","mx","setItem","set","useLocalStorage","initialValue","storedValue","setStoredValue","get","valueToStore","Function","useAccountProxy","useMulticall3","useAccounts","Multicall3","numberOfAccountTokens","callStatic","aggregate","mainnets","testnets","NetworkController","toolTipLabel","setTooltipLabel","isAccountsLoading","isAccountsFetching","client","tx","logs","topics","getEventTopic","decodeEventLog","useCreateAccount","showTestnets","setShowTestnets","delete","defaultWallet","autoSelect","disableModals","lastUsedAccount","account","notConnected","notSupported","MenuButton","MenuList","MenuItem","ml","MenuOptionGroup","placement","userSelect","ens","stopPropagation","removeItem","closeOnClick","CopyIcon","navigator","clipboard","writeText","setTimeout","IconButton","SettingsIcon","preventDefault","mutate","leftIcon","xmlns","TokenIcon","Image","fallback","fallbackSrc","alt","style","NUMBER_REGEX","cleanupNumber","float","InputProps","inputValue","setInputValue","onInputChange","_value","test","nextValue","_err","ref","useRef","current","setCustomValidity","autoFocus","placeholder","_placeholder","maxLength","BorderBox","useV2xSynthetix","V2x","importV2x","useV2sUSD","V2xSynthetix","V2xSynthetixContract","synths","StepIntro","onConfirm","setAmount","loaded","setLoaded","v2_sUSD","v2_balance","v3_sUSD","v3_balance","VStack","flexDirection","isRequired","AlertIcon","AlertDescription","useLegacyMarket","LegacyMarketProxy","importLegacyMarket","parseTxError","StepSuccess","v2Balance","v3Balance","spacing","mb","ArrowUpIcon","MigrateUSDTransaction","onBack","legacyMarket","txState","setTxState","migrate","isSuccess","setIsLoading","setIsSuccess","LegacyMarket","LegacyMarketContract","convertUSD","LegacyMarketInterface","errorResult","useMigrateUSD","StepSuccessFinal","MigrateUSDModal","setStep","handleConfirm","URLSearchParams","closeOnOverlayClick","CloseButton","MigrateUSDButton","convert","Header","useDisclosure","borderBottomWidth","borderBottomColor","Container","maxW","RouterLink","textDecoration","_activeLink","pr","flexWrap","Footer","borderTop","borderTopColor","DefaultLayout","Outlet","NotFoundPage","t","useTranslation","Head","NavLink","CollateralAlert","tokenBalance","borderLeftColor","UnsupportedCollateralAlert","useSynthTokens","synthTokens","importSynthTokens","useRewardsDistributors","rewardsDistributors","importRewardsDistributors","RewardsResponseSchema","array","object","string","payoutTokenAddress","optional","distributorAddress","number","claimableAmount","instanceof","lifetimeClaimed","RewardsDataDocument","RewardsDistributionsDocument","useRewards","filteredDistributors","distributor","isRegistered","historicalData","metaData","getAvailableRewards","multicallData","amounts","sortedBalances","historicalClaims","rewardsClaimeds","distributions","rewardsDistributions","payoutToken","synthToken","synth","acc","etherscanLink","isTx","WithdrawIncrease","AllRewardsModal","rewards","CircularProgress","isIndeterminate","RewardsLoading","Tr","borderBottom","Td","SkeletonCircle","truncateAddress","first","last","RewardsRow","Fade","Rewards","allRewards","claimAll","claimRewards","unwrap","synthMarketId","claimedAmount","useClaimAllRewards","backgroundImage","TableContainer","Table","Thead","Th","textTransform","letterSpacing","InfoIcon","Tbody","SynthSkeleton","SynthCircle","StatBox","isLoaded","PriceSchema","loadPrices","collateralAddresses","getCollateralPrice","encoded","pricesEncoded","keyBy","PositionCollateralSchema","DebtSchema","loadPosition","getPositionCollateral","getPositionDebt","decodedCollateral","decodedDebt","useLiquidityPositions","positionCallsAndData","priceCalls","priceDecoder","positionCalls","availableCollateralCalls","singlePositionDecoder","pricesByAddress","positionData","availableCollaterals","encode","availableCollateralByAddress","cRatio","StatsList","liquidityPositions","isPendingLiquidityPositions","isPendingCollateralTypes","userTokenBalances","isPendingTokenBalances","associatedUserBalances","collateralPrices","isPendingCollateralPrices","collateralData","connectedProvider","offlineProvider","useCollateralPrices","assets","USDCAddress","filteredAccountCollaterals","calculateAssets","positions","prev","cur","totalAssets","asset","calculateTotalAssetsAvailable","calculateTotalAssetsLocked","fetchOraclePrice","nodeId","OracleManagerProxyContract","OracleManagerProxy","importOracleManagerProxy","processCall","process","node","timestamp","useOraclePrice","useTokenPrice","pythCollateralPrices","omCollateralPrices","oracleId","omPrices","useAccountCollateralUnlockDate","lastInteraction","accountTimeoutWithdraw","getAccountLastInteraction","getConfigUint","collateralUnlock","useWithdrawTimer","accountCollateralUnlockDate","isLoadingDate","minutes","hours","seconds","isRunning","restart","useTimer","expiryTimestamp","autoStart","getHealthVariant","targetCratio","liquidationCratio","ratioIsMaxUInt","ratio","MAX_SAFE_INTEGER","getProgressSize","CRatioAmount","badgeColors","CRatioBadge","DebtAmount","showPNL","PositionRow","final","rewardsData","handleNavigate","hasRewards","curr","TimeIcon","PositionsRowLoading","rows","row","PositionsTable","borderCollapse","borderSpacing","PositionTableHeader","TableDivider","positionApr","systemTokenSymbol","PositionsEmpty","PositionsNotConnected","PositionsList","isPendingSystemToken","positionsByKey","positionsIds","calculatePositions","parsedPositions","validatePosition","targetCRatio","newDebt","newCollateralAmount","newCollateralValue","newCRatio","maybeMaxDebt","maxDebt","isValid","Borrow","actualMaxDebt","useTransferableSynthetix","snxCollateral","snxAddress","transferable","transferableSynthetix","formatNumberToUsd","Intl","NumberFormat","formatNumber","DepositUi","snxBalance","minDelegation","combinedTokenBalance","maxAmount","overAvailableBalance","alignSelf","Deposit","transferrableSnx","balanceAddress","Withdraw","isDebtWithdrawal","systemTokenBalance","maxWithdrawable","unlockDate","COLLATERALACTIONS","link","RepayModal","lazy","safeImport","BorrowModal","ClaimModal","UndelegateModal","WithdrawModal","ManageActionSchema","enum","getInitialTab","manageAction","aciton","ManageAction","setTxnModalOpen","txnModalOpen","parsedActionParam","safeParse","parsedAction","isFormValid","reportValidity","setActiveAction","setTab","debtActions","DEBTACTIONS","isFitted","TabList","Tab","TabPanels","TabPanel","minH","Claim","Repay","Undelegate","Suspense","usdCollateral","LineWithText","left","tooltipText","top","bottom","margin","CRatioBarUi","currentCRatio","newCratio","newBarSize","currentBarSize","TriangleDownIcon","right","TriangleUpIcon","CRatioBar","CollateralStats","DebtStats","PnlStats","ManageStatsUi","ManageStats","align","List","ListIcon","Spacer","StepExplain","origin","isExternal","useV2Position","V2xSynthetixInterface","cratio","StepSummary","isUnderstanding","setIsUnderstanding","signerAddress","feeData","getFeeData","useMigrate","rates","mainnetProvider","ExchangeRates","ratesForCurrencies","formatBytes32String","snx","eth","useRates","snxPrice","ethPrice","handleSubmit","HStack","formatEther","MigrationDialog","MigrationBanner","setAccountId","isUSDModalOpen","setIsUSDModalOpen","rel","InitialDepositUi","hasAccount","InitialDeposit","submit","PositionTitle","collateralDisplayName","useCollateralDisplayName","NoPosition","RepayAllDebt","snxUSDBalance","neg","sufficientBalance","execRepay","settleRepay","useClearDebt","approvalLoading","MarketConfigurationSchema","weight","maxDebtShareValue","isLocked","boolean","PoolConfigurationSchema","markets","isAnyMarketLocked","isLockedSchema","UndelegateUi","isLoadingRequiredData","onMaxClick","leftoverCollateral","isValidLeftover","isInputDisabled","isSubmitDisabled","AlertTitle","poolConfiguration","getPoolConfiguration","maxDebtShareValueD18","weightD18","m","isMarketCapacityLocked","market","usePoolConfiguration","minCollateralRequired","VaultCollateralSchema","VaultDebtSchema","formatApr","CollateralSection","vaultsData","isVaultsLoading","useVaultsData","tokens","collateralCallsP","getVaultCollateral","debtCallsP","getVaultDebt","multicallResult","collateralResult","debtResult","bytes","debtBytes","CoreProxyInterface","aprData","isAprLoading","totalCollateral","totalDebt","zeroValues","calculateVaultTotals","isInTotalProfit","vaultCollateral","collateralApr","collateralAprData","apr28d","apr28dRewards","apr28dPnl","isInProfit","borderTopWidth","formatPercent","Specifics","isToros","yieldOnYieldSvg","PoolRow","apr7dRewards","apr7dPnl","buttonText","collateralDeposited","minW","PoolCard","ChainFilter","activeChains","isAllActive","isActive","toggle","supportedCollateralTypes","CollateralFilter","activeCollaterals","wstETH","TorosPoolCard","vault","LinkOffIcon","PoolCardsLoading","Balloon","stroke","strokeWidth","mask","PoolsList","poolsReducer","chains","isPoolsListLoading","BaseCollateralTypes","isBaseCollateralLoading","ArbitrumCollateralTypes","isArbCollateralLoading","MainnetCollateralTypes","isMainCollateralLoading","allCollaterals","isLoadingCollateralPrices","stata","stataPrice","isStataPriceLoading","ArbitrumRewards","isArbitrumRewardsLoading","BaseRewards","isBaseRewardsLoading","MainRewards","isMainRewardsLoading","filteredPools","collateral_type","total_amount_deposited","isCollateralFiltered","allCollateralPrices","filteredCollateralTypes","rewardsPayoutTokens","PoolHeader","charAt","ClaimUi","maxClaimble","WatchAccountBanner","setIsLoaded","Dashboard","Helmet","Home","GraphBigIntSchema","GraphBigDecimalSchema","calculateMarketPnl","netIssuance","reportedDebt","MarketSnapshotByWeekSchema","usd_deposited","usd_withdrawn","net_issuance","reported_debt","updated_at","updates_in_period","pnl","MarketSchema","market_snapshots_by_week","max_debt_share_value","RewardDistributorSchema","total_distributed","rewards_distributions","created_at","PoolSchema","union","null","total_weight","configurations","registered_distributors","PoolDataResultSchema","PoolsDataDocument","usePoolData","poolData","errors","getPoolData","usePythFeeds","usePythVerifier","debug","fetchPositionDebt","collateralTypeTokenAddress","positionDebt","fetchPositionDebtWithPriceUpdate","priceUpdateTxn","MulticallInterface","ok","getPositionDebtTxn","decodedMulticall","getPositionDebtTxnData","fetchPriceUpdateTxn","PythVerifierInterface","useErrorParser","useSynthetix","usePriceUpdateTxn","Multicall","toHexString","MulticallContract","getAccountCollateralTxn","getAccountCollateralTxnData","fetchAccountCollateralWithPriceUpdate","fetchAccountCollateral","retry","retryDelay","attempt","usePositionDebt","ClosePositionOneStep","execClosePosition","freshPriceUpdateTxn","freshPositionDebt","adjustedAllowance","approveAccountTx","approveUsdTx","closePositionTx","closePosition","receipt","ClosePositionTransactions","steps","setSteps","debtSymbol","undelegate","approveUSDC","requireApprovalUSDC","undelegateBaseAndromeda","execBorrow","getSteps","cb","useAccountAvailableCollateral","accountAvailableCollateral","fetchAccountAvailableCollateral","ClosePositionUi","isPendingPositionDebt","isPendingSystemTokenBalance","isPendingAccountAvailableCollateral","debtPrice","ClosePositionDeployment","transactionStep","setTransactions","ManageLoading","ManageUi","setClosePosition","Manage","useNormalisedCollateralSymbol","isPendingLiquidityPosition","useLiquidityPosition","positionDecoder","accountCollateralCalls","accountCollateralDecoder","endOfPrice","startOfPosition","endOfPosition","startOfAccountCollateral","decodedPosition","isPendingCollaterals","hasPosition","hasAvailableCollateral","HomeLink","Pool","Pools","useManagePermissions","existing","selected","grants","revokes","getPermissionDiff","permission","grantCalls","allowFailure","revokeCalls","aggregate3","Address","ExternalLinkIcon","permissionsList","useAccountPermissions","getAccountPermissions","user","permissions","useAccountOwner","ownerOf","PermissionsInfo","PermissionModal","existingPermissions","setAddress","selectedPermissions","setSelectedPermissions","permissionData","accountOwner","isAddressValid","ModalCloseButton","trim","isInvalid","ModalFooter","PermissionRow","currentPermissions","isOwner","isPermissionOpen","onPermissionClose","onOpen","onPermissionOpen","removePermissions","EditIcon","DeleteIcon","TransferOwnershipModal","owner","setTo","transferFrom","useTransferAccountId","isTargetValid","PermissionTableLoading","PermissionTable","refetchAccounts","isTransferOpen","onTransferClose","onTransferOpen","loadingOwner","refetchAccountOwner","DelegationIcon","Permissions","Settings","isConnected","Router","Routes","Route","element","onboard","init","wallets","coinbaseModule","injectedModule","displayUnavailable","ProviderLabel","MetaMask","Trust","trezorModule","appUrl","email","ledgerModule","projectId","walletConnectVersion","walletConnectModule","version","dappUrl","gnosisModule","accountCenter","desktop","mobile","notify","QueryClient","defaultOptions","queries","refetchOnWindowFocus","mutations","extendedTheme","update-error","update-warning","update-success","white","ColorMode","colorMode","toggleColorMode","useColorMode","App","property","QueryClientProvider","Web3OnboardProvider","web3Onboard","ChakraProvider","HashRouter","ReactQueryDevtools","document","querySelector","bootstrap","obj","MaxUint256","MaxInt256","devtoolsFormatters","header","hasBody","MAGIC_WALLET","isAddress","rpcProvider","providers","JsonRpcProvider","getNetwork","magicProvider","ethereum","Proxy","prop","ReactDOM","render","safeLazy","module","exports","importer"],"sourceRoot":""}