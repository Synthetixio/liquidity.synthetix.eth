"use strict";(globalThis.webpackChunk_snx_v3_liquidity=globalThis.webpackChunk_snx_v3_liquidity||[]).push([[3929],{63929:(e,t,r)=>{r.r(t),r.d(t,{BorrowModal:()=>O,BorrowModalUi:()=>S,default:()=>_});var s=r(75429),n=r(11082),o=r(59176),i=r(74008),a=r(84626),l=r(70065),c=r(38035),d=r(56317),u=r(45071),x=r(42219),h=r(99581),p=r(77528),b=r(13797),g=r(25042),y=r(908),w=r(86689),j=r(63322),m=r(8176),C=r(89536),f=r(89990),k=r(28145),v=r(2784),D=r(21849),B=r(52322);const S=({onClose:e,isOpen:t,debtChange:r,txnStatus:l,execBorrow:c})=>{const{network:d}=(0,y.LN)(),x=(0,p.Yz)(d?.id,d?.preset),{data:h}=(0,f.p)();if(t)return"success"===l?(0,B.jsx)(D.s,{onClose:e,title:"Debt successfully Updated",subline:(0,B.jsxs)(B.Fragment,{children:["Your ",(0,B.jsx)("b",{children:"Debt"})," has been updated, read more about it in the"," ",(0,B.jsx)(n.r,{href:"https://docs.synthetix.io/v/synthetix-v3-user-documentation",target:"_blank",color:"cyan.500",children:"Synthetix V3 Documentation"})]}),alertText:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("b",{children:"Debt"})," successfully Updated"]})}):(0,B.jsxs)("div",{"data-cy":"borrow multistep",children:[(0,B.jsxs)(o.x,{color:"gray.50",fontSize:"20px",fontWeight:700,children:[(0,B.jsx)(s.R,{cursor:"pointer",onClick:e,mr:2}),"Manage Debt"]}),(0,B.jsx)(i.i,{my:4}),(0,B.jsx)(g.P0,{step:1,title:"Borrow",subtitle:(0,B.jsxs)(o.x,{as:"div",children:[x?"Claim":"Borrow"," ",(0,B.jsx)(u.$,{value:r,suffix:x?" USDC":` ${h?.symbol}`})]}),status:{failed:"error"===l,loading:["prompting","pending"].includes(l)}}),(0,B.jsx)(a.z,{isDisabled:"pending"===l,onClick:()=>{["unsent","error"].includes(l)&&c()},width:"100%",mt:"6","data-cy":"borrow confirm button",children:(()=>{switch(l){case"error":return"Retry";case"pending":case"prompting":return"Processing...";default:return"Execute Transaction"}})()})]})},O=({onClose:e,isOpen:t})=>{const{debtChange:r,setDebtChange:s}=(0,v.useContext)(b.n),n=(0,k.useQueryClient)(),o=(0,C.UO)(),{data:a}=(0,j.t)(o.collateralSymbol),{exec:u,txnState:p,settle:g}=(0,w.h)({accountId:o.accountId,poolId:o.poolId,collateralTypeAddress:a?.tokenAddress,debtChange:r}),f=(0,l.p)({isClosable:!0,duration:9e3}),{network:D}=(0,y.LN)(),O=(0,m.o)(),_=(0,v.useCallback)((async()=>{try{await u(),n.invalidateQueries({queryKey:[`${D?.id}-${D?.preset}`,"LiquidityPosition"],exact:!1}),s(x.GH)}catch(e){const t=O(e);throw t&&console.error(new Error(t.name),t),f.closeAll(),f({title:"Borrow failed",description:t?(0,B.jsx)(h.M,{contractError:t}):"Please try again.",status:"error",variant:"left-accent",duration:36e5}),Error("Borrow failed",{cause:e})}}),[u,n,D?.id,D?.preset,s,O,f]),{txnStatus:I}=p;return o.poolId&&o.accountId&&a?(0,B.jsx)(S,{execBorrow:_,debtChange:r,txnStatus:I,onClose:()=>{g(),e()},isOpen:t}):(0,B.jsxs)(c.k,{gap:4,flexDirection:"column",children:[(0,B.jsx)(d.O,{maxW:"232px",width:"100%",height:"20px"}),(0,B.jsx)(i.i,{my:4}),(0,B.jsx)(d.O,{width:"100%",height:"20px"}),(0,B.jsx)(d.O,{width:"100%",height:"20px"})]})},_=O}}]);
//# sourceMappingURL=3929.461f6a7d.js.map