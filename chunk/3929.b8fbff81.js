"use strict";(globalThis.webpackChunk_snx_v3_liquidity=globalThis.webpackChunk_snx_v3_liquidity||[]).push([[3929],{63929:(e,t,r)=>{r.r(t),r.d(t,{BorrowModal:()=>_,BorrowModalUi:()=>O,default:()=>I});var s=r(11082),n=r(59176),o=r(74008),i=r(84626),a=r(70065),l=r(38035),c=r(56317),d=r(45071),u=r(25042),x=r(2784),h=r(89536),p=r(13797),b=r(64996),g=r(40109),y=r(97721),w=r(99581),j=r(28145),m=r(908),C=r(86689),f=r(77528),k=r(75429),v=r(21849),D=r(73635),B=r(42219),S=r(52322);const O=({onClose:e,isOpen:t,debtChange:r,txnStatus:a,execBorrow:l})=>{const{network:c}=(0,m.LN)(),x=(0,f.Yz)(c?.id,c?.preset),{data:h}=(0,D.p)();if(t)return"success"===a?(0,S.jsx)(v.s,{onClose:e,title:"Debt successfully Updated",subline:(0,S.jsxs)(S.Fragment,{children:["Your ",(0,S.jsx)("b",{children:"Debt"})," has been updated, read more about it in the"," ",(0,S.jsx)(s.r,{href:"https://docs.synthetix.io/v/synthetix-v3-user-documentation",target:"_blank",color:"cyan.500",children:"Synthetix V3 Documentation"})]}),alertText:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("b",{children:"Debt"})," successfully Updated"]})}):(0,S.jsxs)("div",{"data-cy":"borrow multistep",children:[(0,S.jsxs)(n.x,{color:"gray.50",fontSize:"20px",fontWeight:700,children:[(0,S.jsx)(k.R,{cursor:"pointer",onClick:e,mr:2}),"Manage Debt"]}),(0,S.jsx)(o.i,{my:4}),(0,S.jsx)(u.P0,{step:1,title:"Borrow",subtitle:(0,S.jsxs)(n.x,{as:"div",children:[x?"Claim":"Borrow"," ",(0,S.jsx)(d.$,{value:r,suffix:x?" USDC":` ${h?.symbol}`})]}),status:{failed:"error"===a,loading:["prompting","pending"].includes(a)}}),(0,S.jsx)(i.z,{isDisabled:"pending"===a,onClick:()=>{["unsent","error"].includes(a)&&l()},width:"100%",mt:"6","data-cy":"borrow confirm button",children:(()=>{switch(a){case"error":return"Retry";case"pending":case"prompting":return"Processing...";default:return"Execute Transaction"}})()})]})},_=({onClose:e,isOpen:t})=>{const{debtChange:r,setDebtChange:s}=(0,x.useContext)(p.n),n=(0,j.useQueryClient)(),i=(0,h.UO)(),{data:d}=(0,b.t)(i.collateralSymbol),{exec:u,txnState:f,settle:k}=(0,C.h)({accountId:i.accountId,poolId:i.poolId,collateralTypeAddress:d?.tokenAddress,debtChange:r}),v=(0,a.p)({isClosable:!0,duration:9e3}),{data:D}=(0,g.a)(),{network:_}=(0,m.LN)(),I=(0,y.o)(D),T=(0,x.useCallback)((async()=>{try{await u(),n.invalidateQueries({queryKey:[`${_?.id}-${_?.preset}`,"LiquidityPosition"],exact:!1}),s(B.GH)}catch(e){const t=I(e);throw t&&console.error(new Error(t.name),t),v.closeAll(),v({title:"Borrow failed",description:t?(0,S.jsx)(w.M,{contractError:t}):"Please try again.",status:"error",variant:"left-accent"}),Error("Borrow failed",{cause:e})}}),[u,n,_?.id,_?.preset,s,I,v]),{txnStatus:U}=f;return i.poolId&&i.accountId&&d?(0,S.jsx)(O,{execBorrow:T,debtChange:r,txnStatus:U,onClose:()=>{k(),e()},isOpen:t}):(0,S.jsxs)(l.k,{gap:4,flexDirection:"column",children:[(0,S.jsx)(c.O,{maxW:"232px",width:"100%",height:"20px"}),(0,S.jsx)(o.i,{my:4}),(0,S.jsx)(c.O,{width:"100%",height:"20px"}),(0,S.jsx)(c.O,{width:"100%",height:"20px"})]})},I=_}}]);
//# sourceMappingURL=3929.b8fbff81.js.map