"use strict";(globalThis.webpackChunk_snx_v3_liquidity=globalThis.webpackChunk_snx_v3_liquidity||[]).push([[4249],{44249:(e,t,s)=>{s.r(t),s.d(t,{ClaimModal:()=>O,ClaimModalUi:()=>q,default:()=>S});var i=s(75429),r=s(11082),n=s(59176),o=s(74008),a=s(84626),l=s(70065),c=s(38035),d=s(56317),u=s(45071),x=s(42219),h=s(99581),p=s(77528),b=s(13797),m=s(25042),y=s(908),g=s(86689),C=s(64996),j=s(85619),w=s(89536),f=s(73635),k=s(79929),v=s(28145),D=s(2784),B=s(21849),$=s(52322);const q=({symbol:e,onClose:t,isOpen:s,debtChange:l,txnStatus:c,execBorrow:d})=>{const{network:x}=(0,y.LN)(),h=(0,p.Yz)(x?.id,x?.preset);if(s)return"success"===c?(0,$.jsx)(B.s,{onClose:t,title:"Debt successfully Updated",subline:(0,$.jsxs)($.Fragment,{children:["Your ",(0,$.jsx)("b",{children:"Debt"})," has been updated, read more about it in the"," ",(0,$.jsx)(r.r,{href:"https://docs.synthetix.io/v/synthetix-v3-user-documentation",target:"_blank",color:"cyan.500",children:"Synthetix V3 Documentation"})]}),alertText:(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("b",{children:"Debt"})," successfully Updated"]})}):(0,$.jsxs)("div",{"data-cy":"claim multistep",children:[(0,$.jsxs)(n.x,{color:"gray.50",fontSize:"20px",fontWeight:700,children:[(0,$.jsx)(i.R,{cursor:"pointer",onClick:t,mr:2}),"Manage Debt"]}),(0,$.jsx)(o.i,{my:4}),(0,$.jsx)(m.P0,{step:1,title:h?"Claim":"Borrow",subtitle:(0,$.jsxs)(n.x,{as:"div",children:[h?"Claim":"Borrow",(0,$.jsx)(u.$,{prefix:" ",value:l,suffix:` ${e}`})]}),status:{failed:"error"===c,loading:["prompting","pending"].includes(c)}}),(0,$.jsx)(a.z,{isDisabled:["pending","prompting"].includes(c),onClick:()=>{["unsent","error"].includes(c)&&d()},width:"100%",mt:"6","data-cy":"claim confirm button",children:(()=>{switch(c){case"error":return"Retry";case"pending":case"prompting":return"Processing...";default:return"Execute Transaction"}})()})]})},O=({onClose:e,isOpen:t,liquidityPosition:s})=>{const{debtChange:i,setDebtChange:r}=(0,D.useContext)(b.n),n=(0,v.useQueryClient)(),a=(0,w.UO)(),{network:u}=(0,y.LN)(),m=(0,p.Yz)(u?.id,u?.preset),{data:B}=(0,C.t)(a.collateralSymbol),{data:O}=(0,f.p)(),S=(0,D.useMemo)((()=>!s||s?.debt.gte(0)?x.GH:(0,k.wei)(s.debt.abs().toBN().sub(1))),[s]),_=(0,D.useMemo)((()=>i.gt(S)&&!m),[i,m,S]),{exec:I,txnState:M,settle:T}=(0,g.h)({accountId:a.accountId,poolId:a.poolId,collateralTypeAddress:B?.tokenAddress,debtChange:i}),P=(0,l.p)({isClosable:!0,duration:9e3}),U=(0,j.o)(),z=(0,D.useCallback)((async()=>{try{await I(),n.invalidateQueries({queryKey:[`${u?.id}-${u?.preset}`,"LiquidityPosition"],exact:!1}),n.invalidateQueries({queryKey:[`${u?.id}-${u?.preset}`,"TokenBalance"]}),n.invalidateQueries({queryKey:[`${u?.id}-${u?.preset}`,"AccountCollateralUnlockDate"]}),r(x.GH)}catch(e){const t=U(e);throw t&&console.error(new Error(t.name),t),P.closeAll(),P({title:_?"Borrow":"Claim failed",description:t?(0,$.jsx)(h.M,{contractError:t}):"Please try again.",status:"error",variant:"left-accent"}),Error(_?"Borrow":"Claim failed",{cause:e})}}),[I,n,u?.id,u?.preset,r,U,P,_]),{txnStatus:A}=M;return a.poolId&&a.accountId&&B&&O?(0,$.jsx)(q,{execBorrow:z,debtChange:i,txnStatus:A,onClose:()=>{T(),e()},isOpen:t,symbol:m?B.symbol:O.symbol}):(0,$.jsxs)(c.k,{gap:4,flexDirection:"column",children:[(0,$.jsx)(d.O,{maxW:"232px",width:"100%",height:"20px"}),(0,$.jsx)(o.i,{my:4}),(0,$.jsx)(d.O,{width:"100%",height:"20px"}),(0,$.jsx)(d.O,{width:"100%",height:"20px"})]})},S=O}}]);
//# sourceMappingURL=4249.1ee13bfd.js.map